(self.webpackChunkvideoWebRTC=self.webpackChunkvideoWebRTC||[]).push([[179],{2011:(pt,de,F)=>{"use strict";F.d(de,{Dh:()=>K,GT:()=>d,cc:()=>Ce,hO:()=>Qe,on:()=>Y,pX:()=>fe,xv:()=>J});var O=F(4650),H=F(9260),U=F(2122);pt=F.hmd(pt);const ce=["ngOnDestroy"],fe=(X,he,ie,me={})=>new Proxy(X,{get:(Be,Te)=>ie.runOutsideAngular(()=>{var Ke;if(X[Te])return!(null===(Ke=me?.spy)||void 0===Ke)&&Ke.get&&me.spy.get(Te,X[Te]),X[Te];if(ce.indexOf(Te)>-1)return()=>{};const ve=he.toPromise().then(xe=>{const Le=xe&&xe[Te];return"function"==typeof Le?Le.bind(xe):Le&&Le.then?Le.then(Ie=>ie.run(()=>Ie)):ie.run(()=>Le)});return new Proxy(()=>{},{get:(xe,Le)=>ve[Le],apply:(xe,Le,Ie)=>ve.then(Oe=>{var $e;const Ge=Oe&&Oe(...Ie);return!(null===($e=me?.spy)||void 0===$e)&&$e.apply&&me.spy.apply(Te,Ie,Ge),Ge})})})}),d=(X,he)=>{he.forEach(ie=>{Object.getOwnPropertyNames(ie.prototype||ie).forEach(me=>{Object.defineProperty(X.prototype,me,Object.getOwnPropertyDescriptor(ie.prototype||ie,me))})})};class je{constructor(he){return he}}const K=new O.OlP("angularfire2.app.options"),J=new O.OlP("angularfire2.app.name");function Y(X,he,ie){const Be="object"==typeof ie&&ie||{};Be.name=Be.name||"string"==typeof ie&&ie||"[DEFAULT]";const Ke=H.Z.apps.filter(ve=>ve&&ve.name===Be.name)[0]||he.runOutsideAngular(()=>H.Z.initializeApp(X,Be));try{JSON.stringify(X)!==JSON.stringify(Ke.options)&&ee("error",`${Ke.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new je(Ke)}const ee=(X,...he)=>{(0,O.X6Q)()&&typeof console<"u"&&console[X](...he)},pe={provide:je,useFactory:Y,deps:[K,O.R0b,[new O.FiY,J]]};let Qe=(()=>{class X{constructor(ie){H.Z.registerVersion("angularfire",U.q4.full,"core"),H.Z.registerVersion("angularfire",U.q4.full,"app-compat"),H.Z.registerVersion("angular",O.q4F.full,ie.toString())}static initializeApp(ie,me){return{ngModule:X,providers:[{provide:K,useValue:ie},{provide:J,useValue:me}]}}}return X.\u0275fac=function(ie){return new(ie||X)(O.LFG(O.Lbi))},X.\u0275mod=O.oAB({type:X}),X.\u0275inj=O.cJS({providers:[pe]}),X})();function Ce(X,he,ie,me,Be){const[,Te,Ke]=globalThis.\u0275AngularfireInstanceCache.find(ve=>ve[0]===X)||[];if(Te)return function Ye(X,he){try{return X.toString()===he.toString()}catch{return X===he}}(Be,Ke)||(Z("error",`${he} was already initialized on the ${ie} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),Z("warn",{is:Be,was:Ke})),Te;{const ve=me();return globalThis.\u0275AngularfireInstanceCache.push([X,ve,Be]),ve}}const st=!!pt.hot,Z=(X,...he)=>{(0,O.X6Q)()&&typeof console<"u"&&console[X](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pt,de,F)=>{"use strict";F.d(de,{q4:()=>Lc,iC:()=>Xu,HU:()=>Pn,vb:()=>ea,JM:()=>Sr});var O=F(4650),H=F(259),U=F(5861),ce=F(9681),fe=F(2090),d=F(4859),je=F(1877),K=F(8766);const J="@firebase/installations",Y="0.6.0",pe=`w:${Y}`,Qe="FIS_v2",he=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ie(M){return M instanceof fe.ZR&&M.code.includes("request-failed")}function me({projectId:M}){return`https://firebaseinstallations.googleapis.com/v1/projects/${M}/installations`}function Be(M){return{token:M.token,requestStatus:2,expiresIn:Oe(M.expiresIn),creationTime:Date.now()}}function Te(M,k){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,U.Z)(function*(M,k){const ue=(yield k.json()).error;return he.create("request-failed",{requestName:M,serverCode:ue.code,serverMessage:ue.message,serverStatus:ue.status})})).apply(this,arguments)}function ve({apiKey:M}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M})}function xe(M,{refreshToken:k}){const j=ve(M);return j.append("Authorization",function $e(M){return`${Qe} ${M}`}(k)),j}function Le(M){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,U.Z)(function*(M){const k=yield M();return k.status>=500&&k.status<600?M():k})).apply(this,arguments)}function Oe(M){return Number(M.replace("s","000"))}function Ge(M,k){return We.apply(this,arguments)}function We(){return(We=(0,U.Z)(function*({appConfig:M,heartbeatServiceProvider:k},{fid:j}){const ue=me(M),we=ve(M),ke=k.getImmediate({optional:!0});if(ke){const Dt=yield ke.getHeartbeatsHeader();Dt&&we.append("x-firebase-client",Dt)}const Rt={method:"POST",headers:we,body:JSON.stringify({fid:j,authVersion:Qe,appId:M.appId,sdkVersion:pe})},Ot=yield Le(()=>fetch(ue,Rt));if(Ot.ok){const Dt=yield Ot.json();return{fid:Dt.fid||j,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Be(Dt.authToken)}}throw yield Te("Create Installation",Ot)})).apply(this,arguments)}function He(M){return new Promise(k=>{setTimeout(k,M)})}const lt=/^[cdef][\w-]{21}$/;function Qt(){try{const M=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(M),M[0]=112+M[0]%16;const j=function sn(M){return function ot(M){return btoa(String.fromCharCode(...M)).replace(/\+/g,"-").replace(/\//g,"_")}(M).substr(0,22)}(M);return lt.test(j)?j:""}catch{return""}}function Mt(M){return`${M.appName}!${M.appId}`}const Rn=new Map;function ur(M,k){const j=Mt(M);js(j,k),function Mr(M,k){const j=function qn(){return!nr&&"BroadcastChannel"in self&&(nr=new BroadcastChannel("[Firebase] FID Change"),nr.onmessage=M=>{js(M.data.key,M.data.fid)}),nr}();j&&j.postMessage({key:M,fid:k}),function cr(){0===Rn.size&&nr&&(nr.close(),nr=null)}()}(j,k)}function js(M,k){const j=Rn.get(M);if(j)for(const ue of j)ue(k)}let nr=null;const lr="firebase-installations-store";let es=null;function ts(){return es||(es=(0,K.X3)("firebase-installations-database",1,{upgrade:(M,k)=>{0===k&&M.createObjectStore(lr)}})),es}function $n(M,k){return jr.apply(this,arguments)}function jr(){return(jr=(0,U.Z)(function*(M,k){const j=Mt(M),we=(yield ts()).transaction(lr,"readwrite"),ke=we.objectStore(lr),rt=yield ke.get(j);return yield ke.put(k,j),yield we.done,(!rt||rt.fid!==k.fid)&&ur(M,k.fid),k})).apply(this,arguments)}function At(M){return ci.apply(this,arguments)}function ci(){return(ci=(0,U.Z)(function*(M){const k=Mt(M),ue=(yield ts()).transaction(lr,"readwrite");yield ue.objectStore(lr).delete(k),yield ue.done})).apply(this,arguments)}function zn(M,k){return pn.apply(this,arguments)}function pn(){return(pn=(0,U.Z)(function*(M,k){const j=Mt(M),we=(yield ts()).transaction(lr,"readwrite"),ke=we.objectStore(lr),rt=yield ke.get(j),Rt=k(rt);return void 0===Rt?yield ke.delete(j):yield ke.put(Rt,j),yield we.done,Rt&&(!rt||rt.fid!==Rt.fid)&&ur(M,Rt.fid),Rt})).apply(this,arguments)}function li(M){return ns.apply(this,arguments)}function ns(){return(ns=(0,U.Z)(function*(M){let k;const j=yield zn(M.appConfig,ue=>{const we=dn(ue),ke=oo(M,we);return k=ke.registrationPromise,ke.installationEntry});return""===j.fid?{installationEntry:yield k}:{installationEntry:j,registrationPromise:k}})).apply(this,arguments)}function dn(M){return un(M||{fid:Qt(),registrationStatus:0})}function oo(M,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(he.create("app-offline"))};const j={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ue=function la(M,k){return Wn.apply(this,arguments)}(M,j);return{installationEntry:j,registrationPromise:ue}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:Ci(M)}:{installationEntry:k}}function Wn(){return(Wn=(0,U.Z)(function*(M,k){try{const j=yield Ge(M,k);return $n(M.appConfig,j)}catch(j){throw ie(j)&&409===j.customData.serverCode?yield At(M.appConfig):yield $n(M.appConfig,{fid:k.fid,registrationStatus:0}),j}})).apply(this,arguments)}function Ci(M){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,U.Z)(function*(M){let k=yield qt(M.appConfig);for(;1===k.registrationStatus;)yield He(100),k=yield qt(M.appConfig);if(0===k.registrationStatus){const{installationEntry:j,registrationPromise:ue}=yield li(M);return ue||j}return k})).apply(this,arguments)}function qt(M){return zn(M,k=>{if(!k)throw he.create("installation-not-found");return un(k)})}function un(M){return function Hs(M){return 1===M.registrationStatus&&M.registrationTime+1e4<Date.now()}(M)?{fid:M.fid,registrationStatus:0}:M}function rr(M,k){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,U.Z)(function*({appConfig:M,heartbeatServiceProvider:k},j){const ue=ir(M,j),we=xe(M,j),ke=k.getImmediate({optional:!0});if(ke){const Dt=yield ke.getHeartbeatsHeader();Dt&&we.append("x-firebase-client",Dt)}const Rt={method:"POST",headers:we,body:JSON.stringify({installation:{sdkVersion:pe,appId:M.appId}})},Ot=yield Le(()=>fetch(ue,Rt));if(Ot.ok)return Be(yield Ot.json());throw yield Te("Generate Auth Token",Ot)})).apply(this,arguments)}function ir(M,{fid:k}){return`${me(M)}/${k}/authTokens:generate`}function Kn(M){return gn.apply(this,arguments)}function gn(){return(gn=(0,U.Z)(function*(M,k=!1){let j;const ue=yield zn(M.appConfig,ke=>{if(!ln(ke))throw he.create("not-registered");const rt=ke.authToken;if(!k&&ge(rt))return ke;if(1===rt.requestStatus)return j=Xe(M,k),ke;{if(!navigator.onLine)throw he.create("app-offline");const Rt=ye(ke);return j=nn(M,Rt),Rt}});return j?yield j:ue.authToken})).apply(this,arguments)}function Xe(M,k){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,U.Z)(function*(M,k){let j=yield ct(M.appConfig);for(;1===j.authToken.requestStatus;)yield He(100),j=yield ct(M.appConfig);const ue=j.authToken;return 0===ue.requestStatus?Kn(M,k):ue})).apply(this,arguments)}function ct(M){return zn(M,k=>{if(!ln(k))throw he.create("not-registered");return function oe(M){return 1===M.requestStatus&&M.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function nn(M,k){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,U.Z)(function*(M,k){try{const j=yield rr(M,k),ue=Object.assign(Object.assign({},k),{authToken:j});return yield $n(M.appConfig,ue),j}catch(j){if(!ie(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const ue=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield $n(M.appConfig,ue)}else yield At(M.appConfig);throw j}})).apply(this,arguments)}function ln(M){return void 0!==M&&2===M.registrationStatus}function ge(M){return 2===M.requestStatus&&!function le(M){const k=Date.now();return k<M.creationTime||M.creationTime+M.expiresIn<k+36e5}(M)}function ye(M){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},M),{authToken:k})}function re(){return(re=(0,U.Z)(function*(M){const k=M,{installationEntry:j,registrationPromise:ue}=yield li(k);return ue?ue.catch(console.error):Kn(k).catch(console.error),j.fid})).apply(this,arguments)}function be(){return(be=(0,U.Z)(function*(M,k=!1){const j=M;return yield Lt(j),(yield Kn(j,k)).token})).apply(this,arguments)}function Lt(M){return vt.apply(this,arguments)}function vt(){return(vt=(0,U.Z)(function*(M){const{registrationPromise:k}=yield li(M);k&&(yield k)})).apply(this,arguments)}function jo(M){return he.create("missing-app-config-values",{valueName:M})}const da="installations",Gi=M=>{const k=M.getProvider("app").getImmediate(),j=function Ha(M){if(!M||!M.options)throw jo("App Configuration");if(!M.name)throw jo("App Name");const k=["projectId","apiKey","appId"];for(const j of k)if(!M.options[j])throw jo(j);return{appName:M.name,projectId:M.options.projectId,apiKey:M.options.apiKey,appId:M.options.appId}}(k);return{app:k,appConfig:j,heartbeatServiceProvider:(0,ce._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},ku=M=>{const k=M.getProvider("app").getImmediate(),j=(0,ce._getProvider)(k,da).getImmediate();return{getId:()=>function z(M){return re.apply(this,arguments)}(j),getToken:we=>function Pe(M){return be.apply(this,arguments)}(j,we)}};(function Cc(){(0,ce._registerComponent)(new d.wA(da,Gi,"PUBLIC")),(0,ce._registerComponent)(new d.wA("installations-internal",ku,"PRIVATE"))})(),(0,ce.registerVersion)(J,Y),(0,ce.registerVersion)(J,Y,"esm2017");const Ho="@firebase/remote-config",Cr=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ao{constructor(k,j,ue,we){this.client=k,this.storage=j,this.storageCache=ue,this.logger=we}isCachedDataFresh(k,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ue=Date.now()-j,we=ue<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${we}.`),we}fetch(k){var j=this;return(0,U.Z)(function*(){const[ue,we]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(we&&j.isCachedDataFresh(k.cacheMaxAgeMillis,ue))return we;k.eTag=we&&we.eTag;const ke=yield j.client.fetch(k),rt=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ke.status&&rt.push(j.storage.setLastSuccessfulFetchResponse(ke)),yield Promise.all(rt),ke})()}}function di(M=navigator){return M.languages&&M.languages[0]||M.language}class On{constructor(k,j,ue,we,ke,rt){this.firebaseInstallations=k,this.sdkVersion=j,this.namespace=ue,this.projectId=we,this.apiKey=ke,this.appId=rt}fetch(k){var j=this;return(0,U.Z)(function*(){const[ue,we]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},Ot={sdk_version:j.sdkVersion,app_instance_id:ue,app_instance_id_token:we,app_id:j.appId,language_code:di()},Dt={method:"POST",headers:Rt,body:JSON.stringify(Ot)},vn=fetch(rt,Dt),an=new Promise((zr,Kr)=>{k.signal.addEventListener(()=>{const Ar=new Error("The operation was aborted.");Ar.name="AbortError",Kr(Ar)})});let Qs;try{yield Promise.race([vn,an]),Qs=yield vn}catch(zr){let Kr="fetch-client-network";throw"AbortError"===zr?.name&&(Kr="fetch-timeout"),Cr.create(Kr,{originalErrorMessage:zr?.message})}let Wr=Qs.status;const ec=Qs.headers.get("ETag")||void 0;let As,Xs;if(200===Qs.status){let zr;try{zr=yield Qs.json()}catch(Kr){throw Cr.create("fetch-client-parse",{originalErrorMessage:Kr?.message})}As=zr.entries,Xs=zr.state}if("INSTANCE_STATE_UNSPECIFIED"===Xs?Wr=500:"NO_CHANGE"===Xs?Wr=304:("NO_TEMPLATE"===Xs||"EMPTY_CONFIG"===Xs)&&(As={}),304!==Wr&&200!==Wr)throw Cr.create("fetch-status",{httpStatus:Wr});return{status:Wr,eTag:ec,config:As}})()}}class rs{constructor(k,j){this.client=k,this.storage=j}fetch(k){var j=this;return(0,U.Z)(function*(){const ue=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(k,ue)})()}attemptFetch(k,{throttleEndTimeMillis:j,backoffCount:ue}){var we=this;return(0,U.Z)(function*(){yield function Ga(M,k){return new Promise((j,ue)=>{const we=Math.max(k-Date.now(),0),ke=setTimeout(j,we);M.addEventListener(()=>{clearTimeout(ke),ue(Cr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,j);try{const ke=yield we.client.fetch(k);return yield we.storage.deleteThrottleMetadata(),ke}catch(ke){if(!function er(M){if(!(M instanceof fe.ZR&&M.customData))return!1;const k=Number(M.customData.httpStatus);return 429===k||500===k||503===k||504===k}(ke))throw ke;const rt={throttleEndTimeMillis:Date.now()+(0,fe.$s)(ue),backoffCount:ue+1};return yield we.storage.setThrottleMetadata(rt),we.attemptFetch(k,rt)}})()}}class Dr{constructor(k,j,ue,we,ke){this.app=k,this._client=j,this._storageCache=ue,this._storage=we,this._logger=ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yn(M,k){const j=M.target.error||void 0;return Cr.create(k,{originalErrorMessage:j&&j?.message})}const qi="app_namespace_store";class on{constructor(k,j,ue,we=function is(){return new Promise((M,k)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ue=>{k(Yn(ue,"storage-open"))},j.onsuccess=ue=>{M(ue.target.result)},j.onupgradeneeded=ue=>{0===ue.oldVersion&&ue.target.result.createObjectStore(qi,{keyPath:"compositeKey"})}}catch(j){k(Cr.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=k,this.appName=j,this.namespace=ue,this.openDbPromise=we}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var j=this;return(0,U.Z)(function*(){const ue=yield j.openDbPromise;return new Promise((we,ke)=>{const Rt=ue.transaction([qi],"readonly").objectStore(qi),Ot=j.createCompositeKey(k);try{const Dt=Rt.get(Ot);Dt.onerror=vn=>{ke(Yn(vn,"storage-get"))},Dt.onsuccess=vn=>{const an=vn.target.result;we(an?an.value:void 0)}}catch(Dt){ke(Cr.create("storage-get",{originalErrorMessage:Dt?.message}))}})})()}set(k,j){var ue=this;return(0,U.Z)(function*(){const we=yield ue.openDbPromise;return new Promise((ke,rt)=>{const Ot=we.transaction([qi],"readwrite").objectStore(qi),Dt=ue.createCompositeKey(k);try{const vn=Ot.put({compositeKey:Dt,value:j});vn.onerror=an=>{rt(Yn(an,"storage-set"))},vn.onsuccess=()=>{ke()}}catch(vn){rt(Cr.create("storage-set",{originalErrorMessage:vn?.message}))}})})()}delete(k){var j=this;return(0,U.Z)(function*(){const ue=yield j.openDbPromise;return new Promise((we,ke)=>{const Rt=ue.transaction([qi],"readwrite").objectStore(qi),Ot=j.createCompositeKey(k);try{const Dt=Rt.delete(Ot);Dt.onerror=vn=>{ke(Yn(vn,"storage-delete"))},Dt.onsuccess=()=>{we()}}catch(Dt){ke(Cr.create("storage-delete",{originalErrorMessage:Dt?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class gt{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,U.Z)(function*(){const j=k.storage.getLastFetchStatus(),ue=k.storage.getLastSuccessfulFetchTimestampMillis(),we=k.storage.getActiveConfig(),ke=yield j;ke&&(k.lastFetchStatus=ke);const rt=yield ue;rt&&(k.lastSuccessfulFetchTimestampMillis=rt);const Rt=yield we;Rt&&(k.activeConfig=Rt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function yn(){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,U.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function wc(){(0,ce._registerComponent)(new d.wA("remote-config",function M(k,{instanceIdentifier:j}){const ue=k.getProvider("app").getImmediate(),we=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Cr.create("registration-window");if(!(0,fe.hl)())throw Cr.create("indexed-db-unavailable");const{projectId:ke,apiKey:rt,appId:Rt}=ue.options;if(!ke)throw Cr.create("registration-project-id");if(!rt)throw Cr.create("registration-api-key");if(!Rt)throw Cr.create("registration-app-id");const Ot=new on(Rt,ue.name,j=j||"firebase"),Dt=new gt(Ot),vn=new je.Yd(Ho);vn.logLevel=je.in.ERROR;const an=new On(we,ce.SDK_VERSION,j,ke,rt,Rt),Qs=new rs(an,Ot),Wr=new ao(Qs,Ot,Dt,vn),ec=new Dr(ue,Wr,Dt,Ot,vn);return function xn(M){const k=(0,fe.m9)(M);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(ec),ec},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Ho,"0.4.0"),(0,ce.registerVersion)(Ho,"0.4.0","esm2017")}();const Wo="/firebase-messaging-sw.js",qa="/firebase-cloud-messaging-push-scope",Fr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zl="google.c.a.c_id",Fe="google.c.a.c_l",Tf="google.c.a.ts",ga="google.c.a.e";var zo=(()=>{return(M=zo||(zo={})).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked",zo;var M})();function Wa(M){const k=new Uint8Array(M);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kl(M){const j=(M+"=".repeat((4-M.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ue=atob(j),we=new Uint8Array(ue.length);for(let ke=0;ke<ue.length;++ke)we[ke]=ue.charCodeAt(ke);return we}const za="fcm_token_details_db",Zl="fcm_token_object_Store";function Dc(M){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,U.Z)(function*(M){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(za))return null;let k=null;return(yield(0,K.X3)(za,5,{upgrade:(ue=(0,U.Z)(function*(we,ke,rt,Rt){var Ot;if(ke<2||!we.objectStoreNames.contains(Zl))return;const Dt=Rt.objectStore(Zl),vn=yield Dt.index("fcmSenderId").get(M);if(yield Dt.clear(),vn)if(2===ke){const an=vn;if(!an.auth||!an.p256dh||!an.endpoint)return;k={token:an.fcmToken,createTime:null!==(Ot=an.createTime)&&void 0!==Ot?Ot:Date.now(),subscriptionOptions:{auth:an.auth,p256dh:an.p256dh,endpoint:an.endpoint,swScope:an.swScope,vapidKey:"string"==typeof an.vapidKey?an.vapidKey:Wa(an.vapidKey)}}}else if(3===ke){const an=vn;k={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:Wa(an.auth),p256dh:Wa(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:Wa(an.vapidKey)}}}else if(4===ke){const an=vn;k={token:an.fcmToken,createTime:an.createTime,subscriptionOptions:{auth:Wa(an.auth),p256dh:Wa(an.p256dh),endpoint:an.endpoint,swScope:an.swScope,vapidKey:Wa(an.vapidKey)}}}}),function(ke,rt,Rt,Ot){return ue.apply(this,arguments)})})).close(),yield(0,K.Lj)(za),yield(0,K.Lj)("fcm_vapid_details_db"),yield(0,K.Lj)("undefined"),Yl(k)?k:null;var ue}),Fu.apply(this,arguments)}function Yl(M){if(!M||!M.subscriptionOptions)return!1;const{subscriptionOptions:k}=M;return"number"==typeof M.createTime&&M.createTime>0&&"string"==typeof M.token&&M.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const _a="firebase-messaging-store";let Ne=null;function ae(){return Ne||(Ne=(0,K.X3)("firebase-messaging-database",1,{upgrade:(M,k)=>{0===k&&M.createObjectStore(_a)}})),Ne}function Jl(M){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,U.Z)(function*(M){const k=va(M),ue=yield(yield ae()).transaction(_a).objectStore(_a).get(k);if(ue)return ue;{const we=yield Dc(M.appConfig.senderId);if(we)return yield Lu(M,we),we}})).apply(this,arguments)}function Lu(M,k){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,U.Z)(function*(M,k){const j=va(M),we=(yield ae()).transaction(_a,"readwrite");return yield we.objectStore(_a).put(k,j),yield we.done,k})).apply(this,arguments)}function Ka(M){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,U.Z)(function*(M){const k=va(M),ue=(yield ae()).transaction(_a,"readwrite");yield ue.objectStore(_a).delete(k),yield ue.done})).apply(this,arguments)}function va({appConfig:M}){return M.appId}const ti=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Za(M,k){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,U.Z)(function*(M,k){const j=yield ss(M),ue=al(k),we={method:"POST",headers:j,body:JSON.stringify(ue)};let ke;try{ke=yield(yield fetch(Ja(M.appConfig),we)).json()}catch(rt){throw ti.create("token-subscribe-failed",{errorInfo:rt?.toString()})}if(ke.error)throw ti.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw ti.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function ol(M,k){return ya.apply(this,arguments)}function ya(){return(ya=(0,U.Z)(function*(M,k){const j=yield ss(M),ue=al(k.subscriptionOptions),we={method:"PATCH",headers:j,body:JSON.stringify(ue)};let ke;try{ke=yield(yield fetch(`${Ja(M.appConfig)}/${k.token}`,we)).json()}catch(rt){throw ti.create("token-update-failed",{errorInfo:rt?.toString()})}if(ke.error)throw ti.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw ti.create("token-update-no-token");return ke.token})).apply(this,arguments)}function qr(M,k){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,U.Z)(function*(M,k){const ue={method:"DELETE",headers:yield ss(M)};try{const ke=yield(yield fetch(`${Ja(M.appConfig)}/${k}`,ue)).json();if(ke.error)throw ti.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(we){throw ti.create("token-unsubscribe-failed",{errorInfo:we?.toString()})}})).apply(this,arguments)}function Ja({projectId:M}){return`https://fcmregistrations.googleapis.com/v1/projects/${M}/registrations`}function ss(M){return ni.apply(this,arguments)}function ni(){return(ni=(0,U.Z)(function*({appConfig:M,installations:k}){const j=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":M.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function al({p256dh:M,auth:k,endpoint:j,vapidKey:ue}){const we={web:{endpoint:j,auth:k,p256dh:M}};return ue!==Fr&&(we.web.applicationPubKey=ue),we}const Vu=6048e5;function nh(M){return zs.apply(this,arguments)}function zs(){return(zs=(0,U.Z)(function*(M){const k=yield Xl(M.swRegistration,M.vapidKey),j={vapidKey:M.vapidKey,swScope:M.swRegistration.scope,endpoint:k.endpoint,auth:Wa(k.getKey("auth")),p256dh:Wa(k.getKey("p256dh"))},ue=yield Jl(M.firebaseDependencies);if(ue){if(Ss(ue.subscriptionOptions,j))return Date.now()>=ue.createTime+Vu?Gt(M,{token:ue.token,createTime:Date.now(),subscriptionOptions:j}):ue.token;try{yield qr(M.firebaseDependencies,ue.token)}catch(we){console.warn(we)}return ul(M.firebaseDependencies,j)}return ul(M.firebaseDependencies,j)})).apply(this,arguments)}function Ql(M){return ba.apply(this,arguments)}function ba(){return(ba=(0,U.Z)(function*(M){const k=yield Jl(M.firebaseDependencies);k&&(yield qr(M.firebaseDependencies,k.token),yield Ka(M.firebaseDependencies));const j=yield M.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function Gt(M,k){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,U.Z)(function*(M,k){try{const j=yield ol(M.firebaseDependencies,k),ue=Object.assign(Object.assign({},k),{token:j,createTime:Date.now()});return yield Lu(M.firebaseDependencies,ue),j}catch(j){throw yield Ql(M),j}})).apply(this,arguments)}function ul(M,k){return Do.apply(this,arguments)}function Do(){return(Do=(0,U.Z)(function*(M,k){const ue={token:yield Za(M,k),createTime:Date.now(),subscriptionOptions:k};return yield Lu(M,ue),ue.token})).apply(this,arguments)}function Xl(M,k){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,U.Z)(function*(M,k){return(yield M.pushManager.getSubscription())||M.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Kl(k)})})).apply(this,arguments)}function Ss(M,k){return k.vapidKey===M.vapidKey&&k.endpoint===M.endpoint&&k.auth===M.auth&&k.p256dh===M.p256dh}function To(M){const k={from:M.from,collapseKey:M.collapse_key,messageId:M.fcmMessageId};return function rh(M,k){if(!k.notification)return;M.notification={};const j=k.notification.title;j&&(M.notification.title=j);const ue=k.notification.body;ue&&(M.notification.body=ue);const we=k.notification.image;we&&(M.notification.image=we);const ke=k.notification.icon;ke&&(M.notification.icon=ke)}(k,M),function tt(M,k){!k.data||(M.data=k.data)}(k,M),function kn(M,k){var j,ue,we,ke,rt;if(!(k.fcmOptions||null!==(j=k.notification)&&void 0!==j&&j.click_action))return;M.fcmOptions={};const Rt=null!==(we=null===(ue=k.fcmOptions)||void 0===ue?void 0:ue.link)&&void 0!==we?we:null===(ke=k.notification)||void 0===ke?void 0:ke.click_action;Rt&&(M.fcmOptions.link=Rt);const Ot=null===(rt=k.fcmOptions)||void 0===rt?void 0:rt.analytics_label;Ot&&(M.fcmOptions.analyticsLabel=Ot)}(k,M),k}function ih(M){return"object"==typeof M&&!!M&&zl in M}function Br(M,k){const j=[];for(let ue=0;ue<M.length;ue++)j.push(M.charAt(ue)),ue<k.length&&j.push(k.charAt(ue));return j.join("")}function ed(M){return ti.create("missing-app-config-values",{valueName:M})}Br("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Br("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Uu{constructor(k,j,ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const we=function ri(M){if(!M||!M.options)throw ed("App Configuration Object");if(!M.name)throw ed("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:j}=M;for(const ue of k)if(!j[ue])throw ed(ue);return{appName:M.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:we,installations:j,analyticsProvider:ue}}_delete(){return Promise.resolve()}}function So(M){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,U.Z)(function*(M){try{M.swRegistration=yield navigator.serviceWorker.register(Wo,{scope:qa}),M.swRegistration.update().catch(()=>{})}catch(k){throw ti.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function cl(M,k){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,U.Z)(function*(M,k){if(!k&&!M.swRegistration&&(yield So(M)),k||!M.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw ti.create("invalid-sw-registration");M.swRegistration=k}})).apply(this,arguments)}function sh(M,k){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,U.Z)(function*(M,k){k?M.vapidKey=k:M.vapidKey||(M.vapidKey=Fr)})).apply(this,arguments)}function Tr(){return(Tr=(0,U.Z)(function*(M,k){if(!navigator)throw ti.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ti.create("permission-blocked");return yield sh(M,k?.vapidKey),yield cl(M,k?.serviceWorkerRegistration),nh(M)})).apply(this,arguments)}function oh(M,k,j){return uo.apply(this,arguments)}function uo(){return(uo=(0,U.Z)(function*(M,k,j){const ue=co(k);(yield M.firebaseDependencies.analyticsProvider.get()).logEvent(ue,{message_id:j[zl],message_name:j[Fe],message_time:j[Tf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function co(M){switch(M){case zo.NOTIFICATION_CLICKED:return"notification_open";case zo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function td(){return(td=(0,U.Z)(function*(M,k){const j=k.data;if(!j.isFirebaseMessaging)return;M.onMessageHandler&&j.messageType===zo.PUSH_RECEIVED&&("function"==typeof M.onMessageHandler?M.onMessageHandler(To(j)):M.onMessageHandler.next(To(j)));const ue=j.data;ih(ue)&&"1"===ue[ga]&&(yield oh(M,j.messageType,ue))})).apply(this,arguments)}const ah="@firebase/messaging",Vr=M=>{const k=new Uu(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),M.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function $u(M,k){return td.apply(this,arguments)}(k,j)),k},os=M=>{const k=M.getProvider("messaging").getImmediate();return{getToken:ue=>function ii(M,k){return Tr.apply(this,arguments)}(k,ue)}};function Ks(){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,U.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zo(){(0,ce._registerComponent)(new d.wA("messaging",Vr,"PUBLIC")),(0,ce._registerComponent)(new d.wA("messaging-internal",os,"PRIVATE")),(0,ce.registerVersion)(ah,"0.12.0"),(0,ce.registerVersion)(ah,"0.12.0","esm2017")}();const If="analytics",as="firebase_id",Ac="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ll="https://www.googletagmanager.com/gtag/js",Oi=new je.Yd("@firebase/analytics");function bn(M){return Promise.all(M.map(k=>k.catch(j=>j)))}function Qn(M,k){const j=document.createElement("script");j.src=`${ll}?l=${M}&id=${k}`,j.async=!0,document.head.appendChild(j)}function xc(M,k,j,ue,we,ke){return wa.apply(this,arguments)}function wa(){return(wa=(0,U.Z)(function*(M,k,j,ue,we,ke){const rt=ue[we];try{if(rt)yield k[rt];else{const Ot=(yield bn(j)).find(Dt=>Dt.measurementId===we);Ot&&(yield k[Ot.appId])}}catch(Rt){Oi.error(Rt)}M("config",we,ke)})).apply(this,arguments)}function Xa(M,k,j,ue,we){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,U.Z)(function*(M,k,j,ue,we){try{let ke=[];if(we&&we.send_to){let rt=we.send_to;Array.isArray(rt)||(rt=[rt]);const Rt=yield bn(j);for(const Ot of rt){const Dt=Rt.find(an=>an.measurementId===Ot),vn=Dt&&k[Dt.appId];if(!vn){ke=[];break}ke.push(vn)}}0===ke.length&&(ke=Object.values(k)),yield Promise.all(ke),M("event",ue,we||{})}catch(ke){Oi.error(ke)}})).apply(this,arguments)}function Io(M){const k=window.document.getElementsByTagName("script");for(const j of Object.values(k))if(j.src&&j.src.includes(ll)&&j.src.includes(M))return j;return null}const Di=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),hl=new class og{constructor(k={},j=1e3){this.throttleMetadata=k,this.intervalMillis=j}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,j){this.throttleMetadata[k]=j}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function Mc(M){return new Headers({Accept:"application/json","x-goog-api-key":M})}function ag(M){return dr.apply(this,arguments)}function dr(){return(dr=(0,U.Z)(function*(M){var k;const{appId:j,apiKey:ue}=M,we={method:"GET",headers:Mc(ue)},ke=Ac.replace("{app-id}",j),rt=yield fetch(ke,we);if(200!==rt.status&&304!==rt.status){let Rt="";try{const Ot=yield rt.json();null!==(k=Ot.error)&&void 0!==k&&k.message&&(Rt=Ot.error.message)}catch{}throw Di.create("config-fetch-failed",{httpStatus:rt.status,responseMessage:Rt})}return rt.json()})).apply(this,arguments)}function Da(M){return nu.apply(this,arguments)}function nu(){return(nu=(0,U.Z)(function*(M,k=hl,j){const{appId:ue,apiKey:we,measurementId:ke}=M.options;if(!ue)throw Di.create("no-app-id");if(!we){if(ke)return{measurementId:ke,appId:ue};throw Di.create("no-api-key")}const rt=k.getThrottleMetadata(ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Rt=new Ao;return setTimeout((0,U.Z)(function*(){Rt.abort()}),void 0!==j?j:6e4),fl({appId:ue,apiKey:we,measurementId:ke},rt,Rt,k)})).apply(this,arguments)}function fl(M,k,j){return us.apply(this,arguments)}function us(){return(us=(0,U.Z)(function*(M,{throttleEndTimeMillis:k,backoffCount:j},ue,we=hl){var ke;const{appId:rt,measurementId:Rt}=M;try{yield pl(ue,k)}catch(Ot){if(Rt)return Oi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:rt,measurementId:Rt};throw Ot}try{const Ot=yield ag(M);return we.deleteThrottleMetadata(rt),Ot}catch(Ot){const Dt=Ot;if(!Ta(Dt)){if(we.deleteThrottleMetadata(rt),Rt)return Oi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${Dt?.message}]`),{appId:rt,measurementId:Rt};throw Ot}const vn=503===Number(null===(ke=Dt?.customData)||void 0===ke?void 0:ke.httpStatus)?(0,fe.$s)(j,we.intervalMillis,30):(0,fe.$s)(j,we.intervalMillis),an={throttleEndTimeMillis:Date.now()+vn,backoffCount:j+1};return we.setThrottleMetadata(rt,an),Oi.debug(`Calling attemptFetch again in ${vn} millis`),fl(M,an,ue,we)}})).apply(this,arguments)}function pl(M,k){return new Promise((j,ue)=>{const we=Math.max(k-Date.now(),0),ke=setTimeout(j,we);M.addEventListener(()=>{clearTimeout(ke),ue(Di.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function Ta(M){if(!(M instanceof fe.ZR&&M.customData))return!1;const k=Number(M.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Ao{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let gl,iu;function ru(){return(ru=(0,U.Z)(function*(M,k,j,ue,we){if(we&&we.global)M("event",j,ue);else{const ke=yield k;M("event",j,Object.assign(Object.assign({},ue),{send_to:ke}))}})).apply(this,arguments)}function ml(M){iu=M}function kc(M){gl=M}function _l(){return ds.apply(this,arguments)}function ds(){return(ds=(0,U.Z)(function*(){if(!(0,fe.hl)())return Oi.warn(Di.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(M){return Oi.warn(Di.create("indexeddb-unavailable",{errorInfo:M?.toString()}).message),!1}return!0})).apply(this,arguments)}function Pc(){return(Pc=(0,U.Z)(function*(M,k,j,ue,we,ke,rt){var Rt;const Ot=Da(M);Ot.then(Wr=>{j[Wr.measurementId]=Wr.appId,M.options.measurementId&&Wr.measurementId!==M.options.measurementId&&Oi.warn(`The measurement ID in the local Firebase config (${M.options.measurementId}) does not match the measurement ID fetched from the server (${Wr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wr=>Oi.error(Wr)),k.push(Ot);const Dt=_l().then(Wr=>{if(Wr)return ue.getId()}),[vn,an]=yield Promise.all([Ot,Dt]);Io(ke)||Qn(ke,vn.measurementId),iu&&(we("consent","default",iu),ml(void 0)),we("js",new Date);const Qs=null!==(Rt=rt?.config)&&void 0!==Rt?Rt:{};return Qs.origin="firebase",Qs.update=!0,null!=an&&(Qs[as]=an),we("config",vn.measurementId,Qs),gl&&(we("set",gl),kc(void 0)),vn.measurementId})).apply(this,arguments)}class lh{constructor(k){this.app=k}_delete(){return delete Ys[this.app.options.appId],Promise.resolve()}}let Ys={},nd=[];const Ia={};let Fc,ki,xo="dataLayer",si=!1;function Aa(M,k,j){!function dh(){const M=[];if((0,fe.ru)()&&M.push("This is a browser extension environment."),(0,fe.zI)()||M.push("Cookies are not available."),M.length>0){const k=M.map((ue,we)=>`(${we+1}) ${ue}`).join(" "),j=Di.create("invalid-analytics-context",{errorInfo:k});Oi.warn(j.message)}}();const ue=M.options.appId;if(!ue)throw Di.create("no-app-id");if(!M.options.apiKey){if(!M.options.measurementId)throw Di.create("no-api-key");Oi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${M.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ys[ue])throw Di.create("already-exists",{id:ue});if(!si){!function Nn(M){let k=[];Array.isArray(window[M])?k=window[M]:window[M]=k}(xo);const{wrappedGtag:ke,gtagCore:rt}=function eu(M,k,j,ue,we){let ke=function(...rt){window[ue].push(arguments)};return window[we]&&"function"==typeof window[we]&&(ke=window[we]),window[we]=function Gu(M,k,j,ue){function ke(){return(ke=(0,U.Z)(function*(rt,Rt,Ot){try{"event"===rt?yield Xa(M,k,j,Rt,Ot):"config"===rt?yield xc(M,k,j,ue,Rt,Ot):"consent"===rt?M("consent","update",Ot):M("set",Rt)}catch(Dt){Oi.error(Dt)}})).apply(this,arguments)}return function we(rt,Rt,Ot){return ke.apply(this,arguments)}}(ke,M,k,j),{gtagCore:ke,wrappedGtag:window[we]}}(Ys,nd,Ia,xo,"gtag");ki=ke,Fc=rt,si=!0}return Ys[ue]=function Wu(M,k,j,ue,we,ke,rt){return Pc.apply(this,arguments)}(M,nd,Ia,k,Fc,xo,j),new lh(M)}function vl(){return zi.apply(this,arguments)}function zi(){return(zi=(0,U.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const Hn="@firebase/analytics";!function hs(){(0,ce._registerComponent)(new d.wA(If,(k,{options:j})=>Aa(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,ce._registerComponent)(new d.wA("analytics-internal",function M(k){try{const j=k.getProvider(If).getImmediate();return{logEvent:(ue,we,ke)=>function id(M,k,j,ue){M=(0,fe.m9)(M),function Sa(M,k,j,ue,we){return ru.apply(this,arguments)}(ki,Ys[M.app.options.appId],k,j,ue).catch(we=>Oi.error(we))}(j,ue,we,ke)}}catch(j){throw Di.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,ce.registerVersion)(Hn,"0.9.0"),(0,ce.registerVersion)(Hn,"0.9.0","esm2017")}();var Af=F(4408),Qo=F(7565);const od=new class sd extends Qo.v{}(class fo extends Af.o{constructor(k,j){super(k,j),this.scheduler=k,this.work=j}schedule(k,j=0){return j>0?super.schedule(k,j):(this.delay=j,this.state=k,this.scheduler.flush(this),this)}execute(k,j){return j>0||this.closed?super.execute(k,j):this._execute(k,j)}requestAsyncId(k,j,ue=0){return null!=ue&&ue>0||null==ue&&this.delay>0?super.requestAsyncId(k,j,ue):(k.flush(this),0)}});var lg=F(4986),ou=F(8505),hr=F(9468),yl=F(5363);const Lc=new O.GfV("7.5.0"),ph="__angularfire_symbol__analyticsIsSupportedValue",fi="__angularfire_symbol__analyticsIsSupported",Is="__angularfire_symbol__remoteConfigIsSupportedValue",Zu="__angularfire_symbol__remoteConfigIsSupported",No="__angularfire_symbol__messagingIsSupportedValue",Na="__angularfire_symbol__messagingIsSupported";function Sr(M,k,j){if(k){if(1===k.length)return k[0];const ke=k.filter(rt=>rt.app===j);if(1===ke.length)return ke[0]}return j.container.getProvider(M).getImmediate({optional:!0})}globalThis[fi]||(globalThis[fi]=vl().then(M=>globalThis[ph]=M).catch(()=>globalThis[ph]=!1)),globalThis[Na]||(globalThis[Na]=Ks().then(M=>globalThis[No]=M).catch(()=>globalThis[No]=!1)),globalThis[Zu]||(globalThis[Zu]=yn().then(M=>globalThis[Is]=M).catch(()=>globalThis[Is]=!1));const ea=(M,k)=>{const j=k?[k]:(0,H.C6)(),ue=[];return j.forEach(we=>{we.container.getProvider(M).instances.forEach(rt=>{ue.includes(rt)||ue.push(rt)})}),ue};function Ir(){}class Yu{constructor(k,j=od){this.zone=k,this.delegate=j}now(){return this.delegate.now()}schedule(k,j,ue){const we=this.zone;return this.delegate.schedule(function(rt){we.runGuarded(()=>{k.apply(this,[rt])})},j,ue)}}class Ju{constructor(k){this.zone=k,this.task=null}call(k,j){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)),j.pipe((0,ou.b)({next:ue,complete:ue,error:ue})).subscribe(k).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pn=(()=>{class M{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new Yu(Zone.current)),this.insideAngular=j.run(()=>new Yu(Zone.current,lg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return M.\u0275fac=function(j){return new(j||M)(O.LFG(O.R0b))},M.\u0275prov=O.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function fr(){const M=globalThis.\u0275AngularFireScheduler;if(!M)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return M}function Xu(M){return fr(),function bl(M){return function(j){return(j=j.lift(new Ju(M.ngZone))).pipe((0,hr.R)(M.outsideAngular),(0,yl.Q)(M.insideAngular))}}(fr())(M)}},552:(pt,de,F)=>{"use strict";F.d(de,{$:()=>Ja,A:()=>ee,B:()=>Ce,G:()=>ku,H:()=>_r,J:()=>rs,L:()=>ge,M:()=>Gr,N:()=>Wl,P:()=>lg,Q:()=>zl,R:()=>fh,T:()=>Fe,U:()=>Fr,V:()=>zo,W:()=>Wa,X:()=>Dc,Y:()=>Wi,Z:()=>Za,_:()=>ol,a:()=>tu,a0:()=>nh,a1:()=>Ql,a2:()=>Gt,a3:()=>ul,a4:()=>Xl,a5:()=>Ss,a6:()=>rh,a7:()=>tt,a8:()=>ih,a9:()=>Br,aA:()=>le,aB:()=>Ot,aC:()=>mh,aD:()=>au,aE:()=>mr,aI:()=>Mc,aL:()=>ga,aa:()=>So,ab:()=>cl,ac:()=>sh,af:()=>oh,ag:()=>co,ah:()=>$u,ak:()=>_a,al:()=>Hu,an:()=>ll,ao:()=>wa,ap:()=>Le,aq:()=>yt,ar:()=>Lt,as:()=>ie,at:()=>hd,au:()=>zr,av:()=>Gn,aw:()=>me,ax:()=>ve,ay:()=>Wr,az:()=>Oe,b:()=>Di,c:()=>No,d:()=>gh,e:()=>ad,f:()=>bl,g:()=>ue,h:()=>M,i:()=>ds,j:()=>rt,k:()=>cu,l:()=>ho,m:()=>_y,o:()=>K,r:()=>Af,s:()=>cg,u:()=>od});var O=F(5861),H=F(2090),U=F(9681),ce=F(1877),fe=F(655),d=F(4859);const K={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ce=function pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ye=function Qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),X=new ce.Yd("@firebase/auth");function he(S,...b){X.logLevel<=ce.in.ERROR&&X.error(`Auth (${U.SDK_VERSION}): ${S}`,...b)}function ie(S,...b){throw Ke(S,...b)}function me(S,...b){return Ke(S,...b)}function Be(S,b,w){const N=Object.assign(Object.assign({},Ye()),{[b]:w});return new H.LL("auth","Firebase",N).create(b,{appName:S.name})}function Te(S,b,w){if(!(b instanceof w))throw w.name!==b.constructor.name&&ie(S,"argument-error"),Be(S,"argument-error",`Type of ${b.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(S,...b){if("string"!=typeof S){const w=b[0],N=[...b.slice(1)];return N[0]&&(N[0].appName=S.name),S._errorFactory.create(w,...N)}return st.create(S,...b)}function ve(S,b,...w){if(!S)throw Ke(b,...w)}function xe(S){const b="INTERNAL ASSERTION FAILED: "+S;throw he(b),new Error(b)}function Le(S,b){S||xe(b)}const Ie=new Map;function Oe(S){Le(S instanceof Function,"Expected a class definition");let b=Ie.get(S);return b?(Le(b instanceof S,"Instance stored in cache mismatched with class"),b):(b=new S,Ie.set(S,b),b)}function We(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.href)||""}function He(){return"http:"===ot()||"https:"===ot()}function ot(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.protocol)||null}class Qt{constructor(b,w){this.shortDelay=b,this.longDelay=w,Le(w>b,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sn(S,b){Le(S.emulator,"Emulator should always be set here");const{url:w}=S.emulator;return b?`${w}${b.startsWith("/")?b.slice(1):b}`:w}class Mt{static initialize(b,w,N){this.fetchImpl=b,w&&(this.headersImpl=w),N&&(this.responseImpl=N)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ur=new Qt(3e4,6e4);function _n(S,b){return S.tenantId&&!b.tenantId?Object.assign(Object.assign({},b),{tenantId:S.tenantId}):b}function tn(S,b,w,N){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(S,b,w,N,$={}){return Mr(S,$,(0,O.Z)(function*(){let Q={},Me={};N&&("GET"===b?Me=N:Q={body:JSON.stringify(N)});const et=(0,H.xO)(Object.assign({key:S.config.apiKey},Me)).slice(1),Nt=yield S._getAdditionalHeaders();return Nt["Content-Type"]="application/json",S.languageCode&&(Nt["X-Firebase-Locale"]=S.languageCode),Mt.fetch()(Ei(S,S.config.apiHost,w,et),Object.assign({method:b,headers:Nt,referrerPolicy:"no-referrer"},Q))}))})).apply(this,arguments)}function Mr(S,b,w){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(S,b,w){S._canInitEmulator=!1;const N=Object.assign(Object.assign({},Rn),b);try{const $=new ws(S),Q=yield Promise.race([w(),$.promise]);$.clearNetworkTimeout();const Me=yield Q.json();if("needConfirmation"in Me)throw lr(S,"account-exists-with-different-credential",Me);if(Q.ok&&!("errorMessage"in Me))return Me;{const et=Q.ok?Me.errorMessage:Me.error.message,[Nt,Ut]=et.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Nt)throw lr(S,"credential-already-in-use",Me);if("EMAIL_EXISTS"===Nt)throw lr(S,"email-already-in-use",Me);if("USER_DISABLED"===Nt)throw lr(S,"user-disabled",Me);const fn=N[Nt]||Nt.toLowerCase().replace(/[_\s]+/g,"-");if(Ut)throw Be(S,fn,Ut);ie(S,fn)}}catch($){if($ instanceof H.ZR)throw $;ie(S,"network-request-failed")}})).apply(this,arguments)}function qn(S,b,w,N){return cr.apply(this,arguments)}function cr(){return(cr=(0,O.Z)(function*(S,b,w,N,$={}){const Q=yield tn(S,b,w,N,$);return"mfaPendingCredential"in Q&&ie(S,"multi-factor-auth-required",{_serverResponse:Q}),Q})).apply(this,arguments)}function Ei(S,b,w,N){const $=`${b}${w}?${N}`;return S.config.emulator?sn(S.config,$):`${S.config.apiScheme}://${$}`}class ws{constructor(b){this.auth=b,this.timer=null,this.promise=new Promise((w,N)=>{this.timer=setTimeout(()=>N(me(this.auth,"network-request-failed")),ur.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(S,b,w){const N={appName:S.name};w.email&&(N.email=w.email),w.phoneNumber&&(N.phoneNumber=w.phoneNumber);const $=me(S,b,N);return $.customData._tokenResponse=w,$}function ts(){return(ts=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}function $n(S,b){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function At(S,b){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}function zn(S){if(S)try{const b=new Date(Number(S));if(!isNaN(b.getTime()))return b.toUTCString()}catch{}}function ns(){return(ns=(0,O.Z)(function*(S,b=!1){const w=(0,H.m9)(S),N=yield w.getIdToken(b),$=oo(N);ve($&&$.exp&&$.auth_time&&$.iat,w.auth,"internal-error");const Q="object"==typeof $.firebase?$.firebase:void 0,Me=Q?.sign_in_provider;return{claims:$,token:N,authTime:zn(dn($.auth_time)),issuedAtTime:zn(dn($.iat)),expirationTime:zn(dn($.exp)),signInProvider:Me||null,signInSecondFactor:Q?.sign_in_second_factor||null}})).apply(this,arguments)}function dn(S){return 1e3*Number(S)}function oo(S){const[b,w,N]=S.split(".");if(void 0===b||void 0===w||void 0===N)return he("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,H.tV)(w);return $?JSON.parse($):(he("Failed to decode base64 JWT payload"),null)}catch($){return he("Caught error parsing JWT payload as JSON",$?.toString()),null}}function Wn(S,b){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(S,b,w=!1){if(w)return b;try{return yield b}catch(N){throw N instanceof H.ZR&&Sn(N)&&S.auth.currentUser===S&&(yield S.auth.signOut()),N}})).apply(this,arguments)}function Sn({code:S}){return"auth/user-disabled"===S||"auth/user-token-expired"===S}class qt{constructor(b){this.user=b,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(b){var w;if(b){const N=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),N}{this.errorBackoff=3e4;const $=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(b=!1){var w=this;if(!this.isRunning)return;const N=this.getInterval(b);this.timerId=setTimeout((0,O.Z)(function*(){yield w.iteration()}),N)}iteration(){var b=this;return(0,O.Z)(function*(){try{yield b.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w?.code&&b.schedule(!0))}b.schedule()})()}}class un{constructor(b,w){this.createdAt=b,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(b){this.createdAt=b.createdAt,this.lastLoginAt=b.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hs(S){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(S){var b;const w=S.auth,N=yield S.getIdToken(),$=yield Wn(S,At(w,{idToken:N}));ve($?.users.length,w,"internal-error");const Q=$.users[0];S._notifyReloadListener(Q);const Me=null!==(b=Q.providerUserInfo)&&void 0!==b&&b.length?gn(Q.providerUserInfo):[],et=Kn(S.providerData,Me),fn=!!S.isAnonymous&&!(S.email&&Q.passwordHash||et?.length),tr={uid:Q.localId,displayName:Q.displayName||null,photoURL:Q.photoUrl||null,email:Q.email||null,emailVerified:Q.emailVerified||!1,phoneNumber:Q.phoneNumber||null,tenantId:Q.tenantId||null,providerData:et,metadata:new un(Q.createdAt,Q.lastLoginAt),isAnonymous:fn};Object.assign(S,tr)})).apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*(S){const b=(0,H.m9)(S);yield Hs(b),yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)})).apply(this,arguments)}function Kn(S,b){return[...S.filter(N=>!b.some($=>$.providerId===N.providerId)),...b]}function gn(S){return S.map(b=>{var{providerId:w}=b,N=(0,fe._T)(b,["providerId"]);return{providerId:w,uid:N.rawId||"",displayName:N.displayName||null,email:N.email||null,phoneNumber:N.phoneNumber||null,photoURL:N.photoUrl||null}})}function Ze(){return(Ze=(0,O.Z)(function*(S,b){const w=yield Mr(S,{},(0,O.Z)(function*(){const N=(0,H.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:$,apiKey:Q}=S.config,Me=Ei(S,$,"/v1/token",`key=${Q}`),et=yield S._getAdditionalHeaders();return et["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(Me,{method:"POST",headers:et,body:N})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(b){ve(b.idToken,"internal-error"),ve(typeof b.idToken<"u","internal-error"),ve(typeof b.refreshToken<"u","internal-error");const w="expiresIn"in b&&typeof b.expiresIn<"u"?Number(b.expiresIn):function la(S){const b=oo(S);return ve(b,"internal-error"),ve(typeof b.exp<"u","internal-error"),ve(typeof b.iat<"u","internal-error"),Number(b.exp)-Number(b.iat)}(b.idToken);this.updateTokensAndExpiration(b.idToken,b.refreshToken,w)}getToken(b,w=!1){var N=this;return(0,O.Z)(function*(){return ve(!N.accessToken||N.refreshToken,b,"user-token-expired"),w||!N.accessToken||N.isExpired?N.refreshToken?(yield N.refresh(b,N.refreshToken),N.accessToken):null:N.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(b,w){var N=this;return(0,O.Z)(function*(){const{accessToken:$,refreshToken:Q,expiresIn:Me}=yield function Xe(S,b){return Ze.apply(this,arguments)}(b,w);N.updateTokensAndExpiration($,Q,Number(Me))})()}updateTokensAndExpiration(b,w,N){this.refreshToken=w||null,this.accessToken=b||null,this.expirationTime=Date.now()+1e3*N}static fromJSON(b,w){const{refreshToken:N,accessToken:$,expirationTime:Q}=w,Me=new ct;return N&&(ve("string"==typeof N,"internal-error",{appName:b}),Me.refreshToken=N),$&&(ve("string"==typeof $,"internal-error",{appName:b}),Me.accessToken=$),Q&&(ve("number"==typeof Q,"internal-error",{appName:b}),Me.expirationTime=Q),Me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(b){this.accessToken=b.accessToken,this.refreshToken=b.refreshToken,this.expirationTime=b.expirationTime}_clone(){return Object.assign(new ct,this.toJSON())}_performRefresh(){return xe("not implemented")}}function nn(S,b){ve("string"==typeof S||typeof S>"u","internal-error",{appName:b})}class Kt{constructor(b){var{uid:w,auth:N,stsTokenManager:$}=b,Q=(0,fe._T)(b,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=N,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=Q.displayName||null,this.email=Q.email||null,this.emailVerified=Q.emailVerified||!1,this.phoneNumber=Q.phoneNumber||null,this.photoURL=Q.photoURL||null,this.isAnonymous=Q.isAnonymous||!1,this.tenantId=Q.tenantId||null,this.providerData=Q.providerData?[...Q.providerData]:[],this.metadata=new un(Q.createdAt||void 0,Q.lastLoginAt||void 0)}getIdToken(b){var w=this;return(0,O.Z)(function*(){const N=yield Wn(w,w.stsTokenManager.getToken(w.auth,b));return ve(N,w.auth,"internal-error"),w.accessToken!==N&&(w.accessToken=N,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),N})()}getIdTokenResult(b){return function li(S){return ns.apply(this,arguments)}(this,b)}reload(){return function Yr(S){return ir.apply(this,arguments)}(this)}_assign(b){this!==b&&(ve(this.uid===b.uid,this.auth,"internal-error"),this.displayName=b.displayName,this.photoURL=b.photoURL,this.email=b.email,this.emailVerified=b.emailVerified,this.phoneNumber=b.phoneNumber,this.isAnonymous=b.isAnonymous,this.tenantId=b.tenantId,this.providerData=b.providerData.map(w=>Object.assign({},w)),this.metadata._copy(b.metadata),this.stsTokenManager._assign(b.stsTokenManager))}_clone(b){return new Kt(Object.assign(Object.assign({},this),{auth:b,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(b){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=b,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(b){this.reloadListener?this.reloadListener(b):this.reloadUserInfo=b}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(b,w=!1){var N=this;return(0,O.Z)(function*(){let $=!1;b.idToken&&b.idToken!==N.stsTokenManager.accessToken&&(N.stsTokenManager.updateFromServerResponse(b),$=!0),w&&(yield Hs(N)),yield N.auth._persistUserIfCurrent(N),$&&N.auth._notifyListenersIfCurrent(N)})()}delete(){var b=this;return(0,O.Z)(function*(){const w=yield b.getIdToken();return yield Wn(b,function es(S,b){return ts.apply(this,arguments)}(b.auth,{idToken:w})),b.stsTokenManager.clearRefreshToken(),b.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(b=>Object.assign({},b)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(b,w){var N,$,Q,Me,et,Nt,Ut,fn;const tr=null!==(N=w.displayName)&&void 0!==N?N:void 0,gi=null!==($=w.email)&&void 0!==$?$:void 0,pr=null!==(Q=w.phoneNumber)&&void 0!==Q?Q:void 0,Oa=null!==(Me=w.photoURL)&&void 0!==Me?Me:void 0,du=null!==(et=w.tenantId)&&void 0!==et?et:void 0,oi=null!==(Nt=w._redirectEventId)&&void 0!==Nt?Nt:void 0,Ro=null!==(Ut=w.createdAt)&&void 0!==Ut?Ut:void 0,po=null!==(fn=w.lastLoginAt)&&void 0!==fn?fn:void 0,{uid:rc,emailVerified:pd,isAnonymous:ic,providerData:sc,stsTokenManager:na}=w;ve(rc&&na,b,"internal-error");const $c=ct.fromJSON(this.name,na);ve("string"==typeof rc,b,"internal-error"),nn(tr,b.name),nn(gi,b.name),ve("boolean"==typeof pd,b,"internal-error"),ve("boolean"==typeof ic,b,"internal-error"),nn(pr,b.name),nn(Oa,b.name),nn(du,b.name),nn(oi,b.name),nn(Ro,b.name),nn(po,b.name);const gd=new Kt({uid:rc,auth:b,email:gi,emailVerified:pd,displayName:tr,isAnonymous:ic,photoURL:Oa,phoneNumber:pr,tenantId:du,stsTokenManager:$c,createdAt:Ro,lastLoginAt:po});return sc&&Array.isArray(sc)&&(gd.providerData=sc.map(n_=>Object.assign({},n_))),oi&&(gd._redirectEventId=oi),gd}static _fromIdTokenResponse(b,w,N=!1){return(0,O.Z)(function*(){const $=new ct;$.updateFromServerResponse(w);const Q=new Kt({uid:w.localId,auth:b,stsTokenManager:$,isAnonymous:N});return yield Hs(Q),Q})()}}const ge=(()=>{class S{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,O.Z)(function*(){return!0})()}_set(w,N){var $=this;return(0,O.Z)(function*(){$.storage[w]=N})()}_get(w){var N=this;return(0,O.Z)(function*(){const $=N.storage[w];return void 0===$?null:$})()}_remove(w){var N=this;return(0,O.Z)(function*(){delete N.storage[w]})()}_addListener(w,N){}_removeListener(w,N){}}return S.type="NONE",S})();function le(S,b,w){return`firebase:${S}:${b}:${w}`}class ye{constructor(b,w,N){this.persistence=b,this.auth=w,this.userKey=N;const{config:$,name:Q}=this.auth;this.fullUserKey=le(this.userKey,$.apiKey,Q),this.fullPersistenceKey=le("persistence",$.apiKey,Q),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(b){return this.persistence._set(this.fullUserKey,b.toJSON())}getCurrentUser(){var b=this;return(0,O.Z)(function*(){const w=yield b.persistence._get(b.fullUserKey);return w?Kt._fromJSON(b.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(b){var w=this;return(0,O.Z)(function*(){if(w.persistence===b)return;const N=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=b,N?w.setCurrentUser(N):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(b,w,N="authUser"){return(0,O.Z)(function*(){if(!w.length)return new ye(Oe(ge),b,N);const $=(yield Promise.all(w.map(function(){var Ut=(0,O.Z)(function*(fn){if(yield fn._isAvailable())return fn});return function(fn){return Ut.apply(this,arguments)}}()))).filter(Ut=>Ut);let Q=$[0]||Oe(ge);const Me=le(N,b.config.apiKey,b.name);let et=null;for(const Ut of w)try{const fn=yield Ut._get(Me);if(fn){const tr=Kt._fromJSON(b,fn);Ut!==Q&&(et=tr),Q=Ut;break}}catch{}const Nt=$.filter(Ut=>Ut._shouldAllowMigration);return Q._shouldAllowMigration&&Nt.length?(Q=Nt[0],et&&(yield Q._set(Me,et.toJSON())),yield Promise.all(w.map(function(){var Ut=(0,O.Z)(function*(fn){if(fn!==Q)try{yield fn._remove(Me)}catch{}});return function(fn){return Ut.apply(this,arguments)}}())),new ye(Q,b,N)):new ye(Q,b,N)})()}}function oe(S){const b=S.toLowerCase();if(b.includes("opera/")||b.includes("opr/")||b.includes("opios/"))return"Opera";if(be(b))return"IEMobile";if(b.includes("msie")||b.includes("trident/"))return"IE";if(b.includes("edge/"))return"Edge";if(z(b))return"Firefox";if(b.includes("silk/"))return"Silk";if(vt(b))return"Blackberry";if(en(b))return"Webos";if(re(b))return"Safari";if((b.includes("chrome/")||Pe(b))&&!b.includes("edge/"))return"Chrome";if(Lt(b))return"Android";{const N=S.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===N?.length)return N[1]}return"Other"}function z(S=(0,H.z$)()){return/firefox\//i.test(S)}function re(S=(0,H.z$)()){const b=S.toLowerCase();return b.includes("safari/")&&!b.includes("chrome/")&&!b.includes("crios/")&&!b.includes("android")}function Pe(S=(0,H.z$)()){return/crios\//i.test(S)}function be(S=(0,H.z$)()){return/iemobile/i.test(S)}function Lt(S=(0,H.z$)()){return/android/i.test(S)}function vt(S=(0,H.z$)()){return/blackberry/i.test(S)}function en(S=(0,H.z$)()){return/webos/i.test(S)}function yt(S=(0,H.z$)()){return/iphone|ipad|ipod/i.test(S)||/macintosh/i.test(S)&&/mobile/i.test(S)}function Gn(S=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(S)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(S)}function Hr(S=(0,H.z$)()){return yt(S)||Lt(S)||en(S)||vt(S)||/windows phone/i.test(S)||be(S)}function Ha(S,b=[]){let w;switch(S){case"Browser":w=oe((0,H.z$)());break;case"Worker":w=`${oe((0,H.z$)())}-${S}`;break;default:w=S}const N=b.length?b.join(","):"FirebaseCore-web";return`${w}/JsCore/${U.SDK_VERSION}/${N}`}class jo{constructor(b){this.auth=b,this.queue=[]}pushCallback(b,w){const N=Q=>new Promise((Me,et)=>{try{Me(b(Q))}catch(Nt){et(Nt)}});N.onAbort=w,this.queue.push(N);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(b){var w=this;return(0,O.Z)(function*(){if(w.auth.currentUser===b)return;const N=[];try{for(const $ of w.queue)yield $(b),$.onAbort&&N.push($.onAbort)}catch($){N.reverse();for(const Q of N)try{Q()}catch{}throw w.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class da{constructor(b,w,N){this.app=b,this.heartbeatServiceProvider=w,this.config=N,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gi(this),this.idTokenSubscription=new Gi(this),this.beforeStateQueue=new jo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=b.name,this.clientVersion=N.sdkClientVersion}_initializeWithPersistence(b,w){var N=this;return w&&(this._popupRedirectResolver=Oe(w)),this._initializationPromise=this.queue((0,O.Z)(function*(){var $,Q;if(!N._deleted&&(N.persistenceManager=yield ye.create(N,b),!N._deleted)){if(null!==($=N._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield N._popupRedirectResolver._initialize(N)}catch{}yield N.initializeCurrentUser(w),N.lastNotifiedUid=(null===(Q=N.currentUser)||void 0===Q?void 0:Q.uid)||null,!N._deleted&&(N._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var b=this;return(0,O.Z)(function*(){if(b._deleted)return;const w=yield b.assertedPersistence.getCurrentUser();if(b.currentUser||w){if(b.currentUser&&w&&b.currentUser.uid===w.uid)return b._currentUser._assign(w),void(yield b.currentUser.getIdToken());yield b._updateCurrentUser(w,!0)}})()}initializeCurrentUser(b){var w=this;return(0,O.Z)(function*(){var N;const $=yield w.assertedPersistence.getCurrentUser();let Q=$,Me=!1;if(b&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const et=null===(N=w.redirectUser)||void 0===N?void 0:N._redirectEventId,Nt=Q?._redirectEventId,Ut=yield w.tryRedirectSignIn(b);(!et||et===Nt)&&Ut?.user&&(Q=Ut.user,Me=!0)}if(!Q)return w.directlySetCurrentUser(null);if(!Q._redirectEventId){if(Me)try{yield w.beforeStateQueue.runMiddleware(Q)}catch(et){Q=$,w._popupRedirectResolver._overrideRedirectResult(w,()=>Promise.reject(et))}return Q?w.reloadAndSetCurrentUserOrClear(Q):w.directlySetCurrentUser(null)}return ve(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===Q._redirectEventId?w.directlySetCurrentUser(Q):w.reloadAndSetCurrentUserOrClear(Q)})()}tryRedirectSignIn(b){var w=this;return(0,O.Z)(function*(){let N=null;try{N=yield w._popupRedirectResolver._completeRedirectFn(w,b,!0)}catch{yield w._setRedirectUser(null)}return N})()}reloadAndSetCurrentUserOrClear(b){var w=this;return(0,O.Z)(function*(){try{yield Hs(b)}catch(N){if("auth/network-request-failed"!==N?.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(b)})()}useDeviceLanguage(){this.languageCode=function mt(){if(typeof navigator>"u")return null;const S=navigator;return S.languages&&S.languages[0]||S.language||null}()}_delete(){var b=this;return(0,O.Z)(function*(){b._deleted=!0})()}updateCurrentUser(b){var w=this;return(0,O.Z)(function*(){const N=b?(0,H.m9)(b):null;return N&&ve(N.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(N&&N._clone(w))})()}_updateCurrentUser(b,w=!1){var N=this;return(0,O.Z)(function*(){if(!N._deleted)return b&&ve(N.tenantId===b.tenantId,N,"tenant-id-mismatch"),w||(yield N.beforeStateQueue.runMiddleware(b)),N.queue((0,O.Z)(function*(){yield N.directlySetCurrentUser(b),N.notifyAuthListeners()}))})()}signOut(){var b=this;return(0,O.Z)(function*(){return yield b.beforeStateQueue.runMiddleware(null),(b.redirectPersistenceManager||b._popupRedirectResolver)&&(yield b._setRedirectUser(null)),b._updateCurrentUser(null,!0)})()}setPersistence(b){var w=this;return this.queue((0,O.Z)(function*(){yield w.assertedPersistence.setPersistence(Oe(b))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(b){this._errorFactory=new H.LL("auth","Firebase",b())}onAuthStateChanged(b,w,N){return this.registerStateListener(this.authStateSubscription,b,w,N)}beforeAuthStateChanged(b,w){return this.beforeStateQueue.pushCallback(b,w)}onIdTokenChanged(b,w,N){return this.registerStateListener(this.idTokenSubscription,b,w,N)}toJSON(){var b;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(b=this._currentUser)||void 0===b?void 0:b.toJSON()}}_setRedirectUser(b,w){var N=this;return(0,O.Z)(function*(){const $=yield N.getOrInitRedirectPersistenceManager(w);return null===b?$.removeCurrentUser():$.setCurrentUser(b)})()}getOrInitRedirectPersistenceManager(b){var w=this;return(0,O.Z)(function*(){if(!w.redirectPersistenceManager){const N=b&&Oe(b)||w._popupRedirectResolver;ve(N,w,"argument-error"),w.redirectPersistenceManager=yield ye.create(w,[Oe(N._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(b){var w=this;return(0,O.Z)(function*(){var N,$;return w._isInitialized&&(yield w.queue((0,O.Z)(function*(){}))),(null===(N=w._currentUser)||void 0===N?void 0:N._redirectEventId)===b?w._currentUser:(null===($=w.redirectUser)||void 0===$?void 0:$._redirectEventId)===b?w.redirectUser:null})()}_persistUserIfCurrent(b){var w=this;return(0,O.Z)(function*(){if(b===w.currentUser)return w.queue((0,O.Z)(function*(){return w.directlySetCurrentUser(b)}))})()}_notifyListenersIfCurrent(b){b===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const N=null!==(w=null===(b=this.currentUser)||void 0===b?void 0:b.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==N&&(this.lastNotifiedUid=N,this.authStateSubscription.next(this.currentUser))}registerStateListener(b,w,N,$){if(this._deleted)return()=>{};const Q="function"==typeof w?w:w.next.bind(w),Me=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(Me,this,"internal-error"),Me.then(()=>Q(this.currentUser)),"function"==typeof w?b.addObserver(w,N,$):b.addObserver(w)}directlySetCurrentUser(b){var w=this;return(0,O.Z)(function*(){w.currentUser&&w.currentUser!==b&&w._currentUser._stopProactiveRefresh(),b&&w.isProactiveRefreshEnabled&&b._startProactiveRefresh(),w.currentUser=b,b?yield w.assertedPersistence.setCurrentUser(b):yield w.assertedPersistence.removeCurrentUser()})()}queue(b){return this.operations=this.operations.then(b,b),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(b){!b||this.frameworks.includes(b)||(this.frameworks.push(b),this.frameworks.sort(),this.clientVersion=Ha(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var b=this;return(0,O.Z)(function*(){var w;const N={"X-Client-Version":b.clientVersion};b.app.options.appId&&(N["X-Firebase-gmpid"]=b.app.options.appId);const $=yield null===(w=b.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===w?void 0:w.getHeartbeatsHeader();return $&&(N["X-Firebase-Client"]=$),N})()}}function mr(S){return(0,H.m9)(S)}class Gi{constructor(b){this.auth=b,this.observer=null,this.addObserver=(0,H.ne)(w=>this.observer=w)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ku(S,b,w){const N=mr(S);ve(N._canInitEmulator,N,"emulator-config-failed"),ve(/^https?:\/\//.test(b),N,"invalid-emulator-scheme");const $=!!w?.disableWarnings,Q=Cc(b),{host:Me,port:et}=function Ho(S){const b=Cc(S),w=/(\/\/)?([^?#/]+)/.exec(S.substr(b.length));if(!w)return{host:"",port:null};const N=w[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(N);if($){const Q=$[1];return{host:Q,port:ha(N.substr(Q.length+1))}}{const[Q,Me]=N.split(":");return{host:Q,port:ha(Me)}}}(b);N.config.emulator={url:`${Q}//${Me}${null===et?"":`:${et}`}/`},N.settings.appVerificationDisabledForTesting=!0,N.emulatorConfig=Object.freeze({host:Me,port:et,protocol:Q.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function jn(){function S(){const b=document.createElement("p"),w=b.style;b.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",b.classList.add("firebase-emulator-warning"),document.body.appendChild(b)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",S):S())}()}function Cc(S){const b=S.indexOf(":");return b<0?"":S.substr(0,b+1)}function ha(S){if(!S)return null;const b=Number(S);return isNaN(b)?null:b}class _r{constructor(b,w){this.providerId=b,this.signInMethod=w}toJSON(){return xe("not implemented")}_getIdTokenResponse(b){return xe("not implemented")}_linkToIdToken(b,w){return xe("not implemented")}_getReauthenticationResolver(b){return xe("not implemented")}}function Mi(S,b){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:resetPassword",_n(S,b))})).apply(this,arguments)}function Jr(S,b){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function xt(S,b){return hn.apply(this,arguments)}function hn(){return(hn=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:update",_n(S,b))})).apply(this,arguments)}function Qr(){return(Qr=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithPassword",_n(S,b))})).apply(this,arguments)}function Go(S,b){return Or.apply(this,arguments)}function Or(){return(Or=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:sendOobCode",_n(S,b))})).apply(this,arguments)}function Gs(S,b){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(S,b){return Go(S,b)})).apply(this,arguments)}function wo(S,b){return vr.apply(this,arguments)}function vr(){return(vr=(0,O.Z)(function*(S,b){return Go(S,b)})).apply(this,arguments)}function Ft(S,b){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(S,b){return Go(S,b)})).apply(this,arguments)}function kr(S,b){return pa.apply(this,arguments)}function pa(){return(pa=(0,O.Z)(function*(S,b){return Go(S,b)})).apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithEmailLink",_n(S,b))})).apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithEmailLink",_n(S,b))})).apply(this,arguments)}class di extends _r{constructor(b,w,N,$=null){super("password",N),this._email=b,this._password=w,this._tenantId=$}static _fromEmailAndPassword(b,w){return new di(b,w,"password")}static _fromEmailAndCode(b,w,N=null){return new di(b,w,"emailLink",N)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(b){const w="string"==typeof b?JSON.parse(b):b;if(w?.email&&w?.password){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(b){var w=this;return(0,O.Z)(function*(){switch(w.signInMethod){case"password":return function wr(S,b){return Qr.apply(this,arguments)}(b,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function qs(S,b){return yr.apply(this,arguments)}(b,{email:w._email,oobCode:w._password});default:ie(b,"internal-error")}})()}_linkToIdToken(b,w){var N=this;return(0,O.Z)(function*(){switch(N.signInMethod){case"password":return Jr(b,{idToken:w,returnSecureToken:!0,email:N._email,password:N._password});case"emailLink":return function qo(S,b){return ao.apply(this,arguments)}(b,{idToken:w,email:N._email,oobCode:N._password});default:ie(b,"internal-error")}})()}_getReauthenticationResolver(b){return this._getIdTokenResponse(b)}}function On(S,b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithIdp",_n(S,b))})).apply(this,arguments)}class rs extends _r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(b){const w=new rs(b.providerId,b.signInMethod);return b.idToken||b.accessToken?(b.idToken&&(w.idToken=b.idToken),b.accessToken&&(w.accessToken=b.accessToken),b.nonce&&!b.pendingToken&&(w.nonce=b.nonce),b.pendingToken&&(w.pendingToken=b.pendingToken)):b.oauthToken&&b.oauthTokenSecret?(w.accessToken=b.oauthToken,w.secret=b.oauthTokenSecret):ie("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(b){const w="string"==typeof b?JSON.parse(b):b,{providerId:N,signInMethod:$}=w,Q=(0,fe._T)(w,["providerId","signInMethod"]);if(!N||!$)return null;const Me=new rs(N,$);return Me.idToken=Q.idToken||void 0,Me.accessToken=Q.accessToken||void 0,Me.secret=Q.secret,Me.nonce=Q.nonce,Me.pendingToken=Q.pendingToken||null,Me}_getIdTokenResponse(b){return On(b,this.buildRequest())}_linkToIdToken(b,w){const N=this.buildRequest();return N.idToken=w,On(b,N)}_getReauthenticationResolver(b){const w=this.buildRequest();return w.autoCreate=!1,On(b,w)}buildRequest(){const b={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)b.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),b.postBody=(0,H.xO)(w)}return b}}function Xr(S,b){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:sendVerificationCode",_n(S,b))})).apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithPhoneNumber",_n(S,b))})).apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(S,b){const w=yield qn(S,"POST","/v1/accounts:signInWithPhoneNumber",_n(S,b));if(w.temporaryProof)throw lr(S,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const rg={USER_NOT_FOUND:"user-not-found"};function on(){return(on=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithPhoneNumber",_n(S,Object.assign(Object.assign({},b),{operation:"REAUTH"})),rg)})).apply(this,arguments)}class gt extends _r{constructor(b){super("phone","phone"),this.params=b}static _fromVerification(b,w){return new gt({verificationId:b,verificationCode:w})}static _fromTokenResponse(b,w){return new gt({phoneNumber:b,temporaryProof:w})}_getIdTokenResponse(b){return function Dr(S,b){return Yn.apply(this,arguments)}(b,this._makeVerificationRequest())}_linkToIdToken(b,w){return function qi(S,b){return wi.apply(this,arguments)}(b,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(b){return function is(S,b){return on.apply(this,arguments)}(b,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:b,phoneNumber:w,verificationId:N,verificationCode:$}=this.params;return b&&w?{temporaryProof:b,phoneNumber:w}:{sessionInfo:N,code:$}}toJSON(){const b={providerId:this.providerId};return this.params.phoneNumber&&(b.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(b.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(b.verificationCode=this.params.verificationCode),this.params.verificationId&&(b.verificationId=this.params.verificationId),b}static fromJSON(b){"string"==typeof b&&(b=JSON.parse(b));const{verificationId:w,verificationCode:N,phoneNumber:$,temporaryProof:Q}=b;return N||w||$||Q?new gt({verificationId:w,verificationCode:N,phoneNumber:$,temporaryProof:Q}):null}}class Pr{constructor(b){var w,N,$,Q,Me,et;const Nt=(0,H.zd)((0,H.pd)(b)),Ut=null!==(w=Nt.apiKey)&&void 0!==w?w:null,fn=null!==(N=Nt.oobCode)&&void 0!==N?N:null,tr=function wc(S){switch(S){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Nt.mode)&&void 0!==$?$:null);ve(Ut&&fn&&tr,"argument-error"),this.apiKey=Ut,this.operation=tr,this.code=fn,this.continueUrl=null!==(Q=Nt.continueUrl)&&void 0!==Q?Q:null,this.languageCode=null!==(Me=Nt.languageCode)&&void 0!==Me?Me:null,this.tenantId=null!==(et=Nt.tenantId)&&void 0!==et?et:null}static parseLink(b){const w=function ei(S){const b=(0,H.zd)((0,H.pd)(S)).link,w=b?(0,H.zd)((0,H.pd)(b)).deep_link_id:null,N=(0,H.zd)((0,H.pd)(S)).deep_link_id;return(N?(0,H.zd)((0,H.pd)(N)).link:null)||N||w||b||S}(b);try{return new Pr(w)}catch{return null}}}let Gr=(()=>{class S{constructor(){this.providerId=S.PROVIDER_ID}static credential(w,N){return di._fromEmailAndPassword(w,N)}static credentialWithLink(w,N){const $=Pr.parseLink(N);return ve($,"argument-error"),di._fromEmailAndCode(w,$.code,$.tenantId)}}return S.PROVIDER_ID="password",S.EMAIL_PASSWORD_SIGN_IN_METHOD="password",S.EMAIL_LINK_SIGN_IN_METHOD="emailLink",S})();class Wo{constructor(b){this.providerId=b,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(b){this.defaultLanguageCode=b}setCustomParameters(b){return this.customParameters=b,this}getCustomParameters(){return this.customParameters}}class qa extends Wo{constructor(){super(...arguments),this.scopes=[]}addScope(b){return this.scopes.includes(b)||this.scopes.push(b),this}getScopes(){return[...this.scopes]}}class Fr extends qa{static credentialFromJSON(b){const w="string"==typeof b?JSON.parse(b):b;return ve("providerId"in w&&"signInMethod"in w,"argument-error"),rs._fromParams(w)}credential(b){return this._credential(Object.assign(Object.assign({},b),{nonce:b.rawNonce}))}_credential(b){return ve(b.idToken||b.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},b),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(b){return Fr.oauthCredentialFromTaggedObject(b)}static credentialFromError(b){return Fr.oauthCredentialFromTaggedObject(b.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:w,oauthAccessToken:N,oauthTokenSecret:$,pendingToken:Q,nonce:Me,providerId:et}=b;if(!N&&!$&&!w&&!Q||!et)return null;try{return new Fr(et)._credential({idToken:w,accessToken:N,nonce:Me,pendingToken:Q})}catch{return null}}}let Wl=(()=>{class S extends qa{constructor(){super("facebook.com")}static credential(w){return rs._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return S.credentialFromTaggedObject(w)}static credentialFromError(w){return S.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return S.credential(w.oauthAccessToken)}catch{return null}}}return S.FACEBOOK_SIGN_IN_METHOD="facebook.com",S.PROVIDER_ID="facebook.com",S})(),zl=(()=>{class S extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(w,N){return rs._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:N})}static credentialFromResult(w){return S.credentialFromTaggedObject(w)}static credentialFromError(w){return S.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:N,oauthAccessToken:$}=w;if(!N&&!$)return null;try{return S.credential(N,$)}catch{return null}}}return S.GOOGLE_SIGN_IN_METHOD="google.com",S.PROVIDER_ID="google.com",S})(),Fe=(()=>{class S extends qa{constructor(){super("github.com")}static credential(w){return rs._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return S.credentialFromTaggedObject(w)}static credentialFromError(w){return S.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return S.credential(w.oauthAccessToken)}catch{return null}}}return S.GITHUB_SIGN_IN_METHOD="github.com",S.PROVIDER_ID="github.com",S})();class ga extends _r{constructor(b,w){super(b,b),this.pendingToken=w}_getIdTokenResponse(b){return On(b,this.buildRequest())}_linkToIdToken(b,w){const N=this.buildRequest();return N.idToken=w,On(b,N)}_getReauthenticationResolver(b){const w=this.buildRequest();return w.autoCreate=!1,On(b,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(b){const w="string"==typeof b?JSON.parse(b):b,{providerId:N,signInMethod:$,pendingToken:Q}=w;return N&&$&&Q&&N===$?new ga(N,Q):null}static _create(b,w){return new ga(b,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zo extends Wo{constructor(b){ve(b.startsWith("saml."),"argument-error"),super(b)}static credentialFromResult(b){return zo.samlCredentialFromTaggedObject(b)}static credentialFromError(b){return zo.samlCredentialFromTaggedObject(b.customData||{})}static credentialFromJSON(b){const w=ga.fromJSON(b);return ve(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{pendingToken:w,providerId:N}=b;if(!w||!N)return null;try{return ga._create(N,w)}catch{return null}}}let Wa=(()=>{class S extends qa{constructor(){super("twitter.com")}static credential(w,N){return rs._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:N})}static credentialFromResult(w){return S.credentialFromTaggedObject(w)}static credentialFromError(w){return S.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:N,oauthTokenSecret:$}=w;if(!N||!$)return null;try{return S.credential(N,$)}catch{return null}}}return S.TWITTER_SIGN_IN_METHOD="twitter.com",S.PROVIDER_ID="twitter.com",S})();function Kl(S,b){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signUp",_n(S,b))})).apply(this,arguments)}class Ws{constructor(b){this.user=b.user,this.providerId=b.providerId,this._tokenResponse=b._tokenResponse,this.operationType=b.operationType}static _fromIdTokenResponse(b,w,N,$=!1){return(0,O.Z)(function*(){const Q=yield Kt._fromIdTokenResponse(b,N,$),Me=Zl(N);return new Ws({user:Q,providerId:Me,_tokenResponse:N,operationType:w})})()}static _forOperation(b,w,N){return(0,O.Z)(function*(){yield b._updateTokensIfNecessary(N,!0);const $=Zl(N);return new Ws({user:b,providerId:$,_tokenResponse:N,operationType:w})})()}}function Zl(S){return S.providerId?S.providerId:"phoneNumber"in S?"phone":null}function Dc(S){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,O.Z)(function*(S){var b;const w=mr(S);if(yield w._initializationPromise,null!==(b=w.currentUser)&&void 0!==b&&b.isAnonymous)return new Ws({user:w.currentUser,providerId:null,operationType:"signIn"});const N=yield Kl(w,{returnSecureToken:!0}),$=yield Ws._fromIdTokenResponse(w,"signIn",N,!0);return yield w._updateCurrentUser($.user),$})).apply(this,arguments)}class Yl extends H.ZR{constructor(b,w,N,$){var Q;super(w.code,w.message),this.operationType=N,this.user=$,Object.setPrototypeOf(this,Yl.prototype),this.customData={appName:b.name,tenantId:null!==(Q=b.tenantId)&&void 0!==Q?Q:void 0,_serverResponse:w.customData._serverResponse,operationType:N}}static _fromErrorAndOperation(b,w,N,$){return new Yl(b,w,N,$)}}function hi(S,b,w,N){return("reauthenticate"===b?w._getReauthenticationResolver(S):w._getIdTokenResponse(S)).catch(Q=>{throw"auth/multi-factor-auth-required"===Q.code?Yl._fromErrorAndOperation(S,Q,b,N):Q})}function ma(S){return new Set(S.map(({providerId:b})=>b).filter(b=>!!b))}function _a(S,b){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*(S,b){const w=(0,H.m9)(S);yield Tc(!0,w,b);const{providerUserInfo:N}=yield $n(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[b]}),$=ma(N||[]);return w.providerData=w.providerData.filter(Q=>$.has(Q.providerId)),$.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function ae(S,b){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,O.Z)(function*(S,b,w=!1){const N=yield Wn(S,b._linkToIdToken(S.auth,yield S.getIdToken()),w);return Ws._forOperation(S,"link",N)})).apply(this,arguments)}function Tc(S,b,w){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*(S,b,w){yield Hs(b);const $=!1===S?"provider-already-linked":"no-such-provider";ve(ma(b.providerData).has(w)===S,b.auth,$)})).apply(this,arguments)}function Sc(S,b){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(S,b,w=!1){const{auth:N}=S,$="reauthenticate";try{const Q=yield Wn(S,hi(N,$,b,S),w);ve(Q.idToken,N,"internal-error");const Me=oo(Q.idToken);ve(Me,N,"internal-error");const{sub:et}=Me;return ve(S.uid===et,N,"user-mismatch"),Ws._forOperation(S,$,Q)}catch(Q){throw"auth/user-not-found"===Q?.code&&ie(N,"user-mismatch"),Q}})).apply(this,arguments)}function Bu(S,b){return va.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(S,b,w=!1){const N="signIn",$=yield hi(S,N,b),Q=yield Ws._fromIdTokenResponse(S,N,$);return w||(yield S._updateCurrentUser(Q.user)),Q})).apply(this,arguments)}function Wi(S,b){return ti.apply(this,arguments)}function ti(){return(ti=(0,O.Z)(function*(S,b){return Bu(mr(S),b)})).apply(this,arguments)}function Za(S,b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(S,b){const w=(0,H.m9)(S);return yield Tc(!1,w,b.providerId),ae(w,b)})).apply(this,arguments)}function ol(S,b){return ya.apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(S,b){return Sc((0,H.m9)(S),b)})).apply(this,arguments)}function qr(S,b){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,O.Z)(function*(S,b){return qn(S,"POST","/v1/accounts:signInWithCustomToken",_n(S,b))})).apply(this,arguments)}function Ja(S,b){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(S,b){const w=mr(S),N=yield qr(w,{token:b,returnSecureToken:!0}),$=yield Ws._fromIdTokenResponse(w,"signIn",N);return yield w._updateCurrentUser($.user),$})).apply(this,arguments)}class ni{constructor(b,w){this.factorId=b,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(b,w){return"phoneInfo"in w?al._fromServerResponse(b,w):ie(b,"internal-error")}}class al extends ni{constructor(b){super("phone",b),this.phoneNumber=b.phoneInfo}static _fromServerResponse(b,w){return new al(w)}}function Vu(S,b,w){var N;ve((null===(N=w.url)||void 0===N?void 0:N.length)>0,S,"invalid-continue-uri"),ve(typeof w.dynamicLinkDomain>"u"||w.dynamicLinkDomain.length>0,S,"invalid-dynamic-link-domain"),b.continueUrl=w.url,b.dynamicLinkDomain=w.dynamicLinkDomain,b.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(ve(w.iOS.bundleId.length>0,S,"missing-ios-bundle-id"),b.iOSBundleId=w.iOS.bundleId),w.android&&(ve(w.android.packageName.length>0,S,"missing-android-pkg-name"),b.androidInstallApp=w.android.installApp,b.androidMinimumVersionCode=w.android.minimumVersion,b.androidPackageName=w.android.packageName)}function nh(S,b,w){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S),$={requestType:"PASSWORD_RESET",email:b};w&&Vu(N,$,w),yield wo(N,$)})).apply(this,arguments)}function Ql(S,b,w){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(S,b,w){yield Mi((0,H.m9)(S),{oobCode:b,newPassword:w})})).apply(this,arguments)}function Gt(S,b){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(S,b){yield xt((0,H.m9)(S),{oobCode:b})})).apply(this,arguments)}function ul(S,b){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(S,b){const w=(0,H.m9)(S),N=yield Mi(w,{oobCode:b}),$=N.requestType;switch(ve($,w,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(N.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(N.mfaInfo,w,"internal-error");default:ve(N.email,w,"internal-error")}let Q=null;return N.mfaInfo&&(Q=ni._fromServerResponse(mr(w),N.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.newEmail:N.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.email:N.newEmail)||null,multiFactorInfo:Q},operation:$}})).apply(this,arguments)}function Xl(S,b){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(S,b){const{data:w}=yield ul((0,H.m9)(S),b);return w.email})).apply(this,arguments)}function Ss(S,b,w){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(S,b,w){const N=mr(S),$=yield Kl(N,{returnSecureToken:!0,email:b,password:w}),Q=yield Ws._fromIdTokenResponse(N,"signIn",$);return yield N._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function rh(S,b,w){return Wi((0,H.m9)(S),Gr.credential(b,w))}function tt(S,b,w){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S),$={requestType:"EMAIL_SIGNIN",email:b};ve(w.handleCodeInApp,N,"argument-error"),w&&Vu(N,$,w),yield Ft(N,$)})).apply(this,arguments)}function ih(S,b){return"EMAIL_SIGNIN"===Pr.parseLink(b)?.operation}function Br(S,b,w){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S),$=Gr.credentialWithLink(b,w||We());return ve($._tenantId===(N.tenantId||null),N,"tenant-id-mismatch"),Wi(N,$)})).apply(this,arguments)}function ed(S,b){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:createAuthUri",_n(S,b))})).apply(this,arguments)}function So(S,b){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,O.Z)(function*(S,b){const N={identifier:b,continueUri:He()?We():"http://localhost"},{signinMethods:$}=yield ed((0,H.m9)(S),N);return $||[]})).apply(this,arguments)}function cl(S,b){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(S,b){const w=(0,H.m9)(S),$={requestType:"VERIFY_EMAIL",idToken:yield S.getIdToken()};b&&Vu(w.auth,$,b);const{email:Q}=yield Gs(w.auth,$);Q!==S.email&&(yield S.reload())})).apply(this,arguments)}function sh(S,b,w){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S),Q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield S.getIdToken(),newEmail:b};w&&Vu(N.auth,Q,w);const{email:Me}=yield kr(N.auth,Q);Me!==S.email&&(yield S.reload())})).apply(this,arguments)}function ii(S,b){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,O.Z)(function*(S,b){return tn(S,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function oh(S,b){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(S,{displayName:b,photoURL:w}){if(void 0===b&&void 0===w)return;const N=(0,H.m9)(S),Q={idToken:yield N.getIdToken(),displayName:b,photoUrl:w,returnSecureToken:!0},Me=yield Wn(N,ii(N.auth,Q));N.displayName=Me.displayName||null,N.photoURL=Me.photoUrl||null;const et=N.providerData.find(({providerId:Nt})=>"password"===Nt);et&&(et.displayName=N.displayName,et.photoURL=N.photoURL),yield N._updateTokensIfNecessary(Me)})).apply(this,arguments)}function co(S,b){return td((0,H.m9)(S),b,null)}function $u(S,b){return td((0,H.m9)(S),null,b)}function td(S,b,w){return ah.apply(this,arguments)}function ah(){return(ah=(0,O.Z)(function*(S,b,w){const{auth:N}=S,Q={idToken:yield S.getIdToken(),returnSecureToken:!0};b&&(Q.email=b),w&&(Q.password=w);const Me=yield Wn(S,Jr(N,Q));yield S._updateTokensIfNecessary(Me,!0)})).apply(this,arguments)}class Vr{constructor(b,w,N={}){this.isNewUser=b,this.providerId=w,this.profile=N}}class os extends Vr{constructor(b,w,N,$){super(b,w,N),this.username=$}}class Zo extends Vr{constructor(b,w){super(b,"facebook.com",w)}}class Ks extends os{constructor(b,w){super(b,"github.com",w,"string"==typeof w?.login?w?.login:null)}}class Zs extends Vr{constructor(b,w){super(b,"google.com",w)}}class ju extends os{constructor(b,w,N){super(b,"twitter.com",w,N)}}function Hu(S){const{user:b,_tokenResponse:w}=S;return b.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function uh(S){var b,w;if(!S)return null;const{providerId:N}=S,$=S.rawUserInfo?JSON.parse(S.rawUserInfo):{},Q=S.isNewUser||"identitytoolkit#SignupNewUserResponse"===S.kind;if(!N&&S?.idToken){const Me=null===(w=null===(b=oo(S.idToken))||void 0===b?void 0:b.firebase)||void 0===w?void 0:w.sign_in_provider;if(Me)return new Vr(Q,"anonymous"!==Me&&"custom"!==Me?Me:null)}if(!N)return null;switch(N){case"facebook.com":return new Zo(Q,$);case"github.com":return new Ks(Q,$);case"google.com":return new Zs(Q,$);case"twitter.com":return new ju(Q,$,S.screenName||null);case"custom":case"anonymous":return new Vr(Q,null);default:return new Vr(Q,N,$)}}(w)}class Jn{constructor(b,w,N){this.type=b,this.credential=w,this.auth=N}static _fromIdtoken(b,w){return new Jn("enroll",b,w)}static _fromMfaPendingCredential(b){return new Jn("signin",b)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(b){var w,N;if(b?.multiFactorSession){if(null!==(w=b.multiFactorSession)&&void 0!==w&&w.pendingCredential)return Jn._fromMfaPendingCredential(b.multiFactorSession.pendingCredential);if(null!==(N=b.multiFactorSession)&&void 0!==N&&N.idToken)return Jn._fromIdtoken(b.multiFactorSession.idToken)}return null}}class Ac{constructor(b,w,N){this.session=b,this.hints=w,this.signInResolver=N}static _fromError(b,w){const N=mr(b),$=w.customData._serverResponse,Q=($.mfaInfo||[]).map(et=>ni._fromServerResponse(N,et));ve($.mfaPendingCredential,N,"internal-error");const Me=Jn._fromMfaPendingCredential($.mfaPendingCredential);return new Ac(Me,Q,function(){var et=(0,O.Z)(function*(Nt){const Ut=yield Nt._process(N,Me);delete $.mfaInfo,delete $.mfaPendingCredential;const fn=Object.assign(Object.assign({},$),{idToken:Ut.idToken,refreshToken:Ut.refreshToken});switch(w.operationType){case"signIn":const tr=yield Ws._fromIdTokenResponse(N,w.operationType,fn);return yield N._updateCurrentUser(tr.user),tr;case"reauthenticate":return ve(w.user,N,"internal-error"),Ws._forOperation(w.user,w.operationType,fn);default:ie(N,"internal-error")}});return function(Nt){return et.apply(this,arguments)}}())}resolveSignIn(b){var w=this;return(0,O.Z)(function*(){return w.signInResolver(b)})()}}function ll(S,b){var w;const N=(0,H.m9)(S),$=b;return ve(b.customData.operationType,N,"argument-error"),ve(null===(w=$.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,N,"argument-error"),Ac._fromError(N,$)}function Oi(S,b){return tn(S,"POST","/v2/accounts/mfaEnrollment:start",_n(S,b))}class Nn{constructor(b){this.user=b,this.enrolledFactors=[],b._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(N=>ni._fromServerResponse(b.auth,N)))})}static _fromUser(b){return new Nn(b)}getSession(){var b=this;return(0,O.Z)(function*(){return Jn._fromIdtoken(yield b.user.getIdToken(),b.user.auth)})()}enroll(b,w){var N=this;return(0,O.Z)(function*(){const $=b,Q=yield N.getSession(),Me=yield Wn(N.user,$._process(N.user.auth,Q,w));return yield N.user._updateTokensIfNecessary(Me),N.user.reload()})()}unenroll(b){var w=this;return(0,O.Z)(function*(){const N="string"==typeof b?b:b.uid,$=yield w.user.getIdToken(),Q=yield Wn(w.user,function Qn(S,b){return tn(S,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(S,b))}(w.user.auth,{idToken:$,mfaEnrollmentId:N}));w.enrolledFactors=w.enrolledFactors.filter(({uid:Me})=>Me!==N),yield w.user._updateTokensIfNecessary(Q);try{yield w.user.reload()}catch(Me){if("auth/user-token-expired"!==Me?.code)throw Me}})()}}const xc=new WeakMap;function wa(S){const b=(0,H.m9)(S);return xc.has(b)||xc.set(b,Nn._fromUser(b)),xc.get(b)}const Xa="__sak";class Nc{constructor(b,w){this.storageRetriever=b,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(Xa,"1"),this.storage.removeItem(Xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(b,w){return this.storage.setItem(b,JSON.stringify(w)),Promise.resolve()}_get(b){const w=this.storage.getItem(b);return Promise.resolve(w?JSON.parse(w):null)}_remove(b){return this.storage.removeItem(b),Promise.resolve()}get storage(){return this.storageRetriever()}}const Di=(()=>{class S extends Nc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,N)=>this.onStorageEvent(w,N),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gu(){const S=(0,H.z$)();return re(S)||yt(S)}()&&function Co(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hr(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const N of Object.keys(this.listeners)){const $=this.storage.getItem(N),Q=this.localCache[N];$!==Q&&w(N,Q,$)}}onStorageEvent(w,N=!1){if(!w.key)return void this.forAllChangedKeys((et,Nt,Ut)=>{this.notifyListeners(et,Ut)});const $=w.key;if(N?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const et=this.storage.getItem($);if(w.newValue!==et)null!==w.newValue?this.storage.setItem($,w.newValue):this.storage.removeItem($);else if(this.localCache[$]===w.newValue&&!N)return}const Q=()=>{const et=this.storage.getItem($);!N&&this.localCache[$]===et||this.notifyListeners($,et)},Me=this.storage.getItem($);!function dt(){return(0,H.w1)()&&10===document.documentMode}()||Me===w.newValue||w.newValue===w.oldValue?Q():setTimeout(Q,10)}notifyListeners(w,N){this.localCache[w]=N;const $=this.listeners[w];if($)for(const Q of Array.from($))Q(N&&JSON.parse(N))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,N,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:N,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,N){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(N)}_removeListener(w,N){this.listeners[w]&&(this.listeners[w].delete(N),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,N){var $=()=>super._set,Q=this;return(0,O.Z)(function*(){yield $().call(Q,w,N),Q.localCache[w]=JSON.stringify(N)})()}_get(w){var N=()=>super._get,$=this;return(0,O.Z)(function*(){const Q=yield N().call($,w);return $.localCache[w]=JSON.stringify(Q),Q})()}_remove(w){var N=()=>super._remove,$=this;return(0,O.Z)(function*(){yield N().call($,w),delete $.localCache[w]})()}}return S.type="LOCAL",S})(),tu=(()=>{class S extends Nc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,N){}_removeListener(w,N){}}return S.type="SESSION",S})();let hl=(()=>{class S{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const N=this.receivers.find(Q=>Q.isListeningto(w));if(N)return N;const $=new S(w);return this.receivers.push($),$}isListeningto(w){return this.eventTarget===w}handleEvent(w){var N=this;return(0,O.Z)(function*(){const $=w,{eventId:Q,eventType:Me,data:et}=$.data,Nt=N.handlersMap[Me];if(!Nt?.size)return;$.ports[0].postMessage({status:"ack",eventId:Q,eventType:Me});const Ut=Array.from(Nt).map(function(){var tr=(0,O.Z)(function*(gi){return gi($.origin,et)});return function(gi){return tr.apply(this,arguments)}}()),fn=yield function og(S){return Promise.all(S.map(function(){var b=(0,O.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(N){return{fulfilled:!1,reason:N}}});return function(w){return b.apply(this,arguments)}}()))}(Ut);$.ports[0].postMessage({status:"done",eventId:Q,eventType:Me,response:fn})})()}_subscribe(w,N){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(N)}_unsubscribe(w,N){this.handlersMap[w]&&N&&this.handlersMap[w].delete(N),(!N||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return S.receivers=[],S})();function Mc(S="",b=10){let w="";for(let N=0;N<b;N++)w+=Math.floor(10*Math.random());return S+w}class ag{constructor(b){this.target=b,this.handlers=new Set}removeMessageHandler(b){b.messageChannel&&(b.messageChannel.port1.removeEventListener("message",b.onMessage),b.messageChannel.port1.close()),this.handlers.delete(b)}_send(b,w,N=50){var $=this;return(0,O.Z)(function*(){const Q=typeof MessageChannel<"u"?new MessageChannel:null;if(!Q)throw new Error("connection_unavailable");let Me,et;return new Promise((Nt,Ut)=>{const fn=Mc("",20);Q.port1.start();const tr=setTimeout(()=>{Ut(new Error("unsupported_event"))},N);et={messageChannel:Q,onMessage(gi){const pr=gi;if(pr.data.eventId===fn)switch(pr.data.status){case"ack":clearTimeout(tr),Me=setTimeout(()=>{Ut(new Error("timeout"))},3e3);break;case"done":clearTimeout(Me),Nt(pr.data.response);break;default:clearTimeout(tr),clearTimeout(Me),Ut(new Error("invalid_response"))}}},$.handlers.add(et),Q.port1.addEventListener("message",et.onMessage),$.target.postMessage({eventType:b,eventId:fn,data:w},[Q.port2])}).finally(()=>{et&&$.removeMessageHandler(et)})})()}}function dr(){return window}function nu(){return typeof dr().WorkerGlobalScope<"u"&&"function"==typeof dr().importScripts}function us(){return(us=(0,O.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ao="firebaseLocalStorageDb",Sa="firebaseLocalStorage",ru="fbase_key";class lo{constructor(b){this.request=b}toPromise(){return new Promise((b,w)=>{this.request.addEventListener("success",()=>{b(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Rc(S,b){return S.transaction([Sa],b?"readwrite":"readonly").objectStore(Sa)}function Jo(){const S=indexedDB.open(Ao,1);return new Promise((b,w)=>{S.addEventListener("error",()=>{w(S.error)}),S.addEventListener("upgradeneeded",()=>{const N=S.result;try{N.createObjectStore(Sa,{keyPath:ru})}catch($){w($)}}),S.addEventListener("success",(0,O.Z)(function*(){const N=S.result;N.objectStoreNames.contains(Sa)?b(N):(N.close(),yield function ch(){const S=indexedDB.deleteDatabase(Ao);return new lo(S).toPromise()}(),b(yield Jo()))}))})}function qu(S,b,w){return cs.apply(this,arguments)}function cs(){return(cs=(0,O.Z)(function*(S,b,w){const N=Rc(S,!0).put({[ru]:b,value:w});return new lo(N).toPromise()})).apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(S,b){const w=Rc(S,!1).get(b),N=yield new lo(w).toPromise();return void 0===N?null:N.value})).apply(this,arguments)}function iu(S,b){const w=Rc(S,!0).delete(b);return new lo(w).toPromise()}const ds=(()=>{class S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,O.Z)(function*(){return w.db||(w.db=yield Jo()),w.db})()}_withRetries(w){var N=this;return(0,O.Z)(function*(){let $=0;for(;;)try{const Q=yield N._openDb();return yield w(Q)}catch(Q){if($++>3)throw Q;N.db&&(N.db.close(),N.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,O.Z)(function*(){return nu()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,O.Z)(function*(){w.receiver=hl._getInstance(function Ta(){return nu()?self:null}()),w.receiver._subscribe("keyChanged",function(){var N=(0,O.Z)(function*($,Q){return{keyProcessed:(yield w._poll()).includes(Q.key)}});return function($,Q){return N.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var N=(0,O.Z)(function*($,Q){return["keyChanged"]});return function($,Q){return N.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,O.Z)(function*(){var N,$;if(w.activeServiceWorker=yield function fl(){return us.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new ag(w.activeServiceWorker);const Q=yield w.sender._send("ping",{},800);!Q||(null===(N=Q[0])||void 0===N?void 0:N.fulfilled)&&(null===($=Q[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var N=this;return(0,O.Z)(function*(){if(N.sender&&N.activeServiceWorker&&function pl(){var S;return(null===(S=navigator?.serviceWorker)||void 0===S?void 0:S.controller)||null}()===N.activeServiceWorker)try{yield N.sender._send("keyChanged",{key:w},N.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,O.Z)(function*(){try{if(!indexedDB)return!1;const w=yield Jo();return yield qu(w,Xa,"1"),yield iu(w,Xa),!0}catch{}return!1})()}_withPendingWrite(w){var N=this;return(0,O.Z)(function*(){N.pendingWrites++;try{yield w()}finally{N.pendingWrites--}})()}_set(w,N){var $=this;return(0,O.Z)(function*(){return $._withPendingWrite((0,O.Z)(function*(){return yield $._withRetries(Q=>qu(Q,w,N)),$.localCache[w]=N,$.notifyServiceWorker(w)}))})()}_get(w){var N=this;return(0,O.Z)(function*(){const $=yield N._withRetries(Q=>function Oc(S,b){return ls.apply(this,arguments)}(Q,w));return N.localCache[w]=$,$})()}_remove(w){var N=this;return(0,O.Z)(function*(){return N._withPendingWrite((0,O.Z)(function*(){return yield N._withRetries($=>iu($,w)),delete N.localCache[w],N.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,O.Z)(function*(){const N=yield w._withRetries(Me=>{const et=Rc(Me,!1).getAll();return new lo(et).toPromise()});if(!N)return[];if(0!==w.pendingWrites)return[];const $=[],Q=new Set;for(const{fbase_key:Me,value:et}of N)Q.add(Me),JSON.stringify(w.localCache[Me])!==JSON.stringify(et)&&(w.notifyListeners(Me,et),$.push(Me));for(const Me of Object.keys(w.localCache))w.localCache[Me]&&!Q.has(Me)&&(w.notifyListeners(Me,null),$.push(Me));return $})()}notifyListeners(w,N){this.localCache[w]=N;const $=this.listeners[w];if($)for(const Q of Array.from($))Q(N)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,O.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,N){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(N)}_removeListener(w,N){this.listeners[w]&&(this.listeners[w].delete(N),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return S.type="LOCAL",S})();function Wu(S,b){return tn(S,"POST","/v2/accounts/mfaSignIn:start",_n(S,b))}function Ys(){return(Ys=(0,O.Z)(function*(S){return(yield tn(S,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ia(S){return new Promise((b,w)=>{const N=document.createElement("script");N.setAttribute("src",S),N.onload=b,N.onerror=$=>{const Q=me("internal-error");Q.customData=$,w(Q)},N.type="text/javascript",N.charset="UTF-8",function nd(){var S,b;return null!==(b=null===(S=document.getElementsByTagName("head"))||void 0===S?void 0:S[0])&&void 0!==b?b:document}().appendChild(N)})}function xo(S){return`__${S}${Math.floor(1e6*Math.random())}`}const ki=1e12;class si{constructor(b){this.auth=b,this.counter=ki,this._widgets=new Map}render(b,w){const N=this.counter;return this._widgets.set(N,new rd(b,this.auth.name,w||{})),this.counter++,N}reset(b){var w;const N=b||ki;null===(w=this._widgets.get(N))||void 0===w||w.delete(),this._widgets.delete(N)}getResponse(b){var w;return(null===(w=this._widgets.get(b||ki))||void 0===w?void 0:w.getResponse())||""}execute(b){var w=this;return(0,O.Z)(function*(){var N;return null===(N=w._widgets.get(b||ki))||void 0===N||N.execute(),""})()}}class rd{constructor(b,w,N){this.params=N,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof b?document.getElementById(b):b;ve($,"argument-error",{appName:w}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dh(S){const b=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<S;N++)b.push(w.charAt(Math.floor(Math.random()*w.length)));return b.join("")}(50);const{callback:b,"expired-callback":w}=this.params;if(b)try{b(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Aa=xo("rcb"),ug=new Qt(3e4,6e4);class vl{constructor(){var b;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(b=dr().grecaptcha)||void 0===b||!b.render)}load(b,w=""){return ve(function zi(S){return S.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(S)}(w),b,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(dr().grecaptcha):new Promise((N,$)=>{const Q=dr().setTimeout(()=>{$(me(b,"network-request-failed"))},ug.get());dr()[Aa]=()=>{dr().clearTimeout(Q),delete dr()[Aa];const et=dr().grecaptcha;if(!et)return void $(me(b,"internal-error"));const Nt=et.render;et.render=(Ut,fn)=>{const tr=Nt(Ut,fn);return this.counter++,tr},this.hostLanguage=w,N(et)},Ia(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Aa,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(Q),$(me(b,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(b){var w;return!(null===(w=dr().grecaptcha)||void 0===w||!w.render)&&(b===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xa{load(b){return(0,O.Z)(function*(){return new si(b)})()}clearedOneInstance(){}}const zu="recaptcha",hh={theme:"light",type:"image"};class fh{constructor(b,w=Object.assign({},hh),N){this.parameters=w,this.type=zu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mr(N),this.isInvisible="invisible"===this.parameters.size,ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof b?document.getElementById(b):b;ve($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xa:new vl,this.validateStartingState()}verify(){var b=this;return(0,O.Z)(function*(){b.assertNotDestroyed();const w=yield b.render(),N=b.getAssertedRecaptcha();return N.getResponse(w)||new Promise(Q=>{const Me=et=>{!et||(b.tokenChangeListeners.delete(Me),Q(et))};b.tokenChangeListeners.add(Me),b.isInvisible&&N.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(b){return Promise.reject(b)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(b=>{throw this.renderPromise=null,b})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(b=>{this.container.removeChild(b)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(b){return w=>{if(this.tokenChangeListeners.forEach(N=>N(w)),"function"==typeof b)b(w);else if("string"==typeof b){const N=dr()[b];"function"==typeof N&&N(w)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var b=this;return(0,O.Z)(function*(){if(yield b.init(),!b.widgetId){let w=b.container;if(!b.isInvisible){const N=document.createElement("div");w.appendChild(N),w=N}b.widgetId=b.getAssertedRecaptcha().render(w,b.parameters)}return b.widgetId})()}init(){var b=this;return(0,O.Z)(function*(){ve(He()&&!nu(),b.auth,"internal-error"),yield function Ku(){let S=null;return new Promise(b=>{"complete"!==document.readyState?(S=()=>b(),window.addEventListener("load",S)):b()}).catch(b=>{throw S&&window.removeEventListener("load",S),b})}(),b.recaptcha=yield b._recaptchaLoader.load(b.auth,b.auth.languageCode||void 0);const w=yield function lh(S){return Ys.apply(this,arguments)}(b.auth);ve(w,b.auth,"internal-error"),b.parameters.sitekey=w})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class id{constructor(b,w){this.verificationId=b,this.onConfirmation=w}confirm(b){const w=gt._fromVerification(this.verificationId,b);return this.onConfirmation(w)}}function cg(S,b,w){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(S,b,w){const N=mr(S),$=yield Qo(N,b,(0,H.m9)(w));return new id($,Q=>Wi(N,Q))})).apply(this,arguments)}function ho(S,b,w){return hs.apply(this,arguments)}function hs(){return(hs=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S);yield Tc(!1,N,"phone");const $=yield Qo(N.auth,b,(0,H.m9)(w));return new id($,Q=>Za(N,Q))})).apply(this,arguments)}function Af(S,b,w){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S),$=yield Qo(N.auth,b,(0,H.m9)(w));return new id($,Q=>ol(N,Q))})).apply(this,arguments)}function Qo(S,b,w){return sd.apply(this,arguments)}function sd(){return(sd=(0,O.Z)(function*(S,b,w){var N;const $=yield w.verify();try{let Q;if(ve("string"==typeof $,S,"argument-error"),ve(w.type===zu,S,"argument-error"),Q="string"==typeof b?{phoneNumber:b}:b,"session"in Q){const Me=Q.session;if("phoneNumber"in Q)return ve("enroll"===Me.type,S,"internal-error"),(yield Oi(S,{idToken:Me.credential,phoneEnrollmentInfo:{phoneNumber:Q.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{ve("signin"===Me.type,S,"internal-error");const et=(null===(N=Q.multiFactorHint)||void 0===N?void 0:N.uid)||Q.multiFactorUid;return ve(et,S,"missing-multi-factor-info"),(yield Wu(S,{mfaPendingCredential:Me.credential,mfaEnrollmentId:et,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Me}=yield Xr(S,{phoneNumber:Q.phoneNumber,recaptchaToken:$});return Me}}finally{w._reset()}})).apply(this,arguments)}function od(S,b){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(S,b){yield ae((0,H.m9)(S),b)})).apply(this,arguments)}let lg=(()=>{class S{constructor(w){this.providerId=S.PROVIDER_ID,this.auth=mr(w)}verifyPhoneNumber(w,N){return Qo(this.auth,w,(0,H.m9)(N))}static credential(w,N){return gt._fromVerification(w,N)}static credentialFromResult(w){return S.credentialFromTaggedObject(w)}static credentialFromError(w){return S.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:N,temporaryProof:$}=w;return N&&$?gt._fromTokenResponse(N,$):null}}return S.PROVIDER_ID="phone",S.PHONE_SIGN_IN_METHOD="phone",S})();function ou(S,b){return b?Oe(b):(ve(S._popupRedirectResolver,S,"argument-error"),S._popupRedirectResolver)}class hr extends _r{constructor(b){super("custom","custom"),this.params=b}_getIdTokenResponse(b){return On(b,this._buildIdpRequest())}_linkToIdToken(b,w){return On(b,this._buildIdpRequest(w))}_getReauthenticationResolver(b){return On(b,this._buildIdpRequest())}_buildIdpRequest(b){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return b&&(w.idToken=b),w}}function yl(S){return Bu(S.auth,new hr(S),S.bypassAuthState)}function Lc(S){const{auth:b,user:w}=S;return ve(w,b,"internal-error"),Sc(w,new hr(S),S.bypassAuthState)}function ph(S){return fi.apply(this,arguments)}function fi(){return(fi=(0,O.Z)(function*(S){const{auth:b,user:w}=S;return ve(w,b,"internal-error"),ae(w,new hr(S),S.bypassAuthState)})).apply(this,arguments)}class Is{constructor(b,w,N,$,Q=!1){this.auth=b,this.resolver=N,this.user=$,this.bypassAuthState=Q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var b=this;return new Promise(function(){var w=(0,O.Z)(function*(N,$){b.pendingPromise={resolve:N,reject:$};try{b.eventManager=yield b.resolver._initialize(b.auth),yield b.onExecution(),b.eventManager.registerConsumer(b)}catch(Q){b.reject(Q)}});return function(N,$){return w.apply(this,arguments)}}())}onAuthEvent(b){var w=this;return(0,O.Z)(function*(){const{urlResponse:N,sessionId:$,postBody:Q,tenantId:Me,error:et,type:Nt}=b;if(et)return void w.reject(et);const Ut={auth:w.auth,requestUri:N,sessionId:$,tenantId:Me||void 0,postBody:Q||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(Nt)(Ut))}catch(fn){w.reject(fn)}})()}onError(b){this.reject(b)}getIdpTask(b){switch(b){case"signInViaPopup":case"signInViaRedirect":return yl;case"linkViaPopup":case"linkViaRedirect":return ph;case"reauthViaPopup":case"reauthViaRedirect":return Lc;default:ie(this.auth,"internal-error")}}resolve(b){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(b),this.unregisterAndCleanUp()}reject(b){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(b),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zu=new Qt(2e3,1e4);function No(S,b,w){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(S,b,w){const N=mr(S);Te(S,b,Wo);const $=ou(N,w);return new Sr(N,"signInViaPopup",b,$).executeNotNull()})).apply(this,arguments)}function ad(S,b,w){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S);Te(N.auth,b,Wo);const $=ou(N.auth,w);return new Sr(N.auth,"reauthViaPopup",b,$,N).executeNotNull()})).apply(this,arguments)}function gh(S,b,w){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S);Te(N.auth,b,Wo);const $=ou(N.auth,w);return new Sr(N.auth,"linkViaPopup",b,$,N).executeNotNull()})).apply(this,arguments)}let Sr=(()=>{class S extends Is{constructor(w,N,$,Q,Me){super(w,N,Q,Me),this.provider=$,this.authWindow=null,this.pollId=null,S.currentPopupAction&&S.currentPopupAction.cancel(),S.currentPopupAction=this}executeNotNull(){var w=this;return(0,O.Z)(function*(){const N=yield w.execute();return ve(N,w.auth,"internal-error"),N})()}onExecution(){var w=this;return(0,O.Z)(function*(){Le(1===w.filter.length,"Popup operations only handle one event");const N=Mc();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],N),w.authWindow.associatedEvent=N,w.resolver._originValidation(w.auth).catch($=>{w.reject($)}),w.resolver._isIframeWebStorageSupported(w.auth,$=>{$||w.reject(me(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S.currentPopupAction=null}pollUserCancellation(){const w=()=>{var N,$;this.pollId=null!==($=null===(N=this.authWindow)||void 0===N?void 0:N.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,Zu.get())};w()}}return S.currentPopupAction=null,S})();const Ir=new Map;class Yu extends Is{constructor(b,w,N=!1){super(b,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,N),this.eventId=null}execute(){var b=()=>super.execute,w=this;return(0,O.Z)(function*(){let N=Ir.get(w.auth._key());if(!N){try{const Q=(yield function Ju(S,b){return Pn.apply(this,arguments)}(w.resolver,w.auth))?yield b().call(w):null;N=()=>Promise.resolve(Q)}catch($){N=()=>Promise.reject($)}Ir.set(w.auth._key(),N)}return w.bypassAuthState||Ir.set(w.auth._key(),()=>Promise.resolve(null)),N()})()}onAuthEvent(b){var w=()=>super.onAuthEvent,N=this;return(0,O.Z)(function*(){if("signInViaRedirect"===b.type)return w().call(N,b);if("unknown"!==b.type){if(b.eventId){const $=yield N.auth._redirectUserForId(b.eventId);if($)return N.user=$,w().call(N,b);N.resolve(null)}}else N.resolve(null)})()}onExecution(){return(0,O.Z)(function*(){})()}cleanUp(){}}function Pn(){return(Pn=(0,O.Z)(function*(S,b){const w=Xu(b),N=Qu(S);if(!(yield N._isAvailable()))return!1;const $="true"===(yield N._get(w));return yield N._remove(w),$})).apply(this,arguments)}function fr(S,b){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,O.Z)(function*(S,b){return Qu(S)._set(Xu(b),"true")})).apply(this,arguments)}function au(){Ir.clear()}function mh(S,b){Ir.set(S._key(),b)}function Qu(S){return Oe(S._redirectPersistence)}function Xu(S){return le("pendingRedirect",S.config.apiKey,S.name)}function bl(S,b,w){return function Js(S,b,w){return Pi.apply(this,arguments)}(S,b,w)}function Pi(){return(Pi=(0,O.Z)(function*(S,b,w){const N=mr(S);Te(S,b,Wo);const $=ou(N,w);return yield fr($,N),$._openRedirect(N,b,"signInViaRedirect")})).apply(this,arguments)}function M(S,b,w){return function k(S,b,w){return j.apply(this,arguments)}(S,b,w)}function j(){return(j=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S);Te(N.auth,b,Wo);const $=ou(N.auth,w);yield fr($,N.auth);const Q=yield vn(N);return $._openRedirect(N.auth,b,"reauthViaRedirect",Q)})).apply(this,arguments)}function ue(S,b,w){return function we(S,b,w){return ke.apply(this,arguments)}(S,b,w)}function ke(){return(ke=(0,O.Z)(function*(S,b,w){const N=(0,H.m9)(S);Te(N.auth,b,Wo);const $=ou(N.auth,w);yield Tc(!1,N,b.providerId),yield fr($,N.auth);const Q=yield vn(N);return $._openRedirect(N.auth,b,"linkViaRedirect",Q)})).apply(this,arguments)}function rt(S,b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(S,b){return yield mr(S)._initializationPromise,Ot(S,b,!1)})).apply(this,arguments)}function Ot(S,b){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,O.Z)(function*(S,b,w=!1){const N=mr(S),$=ou(N,b),Me=yield new Yu(N,$,w).execute();return Me&&!w&&(delete Me.user._redirectEventId,yield N._persistUserIfCurrent(Me.user),yield N._setRedirectUser(null,b)),Me})).apply(this,arguments)}function vn(S){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(S){const b=Mc(`${S.uid}:::`);return S._redirectEventId=b,yield S.auth._setRedirectUser(S),yield S.auth._persistUserIfCurrent(S),b})).apply(this,arguments)}class Wr{constructor(b){this.auth=b,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(b){this.consumers.add(b),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,b)&&(this.sendToConsumer(this.queuedRedirectEvent,b),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(b){this.consumers.delete(b)}onEvent(b){if(this.hasEventBeenHandled(b))return!1;let w=!1;return this.consumers.forEach(N=>{this.isEventForConsumer(b,N)&&(w=!0,this.sendToConsumer(b,N),this.saveEventToCache(b))}),this.hasHandledPotentialRedirect||!function Xs(S){switch(S.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(S);default:return!1}}(b)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=b,w=!0)),w}sendToConsumer(b,w){var N;if(b.error&&!As(b)){const $=(null===(N=b.error.code)||void 0===N?void 0:N.split("auth/")[1])||"internal-error";w.onError(me(this.auth,$))}else w.onAuthEvent(b)}isEventForConsumer(b,w){const N=null===w.eventId||!!b.eventId&&b.eventId===w.eventId;return w.filter.includes(b.type)&&N}hasEventBeenHandled(b){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ec(b))}saveEventToCache(b){this.cachedEventUids.add(ec(b)),this.lastProcessedEventTime=Date.now()}}function ec(S){return[S.type,S.eventId,S.sessionId,S.tenantId].filter(b=>b).join("-")}function As({type:S,error:b}){return"unknown"===S&&"auth/no-auth-event"===b?.code}function zr(S){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,O.Z)(function*(S,b={}){return tn(S,"GET","/v1/projects",b)})).apply(this,arguments)}const Ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tc=/^https?/;function dg(){return(dg=(0,O.Z)(function*(S){if(S.config.emulator)return;const{authorizedDomains:b}=yield zr(S);for(const w of b)try{if(t_(w))return}catch{}ie(S,"unauthorized-domain")})).apply(this,arguments)}function t_(S){const b=We(),{protocol:w,hostname:N}=new URL(b);if(S.startsWith("chrome-extension://")){const Me=new URL(S);return""===Me.hostname&&""===N?"chrome-extension:"===w&&S.replace("chrome-extension://","")===b.replace("chrome-extension://",""):"chrome-extension:"===w&&Me.hostname===N}if(!tc.test(w))return!1;if(Ar.test(S))return N===S;const $=S.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(N)}const ud=new Qt(3e4,6e4);function uu(){const S=dr().___jsl;if(S?.H)for(const b of Object.keys(S.H))if(S.H[b].r=S.H[b].r||[],S.H[b].L=S.H[b].L||[],S.H[b].r=[...S.H[b].L],S.CP)for(let w=0;w<S.CP.length;w++)S.CP[w]=null}let cd=null;function ld(S){return cd=cd||function _h(S){return new Promise((b,w)=>{var N,$,Q;function Me(){uu(),gapi.load("gapi.iframes",{callback:()=>{b(gapi.iframes.getContext())},ontimeout:()=>{uu(),w(me(S,"network-request-failed"))},timeout:ud.get()})}if(null!==($=null===(N=dr().gapi)||void 0===N?void 0:N.iframes)&&void 0!==$&&$.Iframe)b(gapi.iframes.getContext());else{if(null===(Q=dr().gapi)||void 0===Q||!Q.load){const et=xo("iframefcb");return dr()[et]=()=>{gapi.load?Me():w(me(S,"network-request-failed"))},Ia(`https://apis.google.com/js/api.js?onload=${et}`).catch(Nt=>w(Nt))}Me()}}).catch(b=>{throw cd=null,b})}(S),cd}const hg=new Qt(5e3,15e3),Nf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eo(S){const b=S.config;ve(b.authDomain,S,"auth-domain-config-required");const w=b.emulator?sn(b,"emulator/auth/iframe"):`https://${S.config.authDomain}/__/auth/iframe`,N={apiKey:b.apiKey,appName:S.name,v:U.SDK_VERSION},$=Fi.get(S.config.apiHost);$&&(N.eid=$);const Q=S._getFrameworks();return Q.length&&(N.fw=Q.join(",")),`${w}?${(0,H.xO)(N).slice(1)}`}function fg(){return fg=(0,O.Z)(function*(S){const b=yield ld(S),w=dr().gapi;return ve(w,S,"internal-error"),b.open({where:document.body,url:eo(S),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nf,dontclear:!0},N=>new Promise(function(){var $=(0,O.Z)(function*(Q,Me){yield N.restyle({setHideOnLeave:!1});const et=me(S,"network-request-failed"),Nt=dr().setTimeout(()=>{Me(et)},hg.get());function Ut(){dr().clearTimeout(Nt),Q(N)}N.ping(Ut).then(Ut,()=>{Me(et)})});return function(Q,Me){return $.apply(this,arguments)}}()))}),fg.apply(this,arguments)}const pg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uc{constructor(b){this.window=b,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hd(S,b,w,N,$,Q){ve(S.config.authDomain,S,"auth-domain-config-required"),ve(S.config.apiKey,S,"invalid-api-key");const Me={apiKey:S.config.apiKey,appName:S.name,authType:w,redirectUrl:N,v:U.SDK_VERSION,eventId:$};if(b instanceof Wo){b.setDefaultLanguage(S.languageCode),Me.providerId=b.providerId||"",(0,H.xb)(b.getCustomParameters())||(Me.customParameters=JSON.stringify(b.getCustomParameters()));for(const[Nt,Ut]of Object.entries(Q||{}))Me[Nt]=Ut}if(b instanceof qa){const Nt=b.getScopes().filter(Ut=>""!==Ut);Nt.length>0&&(Me.scopes=Nt.join(","))}S.tenantId&&(Me.tid=S.tenantId);const et=Me;for(const Nt of Object.keys(et))void 0===et[Nt]&&delete et[Nt];return`${function Ch({config:S}){return S.emulator?sn(S,"emulator/auth/handler"):`https://${S.authDomain}/__/auth/handler`}(S)}?${(0,H.xO)(et).slice(1)}`}const fd="webStorageSupport",cu=class fs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tu,this._completeRedirectFn=Ot,this._overrideRedirectResult=mh}_openPopup(b,w,N,$){var Q=this;return(0,O.Z)(function*(){var Me;Le(null===(Me=Q.eventManagers[b._key()])||void 0===Me?void 0:Me.manager,"_initialize() not called before _openPopup()");const et=hd(b,w,N,We(),$);return function ta(S,b,w,N=500,$=600){const Q=Math.max((window.screen.availHeight-$)/2,0).toString(),Me=Math.max((window.screen.availWidth-N)/2,0).toString();let et="";const Nt=Object.assign(Object.assign({},pg),{width:N.toString(),height:$.toString(),top:Q,left:Me}),Ut=(0,H.z$)().toLowerCase();w&&(et=Pe(Ut)?"_blank":w),z(Ut)&&(b=b||"http://localhost",Nt.scrollbars="yes");const fn=Object.entries(Nt).reduce((gi,[pr,Oa])=>`${gi}${pr}=${Oa},`,"");if(function Rr(S=(0,H.z$)()){var b;return yt(S)&&!(null===(b=window.navigator)||void 0===b||!b.standalone)}(Ut)&&"_self"!==et)return function gg(S,b){const w=document.createElement("a");w.href=S,w.target=b;const N=document.createEvent("MouseEvent");N.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(N)}(b||"",et),new Uc(null);const tr=window.open(b||"",et,fn);ve(tr,S,"popup-blocked");try{tr.focus()}catch{}return new Uc(tr)}(b,et,Mc())})()}_openRedirect(b,w,N,$){var Q=this;return(0,O.Z)(function*(){return yield Q._originValidation(b),function Da(S){dr().location.href=S}(hd(b,w,N,We(),$)),new Promise(()=>{})})()}_initialize(b){const w=b._key();if(this.eventManagers[w]){const{manager:$,promise:Q}=this.eventManagers[w];return $?Promise.resolve($):(Le(Q,"If manager is not set, promise should be"),Q)}const N=this.initAndGetManager(b);return this.eventManagers[w]={promise:N},N.catch(()=>{delete this.eventManagers[w]}),N}initAndGetManager(b){var w=this;return(0,O.Z)(function*(){const N=yield function dd(S){return fg.apply(this,arguments)}(b),$=new Wr(b);return N.register("authEvent",Q=>(ve(Q?.authEvent,b,"invalid-auth-event"),{status:$.onEvent(Q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[b._key()]={manager:$},w.iframes[b._key()]=N,$})()}_isIframeWebStorageSupported(b,w){this.iframes[b._key()].send(fd,{type:fd},$=>{var Q;const Me=null===(Q=$?.[0])||void 0===Q?void 0:Q[fd];void 0!==Me&&w(!!Me),ie(b,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(b){const w=b._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function my(S){return dg.apply(this,arguments)}(b)),this.originValidationPromises[w]}get _shouldInitProactively(){return Hr()||re()||yt()}};class to{constructor(b){this.factorId=b}_process(b,w,N){switch(w.type){case"enroll":return this._finalizeEnroll(b,w.credential,N);case"signin":return this._finalizeSignIn(b,w.credential);default:return xe("unexpected MultiFactorSessionType")}}}class mg extends to{constructor(b){super("phone"),this.credential=b}static _fromCredential(b){return new mg(b)}_finalizeEnroll(b,w,N){return function bn(S,b){return tn(S,"POST","/v2/accounts/mfaEnrollment:finalize",_n(S,b))}(b,{idToken:w,displayName:N,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(b,w){return function Pc(S,b){return tn(S,"POST","/v2/accounts/mfaSignIn:finalize",_n(S,b))}(b,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _y=(()=>{class S{constructor(){}static assertion(w){return mg._fromCredential(w)}}return S.FACTOR_ID="phone",S})();var pi="@firebase/auth";class El{constructor(b){this.auth=b,this.internalListeners=new Map}getUid(){var b;return this.assertAuthConfigured(),(null===(b=this.auth.currentUser)||void 0===b?void 0:b.uid)||null}getToken(b){var w=this;return(0,O.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(b)}:null})()}addAuthTokenListener(b){if(this.assertAuthConfigured(),this.internalListeners.has(b))return;const w=this.auth.onIdTokenChanged(N=>{b(N?.stsTokenManager.accessToken||null)});this.internalListeners.set(b,w),this.updateProactiveRefresh()}removeAuthTokenListener(b){this.assertAuthConfigured();const w=this.internalListeners.get(b);!w||(this.internalListeners.delete(b),w(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,H.Pz)("authIdTokenMaxAge"),function Ki(S){(0,U._registerComponent)(new d.wA("auth",(b,{options:w})=>{const N=b.getProvider("app").getImmediate(),$=b.getProvider("heartbeat"),{apiKey:Q,authDomain:Me}=N.options;return((et,Nt)=>{ve(Q&&!Q.includes(":"),"invalid-api-key",{appName:et.name}),ve(!Me?.includes(":"),"argument-error",{appName:et.name});const Ut={apiKey:Q,authDomain:Me,clientPlatform:S,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ha(S)},fn=new da(et,Nt,Ut);return function Ge(S,b){const w=b?.persistence||[],N=(Array.isArray(w)?w:[w]).map(Oe);b?.errorMap&&S._updateErrorMap(b.errorMap),S._initializeWithPersistence(N,b?.popupRedirectResolver)}(fn,w),fn})(N,$)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((b,w,N)=>{b.getProvider("auth-internal").initialize()})),(0,U._registerComponent)(new d.wA("auth-internal",b=>{const w=mr(b.getProvider("auth").getImmediate());return new El(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,U.registerVersion)(pi,"0.21.0",function Cl(S){switch(S){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(S)),(0,U.registerVersion)(pi,"0.21.0","esm2017")}("Browser")},2090:(pt,de,F)=>{"use strict";F.d(de,{$s:()=>ct,BH:()=>mt,G6:()=>Te,L:()=>K,LL:()=>Rn,Pz:()=>lt,Rd:()=>Le,Sg:()=>Qt,UG:()=>Ye,US:()=>d,ZB:()=>ee,ZR:()=>Mt,aH:()=>ot,b$:()=>X,eu:()=>ve,hl:()=>Ke,jU:()=>st,k$:()=>ir,m9:()=>ln,ne:()=>ns,pd:()=>pn,r3:()=>ws,ru:()=>Z,tV:()=>J,uI:()=>Ce,vZ:()=>$n,w1:()=>ie,xO:()=>ci,xb:()=>es,z$:()=>Qe,zI:()=>xe,zd:()=>zn});const ce=function(ge){const le=[];let ye=0;for(let oe=0;oe<ge.length;oe++){let z=ge.charCodeAt(oe);z<128?le[ye++]=z:z<2048?(le[ye++]=z>>6|192,le[ye++]=63&z|128):55296==(64512&z)&&oe+1<ge.length&&56320==(64512&ge.charCodeAt(oe+1))?(z=65536+((1023&z)<<10)+(1023&ge.charCodeAt(++oe)),le[ye++]=z>>18|240,le[ye++]=z>>12&63|128,le[ye++]=z>>6&63|128,le[ye++]=63&z|128):(le[ye++]=z>>12|224,le[ye++]=z>>6&63|128,le[ye++]=63&z|128)}return le},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,le){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ye=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,oe=[];for(let z=0;z<ge.length;z+=3){const re=ge[z],Pe=z+1<ge.length,be=Pe?ge[z+1]:0,Lt=z+2<ge.length,vt=Lt?ge[z+2]:0;let Gn=(15&be)<<2|vt>>6,Rr=63&vt;Lt||(Rr=64,Pe||(Gn=64)),oe.push(ye[re>>2],ye[(3&re)<<4|be>>4],ye[Gn],ye[Rr])}return oe.join("")},encodeString(ge,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(ge):this.encodeByteArray(ce(ge),le)},decodeString(ge,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(ge):function(ge){const le=[];let ye=0,oe=0;for(;ye<ge.length;){const z=ge[ye++];if(z<128)le[oe++]=String.fromCharCode(z);else if(z>191&&z<224){const re=ge[ye++];le[oe++]=String.fromCharCode((31&z)<<6|63&re)}else if(z>239&&z<365){const Lt=((7&z)<<18|(63&ge[ye++])<<12|(63&ge[ye++])<<6|63&ge[ye++])-65536;le[oe++]=String.fromCharCode(55296+(Lt>>10)),le[oe++]=String.fromCharCode(56320+(1023&Lt))}else{const re=ge[ye++],Pe=ge[ye++];le[oe++]=String.fromCharCode((15&z)<<12|(63&re)<<6|63&Pe)}}return le.join("")}(this.decodeStringToByteArray(ge,le))},decodeStringToByteArray(ge,le){this.init_();const ye=le?this.charToByteMapWebSafe_:this.charToByteMap_,oe=[];for(let z=0;z<ge.length;){const re=ye[ge.charAt(z++)],be=z<ge.length?ye[ge.charAt(z)]:0;++z;const vt=z<ge.length?ye[ge.charAt(z)]:64;++z;const yt=z<ge.length?ye[ge.charAt(z)]:64;if(++z,null==re||null==be||null==vt||null==yt)throw Error();oe.push(re<<2|be>>4),64!==vt&&(oe.push(be<<4&240|vt>>2),64!==yt&&oe.push(vt<<6&192|yt))}return oe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}},K=function(ge){return function(ge){const le=ce(ge);return d.encodeByteArray(le,!0)}(ge).replace(/\./g,"")},J=function(ge){try{return d.decodeString(ge,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function ee(ge,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return le}for(const ye in le)!le.hasOwnProperty(ye)||!pe(ye)||(ge[ye]=ee(ge[ye],le[ye]));return ge}function pe(ge){return"__proto__"!==ge}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function st(){return"object"==typeof self&&self.self===self}function Z(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function X(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ie(){const ge=Qe();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Te(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise((ge,le)=>{try{let ye=!0;const oe="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(oe);z.onsuccess=()=>{z.result.close(),ye||self.indexedDB.deleteDatabase(oe),ge(!0)},z.onupgradeneeded=()=>{ye=!1},z.onerror=()=>{var re;le((null===(re=z.error)||void 0===re?void 0:re.message)||"")}}catch(ye){le(ye)}})}function xe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}function Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ge=()=>{try{return Le().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const le=ge&&J(ge[1]);return le&&JSON.parse(le)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ot=()=>{var ge;return null===(ge=Ge())||void 0===ge?void 0:ge.config},lt=ge=>{var le;return null===(le=Ge())||void 0===le?void 0:le[`_${ge}`]};class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,ye)=>{this.resolve=le,this.reject=ye})}wrapCallback(le){return(ye,oe)=>{ye?this.reject(ye):this.resolve(oe),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(ye):le(ye,oe))}}}function Qt(ge,le){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const oe=le||"demo-project",z=ge.iat||0,re=ge.sub||ge.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${oe}`,aud:oe,iat:z,exp:z+3600,auth_time:z,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[K(JSON.stringify({alg:"none",type:"JWT"})),K(JSON.stringify(Pe)),""].join(".")}class Mt extends Error{constructor(le,ye,oe){super(ye),this.code=le,this.customData=oe,this.name="FirebaseError",Object.setPrototypeOf(this,Mt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rn.prototype.create)}}class Rn{constructor(le,ye,oe){this.service=le,this.serviceName=ye,this.errors=oe}create(le,...ye){const oe=ye[0]||{},z=`${this.service}/${le}`,re=this.errors[le],Pe=re?function ur(ge,le){return ge.replace(_n,(ye,oe)=>{const z=le[oe];return null!=z?String(z):`<${oe}?>`})}(re,oe):"Error";return new Mt(z,`${this.serviceName}: ${Pe} (${z}).`,oe)}}const _n=/\{\$([^}]+)}/g;function ws(ge,le){return Object.prototype.hasOwnProperty.call(ge,le)}function es(ge){for(const le in ge)if(Object.prototype.hasOwnProperty.call(ge,le))return!1;return!0}function $n(ge,le){if(ge===le)return!0;const ye=Object.keys(ge),oe=Object.keys(le);for(const z of ye){if(!oe.includes(z))return!1;const re=ge[z],Pe=le[z];if(jr(re)&&jr(Pe)){if(!$n(re,Pe))return!1}else if(re!==Pe)return!1}for(const z of oe)if(!ye.includes(z))return!1;return!0}function jr(ge){return null!==ge&&"object"==typeof ge}function ci(ge){const le=[];for(const[ye,oe]of Object.entries(ge))Array.isArray(oe)?oe.forEach(z=>{le.push(encodeURIComponent(ye)+"="+encodeURIComponent(z))}):le.push(encodeURIComponent(ye)+"="+encodeURIComponent(oe));return le.length?"&"+le.join("&"):""}function zn(ge){const le={};return ge.replace(/^\?/,"").split("&").forEach(oe=>{if(oe){const[z,re]=oe.split("=");le[decodeURIComponent(z)]=decodeURIComponent(re)}}),le}function pn(ge){const le=ge.indexOf("?");if(!le)return"";const ye=ge.indexOf("#",le);return ge.substring(le,ye>0?ye:void 0)}function ns(ge,le){const ye=new dn(ge,le);return ye.subscribe.bind(ye)}class dn{constructor(le,ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(()=>{le(this)}).catch(oe=>{this.error(oe)})}next(le){this.forEachObserver(ye=>{ye.next(le)})}error(le){this.forEachObserver(ye=>{ye.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,ye,oe){let z;if(void 0===le&&void 0===ye&&void 0===oe)throw new Error("Missing Observer.");z=function la(ge,le){if("object"!=typeof ge||null===ge)return!1;for(const ye of le)if(ye in ge&&"function"==typeof ge[ye])return!0;return!1}(le,["next","error","complete"])?le:{next:le,error:ye,complete:oe},void 0===z.next&&(z.next=Wn),void 0===z.error&&(z.error=Wn),void 0===z.complete&&(z.complete=Wn);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),re}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let ye=0;ye<this.observers.length;ye++)this.sendOne(ye,le)}sendOne(le,ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{ye(this.observers[le])}catch(oe){typeof console<"u"&&console.error&&console.error(oe)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wn(){}const ir=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ge=>{const le=16*Math.random()|0;return("x"===ge?le:3&le|8).toString(16)})};function ct(ge,le=1e3,ye=2){const oe=le*Math.pow(ye,ge),z=Math.round(.5*oe*(Math.random()-.5)*2);return Math.min(144e5,oe+z)}function ln(ge){return ge&&ge._delegate?ge._delegate:ge}},7355:(pt,de,F)=>{"use strict";var O={};F.r(O),F.d(O,{fixNegotiationNeeded:()=>iP,shimAddTrackRemoveTrack:()=>rP,shimAddTrackRemoveTrackWithNative:()=>nP,shimGetDisplayMedia:()=>KU,shimGetSendersWithDtmf:()=>Xk,shimGetStats:()=>eP,shimGetUserMedia:()=>Yk,shimMediaStream:()=>Jk,shimOnTrack:()=>Qk,shimPeerConnection:()=>EN,shimSenderReceiverGetStats:()=>tP});var H={};F.r(H),F.d(H,{shimGetDisplayMedia:()=>oP,shimGetUserMedia:()=>sP,shimPeerConnection:()=>CN,shimReplaceTrack:()=>aP});var U={};F.r(U),F.d(U,{shimAddTransceiver:()=>pP,shimCreateAnswer:()=>_P,shimCreateOffer:()=>mP,shimGetDisplayMedia:()=>QU,shimGetParameters:()=>gP,shimGetUserMedia:()=>uP,shimOnTrack:()=>cP,shimPeerConnection:()=>wN,shimRTCDataChannel:()=>fP,shimReceiverGetStats:()=>dP,shimRemoveStream:()=>hP,shimSenderGetStats:()=>lP});var ce={};F.r(ce),F.d(ce,{shimAudioContext:()=>SP,shimCallbacksAPI:()=>bP,shimConstraints:()=>CP,shimCreateOfferLegacy:()=>TP,shimGetUserMedia:()=>EP,shimLocalStreamsAPI:()=>vP,shimRTCIceServerUrls:()=>wP,shimRemoteStreamsAPI:()=>yP,shimTrackEventTransceiver:()=>DP});var fe={};F.r(fe),F.d(fe,{removeExtmapAllowMixed:()=>TN,shimAddIceCandidateNullOrEmpty:()=>ES,shimConnectionState:()=>DN,shimMaxMessageSize:()=>LD,shimRTCIceCandidate:()=>bS,shimSendThrowTypeError:()=>BD});var d=F(4650);let je=null;function K(){return je}class Y{}const ee=new d.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Qe(){return(0,d.LFG)(Ye)}()},providedIn:"platform"}),n})();const Ce=new d.OlP("Location Initialized");let Ye=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return K().getBaseHref(this._doc)}onPopState(t){const r=K().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=K().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){st()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){st()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Z(){return new Ye((0,d.LFG)(ee))}()},providedIn:"platform"}),n})();function st(){return!!window.history.pushState}function X(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function he(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ie(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Te)},providedIn:"root"}),n})();const Be=new d.OlP("appBaseHref");let Te=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return X(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ie(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,a){const h=this.prepareExternalUrl(s+ie(a));this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,a){const h=this.prepareExternalUrl(s+ie(a));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(Be,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ke=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=X(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,a){let h=this.prepareExternalUrl(s+ie(a));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,a){let h=this.prepareExternalUrl(s+ie(a));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(Be,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Oe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(he(Ie(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ie(r))}normalize(t){return n.stripTrailingSlash(function Le(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ie(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ie(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=ie,n.joinWithSlash=X,n.stripTrailingSlash=he,n.\u0275fac=function(t){return new(t||n)(d.LFG(me))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function xe(){return new ve((0,d.LFG)(me))}()},providedIn:"root"}),n})();function Ie(n){return n.replace(/\/index.html$/,"")}var Ge=(()=>((Ge=Ge||{})[Ge.Decimal=0]="Decimal",Ge[Ge.Percent=1]="Percent",Ge[Ge.Currency=2]="Currency",Ge[Ge.Scientific=3]="Scientific",Ge))(),He=(()=>((He=He||{})[He.Format=0]="Format",He[He.Standalone=1]="Standalone",He))(),ot=(()=>((ot=ot||{})[ot.Narrow=0]="Narrow",ot[ot.Abbreviated=1]="Abbreviated",ot[ot.Wide=2]="Wide",ot[ot.Short=3]="Short",ot))(),lt=(()=>((lt=lt||{})[lt.Short=0]="Short",lt[lt.Medium=1]="Medium",lt[lt.Long=2]="Long",lt[lt.Full=3]="Full",lt))(),mt=(()=>((mt=mt||{})[mt.Decimal=0]="Decimal",mt[mt.Group=1]="Group",mt[mt.List=2]="List",mt[mt.PercentSign=3]="PercentSign",mt[mt.PlusSign=4]="PlusSign",mt[mt.MinusSign=5]="MinusSign",mt[mt.Exponential=6]="Exponential",mt[mt.SuperscriptingExponent=7]="SuperscriptingExponent",mt[mt.PerMille=8]="PerMille",mt[mt.Infinity=9]="Infinity",mt[mt.NaN=10]="NaN",mt[mt.TimeSeparator=11]="TimeSeparator",mt[mt.CurrencyDecimal=12]="CurrencyDecimal",mt[mt.CurrencyGroup=13]="CurrencyGroup",mt))();function Mt(n,e,t){const r=(0,d.cg1)(n),a=pn([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return pn(a,t)}function Rn(n,e,t){const r=(0,d.cg1)(n),a=pn([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return pn(a,t)}function ur(n,e,t){const r=(0,d.cg1)(n),a=pn([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return pn(a,t)}function Mr(n,e){return pn((0,d.cg1)(n)[d.wAp.DateFormat],e)}function nr(n,e){return pn((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function qn(n,e){return pn((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function cr(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===mt.CurrencyDecimal)return t[d.wAp.NumberSymbols][mt.Decimal];if(e===mt.CurrencyGroup)return t[d.wAp.NumberSymbols][mt.Group]}return r}function jr(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function li(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const la=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Wn={},Ci=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Sn=(()=>((Sn=Sn||{})[Sn.Short=0]="Short",Sn[Sn.ShortGMT=1]="ShortGMT",Sn[Sn.Long=2]="Long",Sn[Sn.Extended=3]="Extended",Sn))(),qt=(()=>((qt=qt||{})[qt.FullYear=0]="FullYear",qt[qt.Month=1]="Month",qt[qt.Date=2]="Date",qt[qt.Hours=3]="Hours",qt[qt.Minutes=4]="Minutes",qt[qt.Seconds=5]="Seconds",qt[qt.FractionalSeconds=6]="FractionalSeconds",qt[qt.Day=7]="Day",qt))(),un=(()=>((un=un||{})[un.DayPeriods=0]="DayPeriods",un[un.Days=1]="Days",un[un.Months=2]="Months",un[un.Eras=3]="Eras",un))();function Hs(n,e,t,r){let s=function en(n){if(Gn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,a=1,h=1]=n.split("-").map(_=>+_);return rr(s,a-1,h)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(la))return function yt(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const h=Number(n[4]||0)-t,_=Number(n[5]||0)-r,E=Number(n[6]||0),D=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,h,_,E,D),e}(r)}const e=new Date(n);if(!Gn(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Yr(t,e)||e;let _,h=[];for(;e;){if(_=Ci.exec(e),!_){h.push(e);break}{h=h.concat(_.slice(1));const x=h.pop();if(!x)break;e=x}}let E=s.getTimezoneOffset();r&&(E=be(r,E),s=function vt(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function Lt(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(be(e,s)-s))}(s,r,!0));let D="";return h.forEach(x=>{const L=function Pe(n){if(re[n])return re[n];let e;switch(n){case"G":case"GG":case"GGG":e=ct(un.Eras,ot.Abbreviated);break;case"GGGG":e=ct(un.Eras,ot.Wide);break;case"GGGGG":e=ct(un.Eras,ot.Narrow);break;case"y":e=Xe(qt.FullYear,1,0,!1,!0);break;case"yy":e=Xe(qt.FullYear,2,0,!0,!0);break;case"yyy":e=Xe(qt.FullYear,3,0,!1,!0);break;case"yyyy":e=Xe(qt.FullYear,4,0,!1,!0);break;case"Y":e=z(1);break;case"YY":e=z(2,!0);break;case"YYY":e=z(3);break;case"YYYY":e=z(4);break;case"M":case"L":e=Xe(qt.Month,1,1);break;case"MM":case"LL":e=Xe(qt.Month,2,1);break;case"MMM":e=ct(un.Months,ot.Abbreviated);break;case"MMMM":e=ct(un.Months,ot.Wide);break;case"MMMMM":e=ct(un.Months,ot.Narrow);break;case"LLL":e=ct(un.Months,ot.Abbreviated,He.Standalone);break;case"LLLL":e=ct(un.Months,ot.Wide,He.Standalone);break;case"LLLLL":e=ct(un.Months,ot.Narrow,He.Standalone);break;case"w":e=oe(1);break;case"ww":e=oe(2);break;case"W":e=oe(1,!0);break;case"d":e=Xe(qt.Date,1);break;case"dd":e=Xe(qt.Date,2);break;case"c":case"cc":e=Xe(qt.Day,1);break;case"ccc":e=ct(un.Days,ot.Abbreviated,He.Standalone);break;case"cccc":e=ct(un.Days,ot.Wide,He.Standalone);break;case"ccccc":e=ct(un.Days,ot.Narrow,He.Standalone);break;case"cccccc":e=ct(un.Days,ot.Short,He.Standalone);break;case"E":case"EE":case"EEE":e=ct(un.Days,ot.Abbreviated);break;case"EEEE":e=ct(un.Days,ot.Wide);break;case"EEEEE":e=ct(un.Days,ot.Narrow);break;case"EEEEEE":e=ct(un.Days,ot.Short);break;case"a":case"aa":case"aaa":e=ct(un.DayPeriods,ot.Abbreviated);break;case"aaaa":e=ct(un.DayPeriods,ot.Wide);break;case"aaaaa":e=ct(un.DayPeriods,ot.Narrow);break;case"b":case"bb":case"bbb":e=ct(un.DayPeriods,ot.Abbreviated,He.Standalone,!0);break;case"bbbb":e=ct(un.DayPeriods,ot.Wide,He.Standalone,!0);break;case"bbbbb":e=ct(un.DayPeriods,ot.Narrow,He.Standalone,!0);break;case"B":case"BB":case"BBB":e=ct(un.DayPeriods,ot.Abbreviated,He.Format,!0);break;case"BBBB":e=ct(un.DayPeriods,ot.Wide,He.Format,!0);break;case"BBBBB":e=ct(un.DayPeriods,ot.Narrow,He.Format,!0);break;case"h":e=Xe(qt.Hours,1,-12);break;case"hh":e=Xe(qt.Hours,2,-12);break;case"H":e=Xe(qt.Hours,1);break;case"HH":e=Xe(qt.Hours,2);break;case"m":e=Xe(qt.Minutes,1);break;case"mm":e=Xe(qt.Minutes,2);break;case"s":e=Xe(qt.Seconds,1);break;case"ss":e=Xe(qt.Seconds,2);break;case"S":e=Xe(qt.FractionalSeconds,1);break;case"SS":e=Xe(qt.FractionalSeconds,2);break;case"SSS":e=Xe(qt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Kt(Sn.Short);break;case"ZZZZZ":e=Kt(Sn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Kt(Sn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Kt(Sn.Long);break;default:return null}return re[n]=e,e}(x);D+=L?L(s,t,E):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),D}function rr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Yr(n,e){const t=function sn(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(Wn[t]=Wn[t]||{},Wn[t][e])return Wn[t][e];let r="";switch(e){case"shortDate":r=Mr(n,lt.Short);break;case"mediumDate":r=Mr(n,lt.Medium);break;case"longDate":r=Mr(n,lt.Long);break;case"fullDate":r=Mr(n,lt.Full);break;case"shortTime":r=nr(n,lt.Short);break;case"mediumTime":r=nr(n,lt.Medium);break;case"longTime":r=nr(n,lt.Long);break;case"fullTime":r=nr(n,lt.Full);break;case"short":const s=Yr(n,"shortTime"),a=Yr(n,"shortDate");r=ir(qn(n,lt.Short),[s,a]);break;case"medium":const h=Yr(n,"mediumTime"),_=Yr(n,"mediumDate");r=ir(qn(n,lt.Medium),[h,_]);break;case"long":const E=Yr(n,"longTime"),D=Yr(n,"longDate");r=ir(qn(n,lt.Long),[E,D]);break;case"full":const x=Yr(n,"fullTime"),L=Yr(n,"fullDate");r=ir(qn(n,lt.Full),[x,L])}return r&&(Wn[t][e]=r),r}function ir(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Kn(n,e,t="-",r,s){let a="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,a=t));let h=String(n);for(;h.length<e;)h="0"+h;return r&&(h=h.slice(h.length-e)),a+h}function Xe(n,e,t=0,r=!1,s=!1){return function(a,h){let _=function Ze(n,e){switch(n){case qt.FullYear:return e.getFullYear();case qt.Month:return e.getMonth();case qt.Date:return e.getDate();case qt.Hours:return e.getHours();case qt.Minutes:return e.getMinutes();case qt.Seconds:return e.getSeconds();case qt.FractionalSeconds:return e.getMilliseconds();case qt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||_>-t)&&(_+=t),n===qt.Hours)0===_&&-12===t&&(_=12);else if(n===qt.FractionalSeconds)return function gn(n,e){return Kn(n,3).substring(0,e)}(_,e);const E=cr(h,mt.MinusSign);return Kn(_,e,E,r,s)}}function ct(n,e,t=He.Format,r=!1){return function(s,a){return function nn(n,e,t,r,s,a){switch(t){case un.Months:return ur(e,s,r)[n.getMonth()];case un.Days:return Rn(e,s,r)[n.getDay()];case un.DayPeriods:const h=n.getHours(),_=n.getMinutes();if(a){const D=function At(n){const e=(0,d.cg1)(n);return jr(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?li(r):[li(r[0]),li(r[1])])}(e),x=function ci(n,e,t){const r=(0,d.cg1)(n);jr(r);const a=pn([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return pn(a,t)||[]}(e,s,r),L=D.findIndex(W=>{if(Array.isArray(W)){const[se,_e]=W,Re=h>=se.hours&&_>=se.minutes,ze=h<_e.hours||h===_e.hours&&_<_e.minutes;if(se.hours<_e.hours){if(Re&&ze)return!0}else if(Re||ze)return!0}else if(W.hours===h&&W.minutes===_)return!0;return!1});if(-1!==L)return x[L]}return Mt(e,s,r)[h<12?0:1];case un.Eras:return function _n(n,e){return pn((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,a,n,e,t,r)}}function Kt(n){return function(e,t,r){const s=-1*r,a=cr(t,mt.MinusSign),h=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case Sn.Short:return(s>=0?"+":"")+Kn(h,2,a)+Kn(Math.abs(s%60),2,a);case Sn.ShortGMT:return"GMT"+(s>=0?"+":"")+Kn(h,1,a);case Sn.Long:return"GMT"+(s>=0?"+":"")+Kn(h,2,a)+":"+Kn(Math.abs(s%60),2,a);case Sn.Extended:return 0===r?"Z":(s>=0?"+":"")+Kn(h,2,a)+":"+Kn(Math.abs(s%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function ye(n){return rr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function oe(n,e=!1){return function(t,r){let s;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,h=t.getDate();s=1+Math.floor((h+a)/7)}else{const a=ye(t),h=function le(n){const e=rr(n,0,1).getDay();return rr(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),_=a.getTime()-h.getTime();s=1+Math.round(_/6048e5)}return Kn(s,n,cr(r,mt.MinusSign))}}function z(n,e=!1){return function(t,r){return Kn(ye(t).getFullYear(),n,cr(r,mt.MinusSign),e)}}const re={};function be(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Gn(n){return n instanceof Date&&!isNaN(n.valueOf())}const Rr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Jr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class wo{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,a,h)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new wo(s.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===a?void 0:a);else if(null!==a){const _=r.get(a);r.move(_,h),Ft(_,s)}});for(let s=0,a=r.length;s<a;s++){const _=r.get(s).context;_.index=s,_.count=a,_.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Ft(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ft(n,e){n.context.$implicit=e.item}let kr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class pa{constructor(){this.$implicit=null,this.ngIf=null}}function qs(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Xr=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:a,ngTemplateOutletInjector:h}=this;this._viewRef=r.createEmbeddedView(s,a,h?{injector:h}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),n})();let zo=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function Kl(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function Ho(n,e,t){return function ku(n,e,t,r,s,a,h=!1){let _="",E=!1;if(isFinite(n)){let D=function Mi(n){let r,s,a,h,_,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(s<0&&(s=a),s+=+e.slice(a+1),e=e.substring(0,a)):s<0&&(s=e.length),a=0;"0"===e.charAt(a);a++);if(a===(_=e.length))r=[0],s=1;else{for(_--;"0"===e.charAt(_);)_--;for(s-=a,r=[],h=0;a<=_;a++,h++)r[h]=Number(e.charAt(a))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);h&&(D=function _r(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(D));let x=e.minInt,L=e.minFrac,W=e.maxFrac;if(a){const St=a.match(Rr);if(null===St)throw new Error(`${a} is not a valid digit info`);const Vt=St[1],Tt=St[3],wt=St[5];null!=Vt&&(x=Jr(Vt)),null!=Tt&&(L=Jr(Tt)),null!=wt?W=Jr(wt):null!=Tt&&L>W&&(W=L)}!function Cr(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const a=Math.min(Math.max(e,s),t);let h=a+n.integerLen,_=r[h];if(h>0){r.splice(Math.max(n.integerLen,h));for(let L=h;L<r.length;L++)r[L]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,h=a+1),r[0]=0;for(let L=1;L<h;L++)r[L]=0}if(_>=5)if(h-1<0){for(let L=0;L>h;L--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[h-1]++;for(;s<Math.max(0,a);s++)r.push(0);let E=0!==a;const D=e+n.integerLen,x=r.reduceRight(function(L,W,se,_e){return _e[se]=(W+=L)<10?W:W-10,E&&(0===_e[se]&&se>=D?_e.pop():E=!1),W>=10?1:0},0);x&&(r.unshift(x),n.integerLen++)}(D,L,W);let se=D.digits,_e=D.integerLen;const Re=D.exponent;let ze=[];for(E=se.every(St=>!St);_e<x;_e++)se.unshift(0);for(;_e<0;_e++)se.unshift(0);_e>0?ze=se.splice(_e,se.length):(ze=se,se=[0]);const Ct=[];for(se.length>=e.lgSize&&Ct.unshift(se.splice(-e.lgSize,se.length).join(""));se.length>e.gSize;)Ct.unshift(se.splice(-e.gSize,se.length).join(""));se.length&&Ct.unshift(se.join("")),_=Ct.join(cr(t,r)),ze.length&&(_+=cr(t,s)+ze.join("")),Re&&(_+=cr(t,mt.Exponential)+"+"+Re)}else _=cr(t,mt.Infinity);return _=n<0&&!E?e.negPre+_+e.negSuf:e.posPre+_+e.posSuf,_}(n,function jn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],a=r[1],h=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],_=h[0],E=h[1]||"";t.posPre=_.substring(0,_.indexOf("#"));for(let x=0;x<E.length;x++){const L=E.charAt(x);"0"===L?t.minFrac=t.maxFrac=x+1:"#"===L?t.maxFrac=x+1:t.posSuf+=L}const D=_.split(",");if(t.gSize=D[1]?D[1].length:0,t.lgSize=D[2]||D[1]?(D[2]||D[1]).length:0,a){const x=s.length-t.posPre.length-t.posSuf.length,L=a.indexOf("#");t.negPre=a.substring(0,L).replace(/'/g,""),t.negSuf=a.slice(L+x).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ei(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,Ge.Percent),cr(e,mt.MinusSign)),e,mt.Group,mt.Decimal,t,!0).replace(new RegExp("%","g"),cr(e,mt.PercentSign))}(function za(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(a){throw function Dr(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"percent",type:n,pure:!0,standalone:!0}),n})();let Dc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Fu="browser";function Ne(n){return"server"===n}let Lu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Sc((0,d.LFG)(ee),window)}),n})();class Sc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const a=s.shadowRoot;if(a){const h=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(h)return h}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],s-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ka(this.window.history)||Ka(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ka(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gu extends Y{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class eu extends Gu{static makeCurrent(){!function J(n){je||(je=n)}(new eu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function dl(){return Io=Io||document.querySelector("base"),Io?Io.getAttribute("href"):null}();return null==t?null:function e_(n){Di=Di||document.createElement("a"),Di.setAttribute("href",n);const e=Di.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Io=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Qr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Di,Io=null;const tu=new d.OlP("TRANSITION_ID"),hl=[{provide:d.ip1,useFactory:function og(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=K(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<s.length;a++)r.remove(s[a])})}},deps:[tu,ee,d.zs3],multi:!0}];let ag=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const dr=new d.OlP("EventManagerPlugins");let Da=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let a=0;a<s.length;a++){const h=s[a];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dr),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class nu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=K().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let fl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),us=(()=>{class n extends fl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(a=>{const h=this._doc.createElement("style");h.textContent=a,s.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(pl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pl))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function pl(n){K().remove(n)}const Ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ao=/%COMP%/g;function Jo(n,e){return e.flat(100).map(t=>t.replace(Ao,n))}function qu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Oc=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new ls(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new _l(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case d.ifc.ShadowDom:return new ds(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Jo(r.id,r.styles);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Da),d.LFG(us),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ls{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ta[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(kc(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(kc(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const a=Ta[s];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Ta[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,s&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qu(r)):this.eventManager.addEventListener(e,t,qu(r))}}function kc(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class _l extends ls{constructor(e,t,r,s){super(e),this.component=r;const a=Jo(s+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function Rc(n){return"_ngcontent-%COMP%".replace(Ao,n)}(s+"-"+r.id),this.hostAttr=function ch(n){return"_nghost-%COMP%".replace(Ao,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ds extends ls{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Jo(s.id,s.styles);for(let h=0;h<a.length;h++){const _=document.createElement("style");_.textContent=a[h],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Wu=(()=>{class n extends nu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Pc=["alt","control","meta","shift"],lh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ys={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let nd=(()=>{class n extends nu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const a=n.parseEventName(r),h=n.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>K().onAndCancel(t,a.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const a=n._normalizeKey(r.pop());let h="",_=r.indexOf("code");if(_>-1&&(r.splice(_,1),h="code."),Pc.forEach(D=>{const x=r.indexOf(D);x>-1&&(r.splice(x,1),h+=D+".")}),h+=a,0!=r.length||0===a.length)return null;const E={};return E.domEventName=s,E.fullKey=h,E}static matchEventFullKeyCode(t,r){let s=lh[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(s=t.code,a="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Pc.forEach(h=>{h!==s&&(0,Ys[h])(t)&&(a+=h+".")}),a+=s,a===r)}static eventCallback(t,r,s){return a=>{n.matchEventFullKeyCode(a,t)&&s.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ug=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Fu},{provide:d.g9A,useValue:function si(){eu.makeCurrent()},multi:!0},{provide:ee,useFactory:function dh(){return(0,d.RDi)(document),document},deps:[]}]),Ur=new d.OlP(""),vl=[{provide:d.rWj,useClass:class Mc{addToWindow(e){d.dqk.getAngularTestability=(r,s=!0)=>{const a=e.findTestabilityInTree(r,s);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const s=d.dqk.getAllAngularTestabilities();let a=s.length,h=!1;const _=function(E){h=h||E,a--,0==a&&r(h)};s.forEach(function(E){E.whenStable(_)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?K().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],zi=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function rd(){return new d.qLn},deps:[]},{provide:dr,useClass:Wu,multi:!0,deps:[ee,d.R0b,d.Lbi]},{provide:dr,useClass:nd,multi:!0,deps:[ee]},{provide:Oc,useClass:Oc,deps:[Da,us,d.AFp]},{provide:d.FYo,useExisting:Oc},{provide:fl,useExisting:us},{provide:us,useClass:us,deps:[ee]},{provide:Da,useClass:Da,deps:[dr,d.R0b]},{provide:class Wi{},useClass:ag,deps:[]},[]];let xa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:tu,useExisting:d.AFp},hl]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ur,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...zi,...vl],imports:[Dc,d.hGG]}),n})(),id=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ee))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ku(){return new id((0,d.LFG)(ee))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Pn=F(8996),fr=F(9751);const{isArray:Vc}=Array,{getPrototypeOf:au,prototype:mh,keys:Qu}=Object;function Xu(n){if(1===n.length){const e=n[0];if(Vc(e))return{args:e,keys:null};if(function bl(n){return n&&"object"==typeof n&&au(n)===mh}(e)){const t=Qu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Js=F(8421),Pi=F(3269),M=F(5403),k=F(4004);const{isArray:j}=Array;function we(n){return(0,k.U)(e=>function ue(n,e){return j(e)?n(...e):n(e)}(n,e))}function ke(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let Rt=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Ot=(()=>{class n extends Rt{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Dt=new d.OlP("NgValueAccessor"),Qs={provide:Dt,useExisting:(0,d.Gpc)(()=>As),multi:!0},ec=new d.OlP("CompositionEventMode");let As=(()=>{class n extends Rt{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Wr(){const n=K()?K().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(ec,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([Qs]),d.qOj]}),n})();function zr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Ar=new d.OlP("NgValidators"),tc=new d.OlP("NgAsyncValidators"),my=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function uu(n){return zr(n.value)?{required:!0}:null}function cd(n){return zr(n.value)||my.test(n.value)?null:{email:!0}}function Mo(n){return null}function Nf(n){return null!=n}function Fi(n){return(0,d.QGY)(n)?(0,Pn.D)(n):n}function eo(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function dd(n,e){return e.map(t=>t(n))}function pg(n){return n.map(e=>function fg(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ra(n){return null!=n?function Mf(n){if(!n)return null;const e=n.filter(Nf);return 0==e.length?null:function(t){return eo(dd(t,e))}}(pg(n)):null}function yh(n){return null!=n?function vh(n){if(!n)return null;const e=n.filter(Nf);return 0==e.length?null:function(t){return function rt(...n){const e=(0,Pi.jO)(n),{args:t,keys:r}=Xu(n),s=new fr.y(a=>{const{length:h}=t;if(!h)return void a.complete();const _=new Array(h);let E=h,D=h;for(let x=0;x<h;x++){let L=!1;(0,Js.Xf)(t[x]).subscribe((0,M.x)(a,W=>{L||(L=!0,D--),_[x]=W},()=>E--,void 0,()=>{(!E||!L)&&(D||a.next(r?ke(r,_):_),a.complete())}))}});return e?s.pipe(we(e)):s}(dd(t,e).map(Fi)).pipe((0,k.U)(eo))}}(pg(n)):null}function Uc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bh(n){return n?Array.isArray(n)?n:[n]:[]}function Eh(n,e){return Array.isArray(n)?n.includes(e):n===e}function hd(n,e){const t=bh(e);return bh(n).forEach(s=>{Eh(t,s)||t.push(s)}),t}function Ch(n,e){return bh(e).filter(t=>!Eh(n,t))}class fd{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ra(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fs extends fd{get formDirective(){return null}get path(){return null}}class cu extends fd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class to{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pi=(()=>{class n extends to{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cu,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),lu=(()=>{class n extends to{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const fn="VALID",tr="INVALID",gi="PENDING",pr="DISABLED";function Oa(n){return(po(n)?n.validators:n)||null}function oi(n,e){return(po(e)?e.asyncValidators:n)||null}function po(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ic{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fn}get invalid(){return this.status===tr}get pending(){return this.status==gi}get disabled(){return this.status===pr}get enabled(){return this.status!==pr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hd(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hd(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ch(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ch(e,this._rawAsyncValidators))}hasValidator(e){return Eh(this._rawValidators,e)}hasAsyncValidator(e){return Eh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pr,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fn,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fn||this.status===gi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pr:fn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gi,this._hasOwnPendingAsyncValidator=!0;const t=Fi(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?pr:this.errors?tr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gi)?gi:this._anyControlsHaveStatus(tr)?tr:fn}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){po(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function du(n){return Array.isArray(n)?Ra(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ro(n){return Array.isArray(n)?yh(n):n||null}(this._rawAsyncValidators)}}class sc extends ic{constructor(e,t,r){super(Oa(t),oi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function pd(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function rc(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,a)=>{r=t(r,s,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const md=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>_g}),_g="always";function _d(n,e,t=_g){oc(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function yy(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&LE(n,e)})}(n,e),function Rf(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function FE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&LE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function vy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Sh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oc(n,e){const t=function ta(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Uc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function gg(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Uc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Sh(e._rawValidators,s),Sh(e._rawAsyncValidators,s)}function LE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const s_={provide:fs,useExisting:(0,d.Gpc)(()=>jc)},xh=(()=>Promise.resolve())();let jc=(()=>{class n extends fs{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new sc({},Ra(t),yh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xh.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),_d(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xh.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xh.then(()=>{const r=this._findContainer(t.path),s=new sc({});(function by(n,e){oc(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xh.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xh.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function gs(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ar,10),d.Y36(tc,10),d.Y36(md,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([s_]),d.qOj]}),n})();function yd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ff(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const yg=class extends ic{constructor(e=null,t,r){super(Oa(t),oi(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),po(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Ff(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Ff(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Cg={provide:cu,useExisting:(0,d.Gpc)(()=>hu)},Vf=(()=>Promise.resolve())();let hu=(()=>{class n extends cu{constructor(t,r,s,a,h,_){super(),this._changeDetectorRef=h,this.callSetDisabledState=_,this.control=new yg,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Of(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(a=>{a.constructor===As?t=a:function i_(n){return Object.getPrototypeOf(n.constructor)===Ot}(a)?r=a:s=a}),s||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ah(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_d(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Vf.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,d.D6c)(r);Vf.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Th(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fs,9),d.Y36(Ar,10),d.Y36(tc,10),d.Y36(Dt,10),d.Y36(d.sBO,8),d.Y36(md,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Cg]),d.qOj,d.TTD]}),n})(),wl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Ey={provide:Dt,useExisting:(0,d.Gpc)(()=>wg),multi:!0};let wg=(()=>{class n extends Ot{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([Ey]),d.qOj]}),n})(),wy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),bd=(()=>{class n{constructor(){this._validator=Mo}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Mo,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Fy={provide:Ar,useExisting:(0,d.Gpc)(()=>uc),multi:!0};let uc=(()=>{class n extends bd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>uu}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([Fy]),d.qOj]}),n})();const f_={provide:Ar,useExisting:(0,d.Gpc)(()=>jf),multi:!0};let jf=(()=>{class n extends bd{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=d.D6c,this.createValidator=t=>cd}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[d._Bn([f_]),d.qOj]}),n})(),Ig=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[wy]}),n})(),_T=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:md,useValue:t.callSetDisabledState??_g}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ig]}),n})();function Zt(...n){const e=(0,Pi.yG)(n);return(0,Pn.D)(n,e)}var Bi=F(7579);class Ns extends Bi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const qf=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ms=F(4671),Rh=F(9672);function Wf(...n){const e=(0,Pi.yG)(n),t=(0,Pi.jO)(n),{args:r,keys:s}=Xu(n);if(0===r.length)return(0,Pn.D)([],e);const a=new fr.y(function Ed(n,e,t=ms.y){return r=>{Oh(e,()=>{const{length:s}=n,a=new Array(s);let h=s,_=s;for(let E=0;E<s;E++)Oh(e,()=>{const D=(0,Pn.D)(n[E],e);let x=!1;D.subscribe((0,M.x)(r,L=>{a[E]=L,x||(x=!0,_--),_||r.next(t(a.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,s?h=>ke(s,h):ms.y));return t?a.pipe(we(t)):a}function Oh(n,e,t){n?(0,Rh.f)(t,n,e):e()}var pu=F(8189);function kh(...n){return function Tl(){return(0,pu.J)(1)}()((0,Pn.D)(n,(0,Pi.yG)(n)))}function Cd(n){return new fr.y(e=>{(0,Js.Xf)(n()).subscribe(e)})}var Sl=F(9635),Vi=F(576);function wn(n,e){const t=(0,Vi.m)(n)?n:()=>n,r=s=>s.error(t());return new fr.y(e?s=>e.schedule(r,0,s):r)}var lc=F(515),zf=F(727),Zi=F(4482);function Ph(){return(0,Zi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,M.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,a=t;t=null,s&&(!a||s===a)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wd extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,M.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zf.w0.EMPTY)}return e}refCount(){return Ph()(this)}}function Ui(n,e){return(0,Zi.e)((t,r)=>{let s=null,a=0,h=!1;const _=()=>h&&!s&&r.complete();t.subscribe((0,M.x)(r,E=>{s?.unsubscribe();let D=0;const x=a++;(0,Js.Xf)(n(E,x)).subscribe(s=(0,M.x)(r,L=>r.next(e?e(E,L,x,D++):L),()=>{s=null,_()}))},()=>{h=!0,_()}))})}function no(n){return n<=0?()=>lc.E:(0,Zi.e)((e,t)=>{let r=0;e.subscribe((0,M.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function gu(...n){const e=(0,Pi.yG)(n);return(0,Zi.e)((t,r)=>{(e?kh(n,t,e):kh(n,t)).subscribe(r)})}function mi(n,e){return(0,Zi.e)((t,r)=>{let s=0;t.subscribe((0,M.x)(r,a=>n.call(e,a,s++)&&r.next(a)))})}var Ms=F(5577);function mu(n){return(0,Zi.e)((e,t)=>{let r=!1;e.subscribe((0,M.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function xg(n=Vy){return(0,Zi.e)((e,t)=>{let r=!1;e.subscribe((0,M.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Vy(){return new qf}function $i(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mi((s,a)=>n(s,a,r)):ms.y,no(1),t?mu(e):xg(()=>new qf))}function Il(n,e){return(0,Vi.m)(e)?(0,Ms.z)(n,e,1):(0,Ms.z)(n,1)}var Si=F(8505);function Al(n){return(0,Zi.e)((e,t)=>{let a,r=null,s=!1;r=e.subscribe((0,M.x)(t,void 0,void 0,h=>{a=(0,Js.Xf)(n(h,Al(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Fh(n,e,t,r,s){return(a,h)=>{let _=t,E=e,D=0;a.subscribe((0,M.x)(h,x=>{const L=D++;E=_?n(E,x,L):(_=!0,x),r&&h.next(E)},s&&(()=>{_&&h.next(E),h.complete()})))}}function Gc(n,e){return(0,Zi.e)(Fh(n,e,arguments.length>=2,!0))}function __(n){return n<=0?()=>lc.E:(0,Zi.e)((e,t)=>{let r=[];e.subscribe((0,M.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Ng(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mi((s,a)=>n(s,a,r)):ms.y,__(1),t?mu(e):xg(()=>new qf))}function Bh(n){return(0,Zi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const In="primary",ro=Symbol("RouteTitle");class Dd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xl(n){return new Dd(n)}function v_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let a=0;a<r.length;a++){const h=r[a],_=n[a];if(h.startsWith(":"))s[h.substring(1)]=_;else if(h!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function go(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let a=0;a<t.length;a++)if(s=t[a],!y_(n[s],e[s]))return!1;return!0}function y_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,a)=>r[a]===s)}return n===e}function b_(n){return Array.prototype.concat.apply([],n)}function Uy(n){return n.length>0?n[n.length-1]:null}function Rs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Nl(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Pn.D)(Promise.resolve(n)):Zt(n)}const Rg=!1,Td={exact:function bT(n,e,t){if(!Sd(n.segments,e.segments)||!Kf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bT(n.children[r],e.children[r],t))return!1;return!0},subset:Hy},_u={exact:function jy(n,e){return go(n,e)},subset:function ET(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>y_(n[t],e[t]))},ignored:()=>!0};function $y(n,e,t){return Td[t.paths](n.root,e.root,t.matrixParams)&&_u[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Hy(n,e,t){return Og(n,e,e.segments,t)}function Og(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Sd(s,t)||e.hasChildren()||!Kf(s,t,r))}if(n.segments.length===t.length){if(!Sd(n.segments,t)||!Kf(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Hy(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Sd(n.segments,s)&&Kf(n.segments,s,r)&&n.children[In])&&Og(n.children[In],e,a,r)}}function Kf(n,e,t){return e.every((r,s)=>_u[t](n[s].parameters,r.parameters))}class Ml{constructor(e=new Bn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return ZE.serialize(this)}}class Bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Rs(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jf(this)}}class Vh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xl(this.parameters)),this._parameterMap}toString(){return w_(this)}}function Sd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Yf},providedIn:"root"}),n})();class Yf{parse(e){const t=new eC(e);return new Ml(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Uh(e.root,!0)}`,r=function Pg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Qf(t)}=${Qf(s)}`).join("&"):`${Qf(t)}=${Qf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function YE(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ZE=new Yf;function Jf(n){return n.segments.map(e=>w_(e)).join("/")}function Uh(n,e){if(!n.hasChildren())return Jf(n);if(e){const t=n.children[In]?Uh(n.children[In],!1):"",r=[];return Rs(n.children,(s,a)=>{a!==In&&r.push(`${a}:${Uh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ka(n,e){let t=[];return Rs(n.children,(r,s)=>{s===In&&(t=t.concat(e(r,s)))}),Rs(n.children,(r,s)=>{s!==In&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===In?[Uh(n.children[In],!1)]:[`${s}:${Uh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[In]?`${Jf(n)}/${t[0]}`:`${Jf(n)}/(${t.join("//")})`}}function E_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qf(n){return E_(n).replace(/%3B/gi,";")}function C_(n){return E_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kg(n){return decodeURIComponent(n)}function mn(n){return kg(n.replace(/\+/g,"%20"))}function w_(n){return`${C_(n.path)}${function JE(n){return Object.keys(n).map(e=>`;${C_(e)}=${C_(n[e])}`).join("")}(n.parameters)}`}const D_=/^[^\/()?;=#]+/;function vu(n){const e=n.match(D_);return e?e[0]:""}const Gy=/^[^=?&#]+/,qy=/^[^&#]+/;class eC{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[In]=new Bn(e,t)),r}parseSegment(){const e=vu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,Rg);return this.capture(e),new Vh(kg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=vu(this.remaining);s&&(r=s,this.capture(r))}e[kg(t)]=kg(r)}parseQueryParam(e){const t=function QE(n){const e=n.match(Gy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function XE(n){const e=n.match(qy);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const s=mn(t),a=mn(r);if(e.hasOwnProperty(s)){let h=e[s];Array.isArray(h)||(h=[h],e[s]=h),h.push(a)}else e[s]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vu(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new d.vHH(4010,Rg);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=In);const h=this.parseChildren();t[a]=1===Object.keys(h).length?h[In]:new Bn([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,Rg)}}function Wy(n){return n.segments.length>0?new Bn([],{[In]:n}):n}function Xf(n){const e={};for(const r of Object.keys(n.children)){const a=Xf(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function zy(n){if(1===n.numberOfChildren&&n.children[In]){const e=n.children[In];return new Bn(n.segments.concat(e.segments),e.children)}return n}(new Bn(n.segments,e))}function ra(n){return n instanceof Ml}function CT(n,e,t,r,s){if(0===t.length)return Id(e.root,e.root,e.root,r,s);const a=function S_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Zy(!0,0,n);let e=0,t=!1;const r=n.reduce((s,a,h)=>{if("object"==typeof a&&null!=a){if(a.outlets){const _={};return Rs(a.outlets,(E,D)=>{_[D]="string"==typeof E?E.split("/"):E}),[...s,{outlets:_}]}if(a.segmentPath)return[...s,a.segmentPath]}return"string"!=typeof a?[...s,a]:0===h?(a.split("/").forEach((_,E)=>{0==E&&"."===_||(0==E&&""===_?t=!0:".."===_?e++:""!=_&&s.push(_))}),s):[...s,a]},[]);return new Zy(t,e,r)}(t);return a.toRoot()?Id(e.root,e.root,new Bn([],{}),r,s):function h(E){const D=function $h(n,e,t,r){if(n.isAbsolute)return new Pa(e.root,!0,0);if(-1===r)return new Pa(t,t===e.root,0);return function Fa(n,e,t){let r=n,s=e,a=t;for(;a>s;){if(a-=s,r=r.parent,!r)throw new d.vHH(4005,!1);s=r.segments.length}return new Pa(r,!1,s-a)}(t,r+(Lg(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,E),x=D.processChildren?ep(D.segmentGroup,D.index,a.commands):Ug(D.segmentGroup,D.index,a.commands);return Id(e.root,D.segmentGroup,x,r,s)}(n.snapshot?._lastPathIndex)}function Lg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bg(n){return"object"==typeof n&&null!=n&&n.outlets}function Id(n,e,t,r,s){let h,a={};r&&Rs(r,(E,D)=>{a[D]=Array.isArray(E)?E.map(x=>`${x}`):`${E}`}),h=n===e?t:Vg(n,e,t);const _=Wy(Xf(h));return new Ml(_,a,s)}function Vg(n,e,t){const r={};return Rs(n.children,(s,a)=>{r[a]=s===e?t:Vg(s,e,t)}),new Bn(n.segments,r)}class Zy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Lg(r[0]))throw new d.vHH(4003,!1);const s=r.find(Bg);if(s&&s!==Uy(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ug(n,e,t){if(n||(n=new Bn([],{})),0===n.segments.length&&n.hasChildren())return ep(n,e,t);const r=function nC(n,e,t){let r=0,s=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return a;const h=n.segments[s],_=t[r];if(Bg(_))break;const E=`${_}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===E)break;if(E&&D&&"object"==typeof D&&void 0===D.outlets){if(!A_(E,D,h))return a;r+=2}else{if(!A_(E,{},h))return a;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Bn(n.segments.slice(0,r.pathIndex),{});return a.children[In]=new Bn(n.segments.slice(r.pathIndex),n.children),ep(a,0,s)}return r.match&&0===s.length?new Bn(n.segments,{}):r.match&&!n.hasChildren()?I_(n,e,t):r.match?ep(n,0,s):I_(n,e,t)}function ep(n,e,t){if(0===t.length)return new Bn(n.segments,{});{const r=function Yy(n){return Bg(n[0])?n[0].outlets:{[In]:n}}(t),s={};return Rs(r,(a,h)=>{"string"==typeof a&&(a=[a]),null!==a&&(s[h]=Ug(n.children[h],e,a))}),Rs(n.children,(a,h)=>{void 0===r[h]&&(s[h]=a)}),new Bn(n.segments,s)}}function I_(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const a=t[s];if(Bg(a)){const E=Jy(a.outlets);return new Bn(r,E)}if(0===s&&Lg(t[0])){r.push(new Vh(n.segments[e].path,$g(t[0]))),s++;continue}const h=Bg(a)?a.outlets[In]:`${a}`,_=s<t.length-1?t[s+1]:null;h&&_&&Lg(_)?(r.push(new Vh(h,$g(_))),s+=2):(r.push(new Vh(h,{})),s++)}return new Bn(r,{})}function Jy(n){const e={};return Rs(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=I_(new Bn([],{}),0,t))}),e}function $g(n){const e={};return Rs(n,(t,r)=>e[r]=`${t}`),e}function A_(n,e,t){return n==t.path&&go(e,t.parameters)}class qc{constructor(e,t){this.id=e,this.url=t}}class jg extends qc{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _i extends qc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jh extends qc{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class x_ extends qc{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tp extends qc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qy extends qc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rC extends qc{constructor(e,t,r,s,a){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hh extends qc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xy extends qc{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iC{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class N_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sC{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ad{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let qg=(()=>{class n{createUrlTree(t,r,s,a,h,_){return CT(t||r.root,s,a,h,_)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),M_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return qg.\u0275fac(e)},providedIn:"root"}),n})();class Wg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ia(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ia(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return zg(e,this._root).map(t=>t.value)}}function ia(n,e){if(n===e.value)return e;for(const t of e.children){const r=ia(n,t);if(r)return r}return null}function zg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zg(n,t);if(r.length)return r.unshift(e),r}return[]}class La{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class n0 extends Wg{constructor(e,t){super(e),this.snapshot=t,Zg(this,e)}toString(){return this.snapshot.toString()}}function R_(n,e){const t=function aC(n,e){const h=new Kg([],{},{},"",{},In,e,null,n.root,-1,{});return new Oo("",new La(h,[]))}(n,e),r=new Ns([new Vh("",{})]),s=new Ns({}),a=new Ns({}),h=new Ns({}),_=new Ns(""),E=new Rl(r,s,h,_,a,In,e,t.root);return E.snapshot=t.root,new n0(new La(E,[]),t)}class Rl{constructor(e,t,r,s,a,h,_,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=a,this.outlet=h,this.component=_,this.title=this.data?.pipe((0,k.U)(D=>D[ro]))??Zt(void 0),this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,k.U)(e=>xl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,k.U)(e=>xl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function O_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],a=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(a.component)break;r--}}return function uC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Kg{constructor(e,t,r,s,a,h,_,E,D,x,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=a,this.outlet=h,this.component=_,this.routeConfig=E,this._urlSegment=D,this._lastPathIndex=x,this._resolve=L}get title(){return this.data?.[ro]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Oo extends Wg{constructor(e,t){super(t),this.url=e,Zg(this,t)}toString(){return r0(this._root)}}function Zg(n,e){e.value._routerState=n,e.children.forEach(t=>Zg(n,t))}function r0(n){const e=n.children.length>0?` { ${n.children.map(r0).join(", ")} } `:"";return`${n.value}${e}`}function s0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,go(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),go(e.params,t.params)||n.params.next(t.params),function Mg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!go(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),go(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rp(n,e){const t=go(n.params,e.params)&&function KE(n,e){return Sd(n,e)&&n.every((t,r)=>go(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rp(n.parent,e.parent))}function xd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function cC(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return xd(n,r,s);return xd(n,r)})}(n,e,t);return new La(r,s)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const h=a.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(_=>xd(n,_)),h}}const r=function lC(n){return new Rl(new Ns(n.url),new Ns(n.params),new Ns(n.queryParams),new Ns(n.fragment),new Ns(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(a=>xd(n,a));return new La(r,s)}}const ip="ngNavigationCancelingError";function Yg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ra(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=a0(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function a0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ip]=!0,r.cancellationCode=e,t&&(r.url=t),r}function yu(n){return k_(n)&&ra(n.url)}function k_(n){return n&&n[ip]}class dC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Nd,this.attachRef=null}}let Nd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dC,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sp=!1;let P_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=In,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Nd),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,sp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,sp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,sp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,sp);this._activatedRoute=t;const s=this.location,h=t.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,E=new dc(t,_,s.injector);if(r&&function F_(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(h);this.activated=s.createComponent(D,s.length,E)}else this.activated=s.createComponent(h,{index:s.length,injector:E,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class dc{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rl?this.route:e===Nd?this.childContexts:this.parent.get(e,t)}}let L_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[P_],encapsulation:2}),n})();function Jg(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function up(n){const e=n.children&&n.children.map(up),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==In&&(t.component=L_),t}function mo(n){return n.outlet||In}function l0(n,e){const t=n.filter(r=>mo(r)===e);return t.push(...n.filter(r=>mo(r)!==e)),t}function hc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class d0{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),s0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Gh(t);e.children.forEach(a=>{const h=a.value.outlet;this.deactivateRoutes(a,s[h],r),delete s[h]}),Rs(s,(a,h)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const s=e.value,a=t?t.value:null;if(s===a)if(s.component){const h=r.getContext(s.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,a=Gh(e);for(const h of Object.keys(a))this.deactivateRouteAndItsChildren(a[h],s);if(r&&r.outlet){const h=r.outlet.detach(),_=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:_})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,a=Gh(e);for(const h of Object.keys(a))this.deactivateRouteAndItsChildren(a[h],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Gh(t);e.children.forEach(a=>{this.activateRoutes(a,s[a.value.outlet],r),this.forwardEvent(new Ad(a.value.snapshot))}),e.children.length&&this.forwardEvent(new sC(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,a=t?t.value:null;if(s0(s),s===a)if(s.component){const h=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const h=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const _=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(_.contexts),h.attachRef=_.componentRef,h.route=_.route.value,h.outlet&&h.outlet.attach(_.componentRef,_.route.value),s0(_.route.value),this.activateChildRoutes(e,null,h.children)}else{const _=hc(s.snapshot),E=_?.get(d._Vd)??null;h.attachRef=null,h.route=s,h.resolver=E,h.injector=_,h.outlet&&h.outlet.activateWith(s,h.injector),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class V_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cp{constructor(e,t){this.component=e,this.route=t}}function h0(n,e,t){const r=n._root;return Wc(r,e?e._root:null,t,[r.value])}function Os(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Wc(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const a=Gh(e);return n.children.forEach(h=>{(function Xg(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,h=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(h&&a.routeConfig===h.routeConfig){const E=function dp(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Sd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Sd(n.url,e.url)||!go(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rp(n,e)||!go(n.queryParams,e.queryParams);default:return!rp(n,e)}}(h,a,a.routeConfig.runGuardsAndResolvers);E?s.canActivateChecks.push(new V_(r)):(a.data=h.data,a._resolvedData=h._resolvedData),Wc(n,e,a.component?_?_.children:null:t,r,s),E&&_&&_.outlet&&_.outlet.isActivated&&s.canDeactivateChecks.push(new cp(_.outlet.component,h))}else h&&hp(e,_,s),s.canActivateChecks.push(new V_(r)),Wc(n,null,a.component?_?_.children:null:t,r,s)})(h,a[h.value.outlet],t,r.concat([h.value]),s),delete a[h.value.outlet]}),Rs(a,(h,_)=>hp(h,t.getContext(_),s)),s}function hp(n,e,t){const r=Gh(n),s=n.value;Rs(r,(a,h)=>{hp(a,s.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new cp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Md(n){return"function"==typeof n}function em(n){return n instanceof qf||"EmptyError"===n?.name}const tm=Symbol("INITIAL_VALUE");function Wh(){return Ui(n=>Wf(n.map(e=>e.pipe(no(1),gu(tm)))).pipe((0,k.U)(e=>{for(const t of e)if(!0!==t){if(t===tm)return tm;if(!1===t||t instanceof Ml)return t}return!0}),mi(e=>e!==tm),no(1)))}function _0(n){return(0,Sl.z)((0,Si.b)(e=>{if(ra(e))throw Yg(0,e)}),(0,k.U)(e=>!0===e))}const U_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function v0(n,e,t,r,s){const a=rm(n,e,t);return a.matched?function wC(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Zt(s.map(h=>{const _=Os(h,n);return Nl(function wT(n){return n&&Md(n.canMatch)}(_)?_.canMatch(e,t):n.runInContext(()=>_(e,t)))})).pipe(Wh(),_0()):Zt(!0)}(r=Jg(e,r),e,t).pipe((0,k.U)(h=>!0===h?a:{...U_})):Zt(a)}function rm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...U_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||v_)(t,n,e);if(!s)return{...U_};const a={};Rs(s.posParams,(_,E)=>{a[E]=_.path});const h=s.consumed.length>0?{...a,...s.consumed[s.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:h,positionalParamSegments:s.posParams??{}}}function gp(n,e,t,r){if(t.length>0&&function y0(n,e,t){return t.some(r=>fc(n,e,r)&&mo(r)!==In)}(n,t,r)){const a=new Bn(e,function TC(n,e,t,r){const s={};s[In]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&mo(a)!==In){const h=new Bn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[mo(a)]=h}return s}(n,e,r,new Bn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function Rd(n,e,t){return t.some(r=>fc(n,e,r))}(n,t,r)){const a=new Bn(n.segments,function DC(n,e,t,r,s){const a={};for(const h of r)if(fc(n,t,h)&&!s[mo(h)]){const _=new Bn([],{});_._sourceSegment=n,_._segmentIndexShift=e.length,a[mo(h)]=_}return{...s,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const s=new Bn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function fc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function SC(n,e,t,r){return!!(mo(n)===r||r!==In&&fc(e,t,n))&&("**"===n.path||rm(e,n,t).matched)}function Od(n,e,t){return 0===e.length&&!n.children[t]}const mp=!1;class _p{constructor(e){this.segmentGroup=e||null}}class vp{constructor(e){this.urlTree=e}}function zh(n){return wn(new _p(n))}function bu(n){return wn(new vp(n))}class im{constructor(e,t,r,s,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=a,this.allowRedirects=!0}apply(){const e=gp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,In).pipe((0,k.U)(a=>this.createUrlTree(Xf(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Al(a=>{if(a instanceof vp)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof _p?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,In).pipe((0,k.U)(s=>this.createUrlTree(Xf(s),e.queryParams,e.fragment))).pipe(Al(s=>{throw s instanceof _p?this.noMatchError(s):s}))}noMatchError(e){return new d.vHH(4002,mp)}createUrlTree(e,t,r){const s=Wy(e);return new Ml(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,k.U)(a=>new Bn([],a))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const a of Object.keys(r.children))"primary"===a?s.unshift(a):s.push(a);return(0,Pn.D)(s).pipe(Il(a=>{const h=r.children[a],_=l0(t,a);return this.expandSegmentGroup(e,_,h,a).pipe((0,k.U)(E=>({segment:E,outlet:a})))}),Gc((a,h)=>(a[h.outlet]=h.segment,a),{}),Ng())}expandSegment(e,t,r,s,a,h){return(0,Pn.D)(r).pipe(Il(_=>this.expandSegmentAgainstRoute(e,t,r,_,s,a,h).pipe(Al(D=>{if(D instanceof _p)return Zt(null);throw D}))),$i(_=>!!_),Al((_,E)=>{if(em(_))return Od(t,s,a)?Zt(new Bn([],{})):zh(t);throw _}))}expandSegmentAgainstRoute(e,t,r,s,a,h,_){return SC(s,t,a,h)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,a,h):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,a,h):zh(t):zh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,a,h){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,a,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bu(a):this.lineralizeSegments(r,a).pipe((0,Ms.z)(h=>{const _=new Bn(h,{});return this.expandSegment(e,_,t,h,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,a,h){const{matched:_,consumedSegments:E,remainingSegments:D,positionalParamSegments:x}=rm(t,s,a);if(!_)return zh(t);const L=this.applyRedirectCommands(E,s.redirectTo,x);return s.redirectTo.startsWith("/")?bu(L):this.lineralizeSegments(s,L).pipe((0,Ms.z)(W=>this.expandSegment(e,t,r,W.concat(D),h,!1)))}matchSegmentAgainstRoute(e,t,r,s,a){return"**"===r.path?(e=Jg(r,e),r.loadChildren?(r._loadedRoutes?Zt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,k.U)(_=>(r._loadedRoutes=_.routes,r._loadedInjector=_.injector,new Bn(s,{})))):Zt(new Bn(s,{}))):v0(t,r,s,e).pipe(Ui(({matched:h,consumedSegments:_,remainingSegments:E})=>h?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Ms.z)(x=>{const L=x.injector??e,W=x.routes,{segmentGroup:se,slicedSegments:_e}=gp(t,_,E,W),Re=new Bn(se.segments,se.children);if(0===_e.length&&Re.hasChildren())return this.expandChildren(L,W,Re).pipe((0,k.U)(Vt=>new Bn(_,Vt)));if(0===W.length&&0===_e.length)return Zt(new Bn(_,{}));const ze=mo(r)===a;return this.expandSegment(L,Re,W,_e,ze?In:a,!0).pipe((0,k.U)(St=>new Bn(_.concat(St.segments),St.children)))})):zh(t)))}getChildConfig(e,t,r){return t.children?Zt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Zt({routes:t._loadedRoutes,injector:t._loadedInjector}):function m0(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Zt(!0):Zt(s.map(h=>{const _=Os(h,n);return Nl(function gC(n){return n&&Md(n.canLoad)}(_)?_.canLoad(e,t):n.runInContext(()=>_(e,t)))})).pipe(Wh(),_0())}(e,t,r).pipe((0,Ms.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Si.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function io(n){return wn(a0(mp,3))}())):Zt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Zt(r);if(s.numberOfChildren>1||!s.children[In])return wn(new d.vHH(4e3,mp));s=s.children[In]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const a=this.createSegmentGroup(e,t.root,r,s);return new Ml(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Rs(e,(s,a)=>{if("string"==typeof s&&s.startsWith(":")){const _=s.substring(1);r[a]=t[_]}else r[a]=s}),r}createSegmentGroup(e,t,r,s){const a=this.createSegments(e,t.segments,r,s);let h={};return Rs(t.children,(_,E)=>{h[E]=this.createSegmentGroup(e,_,r,s)}),new Bn(a,h)}createSegments(e,t,r,s){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,s):this.findOrReturn(a,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new d.vHH(4001,mp);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Zh{}class Fd{constructor(e,t,r,s,a,h,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=h,this.urlSerializer=_}recognize(){const e=gp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,In).pipe((0,k.U)(t=>{if(null===t)return null;const r=new Kg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},In,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new La(r,t),a=new Oo(this.url,s);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=O_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Pn.D)(Object.keys(r.children)).pipe(Il(s=>{const a=r.children[s],h=l0(t,s);return this.processSegmentGroup(e,h,a,s)}),Gc((s,a)=>s&&a?(s.push(...a),s):null),function WE(n,e=!1){return(0,Zi.e)((t,r)=>{let s=0;t.subscribe((0,M.x)(r,a=>{const h=n(a,s++);(h||e)&&r.next(a),!h&&r.complete()}))})}(s=>null!==s),mu(null),Ng(),(0,k.U)(s=>{if(null===s)return null;const a=Ol(s);return function Ld(n){n.sort((e,t)=>e.value.outlet===In?-1:t.value.outlet===In?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,s,a){return(0,Pn.D)(t).pipe(Il(h=>this.processSegmentAgainstRoute(h._injector??e,h,r,s,a)),$i(h=>!!h),Al(h=>{if(em(h))return Od(r,s,a)?Zt([]):Zt(null);throw h}))}processSegmentAgainstRoute(e,t,r,s,a){if(t.redirectTo||!SC(t,r,s,a))return Zt(null);let h;if("**"===t.path){const _=s.length>0?Uy(s).parameters:{},E=j_(r)+s.length;h=Zt({snapshot:new Kg(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,H_(t),mo(t),t.component??t._loadedComponent??null,t,$_(r),E,G_(t)),consumedSegments:[],remainingSegments:[]})}else h=v0(r,t,s,e).pipe((0,k.U)(({matched:_,consumedSegments:E,remainingSegments:D,parameters:x})=>{if(!_)return null;const L=j_(r)+E.length;return{snapshot:new Kg(E,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,H_(t),mo(t),t.component??t._loadedComponent??null,t,$_(r),L,G_(t)),consumedSegments:E,remainingSegments:D}}));return h.pipe(Ui(_=>{if(null===_)return Zt(null);const{snapshot:E,consumedSegments:D,remainingSegments:x}=_;e=t._injector??e;const L=t._loadedInjector??e,W=function Yh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:se,slicedSegments:_e}=gp(r,D,x,W.filter(ze=>void 0===ze.redirectTo));if(0===_e.length&&se.hasChildren())return this.processChildren(L,W,se).pipe((0,k.U)(ze=>null===ze?null:[new La(E,ze)]));if(0===W.length&&0===_e.length)return Zt([new La(E,[])]);const Re=mo(t)===a;return this.processSegment(L,W,se,_e,Re?In:a).pipe((0,k.U)(ze=>null===ze?null:[new La(E,ze)]))}))}}function Bd(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ol(n){const e=[],t=new Set;for(const r of n){if(!Bd(r)){e.push(r);continue}const s=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Ol(r.children);e.push(new La(r.value,s))}return e.filter(r=>!t.has(r))}function $_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function j_(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function H_(n){return n.data||{}}function G_(n){return n.resolve||{}}function b0(n,e){return(0,Ms.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Zt(t);let a=0;return(0,Pn.D)(s).pipe(Il(h=>function E0(n,e,t,r){const s=n.routeConfig,a=n._resolve;return void 0!==s?.title&&!q_(s)&&(a[ro]=s.title),function C0(n,e,t,r){const s=function DT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return Zt({});const a={};return(0,Pn.D)(s).pipe((0,Ms.z)(h=>function TT(n,e,t,r){const s=hc(e)??r,a=Os(n,s);return Nl(a.resolve?a.resolve(e,t):s.runInContext(()=>a(e,t)))}(n[h],e,t,r).pipe($i(),(0,Si.b)(_=>{a[h]=_}))),__(1),function Lh(n){return(0,k.U)(()=>n)}(a),Al(h=>em(h)?lc.E:wn(h)))}(a,n,e,r).pipe((0,k.U)(h=>(n._resolvedData=h,n.data=O_(n,t).resolve,s&&q_(s)&&(n.data[ro]=s.title),null)))}(h.route,r,n,e)),(0,Si.b)(()=>a++),__(1),(0,Ms.z)(h=>a===s.length?Zt(t):lc.E))})}function q_(n){return"string"==typeof n.title||null===n.title}function om(n){return Ui(e=>{const t=n(e);return t?(0,Pn.D)(t).pipe((0,k.U)(()=>e)):Zt(e)})}const kl=new d.OlP("ROUTES");let W_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Zt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Nl(t.loadComponent()).pipe((0,k.U)(Ep),(0,Si.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Bh(()=>{this.componentLoaders.delete(t)})),s=new wd(r,()=>new Bi.x).pipe(Ph());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Zt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,k.U)(_=>{this.onLoadEndListener&&this.onLoadEndListener(r);let E,D,x=!1;Array.isArray(_)?D=_:(E=_.create(t).injector,D=b_(E.get(kl,[],d.XFs.Self|d.XFs.Optional)));return{routes:D.map(up),injector:E}}),Bh(()=>{this.childrenLoaders.delete(r)})),h=new wd(a,()=>new Bi.x).pipe(Ph());return this.childrenLoaders.set(r,h),h}loadModuleFactoryOrRoutes(t){return Nl(t()).pipe((0,k.U)(Ep),(0,Ms.z)(s=>s instanceof d.YKP||Array.isArray(s)?Zt(s):(0,Pn.D)(this.compiler.compileModuleAsync(s))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ep(n){return function bp(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let z_=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Bi.x,this.configLoader=(0,d.f3M)(W_),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Zf),this.rootContexts=(0,d.f3M)(Nd),this.navigationId=0,this.configLoader.onLoadEndListener=s=>this.events.next(new N_(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new iC(s))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ns({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mi(r=>0!==r.id),(0,k.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Ui(r=>{let s=!1,a=!1;return Zt(r).pipe((0,Si.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ui(h=>{const _=t.browserUrlTree.toString(),E=!t.navigated||h.extractedUrl.toString()!==_||_!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||E)&&t.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return sa(h.source)&&(t.browserUrlTree=h.extractedUrl),Zt(h).pipe(Ui(x=>{const L=this.transitions?.getValue();return this.events.next(new jg(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions?.getValue()?lc.E:Promise.resolve(x)}),function ko(n,e,t,r){return Ui(s=>function kd(n,e,t,r,s){return new im(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,k.U)(a=>({...s,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Si.b)(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},r.urlAfterRedirects=x.urlAfterRedirects}),function yp(n,e,t,r,s){return(0,Ms.z)(a=>function Eu(n,e,t,r,s,a,h="emptyOnly"){return new Fd(n,e,t,r,s,h,a).recognize().pipe(Ui(_=>null===_?function Pd(n){return new fr.y(e=>e.error(n))}(new Zh):Zt(_)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,s).pipe((0,k.U)(h=>({...a,targetSnapshot:h}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Si.b)(x=>{if(r.targetSnapshot=x.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!x.extras.skipLocationChange){const W=t.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);t.setBrowserUrl(W,x)}t.browserUrlTree=x.urlAfterRedirects}const L=new tp(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(L)}));if(E&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:L,extractedUrl:W,source:se,restoredState:_e,extras:Re}=h,ze=new jg(L,this.urlSerializer.serialize(W),se,_e);this.events.next(ze);const Ct=R_(W,t.rootComponentType).snapshot;return Zt(r={...h,targetSnapshot:Ct,urlAfterRedirects:W,extras:{...Re,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=h.rawUrl,h.resolve(null),lc.E}),(0,Si.b)(h=>{const _=new Qy(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),(0,k.U)(h=>r={...h,guards:h0(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function yC(n,e){return(0,Ms.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:a,canDeactivateChecks:h}}=t;return 0===h.length&&0===a.length?Zt({...t,guardsResult:!0}):function bC(n,e,t,r){return(0,Pn.D)(n).pipe((0,Ms.z)(s=>function CC(n,e,t,r,s){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Zt(a.map(_=>{const E=hc(e)??s,D=Os(_,E);return Nl(function mC(n){return n&&Md(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):E.runInContext(()=>D(n,e,t,r))).pipe($i())})).pipe(Wh()):Zt(!0)}(s.component,s.route,t,e,r)),$i(s=>!0!==s,!0))}(h,r,s,n).pipe((0,Ms.z)(_=>_&&function f0(n){return"boolean"==typeof n}(_)?function fp(n,e,t,r){return(0,Pn.D)(e).pipe(Il(s=>kh(function g0(n,e){return null!==n&&e&&e(new e0(n)),Zt(!0)}(s.route.parent,r),function pp(n,e){return null!==n&&e&&e(new Hg(n)),Zt(!0)}(s.route,r),function EC(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(h=>function lp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Cd(()=>Zt(h.guards.map(E=>{const D=hc(h.node)??t,x=Os(E,D);return Nl(function qh(n){return n&&Md(n.canActivateChild)}(x)?x.canActivateChild(r,n):D.runInContext(()=>x(r,n))).pipe($i())})).pipe(Wh())));return Zt(a).pipe(Wh())}(n,s.path,t),function nm(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Zt(!0);const s=r.map(a=>Cd(()=>{const h=hc(e)??t,_=Os(a,h);return Nl(function p0(n){return n&&Md(n.canActivate)}(_)?_.canActivate(e,n):h.runInContext(()=>_(e,n))).pipe($i())}));return Zt(s).pipe(Wh())}(n,s.route,t))),$i(s=>!0!==s,!0))}(r,a,n,e):Zt(_)),(0,k.U)(_=>({...t,guardsResult:_})))})}(this.environmentInjector,h=>this.events.next(h)),(0,Si.b)(h=>{if(r.guardsResult=h.guardsResult,ra(h.guardsResult))throw Yg(0,h.guardsResult);const _=new rC(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(_)}),mi(h=>!!h.guardsResult||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",3,t),!1)),om(h=>{if(h.guards.canActivateChecks.length)return Zt(h).pipe((0,Si.b)(_=>{const E=new Hh(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}),Ui(_=>{let E=!1;return Zt(_).pipe(b0(t.paramsInheritanceStrategy,this.environmentInjector),(0,Si.b)({next:()=>E=!0,complete:()=>{E||(t.restoreHistory(_),this.cancelNavigationTransition(_,"",2,t))}}))}),(0,Si.b)(_=>{const E=new Xy(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}))}),om(h=>{const _=E=>{const D=[];E.routeConfig?.loadComponent&&!E.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(E.routeConfig).pipe((0,Si.b)(x=>{E.component=x}),(0,k.U)(()=>{})));for(const x of E.children)D.push(..._(x));return D};return Wf(_(h.targetSnapshot.root)).pipe(mu(),no(1))}),om(()=>t.afterPreactivation()),(0,k.U)(h=>{const _=function o0(n,e,t){const r=xd(n,e._root,t?t._root:void 0);return new n0(r,e)}(t.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return r={...h,targetRouterState:_}}),(0,Si.b)(h=>{t.currentUrlTree=h.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),t.routerState=h.targetRouterState,"deferred"===t.urlUpdateStrategy&&(h.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,h),t.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,k.U)(r=>(new d0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,h=>this.events.next(h)),(0,Si.b)({next:h=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new _i(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{s=!0}}),Bh(()=>{s||a||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Al(h=>{if(a=!0,k_(h)){yu(h)||(t.navigated=!0,t.restoreHistory(r,!0));const _=new jh(r.id,this.urlSerializer.serialize(r.extractedUrl),h.message,h.cancellationCode);if(this.events.next(_),yu(h)){const E=t.urlHandlingStrategy.merge(h.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||sa(r.source)};t.scheduleNavigation(E,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const _=new x_(r.id,this.urlSerializer.serialize(r.extractedUrl),h,r.targetSnapshot??void 0);this.events.next(_);try{r.resolve(t.errorHandler(h))}catch(E){r.reject(E)}}return lc.E}))}))}cancelNavigationTransition(t,r,s,a){const h=new jh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(h),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sa(n){return"imperative"!==n}let Qh=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(a=>a.outlet===In);return r}getResolvedTitleForRoute(t){return t.data[ro]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(w0)},providedIn:"root"}),n})(),w0=(()=>{class n extends Qh{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(id))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Z_)},providedIn:"root"}),n})();class K_{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Z_=(()=>{class n extends K_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xh=new d.OlP("",{providedIn:"root",factory:()=>({})});let S0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(ef)},providedIn:"root"}),n})(),ef=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I0(n){throw n}function A0(n,e,t){return e.parse("/")}const Pl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Xh,{optional:!0})||{},this.errorHandler=this.options.errorHandler||I0,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||A0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Zt(void 0),this.urlHandlingStrategy=(0,d.f3M)(S0),this.routeReuseStrategy=(0,d.f3M)(D0),this.urlCreationStrategy=(0,d.f3M)(M_),this.titleStrategy=(0,d.f3M)(Qh),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=b_((0,d.f3M)(kl,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(z_),this.urlSerializer=(0,d.f3M)(Zf),this.location=(0,d.f3M)(ve),this.rootComponentType=null,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ml,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=R_(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(t.state){const _={...t.state};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(s.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,a,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(up),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:a,fragment:h,queryParamsHandling:_,preserveFragment:E}=r,D=E?this.currentUrlTree.fragment:h;let x=null;switch(_){case"merge":x={...this.currentUrlTree.queryParams,...a};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,x,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ra(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function J_(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...Pl}:!1===r?{...AC}:r,ra(t))return $y(this.currentUrlTree,t,s);const a=this.parseUrl(t);return $y(this.currentUrlTree,a,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const a=t[s];return null!=a&&(r[s]=a),r},{})}scheduleNavigation(t,r,s,a,h){if(this.disposed)return Promise.resolve(!1);let _,E,D,x;return h?(_=h.resolve,E=h.reject,D=h.promise):D=new Promise((L,W)=>{_=L,E=W}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),x=s&&s.\u0275routerPageId?s.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.navigationTransitions.handleNavigationRequest({targetPageId:x,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:_,reject:E,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",a):this.location.go(s,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zc=(()=>{class n{constructor(t,r,s,a,h,_){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=a,this.el=h,this.locationStrategy=_,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Bi.x;const E=h.nativeElement.tagName;this.isAnchorElement="A"===E||"AREA"===E,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof _i&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,a,h){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||a||h||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,a=this.el.nativeElement;null!==r?s.setAttribute(a,t,r):s.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_s),d.Y36(Rl),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(me))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class Cp{}let M0=(()=>{class n{constructor(t,r,s,a,h){this.router=t,this.injector=s,this.preloadingStrategy=a,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(mi(t=>t instanceof _i),Il(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const h=a._injector??t,_=a._loadedInjector??h;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?s.push(this.preloadConfig(h,a)):(a.children||a._loadedRoutes)&&s.push(this.processRoutes(_,a.children??a._loadedRoutes))}return(0,Pn.D)(s).pipe((0,pu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Zt(null);const a=s.pipe((0,Ms.z)(h=>null===h?Zt(void 0):(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,this.processRoutes(h.injector??t,h.routes))));if(r.loadComponent&&!r._loadedComponent){const h=this.loader.loadComponent(r);return(0,Pn.D)([a,h]).pipe((0,pu.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_s),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Cp),d.LFG(W_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lm=new d.OlP("");let Q_=(()=>{class n{constructor(t,r,s,a,h={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=a,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _i&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Gg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function tf(n,e){return{\u0275kind:n,\u0275providers:e}}function tv(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(_s),s=n.get(wp);1===n.get(O0)&&r.initialNavigation(),n.get(nv,null,d.XFs.Optional)?.setUpPreloading(),n.get(lm,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const wp=new d.OlP("",{factory:()=>new Bi.x}),O0=new d.OlP("",{providedIn:"root",factory:()=>1});const nv=new d.OlP("");function RC(n){return tf(0,[{provide:nv,useExisting:M0},{provide:Cp,useExisting:n}])}const rv=new d.OlP("ROUTER_FORROOT_GUARD"),P0=[ve,{provide:Zf,useClass:Yf},_s,Nd,{provide:Rl,useFactory:function Kc(n){return n.routerState.root},deps:[_s]},W_,[]];function kC(){return new d.PXZ("Router",_s)}let iv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[P0,[],{provide:kl,multi:!0,useValue:t},{provide:rv,useFactory:ST,deps:[[_s,new d.FiY,new d.tp0]]},{provide:Xh,useValue:r||{}},r?.useHash?{provide:me,useClass:Ke}:{provide:me,useClass:Te},{provide:lm,useFactory:()=>{const n=(0,d.f3M)(Lu),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Xh),r=(0,d.f3M)(z_),s=(0,d.f3M)(Zf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Q_(s,r,n,e,t)}},r?.preloadingStrategy?RC(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:kC},r?.initialNavigation?L0(r):[],[{provide:FC,useFactory:tv},{provide:d.tb,multi:!0,useExisting:FC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(rv,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[L_]}),n})();function ST(n){return"guarded"}function L0(n){return["disabled"===n.initialNavigation?tf(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(_s);return()=>{e.setUpLocationChangeListener()}}},{provide:O0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?tf(2,[{provide:O0,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Ce,Promise.resolve());return()=>t.then(()=>new Promise(s=>{const a=e.get(_s),h=e.get(wp);(function r(s){e.get(_s).events.pipe(mi(h=>h instanceof _i||h instanceof jh||h instanceof x_),(0,k.U)(h=>h instanceof _i||h instanceof jh&&(0===h.code||1===h.code)&&null),mi(h=>null!==h),no(1)).subscribe(()=>{s()})})(()=>{s(!0)}),a.afterPreactivation=()=>(s(!0),h.closed?Zt(void 0):h),a.initialNavigation()}))}}]).\u0275providers:[]]}const FC=new d.OlP("");var qe=F(5861),Jc=F(259),Ii=F(9681),Hd=F(4859),Mn=F(2090),ks=F(1877);const Ba=new Map,Va={activated:!1,tokenObservers:[]},LC={initialized:!1,enabled:!1};function vi(n){return Ba.get(n)||Object.assign({},Va)}function dm(){return LC}const hm="https://content-firebaseappcheck.googleapis.com/v1";class VC{constructor(e,t,r,s,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=s,s>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,qe.Z)(function*(){t.stop();try{t.pending=new Mn.BH,yield function UC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Mn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ys=new Mn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fm(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function av(n){if(!vi(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function pm(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),s=Math.floor((e-3600*t*24-3600*r)/60),a=e-3600*t*24-3600*r-60*s;let h="";return t&&(h+=Dp(t)+"d:"),r&&(h+=Dp(r)+"h:"),h+=Dp(s)+"m:"+Dp(a)+"s",h}function Dp(n){return 0===n?"00":n>=10?n.toString():"0"+n}function rf(n,e){return gm.apply(this,arguments)}function gm(){return(gm=(0,qe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const L=yield s.getHeartbeatsHeader();L&&(r["X-Firebase-Client"]=L)}const a={method:"POST",body:JSON.stringify(e),headers:r};let h,_;try{h=yield fetch(n,a)}catch(L){throw ys.create("fetch-network-error",{originalErrorMessage:L?.message})}if(200!==h.status)throw ys.create("fetch-status-error",{httpStatus:h.status});try{_=yield h.json()}catch(L){throw ys.create("fetch-parse-error",{originalErrorMessage:L?.message})}const E=_.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const D=1e3*Number(E[1]),x=Date.now();return{token:_.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function $C(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${hm}/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const Tp="firebase-app-check-store",uv="debug-token";let mm=null;function jC(){return mm||(mm=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ys.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Tp,{keyPath:"compositeKey"})}}catch(t){e(ys.create("storage-open",{originalErrorMessage:t?.message}))}}),mm)}function HC(n){return K0(dv(n))}function GC(n){return z0(uv,n)}function W0(){return K0(uv)}function z0(n,e){return cv.apply(this,arguments)}function cv(){return(cv=(0,qe.Z)(function*(n,e){const r=(yield jC()).transaction(Tp,"readwrite"),a=r.objectStore(Tp).put({compositeKey:n,value:e});return new Promise((h,_)=>{a.onsuccess=E=>{h()},r.onerror=E=>{var D;_(ys.create("storage-set",{originalErrorMessage:null===(D=E.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}function K0(n){return lv.apply(this,arguments)}function lv(){return(lv=(0,qe.Z)(function*(n){const t=(yield jC()).transaction(Tp,"readonly"),s=t.objectStore(Tp).get(n);return new Promise((a,h)=>{s.onsuccess=_=>{const E=_.target.result;a(E?E.value:void 0)},t.onerror=_=>{var E;h(ys.create("storage-get",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}function dv(n){return`${n.options.appId}-${n.name}`}const Sp=new ks.Yd("@firebase/app-check");function hv(){return(hv=(0,qe.Z)(function*(n){if((0,Mn.hl)()){let e;try{e=yield HC(n)}catch(t){Sp.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}})).apply(this,arguments)}function Y0(n,e){return(0,Mn.hl)()?function _m(n,e){return z0(dv(n),e)}(n,e).catch(t=>{Sp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fv(){return(fv=(0,qe.Z)(function*(){let n;try{n=yield W0()}catch{}if(n)return n;{const e=(0,Mn.k$)();return GC(e).catch(t=>Sp.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}})).apply(this,arguments)}function WC(){return dm().enabled}function vm(){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,qe.Z)(function*(){const n=dm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const KC={error:"UNKNOWN_ERROR"};function J0(n){return Mn.US.encodeString(JSON.stringify(n),!1)}function Ap(n){return sf.apply(this,arguments)}function sf(){return(sf=(0,qe.Z)(function*(n,e=!1){const t=n.app;av(t);const r=vi(t);let a,s=r.token;if(s&&!f(s)&&(r.token=void 0,s=void 0),!s){const E=yield r.cachedTokenPromise;E&&(f(E)?s=E:yield Y0(t,void 0))}if(!e&&s&&f(s))return{token:s.token};let _,h=!1;if(WC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rf($C(t,yield vm()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const E=yield r.exchangeTokenPromise;return yield Y0(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),s=yield vi(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Sp.warn(E.message):Sp.error(E),a=E}return s?a?_=f(s)?{token:s.token,internalError:a}:v(a):(_={token:s.token},r.token=s,yield Y0(t,s)):_=v(a),h&&c(t,_),_})).apply(this,arguments)}function ym(n,e,t,r){const{app:s}=n,a=vi(s);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&f(a.token)){const _=a.token;Promise.resolve().then(()=>{t({token:_.token}),p(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>p(n))}function xp(n,e){const t=vi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function p(n){const{app:e}=n,t=vi(e);let r=t.tokenRefresher;r||(r=function i(n){const{app:e}=n;return new VC((0,qe.Z)(function*(){let r;if(r=vi(e).token?yield Ap(n,!0):yield Ap(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function c(n,e){const t=vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function f(n){return n.expireTimeMillis-Date.now()>0}function v(n){return{token:J0(KC),error:n}}class C{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vi(this.app);for(const t of e)xp(this.app,t.next);return Promise.resolve()}}function Se(n,e){const t=new Mn.BH;vi(n).reCAPTCHAState={initialized:t};const s=function Bt(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),a=fm(!1);return a?it(n,e,a,s,t):function Un(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.onload=n,document.head.appendChild(e)}(()=>{const h=fm(!1);if(!h)throw new Error("no recaptcha");it(n,e,h,s,t)}),t.promise}function it(n,e,t,r,s){t.ready(()=>{(function jt(n,e,t,r){const s=t.render(r,{sitekey:e,size:"invisible"}),a=vi(n);a.reCAPTCHAState=Object.assign(Object.assign({},a.reCAPTCHAState),{widgetId:s})})(n,e,t,r),s.resolve(t)})}function kt(){return(kt=(0,qe.Z)(function*(n){av(n);const t=yield vi(n).reCAPTCHAState.initialized.promise;return new Promise((r,s)=>{const a=vi(n).reCAPTCHAState;t.ready(()=>{r(t.execute(a.widgetId,{action:"fire_app_check"}))})})})).apply(this,arguments)}class _o{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,qe.Z)(function*(){var t,r;!function Wt(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw ys.create("throttled",{time:pm(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const s=yield function bt(n){return kt.apply(this,arguments)}(e._app).catch(h=>{throw ys.create("recaptcha-error")});let a;try{a=yield rf(function j0(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${hm}/projects/${t}/apps/${r}:exchangeRecaptchaV3Token?key=${s}`,body:{recaptcha_v3_token:e}}}(e._app,s),e._heartbeatServiceProvider)}catch(h){throw null!==(t=h.code)&&void 0!==t&&t.includes("fetch-status-error")?(e._throttleData=function wu(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=(0,Mn.$s)(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(r=h.customData)||void 0===r?void 0:r.httpStatus),e._throttleData),ys.create("throttled",{time:pm(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):h}return e._throttleData=null,a})()}initialize(e){this._app=e,this._heartbeatServiceProvider=(0,Ii._getProvider)(e,"heartbeat"),Se(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof _o&&this._siteKey===e._siteKey}}function Zr(n=(0,Ii.getApp)(),e){n=(0,Mn.m9)(n);const t=(0,Ii._getProvider)(n,"app-check");if(dm().initialized||function zC(){const n=(0,Mn.Rd)(),e=dm();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new Mn.BH;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function qC(){return fv.apply(this,arguments)}())}(),WC()&&vm().then(s=>console.log(`App Check debug token: ${s}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return s;throw ys.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function gr(n,e,t){const r=function sv(n,e){return Ba.set(n,e),Ba.get(n)}(n,Object.assign({},Va));r.activated=!0,r.provider=e,r.cachedTokenPromise=function Z0(n){return hv.apply(this,arguments)}(n).then(s=>(s&&f(s)&&(r.token=s,c(n,{token:s.token})),s)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),vi(n).isTokenAutoRefreshEnabled&&ym(r,"INTERNAL",()=>{}),r}function gc(){return(gc=(0,qe.Z)(function*(n,e){const t=yield Ap(n,e);if(t.error)throw t.error;return{token:t.token}})).apply(this,arguments)}const Ua="app-check-internal";!function ZC(){(0,Ii._registerComponent)(new Hd.wA("app-check",n=>function I(n,e){return new C(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ua).initialize()})),(0,Ii._registerComponent)(new Hd.wA(Ua,n=>function P(n){return{getToken:e=>Ap(n,e),addTokenListener:e=>ym(n,"INTERNAL",e),removeTokenListener:e=>xp(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ii.registerVersion)("@firebase/app-check","0.6.0")}();var nI=F(552);const Np_firebase={apiKey:"AIzaSyCIHKjcCgDNcTKRhujdEcOsODVjsURkgF8",authDomain:"webrtc-720e4.firebaseapp.com",projectId:"webrtc-720e4",storageBucket:"webrtc-720e4.appspot.com",messagingSenderId:"837219898574",appId:"1:837219898574:web:318a8d9ff02d67dabf2c9f",measurementId:"G-6TXG2ZM2S6"};var Q0=F(4986),Ps=F(2122);function X0(){return(0,Zi.e)((n,e)=>{let t,r=!1;n.subscribe((0,M.x)(e,s=>{const a=t;t=s,r&&e.next([a,s]),r=!0}))})}function eb(n,e=ms.y){return n=n??pv,(0,Zi.e)((t,r)=>{let s,a=!0;t.subscribe((0,M.x)(r,h=>{const _=e(h);(a||!n(s,_))&&(a=!1,s=_,r.next(h))}))})}function pv(n,e){return n===e}var Jt,oa=F(2011),rI=(F(9568),F(3942)),iI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fl={},tb=tb||{},Tn=iI||self;function gv(){}function nb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var IT="closure_uid_"+(1e9*Math.random()>>>0),yM=0;function bM(n,e,t){return n.call.apply(n.bind,arguments)}function EM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function aa(n,e,t){return(aa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bM:EM).apply(null,arguments)}function _v(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bs(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,a){for(var h=Array(arguments.length-2),_=2;_<arguments.length;_++)h[_-2]=arguments[_];return e.prototype[s].apply(r,h)}}function uf(){this.s=this.s,this.o=this.o}uf.prototype.s=!1,uf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function vM(n){Object.prototype.hasOwnProperty.call(n,IT)&&n[IT]||(n[IT]=++yM)}(this)},uf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Mp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AT(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(nb(r)){const s=n.length||0,a=r.length||0;n.length=s+a;for(let h=0;h<a;h++)n[s+h]=r[h]}else n.push(r)}}function Lo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Lo.prototype.h=function(){this.defaultPrevented=!0};var oI=function(){if(!Tn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tn.addEventListener("test",gv,e),Tn.removeEventListener("test",gv,e)}catch{}return n}();function rb(n){return/^[\s\xa0]*$/.test(n)}var xT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ib(n,e){return n<e?-1:n>e?1:0}function sb(){var n=Tn.navigator;return n&&(n=n.userAgent)?n:""}function Ll(n){return-1!=sb().indexOf(n)}function Rp(n){return Rp[" "](n),n}Rp[" "]=gv;var ab,n,NT=Ll("Opera"),bm=Ll("Trident")||Ll("MSIE"),JC=Ll("Edge"),QC=JC||bm,XC=Ll("Gecko")&&!(-1!=sb().toLowerCase().indexOf("webkit")&&!Ll("Edge"))&&!(Ll("Trident")||Ll("MSIE"))&&!Ll("Edge"),uI=-1!=sb().toLowerCase().indexOf("webkit")&&!Ll("Edge");function ob(){var n=Tn.document;return n?n.documentMode:void 0}e:{var ub="",cb=(n=sb(),XC?/rv:([^\);]+)(\)|;)/.exec(n):JC?/Edge\/([\d\.]+)/.exec(n):bm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uI?/WebKit\/(\S+)/.exec(n):NT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cb&&(ub=cb?cb[1]:""),bm){var ew=ob();if(null!=ew&&ew>parseFloat(ub)){ab=String(ew);break e}}ab=ub}var cI={};var RT=Tn.document&&bm&&(ob()||parseInt(ab,10))||void 0;function yv(n,e){if(Lo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(XC){e:{try{Rp(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yv.X.h.call(this)}}bs(yv,Lo);var dI={2:"touch",3:"pen",4:"mouse"};yv.prototype.h=function(){yv.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bv="closure_listenable_"+(1e6*Math.random()|0),hI=0;function fI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++hI,this.ba=this.ea=!1}function lb(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function tw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function OT(n){const e={};for(const t in n)e[t]=n[t];return e}const nw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rw(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let a=0;a<nw.length;a++)t=nw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ev(n){this.src=n,this.g={},this.h=0}function iw(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],s=YC(r,e);(a=0<=s)&&Array.prototype.splice.call(r,s,1),a&&(lb(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Cv(n,e,t,r){for(var s=0;s<n.length;++s){var a=n[s];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return s}return-1}Ev.prototype.add=function(n,e,t,r,s){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var h=Cv(n,e,r,s);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new fI(e,this.src,a,!!r,s)).ea=t,n.push(e)),e};var db="closure_lm_"+(1e6*Math.random()|0),sw={};function kT(n,e,t,r,s){if(r&&r.once)return aw(n,e,t,r,s);if(Array.isArray(e)){for(var a=0;a<e.length;a++)kT(n,e[a],t,r,s);return null}return t=cf(t),n&&n[bv]?n.N(e,t,mv(r)?!!r.capture:!!r,s):hb(n,e,t,!1,r,s)}function hb(n,e,t,r,s,a){if(!e)throw Error("Invalid event type");var h=mv(s)?!!s.capture:!!s,_=lw(n);if(_||(n[db]=_=new Ev(n)),(t=_.add(e,t,r,h,a)).proxy)return t;if(r=function ow(){const e=cw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)oI||(s=h),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(PT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function aw(n,e,t,r,s){if(Array.isArray(e)){for(var a=0;a<e.length;a++)aw(n,e[a],t,r,s);return null}return t=cf(t),n&&n[bv]?n.O(e,t,mv(r)?!!r.capture:!!r,s):hb(n,e,t,!0,r,s)}function fb(n,e,t,r,s){if(Array.isArray(e))for(var a=0;a<e.length;a++)fb(n,e[a],t,r,s);else r=mv(r)?!!r.capture:!!r,t=cf(t),n&&n[bv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Cv(a=n.g[e],t,r,s))&&(lb(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=lw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Cv(e,t,r,s)),(t=-1<n?e[n]:null)&&uw(t))}function uw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[bv])iw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(PT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lw(e))?(iw(t,n),0==t.h&&(t.src=null,e[db]=null)):lb(n)}}}function PT(n){return n in sw?sw[n]:sw[n]="on"+n}function cw(n,e){if(n.ba)n=!0;else{e=new yv(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&uw(n),n=t.call(r,e)}return n}function lw(n){return(n=n[db])instanceof Ev?n:null}var pb="__closure_events_fn_"+(1e9*Math.random()>>>0);function cf(n){return"function"==typeof n?n:(n[pb]||(n[pb]=function(e){return n.handleEvent(e)}),n[pb])}function Fs(){uf.call(this),this.i=new Ev(this),this.P=this,this.I=null}function vo(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Lo(e,n);else if(e instanceof Lo)e.target=e.target||n;else{var s=e;rw(e=new Lo(r,n),s)}if(s=!0,t)for(var a=t.length-1;0<=a;a--){var h=e.g=t[a];s=dw(h,r,!0,e)&&s}if(s=dw(h=e.g=n,r,!0,e)&&s,s=dw(h,r,!1,e)&&s,t)for(a=0;a<t.length;a++)s=dw(h=e.g=t[a],r,!1,e)&&s}function dw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,a=0;a<e.length;++a){var h=e[a];if(h&&!h.ba&&h.capture==t){var _=h.listener,E=h.ha||h.src;h.ea&&iw(n.i,h),s=!1!==_.call(E,r)&&s}}return s&&!r.defaultPrevented}bs(Fs,uf),Fs.prototype[bv]=!0,Fs.prototype.removeEventListener=function(n,e,t,r){fb(this,n,e,t,r)},Fs.prototype.M=function(){if(Fs.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)lb(t[r]);delete n.g[e],n.h--}}this.I=null},Fs.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var gb=Tn.JSON.stringify;function hw(){var n=fw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vb,mb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gI,n=>n.reset());class gI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function FT(n){Tn.setTimeout(()=>{throw n},0)}function _b(n,e){vb||function LT(){var n=Tn.Promise.resolve(void 0);vb=function(){n.then(mI)}}(),yb||(vb(),yb=!0),fw.add(n,e)}var yb=!1,fw=new class pI{constructor(){this.h=this.g=null}add(e,t){const r=mb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mI(){for(var n;n=hw();){try{n.h.call(n.g)}catch(t){FT(t)}var e=mb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yb=!1}function bb(n,e){Fs.call(this),this.h=n||1,this.g=e||Tn,this.j=aa(this.lb,this),this.l=Date.now()}function pw(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function gw(n,e,t){if("function"==typeof n)t&&(n=aa(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=aa(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tn.setTimeout(n,e||0)}function mw(n){n.g=gw(()=>{n.g=null,n.i&&(n.i=!1,mw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bs(bb,Fs),(Jt=bb.prototype).ca=!1,Jt.R=null,Jt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vo(this,"tick"),this.ca&&(pw(this),this.start()))}},Jt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jt.M=function(){bb.X.M.call(this),pw(this),delete this.g};class CM extends uf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mw(this)}M(){super.M(),this.g&&(Tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Em(n){uf.call(this),this.h=n,this.g={}}bs(Em,uf);var BT=[];function VT(n,e,t,r){Array.isArray(t)||(t&&(BT[0]=t.toString()),t=BT);for(var s=0;s<t.length;s++){var a=kT(e,t[s],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function _I(n){tw(n.g,function(e,t){this.g.hasOwnProperty(t)&&uw(e)},n),n.g={}}function Eb(){this.g=!0}function Op(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $T(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var h=1;h<s.length;h++)s[h]=""}}}return gb(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Em.prototype.M=function(){Em.X.M.call(this),_I(this)},Em.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Eb.prototype.Aa=function(){this.g=!1},Eb.prototype.info=function(){};var kp={},jT=null;function Cb(){return jT=jT||new Fs}function HT(n){Lo.call(this,kp.Pa,n)}function wv(n){const e=Cb();vo(e,new HT(e))}function GT(n,e){Lo.call(this,kp.STAT_EVENT,n),this.stat=e}function Ls(n){const e=Cb();vo(e,new GT(e,n))}function _w(n,e){Lo.call(this,kp.Qa,n),this.size=e}function Cm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tn.setTimeout(function(){n()},e)}kp.Pa="serverreachability",bs(HT,Lo),kp.STAT_EVENT="statevent",bs(GT,Lo),kp.Qa="timingevent",bs(_w,Lo);var Dv={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wb(){}function qT(){}wb.prototype.h=null;var Ew,Db={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Tb(){Lo.call(this,"d")}function bw(){Lo.call(this,"c")}function Sb(){}function Tv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Em(this),this.O=bI,this.T=new bb(n=QC?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new wm}function wm(){this.i=null,this.g="",this.h=!1}bs(Tb,Lo),bs(bw,Lo),bs(Sb,wb),Sb.prototype.g=function(){return new XMLHttpRequest},Sb.prototype.i=function(){return{}},Ew=new Sb;var bI=45e3,Sv={},Du={};function Cw(n,e,t){n.K=1,n.v=Mb(Qc(e)),n.s=t,n.P=!0,Ib(n,null)}function Ib(n,e){n.F=Date.now(),Iv(n),n.A=Qc(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Bo(t.i,"t",r),n.C=0,t=n.l.H,n.h=new wm,n.g=LI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new CM(aa(n.La,n,n.g),n.N)),VT(n.S,n.g,"readystatechange",n.ib),e=n.H?OT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),wv(),function vI(n,e,t,r,s,a){n.info(function(){if(n.g)if(a)for(var h="",_=a.split("&"),E=0;E<_.length;E++){var D=_[E].split("=");if(1<D.length){var x=D[0];D=D[1];var L=x.split("_");h=2<=L.length&&"type"==L[1]?h+(x+"=")+D+"&":h+(x+"=redacted&")}}else h=null;else h=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Dm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function WT(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=EI(n,t),s==Du){4==e&&(n.o=4,Ls(14),r=!1),Op(n.j,n.m,null,"[Incomplete Response]");break}if(s==Sv){n.o=4,Ls(15),Op(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Op(n.j,n.m,s,null),Ab(n,s)}Dm(n)&&s!=Du&&s!=Sv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ls(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),o1(e),e.K=!0,Ls(11))):(Op(n.j,n.m,t,"[Invalid Chunked Response]"),Fp(n),xv(n))}function EI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Du:(t=Number(e.substring(t,r)),isNaN(t)?Sv:(r+=1)+t>e.length?Du:(e=e.substr(r,t),n.C=r+t,e))}function Iv(n){n.V=Date.now()+n.O,Av(n,n.O)}function Av(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cm(aa(n.gb,n),e)}function Pp(n){n.B&&(Tn.clearTimeout(n.B),n.B=null)}function xv(n){0==n.l.G||n.I||OI(n.l,n)}function Fp(n){Pp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pw(n.T),_I(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ab(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Bp(t.h,n)))if(!n.J&&Bp(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Hw(t),Lb(t)}$w(t),Ls(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Cm(aa(t.cb,t),6e3));if(1>=Nw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else km(t,11)}else if((n.J||t.g==n)&&Hw(t),!rb(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const x=D[3];null!=x&&(t.ma=x,t.j.info("VER="+t.ma));const L=D[4];null!=L&&(t.Ca=L,t.j.info("SVER="+t.Ca));const W=D[5];null!=W&&"number"==typeof W&&0<W&&(t.J=r=1.5*W,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const se=n.g;if(se){const _e=se.g?se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_e){var a=r.h;a.g||-1==_e.indexOf("spdy")&&-1==_e.indexOf("quic")&&-1==_e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Mw(a,a.h),a.h=null))}if(r.D){const Re=se.g?se.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.za=Re,yi(r.F,r.D,Re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((r=t).sa=FI(r,r.H?r.ka:null,r.V),h.J){Rb(r.h,h);var _=h,E=r.J;E&&_.setTimeout(E),_.B&&(Pp(_),Iv(_)),r.g=h}else s1(r);0<t.i.length&&Bb(t)}else"stop"!=D[0]&&"close"!=D[0]||km(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?km(t,7):Lw(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}wv()}catch{}}function Dw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(nb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ww(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(nb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function zT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(nb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,a=0;a<s;a++)e.call(void 0,r[a],t&&t[a],n)}(Jt=Tv.prototype).setTimeout=function(n){this.O=n},Jt.ib=function(n){n=n.target;const e=this.L;e&&3==qd(n)?e.l():this.La(n)},Jt.La=function(n){try{if(n==this.g)e:{const x=qd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>x)&&(3!=x||QC||this.g&&(this.h.h||this.g.fa()||Ow(this.g)))){this.I||4!=x||7==e||wv(),Pp(this);var t=this.g.aa();this.Y=t;t:if(Dm(this)){var r=Ow(this.g);n="";var s=r.length,a=4==qd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fp(this),xv(this);var h="";break t}this.h.i=new Tn.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function yI(n,e,t,r,s,a,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+a+" "+h})}(this.j,this.u,this.A,this.m,this.U,x,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var _,E=this.g;if((_=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rb(_)){var D=_;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ls(12),Fp(this),xv(this);break e}Op(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ab(this,t)}this.P?(WT(this,x,h),QC&&this.i&&3==x&&(VT(this.S,this.T,"tick",this.hb),this.T.start())):(Op(this.j,this.m,h,null),Ab(this,h)),4==x&&Fp(this),this.i&&!this.I&&(4==x?OI(this.l,this):(this.i=!1,Iv(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Ls(12)):(this.o=0,Ls(13)),Fp(this),xv(this)}}}catch{}},Jt.hb=function(){if(this.g){var n=qd(this.g),e=this.g.fa();this.C<e.length&&(Pp(this),WT(this,n,e),this.i&&4!=n&&Iv(this))}},Jt.cancel=function(){this.I=!0,Fp(this)},Jt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function UT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(wv(),Ls(17)),Fp(this),this.o=2,xv(this)):Av(this,this.V-n)};var xb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lf(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lf){this.h=void 0!==e?e:n.h,Tm(this,n.j),this.s=n.s,this.g=n.g,Nb(this,n.m),this.l=n.l,e=n.i;var t=new Im;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),KT(this,t),this.o=n.o}else n&&(t=String(n).match(xb))?(this.h=!!e,Tm(this,t[1]||"",!0),this.s=Sm(t[2]||""),this.g=Sm(t[3]||"",!0),Nb(this,t[4]),this.l=Sm(t[5]||"",!0),KT(this,t[6]||"",!0),this.o=Sm(t[7]||"")):(this.h=!!e,this.i=new Im(null,this.h))}function Qc(n){return new lf(n)}function Tm(n,e,t){n.j=t?Sm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Nb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function KT(n,e,t){e instanceof Im?(n.i=e,function wI(n,e){e&&!n.j&&(df(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Iw(this,r),Bo(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Lp(e,CI)),n.i=new Im(e,n.h))}function yi(n,e,t){n.i.set(e,t)}function Mb(n){return yi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Sm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lp(e,Sw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lp(e,Sw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lp(t,"/"==t.charAt(0)?JT:YT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lp(t,QT)),n.join("")};var Sw=/[#\/\?@]/g,YT=/[#\?:]/g,JT=/[#\?]/g,CI=/[#\?@]/g,QT=/#/g;function Im(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function df(n){n.g||(n.g=new Map,n.h=0,n.i&&function Tw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var a=n[t].substring(0,r);s=n[t].substring(r+1)}else a=n[t];e(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Iw(n,e){df(n),e=Xc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Aw(n,e){return df(n),e=Xc(n,e),n.g.has(e)}function Bo(n,e,t){Iw(n,e),0<t.length&&(n.i=null,n.g.set(Xc(n,e),Mp(t)),n.h+=t.length)}function Xc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function TI(n){this.l=n||wM,n=Tn.PerformanceNavigationTiming?0<(n=Tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tn.g&&Tn.g.Ga&&Tn.g.Ga()&&Tn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Jt=Im.prototype).add=function(n,e){df(this),this.i=null,n=Xc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Jt.forEach=function(n,e){df(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Jt.oa=function(){df(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let a=0;a<s.length;a++)t.push(e[r])}return t},Jt.W=function(n){df(this);let e=[];if("string"==typeof n)Aw(this,n)&&(e=e.concat(this.g.get(Xc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Jt.set=function(n,e){return df(this),this.i=null,Aw(this,n=Xc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Jt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Jt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),h=this.W(r);for(r=0;r<h.length;r++){var s=a;""!==h[r]&&(s+="="+encodeURIComponent(String(h[r]))),n.push(s)}}return this.i=n.join("&")};var wM=10;function xw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Nw(n){return n.h?1:n.g?n.g.size:0}function Bp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mw(n,e){n.g?n.g.add(e):n.h=e}function Rb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function XT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Mp(n.i)}function Ob(){}function SI(){this.g=new Ob}function II(n,e,t){const r=t||"";try{Dw(n,function(s,a){let h=s;mv(s)&&(h=gb(s)),e.push(r+a+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Am(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function xm(n){this.l=n.ac||null,this.j=n.jb||!1}function Nv(n,e){Fs.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}TI.prototype.cancel=function(){if(this.i=XT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ob.prototype.stringify=function(n){return Tn.JSON.stringify(n,void 0)},Ob.prototype.parse=function(n){return Tn.JSON.parse(n,void 0)},bs(xm,wb),xm.prototype.g=function(){return new Nv(this.l,this.j)},xm.prototype.i=function(n){return function(){return n}}({}),bs(Nv,Fs);var Nm=0;function kb(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Pb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Mm(n)}function Mm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Jt=Nv.prototype).open=function(n,e){if(this.readyState!=Nm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Mm(this)},Jt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Jt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pb(this)),this.readyState=Nm},Jt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Mm(this)),this.g&&(this.readyState=3,Mm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Tn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kb(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Jt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pb(this):Mm(this),3==this.readyState&&kb(this)}},Jt.Va=function(n){this.g&&(this.response=this.responseText=n,Pb(this))},Jt.Ua=function(n){this.g&&(this.response=n,Pb(this))},Jt.ga=function(){this.g&&Pb(this)},Jt.setRequestHeader=function(n,e){this.v.append(n,e)},Jt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Jt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xI=Tn.JSON.parse;function Ai(n){Fs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vp,this.K=this.L=!1}bs(Ai,Fs);var Vp="",NI=/^https?$/i,e1=["POST","PUT"];function MI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,t1(n),Fb(n)}function t1(n){n.D||(n.D=!0,vo(n,"complete"),vo(n,"error"))}function RI(n){if(n.h&&typeof tb<"u"&&(!n.C[1]||4!=qd(n)||2!=n.aa()))if(n.v&&4==qd(n))gw(n.Ha,0,n);else if(vo(n,"readystatechange"),4==qd(n)){n.h=!1;try{const _=n.aa();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===_){var s=String(n.H).match(xb)[1]||null;if(!s&&Tn.self&&Tn.self.location){var a=Tn.self.location.protocol;s=a.substr(0,a.length-1)}r=!NI.test(s?s.toLowerCase():"")}t=r}if(t)vo(n,"complete"),vo(n,"success");else{n.m=6;try{var h=2<qd(n)?n.g.statusText:""}catch{h=""}n.j=h+" ["+n.aa()+"]",t1(n)}}finally{Fb(n)}}}function Fb(n,e){if(n.g){n1(n);const t=n.g,r=n.C[0]?gv:null;n.g=null,n.C=null,e||vo(n,"ready");try{t.onreadystatechange=r}catch{}}}function n1(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tn.clearTimeout(n.A),n.A=null)}function qd(n){return n.g?n.g.readyState:0}function Ow(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Vp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function kw(n){let e="";return tw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Pw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yi(n,e,t))}function Rm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Fw(n){this.Ca=0,this.i=[],this.j=new Eb,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Rm("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Rm("baseRetryDelayMs",5e3,n),this.bb=Rm("retryDelaySeedMs",1e4,n),this.$a=Rm("forwardChannelMaxRetries",2,n),this.ta=Rm("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new TI(n&&n.concurrentRequestLimit),this.Fa=new SI,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Lw(n){if(Bw(n),3==n.G){var e=n.U++,t=Qc(n.F);yi(t,"SID",n.I),yi(t,"RID",e),yi(t,"TYPE","terminate"),Om(n,t),(e=new Tv(n,n.j,e,void 0)).K=2,e.v=Mb(Qc(t)),t=!1,Tn.navigator&&Tn.navigator.sendBeacon&&(t=Tn.navigator.sendBeacon(e.v.toString(),"")),!t&&Tn.Image&&((new Image).src=e.v,t=!0),t||(e.g=LI(e.l,null),e.g.da(e.v)),e.F=Date.now(),Iv(e)}PI(n)}function Lb(n){n.g&&(o1(n),n.g.cancel(),n.g=null)}function Bw(n){Lb(n),n.u&&(Tn.clearTimeout(n.u),n.u=null),Hw(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Tn.clearTimeout(n.m),n.m=null)}function Bb(n){xw(n.h)||n.m||(n.m=!0,_b(n.Ja,n),n.C=0)}function Vw(n,e){var t;t=e?e.m:n.U++;const r=Qc(n.F);yi(r,"SID",n.I),yi(r,"RID",t),yi(r,"AID",n.T),Om(n,r),n.o&&n.s&&Pw(r,n.o,n.s),t=new Tv(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Uw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Mw(n.h,t),Cw(t,r,e)}function Om(n,e){n.ia&&tw(n.ia,function(t,r){yi(e,r,t)}),n.l&&Dw({},function(t,r){yi(e,r,t)})}function Uw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?aa(n.l.Ra,n.l,n):null;e:{var s=n.i;let a=-1;for(;;){const h=["count="+t];-1==a?0<t?(a=s[0].h,h.push("ofs="+a)):a=0:h.push("ofs="+a);let _=!0;for(let E=0;E<t;E++){let D=s[E].h;const x=s[E].g;if(D-=a,0>D)a=Math.max(0,s[E].h-100),_=!1;else try{II(x,h,"req"+D+"_")}catch{r&&r(x)}}if(_){r=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function s1(n){n.g||n.u||(n.Z=1,_b(n.Ia,n),n.A=0)}function $w(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Cm(aa(n.Ia,n),kI(n,n.A)),n.A++,0))}function o1(n){null!=n.B&&(Tn.clearTimeout(n.B),n.B=null)}function jw(n){n.g=new Tv(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Qc(n.sa);yi(e,"RID","rpc"),yi(e,"SID",n.I),yi(e,"CI",n.L?"0":"1"),yi(e,"AID",n.T),yi(e,"TYPE","xmlhttp"),Om(n,e),n.o&&n.s&&Pw(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Mb(Qc(e)),t.s=null,t.P=!0,Ib(t,n)}function Hw(n){null!=n.v&&(Tn.clearTimeout(n.v),n.v=null)}function OI(n,e){var t=null;if(n.g==e){Hw(n),o1(n),n.g=null;var r=2}else{if(!Bp(n.h,e))return;t=e.D,Rb(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;vo(r=Cb(),new _w(r,t)),Bb(n)}else s1(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function r1(n,e){return!(Nw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Cm(aa(n.Ja,n,e),kI(n,n.C)),n.C++,0)))}(n,e)||2==r&&$w(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:km(n,5);break;case 4:km(n,10);break;case 3:km(n,6);break;default:km(n,2)}}function kI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function km(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=aa(n.kb,n);t||(t=new lf("//www.google.com/images/cleardot.gif"),Tn.location&&"http"==Tn.location.protocol||Tm(t,"https"),Mb(t)),function AI(n,e){const t=new Eb;if(Tn.Image){const r=new Image;r.onload=_v(Am,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_v(Am,t,r,"TestLoadImage: error",!1,e),r.onabort=_v(Am,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_v(Am,t,r,"TestLoadImage: timeout",!1,e),Tn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ls(2);n.G=0,n.l&&n.l.va(e),PI(n),Bw(n)}function PI(n){if(n.G=0,n.la=[],n.l){const e=XT(n.h);(0!=e.length||0!=n.i.length)&&(AT(n.la,e),AT(n.la,n.i),n.h.i.length=0,Mp(n.i),n.i.length=0),n.l.ua()}}function FI(n,e,t){var r=t instanceof lf?Qc(t):new lf(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Nb(r,r.m);else{var s=Tn.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var a=new lf(null,void 0);r&&Tm(a,r),e&&(a.g=e),s&&Nb(a,s),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&yi(r,t,e),yi(r,"VER",n.ma),Om(n,r),r}function LI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ai(t&&n.Da&&!n.ra?new xm({jb:!0}):n.ra)).Ka(n.H),e}function BI(){}function Up(){if(bm&&!(10<=Number(RT)))throw Error("Environmental error: no available transport.")}function mc(n,e){Fs.call(this),this.g=new Fw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!rb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $p(this)}function Gw(n){Tb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Mv(){bw.call(this),this.status=1}function $p(n){this.g=n}(Jt=Ai.prototype).Ka=function(n){this.L=n},Jt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ew.g(),this.C=function yw(n){return n.h||(n.h=n.i())}(this.u?this.u:Ew),this.g.onreadystatechange=aa(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void MI(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),s=Tn.FormData&&n instanceof Tn.FormData,!(0<=YC(e1,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,h]of t)this.g.setRequestHeader(a,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{n1(this),0<this.B&&((this.K=function Rw(n){return bm&&function lI(){return function aI(n){var e=cI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xT(String(ab)).split("."),t=xT("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var s=e[h]||"",a=t[h]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;n=ib(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ib(0==s[2].length,0==a[2].length)||ib(s[2],a[2]),s=s[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=aa(this.qa,this)):this.A=gw(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){MI(this,a)}},Jt.qa=function(){typeof tb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vo(this,"timeout"),this.abort(8))},Jt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vo(this,"complete"),vo(this,"abort"),Fb(this))},Jt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fb(this,!0)),Ai.X.M.call(this)},Jt.Ha=function(){this.s||(this.F||this.v||this.l?RI(this):this.fb())},Jt.fb=function(){RI(this)},Jt.aa=function(){try{return 2<qd(this)?this.g.status:-1}catch{return-1}},Jt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Jt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xI(e)}},Jt.Ea=function(){return this.m},Jt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Jt=Fw.prototype).ma=8,Jt.G=1,Jt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Tv(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=OT(a),rw(a,this.S)):a=this.S),null!==this.o||this.N||(s.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Uw(this,s,e),yi(t=Qc(this.F),"RID",n),yi(t,"CVER",22),this.D&&yi(t,"X-HTTP-Session-Id",this.D),Om(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(kw(a)))+"&"+e:this.o&&Pw(t,this.o,a)),Mw(this.h,s),this.Ya&&yi(t,"TYPE","init"),this.O?(yi(t,"$req",e),yi(t,"SID","null"),s.Z=!0,Cw(s,t,null)):Cw(s,t,e),this.G=2}}else 3==this.G&&(n?Vw(this,n):0==this.i.length||xw(this.h)||Vw(this))},Jt.Ia=function(){if(this.u=null,jw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Cm(aa(this.eb,this),n)}},Jt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ls(10),Lb(this),jw(this))},Jt.cb=function(){null!=this.v&&(this.v=null,Lb(this),$w(this),Ls(19))},Jt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ls(2)):(this.j.info("Failed to ping google.com"),Ls(1))},(Jt=BI.prototype).xa=function(){},Jt.wa=function(){},Jt.va=function(){},Jt.ua=function(){},Jt.Ra=function(){},Up.prototype.g=function(n,e){return new mc(n,e)},bs(mc,Fs),mc.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ls(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=FI(n,null,n.V),Bb(n)},mc.prototype.close=function(){Lw(this.g)},mc.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=gb(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Bb(e)},mc.prototype.M=function(){this.g.l=null,delete this.j,Lw(this.g),delete this.g,mc.X.M.call(this)},bs(Gw,Tb),bs(Mv,bw),bs($p,BI),$p.prototype.xa=function(){vo(this.g,"a")},$p.prototype.wa=function(n){vo(this.g,new Gw(n))},$p.prototype.va=function(n){vo(this.g,new Mv)},$p.prototype.ua=function(){vo(this.g,"b")},Up.prototype.createWebChannel=Up.prototype.g,mc.prototype.send=mc.prototype.u,mc.prototype.open=mc.prototype.m,mc.prototype.close=mc.prototype.close,Dv.NO_ERROR=0,Dv.TIMEOUT=8,Dv.HTTP_ERROR=6,vw.COMPLETE="complete",qT.EventType=Db,Db.OPEN="a",Db.CLOSE="b",Db.ERROR="c",Db.MESSAGE="d",Fs.prototype.listen=Fs.prototype.N,Ai.prototype.listenOnce=Ai.prototype.O,Ai.prototype.getLastError=Ai.prototype.Oa,Ai.prototype.getLastErrorCode=Ai.prototype.Ea,Ai.prototype.getStatus=Ai.prototype.aa,Ai.prototype.getResponseJson=Ai.prototype.Sa,Ai.prototype.getResponseText=Ai.prototype.fa,Ai.prototype.send=Ai.prototype.da,Ai.prototype.setWithCredentials=Ai.prototype.Ka;var a1=Fl.createWebChannelTransport=function(){return new Up},DM=Fl.getStatEventTarget=function(){return Cb()},Rv=Fl.ErrorCode=Dv,u1=Fl.EventType=vw,VI=Fl.Event=kp,qw=Fl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},TM=Fl.FetchXmlHttpFactory=xm,Ww=Fl.WebChannel=qT,UI=Fl.XhrIo=Ai;const c1="@firebase/firestore";class Yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");let Pm="9.15.0";const jp=new ks.Yd("@firebase/firestore");function l1(){return jp.logLevel}function ht(n,...e){if(jp.logLevel<=ks.in.DEBUG){const t=e.map(d1);jp.debug(`Firestore (${Pm}): ${n}`,...t)}}function Ji(n,...e){if(jp.logLevel<=ks.in.ERROR){const t=e.map(d1);jp.error(`Firestore (${Pm}): ${n}`,...t)}}function Hp(n,...e){if(jp.logLevel<=ks.in.WARN){const t=e.map(d1);jp.warn(`Firestore (${Pm}): ${n}`,...t)}}function d1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ht(n="Unexpected state"){const e=`FIRESTORE (${Pm}) INTERNAL ASSERTION FAILED: `+n;throw Ji(e),new Error(e)}function Yt(n,e){n||Ht()}function It(n,e){return n}const Ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends Mn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class f1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yi.UNAUTHENTICATED))}shutdown(){}}class _c{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $I{constructor(e){this.t=e,this.currentUser=Yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const a=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let h=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Qi,e.enqueueRetryable(()=>a(this.currentUser))};const _=()=>{const D=h;e.enqueueRetryable((0,qe.Z)(function*(){yield D.promise,yield a(r.currentUser)}))},E=D=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(D=>E(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?E(D):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Qi)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt("string"==typeof r.accessToken),new f1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yt(null===e||"string"==typeof e),new Yi(e)}}class zw{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Yi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Yt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class jI{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new zw(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kw{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const h=a.token!==this.A;return this.A=a.token,ht("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?s(a):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Yt("string"==typeof t.token),this.A=t.token,new p1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function g1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class m1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=g1(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function En(n,e){return n<e?-1:n>e?1:0}function Gp(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function _1(n){return n+"\0"}class ai{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new at(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new at(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new at(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ai.fromMillis(Date.now())}static fromDate(e){return ai.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ai(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?En(this.nanoseconds,e.nanoseconds):En(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rn(e)}static min(){return new rn(new ai(0,0))}static max(){return new rn(new ai(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ht(),void 0===r?r=e.length-t:r>e.length-t&&Ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),h=t.get(s);if(a<h)return-1;if(a>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fn extends qp{construct(e,t,r){return new Fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new at(Ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Fn(t)}static emptyPath(){return new Fn([])}}const v1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bi extends qp{construct(e,t,r){return new bi(e,t,r)}static isValidIdentifier(e){return v1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bi(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(0===r.length)throw new at(Ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;s<e.length;){const _=e[s];if("\\"===_){if(s+1===e.length)throw new at(Ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[s+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new at(Ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,s+=2}else"`"===_?(h=!h,s++):"."!==_||h?(r+=_,s++):(a(),s++)}if(a(),h)throw new at(Ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bi(t)}static emptyPath(){return new bi([])}}class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Fn.fromString(e))}static fromName(e){return new _t(Fn.fromString(e).popFirst(5))}static empty(){return new _t(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Fn(e.slice()))}}class Vb{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function y1(n){return n.fields.find(e=>2===e.kind)}function Wp(n){return n.fields.filter(e=>2!==e.kind)}Vb.UNKNOWN_ID=-1;class Ub{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fm(0,Tu.min())}}function WI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=rn.fromTimestamp(1e9===r?new ai(t+1,0):new ai(t,r));return new Tu(s,_t.empty(),e)}function Zw(n){return new Tu(n.readTime,n.key,-1)}class Tu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Tu(rn.min(),_t.empty(),-1)}static max(){return new Tu(rn.max(),_t.empty(),-1)}}function $b(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=_t.comparator(n.documentKey,e.documentKey),0!==t?t:En(n.largestBatchId,e.largestBatchId))}const zI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wd(n){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,qe.Z)(function*(n){if(n.code!==Ve.FAILED_PRECONDITION||n.message!==zI)throw n;ht("LocalStore","Unexpectedly lost primary lease")}),Hb.apply(this,arguments)}class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ue((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ue?t:Ue.resolve(t)}catch(t){return Ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ue.reject(t)}static resolve(e){return new Ue((t,r)=>{t(e)})}static reject(e){return new Ue((t,r)=>{r(e)})}static waitFor(e){return new Ue((t,r)=>{let s=0,a=0,h=!1;e.forEach(_=>{++s,_.next(()=>{++a,h&&a===s&&t()},E=>r(E))}),h=!0,a===s&&t()})}static or(e){let t=Ue.resolve(!1);for(const r of e)t=t.next(s=>s?Ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new Ue((r,s)=>{const a=e.length,h=new Array(a);let _=0;for(let E=0;E<a;E++){const D=E;t(e[D]).next(x=>{h[D]=x,++_,_===a&&r(h)},x=>s(x))}})}static doWhile(e,t){return new Ue((r,s)=>{const a=()=>{!0===e()?t().next(()=>{a()},s):r()};a()})}}class Ov{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Qi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=E1(r.target.error);this.P.reject(new hf(e,s))}}static open(e,t,r,s){try{return new Ov(t,e.transaction(s,r))}catch(a){throw new hf(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ht("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KI(t)}}class vc{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===vc.D((0,Mn.z$)())&&Ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ht("SimpleDb","Removing database:",e),zp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Mn.hl)())return!1;if(vc.N())return!0;const e=(0,Mn.z$)(),t=vc.D(e),r=0<t&&t<10,s=vc.k(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,qe.Z)(function*(){return t.db||(ht("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=h=>{r(h.target.result)},a.onblocked=()=>{s(new hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=h=>{const _=h.target.error;s("VersionError"===_.name?new at(Ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new at(Ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new hf(e,_))},a.onupgradeneeded=h=>{ht("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,a.transaction,h.oldVersion,t.version).next(()=>{ht("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var a=this;return(0,qe.Z)(function*(){const h="readonly"===t;let _=0;for(;;){++_;try{a.db=yield a.F(e);const E=Ov.open(a.db,e,h?"readonly":"readwrite",r),D=s(E).next(x=>(E.V(),x)).catch(x=>(E.abort(x),Ue.reject(x))).toPromise();return D.catch(()=>{}),yield E.v,D}catch(E){const D=E,x="FirebaseError"!==D.name&&_<3;if(ht("SimpleDb","Transaction failed with error:",D.message,"Retrying:",x),a.close(),!x)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gb{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return zp(this.q.delete())}}class hf extends at{constructor(e,t){super(Ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zd(n){return"IndexedDbTransactionError"===n.name}class KI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ht("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ht("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zp(r)}add(e){return ht("SimpleDb","ADD",this.store.name,e,e),zp(this.store.add(e))}get(e){return zp(this.store.get(e)).next(t=>(void 0===t&&(t=null),ht("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ht("SimpleDb","DELETE",this.store.name,e),zp(this.store.delete(e))}count(){return ht("SimpleDb","COUNT",this.store.name),zp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),a=[];return this.H(s,(h,_)=>{a.push(_)}).next(()=>a)}{const s=this.store.getAll(r.range);return new Ue((a,h)=>{s.onerror=_=>{h(_.target.error)},s.onsuccess=_=>{a(_.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ue((s,a)=>{r.onerror=h=>{a(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}Y(e,t){ht("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(a,h,_)=>_.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new Ue((r,s)=>{t.onerror=a=>{const h=E1(a.target.error);s(h)},t.onsuccess=a=>{const h=a.target.result;h?e(h.primaryKey,h.value).next(_=>{_?h.continue():r()}):r()}})}H(e,t){const r=[];return new Ue((s,a)=>{e.onerror=h=>{a(h.target.error)},e.onsuccess=h=>{const _=h.target.result;if(!_)return void s();const E=new Gb(_),D=t(_.primaryKey,_.value,E);if(D instanceof Ue){const x=D.catch(L=>(E.done(),Ue.reject(L)));r.push(x)}E.isDone?s():null===E.G?_.continue():_.continue(E.G)}}).next(()=>Ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zp(n){return new Ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=E1(r.target.error);t(s)}})}let b1=!1;function E1(n){const e=vc.D((0,Mn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new at("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return b1||(b1=!0,setTimeout(()=>{throw r},0)),r}}return n}class AM{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ht("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,qe.Z)(function*(){t.task=null;try{ht("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){zd(r)?ht("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Wd(r)}yield t.nt(6e4)}))}}class C1{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,qe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,a=!0;return Ue.doWhile(()=>!0===a&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return ht("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,s).next(_=>{s-=_,r.add(h)});a=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(a=>{const h=a.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(s,a)).next(_=>(ht("IndexBackiller",`Updating offset: ${_}`),this.localStore.indexManager.updateCollectionGroup(e,t,_))).next(()=>h.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,a)=>{const h=Zw(a);$b(h,r)>0&&(r=h)}),new Tu(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Su=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class ZI{constructor(e,t,r,s,a,h,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=h,this.autoDetectLongPolling=_,this.useFetchStreams=E}}class ff{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ff("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ff&&e.projectId===this.projectId&&e.database===this.database}}function YI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qb(n){return null==n}function Wb(n){return 0===n&&1/n==-1/0}function w1(n){return"number"==typeof n&&Number.isInteger(n)&&!Wb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Bs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Bs(t)}static fromUint8Array(e){const t=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new Bs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return En(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bs.EMPTY_BYTE_STRING=new Bs("");const QI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kd(n){if(Yt(!!n),"string"==typeof n){let e=0;const t=QI.exec(n);if(Yt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xr(n.seconds),nanos:xr(n.nanos)}}function xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pf(n){return"string"==typeof n?Bs.fromBase64String(n):Bs.fromUint8Array(n)}function kv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Kb(n){const e=n.mapValue.fields.__previous_value__;return kv(e)?Kb(e):e}function Pv(n){const e=Kd(n.mapValue.fields.__local_write_time__.timestampValue);return new ai(e.seconds,e.nanos)}const Bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bm={nullValue:"NULL_VALUE"};function Vl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kv(n)?4:D1(n)?9007199254740991:10:Ht()}function Zd(n,e){if(n===e)return!0;const t=Vl(n);if(t!==Vl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pv(n).isEqual(Pv(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Kd(r.timestampValue),h=Kd(s.timestampValue);return a.seconds===h.seconds&&a.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,pf(n.bytesValue).isEqual(pf(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return xr(r.geoPointValue.latitude)===xr(s.geoPointValue.latitude)&&xr(r.geoPointValue.longitude)===xr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return xr(r.integerValue)===xr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=xr(r.doubleValue),h=xr(s.doubleValue);return a===h?Wb(a)===Wb(h):isNaN(a)&&isNaN(h)}return!1}(n,e);case 9:return Gp(n.arrayValue.values||[],e.arrayValue.values||[],Zd);case 10:return function(r,s){const a=r.mapValue.fields||{},h=s.mapValue.fields||{};if(YI(a)!==YI(h))return!1;for(const _ in a)if(a.hasOwnProperty(_)&&(void 0===h[_]||!Zd(a[_],h[_])))return!1;return!0}(n,e);default:return Ht()}var s}function Zb(n,e){return void 0!==(n.values||[]).find(t=>Zd(t,e))}function Kp(n,e){if(n===e)return 0;const t=Vl(n),r=Vl(e);if(t!==r)return En(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return En(n.booleanValue,e.booleanValue);case 2:return function(s,a){const h=xr(s.integerValue||s.doubleValue),_=xr(a.integerValue||a.doubleValue);return h<_?-1:h>_?1:h===_?0:isNaN(h)?isNaN(_)?0:-1:1}(n,e);case 3:return XI(n.timestampValue,e.timestampValue);case 4:return XI(Pv(n),Pv(e));case 5:return En(n.stringValue,e.stringValue);case 6:return function(s,a){const h=pf(s),_=pf(a);return h.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const h=s.split("/"),_=a.split("/");for(let E=0;E<h.length&&E<_.length;E++){const D=En(h[E],_[E]);if(0!==D)return D}return En(h.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const h=En(xr(s.latitude),xr(a.latitude));return 0!==h?h:En(xr(s.longitude),xr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,a){const h=s.values||[],_=a.values||[];for(let E=0;E<h.length&&E<_.length;++E){const D=Kp(h[E],_[E]);if(D)return D}return En(h.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===Bl.mapValue&&a===Bl.mapValue)return 0;if(s===Bl.mapValue)return 1;if(a===Bl.mapValue)return-1;const h=s.fields||{},_=Object.keys(h),E=a.fields||{},D=Object.keys(E);_.sort(),D.sort();for(let x=0;x<_.length&&x<D.length;++x){const L=En(_[x],D[x]);if(0!==L)return L;const W=Kp(h[_[x]],E[D[x]]);if(0!==W)return W}return En(_.length,D.length)}(n.mapValue,e.mapValue);default:throw Ht()}}function XI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return En(n,e);const t=Kd(n),r=Kd(e),s=En(t.seconds,r.seconds);return 0!==s?s:En(t.nanos,r.nanos)}function Zp(n){return Yw(n)}function Yw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Kd(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pf(n.bytesValue).toBase64():"referenceValue"in n?_t.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",a=!0;for(const h of r.values||[])a?a=!1:s+=",",s+=Yw(h);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let a="{",h=!0;for(const _ of s)h?h=!1:a+=",",a+=`${_}:${Yw(r.fields[_])}`;return a+"}"}(n.mapValue):Ht();var e}function Yp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jw(n){return!!n&&"integerValue"in n}function Fv(n){return!!n&&"arrayValue"in n}function Qw(n){return!!n&&"nullValue"in n}function Xw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lv(n){return!!n&&"mapValue"in n}function Bv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Lm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function D1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function T1(n){return"nullValue"in n?Bm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yp(ff.empty(),_t.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ht()}function eD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yp(ff.empty(),_t.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Bl:Ht()}function eA(n,e){const t=Kp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tD(n,e){const t=Kp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ul{constructor(e,t){this.position=e,this.inclusive=t}}function S1(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],h=n.position[s];if(r=a.field.isKeyField()?_t.comparator(_t.fromName(h.referenceValue),t.key):Kp(h,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function I1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zd(n.position[t],e.position[t]))return!1;return!0}class tA{}class Zn extends tA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new xM(e,t,r):"array-contains"===t?new RM(e,r):"in"===t?new uA(e,r):"not-in"===t?new o(e,r):"array-contains-any"===t?new u(e,r):new Zn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new NM(e,r):new MM(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kp(t,this.value)):null!==t&&Vl(this.value)===Vl(t)&&this.matchesComparison(Kp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class br extends tA{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new br(e,t)}matches(e){return Vm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Vm(n){return"and"===n.op}function nD(n){return"or"===n.op}function nA(n){return rA(n)&&Vm(n)}function rA(n){for(const e of n.filters)if(e instanceof br)return!1;return!0}function iA(n){if(n instanceof Zn)return n.field.canonicalString()+n.op.toString()+Zp(n.value);{const e=n.filters.map(t=>iA(t)).join(",");return`${n.op}(${e})`}}function sA(n,e){return n instanceof Zn?(t=n,(r=e)instanceof Zn&&t.op===r.op&&t.field.isEqual(r.field)&&Zd(t.value,r.value)):n instanceof br?function(t,r){return r instanceof br&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,a,h)=>s&&sA(a,r.filters[h]),!0)}(n,e):void Ht();var t,r}function oA(n,e){const t=n.filters.concat(e);return br.create(t,n.op)}function A1(n){return n instanceof Zn?`${(e=n).field.canonicalString()} ${e.op} ${Zp(e.value)}`:n instanceof br?function(e){return e.op.toString()+" {"+e.getFilters().map(A1).join(" ,")+"}"}(n):"Filter";var e}class xM extends Zn{constructor(e,t,r){super(e,t,r),this.key=_t.fromName(r.referenceValue)}matches(e){const t=_t.comparator(e.key,this.key);return this.matchesComparison(t)}}class NM extends Zn{constructor(e,t){super(e,"in",t),this.keys=aA(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MM extends Zn{constructor(e,t){super(e,"not-in",t),this.keys=aA(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aA(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>_t.fromName(r.referenceValue))}class RM extends Zn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fv(t)&&Zb(t.arrayValue,this.value)}}class uA extends Zn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zb(this.value.arrayValue,t)}}class o extends Zn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zb(this.value.arrayValue,t)}}class u extends Zn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zb(this.value.arrayValue,r))}}class l{constructor(e,t="asc"){this.field=e,this.dir=t}}function g(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class m{constructor(e,t){this.comparator=e,this.root=t||T.EMPTY}insert(e,t){return new m(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,T.BLACK,null,null))}remove(e){return new m(this.comparator,this.root.remove(e,this.comparator).copy(null,null,T.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new y(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new y(this.root,e,this.comparator,!1)}getReverseIterator(){return new y(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new y(this.root,e,this.comparator,!0)}}class y{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class T{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??T.RED,this.left=s??T.EMPTY,this.right=a??T.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new T(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===a?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return T.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return T.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,T.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,T.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const e=this.left.check();if(e!==this.right.check())throw Ht();return e+(this.isRed()?0:1)}}T.EMPTY=null,T.RED=!0,T.BLACK=!1,T.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(n,e,t,r,s){return this}insert(n,e,t){return new T(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class A{constructor(e){this.comparator=e,this.data=new m(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new R(this.data.getIterator())}getIteratorFrom(e){return new R(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof A)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(s,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new A(this.comparator);return t.data=e,t}}class R{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function B(n){return n.hasNext()?n.getNext():void 0}class G{constructor(e){this.fields=e,e.sort(bi.comparator)}static empty(){return new G([])}unionWith(e){let t=new A(bi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new G(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class te{constructor(e){this.value=e}static empty(){return new te({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bv(t)}setAll(e){let t=bi.emptyPath(),r={},s=[];e.forEach((h,_)=>{if(!t.isImmediateParentOf(_)){const E=this.getFieldsMap(t);this.applyChanges(E,r,s),r={},s=[],t=_.popLast()}h?r[_.lastSegment()]=Bv(h):s.push(_.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Lv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Lv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Lm(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new te(Bv(this.value))}}function Ee(n){const e=[];return Lm(n.fields,(t,r)=>{const s=new bi([t]);if(Lv(r)){const a=Ee(r.mapValue).fields;if(0===a.length)e.push(s);else for(const h of a)e.push(s.child(h))}else e.push(s)}),new G(e)}class Ae{constructor(e,t,r,s,a,h,_){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=h,this.documentState=_}static newInvalidDocument(e){return new Ae(e,0,rn.min(),rn.min(),rn.min(),te.empty(),0)}static newFoundDocument(e,t,r,s){return new Ae(e,1,t,rn.min(),r,s,0)}static newNoDocument(e,t){return new Ae(e,2,t,rn.min(),rn.min(),te.empty(),0)}static newUnknownDocument(e,t){return new Ae(e,3,t,rn.min(),rn.min(),te.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=te.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=te.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ae&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Je{constructor(e,t=null,r=[],s=[],a=null,h=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=h,this.endAt=_,this.ft=null}}function ft(n,e=null,t=[],r=[],s=null,a=null,h=null){return new Je(n,e,t,r,s,a,h)}function Et(n){const e=It(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>iA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),qb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zp(r)).join(",")),e.ft=t}return e.ft}function $t(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!g(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I1(n.startAt,e.startAt)&&I1(n.endAt,e.endAt)}function cn(n){return _t.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ut(n,e){return n.filters.filter(t=>t instanceof Zn&&t.field.isEqual(e))}function Cn(n,e,t){let r=Bm,s=!0;for(const a of ut(n,e)){let h=Bm,_=!0;switch(a.op){case"<":case"<=":h=T1(a.value);break;case"==":case"in":case">=":h=a.value;break;case">":h=a.value,_=!1;break;case"!=":case"not-in":h=Bm}eA({value:r,inclusive:s},{value:h,inclusive:_})<0&&(r=h,s=_)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const h=t.position[a];eA({value:r,inclusive:s},{value:h,inclusive:t.inclusive})<0&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}function ui(n,e,t){let r=Bl,s=!0;for(const a of ut(n,e)){let h=Bl,_=!0;switch(a.op){case">=":case">":h=eD(a.value),_=!1;break;case"==":case"in":case"<=":h=a.value;break;case"<":h=a.value,_=!1;break;case"!=":case"not-in":h=Bl}tD({value:r,inclusive:s},{value:h,inclusive:_})>0&&(r=h,s=_)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const h=t.position[a];tD({value:r,inclusive:s},{value:h,inclusive:t.inclusive})>0&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}class Er{constructor(e,t=null,r=[],s=[],a=null,h="F",_=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=h,this.startAt=_,this.endAt=E,this.dt=null,this._t=null}}function cA(n,e,t,r,s,a,h,_){return new Er(n,e,t,r,s,a,h,_)}function Yb(n){return new Er(n)}function OM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function lA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function x1(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function dA(n){return null!==n.collectionGroup}function Vv(n){const e=It(n);if(null===e.dt){e.dt=[];const t=x1(e),r=lA(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new l(t)),e.dt.push(new l(bi.keyField(),"asc"));else{let s=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(s=!0);if(!s){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new l(bi.keyField(),a))}}}return e.dt}function Iu(n){const e=It(n);if(!e._t)if("F"===e.limitType)e._t=ft(e.path,e.collectionGroup,Vv(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Vv(e))t.push(new l(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ul(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ul(e.startAt.position,e.startAt.inclusive):null;e._t=ft(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function hA(n,e){e.getFirstInequalityField(),x1(n);const t=n.filters.concat([e]);return new Er(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function N1(n,e,t){return new Er(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rD(n,e){return $t(Iu(n),Iu(e))&&n.limitType===e.limitType}function kM(n){return`${Et(Iu(n))}|lt:${n.limitType}`}function fA(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>A1(r)).join(", ")}]`),qb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zp(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zp(r)).join(",")),`Target(${t})`}(Iu(n))}; limitType=${n.limitType})`}function pA(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):_t.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Vv(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,a,h){const _=S1(s,a,h);return s.inclusive?_<=0:_<0}(t.startAt,Vv(t),r)||t.endAt&&!function(s,a,h){const _=S1(s,a,h);return s.inclusive?_>=0:_>0}(t.endAt,Vv(t),r)));var t,r}function PM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FM(n){return(e,t)=>{let r=!1;for(const s of Vv(n)){const a=KF(s,e,t);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function KF(n,e,t){const r=n.field.isKeyField()?_t.comparator(e.key,t.key):function(s,a,h){const _=a.data.field(s),E=h.data.field(s);return null!==_&&null!==E?Kp(_,E):Ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ht()}}function LM(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wb(e)?"-0":e}}function BM(n){return{integerValue:""+n}}function VM(n,e){return w1(e)?BM(e):LM(n,e)}class M1{constructor(){this._=void 0}}function ZF(n,e,t){return n instanceof Jb?function(r,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Uv?$M(n,e):n instanceof $v?jM(n,e):function(r,s){const a=UM(r,s),h=HM(a)+HM(r.gt);return Jw(a)&&Jw(r.gt)?BM(h):LM(r.yt,h)}(n,e)}function YF(n,e,t){return n instanceof Uv?$M(n,e):n instanceof $v?jM(n,e):t}function UM(n,e){return n instanceof Qb?Jw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jb extends M1{}class Uv extends M1{constructor(e){super(),this.elements=e}}function $M(n,e){const t=GM(e);for(const r of n.elements)t.some(s=>Zd(s,r))||t.push(r);return{arrayValue:{values:t}}}class $v extends M1{constructor(e){super(),this.elements=e}}function jM(n,e){let t=GM(e);for(const r of n.elements)t=t.filter(s=>!Zd(s,r));return{arrayValue:{values:t}}}class Qb extends M1{constructor(e,t){super(),this.yt=e,this.gt=t}}function HM(n){return xr(n.integerValue||n.doubleValue)}function GM(n){return Fv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class iD{constructor(e,t){this.field=e,this.transform=t}}class QF{constructor(e,t){this.version=e,this.transformResults=t}}class ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R1(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class O1{}function qM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new eE(n.key,ji.none()):new Xb(n.key,n.data,ji.none());{const t=n.data,r=te.empty();let s=new A(bi.comparator);for(let a of e.fields)if(!s.has(a)){let h=t.field(a);null===h&&a.length>1&&(a=a.popLast(),h=t.field(a)),null===h?r.delete(a):r.set(a,h),s=s.add(a)}return new Jp(n.key,r,new G(s.toArray()),ji.none())}}function XF(n,e,t){n instanceof Xb?function(r,s,a){const h=r.value.clone(),_=KM(r.fieldTransforms,s,a.transformResults);h.setAll(_),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Jp?function(r,s,a){if(!R1(r.precondition,s))return void s.convertToUnknownDocument(a.version);const h=KM(r.fieldTransforms,s,a.transformResults),_=s.data;_.setAll(zM(r)),_.setAll(h),s.convertToFoundDocument(a.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sD(n,e,t,r){return n instanceof Xb?function(s,a,h,_){if(!R1(s.precondition,a))return h;const E=s.value.clone(),D=ZM(s.fieldTransforms,_,a);return E.setAll(D),a.convertToFoundDocument(a.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jp?function(s,a,h,_){if(!R1(s.precondition,a))return h;const E=ZM(s.fieldTransforms,_,a),D=a.data;return D.setAll(zM(s)),D.setAll(E),a.convertToFoundDocument(a.version,D).setHasLocalMutations(),null===h?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(x=>x.field))}(n,e,t,r):(h=t,R1(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):h);var a,h}function eL(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=UM(r.transform,s||null);null!=a&&(null===t&&(t=te.empty()),t.set(r.field,a))}return t||null}function WM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gp(t,r,(s,a)=>function JF(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Uv&&r instanceof Uv||t instanceof $v&&r instanceof $v?Gp(t.elements,r.elements,Zd):t instanceof Qb&&r instanceof Qb?Zd(t.gt,r.gt):t instanceof Jb&&r instanceof Jb);var t,r}(s,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Xb extends O1{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jp extends O1{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KM(n,e,t){const r=new Map;Yt(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],h=a.transform,_=e.data.field(a.field);r.set(a.field,YF(h,_,t[s]))}return r}function ZM(n,e,t){const r=new Map;for(const s of n){const a=s.transform,h=t.data.field(s.field);r.set(s.field,ZF(a,h,e))}return r}class eE extends O1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gA extends O1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tL{constructor(e){this.count=e}}var so,sr;function YM(n){switch(n){default:return Ht();case Ve.CANCELLED:case Ve.UNKNOWN:case Ve.DEADLINE_EXCEEDED:case Ve.RESOURCE_EXHAUSTED:case Ve.INTERNAL:case Ve.UNAVAILABLE:case Ve.UNAUTHENTICATED:return!1;case Ve.INVALID_ARGUMENT:case Ve.NOT_FOUND:case Ve.ALREADY_EXISTS:case Ve.PERMISSION_DENIED:case Ve.FAILED_PRECONDITION:case Ve.ABORTED:case Ve.OUT_OF_RANGE:case Ve.UNIMPLEMENTED:case Ve.DATA_LOSS:return!0}}function JM(n){if(void 0===n)return Ji("GRPC error has no .code"),Ve.UNKNOWN;switch(n){case so.OK:return Ve.OK;case so.CANCELLED:return Ve.CANCELLED;case so.UNKNOWN:return Ve.UNKNOWN;case so.DEADLINE_EXCEEDED:return Ve.DEADLINE_EXCEEDED;case so.RESOURCE_EXHAUSTED:return Ve.RESOURCE_EXHAUSTED;case so.INTERNAL:return Ve.INTERNAL;case so.UNAVAILABLE:return Ve.UNAVAILABLE;case so.UNAUTHENTICATED:return Ve.UNAUTHENTICATED;case so.INVALID_ARGUMENT:return Ve.INVALID_ARGUMENT;case so.NOT_FOUND:return Ve.NOT_FOUND;case so.ALREADY_EXISTS:return Ve.ALREADY_EXISTS;case so.PERMISSION_DENIED:return Ve.PERMISSION_DENIED;case so.FAILED_PRECONDITION:return Ve.FAILED_PRECONDITION;case so.ABORTED:return Ve.ABORTED;case so.OUT_OF_RANGE:return Ve.OUT_OF_RANGE;case so.UNIMPLEMENTED:return Ve.UNIMPLEMENTED;case so.DATA_LOSS:return Ve.DATA_LOSS;default:return Ht()}}(sr=so||(so={}))[sr.OK=0]="OK",sr[sr.CANCELLED=1]="CANCELLED",sr[sr.UNKNOWN=2]="UNKNOWN",sr[sr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sr[sr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sr[sr.NOT_FOUND=5]="NOT_FOUND",sr[sr.ALREADY_EXISTS=6]="ALREADY_EXISTS",sr[sr.PERMISSION_DENIED=7]="PERMISSION_DENIED",sr[sr.UNAUTHENTICATED=16]="UNAUTHENTICATED",sr[sr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sr[sr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sr[sr.ABORTED=10]="ABORTED",sr[sr.OUT_OF_RANGE=11]="OUT_OF_RANGE",sr[sr.UNIMPLEMENTED=12]="UNIMPLEMENTED",sr[sr.INTERNAL=13]="INTERNAL",sr[sr.UNAVAILABLE=14]="UNAVAILABLE",sr[sr.DATA_LOSS=15]="DATA_LOSS";class Um{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,a]of r)if(this.equalsFn(s,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Lm(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}const nL=new m(_t.comparator);function yc(){return nL}const QM=new m(_t.comparator);function oD(...n){let e=QM;for(const t of n)e=e.insert(t.key,t);return e}function XM(n){let e=QM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gf(){return aD()}function eR(){return aD()}function aD(){return new Um(n=>n.toString(),(n,e)=>n.isEqual(e))}const rL=new m(_t.comparator),iL=new A(_t.comparator);function Vn(...n){let e=iL;for(const t of n)e=e.add(t);return e}const sL=new A(En);function k1(){return sL}class uD{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,cD.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new uD(rn.min(),s,k1(),yc(),Vn())}}class cD{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cD(r,t,Vn(),Vn(),Vn())}}class P1{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class tR{constructor(e,t){this.targetId=e,this.Et=t}}class nR{constructor(e,t,r=Bs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class rR{constructor(){this.At=0,this.Rt=sR(),this.bt=Bs.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Vn(),t=Vn(),r=Vn();return this.Rt.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ht()}}),new cD(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=sR()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class oL{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=yc(),this.qt=iR(),this.Ut=new A(En)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,r=e.Et.count,s=this.Yt(t);if(s){const a=s.target;if(cn(a))if(0===r){const h=new _t(a.path);this.Qt(t,h,Ae.newNoDocument(h,rn.min()))}else Yt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,h)=>{const _=this.Yt(h);if(_){if(a.current&&cn(_.target)){const E=new _t(_.target.path);null!==this.Lt.get(E)||this.te(h,E)||this.Qt(h,E,Ae.newNoDocument(E,e))}a.St&&(t.set(h,a.Ct()),a.xt())}});let r=Vn();this.qt.forEach((a,h)=>{let _=!0;h.forEachWhile(E=>{const D=this.Yt(E);return!D||2===D.purpose||(_=!1,!1)}),_&&(r=r.add(a))}),this.Lt.forEach((a,h)=>h.setReadTime(e));const s=new uD(e,t,this.Ut,this.Lt,r);return this.Lt=yc(),this.qt=iR(),this.Ut=new A(En),s}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new rR,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new A(En),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ht("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new rR),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function iR(){return new m(_t.comparator)}function sR(){return new m(_t.comparator)}const aL={asc:"ASCENDING",desc:"DESCENDING"},uL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cL={and:"AND",or:"OR"};class lL{constructor(e,t){this.databaseId=e,this.wt=t}}function tE(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oR(n,e){return n.wt?e.toBase64():e.toUint8Array()}function dL(n,e){return tE(n,e.toTimestamp())}function Vs(n){return Yt(!!n),rn.fromTimestamp(function(e){const t=Kd(e);return new ai(t.seconds,t.nanos)}(n))}function mA(n,e){return(t=n,new Fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function aR(n){const e=Fn.fromString(n);return Yt(mR(e)),e}function lD(n,e){return mA(n.databaseId,e.path)}function mf(n,e){const t=aR(e);if(t.get(1)!==n.databaseId.projectId)throw new at(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new at(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _t(cR(t))}function _A(n,e){return mA(n.databaseId,e)}function uR(n){const e=aR(n);return 4===e.length?Fn.emptyPath():cR(e)}function dD(n){return new Fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cR(n){return Yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lR(n,e,t){return{name:lD(n,e),fields:t.value.mapValue.fields}}function dR(n,e,t){const r=mf(n,e.name),s=Vs(e.updateTime),a=e.createTime?Vs(e.createTime):rn.min(),h=new te({mapValue:{fields:e.fields}}),_=Ae.newFoundDocument(r,s,a,h);return t&&_.setHasCommittedMutations(),t?_.setHasCommittedMutations():_}function hD(n,e){let t;if(e instanceof Xb)t={update:lR(n,e.key,e.value)};else if(e instanceof eE)t={delete:lD(n,e.key)};else if(e instanceof Jp)t={update:lR(n,e.key,e.data),updateMask:yL(e.fieldMask)};else{if(!(e instanceof gA))return Ht();t={verify:lD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const h=a.transform;if(h instanceof Jb)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Uv)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof $v)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Qb)return{fieldPath:a.field.canonicalString(),increment:h.gt};throw Ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:dL(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ht()),t;var s}function vA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ji.updateTime(Vs(s.updateTime)):void 0!==s.exists?ji.exists(s.exists):ji.none():ji.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(a,h){let _=null;"setToServerValue"in h?(Yt("REQUEST_TIME"===h.setToServerValue),_=new Jb):"appendMissingElements"in h?_=new Uv(h.appendMissingElements.values||[]):"removeAllFromArray"in h?_=new $v(h.removeAllFromArray.values||[]):"increment"in h?_=new Qb(a,h.increment):Ht();const E=bi.fromServerFormat(h.fieldPath);return new iD(E,_)}(n,s)):[];var s;if(e.update){const s=mf(n,e.update.name),a=new te({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new G((e.updateMask.fieldPaths||[]).map(D=>bi.fromServerFormat(D)));return new Jp(s,a,h,t,r)}return new Xb(s,a,t,r)}if(e.delete){const s=mf(n,e.delete);return new eE(s,t)}if(e.verify){const s=mf(n,e.verify);return new gA(s,t)}return Ht()}function hR(n,e){return{documents:[_A(n,e.path)]}}function yA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_A(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_A(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(E){if(0!==E.length)return gR(br.create(E,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(E){if(0!==E.length)return E.map(D=>{return{field:nE((x=D).field),direction:mL(x.dir)};var x})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const h=(D=e.limit,n.wt||qb(D)?D:{value:D});var D,_,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function fR(n){let e=uR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Yt(1===r);const x=t.from[0];x.allDescendants?s=x.collectionId:e=e.child(x.collectionId)}let a=[];t.where&&(a=function(x){const L=pR(x);return L instanceof br&&nA(L)?L.getFilters():[L]}(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new l(rE((L=x).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction));var L}));let _=null;t.limit&&(_=function(x){let L;return L="object"==typeof x?x.value:x,qb(L)?null:L}(t.limit));let E=null;var x;t.startAt&&(E=new Ul((x=t.startAt).values||[],!!x.before));let D=null;return t.endAt&&(D=function(x){return new Ul(x.values||[],!x.before)}(t.endAt)),cA(e,s,h,a,_,"F",E,D)}function pR(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rE(e.unaryFilter.field);return Zn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=rE(e.unaryFilter.field);return Zn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rE(e.unaryFilter.field);return Zn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=rE(e.unaryFilter.field);return Zn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}(n):void 0!==n.fieldFilter?Zn.create(rE((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return br.create(e.compositeFilter.filters.map(t=>pR(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ht()}}(e.compositeFilter.op))}(n):Ht();var e}function mL(n){return aL[n]}function _L(n){return uL[n]}function vL(n){return cL[n]}function nE(n){return{fieldPath:n.canonicalString()}}function rE(n){return bi.fromServerFormat(n.fieldPath)}function gR(n){return n instanceof Zn?function(e){if("=="===e.op){if(Xw(e.value))return{unaryFilter:{field:nE(e.field),op:"IS_NAN"}};if(Qw(e.value))return{unaryFilter:{field:nE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xw(e.value))return{unaryFilter:{field:nE(e.field),op:"IS_NOT_NAN"}};if(Qw(e.value))return{unaryFilter:{field:nE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nE(e.field),op:_L(e.op),value:e.value}}}(n):n instanceof br?function(e){const t=e.getFilters().map(r=>gR(r));return 1===t.length?t[0]:{compositeFilter:{op:vL(e.op),filters:t}}}(n):Ht()}function yL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Au(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_R(e)),e=bL(n.get(t),e);return _R(e)}function bL(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function _R(n){return n+"\x01\x01"}function _f(n){const e=n.length;if(Yt(e>=2),2===e)return Yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Fn.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const h=n.indexOf("\x01",a);switch((h<0||h>t)&&Ht(),n.charAt(h+1)){case"\x01":const _=n.substring(a,h);let E;0===s.length?E=_:(s+=_,E=s,s=""),r.push(E);break;case"\x10":s+=n.substring(a,h),s+="\0";break;case"\x11":s+=n.substring(a,h+1);break;default:Ht()}a=h+2}return new Fn(r)}const vR=["userId","batchId"];function F1(n,e){return[n,Au(e)]}function yR(n,e,t){return[n,Au(e),t]}const EL={},CL=["prefixPath","collectionGroup","readTime","documentId"],wL=["prefixPath","collectionGroup","documentId"],DL=["collectionGroup","readTime","prefixPath","documentId"],TL=["canonicalId","targetId"],SL=["targetId","path"],IL=["path","targetId"],AL=["collectionId","parent"],xL=["indexId","uid"],NL=["uid","sequenceNumber"],ML=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RL=["indexId","uid","orderedDocumentKey"],OL=["userId","collectionPath","documentId"],kL=["userId","collectionPath","largestBatchId"],PL=["userId","collectionGroup","largestBatchId"],bR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FL=[...bR,"documentOverlays"],ER=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CR=ER,LL=[...CR,"indexConfiguration","indexState","indexEntries"];class bA extends jb{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Vo(n,e){const t=It(n);return vc.M(t.se,e)}class EA{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&XF(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sD(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sD(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eR();return this.mutations.forEach(s=>{const a=e.get(s.key),h=a.overlayedDocument;let _=this.applyToLocalView(h,a.mutatedFields);_=t.has(s.key)?null:_;const E=qM(h,_);null!==E&&r.set(s.key,E),h.isValidDocument()||h.convertToNoDocument(rn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vn())}isEqual(e){return this.batchId===e.batchId&&Gp(this.mutations,e.mutations,(t,r)=>WM(t,r))&&Gp(this.baseMutations,e.baseMutations,(t,r)=>WM(t,r))}}class CA{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Yt(e.mutations.length===r.length);let s=rL;const a=e.mutations;for(let h=0;h<a.length;h++)s=s.insert(a[h].key,r[h].version);return new CA(e,t,r,s)}}class wA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $m{constructor(e,t,r,s,a=rn.min(),h=rn.min(),_=Bs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=_}withSequenceNumber(e){return new $m(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new $m(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new $m(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wR{constructor(e){this.ie=e}}function DR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:L1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:lD(s=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:tE(s,a.version.toTimestamp()),createTime:tE(s,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jv(e.version)};else{if(!e.isUnknownDocument())return Ht();r.unknownDocument={path:t.path.toArray(),version:jv(e.version)}}var s,a;return r}function L1(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jv(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hv(n){const e=new ai(n.seconds,n.nanoseconds);return rn.fromTimestamp(e)}function Gv(n,e){const t=(e.baseMutations||[]).map(a=>vA(n.ie,a));for(let a=0;a<e.mutations.length-1;++a){const h=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(h.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>vA(n.ie,a)),s=ai.fromMillis(e.localWriteTimeMs);return new EA(e.batchId,s,t,r)}function fD(n){const e=Hv(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hv(n.lastLimboFreeSnapshotVersion):rn.min();let r;var s;return void 0!==n.query.documents?(Yt(1===(s=n.query).documents.length),r=Iu(Yb(uR(s.documents[0])))):r=Iu(fR(n.query)),new $m(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Bs.fromBase64String(n.resumeToken))}function TR(n,e){const t=jv(e.snapshotVersion),r=jv(e.lastLimboFreeSnapshotVersion);let s;s=cn(e.target)?hR(n.ie,e.target):yA(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Et(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function DA(n){const e=fR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?N1(e,e.limit,"L"):e}function TA(n,e){return new wA(e.largestBatchId,vA(n.ie,e.overlayMutation))}function SR(n,e){const t=e.path.lastSegment();return[n,Au(e.path.popLast()),t]}function IR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jv(r.readTime),documentKey:Au(r.documentKey.path),largestBatchId:r.largestBatchId}}class VL{getBundleMetadata(e,t){return AR(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Hv(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return AR(e).put({bundleId:(r=t).id,createTime:jv(Vs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return xR(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:DA(s.bundledQuery),readTime:Hv(s.readTime)};var s})}saveNamedQuery(e,t){return xR(e).put({name:(r=t).name,readTime:jv(Vs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AR(n){return Vo(n,"bundles")}function xR(n){return Vo(n,"namedQueries")}class B1{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new B1(e,t.uid||"")}getOverlay(e,t){return pD(e).get(SR(this.userId,t)).next(r=>r?TA(this.yt,r):null)}getOverlays(e,t){const r=gf();return Ue.forEach(t,s=>this.getOverlay(e,s).next(a=>{null!==a&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((a,h)=>{const _=new wA(t,h);s.push(this.oe(e,_))}),Ue.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(h=>s.add(Au(h.getCollectionPath())));const a=[];return s.forEach(h=>{const _=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);a.push(pD(e).Y("collectionPathOverlayIndex",_))}),Ue.waitFor(a)}getOverlaysForCollection(e,t,r){const s=gf(),a=Au(t),h=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return pD(e).W("collectionPathOverlayIndex",h).next(_=>{for(const E of _){const D=TA(this.yt,E);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const a=gf();let h;const _=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pD(e).Z({index:"collectionGroupOverlayIndex",range:_},(E,D,x)=>{const L=TA(this.yt,D);a.size()<s||L.largestBatchId===h?(a.set(L.getKey(),L),h=L.largestBatchId):x.done()}).next(()=>a)}oe(e,t){return pD(e).put(function(r,s,a){const[h,_,E]=SR(s,a.mutation.key);return{userId:s,collectionPath:_,documentId:E,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:hD(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function pD(n){return Vo(n,"documentOverlays")}class qv{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(xr(e.integerValue));else if("doubleValue"in e){const r=xr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Wb(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(pf(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?D1(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Ht()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const s of Object.keys(r))this.de(s,t),this.ce(r[s],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const s of r)this.ce(s,t)}me(e,t){this.he(t,37),_t.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function UL(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function NR(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const a=UL(255&t[s]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}qv.Ie=new qv;class $L{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=t.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=t.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const t=this.De(e),r=NR(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}xe(e){const t=this.De(e),r=NR(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class jL{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class HL{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class gD{constructor(){this.$e=new $L,this.Be=new jL(this.$e),this.Le=new HL(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Wv{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wv(this.indexId,this.documentKey,this.arrayValue,r)}}function jm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MR(n.arrayValue,e.arrayValue),0!==t?t:(t=MR(n.directionalValue,e.directionalValue),0!==t?t:_t.comparator(n.documentKey,e.documentKey)))}function MR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class GL{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Yt(e.collectionGroup===this.collectionId);const t=y1(e);if(void 0!==t&&!this.We(t))return!1;const r=Wp(e);let s=0,a=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Qe){const h=r[s];if(!this.ze(this.Qe,h)||!this.He(this.Ke[a++],h))return!1;++s}for(;s<r.length;++s){const h=r[s];if(a>=this.Ke.length||!this.He(this.Ke[a++],h))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function RR(n){var e,t;if(Yt(n instanceof Zn||n instanceof br),n instanceof Zn){if(n instanceof uA){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Zn.create(n.field,"==",a)))||[];return br.create(s,"or")}return n}const r=n.filters.map(s=>RR(s));return br.create(r,n.op)}function qL(n){if(0===n.getFilters().length)return[];const e=AA(RR(n));return Yt(OR(e)),SA(e)||IA(e)?[e]:e.getFilters()}function SA(n){return n instanceof Zn}function IA(n){return n instanceof br&&nA(n)}function OR(n){return SA(n)||IA(n)||function(e){if(e instanceof br&&nD(e)){for(const t of e.getFilters())if(!SA(t)&&!IA(t))return!1;return!0}return!1}(n)}function AA(n){if(Yt(n instanceof Zn||n instanceof br),n instanceof Zn)return n;if(1===n.filters.length)return AA(n.filters[0]);const e=n.filters.map(r=>AA(r));let t=br.create(e,n.op);return t=V1(t),OR(t)?t:(Yt(t instanceof br),Yt(Vm(t)),Yt(t.filters.length>1),t.filters.reduce((r,s)=>xA(r,s)))}function xA(n,e){let t;return Yt(n instanceof Zn||n instanceof br),Yt(e instanceof Zn||e instanceof br),t=n instanceof Zn?e instanceof Zn?br.create([n,e],"and"):kR(n,e):e instanceof Zn?kR(e,n):function(r,s){if(Yt(r.filters.length>0&&s.filters.length>0),Vm(r)&&Vm(s))return oA(r,s.getFilters());const a=nD(r)?r:s,h=nD(r)?s:r,_=a.filters.map(E=>xA(E,h));return br.create(_,"or")}(n,e),V1(t)}function kR(n,e){if(Vm(e))return oA(e,n.getFilters());{const t=e.filters.map(r=>xA(n,r));return br.create(t,"or")}}function V1(n){if(Yt(n instanceof Zn||n instanceof br),n instanceof Zn)return n;const e=n.getFilters();if(1===e.length)return V1(e[0]);if(rA(n))return n;const t=e.map(s=>V1(s)),r=[];return t.forEach(s=>{s instanceof Zn?r.push(s):s instanceof br&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:br.create(r,n.op)}class WL{constructor(){this.Je=new NA}addToCollectionParentIndex(e,t){return this.Je.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return Ue.resolve()}deleteFieldIndex(e,t){return Ue.resolve()}getDocumentsMatchingTarget(e,t){return Ue.resolve(null)}getIndexType(e,t){return Ue.resolve(0)}getFieldIndexes(e,t){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,t){return Ue.resolve(Tu.min())}getMinOffsetFromCollectionGroup(e,t){return Ue.resolve(Tu.min())}updateCollectionGroup(e,t,r){return Ue.resolve()}updateIndexEntries(e,t){return Ue.resolve()}}class NA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new A(Fn.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new A(Fn.comparator)).toArray()}}const U1=new Uint8Array(0);class zL{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new NA,this.Xe=new Um(r=>Et(r),(r,s)=>$t(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Au(s)};return PR(e).put(a)}return Ue.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[_1(t),""],!1,!0);return PR(e).W(s).next(a=>{for(const h of a){if(h.collectionId!==t)break;r.push(_f(h.parent))}return r})}addFieldIndex(e,t){const r=$1(e),s={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(_=>[_.fieldPath.canonicalString(),_.kind])};var h;delete s.indexId;const a=r.add(s);if(t.indexState){const h=_D(e);return a.next(_=>{h.put(IR(_,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=$1(e),s=_D(e),a=mD(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=mD(e);let s=!0;const a=new Map;return Ue.forEach(this.Ze(t),h=>this.tn(e,h).next(_=>{s&&(s=!!_),a.set(h,_)})).next(()=>{if(s){let h=Vn();const _=[];return Ue.forEach(a,(E,D)=>{var x;ht("IndexedDbIndexManager",`Using index ${x=E,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Vt=>`${Vt.fieldPath}:${Vt.kind}`).join(",")}`} to execute ${Et(t)}`);const L=function(Vt,Tt){const wt=y1(Tt);if(void 0===wt)return null;for(const Pt of ut(Vt,wt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(D,E),W=function(Vt,Tt){const wt=new Map;for(const Pt of Wp(Tt))for(const An of ut(Vt,Pt.fieldPath))switch(An.op){case"==":case"in":wt.set(Pt.fieldPath.canonicalString(),An.value);break;case"not-in":case"!=":return wt.set(Pt.fieldPath.canonicalString(),An.value),Array.from(wt.values())}return null}(D,E),se=function(Vt,Tt){const wt=[];let Pt=!0;for(const An of Wp(Tt)){const ar=0===An.kind?Cn(Vt,An.fieldPath,Vt.startAt):ui(Vt,An.fieldPath,Vt.startAt);wt.push(ar.value),Pt&&(Pt=ar.inclusive)}return new Ul(wt,Pt)}(D,E),_e=function(Vt,Tt){const wt=[];let Pt=!0;for(const An of Wp(Tt)){const ar=0===An.kind?ui(Vt,An.fieldPath,Vt.endAt):Cn(Vt,An.fieldPath,Vt.endAt);wt.push(ar.value),Pt&&(Pt=ar.inclusive)}return new Ul(wt,Pt)}(D,E),Re=this.en(E,D,se),ze=this.en(E,D,_e),Ct=this.nn(E,D,W),St=this.sn(E.indexId,L,Re,se.inclusive,ze,_e.inclusive,Ct);return Ue.forEach(St,Vt=>r.J(Vt,t.limit).next(Tt=>{Tt.forEach(wt=>{const Pt=_t.fromSegments(wt.documentKey);h.has(Pt)||(h=h.add(Pt),_.push(Pt))})}))}).next(()=>_)}return Ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:qL(br.create(e.filters,"and")).map(r=>ft(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,s,a,h,_){const E=(null!=t?t.length:1)*Math.max(r.length,a.length),D=E/(null!=t?t.length:1),x=[];for(let L=0;L<E;++L){const W=t?this.rn(t[L/D]):U1,se=this.on(e,W,r[L%D],s),_e=this.un(e,W,a[L%D],h),Re=_.map(ze=>this.on(e,W,ze,!0));x.push(...this.createRange(se,_e,Re))}return x}on(e,t,r,s){const a=new Wv(e,_t.empty(),t,r);return s?a:a.Ue()}un(e,t,r,s){const a=new Wv(e,_t.empty(),t,r);return s?a.Ue():a}tn(e,t){const r=new GL(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(a=>{let h=null;for(const _ of a)r.je(_)&&(!h||_.fields.length>h.fields.length)&&(h=_);return h})}getIndexType(e,t){let r=2;const s=this.Ze(t);return Ue.forEach(s,a=>this.tn(e,a).next(h=>{h?0!==r&&h.fields.length<function(_){let E=new A(bi.comparator),D=!1;for(const x of _.filters)for(const L of x.getFlattenedFilters())L.field.isKeyField()||("array-contains"===L.op||"array-contains-any"===L.op?D=!0:E=E.add(L.field));for(const x of _.orderBy)x.field.isKeyField()||(E=E.add(x.field));return E.size+(D?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}cn(e,t){const r=new gD;for(const s of Wp(e)){const a=t.data.field(s.fieldPath);if(null==a)return null;const h=r.qe(s.kind);qv.Ie.ue(a,h)}return r.Fe()}rn(e){const t=new gD;return qv.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new gD;return qv.Ie.ue(Yp(this.databaseId,t),r.qe(function(s){const a=Wp(s);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let s=[];s.push(new gD);let a=0;for(const h of Wp(e)){const _=r[a++];for(const E of s)if(this.hn(t,h.fieldPath)&&Fv(_))s=this.ln(s,h,_);else{const D=E.qe(h.kind);qv.Ie.ue(_,D)}}return this.fn(s)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const s=[...e],a=[];for(const h of r.arrayValue.values||[])for(const _ of s){const E=new gD;E.seed(_.Fe()),qv.Ie.ue(h,E.qe(t.kind)),a.push(E)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof Zn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$1(e),s=_D(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const h=[];return Ue.forEach(a,_=>s.get([_.indexId,this.uid]).next(E=>{h.push(function(D,x){const L=x?new Fm(x.sequenceNumber,new Tu(Hv(x.readTime),new _t(_f(x.documentKey)),x.largestBatchId)):Fm.empty(),W=D.fields.map(([se,_e])=>new Ub(bi.fromServerFormat(se),_e));return new Vb(D.indexId,D.collectionGroup,W,L)}(_,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==a?a:En(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=$1(e),a=_D(e);return this.dn(e).next(h=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(_=>Ue.forEach(_,E=>a.put(IR(E.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return Ue.forEach(t,(s,a)=>{const h=r.get(s.collectionGroup);return(h?Ue.resolve(h):this.getFieldIndexes(e,s.collectionGroup)).next(_=>(r.set(s.collectionGroup,_),Ue.forEach(_,E=>this._n(e,s,E).next(D=>{const x=this.wn(a,E);return D.isEqual(x)?Ue.resolve():this.mn(e,a,E,D,x)}))))})}gn(e,t,r,s){return mD(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,s){return mD(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const s=mD(e);let a=new A(jm);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(h,_)=>{a=a.add(new Wv(r.indexId,t,_.arrayValue,_.directionalValue))}).next(()=>a)}wn(e,t){let r=new A(jm);const s=this.cn(t,e);if(null==s)return r;const a=y1(t);if(null!=a){const h=e.data.field(a.fieldPath);if(Fv(h))for(const _ of h.arrayValue.values||[])r=r.add(new Wv(t.indexId,e.key,this.rn(_),s))}else r=r.add(new Wv(t.indexId,e.key,U1,s));return r}mn(e,t,r,s,a){ht("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(_,E,D,x,L){const W=_.getIterator(),se=E.getIterator();let _e=B(W),Re=B(se);for(;_e||Re;){let ze=!1,Ct=!1;if(_e&&Re){const St=D(_e,Re);St<0?Ct=!0:St>0&&(ze=!0)}else null!=_e?Ct=!0:ze=!0;ze?(x(Re),Re=B(se)):Ct?(L(_e),_e=B(W)):(_e=B(W),Re=B(se))}}(s,a,jm,_=>{h.push(this.gn(e,t,r,_))},_=>{h.push(this.yn(e,t,r,_))}),Ue.waitFor(h)}dn(e){let t=1;return _D(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,a)=>{a.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,_)=>jm(h,_)).filter((h,_,E)=>!_||0!==jm(h,E[_-1]));const s=[];s.push(e);for(const h of r){const _=jm(h,e),E=jm(h,t);if(0===_)s[0]=e.Ue();else if(_>0&&E<0)s.push(h),s.push(h.Ue());else if(E>0)break}s.push(t);const a=[];for(let h=0;h<s.length;h+=2){if(this.pn(s[h],s[h+1]))return[];a.push(IDBKeyRange.bound([s[h].indexId,this.uid,s[h].arrayValue,s[h].directionalValue,U1,[]],[s[h+1].indexId,this.uid,s[h+1].arrayValue,s[h+1].directionalValue,U1,[]]))}return a}pn(e,t){return jm(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(FR)}getMinOffset(e,t){return Ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(s=>s||Ht())).next(FR)}}function PR(n){return Vo(n,"collectionParents")}function mD(n){return Vo(n,"indexEntries")}function $1(n){return Vo(n,"indexConfiguration")}function _D(n){return Vo(n,"indexState")}function FR(n){Yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;$b(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Tu(e.readTime,e.documentKey,t)}const LR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bc{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bc(e,bc.DEFAULT_COLLECTION_PERCENTILE,bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BR(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),a=[],h=IDBKeyRange.only(t.batchId);let _=0;const E=r.Z({range:h},(x,L,W)=>(_++,W.delete()));a.push(E.next(()=>{Yt(1===_)}));const D=[];for(const x of t.mutations){const L=yR(e,x.key.path,t.batchId);a.push(s.delete(L)),D.push(x.key)}return Ue.waitFor(a).next(()=>D)}function j1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ht();e=n.noDocument}return JSON.stringify(e).length}bc.DEFAULT_COLLECTION_PERCENTILE=10,bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bc.DEFAULT=new bc(41943040,bc.DEFAULT_COLLECTION_PERCENTILE,bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bc.DISABLED=new bc(-1,0,0);class H1{constructor(e,t,r,s){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,t,r,s){Yt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new H1(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hm(e).Z({index:"userMutationsIndex",range:r},(s,a,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const a=iE(e),h=Hm(e);return h.add({}).next(_=>{Yt("number"==typeof _);const E=new EA(_,t,r,s),D=function(W,se,_e){const Re=_e.baseMutations.map(Ct=>hD(W.ie,Ct)),ze=_e.mutations.map(Ct=>hD(W.ie,Ct));return{userId:se,batchId:_e.batchId,localWriteTimeMs:_e.localWriteTime.toMillis(),baseMutations:Re,mutations:ze}}(this.yt,this.userId,E),x=[];let L=new A((W,se)=>En(W.canonicalString(),se.canonicalString()));for(const W of s){const se=yR(this.userId,W.key.path,_);L=L.add(W.key.path.popLast()),x.push(h.put(D)),x.push(a.put(se,EL))}return L.forEach(W=>{x.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.In[_]=E.keys()}),Ue.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return Hm(e).get(t).next(r=>r?(Yt(r.userId===this.userId),Gv(this.yt,r)):null)}Tn(e,t){return this.In[t]?Ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Hm(e).Z({index:"userMutationsIndex",range:s},(h,_,E)=>{_.userId===this.userId&&(Yt(_.batchId>=r),a=Gv(this.yt,_)),E.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hm(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,a,h)=>{r=a.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hm(e).W("userMutationsIndex",t).next(r=>r.map(s=>Gv(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=F1(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return iE(e).Z({range:s},(h,_,E)=>{const[D,x,L]=h,W=_f(x);if(D===this.userId&&t.path.isEqual(W))return Hm(e).get(L).next(se=>{if(!se)throw Ht();Yt(se.userId===this.userId),a.push(Gv(this.yt,se))});E.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new A(En);const s=[];return t.forEach(a=>{const h=F1(this.userId,a.path),_=IDBKeyRange.lowerBound(h),E=iE(e).Z({range:_},(D,x,L)=>{const[W,se,_e]=D,Re=_f(se);W===this.userId&&a.path.isEqual(Re)?r=r.add(_e):L.done()});s.push(E)}),Ue.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=F1(this.userId,r),h=IDBKeyRange.lowerBound(a);let _=new A(En);return iE(e).Z({range:h},(E,D,x)=>{const[L,W,se]=E,_e=_f(W);L===this.userId&&r.isPrefixOf(_e)?_e.length===s&&(_=_.add(se)):x.done()}).next(()=>this.En(e,_))}En(e,t){const r=[],s=[];return t.forEach(a=>{s.push(Hm(e).get(a).next(h=>{if(null===h)throw Ht();Yt(h.userId===this.userId),r.push(Gv(this.yt,h))}))}),Ue.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return BR(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Ue.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return iE(e).Z({range:r},(a,h,_)=>{if(a[0]===this.userId){const E=_f(a[1]);s.push(E)}else _.done()}).next(()=>{Yt(0===s.length)})})}containsKey(e,t){return VR(e,this.userId,t)}Rn(e){return UR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VR(n,e,t){const r=F1(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let h=!1;return iE(n).Z({range:a,X:!0},(_,E,D)=>{const[x,L,W]=_;x===e&&L===s&&(h=!0),D.done()}).next(()=>h)}function Hm(n){return Vo(n,"mutations")}function iE(n){return Vo(n,"documentMutations")}function UR(n){return Vo(n,"mutationQueues")}class zv{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new zv(0)}static vn(){return new zv(-1)}}class KL{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new zv(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>rn.fromTimestamp(new ai(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sE(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Yt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const a=[];return sE(e).Z((h,_)=>{const E=fD(_);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(s++,a.push(this.removeTargetData(e,E)))}).next(()=>Ue.waitFor(a)).next(()=>s)}forEachTarget(e,t){return sE(e).Z((r,s)=>{const a=fD(s);t(a)})}Vn(e){return $R(e).get("targetGlobalKey").next(t=>(Yt(null!==t),t))}Sn(e,t){return $R(e).put("targetGlobalKey",t)}Dn(e,t){return sE(e).put(TR(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Et(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return sE(e).Z({range:s,index:"queryTargetsIndex"},(h,_,E)=>{const D=fD(_);$t(t,D.target)&&(a=D,E.done())}).next(()=>a)}addMatchingKeys(e,t,r){const s=[],a=Gm(e);return t.forEach(h=>{const _=Au(h.path);s.push(a.put({targetId:r,path:_})),s.push(this.referenceDelegate.addReference(e,r,h))}),Ue.waitFor(s)}removeMatchingKeys(e,t,r){const s=Gm(e);return Ue.forEach(t,a=>{const h=Au(a.path);return Ue.waitFor([s.delete([r,h]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Gm(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Gm(e);let a=Vn();return s.Z({range:r,X:!0},(h,_,E)=>{const D=_f(h[1]),x=new _t(D);a=a.add(x)}).next(()=>a)}containsKey(e,t){const r=Au(t.path),s=IDBKeyRange.bound([r],[_1(r)],!1,!0);let a=0;return Gm(e).Z({index:"documentTargetsIndex",X:!0,range:s},([h,_],E,D)=>{0!==h&&(a++,D.done())}).next(()=>a>0)}ne(e,t){return sE(e).get(t).next(r=>r?fD(r):null)}}function sE(n){return Vo(n,"targets")}function $R(n){return Vo(n,"targetGlobal")}function Gm(n){return Vo(n,"targetDocuments")}function jR([n,e],[t,r]){const s=En(n,t);return 0===s?En(e,r):s}class ZL{constructor(e){this.xn=e,this.buffer=new A(jR),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ht("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,qe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){zd(r)?ht("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Wd(r)}yield t.Fn(3e5)}))}}class JL{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ue.resolve(Su.at);const r=new ZL(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(LR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LR):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,s,a,h,_,E,D;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(L=>(L>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${L}`),s=this.params.maximumSequenceNumbersToCollect):s=L,h=Date.now(),this.nthSequenceNumber(e,s))).next(L=>(r=L,_=Date.now(),this.removeTargets(e,r,t))).next(L=>(a=L,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(L=>(D=Date.now(),l1()<=ks.in.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${s} in `+(_-h)+`ms\n\tRemoved ${a} targets in `+(E-_)+`ms\n\tRemoved ${L} documents in `+(D-E)+`ms\nTotal Duration: ${D-x}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:L})))}}class QL{constructor(e,t){this.db=e,this.garbageCollector=new JL(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return G1(e,r)}removeReference(e,t,r){return G1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return G1(e,t)}Gn(e,t){return function(r,s){let a=!1;return UR(r).tt(h=>VR(r,h,s).next(_=>(_&&(a=!0),Ue.resolve(!_)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.Kn(e,(h,_)=>{if(_<=t){const E=this.Gn(e,h).next(D=>{if(!D)return a++,r.getEntry(e,h).next(()=>(r.removeEntry(h,rn.min()),Gm(e).delete([0,Au(h.path)])))});s.push(E)}}).next(()=>Ue.waitFor(s)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return G1(e,t)}Kn(e,t){const r=Gm(e);let s,a=Su.at;return r.Z({index:"documentTargetsIndex"},([h,_],{path:E,sequenceNumber:D})=>{0===h?(a!==Su.at&&t(new _t(_f(s)),a),a=D,s=E):a=Su.at}).next(()=>{a!==Su.at&&t(new _t(_f(s)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function G1(n,e){return Gm(n).put((r=n.currentSequenceNumber,{targetId:0,path:Au(e.path),sequenceNumber:r}));var r}class HR{constructor(){this.changes=new Um(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ae.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XL{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Kv(e).put(r)}removeEntry(e,t,r){return Kv(e).delete(function(s,a){const h=s.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],L1(a),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Ae.newInvalidDocument(t);return Kv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vD(t))},(s,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Ae.newInvalidDocument(t)};return Kv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vD(t))},(s,a)=>{r={document:this.jn(t,a),size:j1(a)}}).next(()=>r)}getEntries(e,t){let r=yc();return this.zn(e,t,(s,a)=>{const h=this.jn(s,a);r=r.insert(s,h)}).next(()=>r)}Hn(e,t){let r=yc(),s=new m(_t.comparator);return this.zn(e,t,(a,h)=>{const _=this.jn(a,h);r=r.insert(a,_),s=s.insert(a,j1(h))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return Ue.resolve();let s=new A(zR);t.forEach(E=>s=s.add(E));const a=IDBKeyRange.bound(vD(s.first()),vD(s.last())),h=s.getIterator();let _=h.getNext();return Kv(e).Z({index:"documentKeyIndex",range:a},(E,D,x)=>{const L=_t.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;_&&zR(_,L)<0;)r(_,null),_=h.getNext();_&&_.isEqual(L)&&(r(_,D),_=h.hasNext()?h.getNext():null),_?x.j(vD(_)):x.done()}).next(()=>{for(;_;)r(_,null),_=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),L1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kv(e).W(IDBKeyRange.bound(s,a,!0)).next(h=>{let _=yc();for(const E of h){const D=this.jn(_t.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);_=_.insert(D.key,D)}return _})}getAllFromCollectionGroup(e,t,r,s){let a=yc();const h=WR(t,r),_=WR(t,Tu.max());return Kv(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,_,!0)},(E,D,x)=>{const L=this.jn(_t.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);a=a.insert(L.key,L),a.size===s&&x.done()}).next(()=>a)}newChangeBuffer(e){return new eB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qR(e).get("remoteDocumentGlobalKey").next(t=>(Yt(!!t),t))}Qn(e,t){return qR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function BL(n,e){let t;if(e.document)t=dR(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_t.fromSegments(e.noDocument.path),s=Hv(e.noDocument.readTime);t=Ae.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ht();{const r=_t.fromSegments(e.unknownDocument.path),s=Hv(e.unknownDocument.version);t=Ae.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new ai(r[0],r[1]);return rn.fromTimestamp(s)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(rn.min()))return r}return Ae.newInvalidDocument(e)}}function GR(n){return new XL(n)}class eB extends HR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Um(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new A((a,h)=>En(a.canonicalString(),h.canonicalString()));return this.changes.forEach((a,h)=>{const _=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,_.readTime)),h.isValidDocument()){const E=DR(this.Yn.yt,h);s=s.add(a.path.popLast());const D=j1(E);r+=D-_.size,t.push(this.Yn.addEntry(e,a,E))}else if(r-=_.size,this.trackRemovals){const E=DR(this.Yn.yt,h.convertToNoDocument(rn.min()));t.push(this.Yn.addEntry(e,a,E))}}),s.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),Ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((a,h)=>{this.Xn.set(a,{size:h,readTime:r.get(a).readTime})}),r))}}function qR(n){return Vo(n,"remoteDocumentGlobal")}function Kv(n){return Vo(n,"remoteDocumentsV14")}function vD(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WR(n,e){const t=e.documentKey.path.toArray();return[n,L1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zR(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=En(t[a],r[a]),s)return s;return s=En(t.length,r.length),s||(s=En(t[t.length-2],r[r.length-2]),s||En(t[t.length-1],r[r.length-1]))}class tB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&sD(r.mutation,s,G.empty(),ai.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vn()){const s=gf();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let h=oD();return a.forEach((_,E)=>{h=h.insert(_,E.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=gf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vn()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((h,_)=>{t.set(h,_)})})}computeViews(e,t,r,s){let a=yc();const h=aD(),_=aD();return t.forEach((E,D)=>{const x=r.get(D.key);s.has(D.key)&&(void 0===x||x.mutation instanceof Jp)?a=a.insert(D.key,D):void 0!==x&&(h.set(D.key,x.mutation.getFieldMask()),sD(x.mutation,D,x.mutation.getFieldMask(),ai.now()))}),this.recalculateAndSaveOverlays(e,a).next(E=>(E.forEach((D,x)=>h.set(D,x)),t.forEach((D,x)=>{var L;return _.set(D,new tB(x,null!==(L=h.get(D))&&void 0!==L?L:null))}),_))}recalculateAndSaveOverlays(e,t){const r=aD();let s=new m((h,_)=>h-_),a=Vn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const _ of h)_.keys().forEach(E=>{const D=t.get(E);if(null===D)return;let x=r.get(E)||G.empty();x=_.applyToLocalView(D,x),r.set(E,x);const L=(s.get(_.batchId)||Vn()).add(E);s=s.insert(_.batchId,L)})}).next(()=>{const h=[],_=s.getReverseIterator();for(;_.hasNext();){const E=_.getNext(),D=E.key,x=E.value,L=eR();x.forEach(W=>{if(!a.has(W)){const se=qM(t.get(W),r.get(W));null!==se&&L.set(W,se),a=a.add(W)}}),h.push(this.documentOverlayCache.saveOverlays(e,D,L))}return Ue.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return _t.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):dA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const h=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):Ue.resolve(gf());let _=-1,E=a;return h.next(D=>Ue.forEach(D,(x,L)=>(_<L.largestBatchId&&(_=L.largestBatchId),a.get(x)?Ue.resolve():this.remoteDocumentCache.getEntry(e,x).next(W=>{E=E.insert(x,W)}))).next(()=>this.populateOverlays(e,D,a)).next(()=>this.computeViews(e,E,D,Vn())).next(x=>({batchId:_,changes:XM(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _t(t)).next(r=>{let s=oD();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let a=oD();return this.indexManager.getCollectionParents(e,s).next(h=>Ue.forEach(h,_=>{const E=(D=t,x=_.child(s),new Er(x,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,x;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(D=>{D.forEach((x,L)=>{a=a.insert(x,L)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(s=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((_,E)=>{const D=E.getKey();null===s.get(D)&&(s=s.insert(D,Ae.newInvalidDocument(D)))});let h=oD();return s.forEach((_,E)=>{const D=a.get(_);void 0!==D&&sD(D.mutation,E,G.empty(),ai.now()),pA(t,E)&&(h=h.insert(_,E))}),h})}}class nB{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Vs(r.createTime)}),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:DA(r.bundledQuery),readTime:Vs(r.readTime)}),Ue.resolve();var r}}class rB{constructor(){this.overlays=new m(_t.comparator),this.es=new Map}getOverlay(e,t){return Ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gf();return Ue.forEach(t,s=>this.getOverlay(e,s).next(a=>{null!==a&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.oe(e,t,a)}),Ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),Ue.resolve()}getOverlaysForCollection(e,t,r){const s=gf(),a=t.length+1,h=new _t(t.child("")),_=this.overlays.getIteratorFrom(h);for(;_.hasNext();){const E=_.getNext().value,D=E.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===a&&E.largestBatchId>r&&s.set(E.getKey(),E)}return Ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new m((D,x)=>D-x);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let x=a.get(D.largestBatchId);null===x&&(x=gf(),a=a.insert(D.largestBatchId,x)),x.set(D.getKey(),D)}}const _=gf(),E=a.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((D,x)=>_.set(D,x)),!(_.size()>=s)););return Ue.resolve(_)}oe(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const h=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new wA(t,r));let a=this.es.get(t);void 0===a&&(a=Vn(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class MA{constructor(){this.ns=new A(Uo.ss),this.rs=new A(Uo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Uo(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Uo(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new _t(new Fn([])),r=new Uo(t,e),s=new Uo(t,e+1),a=[];return this.rs.forEachInRange([r,s],h=>{this.cs(h),a.push(h.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new _t(new Fn([])),r=new Uo(t,e),s=new Uo(t,e+1);let a=Vn();return this.rs.forEachInRange([r,s],h=>{a=a.add(h.key)}),a}containsKey(e){const t=new Uo(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Uo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return _t.comparator(e.key,t.key)||En(e._s,t._s)}static os(e,t){return En(e._s,t._s)||_t.comparator(e.key,t.key)}}class iB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new A(Uo.ss)}checkEmpty(e){return Ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const a=this.ws;this.ws++;const h=new EA(a,t,r,s);this.mutationQueue.push(h);for(const _ of s)this.gs=this.gs.add(new Uo(_.key,a)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return Ue.resolve(h)}lookupMutationBatch(e,t){return Ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),a=s<0?0:s;return Ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Uo(t,0),s=new Uo(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,s],h=>{const _=this.ys(h._s);a.push(_)}),Ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new A(En);return t.forEach(s=>{const a=new Uo(s,0),h=new Uo(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,h],_=>{r=r.add(_._s)})}),Ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;_t.isDocumentKey(a)||(a=a.child(""));const h=new Uo(new _t(a),0);let _=new A(En);return this.gs.forEachWhile(E=>{const D=E.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(_=_.add(E._s)),!0)},h),Ue.resolve(this.Is(_))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Yt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return Ue.forEach(t.mutations,s=>{const a=new Uo(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Uo(t,0),s=this.gs.firstAfterOrEqual(r);return Ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return Ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class sB{constructor(e){this.Es=e,this.docs=new m(_t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,h=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ue.resolve(r?r.document.mutableCopy():Ae.newInvalidDocument(t))}getEntries(e,t){let r=yc();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Ae.newInvalidDocument(s))}),Ue.resolve(r)}getAllFromCollection(e,t,r){let s=yc();const a=new _t(t.child("")),h=this.docs.getIteratorFrom(a);for(;h.hasNext();){const{key:_,value:{document:E}}=h.getNext();if(!t.isPrefixOf(_.path))break;_.path.length>t.length+1||$b(Zw(E),r)<=0||(s=s.insert(E.key,E.mutableCopy()))}return Ue.resolve(s)}getAllFromCollectionGroup(e,t,r,s){Ht()}As(e,t){return Ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oB(this)}getSize(e){return Ue.resolve(this.size)}}class oB extends HR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),Ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class aB{constructor(e){this.persistence=e,this.Rs=new Um(t=>Et(t),$t),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new MA,this.targetCount=0,this.vs=zv.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new zv(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.Dn(t),Ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Rs.forEach((h,_)=>{_.sequenceNumber<=t&&null===r.get(_.targetId)&&(this.Rs.delete(h),a.push(this.removeMatchingKeysForTargetId(e,_.targetId)),s++)}),Ue.waitFor(a).next(()=>s)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return Ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),Ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(h=>{a.push(s.markPotentiallyOrphaned(e,h))}),Ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return Ue.resolve(r)}containsKey(e,t){return Ue.resolve(this.Ps.containsKey(t))}}class ZR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Su(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new aB(this),this.indexManager=new WL,this.remoteDocumentCache=new sB(r=>this.referenceDelegate.xs(r)),this.yt=new wR(t),this.Ns=new nB(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new iB(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ht("MemoryPersistence","Starting transaction:",e);const s=new uB(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(a=>this.referenceDelegate.Os(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ms(e,t){return Ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class uB extends jb{constructor(e){super(),this.currentSequenceNumber=e}}class q1{constructor(e){this.persistence=e,this.Fs=new MA,this.$s=null}static Bs(e){return new q1(e)}get Ls(){if(this.$s)return this.$s;throw Ht()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),Ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Ls,r=>{const s=_t.fromPath(r);return this.qs(e,s).next(a=>{a||t.removeEntry(s,rn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return Ue.or([()=>Ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class cB{constructor(e){this.yt=e}$(e,t,r,s){const a=new Ov("createOrUpgrade",t);var _;r<1&&s>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vR,{unique:!0}),_.createObjectStore("documentMutations"),YR(e),function(_){_.createObjectStore("remoteDocuments")}(e));let h=Ue.resolve();return r<3&&s>=3&&(0!==r&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),YR(e)),h=h.next(()=>function(_){const E=_.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rn.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",D)}(a))),r<4&&s>=4&&(0!==r&&(h=h.next(()=>function(_,E){return E.store("mutations").W().next(D=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vR,{unique:!0});const x=E.store("mutations"),L=D.map(W=>x.put(W));return Ue.waitFor(L)})}(e,a))),h=h.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(h=h.next(()=>this.Us(a))),r<6&&s>=6&&(h=h.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&s>=7&&(h=h.next(()=>this.Gs(a))),r<8&&s>=8&&(h=h.next(()=>this.Qs(e,a))),r<9&&s>=9&&(h=h.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(h=h.next(()=>this.js(a))),r<11&&s>=11&&(h=h.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(h=h.next(()=>{!function(_){const E=_.createObjectStore("documentOverlays",{keyPath:OL});E.createIndex("collectionPathOverlayIndex",kL,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",PL,{unique:!1})}(e)})),r<13&&s>=13&&(h=h.next(()=>function(_){const E=_.createObjectStore("remoteDocumentsV14",{keyPath:CL});E.createIndex("documentKeyIndex",wL),E.createIndex("collectionGroupIndex",DL)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(h=h.next(()=>this.zs(e,a))),r<15&&s>=15&&(h=h.next(()=>function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:xL}).createIndex("sequenceNumberIndex",NL,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:ML}).createIndex("documentKeyIndex",RL,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=j1(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>Ue.forEach(s,a=>{const h=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",h).next(_=>Ue.forEach(_,E=>{Yt(E.userId===a.userId);const D=Gv(this.yt,E);return BR(e,a.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const a=[];return r.Z((h,_)=>{const E=new Fn(h),D=[0,Au(E)];a.push(t.get(D).next(x=>x?Ue.resolve():t.put({targetId:0,path:Au(E),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>Ue.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:AL});const r=t.store("collectionParents"),s=new NA,a=h=>{if(s.add(h)){const _=h.lastSegment(),E=h.popLast();return r.put({collectionId:_,parent:Au(E)})}};return t.store("remoteDocuments").Z({X:!0},(h,_)=>{const E=new Fn(h);return a(E.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,_,E],D)=>{const x=_f(_);return a(x.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const a=fD(s),h=TR(this.yt,a);return t.put(h)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((a,h)=>{const _=t.store("remoteDocumentsV14"),E=(D=h,D.document?new _t(Fn.fromString(D.document.name).popFirst(5)):D.noDocument?_t.fromSegments(D.noDocument.path):D.unknownDocument?_t.fromSegments(D.unknownDocument.path):Ht()).path.toArray();var D;const x={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};s.push(_.put(x))}).next(()=>Ue.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=GR(this.yt),a=new ZR(q1.Bs,this.yt.ie);return r.W().next(h=>{const _=new Map;return h.forEach(E=>{var D;let x=null!==(D=_.get(E.userId))&&void 0!==D?D:Vn();Gv(this.yt,E).keys().forEach(L=>x=x.add(L)),_.set(E.userId,x)}),Ue.forEach(_,(E,D)=>{const x=new Yi(D),L=B1.re(this.yt,x),W=a.getIndexManager(x),se=H1.re(x,this.yt,W,a.referenceDelegate);return new KR(s,se,L,W).recalculateAndSaveOverlaysForDocumentKeys(new bA(t,Su.at),E).next()})})}}function YR(n){n.createObjectStore("targetDocuments",{keyPath:SL}).createIndex("documentTargetsIndex",IL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TL,{unique:!0}),n.createObjectStore("targetGlobal")}const RA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OA{constructor(e,t,r,s,a,h,_,E,D,x,L=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=h,this.document=_,this.Js=D,this.Ys=x,this.Xs=L,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=W=>Promise.resolve(),!OA.C())throw new at(Ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QL(this,s),this.ii=t+"main",this.yt=new wR(E),this.ri=new vc(this.ii,this.Xs,new cB(this.yt)),this.Cs=new KL(this.referenceDelegate,this.yt),this.remoteDocumentCache=GR(this.yt),this.Ns=new VL,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===x&&Ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new at(Ve.FAILED_PRECONDITION,RA);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Su(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,qe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,qe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,qe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>W1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zd(e))return ht("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ht("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return yD(e).get("owner").next(t=>Ue.resolve(this.mi(t)))}gi(e){return W1(e).delete(this.clientId)}yi(){var e=this;return(0,qe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Vo(r,"clientMetadata");return s.W().next(a=>{const h=e.Ii(a,18e5),_=a.filter(E=>-1===h.indexOf(E));return Ue.forEach(_,E=>s.delete(E.clientId)).next(()=>_)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ue.resolve(!0):yD(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new at(Ve.FAILED_PRECONDITION,RA);return!1}}return!(!this.networkEnabled||!this.inForeground)||W1(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const h=!this.inForeground&&s.inForeground,_=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||h&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ht("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,qe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bA(t,Su.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>W1(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return H1.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zL(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return B1.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ht("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",a=15===(h=this.Xs)?LL:14===h?CR:13===h?ER:12===h?FL:11===h?bR:void Ht();var h;let _;return this.ri.runTransaction(e,s,a,E=>(_=new bA(E,this.Ss?this.Ss.next():Su.at),"readwrite-primary"===t?this.fi(_).next(D=>!!D||this.di(_)).next(D=>{if(!D)throw Ji(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new at(Ve.FAILED_PRECONDITION,zI);return r(_)}).next(D=>this.wi(_).next(()=>D)):this.Vi(_).next(()=>r(_)))).then(E=>(_.raiseOnCommittedEvent(),E))}Vi(e){return yD(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new at(Ve.FAILED_PRECONDITION,RA)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yD(e).put("owner",t)}static C(){return vc.C()}_i(e){const t=yD(e);return t.get("owner").next(r=>this.mi(r)?(ht("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ji(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Mn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ht("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ji("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ji("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yD(n){return Vo(n,"owner")}function W1(n){return Vo(n,"clientMetadata")}function kA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class PA{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Vn(),s=Vn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new PA(e,t.fromCache,r,s)}}class JR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(a=>a||this.Oi(e,t,s,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(OM(t))return Ue.resolve(null);let r=Iu(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=N1(t,null,"F"),r=Iu(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const h=Vn(...a);return this.Ni.getDocuments(e,h).next(_=>this.indexManager.getMinOffset(e,r).next(E=>{const D=this.Fi(t,_);return this.$i(t,D,h,E.readTime)?this.ki(e,N1(t,null,"F")):this.Bi(e,D,t,E)}))})))}Oi(e,t,r,s){return OM(t)||s.isEqual(rn.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const h=this.Fi(t,a);return this.$i(t,h,r,s)?this.Mi(e,t):(l1()<=ks.in.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fA(t)),this.Bi(e,h,t,WI(s,-1)))})}Fi(e,t){let r=new A(FM(e));return t.forEach((s,a)=>{pA(e,a)&&(r=r.add(a))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Mi(e,t){return l1()<=ks.in.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",fA(t)),this.Ni.getDocumentsMatchingQuery(e,t,Tu.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(h=>{a=a.insert(h.key,h)}),a))}}class lB{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new m(En),this.Ui=new Um(a=>Et(a),$t),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function QR(n,e,t,r){return new lB(n,e,t,r)}function XR(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,qe.Z)(function*(n,e){const t=It(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const h=[],_=[];let E=Vn();for(const D of s){h.push(D.batchId);for(const x of D.mutations)E=E.add(x.key)}for(const D of a){_.push(D.batchId);for(const x of D.mutations)E=E.add(x.key)}return t.localDocuments.getDocuments(r,E).next(D=>({ji:D,removedBatchIds:h,addedBatchIds:_}))})})}),FA.apply(this,arguments)}function dB(n,e){const t=It(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,_,E,D){const x=E.batch,L=x.keys();let W=Ue.resolve();return L.forEach(se=>{W=W.next(()=>D.getEntry(_,se)).next(_e=>{const Re=E.docVersions.get(se);Yt(null!==Re),_e.version.compareTo(Re)<0&&(x.applyToRemoteDocument(_e,E),_e.isValidDocument()&&(_e.setReadTime(E.commitVersion),D.addEntry(_e)))})}),W.next(()=>h.mutationQueue.removeMutationBatch(_,x))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let _=Vn();for(let E=0;E<h.mutationResults.length;++E)h.mutationResults[E].transformResults.length>0&&(_=_.add(h.batch.mutations[E].key));return _}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function eO(n){const e=It(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function hB(n,e){const t=It(n),r=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const _=[];e.targetChanges.forEach((x,L)=>{const W=s.get(L);if(!W)return;_.push(t.Cs.removeMatchingKeys(a,x.removedDocuments,L).next(()=>t.Cs.addMatchingKeys(a,x.addedDocuments,L)));let se=W.withSequenceNumber(a.currentSequenceNumber);var _e,Re,ze;e.targetMismatches.has(L)?se=se.withResumeToken(Bs.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):x.resumeToken.approximateByteSize()>0&&(se=se.withResumeToken(x.resumeToken,r)),s=s.insert(L,se),Re=se,ze=x,(0===(_e=W).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-_e.snapshotVersion.toMicroseconds()>=3e8||ze.addedDocuments.size+ze.modifiedDocuments.size+ze.removedDocuments.size>0)&&_.push(t.Cs.updateTargetData(a,se))});let E=yc(),D=Vn();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(a,x))}),_.push(tO(a,h,e.documentUpdates).next(x=>{E=x.Wi,D=x.zi})),!r.isEqual(rn.min())){const x=t.Cs.getLastRemoteSnapshotVersion(a).next(L=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));_.push(x)}return Ue.waitFor(_).next(()=>h.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,E,D)).next(()=>E)}).then(a=>(t.qi=s,a))}function tO(n,e,t){let r=Vn(),s=Vn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let h=yc();return t.forEach((_,E)=>{const D=a.get(_);E.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(_)),E.isNoDocument()&&E.version.isEqual(rn.min())?(e.removeEntry(_,E.readTime),h=h.insert(_,E)):!D.isValidDocument()||E.version.compareTo(D.version)>0||0===E.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(E),h=h.insert(_,E)):ht("LocalStore","Ignoring outdated watch update for ",_,". Current version:",D.version," Watch version:",E.version)}),{Wi:h,zi:s}})}function fB(n,e){const t=It(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oE(n,e){const t=It(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(a=>a?(s=a,Ue.resolve(s)):t.Cs.allocateTargetId(r).next(h=>(s=new $m(e,h,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.qi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function aE(n,e,t){return LA.apply(this,arguments)}function LA(){return LA=(0,qe.Z)(function*(n,e,t){const r=It(n),s=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,h=>r.persistence.referenceDelegate.removeTarget(h,s)))}catch(h){if(!zd(h))throw h;ht("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}),LA.apply(this,arguments)}function z1(n,e,t){const r=It(n);let s=rn.min(),a=Vn();return r.persistence.runTransaction("Execute query","readonly",h=>function(_,E,D){const x=It(_),L=x.Ui.get(D);return void 0!==L?Ue.resolve(x.qi.get(L)):x.Cs.getTargetData(E,D)}(r,h,Iu(e)).next(_=>{if(_)return s=_.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(h,_.targetId).next(E=>{a=E})}).next(()=>r.Li.getDocumentsMatchingQuery(h,e,t?s:rn.min(),t?a:Vn())).next(_=>(iO(r,PM(e),_),{documents:_,Hi:a})))}function nO(n,e){const t=It(n),r=It(t.Cs),s=t.qi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(h=>h?h.target:null))}function rO(n,e){const t=It(n),r=t.Ki.get(e)||rn.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,WI(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(iO(t,e,s),s))}function iO(n,e,t){let r=n.Ki.get(e)||rn.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function BA(){return BA=(0,qe.Z)(function*(n,e,t,r){const s=It(n);let a=Vn(),h=yc();for(const D of t){const x=e.Ji(D.metadata.name);D.document&&(a=a.add(x));const L=e.Yi(D);L.setReadTime(e.Xi(D.metadata.readTime)),h=h.insert(x,L)}const _=s.Gi.newChangeBuffer({trackRemovals:!0}),E=yield oE(s,(D=r,Iu(Yb(Fn.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>tO(D,_,h).next(x=>(_.apply(D),x)).next(x=>s.Cs.removeMatchingKeysForTargetId(D,E.targetId).next(()=>s.Cs.addMatchingKeys(D,a,E.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,x.Wi,x.zi)).next(()=>x.Wi)))}),BA.apply(this,arguments)}function gB(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,qe.Z)(function*(n,e,t=Vn()){const r=yield oE(n,Iu(DA(e.bundledQuery))),s=It(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{const h=Vs(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return s.Ns.saveNamedQuery(a,e);const _=r.withResumeToken(Bs.EMPTY_BYTE_STRING,h);return s.qi=s.qi.insert(_.targetId,_),s.Cs.updateTargetData(a,_).next(()=>s.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>s.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(a,e))})}),VA.apply(this,arguments)}function sO(n,e){return`firestore_clients_${n}_${e}`}function oO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function UA(n,e){return`firestore_targets_${n}_${e}`}class K1{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let a,h="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(a=new at(s.error.code,s.error.message))),h?new K1(e,t,s.state,a):(Ji("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bD{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(s=new at(r.error.code,r.error.message))),a?new bD(e,r.state,s):(Ji("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Z1{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,a=k1();for(let h=0;s&&h<r.activeTargetIds.length;++h)s=w1(r.activeTargetIds[h]),a=a.add(r.activeTargetIds[h]);return s?new Z1(e,a):(Ji("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $A{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $A(t.clientId,t.onlineState):(Ji("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jA{constructor(){this.activeTargetIds=k1()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HA{constructor(e,t,r,s,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new m(En),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=sO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jA),this.lr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,qe.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const a=e.getItem(sO(e.persistenceKey,s));if(a){const h=Z1.Zi(s,a);h&&(e.ur=e.ur.insert(h.clientId,h))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(UA(this.persistenceKey,e));if(r){const s=bD.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ht("SharedClientState","READ",e,t),t}setItem(e,t){ht("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ht("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ht("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,qe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(a){let h=Su.at;if(null!=a)try{const _=JSON.parse(a);Yt("number"==typeof _),h=_}catch(_){Ji("SharedClientState","Failed to read sequence number from WebStorage",_)}return h}(r.newValue);s!==Su.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new K1(this.currentUser,e,t,r),a=oO(this.persistenceKey,this.currentUser,e);this.setItem(a,s.tr())}Er(e){const t=oO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=UA(this.persistenceKey,e),a=new bD(e,t,r);this.setItem(s,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Z1.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return K1.Zi(new Yi(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return bD.Zi(s,t)}yr(e){return $A.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,qe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ht("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),a=this.Ir(r),h=[],_=[];return a.forEach(E=>{s.has(E)||h.push(E)}),s.forEach(E=>{a.has(E)||_.push(E)}),this.syncEngine.Br(h,_).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=k1();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class aO{constructor(){this.Lr=new jA,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mB{Ur(e){}shutdown(){}}class uO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ht("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ht("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _B={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vB{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class yB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,a){const h=this.ho(e,t);ht("RestConnection","Sending: ",h,r);const _={};return this.lo(_,s,a),this.fo(e,h,_,r).then(E=>(ht("RestConnection","Received: ",E),E),E=>{throw Hp("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}_o(e,t,r,s,a,h){return this.ao(e,t,r,s,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}ho(e,t){return`${this.oo}/v1/${t}:${_B[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((a,h)=>{const _=new UI;_.setWithCredentials(!0),_.listenOnce(u1.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Rv.NO_ERROR:const D=_.getResponseJson();ht("Connection","XHR received:",JSON.stringify(D)),a(D);break;case Rv.TIMEOUT:ht("Connection",'RPC "'+e+'" timed out'),h(new at(Ve.DEADLINE_EXCEEDED,"Request time out"));break;case Rv.HTTP_ERROR:const x=_.getStatus();if(ht("Connection",'RPC "'+e+'" failed with status:',x,"response text:",_.getResponseText()),x>0){let L=_.getResponseJson();Array.isArray(L)&&(L=L[0]);const W=L?.error;if(W&&W.status&&W.message){const se=function(_e){const Re=_e.toLowerCase().replace(/_/g,"-");return Object.values(Ve).indexOf(Re)>=0?Re:Ve.UNKNOWN}(W.status);h(new at(se,W.message))}else h(new at(Ve.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new at(Ve.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{ht("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(s);_.send(t,"POST",E,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=a1(),h=DM(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new TM({})),this.lo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const E=s.join("");ht("Connection","Creating WebChannel: "+E,_);const D=a.createWebChannel(E,_);let x=!1,L=!1;const W=new vB({Hr:_e=>{L?ht("Connection","Not sending because WebChannel is closed:",_e):(x||(ht("Connection","Opening WebChannel transport."),D.open(),x=!0),ht("Connection","WebChannel sending:",_e),D.send(_e))},Jr:()=>D.close()}),se=(_e,Re,ze)=>{_e.listen(Re,Ct=>{try{ze(Ct)}catch(St){setTimeout(()=>{throw St},0)}})};return se(D,Ww.EventType.OPEN,()=>{L||ht("Connection","WebChannel transport opened.")}),se(D,Ww.EventType.CLOSE,()=>{L||(L=!0,ht("Connection","WebChannel transport closed"),W.io())}),se(D,Ww.EventType.ERROR,_e=>{L||(L=!0,Hp("Connection","WebChannel transport errored:",_e),W.io(new at(Ve.UNAVAILABLE,"The operation could not be completed")))}),se(D,Ww.EventType.MESSAGE,_e=>{var Re;if(!L){const ze=_e.data[0];Yt(!!ze);const Ct=ze,St=Ct.error||(null===(Re=Ct[0])||void 0===Re?void 0:Re.error);if(St){ht("Connection","WebChannel received error:",St);const Vt=St.status;let Tt=function(Pt){const An=so[Pt];if(void 0!==An)return JM(An)}(Vt),wt=St.message;void 0===Tt&&(Tt=Ve.INTERNAL,wt="Unknown error status: "+Vt+" with message "+St.message),L=!0,W.io(new at(Tt,wt)),D.close()}else ht("Connection","WebChannel received:",ze),W.ro(ze)}}),se(h,VI.STAT_EVENT,_e=>{_e.stat===qw.PROXY?ht("Connection","Detected buffering proxy"):_e.stat===qw.NOPROXY&&ht("Connection","Detected no buffering proxy")}),setTimeout(()=>{W.so()},0),W}}function cO(){return typeof window<"u"?window:null}function Y1(){return typeof document<"u"?document:null}function ED(n){return new lL(n,!0)}class GA{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&ht("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lO{constructor(e,t,r,s,a,h,_,E){this.Hs=e,this.vo=r,this.Vo=s,this.connection=a,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=_,this.listener=E,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new GA(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,qe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,qe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,qe.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Ve.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===Ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new at(Ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,qe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ht("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ht("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bB extends lO{constructor(e,t,r,s,a,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,h),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function fL(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:Ht(),s=e.targetChange.targetIds||[],a=function(E,D){return E.wt?(Yt(void 0===D||"string"==typeof D),Bs.fromBase64String(D||"")):(Yt(void 0===D||D instanceof Uint8Array),Bs.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,_=h&&function(E){const D=void 0===E.code?Ve.UNKNOWN:JM(E.code);return new at(D,E.message||"")}(h);t=new nR(r,s,a,_||null)}else if("documentChange"in e){const r=e.documentChange,s=mf(n,r.document.name),a=Vs(r.document.updateTime),h=r.document.createTime?Vs(r.document.createTime):rn.min(),_=new te({mapValue:{fields:r.document.fields}}),E=Ae.newFoundDocument(s,a,h,_);t=new P1(r.targetIds||[],r.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const r=e.documentDelete,s=mf(n,r.document),a=r.readTime?Vs(r.readTime):rn.min(),h=Ae.newNoDocument(s,a);t=new P1([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,s=mf(n,r.document);t=new P1([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Ht();{const r=e.filter,a=new tL(r.count||0);t=new tR(r.targetId,a)}}var E;return t}(this.yt,e),r=function(s){if(!("targetChange"in s))return rn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?rn.min():a.readTime?Vs(a.readTime):rn.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=dD(this.yt),t.addTarget=function(s,a){let h;const _=a.target;return h=cn(_)?{documents:hR(s,_)}:{query:yA(s,_)},h.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?h.resumeToken=oR(s,a.resumeToken):a.snapshotVersion.compareTo(rn.min())>0&&(h.readTime=tE(s,a.snapshotVersion.toTimestamp())),h}(this.yt,e);const r=function gL(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=dD(this.yt),t.removeTarget=e,this.Bo(t)}}class EB extends lO{constructor(e,t,r,s,a,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,h),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function pL(n,e){return n&&n.length>0?(Yt(void 0!==e),n.map(t=>function(r,s){let a=Vs(r.updateTime?r.updateTime:s);return a.isEqual(rn.min())&&(a=Vs(s)),new QF(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vs(e.commitTime);return this.listener.Zo(r,t)}return Yt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=dD(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hD(this.yt,r))};this.Bo(t)}}class CB extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new at(Ve.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ao(e,t,r,s,a)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new at(Ve.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection._o(e,t,r,a,h,s)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new at(Ve.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class DB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ji(t),this.ou=!1):ht("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class TB{constructor(e,t,r,s,a){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(_=>{r.enqueueAndForget((0,qe.Z)(function*(){var E;Qp(h)&&(ht("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,qe.Z)(function*(D){const x=It(D);x._u.add(4),yield uE(x),x.gu.set("Unknown"),x._u.delete(4),yield CD(x)}),function(D){return E.apply(this,arguments)})(h))}))}),this.gu=new DB(r,s)}}function CD(n){return WA.apply(this,arguments)}function WA(){return WA=(0,qe.Z)(function*(n){if(Qp(n))for(const e of n.wu)yield e(!0)}),WA.apply(this,arguments)}function uE(n){return zA.apply(this,arguments)}function zA(){return zA=(0,qe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),zA.apply(this,arguments)}function J1(n,e){const t=It(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),YA(t)?ZA(t):lE(t).ko()&&KA(t,e))}function wD(n,e){const t=It(n),r=lE(t);t.du.delete(e),r.ko()&&dO(t,e),0===t.du.size&&(r.ko()?r.Fo():Qp(t)&&t.gu.set("Unknown"))}function KA(n,e){n.yu.Ot(e.targetId),lE(n).zo(e)}function dO(n,e){n.yu.Ot(e),lE(n).Ho(e)}function ZA(n){n.yu=new oL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),lE(n).start(),n.gu.uu()}function YA(n){return Qp(n)&&!lE(n).No()&&n.du.size>0}function Qp(n){return 0===It(n)._u.size}function hO(n){n.yu=void 0}function SB(n){return JA.apply(this,arguments)}function JA(){return JA=(0,qe.Z)(function*(n){n.du.forEach((e,t)=>{KA(n,e)})}),JA.apply(this,arguments)}function IB(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,qe.Z)(function*(n,e){hO(n),YA(n)?(n.gu.hu(e),ZA(n)):n.gu.set("Unknown")}),QA.apply(this,arguments)}function AB(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,qe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof nR&&2===e.state&&e.cause)try{yield(r=(0,qe.Z)(function*(s,a){const h=a.cause;for(const _ of a.targetIds)s.du.has(_)&&(yield s.remoteSyncer.rejectListen(_,h),s.du.delete(_),s.yu.removeTarget(_))}),function(s,a){return r.apply(this,arguments)})(n,e)}catch(r){ht("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Q1(n,r)}else if(e instanceof P1?n.yu.Kt(e):e instanceof tR?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(rn.min()))try{const r=yield eO(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){const h=s.yu.Zt(a);return h.targetChanges.forEach((_,E)=>{if(_.resumeToken.approximateByteSize()>0){const D=s.du.get(E);D&&s.du.set(E,D.withResumeToken(_.resumeToken,a))}}),h.targetMismatches.forEach(_=>{const E=s.du.get(_);if(!E)return;s.du.set(_,E.withResumeToken(Bs.EMPTY_BYTE_STRING,E.snapshotVersion)),dO(s,_);const D=new $m(E.target,_,1,E.sequenceNumber);KA(s,D)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ht("RemoteStore","Failed to raise snapshot:",r),yield Q1(n,r)}var r}),XA.apply(this,arguments)}function Q1(n,e,t){return ex.apply(this,arguments)}function ex(){return ex=(0,qe.Z)(function*(n,e,t){if(!zd(e))throw e;n._u.add(1),yield uE(n),n.gu.set("Offline"),t||(t=()=>eO(n.localStore)),n.asyncQueue.enqueueRetryable((0,qe.Z)(function*(){ht("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield CD(n)}))}),ex.apply(this,arguments)}function fO(n,e){return e().catch(t=>Q1(n,t,e))}function cE(n){return tx.apply(this,arguments)}function tx(){return tx=(0,qe.Z)(function*(n){const e=It(n),t=qm(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;xB(e);)try{const s=yield fB(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,NB(e,s)}catch(s){yield Q1(e,s)}pO(e)&&gO(e)}),tx.apply(this,arguments)}function xB(n){return Qp(n)&&n.fu.length<10}function NB(n,e){n.fu.push(e);const t=qm(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function pO(n){return Qp(n)&&!qm(n).No()&&n.fu.length>0}function gO(n){qm(n).start()}function MB(n){return nx.apply(this,arguments)}function nx(){return nx=(0,qe.Z)(function*(n){qm(n).eu()}),nx.apply(this,arguments)}function RB(n){return rx.apply(this,arguments)}function rx(){return rx=(0,qe.Z)(function*(n){const e=qm(n);for(const t of n.fu)e.Xo(t.mutations)}),rx.apply(this,arguments)}function OB(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,qe.Z)(function*(n,e,t){const r=n.fu.shift(),s=CA.from(r,e,t);yield fO(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield cE(n)}),ix.apply(this,arguments)}function kB(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,qe.Z)(function*(n,e){var t;e&&qm(n).Yo&&(yield(t=(0,qe.Z)(function*(r,s){if(YM(a=s.code)&&a!==Ve.ABORTED){const h=r.fu.shift();qm(r).Mo(),yield fO(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,s)),yield cE(r)}var a}),function(r,s){return t.apply(this,arguments)})(n,e)),pO(n)&&gO(n)}),sx.apply(this,arguments)}function mO(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,qe.Z)(function*(n,e){const t=It(n);t.asyncQueue.verifyOperationInProgress(),ht("RemoteStore","RemoteStore received new credentials");const r=Qp(t);t._u.add(3),yield uE(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield CD(t)}),ox.apply(this,arguments)}function ax(n,e){return ux.apply(this,arguments)}function ux(){return ux=(0,qe.Z)(function*(n,e){const t=It(n);e?(t._u.delete(2),yield CD(t)):e||(t._u.add(2),yield uE(t),t.gu.set("Unknown"))}),ux.apply(this,arguments)}function lE(n){return n.pu||(n.pu=function(e,t,r){const s=It(e);return s.su(),new bB(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:SB.bind(null,n),Zr:IB.bind(null,n),Wo:AB.bind(null,n)}),n.wu.push(function(){var e=(0,qe.Z)(function*(t){t?(n.pu.Mo(),YA(n)?ZA(n):n.gu.set("Unknown")):(yield n.pu.stop(),hO(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function qm(n){return n.Iu||(n.Iu=function(e,t,r){const s=It(e);return s.su(),new EB(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:MB.bind(null,n),Zr:kB.bind(null,n),tu:RB.bind(null,n),Zo:OB.bind(null,n)}),n.wu.push(function(){var e=(0,qe.Z)(function*(t){t?(n.Iu.Mo(),yield cE(n)):(yield n.Iu.stop(),n.fu.length>0&&(ht("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class cx{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,s,a){const h=Date.now()+r,_=new cx(e,t,h,s,a);return _.start(r),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new at(Ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dE(n,e){if(Ji("AsyncQueue",`${e}: ${n}`),zd(n))return new at(Ve.UNAVAILABLE,`${e}: ${n}`);throw n}class hE{constructor(e){this.comparator=e?(t,r)=>e(t,r)||_t.comparator(t.key,r.key):(t,r)=>_t.comparator(t.key,r.key),this.keyedMap=oD(),this.sortedSet=new m(this.comparator)}static emptySet(e){return new hE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hE)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _O{constructor(){this.Tu=new m(_t.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ht():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class fE{constructor(e,t,r,s,a,h,_,E,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=h,this.syncStateChanged=_,this.excludesMetadataChanges=E,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,a){const h=[];return t.forEach(_=>{h.push({type:0,doc:_})}),new fE(e,t,hE.emptySet(t),h,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rD(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class PB{constructor(){this.Au=void 0,this.listeners=[]}}class FB{constructor(){this.queries=new Um(e=>kM(e),rD),this.onlineState="Unknown",this.Ru=new Set}}function lx(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,qe.Z)(function*(n,e){const t=It(n),r=e.query;let s=!1,a=t.queries.get(r);if(a||(s=!0,a=new PB),s)try{a.Au=yield t.onListen(r)}catch(h){const _=dE(h,`Initialization of query '${fA(e.query)}' failed`);return void e.onError(_)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&px(t)}),dx.apply(this,arguments)}function hx(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,qe.Z)(function*(n,e){const t=It(n),r=e.query;let s=!1;const a=t.queries.get(r);if(a){const h=a.listeners.indexOf(e);h>=0&&(a.listeners.splice(h,1),s=0===a.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),fx.apply(this,arguments)}function LB(n,e){const t=It(n);let r=!1;for(const s of e){const h=t.queries.get(s.query);if(h){for(const _ of h.listeners)_.Pu(s)&&(r=!0);h.Au=s}}r&&px(t)}function BB(n,e,t){const r=It(n),s=r.queries.get(e);if(s)for(const a of s.listeners)a.onError(t);r.queries.delete(e)}function px(n){n.Ru.forEach(e=>{e.next()})}class gx{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new fE(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=fE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class VB{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class vO{constructor(e){this.yt=e}Ji(e){return mf(this.yt,e)}Yi(e){return e.metadata.exists?dR(this.yt,e.document,!1):Ae.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Vs(e)}}class UB{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Fn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new vO(this.yt);for(const s of e)if(s.metadata.queries){const a=r.Ji(s.metadata.name);for(const h of s.metadata.queries){const _=(t.get(h)||Vn()).add(a);t.set(h,_)}}return t}complete(){var e=this;return(0,qe.Z)(function*(){const t=yield function pB(n,e,t,r){return BA.apply(this,arguments)}(e.localStore,new vO(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield gB(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function yO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bO{constructor(e){this.key=e}}class EO{constructor(e){this.key=e}}class CO{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Vn(),this.mutatedKeys=Vn(),this.Gu=FM(e),this.Qu=new hE(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new _O,s=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,h=s,_=!1;const E="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((x,L)=>{const W=s.get(x),se=pA(this.query,L)?L:null,_e=!!W&&this.mutatedKeys.has(W.key),Re=!!se&&(se.hasLocalMutations||this.mutatedKeys.has(se.key)&&se.hasCommittedMutations);let ze=!1;W&&se?W.data.isEqual(se.data)?_e!==Re&&(r.track({type:3,doc:se}),ze=!0):this.Hu(W,se)||(r.track({type:2,doc:se}),ze=!0,(E&&this.Gu(se,E)>0||D&&this.Gu(se,D)<0)&&(_=!0)):!W&&se?(r.track({type:0,doc:se}),ze=!0):W&&!se&&(r.track({type:1,doc:W}),ze=!0,(E||D)&&(_=!0)),ze&&(se?(h=h.add(se),a=Re?a.add(x):a.delete(x)):(h=h.delete(x),a=a.delete(x)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const x="F"===this.query.limitType?h.last():h.first();h=h.delete(x.key),a=a.delete(x.key),r.track({type:1,doc:x})}return{Qu:h,zu:r,$i:_,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((D,x)=>function(L,W){const se=_e=>{switch(_e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return se(L)-se(W)}(D.type,x.type)||this.Gu(D.doc,x.doc)),this.Ju(r);const h=t?this.Yu():[],_=0===this.Ku.size&&this.current?1:0,E=_!==this.Uu;return this.Uu=_,0!==a.length||E?{snapshot:new fE(this.query,e.Qu,s,a,e.mutatedKeys,0===_,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _O,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Vn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new EO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new bO(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Vn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return fE.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class $B{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jB{constructor(e){this.key=e,this.nc=!1}}class HB{constructor(e,t,r,s,a,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new Um(_=>kM(_),rD),this.rc=new Map,this.oc=new Set,this.uc=new m(_t.comparator),this.cc=new Map,this.ac=new MA,this.hc={},this.lc=new Map,this.fc=zv.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function GB(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,qe.Z)(function*(n,e){const t=Vx(n);let r,s;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),s=a.view.ec();else{const h=yield oE(t.localStore,Iu(e));t.isPrimaryClient&&J1(t.remoteStore,h);const _=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=yield _x(t,e,r,"current"===_,h.resumeToken)}return s}),mx.apply(this,arguments)}function _x(n,e,t,r,s){return vx.apply(this,arguments)}function vx(){return vx=(0,qe.Z)(function*(n,e,t,r,s){n._c=(L,W,se)=>{return(_e=(0,qe.Z)(function*(Re,ze,Ct,St){let Vt=ze.view.Wu(Ct);Vt.$i&&(Vt=yield z1(Re.localStore,ze.query,!1).then(({documents:Pt})=>ze.view.Wu(Pt,Vt)));const Tt=St&&St.targetChanges.get(ze.targetId),wt=ze.view.applyChanges(Vt,Re.isPrimaryClient,Tt);return Ax(Re,ze.targetId,wt.Xu),wt.snapshot}),function(Re,ze,Ct,St){return _e.apply(this,arguments)})(n,L,W,se);var _e};const a=yield z1(n.localStore,e,!0),h=new CO(e,a.Hi),_=h.Wu(a.documents),E=cD.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=h.applyChanges(_,n.isPrimaryClient,E);Ax(n,t,D.Xu);const x=new $B(e,t,h);return n.ic.set(e,x),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),vx.apply(this,arguments)}function qB(n,e){return yx.apply(this,arguments)}function yx(){return yx=(0,qe.Z)(function*(n,e){const t=It(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(a=>!rD(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield aE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),wD(t.remoteStore,r.targetId),pE(t,r.targetId)}).catch(Wd))):(pE(t,r.targetId),yield aE(t.localStore,r.targetId,!0))}),yx.apply(this,arguments)}function bx(){return bx=(0,qe.Z)(function*(n,e,t){const r=Ux(n);try{const s=yield function(a,h){const _=It(a),E=ai.now(),D=h.reduce((W,se)=>W.add(se.key),Vn());let x,L;return _.persistence.runTransaction("Locally write mutations","readwrite",W=>{let se=yc(),_e=Vn();return _.Gi.getEntries(W,D).next(Re=>{se=Re,se.forEach((ze,Ct)=>{Ct.isValidDocument()||(_e=_e.add(ze))})}).next(()=>_.localDocuments.getOverlayedDocuments(W,se)).next(Re=>{x=Re;const ze=[];for(const Ct of h){const St=eL(Ct,x.get(Ct.key).overlayedDocument);null!=St&&ze.push(new Jp(Ct.key,St,Ee(St.value.mapValue),ji.exists(!0)))}return _.mutationQueue.addMutationBatch(W,E,ze,h)}).next(Re=>{L=Re;const ze=Re.applyToLocalDocumentSet(x,_e);return _.documentOverlayCache.saveOverlays(W,Re.batchId,ze)})}).then(()=>({batchId:L.batchId,changes:XM(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,h,_){let E=a.hc[a.currentUser.toKey()];E||(E=new m(En)),E=E.insert(h,_),a.hc[a.currentUser.toKey()]=E}(r,s.batchId,t),yield Xp(r,s.changes),yield cE(r.remoteStore)}catch(s){const a=dE(s,"Failed to persist write");t.reject(a)}}),bx.apply(this,arguments)}function wO(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,qe.Z)(function*(n,e){const t=It(n);try{const r=yield hB(t.localStore,e);e.targetChanges.forEach((s,a)=>{const h=t.cc.get(a);h&&(Yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.nc=!0:s.modifiedDocuments.size>0?Yt(h.nc):s.removedDocuments.size>0&&(Yt(h.nc),h.nc=!1))}),yield Xp(t,r,e)}catch(r){yield Wd(r)}}),Ex.apply(this,arguments)}function DO(n,e,t){const r=It(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((a,h)=>{const _=h.view.bu(e);_.snapshot&&s.push(_.snapshot)}),function(a,h){const _=It(a);_.onlineState=h;let E=!1;_.queries.forEach((D,x)=>{for(const L of x.listeners)L.bu(h)&&(E=!0)}),E&&px(_)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zB(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,qe.Z)(function*(n,e,t){const r=It(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),a=s&&s.key;if(a){let h=new m(_t.comparator);h=h.insert(a,Ae.newNoDocument(a,rn.min()));const _=Vn().add(a),E=new uD(rn.min(),new Map,new A(En),h,_);yield wO(r,E),r.uc=r.uc.remove(a),r.cc.delete(e),xx(r)}else yield aE(r.localStore,e,!1).then(()=>pE(r,e,t)).catch(Wd)}),Cx.apply(this,arguments)}function KB(n,e){return wx.apply(this,arguments)}function wx(){return wx=(0,qe.Z)(function*(n,e){const t=It(n),r=e.batch.batchId;try{const s=yield dB(t.localStore,e);Ix(t,r,null),Sx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xp(t,s)}catch(s){yield Wd(s)}}),wx.apply(this,arguments)}function ZB(n,e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,qe.Z)(function*(n,e,t){const r=It(n);try{const s=yield function(a,h){const _=It(a);return _.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let D;return _.mutationQueue.lookupMutationBatch(E,h).next(x=>(Yt(null!==x),D=x.keys(),_.mutationQueue.removeMutationBatch(E,x))).next(()=>_.mutationQueue.performConsistencyCheck(E)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(E,D,h)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,D)).next(()=>_.localDocuments.getDocuments(E,D))})}(r.localStore,e);Ix(r,e,t),Sx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xp(r,s)}catch(s){yield Wd(s)}}),Dx.apply(this,arguments)}function Tx(){return Tx=(0,qe.Z)(function*(n,e){const t=It(n);Qp(t.remoteStore)||ht("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const h=It(a);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>h.mutationQueue.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=dE(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Tx.apply(this,arguments)}function Sx(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Ix(n,e,t){const r=It(n);let s=r.hc[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function pE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||TO(n,r)})}function TO(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(wD(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),xx(n))}function Ax(n,e,t){for(const r of t)r instanceof bO?(n.ac.addReference(r.key,e),JB(n,r)):r instanceof EO?(ht("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||TO(n,r.key)):Ht()}function JB(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ht("SyncEngine","New document in limbo: "+t),n.oc.add(r),xx(n))}function xx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new _t(Fn.fromString(e)),r=n.fc.next();n.cc.set(r,new jB(t)),n.uc=n.uc.insert(t,r),J1(n.remoteStore,new $m(Iu(Yb(t.path)),r,2,Su.at))}}function Xp(n,e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,qe.Z)(function*(n,e,t){const r=It(n),s=[],a=[],h=[];var _;r.ic.isEmpty()||(r.ic.forEach((_,E)=>{h.push(r._c(E,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const x=PA.Ci(E.targetId,D);a.push(x)}}))}),yield Promise.all(h),r.sc.Wo(s),yield(_=(0,qe.Z)(function*(E,D){const x=It(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",L=>Ue.forEach(D,W=>Ue.forEach(W.Si,se=>x.persistence.referenceDelegate.addReference(L,W.targetId,se)).next(()=>Ue.forEach(W.Di,se=>x.persistence.referenceDelegate.removeReference(L,W.targetId,se)))))}catch(L){if(!zd(L))throw L;ht("LocalStore","Failed to update sequence numbers: "+L)}for(const L of D){const W=L.targetId;if(!L.fromCache){const se=x.qi.get(W),Re=se.withLastLimboFreeSnapshotVersion(se.snapshotVersion);x.qi=x.qi.insert(W,Re)}}}),function(E,D){return _.apply(this,arguments)})(r.localStore,a))}),Nx.apply(this,arguments)}function QB(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,qe.Z)(function*(n,e){const t=It(n);if(!t.currentUser.isEqual(e)){ht("SyncEngine","User change. New user:",e.toKey());const r=yield XR(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(h=>{h.forEach(_=>{_.reject(new at(Ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xp(t,r.ji)}var s}),Mx.apply(this,arguments)}function XB(n,e){const t=It(n),r=t.cc.get(e);if(r&&r.nc)return Vn().add(r.key);{let s=Vn();const a=t.rc.get(e);if(!a)return s;for(const h of a){const _=t.ic.get(h);s=s.unionWith(_.view.ju)}return s}}function eV(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,qe.Z)(function*(n,e){const t=It(n),r=yield z1(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&Ax(t,e.targetId,s.Xu),s}),Rx.apply(this,arguments)}function tV(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,qe.Z)(function*(n,e){const t=It(n);return rO(t.localStore,e).then(r=>Xp(t,r))}),Ox.apply(this,arguments)}function nV(n,e,t,r){return kx.apply(this,arguments)}function kx(){return kx=(0,qe.Z)(function*(n,e,t,r){const s=It(n),a=yield function(h,_){const E=It(h),D=It(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>D.Tn(x,_).next(L=>L?E.localDocuments.getDocuments(x,L):Ue.resolve(null)))}(s.localStore,e);var _;null!==a?("pending"===t?yield cE(s.remoteStore):"acknowledged"===t||"rejected"===t?(Ix(s,e,r||null),Sx(s,e),_=e,It(It(s.localStore).mutationQueue).An(_)):Ht(),yield Xp(s,a)):ht("SyncEngine","Cannot apply mutation batch with id: "+e)}),kx.apply(this,arguments)}function Px(){return Px=(0,qe.Z)(function*(n,e){const t=It(n);if(Vx(t),Ux(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield SO(t,r.toArray());t.dc=!0,yield ax(t.remoteStore,!0);for(const a of s)J1(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((a,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):s=s.then(()=>(pE(t,h),aE(t.localStore,h,!0))),wD(t.remoteStore,h)}),yield s,yield SO(t,r),function(a){const h=It(a);h.cc.forEach((_,E)=>{wD(h.remoteStore,E)}),h.ac.fs(),h.cc=new Map,h.uc=new m(_t.comparator)}(t),t.dc=!1,yield ax(t.remoteStore,!1)}}),Px.apply(this,arguments)}function SO(n,e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,qe.Z)(function*(n,e,t){const r=It(n),s=[],a=[];for(const h of e){let _;const E=r.rc.get(h);if(E&&0!==E.length){_=yield oE(r.localStore,Iu(E[0]));for(const D of E){const x=r.ic.get(D),L=yield eV(r,x);L.snapshot&&a.push(L.snapshot)}}else{const D=yield nO(r.localStore,h);_=yield oE(r.localStore,D),yield _x(r,IO(D),h,!1,_.resumeToken)}s.push(_)}return r.sc.Wo(a),s}),Fx.apply(this,arguments)}function IO(n){return cA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iV(n){const e=It(n);return It(It(e.localStore).persistence).vi()}function sV(n,e,t,r){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,qe.Z)(function*(n,e,t,r){const s=It(n);if(s.dc)return void ht("SyncEngine","Ignoring unexpected query state notification.");const a=s.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const h=yield rO(s.localStore,PM(a[0])),_=uD.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Bs.EMPTY_BYTE_STRING);yield Xp(s,h,_);break}case"rejected":yield aE(s.localStore,e,!0),pE(s,e,r);break;default:Ht()}}),Lx.apply(this,arguments)}function oV(n,e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,qe.Z)(function*(n,e,t){const r=Vx(n);if(r.dc){for(const s of e){if(r.rc.has(s)){ht("SyncEngine","Adding an already active target "+s);continue}const a=yield nO(r.localStore,s),h=yield oE(r.localStore,a);yield _x(r,IO(a),h.targetId,!1,h.resumeToken),J1(r.remoteStore,h)}for(const s of t)r.rc.has(s)&&(yield aE(r.localStore,s,!1).then(()=>{wD(r.remoteStore,s),pE(r,s)}).catch(Wd))}}),Bx.apply(this,arguments)}function Vx(n){const e=It(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zB.bind(null,e),e.sc.Wo=LB.bind(null,e.eventManager),e.sc.wc=BB.bind(null,e.eventManager),e}function Ux(n){const e=It(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZB.bind(null,e),e}class AO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,qe.Z)(function*(){t.yt=ED(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return QR(this.persistence,new JR,e.initialUser,this.yt)}yc(e){return new ZR(q1.Bs,this.yt)}gc(e){return new aO}terminate(){var e=this;return(0,qe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xO extends AO{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,qe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Ux(r.Ac.syncEngine),yield cE(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return QR(this.persistence,new JR,e.initialUser,this.yt)}Tc(e,t){return new YL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new C1(t,this.persistence);return new AM(e.asyncQueue,r)}yc(e){const t=kA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bc.withCacheSize(this.cacheSizeBytes):bc.DEFAULT;return new OA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cO(),Y1(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new aO}}class uV extends xO{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,qe.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof HA&&(r.sharedClientState.syncEngine={Fr:nV.bind(null,s),$r:sV.bind(null,s),Br:oV.bind(null,s),vi:iV.bind(null,s),Mr:tV.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,qe.Z)(function*(h){yield function rV(n,e){return Px.apply(this,arguments)}(r.Ac.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return a.apply(this,arguments)}}())})()}gc(e){const t=cO();if(!HA.C(t))throw new at(Ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new HA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $x{initialize(e,t){var r=this;return(0,qe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>DO(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=QB.bind(null,r.syncEngine),yield ax(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FB}createDatastore(e){const t=ED(e.databaseInfo.databaseId),r=new yB(e.databaseInfo);return new CB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,a=_=>DO(this.syncEngine,_,0),h=uO.C()?new uO:new mB,new TB(t,r,s,a,h);var t,r,s,a,h}createSyncEngine(e,t){return function(r,s,a,h,_,E,D){const x=new HB(r,s,a,h,_,E);return D&&(x.dc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,qe.Z)(function*(t){const r=It(t);ht("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield uE(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jx(n,e,t){if(!t)throw new at(Ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NO(n,e,t,r){if(!0===e&&!0===r)throw new at(Ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MO(n){if(!_t.isDocumentKey(n))throw new at(Ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RO(n){if(_t.isDocumentKey(n))throw new at(Ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function X1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ht()}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new at(Ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=X1(n);throw new at(Ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OO(n,e){if(e<=0)throw new at(Ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const kO=new Map;class PO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new at(Ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new at(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,NO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class DD{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new at(Ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new at(Ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new IM;switch(t.type){case"gapi":return new jI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new at(Ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kO.get(e);t&&(ht("ComponentProvider","Removing Datastore"),kO.delete(e),t.terminate())}(this),Promise.resolve()}}class xi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xi(this.firestore,e,this._key)}}class ua{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class vf extends ua{constructor(e,t,r){super(e,t,Yb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xi(this.firestore,null,new _t(e))}withConverter(e){return new vf(this.firestore,e,this._path)}}function LO(n,e,...t){if(n=(0,Mn.m9)(n),jx("collection","path",e),n instanceof DD){const r=Fn.fromString(e,...t);return RO(r),new vf(n,null,r)}{if(!(n instanceof xi||n instanceof vf))throw new at(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fn.fromString(e,...t));return RO(r),new vf(n.firestore,null,r)}}function eS(n,e,...t){if(n=(0,Mn.m9)(n),1===arguments.length&&(e=m1.R()),jx("doc","path",e),n instanceof DD){const r=Fn.fromString(e,...t);return MO(r),new xi(n,null,new _t(r))}{if(!(n instanceof xi||n instanceof vf))throw new at(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fn.fromString(e,...t));return MO(r),new xi(n.firestore,n instanceof vf?n.converter:null,new _t(r))}}function BO(n,e){return n=(0,Mn.m9)(n),e=(0,Mn.m9)(e),(n instanceof xi||n instanceof vf)&&(e instanceof xi||e instanceof vf)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Hx(n,e){return n=(0,Mn.m9)(n),e=(0,Mn.m9)(e),n instanceof ua&&e instanceof ua&&n.firestore===e.firestore&&rD(n._query,e._query)&&n.converter===e.converter}function VO(n,e=10240){let t=0;return{read:()=>(0,qe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,qe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class tS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lV{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Qi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,qe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,qe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,qe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(s);return new VB(JSON.parse(a),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,qe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,qe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,qe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class fV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,qe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new at(Ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,qe.Z)(function*(a,h){const _=It(a),E=dD(_.yt)+"/documents",D={documents:h.map(se=>lD(_.yt,se))},x=yield _._o("BatchGetDocuments",E,D,h.length),L=new Map;x.forEach(se=>{const _e=function hL(n,e){return"found"in e?function(t,r){Yt(!!r.found);const s=mf(t,r.found.name),a=Vs(r.found.updateTime),h=r.found.createTime?Vs(r.found.createTime):rn.min(),_=new te({mapValue:{fields:r.found.fields}});return Ae.newFoundDocument(s,a,h,_)}(n,e):"missing"in e?function(t,r){Yt(!!r.missing),Yt(!!r.readTime);const s=mf(t,r.missing),a=Vs(r.readTime);return Ae.newNoDocument(s,a)}(n,e):Ht()}(_.yt,se);L.set(_e.key.toString(),_e)});const W=[];return h.forEach(se=>{const _e=L.get(se.toString());Yt(!!_e),W.push(_e)}),W}),function(a,h){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new eE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,qe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const a=_t.fromPath(s);e.mutations.push(new gA(a,e.precondition(a)))}),yield(r=(0,qe.Z)(function*(s,a){const h=It(s),_=dD(h.yt)+"/documents",E={writes:a.map(D=>hD(h.yt,D))};yield h.ao("Commit",_,E)}),function(s,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ht();t=rn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new at(Ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rn.min())?ji.exists(!1):ji.updateTime(t):ji.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rn.min()))throw new at(Ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ji.updateTime(t)}return ji.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pV{constructor(e,t,r,s,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=a,this.kc=r.maxAttempts,this.xo=new GA(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,qe.Z)(function*(){const t=new fV(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(a=>{e.Fc(a)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!qb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!YM(t)}return!1}}class gV{constructor(e,t,r,s){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Yi.UNAUTHENTICATED,this.clientId=m1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,qe.Z)(function*(_){ht("FirestoreClient","Received user=",_.uid),yield a.authCredentialListener(_),a.user=_});return function(_){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ht("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,qe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new at(Ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,qe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=dE(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function UO(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,qe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ht("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,qe.Z)(function*(a){r.isEqual(a)||(yield XR(e.localStore,a),r=a)});return function(a){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Gx.apply(this,arguments)}function $O(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,qe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Wx(n);ht("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>mO(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,a)=>mO(e.remoteStore,a)),n.onlineComponents=e}),qx.apply(this,arguments)}function Wx(n){return zx.apply(this,arguments)}function zx(){return zx=(0,qe.Z)(function*(n){return n.offlineComponents||(ht("FirestoreClient","Using default OfflineComponentProvider"),yield UO(n,new AO)),n.offlineComponents}),zx.apply(this,arguments)}function nS(n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,qe.Z)(function*(n){return n.onlineComponents||(ht("FirestoreClient","Using default OnlineComponentProvider"),yield $O(n,new $x)),n.onlineComponents}),Kx.apply(this,arguments)}function jO(n){return Wx(n).then(e=>e.persistence)}function rS(n){return Wx(n).then(e=>e.localStore)}function Zx(n){return nS(n).then(e=>e.remoteStore)}function Yx(n){return nS(n).then(e=>e.syncEngine)}function gE(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,qe.Z)(function*(n){const e=yield nS(n),t=e.eventManager;return t.onListen=GB.bind(null,e.syncEngine),t.onUnlisten=qB.bind(null,e.syncEngine),t}),Jx.apply(this,arguments)}function GO(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function(s,a,h,_,E){const D=new tS({next:L=>{a.enqueueAndForget(()=>hx(s,x));const W=L.docs.has(h);!W&&L.fromCache?E.reject(new at(Ve.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&L.fromCache&&_&&"server"===_.source?E.reject(new at(Ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(L)},error:L=>E.reject(L)}),x=new gx(Yb(h.path),D,{includeMetadataChanges:!0,Nu:!0});return lx(s,x)}(yield gE(n),n.asyncQueue,e,t,r)})),r.promise}function qO(n,e,t={}){const r=new Qi;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function(s,a,h,_,E){const D=new tS({next:L=>{a.enqueueAndForget(()=>hx(s,x)),L.fromCache&&"server"===_.source?E.reject(new at(Ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(L)},error:L=>E.reject(L)}),x=new gx(h,D,{includeMetadataChanges:!0,Nu:!0});return lx(s,x)}(yield gE(n),n.asyncQueue,e,t,r)})),r.promise}class wV{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new GA(this,"async_queue_retry"),this.Wc=()=>{const t=Y1();t&&ht("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Y1();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Y1();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Qi;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,qe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!zd(t))throw t;ht("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Ji("INTERNAL UNHANDLED ERROR: ",function(a){let h=a.message||"";return a.stack&&(h=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),h}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=cx.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(s),s}zc(){this.Kc&&Ht()}verifyOperationInProgress(){}Xc(){var e=this;return(0,qe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Qx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class DV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ni extends DD{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new wV,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||WO(this),this._firestoreClient.terminate()}}function Us(n){return n._firestoreClient||WO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function WO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZI(n._databaseId,a,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var a,_;n._firestoreClient=new gV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function zO(n,e,t){const r=new Qi;return n.asyncQueue.enqueue((0,qe.Z)(function*(){try{yield UO(n,t),yield $O(n,e),r.resolve()}catch(s){const a=s;if(!("FirebaseError"===(h=a).name?h.code===Ve.FAILED_PRECONDITION||h.code===Ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw a;Hp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var h})).then(()=>r.promise)}function KO(n){if(n._initialized||n._terminated)throw new at(Ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yf(Bs.fromBase64String(e))}catch(t){throw new at(Ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yf(Bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new at(Ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zv{constructor(e){this._methodName=e}}class iS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new at(Ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new at(Ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return En(this._lat,e._lat)||En(this._long,e._long)}}const kV=/^__.*__$/;class PV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xb(e,this.data,t,this.fieldTransforms)}}class ZO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class sS{constructor(e,t,r,s,a,h){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=s,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new sS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return uS(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(YO(this.sa)&&kV.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class FV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||ED(e)}da(e,t,r,s=!1){return new sS({sa:e,methodName:t,fa:r,path:bi.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Yv(n){const e=n._freezeSettings(),t=ED(n._databaseId);return new FV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oS(n,e,t,r,s,a={}){const h=n.da(a.merge||a.mergeFields?2:0,e,t,s);nN("Data must be an object, but it was:",h,r);const _=XO(r,h);let E,D;if(a.merge)E=new G(h.fieldMask),D=h.fieldTransforms;else if(a.mergeFields){const x=[];for(const L of a.mergeFields){const W=rN(e,L,t);if(!h.contains(W))throw new at(Ve.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);tk(x,W)||x.push(W)}E=new G(x),D=h.fieldTransforms.filter(L=>E.covers(L.field))}else E=null,D=h.fieldTransforms;return new PV(new te(_),E,D)}class TD extends Zv{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof TD}}function JO(n,e,t){return new sS({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Xx extends Zv{_toFieldTransform(e){return new iD(e.path,new Jb)}isEqual(e){return e instanceof Xx}}class LV extends Zv{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=JO(this,e,!0),r=this._a.map(a=>Jv(a,t)),s=new Uv(r);return new iD(e.path,s)}isEqual(e){return this===e}}class BV extends Zv{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=JO(this,e,!0),r=this._a.map(a=>Jv(a,t)),s=new $v(r);return new iD(e.path,s)}isEqual(e){return this===e}}class VV extends Zv{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Qb(e.yt,VM(e.yt,this.wa));return new iD(e.path,t)}isEqual(e){return this===e}}function eN(n,e,t,r){const s=n.da(1,e,t);nN("Data must be an object, but it was:",s,r);const a=[],h=te.empty();Lm(r,(E,D)=>{const x=aS(e,E,t);D=(0,Mn.m9)(D);const L=s.ca(x);if(D instanceof TD)a.push(x);else{const W=Jv(D,L);null!=W&&(a.push(x),h.set(x,W))}});const _=new G(a);return new ZO(h,_,s.fieldTransforms)}function tN(n,e,t,r,s,a){const h=n.da(1,e,t),_=[rN(e,r,t)],E=[s];if(a.length%2!=0)throw new at(Ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<a.length;W+=2)_.push(rN(e,a[W])),E.push(a[W+1]);const D=[],x=te.empty();for(let W=_.length-1;W>=0;--W)if(!tk(D,_[W])){const se=_[W];let _e=E[W];_e=(0,Mn.m9)(_e);const Re=h.ca(se);if(_e instanceof TD)D.push(se);else{const ze=Jv(_e,Re);null!=ze&&(D.push(se),x.set(se,ze))}}const L=new G(D);return new ZO(x,L,h.fieldTransforms)}function QO(n,e,t,r=!1){return Jv(t,n.da(r?4:3,e))}function Jv(n,e){if(ek(n=(0,Mn.m9)(n)))return nN("Unsupported field value:",e,n),XO(n,e);if(n instanceof Zv)return function(t,r){if(!YO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let a=0;for(const h of t){let _=Jv(h,r.aa(a));null==_&&(_={nullValue:"NULL_VALUE"}),s.push(_),a++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Mn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VM(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=ai.fromDate(t);return{timestampValue:tE(r.yt,s)}}if(t instanceof ai){const s=new ai(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:tE(r.yt,s)}}if(t instanceof iS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yf)return{bytesValue:oR(r.yt,t._byteString)};if(t instanceof xi){const s=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(s))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${X1(t)}`)}(n,e)}function XO(n,e){const t={};return JI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lm(n,(r,s)=>{const a=Jv(s,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function ek(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ai||n instanceof iS||n instanceof yf||n instanceof xi||n instanceof Zv)}function nN(n,e,t){if(!ek(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=X1(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function rN(n,e,t){if((e=(0,Mn.m9)(e))instanceof eg)return e._internalPath;if("string"==typeof e)return aS(n,e);throw uS("Field path arguments must be of type string or ",n,!1,void 0,t)}const UV=new RegExp("[~\\*/\\[\\]]");function aS(n,e,t){if(e.search(UV)>=0)throw uS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eg(...e.split("."))._internalPath}catch{throw uS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uS(n,e,t,r,s){const a=r&&!r.isEmpty(),h=void 0!==s;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let E="";return(a||h)&&(E+=" (found",a&&(E+=` in field ${r}`),h&&(E+=` in document ${s}`),E+=")"),new at(Ve.INVALID_ARGUMENT,_+n+E)}function tk(n,e){return n.some(t=>t.isEqual(e))}class SD{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $V(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $V extends SD{data(){return super.data()}}function cS(n,e){return"string"==typeof e?aS(n,e):e instanceof eg?e._internalPath:e._delegate._internalPath}function nk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new at(Ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iN{}class ID extends iN{}function Wm(n,e,...t){let r=[];e instanceof iN&&r.push(e),r=r.concat(t),function(s){const a=s.filter(_=>_ instanceof mE).length,h=s.filter(_=>_ instanceof AD).length;if(a>1||a>0&&h>0)throw new at(Ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class AD extends ID{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new AD(e,t,r)}_apply(e){const t=this._parse(e);return ok(e._query,t),new ua(e.firestore,e.converter,hA(e._query,t))}_parse(e){const t=Yv(e.firestore);return function(s,a,h,_,E,D,x){let L;if(E.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new at(Ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){sk(x,D);const W=[];for(const se of x)W.push(ik(_,s,se));L={arrayValue:{values:W}}}else L=ik(_,s,x)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||sk(x,D),L=QO(h,"where",x,"in"===D||"not-in"===D);return Zn.create(E,D,L)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class mE extends iN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:br.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let a=r;const h=s.getFlattenedFilters();for(const _ of h)ok(a,_),a=hA(a,_)}(e._query,t),new ua(e.firestore,e.converter,hA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sN extends ID{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sN(e,t)}_apply(e){const t=function(r,s,a){if(null!==r.startAt)throw new at(Ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new at(Ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new l(s,a);return function(_,E){if(null===lA(_)){const D=x1(_);null!==D&&ak(0,D,E.field)}}(r,h),h}(e._query,this._field,this._direction);return new ua(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Er(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lS extends ID{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lS(e,t,r)}_apply(e){return new ua(e.firestore,e.converter,N1(e._query,this._limit,this._limitType))}}class dS extends ID{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dS(e,t,r)}_apply(e){const t=rk(e,this.type,this._docOrFields,this._inclusive);return new ua(e.firestore,e.converter,(s=t,new Er((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class hS extends ID{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new hS(e,t,r)}_apply(e){const t=rk(e,this.type,this._docOrFields,this._inclusive);return new ua(e.firestore,e.converter,(s=t,new Er((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function rk(n,e,t,r){if(t[0]=(0,Mn.m9)(t[0]),t[0]instanceof SD)return function(s,a,h,_,E){if(!_)throw new at(Ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const x of Vv(s))if(x.field.isKeyField())D.push(Yp(a,_.key));else{const L=_.data.field(x.field);if(kv(L))throw new at(Ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===L){const W=x.field.canonicalString();throw new at(Ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}D.push(L)}return new Ul(D,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Yv(n.firestore);return function(a,h,_,E,D,x){const L=a.explicitOrderBy;if(D.length>L.length)throw new at(Ve.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let se=0;se<D.length;se++){const _e=D[se];if(L[se].field.isKeyField()){if("string"!=typeof _e)throw new at(Ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof _e}`);if(!dA(a)&&-1!==_e.indexOf("/"))throw new at(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${_e}' contains a slash.`);const Re=a.path.child(Fn.fromString(_e));if(!_t.isDocumentKey(Re))throw new at(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const ze=new _t(Re);W.push(Yp(h,ze))}else{const Re=QO(_,E,_e);W.push(Re)}}return new Ul(W,x)}(n._query,n.firestore._databaseId,s,e,t,r)}}function ik(n,e,t){if("string"==typeof(t=(0,Mn.m9)(t))){if(""===t)throw new at(Ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dA(e)&&-1!==t.indexOf("/"))throw new at(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Fn.fromString(t));if(!_t.isDocumentKey(r))throw new at(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yp(n,new _t(r))}if(t instanceof xi)return Yp(n,t._key);throw new at(Ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X1(t)}.`)}function sk(n,e){if(!Array.isArray(n)||0===n.length)throw new at(Ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new at(Ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ok(n,e){if(e.isInequality()){const r=x1(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new at(Ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const a=lA(n);null!==a&&ak(0,s,a)}const t=function(r,s){for(const a of r)for(const h of a.getFlattenedFilters())if(s.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new at(Ve.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ak(n,e,t){if(!t.isEqual(e))throw new at(Ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class oN{convertValue(e,t="none"){switch(Vl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ht()}}convertObject(e,t){const r={};return Lm(e.fields,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new iS(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Kb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pv(e));default:return null}}convertTimestamp(e){const t=Kd(e);return new ai(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Fn.fromString(e);Yt(mR(r));const s=new ff(r.get(1),r.get(3)),a=new _t(r.popFirst(5));return s.isEqual(t)||Ji(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function fS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YV extends oN{constructor(e){super(),this.firestore=e}convertBytes(e){return new yf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}class Qv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tg extends SD{constructor(e,t,r,s,a,h){super(e,t,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xD extends tg{data(e={}){return super.data(e)}}class zm{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Qv(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xD(this._firestore,this._userDataWriter,r.key,r,new Qv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new at(Ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new xD(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Qv(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||3!==h.type).map(h=>{const _=new xD(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Qv(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,D=-1;return 0!==h.type&&(E=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),1!==h.type&&(a=a.add(h.doc),D=a.indexOf(h.doc.key)),{type:JV(h.type),doc:_,oldIndex:E,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}function ck(n,e){return n instanceof tg&&e instanceof tg?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof zm&&e instanceof zm&&n._firestore===e._firestore&&Hx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Km extends oN{constructor(e){super(),this.firestore=e}convertBytes(e){return new yf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}function lk(n,e,t){n=Xn(n,xi);const r=Xn(n.firestore,Ni),s=fS(n.converter,e,t);return _E(r,[oS(Yv(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,ji.none())])}function dk(n,e,t,...r){n=Xn(n,xi);const s=Xn(n.firestore,Ni),a=Yv(s);let h;return h="string"==typeof(e=(0,Mn.m9)(e))||e instanceof eg?tN(a,"updateDoc",n._key,e,t,r):eN(a,"updateDoc",n._key,e),_E(s,[h.toMutation(n._key,ji.exists(!0))])}function hk(n,...e){var t,r,s;n=(0,Mn.m9)(n);let a={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Qx(e[h])||(a=e[h],h++);const _={includeMetadataChanges:a.includeMetadataChanges};if(Qx(e[h])){const L=e[h];e[h]=null===(t=L.next)||void 0===t?void 0:t.bind(L),e[h+1]=null===(r=L.error)||void 0===r?void 0:r.bind(L),e[h+2]=null===(s=L.complete)||void 0===s?void 0:s.bind(L)}let E,D,x;if(n instanceof xi)D=Xn(n.firestore,Ni),x=Yb(n._key.path),E={next:L=>{e[h]&&e[h](aN(D,n,L))},error:e[h+1],complete:e[h+2]};else{const L=Xn(n,ua);D=Xn(L.firestore,Ni),x=L._query;const W=new Km(D);E={next:se=>{e[h]&&e[h](new zm(D,W,L,se))},error:e[h+1],complete:e[h+2]},nk(n._query)}return function(L,W,se,_e){const Re=new tS(_e),ze=new gx(W,Re,se);return L.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return lx(yield gE(L),ze)})),()=>{Re.bc(),L.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return hx(yield gE(L),ze)}))}}(Us(D),x,_,E)}function _E(n,e){return function(t,r){const s=new Qi;return t.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function WB(n,e,t){return bx.apply(this,arguments)}(yield Yx(t),r,s)})),s.promise}(Us(n),e)}function aN(n,e,t){const r=t.docs.get(e._key),s=new Km(n);return new tg(n,s,e._key,r,new Qv(t.hasPendingWrites,t.fromCache),e.converter)}const aU={maxAttempts:5};class fk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yv(e)}set(e,t,r){this._verifyNotCommitted();const s=Zm(e,this._firestore),a=fS(s.converter,t,r),h=oS(this._dataReader,"WriteBatch.set",s._key,a,null!==s.converter,r);return this._mutations.push(h.toMutation(s._key,ji.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const a=Zm(e,this._firestore);let h;return h="string"==typeof(t=(0,Mn.m9)(t))||t instanceof eg?tN(this._dataReader,"WriteBatch.update",a._key,t,r,s):eN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(h.toMutation(a._key,ji.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zm(e,this._firestore);return this._mutations=this._mutations.concat(new eE(t._key,ji.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(Ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zm(n,e){if((n=(0,Mn.m9)(n)).firestore!==e)throw new at(Ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yv(e)}get(e){const t=Zm(e,this._firestore),r=new YV(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return Ht();const a=s[0];if(a.isFoundDocument())return new SD(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new SD(this._firestore,r,t._key,null,t.converter);throw Ht()})}set(e,t,r){const s=Zm(e,this._firestore),a=fS(s.converter,t,r),h=oS(this._dataReader,"Transaction.set",s._key,a,null!==s.converter,r);return this._transaction.set(s._key,h),this}update(e,t,r,...s){const a=Zm(e,this._firestore);let h;return h="string"==typeof(t=(0,Mn.m9)(t))||t instanceof eg?tN(this._dataReader,"Transaction.update",a._key,t,r,s):eN(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,h),this}delete(e){const t=Zm(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zm(e,this._firestore),r=new Km(this._firestore);return super.get(e).then(s=>new tg(this._firestore,r,t._key,s._document,new Qv(!1,!1),t.converter))}}function uN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new at("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gk(){if(typeof Uint8Array>"u")throw new at("unimplemented","Uint8Arrays are not available in this environment.")}function mk(){if(!function zb(){return typeof atob<"u"}())throw new at("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Pm=Ii.SDK_VERSION,(0,Ii._registerComponent)(new Hd.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const a=t.getProvider("app").getImmediate(),h=new Ni(new $I(t.getProvider("auth-internal")),new Kw(t.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new at(Ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ff(_.options.projectId,E)}(a,r),a);return s=Object.assign({useFetchStreams:e},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),(0,Ii.registerVersion)(c1,"3.8.0",n),(0,Ii.registerVersion)(c1,"3.8.0","esm2017")}();class ND{constructor(e){this._delegate=e}static fromBase64String(e){return mk(),new ND(yf.fromBase64String(e))}static fromUint8Array(e){return gk(),new ND(yf.fromUint8Array(e))}toBase64(){return mk(),this._delegate.toBase64()}toUint8Array(){return gk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cN(n){return function _U(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vU{enableIndexedDbPersistence(e,t){return function SV(n,e){KO(n=Xn(n,Ni));const t=Us(n),r=n._freezeSettings(),s=new $x;return zO(t,s,new xO(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function IV(n){KO(n=Xn(n,Ni));const e=Us(n),t=n._freezeSettings(),r=new $x;return zO(e,r,new uV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function AV(n){if(n._initialized&&!n._terminated)throw new at(Ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,qe.Z)(function*(){try{yield(t=(0,qe.Z)(function*(r){if(!vc.C())return Promise.resolve();const s=r+"main";yield vc.delete(s)}),function(r){return t.apply(this,arguments)})(kA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class _k{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ff||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function FO(n,e,t,r={}){var s;const a=(n=Xn(n,DD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Hp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,_;if("string"==typeof r.mockUserToken)h=r.mockUserToken,_=Yi.MOCK_USER;else{h=(0,Mn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new at(Ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Yi(E)}n._authCredentials=new _c(new f1(h,_))}}(this._delegate,e,t,r)}enableNetwork(){return function NV(n){return function mV(n){return n.asyncQueue.enqueue((0,qe.Z)(function*(){const e=yield jO(n),t=yield Zx(n);return e.setNetworkEnabled(!0),function(r){const s=It(r);return s._u.delete(0),CD(s)}(t)}))}(Us(n=Xn(n,Ni)))}(this._delegate)}disableNetwork(){return function MV(n){return function _V(n){return n.asyncQueue.enqueue((0,qe.Z)(function*(){const e=yield jO(n),t=yield Zx(n);return e.setNetworkEnabled(!1),(r=(0,qe.Z)(function*(s){const a=It(s);a._u.add(0),yield uE(a),a.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Us(n=Xn(n,Ni)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,NO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function xV(n){return function(e){const t=new Qi;return e.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function YB(n,e){return Tx.apply(this,arguments)}(yield Yx(e),t)})),t.promise}(Us(n=Xn(n,Ni)))}(this._delegate)}onSnapshotsInSync(e){return function oU(n,e){return function bV(n,e){const t=new tS(e);return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return r=yield gE(n),s=t,It(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return r=yield gE(n),s=t,void It(r).Ru.delete(s);var r,s}))}}(Us(n=Xn(n,Ni)),Qx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new at("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vE(this,LO(this._delegate,e))}catch(t){throw xu(t,"collection()","Firestore.collection()")}}doc(e){try{return new $l(this,eS(this._delegate,e))}catch(t){throw xu(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Nu(this,function cV(n,e){if(n=Xn(n,DD),jx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new at(Ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ua(n,null,(t=e,new Er(Fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xu(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cU(n,e,t){n=Xn(n,Ni);const r=Object.assign(Object.assign({},aU),t);return function(s){if(s.maxAttempts<1)throw new at(Ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,a,h){const _=new Qi;return s.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){const E=yield function HO(n){return nS(n).then(e=>e.datastore)}(s);new pV(s.asyncQueue,E,h,a,_).run()})),_.promise}(Us(n),s=>e(new uU(n,s)),r)}(this._delegate,t=>e(new vk(this,t)))}batch(){return Us(this._delegate),new yk(new fk(this._delegate,e=>_E(this._delegate,e)))}loadBundle(e){return function RV(n,e){const t=Us(n=Xn(n,Ni)),r=new DV;return function EV(n,e,t,r){const s=function(a,h){let _;return _="string"==typeof a?(new TextEncoder).encode(a):a,E=function(E,D){if(E instanceof Uint8Array)return VO(E,D);if(E instanceof ArrayBuffer)return VO(new Uint8Array(E),D);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new lV(E,h);var E}(t,ED(e));n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){!function aV(n,e,t){const r=It(n);var s;(s=(0,qe.Z)(function*(a,h,_){try{const E=yield h.getMetadata();if(yield function(W,se){const _e=It(W),Re=Vs(se.createTime);return _e.persistence.runTransaction("hasNewerBundle","readonly",ze=>_e.Ns.getBundleMetadata(ze,se.id)).then(ze=>!!ze&&ze.createTime.compareTo(Re)>=0)}(a.localStore,E))return yield h.close(),_._completeWith({taskState:"Success",documentsLoaded:(W=E).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);_._updateProgress(yO(E));const D=new UB(E,a.localStore,h.yt);let x=yield h.mc();for(;x;){const W=yield D.Fu(x);W&&_._updateProgress(W),x=yield h.mc()}const L=yield D.complete();return yield Xp(a,L.Lu,void 0),yield function(W,se){const _e=It(W);return _e.persistence.runTransaction("Save bundle","readwrite",Re=>_e.Ns.saveBundleMetadata(Re,se))}(a.localStore,E),_._completeWith(L.progress),Promise.resolve(L.Bu)}catch(E){return Hp("SyncEngine",`Loading bundle failed with ${E}`),_._failWith(E),Promise.resolve(new Set)}var W}),function(a,h,_){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield Yx(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OV(n,e){return function CV(n,e){return n.asyncQueue.enqueue((0,qe.Z)(function*(){return function(t,r){const s=It(t);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ns.getNamedQuery(a,r))}(yield rS(n),e)}))}(Us(n=Xn(n,Ni)),e).then(t=>t?new ua(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Nu(this,t):null)}}class pS extends oN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ND(new yf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $l.forKey(t,this.firestore,null)}}class vk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pS(e)}get(e){const t=ey(e);return this._delegate.get(t).then(r=>new MD(this._firestore,new tg(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ey(e);return r?(uN("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const a=ey(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...s),this}delete(e){const t=ey(e);return this._delegate.delete(t),this}}class yk{constructor(e){this._delegate=e}set(e,t,r){const s=ey(e);return r?(uN("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const a=ey(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...s),this}delete(e){const t=ey(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xv{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new RD(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xv.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let a=s.get(t);return a||(a=new Xv(e,new pS(e),t),s.set(t,a)),a}}Xv.INSTANCES=new WeakMap;class $l{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new at("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $l(t,new xi(t._delegate,r,new _t(e)))}static forKey(e,t,r){return new $l(t,new xi(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vE(this.firestore,LO(this._delegate,e))}catch(t){throw xu(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mn.m9)(e))instanceof xi&&BO(this._delegate,e)}set(e,t){t=uN("DocumentReference.set",t);try{return t?lk(this._delegate,e,t):lk(this._delegate,e)}catch(r){throw xu(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?dk(this._delegate,e):dk(this._delegate,e,t,...r)}catch(s){throw xu(s,"updateDoc()","DocumentReference.update()")}}delete(){return function iU(n){return _E(Xn(n.firestore,Ni),[new eE(n._key,ji.none())])}(this._delegate)}onSnapshot(...e){const t=bk(e),r=Ek(e,s=>new MD(this.firestore,new tg(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return hk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function XV(n){n=Xn(n,xi);const e=Xn(n.firestore,Ni),t=Us(e),r=new Km(e);return function vV(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return(r=(0,qe.Z)(function*(s,a,h){try{const _=yield function(E,D){const x=It(E);return x.persistence.runTransaction("read document","readonly",L=>x.localDocuments.getDocument(L,D))}(s,a);_.isFoundDocument()?h.resolve(_):_.isNoDocument()?h.resolve(null):h.reject(new at(Ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const E=dE(_,`Failed to get document '${a} from cache`);h.reject(E)}}),function(s,a,h){return r.apply(this,arguments)})(yield rS(n),e,t);var r})),t.promise}(t,n._key).then(s=>new tg(e,r,n._key,s,new Qv(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function eU(n){n=Xn(n,xi);const e=Xn(n.firestore,Ni);return GO(Us(e),n._key,{source:"server"}).then(t=>aN(e,n,t))}(this._delegate):function QV(n){n=Xn(n,xi);const e=Xn(n.firestore,Ni);return GO(Us(e),n._key).then(t=>aN(e,n,t))}(this._delegate),t.then(r=>new MD(this.firestore,new tg(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $l(this.firestore,this._delegate.withConverter(e?Xv.getInstance(this.firestore,e):null))}}function xu(n,e,t){return n.message=n.message.replace(e,t),n}function bk(n){for(const e of n)if("object"==typeof e&&!cN(e))return e;return{}}function Ek(n,e){var t,r;let s;return s=cN(n[0])?n[0]:cN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{s.next&&s.next(e(a))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class MD{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ck(this._delegate,e._delegate)}}class RD extends MD{data(e){const t=this._delegate.data(e);return function h1(n,e){n||Ht()}(void 0!==t),t}}class Nu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pS(e)}where(e,t,r){try{return new Nu(this.firestore,Wm(this._delegate,function jV(n,e,t){const r=e,s=cS("where",n);return AD._create(s,r,t)}(e,t,r)))}catch(s){throw xu(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Nu(this.firestore,Wm(this._delegate,function HV(n,e="asc"){const t=e,r=cS("orderBy",n);return sN._create(r,t)}(e,t)))}catch(r){throw xu(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Nu(this.firestore,Wm(this._delegate,function GV(n){return OO("limit",n),lS._create("limit",n,"F")}(e)))}catch(t){throw xu(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Nu(this.firestore,Wm(this._delegate,function qV(n){return OO("limitToLast",n),lS._create("limitToLast",n,"L")}(e)))}catch(t){throw xu(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Nu(this.firestore,Wm(this._delegate,function WV(...n){return dS._create("startAt",n,!0)}(...e)))}catch(t){throw xu(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Nu(this.firestore,Wm(this._delegate,function zV(...n){return dS._create("startAfter",n,!1)}(...e)))}catch(t){throw xu(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Nu(this.firestore,Wm(this._delegate,function KV(...n){return hS._create("endBefore",n,!1)}(...e)))}catch(t){throw xu(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Nu(this.firestore,Wm(this._delegate,function ZV(...n){return hS._create("endAt",n,!0)}(...e)))}catch(t){throw xu(t,"endAt()","Query.endAt()")}}isEqual(e){return Hx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function nU(n){n=Xn(n,ua);const e=Xn(n.firestore,Ni),t=Us(e),r=new Km(e);return function yV(n,e){const t=new Qi;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return(r=(0,qe.Z)(function*(s,a,h){try{const _=yield z1(s,a,!0),E=new CO(a,_.Hi),D=E.Wu(_.documents),x=E.applyChanges(D,!1);h.resolve(x.snapshot)}catch(_){const E=dE(_,`Failed to execute query '${a} against cache`);h.reject(E)}}),function(s,a,h){return r.apply(this,arguments)})(yield rS(n),e,t);var r})),t.promise}(t,n._query).then(s=>new zm(e,r,n,s))}(this._delegate):"server"===e?.source?function rU(n){n=Xn(n,ua);const e=Xn(n.firestore,Ni),t=Us(e),r=new Km(e);return qO(t,n._query,{source:"server"}).then(s=>new zm(e,r,n,s))}(this._delegate):function tU(n){n=Xn(n,ua);const e=Xn(n.firestore,Ni),t=Us(e),r=new Km(e);return nk(n._query),qO(t,n._query).then(s=>new zm(e,r,n,s))}(this._delegate),t.then(r=>new lN(this.firestore,new zm(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bk(e),r=Ek(e,s=>new lN(this.firestore,new zm(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return hk(this._delegate,t,r)}withConverter(e){return new Nu(this.firestore,this._delegate.withConverter(e?Xv.getInstance(this.firestore,e):null))}}class bU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new RD(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Nu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new RD(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new RD(this._firestore,r))})}isEqual(e){return ck(this._delegate,e._delegate)}}class vE extends Nu{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $l(this.firestore,e):null}doc(e){try{return new $l(this.firestore,void 0===e?eS(this._delegate):eS(this._delegate,e))}catch(t){throw xu(t,"doc()","CollectionReference.doc()")}}add(e){return function sU(n,e){const t=Xn(n.firestore,Ni),r=eS(n),s=fS(n.converter,e);return _E(t,[oS(Yv(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,ji.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new $l(this.firestore,t))}isEqual(e){return BO(this._delegate,e._delegate)}withConverter(e){return new vE(this.firestore,this._delegate.withConverter(e?Xv.getInstance(this.firestore,e):null))}}function ey(n){return Xn(n,xi)}class dN{constructor(...e){this._delegate=new eg(...e)}static documentId(){return new dN(bi.keyField().canonicalString())}isEqual(e){return(e=(0,Mn.m9)(e))instanceof eg&&this._delegate._internalPath.isEqual(e._internalPath)}}class ty{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dU(){return new Xx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ty(e)}static delete(){const e=function lU(){return new TD("deleteField")}();return e._methodName="FieldValue.delete",new ty(e)}static arrayUnion(...e){const t=function hU(...n){return new LV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ty(t)}static arrayRemove(...e){const t=function fU(...n){return new BV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ty(t)}static increment(e){const t=function pU(n){return new VV("increment",n)}(e);return t._methodName="FieldValue.increment",new ty(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const EU={Firestore:_k,GeoPoint:iS,Timestamp:ai,Blob:ND,Transaction:vk,WriteBatch:yk,DocumentReference:$l,DocumentSnapshot:MD,Query:Nu,QueryDocumentSnapshot:RD,QuerySnapshot:lN,CollectionReference:vE,FieldPath:dN,FieldValue:ty,setLogLevel:function yU(n){!function SM(n){jp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function wU(n){(function CU(n,e){n.INTERNAL.registerComponent(new Hd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},EU)))})(n,(e,t)=>new _k(e,t,new vU)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(rI.Z);var Ck=F(6451),gS=F(5363),DU=F(6063);class TU extends Bi.x{constructor(e=1/0,t=1/0,r=DU.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:a,_windowTime:h}=this;t||(r.push(e),!s&&r.push(a.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,a=s.slice();for(let h=0;h<a.length&&!e.closed;h+=r?1:2)e.next(a[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,a=(s?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!s){const h=t.now();let _=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)_=E;_&&r.splice(0,_+1)}}}var SU=F(3099);function wk(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,SU.B)({connector:()=>new TU(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Dk(n,e){return(0,Vi.m)(e)?Ui(()=>n,e):Ui(()=>n)}var hN=F(9468);class gN{constructor(){return(0,Ps.vb)("app-check")}}typeof window<"u"&&window;var Sk=F(9260);const Ik=new d.OlP("angularfire2.auth.use-emulator"),Ak=new d.OlP("angularfire2.auth.settings"),xk=new d.OlP("angularfire2.auth.tenant-id"),Nk=new d.OlP("angularfire2.auth.langugage-code"),Mk=new d.OlP("angularfire2.auth.use-device-language"),Rk=new d.OlP("angularfire.auth.persistence"),Ok=(n,e,t,r,s,a,h,_)=>(0,oa.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=s,a&&E.useDeviceLanguage(),h)for(const[D,x]of Object.entries(h))E.settings[D]=x;return _&&E.setPersistence(_),E},[t,r,s,a,h,_]);let OD=(()=>{class n{constructor(t,r,s,a,h,_,E,D,x,L,W,se){const _e=new Bi.x,Re=Zt(void 0).pipe((0,gS.Q)(h.outsideAngular),Ui(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,k.U)(()=>(0,oa.on)(t,a,r)),(0,k.U)(ze=>Ok(ze,a,_,D,x,L,E,W)),wk({bufferSize:1,refCount:!1}));if(Ne(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Zt(null);else{Re.pipe($i()).subscribe();const Ct=Re.pipe(Ui(Tt=>Tt.getRedirectResult().then(wt=>wt,()=>null)),Ps.iC,wk({bufferSize:1,refCount:!1})),St=Re.pipe(Ui(Tt=>new fr.y(wt=>({unsubscribe:a.runOutsideAngular(()=>Tt.onAuthStateChanged(Pt=>wt.next(Pt),Pt=>wt.error(Pt),()=>wt.complete()))})))),Vt=Re.pipe(Ui(Tt=>new fr.y(wt=>({unsubscribe:a.runOutsideAngular(()=>Tt.onIdTokenChanged(Pt=>wt.next(Pt),Pt=>wt.error(Pt),()=>wt.complete()))}))));this.authState=Ct.pipe(Dk(St),(0,hN.R)(h.outsideAngular),(0,gS.Q)(h.insideAngular)),this.user=Ct.pipe(Dk(Vt),(0,hN.R)(h.outsideAngular),(0,gS.Q)(h.insideAngular)),this.idToken=this.user.pipe(Ui(Tt=>Tt?(0,Pn.D)(Tt.getIdToken()):Zt(null))),this.idTokenResult=this.user.pipe(Ui(Tt=>Tt?(0,Pn.D)(Tt.getIdTokenResult()):Zt(null))),this.credential=(0,Ck.T)(Ct,_e,this.authState.pipe(mi(Tt=>!Tt))).pipe((0,k.U)(Tt=>Tt?.user?Tt:null),(0,hN.R)(h.outsideAngular),(0,gS.Q)(h.insideAngular))}return(0,oa.pX)(this,Re,a,{spy:{apply:(ze,Ct,St)=>{(ze.startsWith("signIn")||ze.startsWith("createUser"))&&St.then(Vt=>_e.next(Vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oa.Dh),d.LFG(oa.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ps.HU),d.LFG(Ik,8),d.LFG(Ak,8),d.LFG(xk,8),d.LFG(Nk,8),d.LFG(Mk,8),d.LFG(Rk,8),d.LFG(gN,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FU=(()=>{class n{constructor(){Sk.Z.registerVersion("angularfire",Ps.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[OD]}),n})();function kk(n,e){return function LU(n,e=Q0.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function _N(n,e){return kk(n,e).pipe((0,k.U)(t=>({payload:t,type:"query"})))}function _S(n,e){return _N(n,e).pipe(gu(void 0),X0(),(0,k.U)(([t,r])=>{const s=r.payload.docChanges(),a=s.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,_)=>{const E=s.find(x=>x.doc.ref.isEqual(h.ref)),D=t?.payload.docs.find(x=>x.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||a.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:h}})}),a}))}function Pk(n,e,t){return _S(n,t).pipe(Gc((r,s)=>function VU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function UU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(a=>a.payload),e),[]),eb(),(0,k.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function vN(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Fk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Lk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_S(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,k.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(gu(void 0),X0(),mi(([r,s])=>s.length>0||!r),(0,k.U)(([r,s])=>s),Ps.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Fk(e);return Pk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ps.iC)}valueChanges(e={}){return _N(this.query,this.afs.schedulers.outsideAngular).pipe((0,k.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ps.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(Ps.iC)}add(e){return this.ref.add(e)}doc(e){return new Bk(this.ref.doc(e),this.afs)}}class Bk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:a}=$k(r,t);return new Lk(s,a,this.afs)}snapshotChanges(){return function BU(n,e){return kk(n,e).pipe(gu(void 0),X0(),(0,k.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ps.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,k.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe(Ps.iC)}}class $U{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_S(this.query,this.afs.schedulers.outsideAngular).pipe((0,k.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),mi(t=>t.length>0),Ps.iC):_S(this.query,this.afs.schedulers.outsideAngular).pipe(Ps.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Fk(e);return Pk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ps.iC)}valueChanges(e={}){return _N(this.query,this.afs.schedulers.outsideAngular).pipe((0,k.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Ps.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(Ps.iC)}}const Vk=new d.OlP("angularfire2.enableFirestorePersistence"),Uk=new d.OlP("angularfire2.firestore.persistenceSettings"),jU=new d.OlP("angularfire2.firestore.settings"),HU=new d.OlP("angularfire2.firestore.use-emulator");function $k(n,e=(t=>t)){return{query:e(n),ref:n}}let jk=(()=>{class n{constructor(t,r,s,a,h,_,E,D,x,L,W,se,_e,Re,ze,Ct,St){this.schedulers=E;const Vt=(0,oa.on)(t,_,r),Tt=x;L&&Ok(Vt,_,W,_e,Re,ze,se,Ct),[this.firestore,this.persistenceEnabled$]=(0,oa.cc)(`${Vt.name}.firestore`,"AngularFirestore",Vt.name,()=>{const wt=_.runOutsideAngular(()=>Vt.firestore());if(a&&wt.settings(a),Tt&&wt.useEmulator(...Tt),s&&!Ne(h)){const Pt=()=>{try{return(0,Pn.D)(wt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(An){return typeof console<"u"&&console.warn(An),Zt(!1)}};return[wt,_.runOutsideAngular(Pt)]}return[wt,Zt(!1)]},[a,Tt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:h}=$k(s,r),_=this.schedulers.ngZone.run(()=>a);return new Lk(_,h,this)}collectionGroup(t,r){const s=r||(h=>h),a=this.firestore.collectionGroup(t);return new $U(s(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Bk(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oa.Dh),d.LFG(oa.xv,8),d.LFG(Vk,8),d.LFG(jU,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Ps.HU),d.LFG(Uk,8),d.LFG(HU,8),d.LFG(OD,8),d.LFG(Ik,8),d.LFG(Ak,8),d.LFG(xk,8),d.LFG(Nk,8),d.LFG(Mk,8),d.LFG(Rk,8),d.LFG(gN,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GU=(()=>{class n{constructor(){Sk.Z.registerVersion("angularfire",Ps.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Vk,useValue:!0},{provide:Uk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[jk]}),n})();class el{constructor(e,t,r,s){this.afs=e,this.afAuth=t,this.router=r,this.route=s,this.userData={uid:null,email:null,displayName:null,photoURL:"../assets/dummy-user.png",emailVerified:!1},this.app=(0,Jc.ZF)(Np_firebase),this.appCheck=Zr(this.app,{provider:new _o("6LfLt9IjAAAAAMDLMl7xkkZtneFyCglcnQ7Sjj3D"),isTokenAutoRefreshEnabled:!0})}getToken(){var e=this;return(0,qe.Z)(function*(){let t;try{t=yield function Gd(n,e){return gc.apply(this,arguments)}(e.appCheck)}catch{return}return t})()}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(r=>{r.user&&r.user.emailVerified?(this.SetUserData(r.user),this.router.navigate(["dashboard"])):this.router.navigate(["verify-email-address"])}).catch(r=>{window.alert(r.message)})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(r=>{this.SendVerificationMail(r.user),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(e){return e.sendEmailVerification().then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){let e=localStorage.getItem("WebRTCVideoCallUser");return e&&(e=JSON.parse(e),this.userData=e),!(!e||!1===e.emailVerified)}GoogleAuth(){return this.AuthLogin(new nI.Q)}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.SetUserData(t.user),this.router.navigate(["dashboard"])}).catch(t=>{window.alert(t)})}SetUserData(e){localStorage.setItem("WebRTCVideoCallUser",JSON.stringify({uid:e.uid,email:e.email,displayName:e.displayName?e.displayName:e.email,photoURL:e.photoURL,emailVerified:e.emailVerified}))}SignOut(){this.afAuth.signOut().then(()=>{this.userData=null,localStorage.removeItem("WebRTCVideoCallUser"),this.router.navigate(["sign-in"])})}getValidationMessage(e){e.validationMessage=null,e&&e.errors&&e.dirty&&((e.errors.pattern||e.errors.email)&&(e.errors.validationMessage=`Invalid ${e.name}`),e.errors.required&&(e.errors.validationMessage="required"))}}el.\u0275fac=function(e){return new(e||el)(d.LFG(jk),d.LFG(OD),d.LFG(_s),d.LFG(Rl))},el.\u0275prov=d.Yz7({token:el,factory:el.\u0275fac,providedIn:"root"});class kD{constructor(e,t){this.authService=e,this.router=t}ngOnInit(){this.loginForm={email:"",password:""},this.backToPreviousPage()}backToPreviousPage(){const{redirect:e}=window.history.state;this.router.navigateByUrl(e||"/dashboard")}}kD.\u0275fac=function(e){return new(e||kD)(d.Y36(el),d.Y36(_s))},kD.\u0275cmp=d.Xpm({type:kD,selectors:[["app-sign-in"]],decls:35,vars:5,consts:[["name","userLoginForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],["userLoginForm","ngForm"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","me-1"],[1,"form-group","text-center"],["routerLink","/forgot-password",1,"link"],[1,"form-group","text-center","mb-0"],["routerLink","/register-user",1,"link"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"form",0,1)(2,"h4",2),d._UZ(3,"i",3),d._uU(4," VideoWebRTC "),d.qZA(),d.TgZ(5,"div",4)(6,"h5"),d._uU(7,"Sign In"),d.qZA(),d.TgZ(8,"div",5)(9,"input",6,7),d.NdJ("ngModelChange",function(a){return t.loginForm.email=a})("ngModelChange",function(){d.CHM(r);const a=d.MAs(10);return d.KtG(t.authService.getValidationMessage(a))}),d.qZA(),d.TgZ(11,"div",8),d._uU(12),d.qZA()(),d.TgZ(13,"div",5)(14,"input",9,10),d.NdJ("ngModelChange",function(a){return t.loginForm.password=a})("ngModelChange",function(){d.CHM(r);const a=d.MAs(15);return d.KtG(t.authService.getValidationMessage(a))}),d.qZA(),d.TgZ(16,"div",8),d._uU(17),d.qZA()(),d.TgZ(18,"div",5)(19,"button",11),d.NdJ("click",function(){return t.authService.SignIn(t.loginForm.email,t.loginForm.password)}),d._uU(20," Sign In "),d.qZA()(),d.TgZ(21,"div",5)(22,"div",12)(23,"span"),d._uU(24,"OR"),d.qZA()()(),d.TgZ(25,"div",5)(26,"button",13),d.NdJ("click",function(){return t.authService.GoogleAuth()}),d._UZ(27,"i",14),d._uU(28," Log in with Google "),d.qZA()(),d.TgZ(29,"div",15)(30,"span",16),d._uU(31,"Forgot Password?"),d.qZA()(),d.TgZ(32,"div",17)(33,"span",18),d._uU(34,"Don't have an account ? Sign Up"),d.qZA()()()()}if(2&e){const r=d.MAs(1),s=d.MAs(10),a=d.MAs(15);d.xp6(9),d.Q6J("ngModel",t.loginForm.email),d.xp6(3),d.Oqu(null==s||null==s.errors?null:s.errors.validationMessage),d.xp6(2),d.Q6J("ngModel",t.loginForm.password),d.xp6(3),d.Oqu(null==a||null==a.errors?null:a.errors.validationMessage),d.xp6(2),d.Q6J("disabled",r.invalid)}},dependencies:[zc,wl,As,pi,lu,uc,jf,hu,jc]});class PD{constructor(e){this.authService=e}ngOnInit(){this.registerForm={email:"",password:""}}}PD.\u0275fac=function(e){return new(e||PD)(d.Y36(el))},PD.\u0275cmp=d.Xpm({type:PD,selectors:[["app-sign-up"]],decls:32,vars:5,consts:[["name","userSignupForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],["userSignupForm","ngForm"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","me-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"form",0,1)(2,"h4",2),d._UZ(3,"i",3),d._uU(4," VideoWebRTC "),d.qZA(),d.TgZ(5,"div",4)(6,"h5"),d._uU(7,"Sign Up"),d.qZA(),d.TgZ(8,"div",5)(9,"input",6,7),d.NdJ("ngModelChange",function(a){return t.registerForm.email=a})("ngModelChange",function(){d.CHM(r);const a=d.MAs(10);return d.KtG(t.authService.getValidationMessage(a))}),d.qZA(),d.TgZ(11,"div",8),d._uU(12),d.qZA()(),d.TgZ(13,"div",5)(14,"input",9,10),d.NdJ("ngModelChange",function(a){return t.registerForm.password=a})("ngModelChange",function(){d.CHM(r);const a=d.MAs(15);return d.KtG(t.authService.getValidationMessage(a))}),d.qZA(),d.TgZ(16,"div",8),d._uU(17),d.qZA()(),d.TgZ(18,"div",5)(19,"button",11),d.NdJ("click",function(){return t.authService.SignUp(t.registerForm.email,t.registerForm.password)}),d._uU(20," Sign Up "),d.qZA()(),d.TgZ(21,"div",5)(22,"div",12)(23,"span"),d._uU(24,"OR"),d.qZA()()(),d.TgZ(25,"div",5)(26,"button",13),d.NdJ("click",function(){return t.authService.GoogleAuth()}),d._UZ(27,"i",14),d._uU(28," Continue with Google "),d.qZA()(),d.TgZ(29,"div",15)(30,"span",16),d._uU(31,"Already have an account ? Sign In"),d.qZA()()()()}if(2&e){const r=d.MAs(1),s=d.MAs(10),a=d.MAs(15);d.xp6(9),d.Q6J("ngModel",t.registerForm.email),d.xp6(3),d.Oqu(null==s||null==s.errors?null:s.errors.validationMessage),d.xp6(2),d.Q6J("ngModel",t.registerForm.password),d.xp6(3),d.Oqu(null==a||null==a.errors?null:a.errors.validationMessage),d.xp6(2),d.Q6J("disabled",r.invalid)}},dependencies:[zc,wl,As,pi,lu,uc,jf,hu,jc]});var Hk=F(8819);let Gk=!0,qk=!0;function FD(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function yE(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(h,_){if(h!==e)return s.apply(this,arguments);const E=D=>{const x=t(D);x&&(_.handleEvent?_.handleEvent(x):_(x))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(_,E),s.apply(this,[h,E])};const a=r.removeEventListener;r.removeEventListener=function(h,_){if(h!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(_))return a.apply(this,arguments);const E=this._eventMap[e].get(_);return this._eventMap[e].delete(_),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[h,E])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(h){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),h&&this.addEventListener(e,this["_on"+e]=h)},enumerable:!0,configurable:!0})}function qU(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(Gk=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function WU(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(qk=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function yN(){if("object"==typeof window){if(Gk)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function vS(n,e){!qk||console.warn(n+" is deprecated, please use "+e+" instead.")}function Wk(n){return"[object Object]"===Object.prototype.toString.call(n)}function zk(n){return Wk(n)?Object.keys(n).reduce(function(e,t){const r=Wk(n[t]),s=r?zk(n[t]):n[t],a=r&&!Object.keys(s).length;return void 0===s||a?e:Object.assign(e,{[t]:s})},{}):n}function bN(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?bN(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(s=>{bN(n,n.get(s),t)})}))}function Kk(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",s=new Map;if(null===e)return s;const a=[];return n.forEach(h=>{"track"===h.type&&h.trackIdentifier===e.id&&a.push(h)}),a.forEach(h=>{n.forEach(_=>{_.type===r&&_.trackId===h.id&&bN(n,_,s)})}),s}const Zk=yN;function Yk(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(_){if("object"!=typeof _||_.mandatory||_.optional)return _;const E={};return Object.keys(_).forEach(D=>{if("require"===D||"advanced"===D||"mediaSource"===D)return;const x="object"==typeof _[D]?_[D]:{ideal:_[D]};void 0!==x.exact&&"number"==typeof x.exact&&(x.min=x.max=x.exact);const L=function(W,se){return W?W+se.charAt(0).toUpperCase()+se.slice(1):"deviceId"===se?"sourceId":se};if(void 0!==x.ideal){E.optional=E.optional||[];let W={};"number"==typeof x.ideal?(W[L("min",D)]=x.ideal,E.optional.push(W),W={},W[L("max",D)]=x.ideal,E.optional.push(W)):(W[L("",D)]=x.ideal,E.optional.push(W))}void 0!==x.exact&&"number"!=typeof x.exact?(E.mandatory=E.mandatory||{},E.mandatory[L("",D)]=x.exact):["min","max"].forEach(W=>{void 0!==x[W]&&(E.mandatory=E.mandatory||{},E.mandatory[L(W,D)]=x[W])})}),_.advanced&&(E.optional=(E.optional||[]).concat(_.advanced)),E},s=function(_,E){if(e.version>=61)return E(_);if((_=JSON.parse(JSON.stringify(_)))&&"object"==typeof _.audio){const D=function(x,L,W){L in x&&!(W in x)&&(x[W]=x[L],delete x[L])};D((_=JSON.parse(JSON.stringify(_))).audio,"autoGainControl","googAutoGainControl"),D(_.audio,"noiseSuppression","googNoiseSuppression"),_.audio=r(_.audio)}if(_&&"object"==typeof _.video){let D=_.video.facingMode;D=D&&("object"==typeof D?D:{ideal:D});const x=e.version<66;if(D&&("user"===D.exact||"environment"===D.exact||"user"===D.ideal||"environment"===D.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||x)){let L;if(delete _.video.facingMode,"environment"===D.exact||"environment"===D.ideal?L=["back","rear"]:("user"===D.exact||"user"===D.ideal)&&(L=["front"]),L)return t.mediaDevices.enumerateDevices().then(W=>{let se=(W=W.filter(_e=>"videoinput"===_e.kind)).find(_e=>L.some(Re=>_e.label.toLowerCase().includes(Re)));return!se&&W.length&&L.includes("back")&&(se=W[W.length-1]),se&&(_.video.deviceId=D.exact?{exact:se.deviceId}:{ideal:se.deviceId}),_.video=r(_.video),Zk("chrome: "+JSON.stringify(_)),E(_)})}_.video=r(_.video)}return Zk("chrome: "+JSON.stringify(_)),E(_)},a=function(_){return e.version>=64?_:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[_.name]||_.name,message:_.message,constraint:_.constraint||_.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(_,E,D){s(_,x=>{t.webkitGetUserMedia(x,E,L=>{D&&D(a(L))})})}.bind(t),t.mediaDevices.getUserMedia){const _=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(E){return s(E,D=>_(D).then(x=>{if(D.audio&&!x.getAudioTracks().length||D.video&&!x.getVideoTracks().length)throw x.getTracks().forEach(L=>{L.stop()}),new DOMException("","NotFoundError");return x},x=>Promise.reject(a(x))))}}}function KU(n,e){if((!n.navigator.mediaDevices||!("getDisplayMedia"in n.navigator.mediaDevices))&&n.navigator.mediaDevices){if("function"!=typeof e)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");n.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(s=>{const a=r.video&&r.video.width,h=r.video&&r.video.height;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:r.video&&r.video.frameRate||3}},a&&(r.video.mandatory.maxWidth=a),h&&(r.video.mandatory.maxHeight=h),n.navigator.mediaDevices.getUserMedia(r)})}}}function Jk(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function Qk(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let a;a=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(_=>_.track&&_.track.id===s.track.id):{track:s.track};const h=new Event("track");h.track=s.track,h.receiver=a,h.transceiver={receiver:a},h.streams=[r.stream],this.dispatchEvent(h)}),r.stream.getTracks().forEach(s=>{let a;a=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(_=>_.track&&_.track.id===s.id):{track:s};const h=new Event("track");h.track=s,h.receiver=a,h.transceiver={receiver:a},h.streams=[r.stream],this.dispatchEvent(h)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else yE(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Xk(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(s,a){return{track:a,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===a.kind?s.createDTMFSender(a):null),this._dtmf},_pc:s}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(_,E){let D=s.apply(this,arguments);return D||(D=e(this,_),this._senders.push(D)),D};const a=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(_){a.apply(this,arguments);const E=this._senders.indexOf(_);-1!==E&&this._senders.splice(E,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(h=>{this._senders.push(e(this,h))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(h=>{const _=this._senders.find(E=>E.track===h);_&&this._senders.splice(this._senders.indexOf(_),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function eP(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[r,s,a]=arguments;if(arguments.length>0&&"function"==typeof r)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof r))return e.apply(this,[]);const h=function(E){const D={};return E.result().forEach(L=>{const W={id:L.id,timestamp:L.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[L.type]||L.type};L.names().forEach(se=>{W[se]=L.stat(se)}),D[W.id]=W}),D},_=function(E){return new Map(Object.keys(E).map(D=>[D,E[D]]))};return arguments.length>=2?e.apply(this,[function(D){s(_(h(D)))},r]):new Promise((E,D)=>{e.apply(this,[function(x){E(_(h(x)))},D])}).then(s,a)}}function tP(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(h=>h._pc=this),a});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(h=>Kk(h,a.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(a=>a._pc=this),s}),yE(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>Kk(a,s.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let s,a,h;return this.getSenders().forEach(_=>{_.track===r&&(s?h=!0:s=_)}),this.getReceivers().forEach(_=>(_.track===r&&(a?h=!0:a=_),_.track===r)),h||s&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function nP(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(h=>this._shimmedLocalStreams[h][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(h,_){if(!_)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const E=e.apply(this,arguments);return this._shimmedLocalStreams[_.id]?-1===this._shimmedLocalStreams[_.id].indexOf(E)&&this._shimmedLocalStreams[_.id].push(E):this._shimmedLocalStreams[_.id]=[_,E],E};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){this._shimmedLocalStreams=this._shimmedLocalStreams||{},h.getTracks().forEach(D=>{if(this.getSenders().find(L=>L.track===D))throw new DOMException("Track already exists.","InvalidAccessError")});const _=this.getSenders();t.apply(this,arguments);const E=this.getSenders().filter(D=>-1===_.indexOf(D));this._shimmedLocalStreams[h.id]=[h].concat(E)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[h.id],r.apply(this,arguments)};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},h&&Object.keys(this._shimmedLocalStreams).forEach(_=>{const E=this._shimmedLocalStreams[_].indexOf(h);-1!==E&&this._shimmedLocalStreams[_].splice(E,1),1===this._shimmedLocalStreams[_].length&&delete this._shimmedLocalStreams[_]}),s.apply(this,arguments)}}function rP(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return nP(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const x=t.apply(this);return this._reverseStreams=this._reverseStreams||{},x.map(L=>this._reverseStreams[L.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(x){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},x.getTracks().forEach(L=>{if(this.getSenders().find(se=>se.track===L))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[x.id]){const L=new n.MediaStream(x.getTracks());this._streams[x.id]=L,this._reverseStreams[L.id]=x,x=L}r.apply(this,[x])};const s=n.RTCPeerConnection.prototype.removeStream;function a(D,x){let L=x.sdp;return Object.keys(D._reverseStreams||[]).forEach(W=>{const se=D._reverseStreams[W];L=L.replace(new RegExp(D._streams[se.id].id,"g"),se.id)}),new RTCSessionDescription({type:x.type,sdp:L})}function h(D,x){let L=x.sdp;return Object.keys(D._reverseStreams||[]).forEach(W=>{const se=D._reverseStreams[W],_e=D._streams[se.id];L=L.replace(new RegExp(se.id,"g"),_e.id)}),new RTCSessionDescription({type:x.type,sdp:L})}n.RTCPeerConnection.prototype.removeStream=function(x){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[x.id]||x]),delete this._reverseStreams[this._streams[x.id]?this._streams[x.id].id:x.id],delete this._streams[x.id]},n.RTCPeerConnection.prototype.addTrack=function(x,L){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const W=[].slice.call(arguments,1);if(1!==W.length||!W[0].getTracks().find(Re=>Re===x))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(Re=>Re.track===x))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const _e=this._streams[L.id];if(_e)_e.addTrack(x),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const Re=new n.MediaStream([x]);this._streams[L.id]=Re,this._reverseStreams[Re.id]=L,this.addStream(Re)}return this.getSenders().find(Re=>Re.track===x)},["createOffer","createAnswer"].forEach(function(D){const x=n.RTCPeerConnection.prototype[D],L={[D](){const W=arguments;return arguments.length&&"function"==typeof arguments[0]?x.apply(this,[_e=>{const Re=a(this,_e);W[0].apply(null,[Re])},_e=>{W[1]&&W[1].apply(null,_e)},arguments[2]]):x.apply(this,arguments).then(_e=>a(this,_e))}};n.RTCPeerConnection.prototype[D]=L[D]});const _=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=h(this,arguments[0]),_.apply(this,arguments)):_.apply(this,arguments)};const E=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const D=E.get.apply(this);return""===D.type?D:a(this,D)}}),n.RTCPeerConnection.prototype.removeTrack=function(x){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!x._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(x._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let W;this._streams=this._streams||{},Object.keys(this._streams).forEach(se=>{this._streams[se].getTracks().find(Re=>x.track===Re)&&(W=this._streams[se])}),W&&(1===W.getTracks().length?this.removeStream(this._reverseStreams[W.id]):W.removeTrack(x.track),this.dispatchEvent(new Event("negotiationneeded")))}}function EN(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],s={[t](){return arguments[0]=new("addIceCandidate"===t?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=s[t]})}function iP(n,e){yE(n,"negotiationneeded",t=>{const r=t.target;if(!(e.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return t})}var YU=F(6334),JU=F.n(YU);function sP(n){const e=n&&n.navigator,r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(s){return r(s).catch(a=>Promise.reject(function(s){return{name:{PermissionDeniedError:"NotAllowedError"}[s.name]||s.name,message:s.message,constraint:s.constraint,toString(){return this.name}}}(a)))}}function oP(n){"getDisplayMedia"in n.navigator&&(!n.navigator.mediaDevices||n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function CN(n,e){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(s){return s}),n.RTCSessionDescription||(n.RTCSessionDescription=function(s){return s}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(s){r.set.call(this,s);const a=new Event("enabled");a.enabled=s,this.dispatchEvent(a)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new n.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const t=JU()(n,e.version);n.RTCPeerConnection=function(s){return s&&s.iceServers&&(s.iceServers=function ZU(n,e){let t=!1;return(n=JSON.parse(JSON.stringify(n))).filter(r=>{if(r&&(r.urls||r.url)){let s=r.urls||r.url;r.url&&!r.urls&&vS("RTCIceServer.url","RTCIceServer.urls");const a="string"==typeof s;return a&&(s=[s]),s=s.filter(h=>{if(0===h.indexOf("stun:"))return!1;const _=h.startsWith("turn")&&!h.startsWith("turn:[")&&h.includes("transport=udp");return _&&!t?(t=!0,!0):_&&!t}),delete r.url,r.urls=a?s[0]:s,!!s.length}})}(s.iceServers),yN("ICE servers after filtering:",s.iceServers)),new t(s)},n.RTCPeerConnection.prototype=t.prototype}function aP(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}function uP(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(s,a,h){vS("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(s).then(a,h)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const s=function(h,_,E){_ in h&&!(E in h)&&(h[E]=h[_],delete h[_])},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(h){return"object"==typeof h&&"object"==typeof h.audio&&(h=JSON.parse(JSON.stringify(h)),s(h.audio,"autoGainControl","mozAutoGainControl"),s(h.audio,"noiseSuppression","mozNoiseSuppression")),a(h)},r&&r.prototype.getSettings){const h=r.prototype.getSettings;r.prototype.getSettings=function(){const _=h.apply(this,arguments);return s(_,"mozAutoGainControl","autoGainControl"),s(_,"mozNoiseSuppression","noiseSuppression"),_}}if(r&&r.prototype.applyConstraints){const h=r.prototype.applyConstraints;r.prototype.applyConstraints=function(_){return"audio"===this.kind&&"object"==typeof _&&(_=JSON.parse(JSON.stringify(_)),s(_,"autoGainControl","mozAutoGainControl"),s(_,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[_])}}}}function QU(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||!n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return!0===r.video?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function cP(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function wN(n,e){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const a=n.RTCPeerConnection.prototype[s],h={[s](){return arguments[0]=new("addIceCandidate"===s?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};n.RTCPeerConnection.prototype[s]=h[s]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[a,h,_]=arguments;return r.apply(this,[a||null]).then(E=>{if(e.version<53&&!h)try{E.forEach(D=>{D.type=t[D.type]||D.type})}catch(D){if("TypeError"!==D.name)throw D;E.forEach((x,L)=>{E.set(L,Object.assign({},x,{type:t[x.type]||x.type}))})}return E}).then(h,_)}}function lP(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=t.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function dP(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),yE(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function hP(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){vS("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function fP(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function pP(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],s=r&&"sendEncodings"in r;s&&r.sendEncodings.forEach(h=>{if("rid"in h&&!/^[a-z0-9]{0,16}$/i.test(h.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in h&&!(parseFloat(h.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in h&&!(parseFloat(h.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(s){const{sender:h}=a,_=h.getParameters();(!("encodings"in _)||1===_.encodings.length&&0===Object.keys(_.encodings[0]).length)&&(_.encodings=r.sendEncodings,h.sendEncodings=r.sendEncodings,this.setParametersPromises.push(h.setParameters(_).then(()=>{delete h.sendEncodings}).catch(()=>{delete h.sendEncodings})))}return a})}function gP(n){if("object"!=typeof n||!n.RTCRtpSender)return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function mP(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function _P(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function vP(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...s){return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(-1===r)return;this._localStreams.splice(r,1);const s=t.getTracks();this.getSenders().forEach(a=>{s.includes(a.track)&&this.removeTrack(a)})})}}function yP(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,this.dispatchEvent(a)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const h=new Event("addstream");h.stream=a,r.dispatchEvent(h)})}),e.apply(r,arguments)}}}function bP(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,a=e.setRemoteDescription,h=e.addIceCandidate;e.createOffer=function(D,x){const L=arguments.length>=2?arguments[2]:arguments[0],W=t.apply(this,[L]);return x?(W.then(D,x),Promise.resolve()):W},e.createAnswer=function(D,x){const L=arguments.length>=2?arguments[2]:arguments[0],W=r.apply(this,[L]);return x?(W.then(D,x),Promise.resolve()):W};let _=function(E,D,x){const L=s.apply(this,[E]);return x?(L.then(D,x),Promise.resolve()):L};e.setLocalDescription=_,_=function(E,D,x){const L=a.apply(this,[E]);return x?(L.then(D,x),Promise.resolve()):L},e.setRemoteDescription=_,_=function(E,D,x){const L=h.apply(this,[E]);return x?(L.then(D,x),Promise.resolve()):L},e.addIceCandidate=_}function EP(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=s=>r(CP(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,s,a){e.mediaDevices.getUserMedia(r).then(s,a)}.bind(e))}function CP(n){return n&&void 0!==n.video?Object.assign({},n,{video:zk(n.video)}):n}function wP(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const a=[];for(let h=0;h<r.iceServers.length;h++){let _=r.iceServers[h];!_.hasOwnProperty("urls")&&_.hasOwnProperty("url")?(vS("RTCIceServer.url","RTCIceServer.urls"),_=JSON.parse(JSON.stringify(_)),_.urls=_.url,delete _.url,a.push(_)):a.push(r.iceServers[h])}r.iceServers=a}return new e(r,s)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function DP(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function TP(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(h=>"audio"===h.receiver.track.kind);!1===r.offerToReceiveAudio&&s?"sendrecv"===s.direction?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":"recvonly"===s.direction&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):!0===r.offerToReceiveAudio&&!s&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(h=>"video"===h.receiver.track.kind);!1===r.offerToReceiveVideo&&a?"sendrecv"===a.direction?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":"recvonly"===a.direction&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):!0===r.offerToReceiveVideo&&!a&&this.addTransceiver("video")}return e.apply(this,arguments)}}function SP(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var XU=F(7463),yS=F.n(XU);function bS(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if("object"==typeof r&&r.candidate&&0===r.candidate.indexOf("a=")&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const s=new e(r),a=yS().parseCandidate(r.candidate),h=Object.assign(s,a);return h.toJSON=function(){return{candidate:h.candidate,sdpMid:h.sdpMid,sdpMLineIndex:h.sdpMLineIndex,usernameFragment:h.usernameFragment}},h}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,yE(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function LD(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(_){if(!_||!_.sdp)return!1;const E=yS().splitSections(_.sdp);return E.shift(),E.some(D=>{const x=yS().parseMLine(D);return x&&"application"===x.kind&&-1!==x.protocol.indexOf("SCTP")})},r=function(_){const E=_.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===E||E.length<2)return-1;const D=parseInt(E[1],10);return D!=D?-1:D},s=function(_){let E=65536;return"firefox"===e.browser&&(E=e.version<57?-1===_?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),E},a=function(_,E){let D=65536;"firefox"===e.browser&&57===e.version&&(D=65535);const x=yS().matchPrefix(_.sdp,"a=max-message-size:");return x.length>0?D=parseInt(x[0].substr(19),10):"firefox"===e.browser&&-1!==E&&(D=2147483637),D},h=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:E}=this.getConfiguration();"plan-b"===E&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const E=r(arguments[0]),D=s(E),x=a(arguments[0],E);let L;L=0===D&&0===x?Number.POSITIVE_INFINITY:0===D||0===x?Math.max(D,x):Math.min(D,x);const W={};Object.defineProperty(W,"maxMessageSize",{get:()=>L}),this._sctp=W}return h.apply(this,arguments)}}function BD(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,s){const a=r.send;r.send=function(){const _=arguments[0],E=_.length||_.size||_.byteLength;if("open"===r.readyState&&s.sctp&&E>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const s=t.apply(this,arguments);return e(s,this),s},yE(n,"datachannel",r=>(e(r.channel,r.target),r))}function DN(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const a=s.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const h=new Event("connectionstatechange",s);a.dispatchEvent(h)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function TN(n,e){if(!n.RTCPeerConnection||"chrome"===e.browser&&e.version>=71||"safari"===e.browser&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&-1!==s.sdp.indexOf("\na=extmap-allow-mixed")){const a=s.sdp.split("\n").filter(h=>"a=extmap-allow-mixed"!==h.trim()).join("\n");n.RTCSessionDescription&&s instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:s.type,sdp:a}):s.sdp=a}return t.apply(this,arguments)}}function ES(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||0===t.length||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const IP=function e3({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const t=yN,r=function zU(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.mozGetUserMedia)e.browser="firefox",e.version=FD(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)e.browser="chrome",e.version=FD(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=FD(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!n.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=FD(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return e}(n),s={browserDetails:r,commonShim:fe,extractVersion:FD,disableLog:qU,disableWarnings:WU};switch(r.browser){case"chrome":if(!O||!EN||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),s;if(null===r.version)return t("Chrome shim can not determine version, not shimming."),s;t("adapter.js shimming chrome."),s.browserShim=O,ES(n,r),Yk(n,r),Jk(n),EN(n,r),Qk(n),rP(n,r),Xk(n),eP(n),tP(n),iP(n,r),bS(n),DN(n),LD(n,r),BD(n),TN(n,r);break;case"firefox":if(!U||!wN||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),s;t("adapter.js shimming firefox."),s.browserShim=U,ES(n,r),uP(n,r),wN(n,r),cP(n),hP(n),lP(n),dP(n),fP(n),pP(n),gP(n),mP(n),_P(n),bS(n),DN(n),LD(n,r),BD(n);break;case"edge":if(!H||!CN||!e.shimEdge)return t("MS edge shim is not included in this adapter release."),s;t("adapter.js shimming edge."),s.browserShim=H,sP(n),oP(n),CN(n,r),aP(n),LD(n,r),BD(n);break;case"safari":if(!ce||!e.shimSafari)return t("Safari shim is not included in this adapter release."),s;t("adapter.js shimming safari."),s.browserShim=ce,ES(n,r),wP(n),TP(n),bP(n),vP(n),yP(n),DP(n),EP(n),SP(n),bS(n),LD(n,r),BD(n),TN(n,r);break;default:t("Unsupported browser!")}return s}({window:typeof window>"u"?void 0:window});function bf(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}var SN=IP.default||IP,VD=new(function(){function n(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return n.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},n.prototype.isBrowserSupported=function(){var e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)},n.prototype.getBrowser=function(){return SN.browserDetails.browser},n.prototype.getVersion=function(){return SN.browserDetails.version||0},n.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),t=SN.browserDetails.version||0;if("chrome"===e&&t<this.minChromeVersion)return!1;if("firefox"===e&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,s=!1;try{(r=new RTCPeerConnection).addTransceiver("audio"),s=!0}catch{}finally{r&&r.close()}return s},n.prototype.toString=function(){return"Supports:\n    browser:".concat(this.getBrowser(),"\n    version:").concat(this.getVersion(),"\n    isIOS:").concat(this.isIOS,"\n    isWebRTCSupported:").concat(this.isWebRTCSupported(),"\n    isBrowserSupported:").concat(this.isBrowserSupported(),"\n    isUnifiedPlanSupported:").concat(this.isUnifiedPlanSupported())},n}()),AP={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},t3=function(){function n(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=AP,this.browser=VD.getBrowser(),this.browserVersion=VD.getVersion(),this.supports=function(){var t,e={browser:VD.isBrowserSupported(),webRTC:VD.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;try{t=new RTCPeerConnection(AP),e.audioVideo=!0;var r=void 0;try{r=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!VD.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{t&&t.close()}return e}(),this.pack=Hk.pack,this.unpack=Hk.unpack,this._dataCount=1}return n.prototype.noop=function(){},n.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},n.prototype.chunk=function(e){for(var t=[],r=e.size,s=Math.ceil(r/Nr.chunkedMTU),a=0,h=0;h<r;){var _=Math.min(r,h+Nr.chunkedMTU),E=e.slice(h,_);t.push({__peerData:this._dataCount,n:a,data:E,total:s}),h=_,a++}return this._dataCount++,t},n.prototype.blobToArrayBuffer=function(e,t){var r=new FileReader;return r.onload=function(s){s.target&&t(s.target.result)},r.readAsArrayBuffer(e),r},n.prototype.binaryStringToArrayBuffer=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},n.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},n.prototype.isSecure=function(){return"https:"===location.protocol},n}(),Nr=new t3;bf({},"Peer",()=>RN,n=>RN=n);var UD,n3=Object.prototype.hasOwnProperty,Mu="~";function $D(){}function r3(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function NP(n,e,t,r,s){if("function"!=typeof t)throw new TypeError("The listener must be a function");var a=new r3(t,r||n,s),h=Mu?Mu+e:e;return n._events[h]?n._events[h].fn?n._events[h]=[n._events[h],a]:n._events[h].push(a):(n._events[h]=a,n._eventsCount++),n}function CS(n,e){0==--n._eventsCount?n._events=new $D:delete n._events[e]}function $a(){this._events=new $D,this._eventsCount=0}Object.create&&($D.prototype=Object.create(null),(new $D).__proto__||(Mu=!1)),$a.prototype.eventNames=function(){var t,r,e=[];if(0===this._eventsCount)return e;for(r in t=this._events)n3.call(t,r)&&e.push(Mu?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},$a.prototype.listeners=function(e){var r=this._events[Mu?Mu+e:e];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,a=r.length,h=new Array(a);s<a;s++)h[s]=r[s].fn;return h},$a.prototype.listenerCount=function(e){var r=this._events[Mu?Mu+e:e];return r?r.fn?1:r.length:0},$a.prototype.emit=function(e,t,r,s,a,h){var _=Mu?Mu+e:e;if(!this._events[_])return!1;var x,L,E=this._events[_],D=arguments.length;if(E.fn){switch(E.once&&this.removeListener(e,E.fn,void 0,!0),D){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,t),!0;case 3:return E.fn.call(E.context,t,r),!0;case 4:return E.fn.call(E.context,t,r,s),!0;case 5:return E.fn.call(E.context,t,r,s,a),!0;case 6:return E.fn.call(E.context,t,r,s,a,h),!0}for(L=1,x=new Array(D-1);L<D;L++)x[L-1]=arguments[L];E.fn.apply(E.context,x)}else{var se,W=E.length;for(L=0;L<W;L++)switch(E[L].once&&this.removeListener(e,E[L].fn,void 0,!0),D){case 1:E[L].fn.call(E[L].context);break;case 2:E[L].fn.call(E[L].context,t);break;case 3:E[L].fn.call(E[L].context,t,r);break;case 4:E[L].fn.call(E[L].context,t,r,s);break;default:if(!x)for(se=1,x=new Array(D-1);se<D;se++)x[se-1]=arguments[se];E[L].fn.apply(E[L].context,x)}}return!0},$a.prototype.on=function(e,t,r){return NP(this,e,t,r,!1)},$a.prototype.once=function(e,t,r){return NP(this,e,t,r,!0)},$a.prototype.removeListener=function(e,t,r,s){var a=Mu?Mu+e:e;if(!this._events[a])return this;if(!t)return CS(this,a),this;var h=this._events[a];if(h.fn)h.fn===t&&(!s||h.once)&&(!r||h.context===r)&&CS(this,a);else{for(var _=0,E=[],D=h.length;_<D;_++)(h[_].fn!==t||s&&!h[_].once||r&&h[_].context!==r)&&E.push(h[_]);E.length?this._events[a]=1===E.length?E[0]:E:CS(this,a)}return this},$a.prototype.removeAllListeners=function(e){var t;return e?this._events[t=Mu?Mu+e:e]&&CS(this,t):(this._events=new $D,this._eventsCount=0),this},$a.prototype.off=$a.prototype.removeListener,$a.prototype.addListener=$a.prototype.on,$a.prefixed=Mu,$a.EventEmitter=$a,UD=$a;var zt={};bf(zt,"LogLevel",()=>Ru,n=>Ru=n),bf(zt,"default",()=>MP,n=>MP=n);var ny=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var s,h,r=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(_){h={error:_}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(h)throw h.error}}return a},ry=function(n,e,t){if(t||2===arguments.length)for(var a,r=0,s=e.length;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))},i3="PeerJS: ",Ru=(()=>(function(n){n[n.Disabled=0]="Disabled",n[n.Errors=1]="Errors",n[n.Warnings=2]="Warnings",n[n.All=3]="All"}(Ru||(Ru={})),Ru))(),s3=function(){function n(){this._logLevel=Ru.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=Ru.All&&this._print.apply(this,ry([Ru.All],ny(e),!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=Ru.Warnings&&this._print.apply(this,ry([Ru.Warnings],ny(e),!1))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel>=Ru.Errors&&this._print.apply(this,ry([Ru.Errors],ny(e),!1))},n.prototype.setLogFunction=function(e){this._print=e},n.prototype._print=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var s=ry([i3],ny(t),!1);for(var a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);e>=Ru.All?console.log.apply(console,ry([],ny(s),!1)):e>=Ru.Warnings?console.warn.apply(console,ry(["WARNING"],ny(s),!1)):e>=Ru.Errors&&console.error.apply(console,ry(["ERROR"],ny(s),!1))},n}(),MP=new s3,RP={};bf(RP,"Socket",()=>OP,n=>OP=n);var IN,jl=(()=>(function(n){n.Data="data",n.Media="media"}(jl||(jl={})),jl))(),Es=(()=>(function(n){n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc"}(Es||(Es={})),Es))(),Ef=(()=>(function(n){n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json"}(Ef||(Ef={})),Ef))(),Cf=(()=>(function(n){n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close"}(Cf||(Cf={})),Cf))(),$o=(()=>(function(n){n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE"}($o||($o={})),$o))();IN=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var o3=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),OP=function(n){function e(t,r,s,a,h,_){void 0===_&&(_=5e3);var E=n.call(this)||this;return E.pingInterval=_,E._disconnected=!0,E._messagesQueue=[],E._baseUrl=(t?"wss://":"ws://")+r+":"+s+a+"peerjs?key="+h,E}return o3(e,n),e.prototype.start=function(t,r){var s=this;this._id=t;var a="".concat(this._baseUrl,"&id=").concat(t,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(a+"&version="+IN.version),this._disconnected=!1,this._socket.onmessage=function(h){var _;try{_=JSON.parse(h.data),zt.default.log("Server message received:",_)}catch{return void zt.default.log("Invalid server message",h.data)}s.emit(Cf.Message,_)},this._socket.onclose=function(h){s._disconnected||(zt.default.log("Socket closed.",h),s._cleanup(),s._disconnected=!0,s.emit(Cf.Disconnected))},this._socket.onopen=function(){s._disconnected||(s._sendQueuedMessages(),zt.default.log("Socket open"),s._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var t=this;this._wsPingTimer=setTimeout(function(){t._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(this._wsOpen()){var t=JSON.stringify({type:$o.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}else zt.default.log("Cannot send heartbeat, because socket closed")},e.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},e.prototype._sendQueuedMessages=function(){var t,r,s=function(n,e,t){if(t||2===arguments.length)for(var a,r=0,s=e.length;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}([],function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var s,h,r=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(_){h={error:_}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(h)throw h.error}}return a}(this._messagesQueue),!1);this._messagesQueue=[];try{for(var a=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),h=a.next();!h.done;h=a.next())this.send(h.value)}catch(E){t={error:E}}finally{try{h&&!h.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},e.prototype.send=function(t){if(!this._disconnected){if(!this._id)return void this._messagesQueue.push(t);if(!t.type)return void this.emit(Cf.Error,"Invalid message");if(this._wsOpen()){var r=JSON.stringify(t);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(UD.EventEmitter),AN={};bf(AN,"MediaConnection",()=>FP,n=>FP=n);var xN={};bf(xN,"Negotiator",()=>kP,n=>kP=n);var wS=function(){return wS=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n},wS.apply(this,arguments)},DS=function(n,e,t,r){return new(t||(t=Promise))(function(a,h){function _(x){try{D(r.next(x))}catch(L){h(L)}}function E(x){try{D(r.throw(x))}catch(L){h(L)}}function D(x){x.done?a(x.value):function s(a){return a instanceof t?a:new t(function(h){h(a)})}(x.value).then(_,E)}D((r=r.apply(n,e||[])).next())})},TS=function(n,e){var r,s,a,h,t={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return h={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function _(D){return function(x){return function E(D){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(a=2&D[0]?s.return:D[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,D[1])).done)return a;switch(s=0,a&&(D=[2&D[0],a.value]),D[0]){case 0:case 1:a=D;break;case 4:return t.label++,{value:D[1],done:!1};case 5:t.label++,s=D[1],D=[0];continue;case 7:D=t.ops.pop(),t.trys.pop();continue;default:if(!(a=(a=t.trys).length>0&&a[a.length-1])&&(6===D[0]||2===D[0])){t=0;continue}if(3===D[0]&&(!a||D[1]>a[0]&&D[1]<a[3])){t.label=D[1];break}if(6===D[0]&&t.label<a[1]){t.label=a[1],a=D;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(D);break}a[2]&&t.ops.pop(),t.trys.pop();continue}D=e.call(n,t)}catch(x){D=[6,x],s=0}finally{r=a=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([D,x])}}},kP=function(){function n(e){this.connection=e}return n.prototype.startConnection=function(e){var t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===jl.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.connection.type===jl.Data){var r=this.connection,a=t.createDataChannel(r.label,{ordered:!!e.reliable});r.initialize(a)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},n.prototype._startPeerConnection=function(){zt.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},n.prototype._setupListeners=function(e){var t=this,r=this.connection.peer,s=this.connection.connectionId,a=this.connection.type,h=this.connection.provider;zt.default.log("Listening for ICE candidates."),e.onicecandidate=function(_){!_.candidate||!_.candidate.candidate||(zt.default.log("Received ICE candidates for ".concat(r,":"),_.candidate),h.socket.send({type:$o.Candidate,payload:{candidate:_.candidate,type:a,connectionId:s},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":zt.default.log("iceConnectionState is failed, closing connections to "+r),t.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),t.connection.close();break;case"closed":zt.default.log("iceConnectionState is closed, closing connections to "+r),t.connection.emit("error",new Error("Connection to "+r+" closed.")),t.connection.close();break;case"disconnected":zt.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=Nr.noop}t.connection.emit("iceStateChanged",e.iceConnectionState)},zt.default.log("Listening for data channel"),e.ondatachannel=function(_){zt.default.log("Received data channel");var E=_.channel;h.getConnection(r,s).initialize(E)},zt.default.log("Listening for remote stream"),e.ontrack=function(_){zt.default.log("Received remote stream");var E=_.streams[0],D=h.getConnection(r,s);D.type===jl.Media&&t._addStreamToMediaConnection(E,D)}},n.prototype.cleanup=function(){zt.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var r=!1;if(this.connection.type===jl.Data){var a=this.connection.dataChannel;a&&(r=!!a.readyState&&"closed"!==a.readyState)}("closed"!==e.signalingState||r)&&e.close()}},n.prototype._makeOffer=function(){return DS(this,void 0,Promise,function(){var e,t,r,s,a,h,_;return TS(this,function(E){switch(E.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,E.label=1;case 1:return E.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=E.sent(),zt.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),E.label=3;case 3:return E.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return E.sent(),zt.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),s={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:Nr.browser},this.connection.type===jl.Data&&(a=this.connection,s=wS(wS({},s),{label:a.label,reliable:a.reliable,serialization:a.serialization})),t.socket.send({type:$o.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(h=E.sent())&&(t.emitError(Es.WebRTC,h),zt.default.log("Failed to setLocalDescription, ",h)),[3,6];case 6:return[3,8];case 7:return _=E.sent(),t.emitError(Es.WebRTC,_),zt.default.log("Failed to createOffer, ",_),[3,8];case 8:return[2]}})})},n.prototype._makeAnswer=function(){return DS(this,void 0,Promise,function(){var e,t,r,s,a;return TS(this,function(h){switch(h.label){case 0:e=this.connection.peerConnection,t=this.connection.provider,h.label=1;case 1:return h.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=h.sent(),zt.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),h.label=3;case 3:return h.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return h.sent(),zt.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),t.socket.send({type:$o.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:Nr.browser},dst:this.connection.peer}),[3,6];case 5:return s=h.sent(),t.emitError(Es.WebRTC,s),zt.default.log("Failed to setLocalDescription, ",s),[3,6];case 6:return[3,8];case 7:return a=h.sent(),t.emitError(Es.WebRTC,a),zt.default.log("Failed to create answer, ",a),[3,8];case 8:return[2]}})})},n.prototype.handleSDP=function(e,t){return DS(this,void 0,Promise,function(){var r,s,a,h;return TS(this,function(_){switch(_.label){case 0:t=new RTCSessionDescription(t),r=this.connection.peerConnection,s=this.connection.provider,zt.default.log("Setting remote description",t),a=this,_.label=1;case 1:return _.trys.push([1,5,,6]),[4,r.setRemoteDescription(t)];case 2:return _.sent(),zt.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),"OFFER"!==e?[3,4]:[4,a._makeAnswer()];case 3:_.sent(),_.label=4;case 4:return[3,6];case 5:return h=_.sent(),s.emitError(Es.WebRTC,h),zt.default.log("Failed to setRemoteDescription, ",h),[3,6];case 6:return[2]}})})},n.prototype.handleCandidate=function(e){return DS(this,void 0,Promise,function(){var t,r,s,a,h,_;return TS(this,function(E){switch(E.label){case 0:zt.default.log("handleCandidate:",e),t=e.candidate,r=e.sdpMLineIndex,s=e.sdpMid,a=this.connection.peerConnection,h=this.connection.provider,E.label=1;case 1:return E.trys.push([1,3,,4]),[4,a.addIceCandidate(new RTCIceCandidate({sdpMid:s,sdpMLineIndex:r,candidate:t}))];case 2:return E.sent(),zt.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return _=E.sent(),h.emitError(Es.WebRTC,_),zt.default.log("Failed to handleCandidate, ",_),[3,4];case 4:return[2]}})})},n.prototype._addTracksToConnection=function(e,t){if(zt.default.log("add tracks from stream ".concat(e.id," to peer connection")),!t.addTrack)return zt.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){t.addTrack(r,e)})},n.prototype._addStreamToMediaConnection=function(e,t){zt.default.log("add stream ".concat(e.id," to media connection ").concat(t.connectionId)),t.addStream(e)},n}(),NN={};bf(NN,"BaseConnection",()=>PP,n=>PP=n);var l3=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),PP=function(n){function e(t,r,s){var a=n.call(this)||this;return a.peer=t,a.provider=r,a.options=s,a._open=!1,a.metadata=s.metadata,a}return l3(e,n),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(UD.EventEmitter),d3=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),SS=function(){return SS=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n},SS.apply(this,arguments)},FP=function(n){function e(t,r,s){var a=n.call(this,t,r,s)||this;return a._localStream=a.options._stream,a.connectionId=a.options.connectionId||e.ID_PREFIX+Nr.randomToken(),a._negotiator=new xN.Negotiator(a),a._localStream&&a._negotiator.startConnection({_stream:a._localStream,originator:!0}),a}return d3(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return jl.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(t){zt.default.log("Receiving stream",t),this._remoteStream=t,n.prototype.emit.call(this,"stream",t)},e.prototype.handleMessage=function(t){var r=t.type,s=t.payload;switch(t.type){case $o.Answer:this._negotiator.handleSDP(r,s.sdp),this._open=!0;break;case $o.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:zt.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer))}},e.prototype.answer=function(t,r){var s,a;if(void 0===r&&(r={}),this._localStream)zt.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=t,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(SS(SS({},this.options._payload),{_stream:t}));var h=this.provider._getMessages(this.connectionId);try{for(var _=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),E=_.next();!E.done;E=_.next())this.handleMessage(E.value)}catch(x){s={error:x}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}this._open=!0}},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,n.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(NN.BaseConnection),MN={};bf(MN,"DataConnection",()=>VP,n=>VP=n);var LP={};bf(LP,"EncodingQueue",()=>BP,n=>BP=n);var f3=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),BP=function(n){function e(){var t=n.call(this)||this;return t.fileReader=new FileReader,t._queue=[],t._processing=!1,t.fileReader.onload=function(r){t._processing=!1,r.target&&t.emit("done",r.target.result),t.doNextTask()},t.fileReader.onerror=function(r){zt.default.error("EncodingQueue error:",r),t._processing=!1,t.destroy(),t.emit("error",r)},t}return f3(e,n),Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(t){this.queue.push(t),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(UD.EventEmitter),p3=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),VP=function(n){function e(t,r,s){var a=n.call(this,t,r,s)||this;return a.stringify=JSON.stringify,a.parse=JSON.parse,a._buffer=[],a._bufferSize=0,a._buffering=!1,a._chunkedData={},a._encodingQueue=new LP.EncodingQueue,a.connectionId=a.options.connectionId||e.ID_PREFIX+Nr.randomToken(),a.label=a.options.label||a.connectionId,a.serialization=a.options.serialization||Ef.Binary,a.reliable=!!a.options.reliable,a._encodingQueue.on("done",function(h){a._bufferedSend(h)}),a._encodingQueue.on("error",function(){zt.default.error("DC#".concat(a.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),a.close()}),a._negotiator=new xN.Negotiator(a),a._negotiator.startConnection(a.options._payload||{originator:!0}),a}return p3(e,n),Object.defineProperty(e.prototype,"type",{get:function(){return jl.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){this._dc=t,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var t=this;(!Nr.supports.binaryBlob||Nr.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){zt.default.log("DC#".concat(t.connectionId," dc connection success")),t._open=!0,t.emit("open")},this.dataChannel.onmessage=function(r){zt.default.log("DC#".concat(t.connectionId," dc onmessage:"),r.data),t._handleDataMessage(r)},this.dataChannel.onclose=function(){zt.default.log("DC#".concat(t.connectionId," dc closed for:"),t.peer),t.close()}},e.prototype._handleDataMessage=function(t){var r=this,s=t.data,a=s.constructor,_=s;if(this.serialization===Ef.Binary||this.serialization===Ef.BinaryUTF8){if(a===Blob)return void Nr.blobToArrayBuffer(s,function(D){var x=Nr.unpack(D);r.emit("data",x)});if(a===ArrayBuffer)_=Nr.unpack(s);else if(a===String){var E=Nr.binaryStringToArrayBuffer(s);_=Nr.unpack(E)}}else this.serialization===Ef.JSON&&(_=this.parse(s));_.__peerData?this._handleChunk(_):n.prototype.emit.call(this,"data",_)},e.prototype._handleChunk=function(t){var r=t.__peerData,s=this._chunkedData[r]||{data:[],count:0,total:t.total};if(s.data[t.n]=t.data,s.count++,this._chunkedData[r]=s,s.total===s.count){delete this._chunkedData[r];var a=new Blob(s.data);this._handleDataMessage({data:a})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,"close"))},e.prototype.send=function(t,r){if(this.open)if(this.serialization===Ef.JSON)this._bufferedSend(this.stringify(t));else if(this.serialization===Ef.Binary||this.serialization===Ef.BinaryUTF8){var s=Nr.pack(t);if(!r&&s.size>Nr.chunkedMTU)return void this._sendChunks(s);Nr.supports.binaryBlob?this._bufferedSend(s):this._encodingQueue.enque(s)}else this._bufferedSend(t);else n.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},e.prototype._bufferedSend=function(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(t){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(s){return zt.default.error("DC#:".concat(this.connectionId," Error when sending:"),s),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},e.prototype._sendChunks=function(t){var r,s,a=Nr.chunk(t);zt.default.log("DC#".concat(this.connectionId," Try to send ").concat(a.length," chunks..."));try{for(var h=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),_=h.next();!_.done;_=h.next())this.send(_.value,!0)}catch(D){r={error:D}}finally{try{_&&!_.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(t){var r=t.payload;switch(t.type){case $o.Answer:this._negotiator.handleSDP(t.type,r.sdp);break;case $o.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:zt.default.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(NN.BaseConnection),UP={};bf(UP,"API",()=>HP,n=>HP=n);var $P=function(n,e,t,r){return new(t||(t=Promise))(function(a,h){function _(x){try{D(r.next(x))}catch(L){h(L)}}function E(x){try{D(r.throw(x))}catch(L){h(L)}}function D(x){x.done?a(x.value):function s(a){return a instanceof t?a:new t(function(h){h(a)})}(x.value).then(_,E)}D((r=r.apply(n,e||[])).next())})},jP=function(n,e){var r,s,a,h,t={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return h={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function _(D){return function(x){return function E(D){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(a=2&D[0]?s.return:D[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,D[1])).done)return a;switch(s=0,a&&(D=[2&D[0],a.value]),D[0]){case 0:case 1:a=D;break;case 4:return t.label++,{value:D[1],done:!1};case 5:t.label++,s=D[1],D=[0];continue;case 7:D=t.ops.pop(),t.trys.pop();continue;default:if(!(a=(a=t.trys).length>0&&a[a.length-1])&&(6===D[0]||2===D[0])){t=0;continue}if(3===D[0]&&(!a||D[1]>a[0]&&D[1]<a[3])){t.label=D[1];break}if(6===D[0]&&t.label<a[1]){t.label=a[1],a=D;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(D);break}a[2]&&t.ops.pop(),t.trys.pop();continue}D=e.call(n,t)}catch(x){D=[6,x],s=0}finally{r=a=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([D,x])}}},HP=function(){function n(e){this._options=e}return n.prototype._buildRequest=function(e){var r=this._options,s=r.host,a=r.port,h=r.path,_=r.key,E=new URL("".concat(this._options.secure?"https":"http","://").concat(s,":").concat(a).concat(h).concat(_,"/").concat(e));return E.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),E.searchParams.set("version",IN.version),fetch(E.href,{referrerPolicy:this._options.referrerPolicy})},n.prototype.retrieveId=function(){return $P(this,void 0,Promise,function(){var e,t,r;return jP(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(200!==(e=s.sent()).status)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw t=s.sent(),zt.default.error("Error retrieving ID",t),r="","/"===this._options.path&&this._options.host!==Nr.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},n.prototype.listAllPeers=function(){return $P(this,void 0,Promise,function(){var e,t,r;return jP(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(200!==(e=s.sent()).status)throw 401===e.status?("",t=this._options.host===Nr.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=s.sent(),zt.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},n}(),m3=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),jD=function(){return jD=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var s in e=arguments[t])Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s]);return n},jD.apply(this,arguments)},HD=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_3=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var s,h,r=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(_){h={error:_}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(h)throw h.error}}return a},RN=function(n){function e(t,r){var a,s=n.call(this)||this;return s._id=null,s._lastServerId=null,s._destroyed=!1,s._disconnected=!1,s._open=!1,s._connections=new Map,s._lostMessages=new Map,t&&t.constructor==Object?r=t:t&&(a=t.toString()),r=jD({debug:0,host:Nr.CLOUD_HOST,port:Nr.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:Nr.randomToken(),config:Nr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),s._options=r,"/"===s._options.host&&(s._options.host=window.location.hostname),s._options.path&&("/"!==s._options.path[0]&&(s._options.path="/"+s._options.path),"/"!==s._options.path[s._options.path.length-1]&&(s._options.path+="/")),void 0===s._options.secure&&s._options.host!==Nr.CLOUD_HOST?s._options.secure=Nr.isSecure():s._options.host==Nr.CLOUD_HOST&&(s._options.secure=!0),s._options.logFunction&&zt.default.setLogFunction(s._options.logFunction),zt.default.logLevel=s._options.debug||0,s._api=new UP.API(r),s._socket=s._createServerConnection(),Nr.supports.audioVideo||Nr.supports.data?a&&!Nr.validateId(a)?(s._delayedAbort(Es.InvalidID,'ID "'.concat(a,'" is invalid')),s):(a?s._initialize(a):s._api.retrieveId().then(function(h){return s._initialize(h)}).catch(function(h){return s._abort(Es.ServerError,h)}),s):(s._delayedAbort(Es.BrowserIncompatible,"The current browser does not support WebRTC"),s)}return m3(e,n),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var t,r,s=Object.create(null);try{for(var a=HD(this._connections),h=a.next();!h.done;h=a.next()){var _=_3(h.value,2);s[_[0]]=_[1]}}catch(x){t={error:x}}finally{try{h&&!h.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var t=this,r=new RP.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Cf.Message,function(s){t._handleMessage(s)}),r.on(Cf.Error,function(s){t._abort(Es.SocketError,s)}),r.on(Cf.Disconnected,function(){t.disconnected||(t.emitError(Es.Network,"Lost connection to server."),t.disconnect())}),r.on(Cf.Close,function(){t.disconnected||t._abort(Es.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(t){this._id=t,this.socket.start(t,this._options.token)},e.prototype._handleMessage=function(t){var r,s,a=t.type,h=t.payload,_=t.src;switch(a){case $o.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $o.Error:this._abort(Es.ServerError,h.msg);break;case $o.IdTaken:this._abort(Es.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case $o.InvalidKey:this._abort(Es.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case $o.Leave:zt.default.log("Received leave message from ".concat(_)),this._cleanupPeer(_),this._connections.delete(_);break;case $o.Expire:this.emitError(Es.PeerUnavailable,"Could not connect to peer ".concat(_));break;case $o.Offer:if((Re=this.getConnection(_,_e=h.connectionId))&&(Re.close(),zt.default.warn("Offer received for existing Connection ID:".concat(_e))),h.type===jl.Media){var E=new AN.MediaConnection(_,this,{connectionId:_e,_payload:h,metadata:h.metadata});this._addConnection(_,Re=E),this.emit("call",E)}else{if(h.type!==jl.Data)return void zt.default.warn("Received malformed connection type:".concat(h.type));var D=new MN.DataConnection(_,this,{connectionId:_e,_payload:h,metadata:h.metadata,label:h.label,serialization:h.serialization,reliable:h.reliable});this._addConnection(_,Re=D),this.emit("connection",D)}var x=this._getMessages(_e);try{for(var L=HD(x),W=L.next();!W.done;W=L.next())Re.handleMessage(W.value)}catch(ze){r={error:ze}}finally{try{W&&!W.done&&(s=L.return)&&s.call(L)}finally{if(r)throw r.error}}break;default:if(!h)return void zt.default.warn("You received a malformed message from ".concat(_," of type ").concat(a));var _e,Re;(Re=this.getConnection(_,_e=h.connectionId))&&Re.peerConnection?Re.handleMessage(t):_e?this._storeMessage(_e,t):zt.default.warn("You received an unrecognized message:",t)}},e.prototype._storeMessage=function(t,r){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(r)},e.prototype._getMessages=function(t){var r=this._lostMessages.get(t);return r?(this._lostMessages.delete(t),r):[]},e.prototype.connect=function(t,r){if(void 0===r&&(r={}),this.disconnected)return zt.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(Es.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var s=new MN.DataConnection(t,this,r);return this._addConnection(t,s),s},e.prototype.call=function(t,r,s){if(void 0===s&&(s={}),this.disconnected)return zt.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(Es.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(r){var a=new AN.MediaConnection(t,this,jD(jD({},s),{_stream:r}));return this._addConnection(t,a),a}zt.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},e.prototype._addConnection=function(t,r){zt.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(t)),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(r)},e.prototype._removeConnection=function(t){var r=this._connections.get(t.peer);if(r){var s=r.indexOf(t);-1!==s&&r.splice(s,1)}this._lostMessages.delete(t.connectionId)},e.prototype.getConnection=function(t,r){var s,a,h=this._connections.get(t);if(!h)return null;try{for(var _=HD(h),E=_.next();!E.done;E=_.next()){var D=E.value;if(D.connectionId===r)return D}}catch(x){s={error:x}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}return null},e.prototype._delayedAbort=function(t,r){var s=this;setTimeout(function(){s._abort(t,r)},0)},e.prototype._abort=function(t,r){zt.default.error("Aborting!"),this.emitError(t,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(t,r){var s;zt.default.error("Error:",r),(s="string"==typeof r?new Error(r):r).type=t,this.emit("error",s)},e.prototype.destroy=function(){this.destroyed||(zt.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var t,r;try{for(var s=HD(this._connections.keys()),a=s.next();!a.done;a=s.next()){var h=a.value;this._cleanupPeer(h),this._connections.delete(h)}}catch(_){t={error:_}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(t){var r,s,a=this._connections.get(t);if(a)try{for(var h=HD(a),_=h.next();!_.done;_=h.next())_.value.close()}catch(D){r={error:D}}finally{try{_&&!_.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var t=this.id;zt.default.log("Disconnect peer with ID:".concat(t)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)zt.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"));zt.default.error("In a hurry? We're still trying to make the initial connection!")}},e.prototype.listAllPeers=function(t){var r=this;void 0===t&&(t=function(s){}),this._api.listAllPeers().then(function(s){return t(s)}).catch(function(s){return r._abort(Es.ServerError,s)})},e.DEFAULT_KEY="peerjs",e}(UD.EventEmitter),tl={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},GP=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],qP=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],WP=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Ec=typeof window<"u"&&typeof window.document<"u"?window.document:{},Hl="fullscreenEnabled"in Ec&&Object.keys(tl)||GP[0]in Ec&&GP||qP[0]in Ec&&qP||WP[0]in Ec&&WP||[],v3={requestFullscreen:function(n){return n[Hl[tl.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[Hl[tl.requestFullscreen]]},get exitFullscreen(){return Ec[Hl[tl.exitFullscreen]].bind(Ec)},get fullscreenPseudoClass(){return":"+Hl[tl.fullscreen]},addEventListener:function(n,e,t){return Ec.addEventListener(Hl[tl[n]],e,t)},removeEventListener:function(n,e,t){return Ec.removeEventListener(Hl[tl[n]],e,t)},get fullscreenEnabled(){return Boolean(Ec[Hl[tl.fullscreenEnabled]])},set fullscreenEnabled(n){},get fullscreenElement(){return Ec[Hl[tl.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return Ec[("on"+Hl[tl.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return Ec[("on"+Hl[tl.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return Ec[("on"+Hl[tl.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return Ec[("on"+Hl[tl.fullscreenerror]).toLowerCase()]=n}};const GD=v3;var y3=F(1144);const b3=["addListener","removeListener"],E3=["addEventListener","removeEventListener"],C3=["on","off"];function nl(n,e,t,r){if((0,Vi.m)(t)&&(r=t,t=void 0),r)return nl(n,e,t).pipe(we(r));const[s,a]=function T3(n){return(0,Vi.m)(n.addEventListener)&&(0,Vi.m)(n.removeEventListener)}(n)?E3.map(h=>_=>n[h](e,_,t)):function w3(n){return(0,Vi.m)(n.addListener)&&(0,Vi.m)(n.removeListener)}(n)?b3.map(zP(n,e)):function D3(n){return(0,Vi.m)(n.on)&&(0,Vi.m)(n.off)}(n)?C3.map(zP(n,e)):[];if(!s&&(0,y3.z)(n))return(0,Ms.z)(h=>nl(h,e,t))((0,Js.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new fr.y(h=>{const _=(...E)=>h.next(1<E.length?E:E[0]);return s(_),()=>a(_)})}function zP(n,e){return t=>r=>n[t](e,r)}var S3=F(3532);function ON(n=0,e,t=Q0.P){let r=-1;return null!=e&&((0,S3.K)(e)?t=e:r=e),new fr.y(s=>{let a=function I3(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let h=0;return t.schedule(function(){s.closed||(s.next(h++),0<=r?this.schedule(void 0,r):s.complete())},a)})}const{isArray:A3}=Array;function KP(n){return 1===n.length&&A3(n[0])?n[0]:n}var IS=F(5032);const YP=new fr.y(IS.Z);function ja(n){return(0,Zi.e)((e,t)=>{(0,Js.Xf)(n).subscribe((0,M.x)(t,()=>t.complete(),IS.Z)),!t.closed&&e.subscribe(t)})}function B$(n,e){}function V$(n,e){if(1&n&&(d.TgZ(0,"button",3),d._uU(1),d.YNc(2,B$,0,0,"ng-template",4),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngbPanelToggle",t),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function U$(n,e){}function $$(n,e){}function j$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",8),d.NdJ("ngbRef",function(s){d.CHM(t);const a=d.oxw().$implicit;return d.KtG(a.panelDiv=s)}),d.TgZ(1,"div",9),d.YNc(2,$$,0,0,"ng-template",4),d.qZA()()}if(2&n){const t=d.oxw().$implicit;d.s9C("id",t.id),d.uIk("aria-labelledby",t.id+"-header"),d.xp6(2),d.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const H$=function(n,e){return{$implicit:n,opened:e}};function G$(n,e){if(1&n&&(d.TgZ(0,"div")(1,"div",5),d.YNc(2,U$,0,0,"ng-template",6),d.qZA(),d.YNc(3,j$,3,3,"div",7),d.qZA()),2&n){const t=e.$implicit,r=d.oxw(),s=d.MAs(1);d.Tol("accordion-item "+(t.cardClass||"")),d.xp6(1),d.Tol("accordion-header "+(t.type?"bg-"+t.type:r.type?"bg-"+r.type:"")),d.MGl("id","",t.id,"-header"),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||s)("ngTemplateOutletContext",d.WLB(8,H$,t,t.isOpen)),d.xp6(1),d.Q6J("ngIf",!r.destroyOnHide||t.isOpen||t.transitionRunning)}}function q$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",1),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.close())}),d.qZA()}}const qN=["*"];function W$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",6),d.NdJ("click",function(){const a=d.CHM(t).$implicit,h=d.oxw();return h.focus(),d.KtG(h.select(a.id,h.NgbSlideEventSource.INDICATOR))}),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw();d.ekj("active",t.id===r.activeId),d.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===r.activeId)}}function z$(n,e){}function K$(n,e){if(1&n&&(d.TgZ(0,"div",7)(1,"span",8),d.SDv(2,9),d.qZA(),d.YNc(3,z$,0,0,"ng-template",10),d.qZA()),2&n){const t=e.$implicit,r=e.index,s=e.count;d.Q6J("id","slide-"+t.id),d.xp6(2),d.pQV(r+1)(s),d.QtT(2),d.xp6(1),d.Q6J("ngTemplateOutlet",t.tplRef)}}function Z$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.arrowLeft())}),d._UZ(1,"span",12),d.TgZ(2,"span",8),d.SDv(3,13),d.qZA()()}}function Y$(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",14),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.arrowRight())}),d._UZ(1,"span",15),d.TgZ(2,"span",8),d.SDv(3,16),d.qZA()()}}const J$=["ngbDatepickerDayView",""],Q$=["month"],X$=["year"];function ej(n,e){if(1&n&&(d.TgZ(0,"option",5),d._uU(1),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.Q6J("value",t),d.uIk("aria-label",r.i18n.getMonthFullName(t,r.date.year)),d.xp6(1),d.Oqu(r.i18n.getMonthShortName(t,r.date.year))}}function tj(n,e){if(1&n&&(d.TgZ(0,"option",5),d._uU(1),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.Q6J("value",t),d.xp6(1),d.Oqu(r.i18n.getYearNumerals(t))}}function nj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ngb-datepicker-navigation-select",7),d.NdJ("select",function(s){d.CHM(t);const a=d.oxw();return d.KtG(a.select.emit(s))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function rj(n,e){1&n&&d._UZ(0,"div",0)}function ij(n,e){1&n&&d._UZ(0,"div",0)}function sj(n,e){if(1&n&&(d.YNc(0,rj,1,0,"div",9),d.TgZ(1,"div",10),d._uU(2),d.qZA(),d.YNc(3,ij,1,0,"div",9)),2&n){const t=e.$implicit,r=e.index,s=d.oxw(2);d.Q6J("ngIf",r>0),d.xp6(2),d.hij(" ",s.i18n.getMonthLabel(t.firstDate)," "),d.xp6(1),d.Q6J("ngIf",r!==s.months.length-1)}}function oj(n,e){if(1&n&&d.YNc(0,sj,4,3,"ng-template",8),2&n){const t=d.oxw();d.Q6J("ngForOf",t.months)}}function aj(n,e){if(1&n&&(d.TgZ(0,"div",5),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Oqu(t.i18n.getWeekLabel())}}function uj(n,e){if(1&n&&(d.TgZ(0,"div",6),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Oqu(t)}}function cj(n,e){if(1&n&&(d.TgZ(0,"div",2),d.YNc(1,aj,2,1,"div",3),d.YNc(2,uj,2,1,"div",4),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.datepicker.showWeekNumbers),d.xp6(1),d.Q6J("ngForOf",t.viewModel.weekdays)}}function lj(n,e){if(1&n&&(d.TgZ(0,"div",11),d._uU(1),d.qZA()),2&n){const t=d.oxw(2).$implicit,r=d.oxw();d.xp6(1),d.Oqu(r.i18n.getWeekNumerals(t.number))}}function dj(n,e){}function hj(n,e){if(1&n&&d.YNc(0,dj,0,0,"ng-template",14),2&n){const t=d.oxw().$implicit,r=d.oxw(3);d.Q6J("ngTemplateOutlet",r.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function fj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",12),d.NdJ("click",function(s){const h=d.CHM(t).$implicit;return d.oxw(3).doSelect(h),d.KtG(s.preventDefault())}),d.YNc(1,hj,1,2,"ng-template",13),d.qZA()}if(2&n){const t=e.$implicit;d.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),d.Q6J("tabindex",t.tabindex),d.uIk("aria-label",t.ariaLabel),d.xp6(1),d.Q6J("ngIf",!t.hidden)}}function pj(n,e){if(1&n&&(d.TgZ(0,"div",8),d.YNc(1,lj,2,1,"div",9),d.YNc(2,fj,2,9,"div",10),d.qZA()),2&n){const t=d.oxw().$implicit,r=d.oxw();d.xp6(1),d.Q6J("ngIf",r.datepicker.showWeekNumbers),d.xp6(1),d.Q6J("ngForOf",t.days)}}function gj(n,e){1&n&&d.YNc(0,pj,3,2,"div",7),2&n&&d.Q6J("ngIf",!e.$implicit.collapsed)}const mj=["defaultDayTemplate"],_j=["content"];function vj(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const r=e.currentMonth,s=e.selected,a=e.disabled,h=e.focused;d.Q6J("date",e.date)("currentMonth",r)("selected",s)("disabled",a)("focused",h)}}function yj(n,e){if(1&n&&(d.TgZ(0,"div",12),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(1),d.hij(" ",r.i18n.getMonthLabel(t.firstDate)," ")}}function bj(n,e){if(1&n&&(d.TgZ(0,"div",9),d.YNc(1,yj,2,1,"div",10),d._UZ(2,"ngb-datepicker-month",11),d.qZA()),2&n){const t=e.$implicit,r=d.oxw(2);d.xp6(1),d.Q6J("ngIf","none"===r.navigation||r.displayMonths>1&&"select"===r.navigation),d.xp6(1),d.Q6J("month",t.firstDate)}}function Ej(n,e){if(1&n&&d.YNc(0,bj,3,2,"div",8),2&n){const t=d.oxw();d.Q6J("ngForOf",t.model.months)}}function Cj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"ngb-datepicker-navigation",13),d.NdJ("navigate",function(s){d.CHM(t);const a=d.oxw();return d.KtG(a.onNavigateEvent(s))})("select",function(s){d.CHM(t);const a=d.oxw();return d.KtG(a.onNavigateDateSelect(s))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function wj(n,e){}function Dj(n,e){}const Tj=["ngbNavOutlet",""];function Sj(n,e){}const Ij=function(n){return{$implicit:n}};function Aj(n,e){if(1&n&&(d.TgZ(0,"div",2),d.YNc(1,Sj,0,0,"ng-template",3),d.qZA()),2&n){const t=d.oxw().$implicit,r=d.oxw();d.Q6J("item",t)("nav",r.nav)("role",r.paneRole),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",d.VKq(5,Ij,t.active||r.isPanelTransitioning(t)))}}function xj(n,e){if(1&n&&d.YNc(0,Aj,2,7,"div",1),2&n){const t=e.$implicit,r=d.oxw();d.Q6J("ngIf",t.isPanelInDom()||r.isPanelTransitioning(t))}}function Nj(n,e){1&n&&(d.TgZ(0,"span",9),d.SDv(1,10),d.qZA())}function Mj(n,e){1&n&&(d.TgZ(0,"span",9),d.SDv(1,11),d.qZA())}function Rj(n,e){1&n&&(d.TgZ(0,"span",9),d.SDv(1,12),d.qZA())}function Oj(n,e){1&n&&(d.TgZ(0,"span",9),d.SDv(1,13),d.qZA())}function kj(n,e){1&n&&d._uU(0,"...")}function Pj(n,e){1&n&&(d.TgZ(0,"span",15),d._uU(1,"(current)"),d.qZA())}function Fj(n,e){if(1&n&&(d._uU(0),d.YNc(1,Pj,2,0,"span",14)),2&n){const t=e.$implicit,r=e.currentPage;d.hij(" ",t," "),d.xp6(1),d.Q6J("ngIf",t===r)}}function Lj(n,e){}const Bj=function(n){return{disabled:!0,currentPage:n}};function Vj(n,e){if(1&n&&(d.TgZ(0,"a",20),d.YNc(1,Lj,0,0,"ng-template",8),d.qZA()),2&n){const t=d.oxw(2).$implicit,r=d.oxw(),s=d.MAs(9);d.xp6(1),d.Q6J("ngTemplateOutlet",(null==r.tplEllipsis?null:r.tplEllipsis.templateRef)||s)("ngTemplateOutletContext",d.VKq(2,Bj,t))}}function Uj(n,e){}const $j=function(n,e,t){return{disabled:n,$implicit:e,currentPage:t}};function jj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",21),d.NdJ("click",function(s){d.CHM(t);const a=d.oxw().$implicit;return d.oxw(2).selectPage(a),d.KtG(s.preventDefault())}),d.YNc(1,Uj,0,0,"ng-template",8),d.qZA()}if(2&n){const t=d.oxw().$implicit,r=d.oxw(),s=r.disabled,a=r.$implicit,h=d.oxw(),_=d.MAs(11);d.uIk("tabindex",s?"-1":null)("aria-disabled",s?"true":null),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==h.tplNumber?null:h.tplNumber.templateRef)||_)("ngTemplateOutletContext",d.kEZ(4,$j,s,t,a))}}function Hj(n,e){if(1&n&&(d.TgZ(0,"li",17),d.YNc(1,Vj,2,4,"a",18),d.YNc(2,jj,2,8,"a",19),d.qZA()),2&n){const t=e.$implicit,r=d.oxw(),s=r.$implicit,a=r.disabled,h=d.oxw();d.ekj("active",t===s)("disabled",h.isEllipsis(t)||a),d.uIk("aria-current",t===s?"page":null),d.xp6(1),d.Q6J("ngIf",h.isEllipsis(t)),d.xp6(1),d.Q6J("ngIf",!h.isEllipsis(t))}}function Gj(n,e){1&n&&d.YNc(0,Hj,3,7,"li",16),2&n&&d.Q6J("ngForOf",e.pages)}function qj(n,e){}const WN=function(n,e){return{disabled:n,currentPage:e}};function Wj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",17)(1,"a",22),d.NdJ("click",function(s){return d.CHM(t),d.oxw().selectPage(1),d.KtG(s.preventDefault())}),d.YNc(2,qj,0,0,"ng-template",8),d.qZA()()}if(2&n){const t=d.oxw(),r=d.MAs(1);d.ekj("disabled",t.previousDisabled()),d.xp6(1),d.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||r)("ngTemplateOutletContext",d.WLB(6,WN,t.previousDisabled(),t.page))}}function zj(n,e){}const Kj=function(n){return{disabled:n}};function Zj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",17)(1,"a",23),d.NdJ("click",function(s){d.CHM(t);const a=d.oxw();return a.selectPage(a.page-1),d.KtG(s.preventDefault())}),d.YNc(2,zj,0,0,"ng-template",8),d.qZA()()}if(2&n){const t=d.oxw(),r=d.MAs(3);d.ekj("disabled",t.previousDisabled()),d.xp6(1),d.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||r)("ngTemplateOutletContext",d.VKq(6,Kj,t.previousDisabled()))}}function Yj(n,e){}function Jj(n,e){}function Qj(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",17)(1,"a",24),d.NdJ("click",function(s){d.CHM(t);const a=d.oxw();return a.selectPage(a.page+1),d.KtG(s.preventDefault())}),d.YNc(2,Jj,0,0,"ng-template",8),d.qZA()()}if(2&n){const t=d.oxw(),r=d.MAs(5);d.ekj("disabled",t.nextDisabled()),d.xp6(1),d.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||r)("ngTemplateOutletContext",d.WLB(6,WN,t.nextDisabled(),t.page))}}function Xj(n,e){}function eH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",17)(1,"a",25),d.NdJ("click",function(s){d.CHM(t);const a=d.oxw();return a.selectPage(a.pageCount),d.KtG(s.preventDefault())}),d.YNc(2,Xj,0,0,"ng-template",8),d.qZA()()}if(2&n){const t=d.oxw(),r=d.MAs(7);d.ekj("disabled",t.nextDisabled()),d.xp6(1),d.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||r)("ngTemplateOutletContext",d.WLB(6,WN,t.nextDisabled(),t.page))}}const tH=function(n,e,t){return{$implicit:n,pages:e,disabled:t}};function iH(n,e){if(1&n&&(d.TgZ(0,"span"),d.SDv(1,2),d.ALo(2,"percent"),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.pQV(d.lcZ(2,1,t.getValue()/t.max)),d.QtT(1)}}function sH(n,e){1&n&&d._uU(0),2&n&&d.Oqu(100===e.fill?"\u2605":"\u2606")}function oH(n,e){}function aH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span",2),d._uU(1),d.qZA(),d.TgZ(2,"span",3),d.NdJ("mouseenter",function(){const a=d.CHM(t).index,h=d.oxw();return d.KtG(h.enter(a+1))})("click",function(){const a=d.CHM(t).index,h=d.oxw();return d.KtG(h.handleClick(a+1))}),d.YNc(3,oH,0,0,"ng-template",4),d.qZA()}if(2&n){const t=e.index,r=d.oxw(),s=d.MAs(1);d.xp6(1),d.hij("(",t<r.nextRate?"*":" ",")"),d.xp6(1),d.Udp("cursor",r.isInteractive()?"pointer":"default"),d.xp6(1),d.Q6J("ngTemplateOutlet",r.starTemplate||r.starTemplateFromContent||s)("ngTemplateOutletContext",r.contexts[t])}}function uH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.changeHour(s.hourStep))}),d._UZ(1,"span",12),d.TgZ(2,"span",13),d.SDv(3,14),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),d.Q6J("disabled",t.disabled)}}function cH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.changeHour(-s.hourStep))}),d._UZ(1,"span",15),d.TgZ(2,"span",13),d.SDv(3,16),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),d.Q6J("disabled",t.disabled)}}function lH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.changeMinute(s.minuteStep))}),d._UZ(1,"span",12),d.TgZ(2,"span",13),d.SDv(3,17),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),d.Q6J("disabled",t.disabled)}}function dH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.changeMinute(-s.minuteStep))}),d._UZ(1,"span",15),d.TgZ(2,"span",13),d.SDv(3,18),d.qZA()()}if(2&n){const t=d.oxw();d.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),d.Q6J("disabled",t.disabled)}}function hH(n,e){1&n&&(d.TgZ(0,"div",5),d._uU(1,":"),d.qZA())}function fH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.changeSecond(s.secondStep))}),d._UZ(1,"span",12),d.TgZ(2,"span",13),d.SDv(3,21),d.qZA()()}if(2&n){const t=d.oxw(2);d.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),d.Q6J("disabled",t.disabled)}}function pH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",11),d.NdJ("click",function(){d.CHM(t);const s=d.oxw(2);return d.KtG(s.changeSecond(-s.secondStep))}),d._UZ(1,"span",15),d.TgZ(2,"span",13),d.SDv(3,22),d.qZA()()}if(2&n){const t=d.oxw(2);d.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),d.Q6J("disabled",t.disabled)}}function gH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.YNc(1,fH,4,7,"button",3),d.TgZ(2,"input",20),d.NdJ("change",function(s){d.CHM(t);const a=d.oxw();return d.KtG(a.updateSecond(s.target.value))})("blur",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.handleBlur())})("input",function(s){d.CHM(t);const a=d.oxw();return d.KtG(a.formatInput(s.target))})("keydown.ArrowUp",function(s){d.CHM(t);const a=d.oxw();return a.changeSecond(a.secondStep),d.KtG(s.preventDefault())})("keydown.ArrowDown",function(s){d.CHM(t);const a=d.oxw();return a.changeSecond(-a.secondStep),d.KtG(s.preventDefault())}),d.qZA(),d.YNc(3,pH,4,7,"button",3),d.qZA()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.spinners),d.xp6(1),d.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),d.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),d.xp6(1),d.Q6J("ngIf",t.spinners)}}function mH(n,e){1&n&&d._UZ(0,"div",5)}function _H(n,e){if(1&n&&(d.ynx(0),d.SDv(1,27),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.pQV(t.i18n.getAfternoonPeriod()),d.QtT(1)}}function vH(n,e){if(1&n&&d.SDv(0,28),2&n){const t=d.oxw(2);d.pQV(t.i18n.getMorningPeriod()),d.QtT(0)}}function yH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",23)(1,"button",24),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.toggleMeridian())}),d.YNc(2,_H,2,1,"ng-container",25),d.YNc(3,vH,1,1,"ng-template",null,26,d.W1O),d.qZA()()}if(2&n){const t=d.MAs(4),r=d.oxw();d.xp6(1),d.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),d.Q6J("disabled",r.disabled),d.xp6(1),d.Q6J("ngIf",r.model&&r.model.hour>=12)("ngIfElse",t)}}function bH(n,e){if(1&n&&(d.TgZ(0,"strong",3),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.header)}}function EH(n,e){}function CH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4),d.YNc(1,EH,0,0,"ng-template",5),d.TgZ(2,"button",6),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.hide())}),d.qZA()()}if(2&n){const t=d.oxw(),r=d.MAs(1);d.xp6(1),d.Q6J("ngTemplateOutlet",t.contentHeaderTpl||r)}}function wH(n,e){if(1&n&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit,r=d.oxw();d.Tol(r.highlightClass),d.xp6(1),d.Oqu(t)}}function DH(n,e){if(1&n&&d._uU(0),2&n){const t=d.oxw().$implicit;d.Oqu(t)}}function TH(n,e){if(1&n&&(d.YNc(0,wH,2,3,"span",1),d.YNc(1,DH,1,1,"ng-template",null,2,d.W1O)),2&n){const t=e.odd,r=d.MAs(2);d.Q6J("ngIf",t)("ngIfElse",r)}}function ca(n){return parseInt(`${n}`,10)}function p2(n){return null!=n?`${n}`:""}function RS(n,e,t=0){return Math.max(Math.min(n,e),t)}function Cs(n){return!isNaN(ca(n))}function Xi(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function DE(n){return Cs(n)?`0${n}`.slice(-2):""}function m2(n,e){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(e)>=0}function kS(n){return(n||document.body).getBoundingClientRect()}function _2(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const v2={animation:!0,transitionTimerDelayMs:5},RH=()=>{},{transitionTimerDelayMs:OH}=v2,JD=new Map,Qd=(n,e,t,r)=>{let s=r.context||{};const a=JD.get(e);if(a)switch(r.runningTransition){case"continue":return lc.E;case"stop":n.run(()=>a.transition$.complete()),s=Object.assign(a.context,s),JD.delete(e)}const h=t(e,r.animation,s)||RH;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>h()),Zt(void 0).pipe(function NH(n){return e=>new fr.y(t=>e.subscribe({next:h=>n.run(()=>t.next(h)),error:h=>n.run(()=>t.error(h)),complete:()=>n.run(()=>t.complete())}))}(n));const _=new Bi.x,E=new Bi.x,D=_.pipe(function M3(...n){return e=>kh(e,Zt(...n))}(!0));JD.set(e,{transition$:_,complete:()=>{E.next(),E.complete()},context:s});const x=function MH(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const L=nl(e,"transitionend").pipe(ja(D),mi(({target:se})=>se===e));(function ZP(...n){return 1===(n=KP(n)).length?(0,Js.Xf)(n[0]):new fr.y(function x3(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Js.Xf)(n[r]).subscribe((0,M.x)(e,s=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(s)})))}}(n))})(ON(x+OH).pipe(ja(D)),L,E).pipe(ja(D)).subscribe(()=>{JD.delete(e),n.run(()=>{h(),_.next(),_.complete()})})}),_.asObservable()},y2=(n,e,t)=>{let{direction:r,maxSize:s,dimension:a}=t;const{classList:h}=n;function _(){h.add("collapse"),"show"===r?h.add("show"):h.remove("show")}if(e)return s||(s=function PH(n,e){if(typeof navigator>"u")return"0px";const{classList:t}=n,r=t.contains("show");r||t.add("show"),n.style[e]="";const s=n.getBoundingClientRect()[e]+"px";return r||t.remove("show"),s}(n,a),t.maxSize=s,n.style[a]="show"!==r?s:"0px",h.remove("collapse"),h.remove("collapsing"),h.remove("show"),kS(n),h.add("collapsing")),n.style[a]="show"===r?s:"0px",()=>{_(),h.remove("collapsing"),n.style[a]=""};_()};let QD=(()=>{class n{constructor(){this.animation=v2.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FH=(()=>{class n{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(QD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LH=0,KN=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),b2=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),E2=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),ZN=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+LH++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new d.vpe,this.hidden=new d.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["ngb-panel"]],contentQueries:function(t,r,s){if(1&t&&(d.Suo(s,b2,4),d.Suo(s,KN,4),d.Suo(s,E2,4)),2&t){let a;d.iGM(a=d.CRH())&&(r.titleTpls=a),d.iGM(a=d.CRH())&&(r.headerTpls=a),d.iGM(a=d.CRH())&&(r.contentTpls=a)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),BH=(()=>{class n{constructor(t){this._El=t,this.ngbRef=new d.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),C2=(()=>{class n{constructor(t,r){this.accordion=t,this.panel=r}set ngbPanelToggle(t){t&&(this.panel=t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>YN)),d.Y36(ZN,9))},n.\u0275dir=d.lG2({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.accordion.toggle(r.panel.id)}),2&t&&(d.Ikx("disabled",r.panel.disabled),d.uIk("aria-expanded",r.panel.isOpen)("aria-controls",r.panel.id),d.ekj("collapsed",!r.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),YN=(()=>{class n{constructor(t,r,s){this._ngZone=r,this._changeDetector=s,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new d.vpe,this.shown=new d.vpe,this.hidden=new d.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const r=this._findPanelById(t);r&&this._changeOpenState(r,!r.isOpen)}ngAfterContentChecked(){(function zN(n){return"string"==typeof n})(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(no(1)).subscribe(()=>{this.panels.forEach(t=>{const r=t.panelDiv;r?t.initClassDone||(t.initClassDone=!0,Qd(this._ngZone,r,y2,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,r){if(null!=t&&!t.disabled&&t.isOpen!==r){let s=!1;this.panelChange.emit({panelId:t.id,nextState:r,preventDefault:()=>{s=!0}}),s||(t.isOpen=r,t.transitionRunning=!0,r&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,r=!0){this.panels.forEach(s=>{s.id!==t&&s.isOpen&&(s.isOpen=!1,s.transitionRunning=r)})}_findPanelById(t){return this.panels.find(r=>r.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(r=>{r.transitionRunning&&Qd(this._ngZone,r.panelDiv,y2,{animation:t,runningTransition:"stop",context:{direction:r.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{r.transitionRunning=!1;const{id:a}=r;r.isOpen?(r.shown.emit(),this.shown.emit(a)):(r.hidden.emit(),this.hidden.emit(a))})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(FH),d.Y36(d.R0b),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-accordion"]],contentQueries:function(t,r,s){if(1&t&&d.Suo(s,ZN,4),2&t){let a;d.iGM(a=d.CRH())&&(r.panels=a)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("aria-multiselectable",!r.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[d.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,r){1&t&&(d.YNc(0,V$,3,3,"ng-template",0,1,d.W1O),d.YNc(2,G$,4,11,"ng-template",2)),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.panels))},dependencies:[vr,Xr,C2,BH,KN,kr],encapsulation:2}),n})(),w2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[YN]}),n})();const VH=({classList:n})=>{n.remove("show")};let UH=(()=>{class n{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(QD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$H=(()=>{class n{constructor(t,r,s,a){this._renderer=r,this._element=s,this._zone=a,this.closed=new d.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=Qd(this._zone,this._element.nativeElement,VH,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const r=t.type;r&&!r.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${r.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${r.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(UH),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("fade",r.animation)("alert-dismissible",r.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[d.TTD,d.jDz],ngContentSelectors:qN,decls:2,vars:1,consts:function(){let e;return e=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",e,3,"click",4,"ngIf"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(t,r){1&t&&(d.F$t(),d.Hsn(0),d.YNc(1,q$,1,0,"button",0)),2&t&&(d.xp6(1),d.Q6J("ngIf",r.dismissible))},dependencies:[kr],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),D2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[$H]}),n})();var Jm=(()=>(function(n){n.START="start",n.END="end"}(Jm||(Jm={})),Jm))();const T2=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),XD=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},PS=n=>{XD(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},jH=(n,e,{direction:t})=>{const{classList:r}=n;return e?(T2(n)?XD(r):(r.add("carousel-item-"+(t===Jm.START?"next":"prev")),kS(n),r.add("carousel-item-"+t)),()=>{PS(r),r.add("active")}):(XD(r),PS(r),void r.add("active"))},HH=(n,e,{direction:t})=>{const{classList:r}=n;return e?(T2(n)?XD(r):r.add("carousel-item-"+t),()=>{PS(r),r.remove("active")}):(XD(r),PS(r),void r.remove("active"))};let GH=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(QD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qH=0,WH=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+qH++,this.slid=new d.vpe}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),zH=(()=>{class n{constructor(t,r,s,a,h){this._platformId=r,this._ngZone=s,this._cd=a,this._container=h,this.NgbSlideEventSource=oy,this._destroy$=new Bi.x,this._interval$=new Ns(0),this._mouseHover$=new Ns(!1),this._focused$=new Ns(!1),this._pauseOnHover$=new Ns(!1),this._pauseOnFocus$=new Ns(!1),this._pause$=new Ns(!1),this._wrap$=new Ns(!1),this.slide=new d.vpe,this.slid=new d.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(oy.ARROW_LEFT)}arrowRight(){this.focus(),this.next(oy.ARROW_RIGHT)}ngAfterContentInit(){(function _a(n){return n===Fu})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=Wf([this.slide.pipe((0,k.U)(r=>r.current),gu(this.activeId)),this._wrap$,this.slides.changes.pipe(gu(null))]).pipe((0,k.U)(([r,s])=>{const a=this.slides.toArray(),h=this._getSlideIdxById(r);return s?a.length>1:h<a.length-1}),eb());Wf([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,k.U)(([r,s,a,h,_,E,D])=>r||s&&a||h&&_||!D?0:E),eb(),Ui(r=>r>0?ON(r,r):YP),ja(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(oy.TIMER)))}),this.slides.changes.pipe(ja(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(n=>{JD.get(n)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(no(1)).subscribe(()=>{for(const{id:t}of this.slides){const r=this._getSlideElement(t);t===this.activeId?r.classList.add("active"):r.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,r){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),r)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),Jm.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),Jm.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,r,s){const a=this._transitionIds;if(a&&(a[0]!==t||a[1]!==this.activeId))return;let h=this._getSlideById(t);if(h&&h.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:h.id,direction:r,paused:this._pause$.value,source:s});const _={animation:this.animation,runningTransition:"stop",context:{direction:r}},E=[],D=this._getSlideById(this.activeId);if(D){const se=Qd(this._ngZone,this._getSlideElement(D.id),HH,_);se.subscribe(()=>{D.slid.emit({isShown:!1,direction:r,source:s})}),E.push(se)}const x=this.activeId;this.activeId=h.id;const L=this._getSlideById(this.activeId),W=Qd(this._ngZone,this._getSlideElement(h.id),jH,_);W.subscribe(()=>{L?.slid.emit({isShown:!0,direction:r,source:s})}),E.push(W),function N3(...n){const e=(0,Pi.jO)(n),t=KP(n);return t.length?new fr.y(r=>{let s=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{s=a=null});for(let h=0;!r.closed&&h<t.length;h++)(0,Js.Xf)(t[h]).subscribe((0,M.x)(r,_=>{if(s[h].push(_),s.every(E=>E.length)){const E=s.map(D=>D.shift());r.next(e?e(...E):E),s.some((D,x)=>!D.length&&a[x])&&r.complete()}},()=>{a[h]=!0,!s[h].length&&r.complete()}));return()=>{s=a=null}}):lc.E}(...E).pipe(no(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:x,current:h.id,direction:r,paused:this._pause$.value,source:s})})}this._cd.markForCheck()}_getSlideEventDirection(t,r){return this._getSlideIdxById(t)>this._getSlideIdxById(r)?Jm.END:Jm.START}_getSlideById(t){return this.slides.find(r=>r.id===t)||null}_getSlideIdxById(t){const r=this._getSlideById(t);return null!=r?this.slides.toArray().indexOf(r):-1}_getNextSlide(t){const r=this.slides.toArray(),s=this._getSlideIdxById(t);return s===r.length-1?this.wrap?r[0].id:r[r.length-1].id:r[s+1].id}_getPrevSlide(t){const r=this.slides.toArray(),s=this._getSlideIdxById(t);return 0===s?this.wrap?r[r.length-1].id:r[0].id:r[s-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(GH),d.Y36(d.Lbi),d.Y36(d.R0b),d.Y36(d.sBO),d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,r,s){if(1&t&&d.Suo(s,WH,4),2&t){let a;d.iGM(a=d.CRH())&&(r.slides=a)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,r){1&t&&d.NdJ("keydown.arrowLeft",function(){return r.keyboard&&r.arrowLeft()})("keydown.arrowRight",function(){return r.keyboard&&r.arrowRight()})("mouseenter",function(){return r.mouseHover=!0})("mouseleave",function(){return r.mouseHover=!1})("focusin",function(){return r.focused=!0})("focusout",function(){return r.focused=!1}),2&t&&(d.uIk("aria-activedescendant","slide-"+r.activeId),d.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[d.jDz],decls:6,vars:6,consts:function(){let e,t,r;return e=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,r=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],e,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],r]},template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,W$,1,5,"button",1),d.qZA(),d.TgZ(2,"div",2),d.YNc(3,K$,4,4,"div",3),d.qZA(),d.YNc(4,Z$,4,0,"button",4),d.YNc(5,Y$,4,0,"button",5)),2&t&&(d.ekj("visually-hidden",!r.showNavigationIndicators),d.xp6(1),d.Q6J("ngForOf",r.slides),d.xp6(2),d.Q6J("ngForOf",r.slides),d.xp6(1),d.Q6J("ngIf",r.showNavigationArrows),d.xp6(1),d.Q6J("ngIf",r.showNavigationArrows))},dependencies:[vr,Xr,kr],encapsulation:2,changeDetection:0}),n})();var oy=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(oy||(oy={})),oy))();let S2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[zH]}),n})(),JN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class yo{constructor(e,t,r){this.year=Xi(e)?e:null,this.month=Xi(t)?t:null,this.day=Xi(r)?r:null}static from(e){return e instanceof yo?e:e?new yo(e.year,e.month,e.day):null}equals(e){return null!=e&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day<e.day:this.month<e.month:this.year<e.year)}after(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day>e.day:this.month>e.month:this.year>e.year)}}function TE(n,e){return!function KH(n,e){return!n&&!e||!!n&&!!e&&n.equals(e)}(n,e)}function I2(n,e){return!(!n&&!e||n&&e&&n.year===e.year&&n.month===e.month)}function FS(n,e,t){return n&&e&&n.before(e)?e:n&&t&&n.after(t)?t:n||null}function QN(n,e){const{minDate:t,maxDate:r,disabled:s,markDisabled:a}=e;return!(null==n||s||a&&a(n,{year:n.year,month:n.month})||t&&n.before(t)||r&&n.after(r))}function A2(n){return new yo(n.getFullYear(),n.getMonth()+1,n.getDate())}function LS(n){const e=new Date(n.year,n.month-1,n.day,12);return isNaN(e.getTime())||e.setFullYear(n.year),e}let BS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function r8(){return new i8}()},providedIn:"root"}),n})(),i8=(()=>{class n extends BS{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,r="d",s=1){let a=LS(t),h=!0,_=a.getMonth();switch(r){case"y":a.setFullYear(a.getFullYear()+s);break;case"m":_+=s,a.setMonth(_),_%=12,_<0&&(_+=12);break;case"d":a.setDate(a.getDate()+s),h=!1;break;default:return t}return h&&a.getMonth()!==_&&a.setDate(0),A2(a)}getPrev(t,r="d",s=1){return this.getNext(t,r,-s)}getWeekday(t){let s=LS(t).getDay();return 0===s?7:s}getWeekNumber(t,r){7===r&&(r=0);const h=LS(t[(11-r)%7]);h.setDate(h.getDate()+4-(h.getDay()||7));const _=h.getTime();return h.setMonth(0),h.setDate(1),Math.floor(Math.round((_-h.getTime())/864e5)/7)+1}getToday(){return A2(new Date)}isValid(t){if(!(t&&Xi(t.year)&&Xi(t.month)&&Xi(t.day)&&0!==t.year))return!1;const r=LS(t);return!isNaN(r.getTime())&&r.getFullYear()===t.year&&r.getMonth()+1===t.month&&r.getDate()===t.day}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ay=(()=>{class n{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function s8(n){return new o8(n)}(d.LFG(d.soG)),r},providedIn:"root"}),n})(),o8=(()=>{class n extends ay{constructor(t){super(),this._locale=t,this._monthsShort=ur(t,He.Standalone,ot.Abbreviated),this._monthsFull=ur(t,He.Standalone,ot.Wide)}getWeekdayLabel(t,r){const s=Rn(this._locale,He.Standalone,void 0===r?ot.Short:r);return s.map((h,_)=>s[(_+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){return Hs(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),XN=(()=>{class n{constructor(t,r){this._calendar=t,this._i18n=r,this._VALIDATORS={dayTemplateData:s=>{if(this._state.dayTemplateData!==s)return{dayTemplateData:s}},displayMonths:s=>{if(Xi(s=ca(s))&&s>0&&this._state.displayMonths!==s)return{displayMonths:s}},disabled:s=>{if(this._state.disabled!==s)return{disabled:s}},firstDayOfWeek:s=>{if(Xi(s=ca(s))&&s>=0&&this._state.firstDayOfWeek!==s)return{firstDayOfWeek:s}},focusVisible:s=>{if(this._state.focusVisible!==s&&!this._state.disabled)return{focusVisible:s}},markDisabled:s=>{if(this._state.markDisabled!==s)return{markDisabled:s}},maxDate:s=>{const a=this.toValidDate(s,null);if(TE(this._state.maxDate,a))return{maxDate:a}},minDate:s=>{const a=this.toValidDate(s,null);if(TE(this._state.minDate,a))return{minDate:a}},navigation:s=>{if(this._state.navigation!==s)return{navigation:s}},outsideDays:s=>{if(this._state.outsideDays!==s)return{outsideDays:s}},weekdays:s=>{const a=!0===s||!1===s?ot.Short:s,h=!0!==s&&!1!==s||s;if(this._state.weekdayWidth!==a||this._state.weekdaysVisible!==h)return{weekdayWidth:a,weekdaysVisible:h}}},this._model$=new Bi.x,this._dateSelect$=new Bi.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:ot.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(mi(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(mi(t=>null!==t))}set(t){let r=Object.keys(t).map(s=>this._VALIDATORS[s](t[s])).reduce((s,a)=>({...s,...a}),{});Object.keys(r).length>0&&this._nextState(r)}focus(t){const r=this.toValidDate(t,null);null!=r&&!this._state.disabled&&TE(this._state.focusDate,r)&&this._nextState({focusDate:t})}focusSelect(){QN(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const r=this.toValidDate(t,this._calendar.getToday());null!=r&&!this._state.disabled&&(!this._state.firstDate||I2(this._state.firstDate,r))&&this._nextState({firstDate:r})}select(t,r={}){const s=this.toValidDate(t,null);null!=s&&!this._state.disabled&&(TE(this._state.selectedDate,s)&&this._nextState({selectedDate:s}),r.emitEvent&&QN(s,this._state)&&this._dateSelect$.next(s))}toValidDate(t,r){const s=yo.from(t);return void 0===r&&(r=this._calendar.getToday()),this._calendar.isValid(s)?s:r}getMonth(t){for(let r of this._state.months)if(t.month===r.number&&t.year===r.year)return r;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const r=this._updateState(t);this._patchContexts(r),this._state=r,this._model$.next(this._state)}_patchContexts(t){const{months:r,displayMonths:s,selectedDate:a,focusDate:h,focusVisible:_,disabled:E,outsideDays:D}=t;t.months.forEach(x=>{x.weeks.forEach(L=>{L.days.forEach(W=>{h&&(W.context.focused=h.equals(W.date)&&_),W.tabindex=!E&&h&&W.date.equals(h)&&h.month===x.number?0:-1,!0===E&&(W.context.disabled=!0),void 0!==a&&(W.context.selected=null!==a&&a.equals(W.date)),x.number!==W.date.month&&(W.hidden="hidden"===D||"collapsed"===D||s>1&&W.date.after(r[0].firstDate)&&W.date.before(r[s-1].lastDate))})})})}_updateState(t){const r=Object.assign({},this._state,t);let s=r.firstDate;if(("minDate"in t||"maxDate"in t)&&(function ZH(n,e){if(e&&n&&e.before(n))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${n}`)}(r.minDate,r.maxDate),r.focusDate=FS(r.focusDate,r.minDate,r.maxDate),r.firstDate=FS(r.firstDate,r.minDate,r.maxDate),s=r.focusDate),"disabled"in t&&(r.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(s=r.selectedDate),"focusVisible"in t||"focusDate"in t&&(r.focusDate=FS(r.focusDate,r.minDate,r.maxDate),s=r.focusDate,0!==r.months.length&&r.focusDate&&!r.focusDate.before(r.firstDate)&&!r.focusDate.after(r.lastDate)))return r;if("firstDate"in t&&(r.firstDate=FS(r.firstDate,r.minDate,r.maxDate),s=r.firstDate),s){const h=function e8(n,e,t,r,s){const{displayMonths:a,months:h}=t,_=h.splice(0,h.length);return Array.from({length:a},(D,x)=>{const L=Object.assign(n.getNext(e,"m",x),{day:1});if(h[x]=null,!s){const W=_.findIndex(se=>se.firstDate.equals(L));-1!==W&&(h[x]=_.splice(W,1)[0])}return L}).forEach((D,x)=>{null===h[x]&&(h[x]=function t8(n,e,t,r,s={}){const{dayTemplateData:a,minDate:h,maxDate:_,firstDayOfWeek:E,markDisabled:D,outsideDays:x,weekdayWidth:L,weekdaysVisible:W}=t,se=n.getToday();s.firstDate=null,s.lastDate=null,s.number=e.month,s.year=e.year,s.weeks=s.weeks||[],s.weekdays=s.weekdays||[],e=function n8(n,e,t){const r=n.getDaysPerWeek(),s=new yo(e.year,e.month,1),a=n.getWeekday(s)%r;return n.getPrev(s,"d",(r+a-t)%r)}(n,e,E),W||(s.weekdays.length=0);for(let _e=0;_e<n.getWeeksPerMonth();_e++){let Re=s.weeks[_e];Re||(Re=s.weeks[_e]={number:0,days:[],collapsed:!0});const ze=Re.days;for(let Ct=0;Ct<n.getDaysPerWeek();Ct++){0===_e&&W&&(s.weekdays[Ct]=r.getWeekdayLabel(n.getWeekday(e),L));const St=new yo(e.year,e.month,e.day),Vt=n.getNext(St),Tt=r.getDayAriaLabel(St);let wt=!!(h&&St.before(h)||_&&St.after(_));!wt&&D&&(wt=D(St,{month:s.number,year:s.year}));let Pt=St.equals(se),An=a?a(St,{month:s.number,year:s.year}):void 0;null===s.firstDate&&St.month===s.number&&(s.firstDate=St),St.month===s.number&&Vt.month!==s.number&&(s.lastDate=St);let ar=ze[Ct];ar||(ar=ze[Ct]={}),ar.date=St,ar.context=Object.assign(ar.context||{},{$implicit:St,date:St,data:An,currentMonth:s.number,currentYear:s.year,disabled:wt,focused:!1,selected:!1,today:Pt}),ar.tabindex=-1,ar.ariaLabel=Tt,ar.hidden=!1,e=Vt}Re.number=n.getWeekNumber(ze.map(Ct=>Ct.date),E),Re.collapsed="collapsed"===x&&ze[0].date.month!==s.number&&ze[ze.length-1].date.month!==s.number}return s}(n,D,t,r,_.shift()||{}))}),h}(this._calendar,s,r,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);r.months=h,r.firstDate=h[0].firstDate,r.lastDate=h[h.length-1].lastDate,"selectedDate"in t&&!QN(r.selectedDate,r)&&(r.selectedDate=null),"firstDate"in t&&(!r.focusDate||r.focusDate.before(r.firstDate)||r.focusDate.after(r.lastDate))&&(r.focusDate=s);const _=!this._state.firstDate||this._state.firstDate.year!==r.firstDate.year,E=!this._state.firstDate||this._state.firstDate.month!==r.firstDate.month;"select"===r.navigation?(("minDate"in t||"maxDate"in t||0===r.selectBoxes.years.length||_)&&(r.selectBoxes.years=function JH(n,e,t){if(!n)return[];const r=e?Math.max(e.year,n.year-500):n.year-10,a=(t?Math.min(t.year,n.year+500):n.year+10)-r+1,h=Array(a);for(let _=0;_<a;_++)h[_]=r+_;return h}(r.firstDate,r.minDate,r.maxDate)),("minDate"in t||"maxDate"in t||0===r.selectBoxes.months.length||_)&&(r.selectBoxes.months=function YH(n,e,t,r){if(!e)return[];let s=n.getMonths(e.year);if(t&&e.year===t.year){const a=s.findIndex(h=>h===t.month);s=s.slice(a)}if(r&&e.year===r.year){const a=s.findIndex(h=>h===r.month);s=s.slice(0,a+1)}return s}(this._calendar,r.firstDate,r.minDate,r.maxDate))):r.selectBoxes={years:[],months:[]},("arrows"===r.navigation||"select"===r.navigation)&&(E||_||"minDate"in t||"maxDate"in t||"disabled"in t)&&(r.prevDisabled=r.disabled||function XH(n,e,t){const r=Object.assign(n.getPrev(e,"m"),{day:1});return null!=t&&(r.year===t.year&&r.month<t.month||r.year<t.year&&1===t.month)}(this._calendar,r.firstDate,r.minDate),r.nextDisabled=r.disabled||function QH(n,e,t){const r=Object.assign(n.getNext(e,"m"),{day:1});return null!=t&&r.after(t)}(this._calendar,r.lastDate,r.maxDate))}return r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(BS),d.LFG(ay))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var SE=(()=>(function(n){n[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT"}(SE||(SE={})),SE))();let a8=(()=>{class n{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ay))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,r){2&t&&d.ekj("bg-primary",r.selected)("text-white",r.selected)("text-muted",r.isMuted())("outside",r.isMuted())("active",r.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[d.jDz],attrs:J$,decls:1,vars:1,template:function(t,r){1&t&&d._uU(0),2&t&&d.Oqu(r.i18n.getDayNumerals(r.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),u8=(()=>{class n{constructor(t,r){this.i18n=t,this._renderer=r,this.select=new d.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new yo(this.date.year,ca(t),1))}changeYear(t){this.select.emit(new yo(ca(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ay),d.Y36(d.Qsj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,r){if(1&t&&(d.Gf(Q$,7,d.SBq),d.Gf(X$,7,d.SBq)),2&t){let s;d.iGM(s=d.CRH())&&(r.monthSelect=s.first),d.iGM(s=d.CRH())&&(r.yearSelect=s.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[d.jDz],decls:6,vars:4,consts:function(){let e,t,r,s;return e=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,r=$localize`:@@ngb.datepicker.select-year:Select year`,s=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",e,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",r,"title",s,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,r){1&t&&(d.TgZ(0,"select",0,1),d.NdJ("change",function(a){return r.changeMonth(a.target.value)}),d.YNc(2,ej,2,3,"option",2),d.qZA(),d.TgZ(3,"select",3,4),d.NdJ("change",function(a){return r.changeYear(a.target.value)}),d.YNc(5,tj,2,2,"option",2),d.qZA()),2&t&&(d.Q6J("disabled",r.disabled),d.xp6(2),d.Q6J("ngForOf",r.months),d.xp6(1),d.Q6J("disabled",r.disabled),d.xp6(2),d.Q6J("ngForOf",r.years))},dependencies:[vr],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),c8=(()=>{class n{constructor(t){this.i18n=t,this.navigation=SE,this.months=[],this.navigate=new d.vpe,this.select=new d.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ay))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[d.jDz],decls:8,vars:4,consts:function(){let e,t,r,s;return e=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,r=$localize`:@@ngb.datepicker.next-month:Next month`,s=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",e,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",r,"title",s,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(a){return r.onClickPrev(a)}),d._UZ(2,"span",2),d.qZA()(),d.YNc(3,nj,1,4,"ngb-datepicker-navigation-select",3),d.YNc(4,oj,1,1,null,4),d.TgZ(5,"div",5)(6,"button",6),d.NdJ("click",function(a){return r.onClickNext(a)}),d._UZ(7,"span",2),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("disabled",r.prevDisabled),d.xp6(2),d.Q6J("ngIf",r.showSelect),d.xp6(1),d.Q6J("ngIf",!r.showSelect),d.xp6(2),d.Q6J("disabled",r.nextDisabled))},dependencies:[kr,vr,u8],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var or=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(or||(or={})),or))();let l8=(()=>{class n{processKey(t,r){const{state:s,calendar:a}=r;switch(t.which){case or.PageUp:r.focusDate(a.getPrev(s.focusedDate,t.shiftKey?"y":"m",1));break;case or.PageDown:r.focusDate(a.getNext(s.focusedDate,t.shiftKey?"y":"m",1));break;case or.End:r.focusDate(t.shiftKey?s.maxDate:s.lastDate);break;case or.Home:r.focusDate(t.shiftKey?s.minDate:s.firstDate);break;case or.ArrowLeft:r.focusDate(a.getPrev(s.focusedDate,"d",1));break;case or.ArrowUp:r.focusDate(a.getPrev(s.focusedDate,"d",a.getDaysPerWeek()));break;case or.ArrowRight:r.focusDate(a.getNext(s.focusedDate,"d",1));break;case or.ArrowDown:r.focusDate(a.getNext(s.focusedDate,"d",a.getDaysPerWeek()));break;case or.Enter:case or.Space:r.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eM=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=ot.Short}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function d8(){return new h8}()},providedIn:"root"}),n})(),h8=(()=>{class n extends tM{fromModel(t){return t&&Xi(t.year)&&Xi(t.month)&&Xi(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&Xi(t.year)&&Xi(t.month)&&Xi(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),x2=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),nM=(()=>{class n{constructor(t,r,s,a){this.i18n=t,this.datepicker=r,this._keyboardService=s,this._service=a}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ay),d.Y36((0,d.Gpc)(()=>VS)),d.Y36(l8),d.Y36(XN))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,r){1&t&&d.NdJ("keydown",function(a){return r.onKeyDown(a)})},inputs:{month:"month"},standalone:!0,features:[d.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(d.YNc(0,cj,3,2,"div",0),d.YNc(1,gj,1,1,"ng-template",1)),2&t&&(d.Q6J("ngIf",r.viewModel.weekdays.length>0),d.xp6(1),d.Q6J("ngForOf",r.viewModel.weeks))},dependencies:[kr,vr,Xr],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),VS=(()=>{class n{constructor(t,r,s,a,h,_,E,D){this._service=t,this._calendar=r,this.i18n=s,this._elementRef=_,this._ngbDateAdapter=E,this._ngZone=D,this._controlValue=null,this._destroyed$=new Bi.x,this._publicState={},this.navigate=new d.vpe,this.dateSelect=new d.vpe,this.onChange=x=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(x=>this[x]=a[x]),t.dateSelect$.pipe(ja(this._destroyed$)).subscribe(x=>{this.dateSelect.emit(x)}),t.model$.pipe(ja(this._destroyed$)).subscribe(x=>{const L=x.firstDate,W=this.model?this.model.firstDate:null;this._publicState={maxDate:x.maxDate,minDate:x.minDate,firstDate:x.firstDate,lastDate:x.lastDate,focusedDate:x.focusDate,months:x.months.map(Ct=>Ct.firstDate)};let se=!1;if(!L.equals(W)&&(this.navigate.emit({current:W?{year:W.year,month:W.month}:null,next:{year:L.year,month:L.month},preventDefault:()=>se=!0}),se&&null!==W))return void this._service.open(W);const _e=x.selectedDate,Re=x.focusDate,ze=this.model?this.model.focusDate:null;this.model=x,TE(_e,this._controlValue)&&(this._controlValue=_e,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(_e))),TE(Re,ze)&&ze&&x.focusVisible&&this.focus(),h.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(yo.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(no(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(yo.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=nl(this._contentEl.nativeElement,"focusin"),r=nl(this._contentEl.nativeElement,"focusout"),{nativeElement:s}=this._elementRef;(0,Ck.T)(t,r).pipe(mi(({target:a,relatedTarget:h})=>!(m2(a,"ngb-dp-day")&&m2(h,"ngb-dp-day")&&s.contains(a)&&s.contains(h))),ja(this._destroyed$)).subscribe(({type:a})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===a})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(r=>t[r]=this[r]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const r={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(s=>s in t).forEach(s=>r[s]=this[s]),this._service.set(r),"startDate"in t){const{currentValue:s,previousValue:a}=t.startDate;I2(a,s)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case SE.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case SE.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=yo.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XN),d.Y36(BS),d.Y36(ay),d.Y36(eM),d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(tM),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(t,r,s){if(1&t&&d.Suo(s,x2,7),2&t){let a;d.iGM(a=d.CRH())&&(r.contentTemplate=a.first)}},viewQuery:function(t,r){if(1&t&&(d.Gf(mj,7),d.Gf(_j,7)),2&t){let s;d.iGM(s=d.CRH())&&(r._defaultDayTemplate=s.first),d.iGM(s=d.CRH())&&(r._contentEl=s.first)}},hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("disabled",r.model.disabled)},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[d._Bn([{provide:Dt,useExisting:(0,d.Gpc)(()=>n),multi:!0},XN]),d.TTD,d.jDz],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,r){if(1&t&&(d.YNc(0,vj,1,5,"ng-template",null,0,d.W1O),d.YNc(2,Ej,1,1,"ng-template",null,1,d.W1O),d.TgZ(4,"div",2),d.YNc(5,Cj,1,7,"ngb-datepicker-navigation",3),d.qZA(),d.TgZ(6,"div",4,5),d.YNc(8,wj,0,0,"ng-template",6),d.qZA(),d.YNc(9,Dj,0,0,"ng-template",6)),2&t){const s=d.MAs(3);d.xp6(5),d.Q6J("ngIf","none"!==r.navigation),d.xp6(1),d.ekj("ngb-dp-months",!r.contentTemplate),d.xp6(2),d.Q6J("ngTemplateOutlet",(null==r.contentTemplate?null:r.contentTemplate.templateRef)||s),d.xp6(1),d.Q6J("ngTemplateOutlet",r.footerTemplate)}},dependencies:[kr,vr,Xr,a8,nM,c8],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)),["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", "),new Date(1882,10,12),new Date(2174,10,25);let q2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[VS,nM]}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["",8,"navbar"]],standalone:!0}),n})(),K2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Z2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const U8=({classList:n})=>(n.remove("show"),()=>n.remove("active")),$8=(n,e)=>{e&&kS(n),n.classList.add("show")};let lM=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,r){2&t&&(d.Ikx("id",r.item.panelDomId),d.uIk("role",r.role?r.role:r.nav.roles?"tabpanel":void 0)("aria-labelledby",r.item.domId),d.ekj("fade",r.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),X2=(()=>{class n{constructor(t,r){this._cd=t,this._ngZone=r,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(ja(this.nav.destroy$),gu(this._activePane?.item||null),eb(),function k3(n){return mi((e,t)=>n<=t)}(1)).subscribe(t=>{const r={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Qd(this._ngZone,this._activePane.elRef.nativeElement,U8,r).subscribe(()=>{const s=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Qd(this._ngZone,this._activePane.elRef.nativeElement,$8,r).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),s&&(s.hidden.emit(),this.nav.hidden.emit(s.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(r=>r.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,r){if(1&t&&d.Gf(lM,5),2&t){let s;d.iGM(s=d.CRH())&&(r._panes=s)}},hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[d.jDz],attrs:Tj,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&d.YNc(0,xj,1,1,"ng-template",0),2&t&&d.Q6J("ngForOf",r.nav.items)},dependencies:[lM,vr,kr,Xr],encapsulation:2,changeDetection:0}),n})(),eF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[X2]}),n})(),j8=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),nF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),rF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),iF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),sF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),oF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),aF=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),uF=(()=>{class n{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new d.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,r){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),r<this.pageCount&&(r<this.pageCount-2?this.pages.push(-1):r===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,r=this.pageCount,s=Math.floor(this.maxSize/2);return this.page<=s?r=this.maxSize:this.pageCount-this.page<s?t=this.pageCount-this.maxSize:(t=this.page-s-1,r=this.page+(this.maxSize%2==0?s-1:s)),[t,r]}_applyPagination(){let r=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[r,r+this.maxSize]}_setPageInRange(t){const r=this.page;this.page=RS(t,this.pageCount,1),this.page!==r&&Cs(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),Cs(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let r=1;r<=this.pageCount;r++)this.pages.push(r);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let r=0,s=this.pageCount;[r,s]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(r,s),this._applyEllipses(r,s)}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(j8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-pagination"]],contentQueries:function(t,r,s){if(1&t&&(d.Suo(s,tF,5),d.Suo(s,nF,5),d.Suo(s,rF,5),d.Suo(s,iF,5),d.Suo(s,sF,5),d.Suo(s,oF,5),d.Suo(s,aF,5)),2&t){let a;d.iGM(a=d.CRH())&&(r.tplEllipsis=a.first),d.iGM(a=d.CRH())&&(r.tplFirst=a.first),d.iGM(a=d.CRH())&&(r.tplLast=a.first),d.iGM(a=d.CRH())&&(r.tplNext=a.first),d.iGM(a=d.CRH())&&(r.tplNumber=a.first),d.iGM(a=d.CRH())&&(r.tplPrevious=a.first),d.iGM(a=d.CRH())&&(r.tplPages=a.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[d.TTD,d.jDz],decls:20,vars:12,consts:function(){let e,t,r,s,a,h,_,E;return e=$localize`:@@ngb.pagination.first:`,t=$localize`:@@ngb.pagination.previous:`,r=$localize`:@@ngb.pagination.next:`,s=$localize`:@@ngb.pagination.last:`,a=$localize`:@@ngb.pagination.first-aria:First`,h=$localize`:@@ngb.pagination.previous-aria:Previous`,_=$localize`:@@ngb.pagination.next-aria:Next`,E=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],e,t,r,s,["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",a,"href","",1,"page-link",3,"click"],["aria-label",h,"href","",1,"page-link",3,"click"],["aria-label",_,"href","",1,"page-link",3,"click"],["aria-label",E,"href","",1,"page-link",3,"click"]]},template:function(t,r){if(1&t&&(d.YNc(0,Nj,2,0,"ng-template",null,0,d.W1O),d.YNc(2,Mj,2,0,"ng-template",null,1,d.W1O),d.YNc(4,Rj,2,0,"ng-template",null,2,d.W1O),d.YNc(6,Oj,2,0,"ng-template",null,3,d.W1O),d.YNc(8,kj,1,0,"ng-template",null,4,d.W1O),d.YNc(10,Fj,2,2,"ng-template",null,5,d.W1O),d.YNc(12,Gj,1,1,"ng-template",null,6,d.W1O),d.TgZ(14,"ul"),d.YNc(15,Wj,3,9,"li",7),d.YNc(16,Zj,3,8,"li",7),d.YNc(17,Yj,0,0,"ng-template",8),d.YNc(18,Qj,3,9,"li",7),d.YNc(19,eH,3,9,"li",7),d.qZA()),2&t){const s=d.MAs(13);d.xp6(14),d.Tol("pagination"+(r.size?" pagination-"+r.size:"")),d.xp6(1),d.Q6J("ngIf",r.boundaryLinks),d.xp6(1),d.Q6J("ngIf",r.directionLinks),d.xp6(1),d.Q6J("ngTemplateOutlet",(null==r.tplPages?null:r.tplPages.templateRef)||s)("ngTemplateOutletContext",d.kEZ(8,tH,r.page,r.pages,r.disabled)),d.xp6(1),d.Q6J("ngIf",r.directionLinks),d.xp6(1),d.Q6J("ngIf",r.boundaryLinks)}},dependencies:[kr,vr,Xr],encapsulation:2,changeDetection:0}),n})(),cF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[uF]}),n})(),dF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),K8=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Z8=(()=>{class n{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!Cs(t)||t<=0?100:t}get max(){return this._max}getValue(){return RS(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(K8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(t,r){2&t&&d.Udp("height",r.height)},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[d.jDz],ngContentSelectors:qN,decls:3,vars:12,consts:function(){let e;return e=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],e]},template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.YNc(1,iH,3,3,"span",1),d.Hsn(2),d.qZA()),2&t&&(d.DjV("progress-bar",r.type?" bg-"+r.type:"","",r.textType?" text-"+r.textType:"","\n    ",r.animated?" progress-bar-animated":"","",r.striped?" progress-bar-striped":"",""),d.Udp("width",r.getPercentValue(),"%"),d.uIk("aria-valuenow",r.getValue())("aria-valuemax",r.max)("aria-label",r.ariaLabel),d.xp6(1),d.Q6J("ngIf",r.showValue))},dependencies:[kr,zo],encapsulation:2,changeDetection:0}),n})(),hF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Z8]}),n})(),Y8=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J8=(()=>{class n{constructor(t,r){this._changeDetectorRef=r,this.contexts=[],this.disabled=!1,this.hover=new d.vpe,this.leave=new d.vpe,this.rateChange=new d.vpe(!0),this.onChange=s=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case or.ArrowDown:case or.ArrowLeft:this.update(this.rate-1);break;case or.ArrowUp:case or.ArrowRight:this.update(this.rate+1);break;case or.Home:this.update(0);break;case or.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,r=!0){const s=RS(t,this.max,0);this.isInteractive()&&this.rate!==s&&(this.rate=s,this.rateChange.emit(this.rate)),r&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((r,s)=>r.fill=Math.round(100*RS(t-s,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,r)=>({fill:0,index:r}))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Y8),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,r,s){if(1&t&&d.Suo(s,d.Rgc,5),2&t){let a;d.iGM(a=d.CRH())&&(r.starTemplateFromContent=a.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("blur",function(){return r.handleBlur()})("keydown",function(a){return r.handleKeyDown(a)})("mouseleave",function(){return r.reset()}),2&t&&(d.Ikx("tabindex",r.disabled?-1:r.tabindex),d.uIk("aria-valuemax",r.max)("aria-valuenow",r.nextRate)("aria-valuetext",r.ariaValueText())("aria-disabled",!!r.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[d._Bn([{provide:Dt,useExisting:(0,d.Gpc)(()=>n),multi:!0}]),d.TTD,d.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(d.YNc(0,sH,1,1,"ng-template",null,0,d.W1O),d.YNc(2,aH,4,5,"ng-template",1)),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.contexts))},dependencies:[vr,Xr],encapsulation:2,changeDetection:0}),n})(),fF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[J8]}),n})();class pF{constructor(e,t,r){this.hour=ca(e),this.minute=ca(t),this.second=ca(r)}changeHour(e=1){this.updateHour((isNaN(this.hour)?0:this.hour)+e)}updateHour(e){this.hour=Cs(e)?(e<0?24+e:e)%24:NaN}changeMinute(e=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+e)}updateMinute(e){Cs(e)?(this.minute=e%60<0?60+e%60:e%60,this.changeHour(Math.floor(e/60))):this.minute=NaN}changeSecond(e=1){this.updateSecond((isNaN(this.second)?0:this.second)+e)}updateSecond(e){Cs(e)?(this.second=e<0?60+e%60:e%60,this.changeMinute(Math.floor(e/60))):this.second=NaN}isValid(e=!0){return Cs(this.hour)&&Cs(this.minute)&&(!e||Cs(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let Q8=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function X8(){return new eG}()},providedIn:"root"}),n})(),eG=(()=>{class n extends gF{fromModel(t){return t&&Xi(t.hour)&&Xi(t.minute)?{hour:t.hour,minute:t.minute,second:Xi(t.second)?t.second:null}:null}toModel(t){return t&&Xi(t.hour)&&Xi(t.minute)?{hour:t.hour,minute:t.minute,second:Xi(t.second)?t.second:null}:null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),mF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function tG(n){return new nG(n)}(d.LFG(d.soG)),r},providedIn:"root"}),n})(),nG=(()=>{class n extends mF{constructor(t){super(),this._periods=Mt(t,He.Standalone,ot.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const rG=/[^0-9]/g;let iG=(()=>{class n{constructor(t,r,s,a){this._config=t,this._ngbTimeAdapter=r,this._cd=s,this.i18n=a,this.onChange=h=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=Xi(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=Xi(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=Xi(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const r=this._ngbTimeAdapter.fromModel(t);this.model=r?new pF(r.hour,r.minute,r.second):new pF,!this.seconds&&(!r||!Cs(r.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const r=!!this.model&&this.model.hour>=12,s=ca(t);this.model?.updateHour(this.meridian&&(r&&s<12||!r&&12===s)?s+12:s),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(ca(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(ca(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(rG,"")}formatHour(t){return Cs(t)?DE(this.meridian?t%12==0?12:t%12:t%24):DE(NaN)}formatMinSec(t){return DE(Cs(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!Cs(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Q8),d.Y36(gF),d.Y36(d.sBO),d.Y36(mF))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[d._Bn([{provide:Dt,useExisting:(0,d.Gpc)(()=>n),multi:!0}]),d.TTD,d.jDz],decls:16,vars:25,consts:function(){let e,t,r,s,a,h,_,E,D,x,L,W,se,_e;return e=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,r=$localize`:@@ngb.timepicker.MM:MM`,s=$localize`:@@ngb.timepicker.minutes:Minutes`,a=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,h=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,_=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,E=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,D=$localize`:@@ngb.timepicker.SS:SS`,x=$localize`:@@ngb.timepicker.seconds:Seconds`,L=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,W=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,se=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,_e=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",e,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",r,"aria-label",s,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],a,[1,"chevron","ngb-tp-chevron","bottom"],h,_,E,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",D,"aria-label",x,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],L,W,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],se,_e]},template:function(t,r){1&t&&(d.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),d.YNc(3,uH,4,7,"button",3),d.TgZ(4,"input",4),d.NdJ("change",function(a){return r.updateHour(a.target.value)})("blur",function(){return r.handleBlur()})("input",function(a){return r.formatInput(a.target)})("keydown.ArrowUp",function(a){return r.changeHour(r.hourStep),a.preventDefault()})("keydown.ArrowDown",function(a){return r.changeHour(-r.hourStep),a.preventDefault()}),d.qZA(),d.YNc(5,cH,4,7,"button",3),d.qZA(),d.TgZ(6,"div",5),d._uU(7,":"),d.qZA(),d.TgZ(8,"div",6),d.YNc(9,lH,4,7,"button",3),d.TgZ(10,"input",7),d.NdJ("change",function(a){return r.updateMinute(a.target.value)})("blur",function(){return r.handleBlur()})("input",function(a){return r.formatInput(a.target)})("keydown.ArrowUp",function(a){return r.changeMinute(r.minuteStep),a.preventDefault()})("keydown.ArrowDown",function(a){return r.changeMinute(-r.minuteStep),a.preventDefault()}),d.qZA(),d.YNc(11,dH,4,7,"button",3),d.qZA(),d.YNc(12,hH,2,0,"div",8),d.YNc(13,gH,4,9,"div",9),d.YNc(14,mH,1,0,"div",8),d.YNc(15,yH,5,9,"div",10),d.qZA()()),2&t&&(d.ekj("disabled",r.disabled),d.Q6J("disabled",r.disabled),d.xp6(3),d.Q6J("ngIf",r.spinners),d.xp6(1),d.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),d.Q6J("value",r.formatHour(null==r.model?null:r.model.hour))("readOnly",r.readonlyInputs)("disabled",r.disabled),d.xp6(1),d.Q6J("ngIf",r.spinners),d.xp6(4),d.Q6J("ngIf",r.spinners),d.xp6(1),d.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),d.Q6J("value",r.formatMinSec(null==r.model?null:r.model.minute))("readOnly",r.readonlyInputs)("disabled",r.disabled),d.xp6(1),d.Q6J("ngIf",r.spinners),d.xp6(1),d.Q6J("ngIf",r.seconds),d.xp6(1),d.Q6J("ngIf",r.seconds),d.xp6(1),d.Q6J("ngIf",r.meridian),d.xp6(1),d.Q6J("ngIf",r.meridian))},dependencies:[kr],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),_F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[iG]}),n})();const sG=(n,e)=>{const{classList:t}=n;if(e)return t.add("fade"),kS(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},oG=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let aG=(()=>{class n{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(QD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),cG=(()=>{class n{constructor(t,r,s,a){this.ariaLive=t,this._zone=s,this._element=a,this.contentHeaderTpl=null,this.shown=new d.vpe,this.hidden=new d.vpe,null==this.ariaLive&&(this.ariaLive=r.ariaLive),this.delay=r.delay,this.autohide=r.autohide,this.animation=r.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(no(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=Qd(this._zone,this._element.nativeElement,oG,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=Qd(this._zone,this._element.nativeElement,sG,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(t){return new(t||n)(d.$8M("aria-live"),d.Y36(aG),d.Y36(d.R0b),d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-toast"]],contentQueries:function(t,r,s){if(1&t&&d.Suo(s,uG,7,d.Rgc),2&t){let a;d.iGM(a=d.CRH())&&(r.contentHeaderTpl=a.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,r){2&t&&(d.uIk("aria-live",r.ariaLive),d.ekj("fade",r.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[d.TTD,d.jDz],ngContentSelectors:qN,decls:5,vars:1,consts:function(){let e;return e=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(t,r){1&t&&(d.F$t(),d.YNc(0,bH,2,1,"ng-template",null,0,d.W1O),d.YNc(2,CH,3,1,"ng-template",1),d.TgZ(3,"div",2),d.Hsn(4),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngIf",r.contentHeaderTpl||r.header))},dependencies:[kr,Xr],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),vF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cG]}),n})(),yF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),lG=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const r=p2(this.result),s=Array.isArray(this.term)?this.term:[this.term],a=D=>this.accentSensitive?D:_2(D),h=s.map(D=>function AH(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(a(p2(D)))).filter(D=>D),_=this.accentSensitive?r:_2(r),E=h.length?_.split(new RegExp(`(${h.join("|")})`,"gmi")):[r];if(this.accentSensitive)this.parts=E;else{let D=0;this.parts=E.map(x=>r.substring(D,D+=x.length))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[d.TTD,d.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,r){1&t&&d.YNc(0,TH,3,2,"ng-template",0),2&t&&d.Q6J("ngForOf",r.parts)},dependencies:[kr,vr],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function dG(){return 100}});let bF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[lG]}),n})(),EF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const hG=[w2,D2,S2,JN,q2,K2,Z2,eF,EF,cF,dF,hF,fF,_F,vF,yF,bF];let fG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[hG,w2,D2,S2,JN,q2,K2,Z2,eF,EF,cF,dF,hF,fF,_F,vF,yF,bF]}),n})();const pG=["localVideoStream"],gG=["remoteVideoStream"],mG=["fullScreen"];function _G(n,e){if(1&n&&(d.TgZ(0,"div",47),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.errorMessage," ")}}function vG(n,e){if(1&n&&(d.TgZ(0,"div",48),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.infoMessage," ")}}function yG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",49),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.answerCall())}),d._UZ(1,"i",50),d._uU(2," Answer "),d.qZA()}}function bG(n,e){if(1&n&&(d.TgZ(0,"h6",51),d._UZ(1,"i",52),d._uU(2," Call Connected to "),d.TgZ(3,"span",53),d._uU(4),d.qZA()()),2&n){const t=d.oxw();d.xp6(4),d.hij(" ",t.callerNumber.length?t.callerNumber:t.connectedCallNumber," ")}}function EG(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"input",54),d.NdJ("ngModelChange",function(s){d.CHM(t);const a=d.oxw();return d.KtG(a.chatMessage=s)})("keydown.enter",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.sendMessage(s.chatMessage,s.authService.userData))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("ngModel",t.chatMessage)}}function CG(n,e){if(1&n&&(d.TgZ(0,"div",57)(1,"div",58)(2,"span",59),d._UZ(3,"i",60),d._uU(4),d.qZA(),d.TgZ(5,"span"),d._uU(6),d.qZA()()()),2&n){const t=e.$implicit,r=e.index,s=d.oxw(2);d.Tol(t.class),d.ekj("mb-2",r!==s.chatMessages.length-1),d.xp6(4),d.AsE("",t.user," (",t.number,") "),d.xp6(2),d.hij(" ",t.text," ")}}function wG(n,e){if(1&n&&(d.TgZ(0,"div",55),d.YNc(1,CG,7,7,"div",56),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.chatMessages)}}class nT{constructor(e,t,r){this.authService=e,this.afAuth=t,this.router=r,this.showSidebar=!0,this.isCollapsed=!0,this.chatMessage="",this.chatMessages=[],this.callerNumber="",this.callConnected=!1,this.errorMessage="",this.infoMessage="",this.hasFullscreenSupport=!1,this.incomingCall=!1}ngOnInit(){this.hasFullscreenSupport=GD.fullscreenEnabled,this.hasFullscreenSupport&&GD.addEventListener("fullscreenchange",()=>{this.isFullscreen=!!GD.fullscreenElement}),this.generateNumber(),this.checkincomingCall(),this.loadSounds()}loadSounds(){this.callingAudio=new Audio,this.callingAudio.src="./assets/audio/calling.mp3",this.callingAudio.load(),this.callingAudio.addEventListener("ended",()=>{this.callingAudio.currentTime=0,this.callingAudio.play()},!1),this.messageAudio=new Audio,this.messageAudio.src="./assets/audio/message.mp3",this.messageAudio.load()}checkincomingCall(){this.peer.on("connection",e=>{this.receivingDataConnection=e,e.on("data",t=>{t.class="received-message",this.chatMessages.unshift(t),this.messageAudio.play()}),e.on("close",()=>{this.hangUpAfterEvent("Call Disconnected by User",!1)}),e.on("error",()=>{this.hangUpAfterEvent("Incoming Connection Error",!0)})}),this.peer.on("disconnected",()=>{this.hangUpAfterEvent("Peer Disconnected",!1)}),this.peer.on("error",()=>{this.hangUpAfterEvent("Number is Incorrect",!0)}),this.peer.on("call",e=>{this.receivingMediaConnection=e,this.incomingCall=!0,this.callingAudio.play()})}generateNumber(){this.myNumber=Math.floor(9e4*Math.random())+1e4;const e=this.myNumber.toString();this.peer=new RN(e,{secure:!0,config:{iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10}})}callButton(e){var t=this;return(0,qe.Z)(function*(){const r=e.toString();t.errorMessage="",t.infoMessage="",t.activeDataConnection=t.peer.connect(r),t.activeDataConnection.on("data",s=>{s.class="received-message",t.chatMessages.unshift(s),t.messageAudio.play()}),t.activeDataConnection.on("open",()=>{t.connectedCallNumber=e,t.callConnected=!0}),t.activeDataConnection.on("close",()=>{t.hangUpAfterEvent("User Call Ended",!1)}),t.activeDataConnection.on("error",()=>{t.hangUpAfterEvent("Peer Connection Error",!0)});try{const s=yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0});s&&(t.myCallStream=s,t.localVideoStream.nativeElement.srcObject=s,t.activeMediaConnection=t.peer.call(r,s),t.activeMediaConnection.on("stream",a=>{t.remoteVideoStream.nativeElement.srcObject=a}),t.activeMediaConnection.on("close",()=>{t.hangUpAfterEvent("Active Call Closed",!1)}),t.activeMediaConnection.on("error",()=>{t.hangUpAfterEvent("Active Call Error",!0)}))}catch{t.hangUpAfterEvent("Failed to get local stream",!0)}})()}answerCall(){var e=this;return(0,qe.Z)(function*(){try{const t=yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0});t&&(e.myCallStream=t,e.callerNumber=e.receivingMediaConnection.peer,e.localVideoStream.nativeElement.srcObject=t,e.receivingMediaConnection.answer(t),e.receivingMediaConnection.on("stream",r=>{e.callingAudio.pause(),e.incomingCall=!1,e.callConnected=!0,e.remoteVideoStream.nativeElement.srcObject=r}),e.receivingMediaConnection.on("close",()=>{e.hangUpAfterEvent("Receiving Call Closed",!1)}),e.receivingMediaConnection.on("error",()=>{e.incomingCall=!1,e.hangUpAfterEvent("Receiving Call Error",!0)}))}catch{e.hangUpAfterEvent("Failed to get Remote Stream",!0)}})()}hangUp(){this.activeDataConnection&&this.activeDataConnection.close(),this.activeMediaConnection&&this.activeMediaConnection.close(),this.receivingDataConnection&&this.receivingDataConnection.close(),this.receivingMediaConnection&&this.receivingMediaConnection.close(),this.myCallStream?.getTracks()?.length&&this.myCallStream.getTracks().forEach(e=>{e?.stop()}),this.localVideoStream.nativeElement.srcObject=null,this.remoteVideoStream.nativeElement.srcObject=null,this.incomingCall=!1,this.callConnected=!1}sendMessage(e,t){if(e?.length&&t?.displayName?.length){const r={text:e,user:t.displayName,number:this.myNumber,class:"sent-message"};this.chatMessages.unshift(r),this.messageAudio.play(),this.chatMessage="",this.callConnected&&this.activeDataConnection&&this.activeDataConnection.send(r),this.callConnected&&this.receivingDataConnection&&this.receivingDataConnection.send(r)}}hangUpAfterEvent(e,t){setTimeout(()=>{this.hangUp()},500),t?(this.errorMessage=e,this.errorTimeout&&clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout(()=>{this.errorMessage=""},5e3)):(this.infoMessage=e,this.infoTimeout&&clearTimeout(this.errorTimeout),this.infoTimeout=setTimeout(()=>{this.infoMessage=""},5e3))}signOut(){this.hangUp(),setTimeout(()=>{this.authService.SignOut()},1e3)}openFullscreen(){if(this.hasFullscreenSupport){const e=this.fullScreen.nativeElement;this.isFullscreen?GD.exitFullscreen(e):GD.requestFullscreen(e)}else this.errorMessage="Full Screen Not Supported. Please Try Disabling Adblocker or Other Extensions",this.errorTimeout&&clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout(()=>{this.errorMessage=""},5e3)}}nT.\u0275fac=function(e){return new(e||nT)(d.Y36(el),d.Y36(OD),d.Y36(_s))},nT.\u0275cmp=d.Xpm({type:nT,selectors:[["app-dashboard"]],viewQuery:function(e,t){if(1&e&&(d.Gf(pG,7),d.Gf(gG,7),d.Gf(mG,7)),2&e){let r;d.iGM(r=d.CRH())&&(t.localVideoStream=r.first),d.iGM(r=d.CRH())&&(t.remoteVideoStream=r.first),d.iGM(r=d.CRH())&&(t.fullScreen=r.first)}},decls:58,vars:13,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex","align-items-center"],[1,"nav-link","text-bg-dark","me-3",3,"click"],[1,"fa","fa-sign-out","me-2"],[1,"img","img-fluid","rounded-circle","me-2",2,"width","2rem",3,"src"],[1,"text-bg-dark"],[1,"container-xl"],[1,"title-number","justify-content-center","align-items-center","col-12","py-3","px-0"],[1,"alert","alert-success","text-align-center","m-0"],[1,"mb-0"],[1,"number"],["class","alert alert-danger m-0 mt-3",4,"ngIf"],["class","alert alert-info m-0 mt-3",4,"ngIf"],[1,"main-body","row","d-flex","flex-wrap"],[1,"main","col","col-xl-8","pl-xl-0","pr-xl-3","col-lg-8","pl-lg-0","pr-lg-3","col-12","pb-3","border-end"],[1,"alert","alert-primary","d-flex","align-items-center"],[1,"fa-solid","fa-video","me-2"],[1,"dialer","d-flex"],[1,"input-group","me-2"],[1,"input-group-text"],[1,"fa-solid","fa-mobile-screen"],["type","number","placeholder","Call Number","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","me-2",3,"disabled","click"],[1,"fa-solid","fa-phone","me-1"],["type","button",1,"btn","btn-danger","me-2",3,"disabled","click"],[1,"fa-solid","fa-phone-slash","me-1"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"videos","mt-3",3,"hidden"],["fullScreen",""],[1,"local-video"],["autoplay","","playsinline","",1,"rounded"],["remoteVideoStream",""],[1,"remote-video"],["localVideoStream",""],[1,"actions"],[1,"btn","btn-primary","rounded-circle","me-3",3,"click"],[1,"fa-solid","fa-expand"],[1,"btn","btn-danger","rounded-circle",3,"click"],[1,"fa-solid","fa-phone-slash"],[1,"chat","col","col-xl-4","pl-xl-3","pr-xl-0","col-lg-4","pl-lg-3","pr-lg-0","col-12","pb-3"],[1,"fa-solid","fa-comment-alt","me-2"],["class","alert alert-success",4,"ngIf"],[1,"form-group","mb-2"],["type","text","class","form-control","placeholder","Write Message","required","",3,"ngModel","ngModelChange","keydown.enter",4,"ngIf"],["class","messages form-control",4,"ngIf"],[1,"alert","alert-danger","m-0","mt-3"],[1,"alert","alert-info","m-0","mt-3"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa-solid","fa-phone-volume","me-1"],[1,"alert","alert-success"],[1,"fa-solid","fa-user-alt","me-2"],[1,"text-danger"],["type","text","placeholder","Write Message","required","",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],[1,"messages","form-control"],["class","message",3,"mb-2","class",4,"ngFor","ngForOf"],[1,"message"],[1,"message-body"],[1,"user"],[1,"fa","fa-user","me-2"]],template:function(e,t){1&e&&(d.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),d._uU(3,"VideoWebRTC"),d.qZA(),d.TgZ(4,"form",3)(5,"a",4),d.NdJ("click",function(){return t.signOut()}),d._UZ(6,"i",5),d._uU(7," Sign Out "),d.qZA(),d._UZ(8,"img",6),d.TgZ(9,"span",7),d._uU(10),d.qZA()()()(),d.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"h4",11)(15,"span",12),d._uU(16),d.qZA(),d._uU(17," is your phone number"),d.qZA()(),d.YNc(18,_G,2,1,"div",13),d.YNc(19,vG,2,1,"div",14),d.qZA(),d.TgZ(20,"div",15)(21,"div",16)(22,"h5",17),d._UZ(23,"i",18),d._uU(24," Video "),d.qZA(),d.TgZ(25,"div",19)(26,"div",20)(27,"div",21),d._UZ(28,"i",22),d.qZA(),d.TgZ(29,"input",23),d.NdJ("ngModelChange",function(s){return t.callNumber=s}),d.qZA()(),d.TgZ(30,"button",24),d.NdJ("click",function(){return t.callButton(t.callNumber)}),d._UZ(31,"i",25),d._uU(32," Call "),d.qZA(),d.TgZ(33,"button",26),d.NdJ("click",function(){return t.hangUp()}),d._UZ(34,"i",27),d._uU(35," Hangup "),d.qZA(),d.YNc(36,yG,3,0,"button",28),d.qZA(),d.TgZ(37,"div",29,30)(39,"div",31),d._UZ(40,"video",32,33),d.qZA(),d.TgZ(42,"div",34),d._UZ(43,"video",32,35),d.qZA(),d.TgZ(45,"div",36)(46,"div",37),d.NdJ("click",function(){return t.openFullscreen()}),d._UZ(47,"i",38),d.qZA(),d.TgZ(48,"div",39),d.NdJ("click",function(){return t.hangUp()}),d._UZ(49,"i",40),d.qZA()()()(),d.TgZ(50,"div",41)(51,"h5",17),d._UZ(52,"i",42),d._uU(53," Chat "),d.qZA(),d.YNc(54,bG,5,1,"h6",43),d.TgZ(55,"div",44),d.YNc(56,EG,1,1,"input",45),d.qZA(),d.YNc(57,wG,2,1,"div",46),d.qZA()()()),2&e&&(d.xp6(8),d.Q6J("src",t.authService.userData.photoURL,d.LSH),d.xp6(2),d.Oqu(t.authService.userData.displayName),d.xp6(6),d.Oqu(t.myNumber),d.xp6(2),d.Q6J("ngIf",null==t.errorMessage?null:t.errorMessage.length),d.xp6(1),d.Q6J("ngIf",null==t.infoMessage?null:t.infoMessage.length),d.xp6(10),d.Q6J("ngModel",t.callNumber),d.xp6(1),d.Q6J("disabled",!t.callNumber||t.callConnected||t.callNumber===t.myNumber),d.xp6(3),d.Q6J("disabled",!t.callConnected),d.xp6(3),d.Q6J("ngIf",t.incomingCall),d.xp6(1),d.Q6J("hidden",!t.callConnected),d.xp6(17),d.Q6J("ngIf",t.callConnected),d.xp6(2),d.Q6J("ngIf",t.callConnected),d.xp6(1),d.Q6J("ngIf",t.chatMessages.length))},dependencies:[vr,kr,wl,As,wg,pi,lu,uc,hu,jc,oM],styles:[".nav-link[_ngcontent-%COMP%]{cursor:pointer}.user-logo[_ngcontent-%COMP%]{display:flex;color:var(--white);align-items:center}.user-logo[_ngcontent-%COMP%]   img.img[_ngcontent-%COMP%]{width:40px;height:40px}.title-number[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--danger);text-decoration:underline}.messages[_ngcontent-%COMP%]{overflow-y:auto;padding:.5rem}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;width:100%}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:3px 10px;border-radius:6px;background:#d4e9ff;border:1px solid #027bfe}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-weight:500;color:var(--blue)}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]{justify-content:flex-end;text-align:right}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background:#ffe6e8;border:1px solid #ed858c}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:var(--red)}.dialer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:50%}.videos[_ngcontent-%COMP%]{position:relative}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]{width:100%;height:100%;border:2px solid var(--bs-primary);border-radius:.55rem;display:flex}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;border:4px solid var(--green)}.videos[_ngcontent-%COMP%]   .remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;width:25%;max-height:25%;border:4px solid var(--yellow);right:20px;bottom:25px}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;bottom:25px;display:flex;align-items:center;justify-content:center;width:100%}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:38px;height:38px;display:flex;align-items:center;justify-content:center}@media (max-width: 1023px){.main[_ngcontent-%COMP%]{border-right:0!important}}"]});class rT{constructor(e){this.authService=e}ngOnInit(){this.resetPasswordForm={email:""}}}function DG(n,e){if(1&n&&(d.TgZ(0,"div",5)(1,"p",10),d._uU(2,"We have sent a confirmation email to "),d.TgZ(3,"strong"),d._uU(4),d.qZA(),d._uU(5,"."),d.qZA(),d.TgZ(6,"p",10),d._uU(7,"Please check your email and click on the link to verfiy your email address."),d.qZA()()),2&n){const t=e.ngIf;d.xp6(4),d.Oqu(t.email)}}rT.\u0275fac=function(e){return new(e||rT)(d.Y36(el))},rT.\u0275cmp=d.Xpm({type:rT,selectors:[["app-forgot-password"]],decls:23,vars:3,consts:[["name","userResetPasswordForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],["userResetPasswordForm","ngForm"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"text-center"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"validation-message"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"form",0,1)(2,"h4",2),d._UZ(3,"i",3),d._uU(4," VideoWebRTC "),d.qZA(),d.TgZ(5,"div",4)(6,"h5"),d._uU(7,"Reset Password"),d.qZA(),d.TgZ(8,"p",5),d._uU(9,"Please enter your email address to "),d._UZ(10,"br"),d._uU(11," request a password reset"),d.qZA(),d.TgZ(12,"div",6)(13,"input",7,8),d.NdJ("ngModelChange",function(a){return t.resetPasswordForm.email=a})("ngModelChange",function(){d.CHM(r);const a=d.MAs(14);return d.KtG(t.authService.getValidationMessage(a))}),d.qZA(),d.TgZ(15,"div",9),d._uU(16),d.qZA()(),d.TgZ(17,"div",6)(18,"button",10),d.NdJ("click",function(){return t.authService.ForgotPassword(t.resetPasswordForm.email)}),d._uU(19," Reset Password "),d.qZA()(),d.TgZ(20,"div",11)(21,"span",12),d._uU(22,"Go Back to ? Sign In"),d.qZA()()()()}if(2&e){const r=d.MAs(1),s=d.MAs(14);d.xp6(13),d.Q6J("ngModel",t.resetPasswordForm.email),d.xp6(3),d.Oqu(null==s||null==s.errors?null:s.errors.validationMessage),d.xp6(2),d.Q6J("disabled",r.invalid)}},dependencies:[zc,wl,As,pi,lu,uc,jf,hu,jc]});class iT{constructor(e){this.authService=e}ngOnInit(){}}iT.\u0275fac=function(e){return new(e||iT)(d.Y36(el))},iT.\u0275cmp=d.Xpm({type:iT,selectors:[["app-verify-email"]],decls:15,vars:2,consts:[["novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-redo-alt","me-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"],[1,"text-center"]],template:function(e,t){1&e&&(d.TgZ(0,"form",0)(1,"h4",1),d._UZ(2,"i",2),d._uU(3," VideoWebRTC "),d.qZA(),d.TgZ(4,"div",3)(5,"h5"),d._uU(6,"Thank You for Registering"),d.qZA(),d.YNc(7,DG,8,1,"div",4),d.TgZ(8,"div",5)(9,"button",6),d.NdJ("click",function(){return t.authService.SendVerificationMail(t.authService.userData)}),d._UZ(10,"i",7),d._uU(11," Resend Verification Email "),d.qZA()(),d.TgZ(12,"div",8)(13,"span",9),d._uU(14,"Go Back to ? Sign In"),d.qZA()()()()),2&e&&(d.xp6(7),d.Q6J("ngIf",t.authService.userData),d.xp6(2),d.Q6J("disabled",!t.authService.userData))},dependencies:[kr,zc,wl,lu,jc]});class AE{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!!this.authService.isLoggedIn||(this.router.navigate(["sign-in"],{state:{redirect:this.router.url}}),!1)}}AE.\u0275fac=function(e){return new(e||AE)(d.LFG(el),d.LFG(_s))},AE.\u0275prov=d.Yz7({token:AE,factory:AE.\u0275fac,providedIn:"root"});const TG=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:kD},{path:"register-user",component:PD},{path:"dashboard",component:nT,canActivate:[AE]},{path:"forgot-password",component:rT},{path:"verify-email-address",component:iT}];class xE{}xE.\u0275fac=function(e){return new(e||xE)},xE.\u0275mod=d.oAB({type:xE}),xE.\u0275inj=d.cJS({imports:[iv.forRoot(TG),iv]});class sT{}sT.\u0275fac=function(e){return new(e||sT)},sT.\u0275cmp=d.Xpm({type:sT,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&d._UZ(0,"router-outlet")},dependencies:[P_]});class NE{constructor(e){this.authService=e}intercept(e,t){return(0,Pn.D)(this.authService.getToken()).pipe(no(1),Ui(r=>(r&&(e=e.clone({setHeaders:{"X-Firebase-AppCheck":r?.token}})),t.handle(e))))}}NE.\u0275fac=function(e){return new(e||NE)(d.LFG(el))},NE.\u0275prov=d.Yz7({token:NE,factory:NE.\u0275fac});const RF=new d.OlP("HTTP_INTERCEPTORS");class kE{}kE.\u0275fac=function(e){return new(e||kE)},kE.\u0275mod=d.oAB({type:kE,bootstrap:[sT]}),kE.\u0275inj=d.cJS({providers:[el,{provide:RF,useClass:NE,multi:!0}],imports:[xa,xE,oa.hO.initializeApp(Np_firebase),FU,GU,_T,JN,fG]}),ug().bootstrapModule(kE).catch(n=>console.error(n))},8819:(pt,de,F)=>{var O=F(3417).MY,H=F(3417).cx;function ce(K){this.index=0,this.dataBuffer=K,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function fe(){this.bufferBuilder=new O}function d(K){var J=K.charCodeAt(0);return J<=2047?"00":J<=65535?"000":J<=2097151?"0000":J<=67108863?"00000":"000000"}pt.exports={unpack:function(K){return new ce(K).unpack()},pack:function(K){var J=new fe;return J.pack(K),J.getBuffer()}},ce.prototype.unpack=function(){var J,K=this.unpack_uint8();if(K<128)return K;if((224^K)<32)return(224^K)-32;if((J=160^K)<=15)return this.unpack_raw(J);if((J=176^K)<=15)return this.unpack_string(J);if((J=144^K)<=15)return this.unpack_array(J);if((J=128^K)<=15)return this.unpack_map(J);switch(K){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return J=this.unpack_uint16(),this.unpack_string(J);case 217:return J=this.unpack_uint32(),this.unpack_string(J);case 218:return J=this.unpack_uint16(),this.unpack_raw(J);case 219:return J=this.unpack_uint32(),this.unpack_raw(J);case 220:return J=this.unpack_uint16(),this.unpack_array(J);case 221:return J=this.unpack_uint32(),this.unpack_array(J);case 222:return J=this.unpack_uint16(),this.unpack_map(J);case 223:return J=this.unpack_uint32(),this.unpack_map(J)}},ce.prototype.unpack_uint8=function(){var K=255&this.dataView[this.index];return this.index++,K},ce.prototype.unpack_uint16=function(){var K=this.read(2),J=256*(255&K[0])+(255&K[1]);return this.index+=2,J},ce.prototype.unpack_uint32=function(){var K=this.read(4),J=256*(256*(256*K[0]+K[1])+K[2])+K[3];return this.index+=4,J},ce.prototype.unpack_uint64=function(){var K=this.read(8),J=256*(256*(256*(256*(256*(256*(256*K[0]+K[1])+K[2])+K[3])+K[4])+K[5])+K[6])+K[7];return this.index+=8,J},ce.prototype.unpack_int8=function(){var K=this.unpack_uint8();return K<128?K:K-256},ce.prototype.unpack_int16=function(){var K=this.unpack_uint16();return K<32768?K:K-65536},ce.prototype.unpack_int32=function(){var K=this.unpack_uint32();return K<Math.pow(2,31)?K:K-Math.pow(2,32)},ce.prototype.unpack_int64=function(){var K=this.unpack_uint64();return K<Math.pow(2,63)?K:K-Math.pow(2,64)},ce.prototype.unpack_raw=function(K){if(this.length<this.index+K)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+K+" "+this.length);var J=this.dataBuffer.slice(this.index,this.index+K);return this.index+=K,J},ce.prototype.unpack_string=function(K){for(var pe,Qe,J=this.read(K),Y=0,ee="";Y<K;)(pe=J[Y])<128?(ee+=String.fromCharCode(pe),Y++):(192^pe)<32?(Qe=(192^pe)<<6|63&J[Y+1],ee+=String.fromCharCode(Qe),Y+=2):(Qe=(15&pe)<<12|(63&J[Y+1])<<6|63&J[Y+2],ee+=String.fromCharCode(Qe),Y+=3);return this.index+=K,ee},ce.prototype.unpack_array=function(K){for(var J=new Array(K),Y=0;Y<K;Y++)J[Y]=this.unpack();return J},ce.prototype.unpack_map=function(K){for(var J={},Y=0;Y<K;Y++){var ee=this.unpack(),pe=this.unpack();J[ee]=pe}return J},ce.prototype.unpack_float=function(){var K=this.unpack_uint32();return(0==K>>31?1:-1)*(8388607&K|8388608)*Math.pow(2,(K>>23&255)-127-23)},ce.prototype.unpack_double=function(){var K=this.unpack_uint32(),J=this.unpack_uint32(),ee=(K>>20&2047)-1023;return(0==K>>31?1:-1)*((1048575&K|1048576)*Math.pow(2,ee-20)+J*Math.pow(2,ee-52))},ce.prototype.read=function(K){var J=this.index;if(J+K<=this.length)return this.dataView.subarray(J,J+K);throw new Error("BinaryPackFailure: read index out of range")},fe.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},fe.prototype.pack=function(K){var J=typeof K;if("string"===J)this.pack_string(K);else if("number"===J)Math.floor(K)===K?this.pack_integer(K):this.pack_double(K);else if("boolean"===J)!0===K?this.bufferBuilder.append(195):!1===K&&this.bufferBuilder.append(194);else if("undefined"===J)this.bufferBuilder.append(192);else{if("object"!==J)throw new Error('Type "'+J+'" not yet supported');if(null===K)this.bufferBuilder.append(192);else{var Y=K.constructor;if(Y==Array)this.pack_array(K);else if(Y==Blob||Y==File||K instanceof Blob||K instanceof File)this.pack_bin(K);else if(Y==ArrayBuffer)this.pack_bin(H.useArrayBufferView?new Uint8Array(K):K);else if("BYTES_PER_ELEMENT"in K)this.pack_bin(H.useArrayBufferView?new Uint8Array(K.buffer):K.buffer);else if(Y==Object||Y.toString().startsWith("class"))this.pack_object(K);else if(Y==Date)this.pack_string(K.toString());else{if("function"!=typeof K.toBinaryPack)throw new Error('Type "'+Y.toString()+'" not yet supported');this.bufferBuilder.append(K.toBinaryPack())}}}this.bufferBuilder.flush()},fe.prototype.pack_bin=function(K){var J=K.length||K.byteLength||K.size;if(J<=15)this.pack_uint8(160+J);else if(J<=65535)this.bufferBuilder.append(218),this.pack_uint16(J);else{if(!(J<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(J)}this.bufferBuilder.append(K)},fe.prototype.pack_string=function(K){var J=function je(K){return K.length>600?new Blob([K]).size:K.replace(/[^\u0000-\u007F]/g,d).length}(K);if(J<=15)this.pack_uint8(176+J);else if(J<=65535)this.bufferBuilder.append(216),this.pack_uint16(J);else{if(!(J<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(J)}this.bufferBuilder.append(K)},fe.prototype.pack_array=function(K){var J=K.length;if(J<=15)this.pack_uint8(144+J);else if(J<=65535)this.bufferBuilder.append(220),this.pack_uint16(J);else{if(!(J<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(J)}for(var Y=0;Y<J;Y++)this.pack(K[Y])},fe.prototype.pack_integer=function(K){if(K>=-32&&K<=127)this.bufferBuilder.append(255&K);else if(K>=0&&K<=255)this.bufferBuilder.append(204),this.pack_uint8(K);else if(K>=-128&&K<=127)this.bufferBuilder.append(208),this.pack_int8(K);else if(K>=0&&K<=65535)this.bufferBuilder.append(205),this.pack_uint16(K);else if(K>=-32768&&K<=32767)this.bufferBuilder.append(209),this.pack_int16(K);else if(K>=0&&K<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(K);else if(K>=-2147483648&&K<=2147483647)this.bufferBuilder.append(210),this.pack_int32(K);else if(K>=-0x8000000000000000&&K<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(K);else{if(!(K>=0&&K<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(K)}},fe.prototype.pack_double=function(K){var J=0;K<0&&(J=1,K=-K);var Y=Math.floor(Math.log(K)/Math.LN2),ee=K/Math.pow(2,Y)-1,pe=Math.floor(ee*Math.pow(2,52)),Qe=Math.pow(2,32),Ce=J<<31|Y+1023<<20|pe/Qe&1048575,Ye=pe%Qe;this.bufferBuilder.append(203),this.pack_int32(Ce),this.pack_int32(Ye)},fe.prototype.pack_object=function(K){var Y=Object.keys(K).length;if(Y<=15)this.pack_uint8(128+Y);else if(Y<=65535)this.bufferBuilder.append(222),this.pack_uint16(Y);else{if(!(Y<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(Y)}for(var ee in K)K.hasOwnProperty(ee)&&(this.pack(ee),this.pack(K[ee]))},fe.prototype.pack_uint8=function(K){this.bufferBuilder.append(K)},fe.prototype.pack_uint16=function(K){this.bufferBuilder.append(K>>8),this.bufferBuilder.append(255&K)},fe.prototype.pack_uint32=function(K){var J=4294967295&K;this.bufferBuilder.append((4278190080&J)>>>24),this.bufferBuilder.append((16711680&J)>>>16),this.bufferBuilder.append((65280&J)>>>8),this.bufferBuilder.append(255&J)},fe.prototype.pack_uint64=function(K){var J=K/Math.pow(2,32),Y=K%Math.pow(2,32);this.bufferBuilder.append((4278190080&J)>>>24),this.bufferBuilder.append((16711680&J)>>>16),this.bufferBuilder.append((65280&J)>>>8),this.bufferBuilder.append(255&J),this.bufferBuilder.append((4278190080&Y)>>>24),this.bufferBuilder.append((16711680&Y)>>>16),this.bufferBuilder.append((65280&Y)>>>8),this.bufferBuilder.append(255&Y)},fe.prototype.pack_int8=function(K){this.bufferBuilder.append(255&K)},fe.prototype.pack_int16=function(K){this.bufferBuilder.append((65280&K)>>8),this.bufferBuilder.append(255&K)},fe.prototype.pack_int32=function(K){this.bufferBuilder.append(K>>>24&255),this.bufferBuilder.append((16711680&K)>>>16),this.bufferBuilder.append((65280&K)>>>8),this.bufferBuilder.append(255&K)},fe.prototype.pack_int64=function(K){var J=Math.floor(K/Math.pow(2,32)),Y=K%Math.pow(2,32);this.bufferBuilder.append((4278190080&J)>>>24),this.bufferBuilder.append((16711680&J)>>>16),this.bufferBuilder.append((65280&J)>>>8),this.bufferBuilder.append(255&J),this.bufferBuilder.append((4278190080&Y)>>>24),this.bufferBuilder.append((16711680&Y)>>>16),this.bufferBuilder.append((65280&Y)>>>8),this.bufferBuilder.append(255&Y)}},3417:pt=>{var de={};de.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),de.useArrayBufferView=!de.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch{return!0}}(),pt.exports.cx=de;var F=pt.exports.xE;function O(){this._pieces=[],this._parts=[]}typeof window<"u"&&(F=pt.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),O.prototype.append=function(H){"number"==typeof H?this._pieces.push(H):(this.flush(),this._parts.push(H))},O.prototype.flush=function(){if(this._pieces.length>0){var H=new Uint8Array(this._pieces);de.useArrayBufferView||(H=H.buffer),this._parts.push(H),this._pieces=[]}},O.prototype.getBuffer=function(){if(this.flush(),de.useBlobBuilder){for(var H=new F,U=0,ce=this._parts.length;U<ce;U++)H.append(this._parts[U]);return H.getBlob()}return new Blob(this._parts)},pt.exports.MY=O},6334:(pt,de,F)=>{"use strict";var O=F(7463);function U(J,Y,ee,pe,Qe){var Ce=O.writeRtpDescription(J.kind,Y);if(Ce+=O.writeIceParameters(J.iceGatherer.getLocalParameters()),Ce+=O.writeDtlsParameters(J.dtlsTransport.getLocalParameters(),"offer"===ee?"actpass":Qe||"active"),Ce+="a=mid:"+J.mid+"\r\n",Ce+=J.rtpSender&&J.rtpReceiver?"a=sendrecv\r\n":J.rtpSender?"a=sendonly\r\n":J.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",J.rtpSender){var Ye=J.rtpSender._initialTrackId||J.rtpSender.track.id;J.rtpSender._initialTrackId=Ye;var st="msid:"+(pe?pe.id:"-")+" "+Ye+"\r\n";Ce+="a="+st,Ce+="a=ssrc:"+J.sendEncodingParameters[0].ssrc+" "+st,J.sendEncodingParameters[0].rtx&&(Ce+="a=ssrc:"+J.sendEncodingParameters[0].rtx.ssrc+" "+st,Ce+="a=ssrc-group:FID "+J.sendEncodingParameters[0].ssrc+" "+J.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return Ce+="a=ssrc:"+J.sendEncodingParameters[0].ssrc+" cname:"+O.localCName+"\r\n",J.rtpSender&&J.sendEncodingParameters[0].rtx&&(Ce+="a=ssrc:"+J.sendEncodingParameters[0].rtx.ssrc+" cname:"+O.localCName+"\r\n"),Ce}function fe(J,Y){var ee={codecs:[],headerExtensions:[],fecMechanisms:[]},pe=function(Ce,Ye){Ce=parseInt(Ce,10);for(var st=0;st<Ye.length;st++)if(Ye[st].payloadType===Ce||Ye[st].preferredPayloadType===Ce)return Ye[st]},Qe=function(Ce,Ye,st,Z){var X=pe(Ce.parameters.apt,st),he=pe(Ye.parameters.apt,Z);return X&&he&&X.name.toLowerCase()===he.name.toLowerCase()};return J.codecs.forEach(function(Ce){for(var Ye=0;Ye<Y.codecs.length;Ye++){var st=Y.codecs[Ye];if(Ce.name.toLowerCase()===st.name.toLowerCase()&&Ce.clockRate===st.clockRate){if("rtx"===Ce.name.toLowerCase()&&Ce.parameters&&st.parameters.apt&&!Qe(Ce,st,J.codecs,Y.codecs))continue;(st=JSON.parse(JSON.stringify(st))).numChannels=Math.min(Ce.numChannels,st.numChannels),ee.codecs.push(st),st.rtcpFeedback=st.rtcpFeedback.filter(function(Z){for(var X=0;X<Ce.rtcpFeedback.length;X++)if(Ce.rtcpFeedback[X].type===Z.type&&Ce.rtcpFeedback[X].parameter===Z.parameter)return!0;return!1});break}}}),J.headerExtensions.forEach(function(Ce){for(var Ye=0;Ye<Y.headerExtensions.length;Ye++){var st=Y.headerExtensions[Ye];if(Ce.uri===st.uri){ee.headerExtensions.push(st);break}}}),ee}function d(J,Y,ee){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[Y][J].indexOf(ee)}function je(J,Y){var ee=J.getRemoteCandidates().find(function(pe){return Y.foundation===pe.foundation&&Y.ip===pe.ip&&Y.port===pe.port&&Y.priority===pe.priority&&Y.protocol===pe.protocol&&Y.type===pe.type});return ee||J.addRemoteCandidate(Y),!ee}function K(J,Y){var ee=new Error(Y);return ee.name=J,ee.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[J],ee}pt.exports=function(J,Y){function ee(Z,X){X.addTrack(Z),X.dispatchEvent(new J.MediaStreamTrackEvent("addtrack",{track:Z}))}function Qe(Z,X,he,ie){var me=new Event("track");me.track=X,me.receiver=he,me.transceiver={receiver:he},me.streams=ie,J.setTimeout(function(){Z._dispatchEvent("track",me)})}var Ce=function(Z){var X=this,he=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(me){X[me]=he[me].bind(he)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",Z=JSON.parse(JSON.stringify(Z||{})),this.usingBundle="max-bundle"===Z.bundlePolicy,"negotiate"===Z.rtcpMuxPolicy)throw K("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(Z.rtcpMuxPolicy||(Z.rtcpMuxPolicy="require"),Z.iceTransportPolicy){case"all":case"relay":break;default:Z.iceTransportPolicy="all"}switch(Z.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:Z.bundlePolicy="balanced"}if(Z.iceServers=function ce(J,Y){var ee=!1;return(J=JSON.parse(JSON.stringify(J))).filter(function(pe){if(pe&&(pe.urls||pe.url)){var Qe=pe.urls||pe.url;pe.url&&!pe.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var Ce="string"==typeof Qe;return Ce&&(Qe=[Qe]),Qe=Qe.filter(function(Ye){return 0!==Ye.indexOf("turn:")||-1===Ye.indexOf("transport=udp")||-1!==Ye.indexOf("turn:[")||ee?0===Ye.indexOf("stun:")&&Y>=14393&&-1===Ye.indexOf("?transport=udp"):(ee=!0,!0)}),delete pe.url,pe.urls=Ce?Qe[0]:Qe,!!Qe.length}})}(Z.iceServers||[],Y),this._iceGatherers=[],Z.iceCandidatePoolSize)for(var ie=Z.iceCandidatePoolSize;ie>0;ie--)this._iceGatherers.push(new J.RTCIceGatherer({iceServers:Z.iceServers,gatherPolicy:Z.iceTransportPolicy}));else Z.iceCandidatePoolSize=0;this._config=Z,this.transceivers=[],this._sdpSessionId=O.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(Ce.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(Ce.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),Ce.prototype.onicecandidate=null,Ce.prototype.onaddstream=null,Ce.prototype.ontrack=null,Ce.prototype.onremovestream=null,Ce.prototype.onsignalingstatechange=null,Ce.prototype.oniceconnectionstatechange=null,Ce.prototype.onconnectionstatechange=null,Ce.prototype.onicegatheringstatechange=null,Ce.prototype.onnegotiationneeded=null,Ce.prototype.ondatachannel=null,Ce.prototype._dispatchEvent=function(Z,X){this._isClosed||(this.dispatchEvent(X),"function"==typeof this["on"+Z]&&this["on"+Z](X))},Ce.prototype._emitGatheringStateChange=function(){var Z=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",Z)},Ce.prototype.getConfiguration=function(){return this._config},Ce.prototype.getLocalStreams=function(){return this.localStreams},Ce.prototype.getRemoteStreams=function(){return this.remoteStreams},Ce.prototype._createTransceiver=function(Z,X){var ie={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:Z,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)ie.iceTransport=this.transceivers[0].iceTransport,ie.dtlsTransport=this.transceivers[0].dtlsTransport;else{var me=this._createIceAndDtlsTransports();ie.iceTransport=me.iceTransport,ie.dtlsTransport=me.dtlsTransport}return X||this.transceivers.push(ie),ie},Ce.prototype.addTrack=function(Z,X){if(this._isClosed)throw K("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(Be){return Be.track===Z}))throw K("InvalidAccessError","Track already exists.");for(var ie,me=0;me<this.transceivers.length;me++)!this.transceivers[me].track&&this.transceivers[me].kind===Z.kind&&(ie=this.transceivers[me]);return ie||(ie=this._createTransceiver(Z.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(X)&&this.localStreams.push(X),ie.track=Z,ie.stream=X,ie.rtpSender=new J.RTCRtpSender(Z,ie.dtlsTransport),ie.rtpSender},Ce.prototype.addStream=function(Z){var X=this;if(Y>=15025)Z.getTracks().forEach(function(ie){X.addTrack(ie,Z)});else{var he=Z.clone();Z.getTracks().forEach(function(ie,me){var Be=he.getTracks()[me];ie.addEventListener("enabled",function(Te){Be.enabled=Te.enabled})}),he.getTracks().forEach(function(ie){X.addTrack(ie,he)})}},Ce.prototype.removeTrack=function(Z){if(this._isClosed)throw K("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(Z instanceof J.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var X=this.transceivers.find(function(me){return me.rtpSender===Z});if(!X)throw K("InvalidAccessError","Sender was not created by this connection.");var he=X.stream;X.rtpSender.stop(),X.rtpSender=null,X.track=null,X.stream=null,-1===this.transceivers.map(function(me){return me.stream}).indexOf(he)&&this.localStreams.indexOf(he)>-1&&this.localStreams.splice(this.localStreams.indexOf(he),1),this._maybeFireNegotiationNeeded()},Ce.prototype.removeStream=function(Z){var X=this;Z.getTracks().forEach(function(he){var ie=X.getSenders().find(function(me){return me.track===he});ie&&X.removeTrack(ie)})},Ce.prototype.getSenders=function(){return this.transceivers.filter(function(Z){return!!Z.rtpSender}).map(function(Z){return Z.rtpSender})},Ce.prototype.getReceivers=function(){return this.transceivers.filter(function(Z){return!!Z.rtpReceiver}).map(function(Z){return Z.rtpReceiver})},Ce.prototype._createIceGatherer=function(Z,X){var he=this;if(X&&Z>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var ie=new J.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(ie,"state",{value:"new",writable:!0}),this.transceivers[Z].bufferedCandidateEvents=[],this.transceivers[Z].bufferCandidates=function(me){var Be=!me.candidate||0===Object.keys(me.candidate).length;ie.state=Be?"completed":"gathering",null!==he.transceivers[Z].bufferedCandidateEvents&&he.transceivers[Z].bufferedCandidateEvents.push(me)},ie.addEventListener("localcandidate",this.transceivers[Z].bufferCandidates),ie},Ce.prototype._gather=function(Z,X){var he=this,ie=this.transceivers[X].iceGatherer;if(!ie.onlocalcandidate){var me=this.transceivers[X].bufferedCandidateEvents;this.transceivers[X].bufferedCandidateEvents=null,ie.removeEventListener("localcandidate",this.transceivers[X].bufferCandidates),ie.onlocalcandidate=function(Be){if(!(he.usingBundle&&X>0)){var Te=new Event("icecandidate");Te.candidate={sdpMid:Z,sdpMLineIndex:X};var Ke=Be.candidate,ve=!Ke||0===Object.keys(Ke).length;if(ve)("new"===ie.state||"gathering"===ie.state)&&(ie.state="completed");else{"new"===ie.state&&(ie.state="gathering"),Ke.component=1,Ke.ufrag=ie.getLocalParameters().usernameFragment;var xe=O.writeCandidate(Ke);Te.candidate=Object.assign(Te.candidate,O.parseCandidate(xe)),Te.candidate.candidate=xe,Te.candidate.toJSON=function(){return{candidate:Te.candidate.candidate,sdpMid:Te.candidate.sdpMid,sdpMLineIndex:Te.candidate.sdpMLineIndex,usernameFragment:Te.candidate.usernameFragment}}}var Le=O.getMediaSections(he._localDescription.sdp);Le[Te.candidate.sdpMLineIndex]+=ve?"a=end-of-candidates\r\n":"a="+Te.candidate.candidate+"\r\n",he._localDescription.sdp=O.getDescription(he._localDescription.sdp)+Le.join("");var Ie=he.transceivers.every(function(Oe){return Oe.iceGatherer&&"completed"===Oe.iceGatherer.state});"gathering"!==he.iceGatheringState&&(he.iceGatheringState="gathering",he._emitGatheringStateChange()),ve||he._dispatchEvent("icecandidate",Te),Ie&&(he._dispatchEvent("icecandidate",new Event("icecandidate")),he.iceGatheringState="complete",he._emitGatheringStateChange())}},J.setTimeout(function(){me.forEach(function(Be){ie.onlocalcandidate(Be)})},0)}},Ce.prototype._createIceAndDtlsTransports=function(){var Z=this,X=new J.RTCIceTransport(null);X.onicestatechange=function(){Z._updateIceConnectionState(),Z._updateConnectionState()};var he=new J.RTCDtlsTransport(X);return he.ondtlsstatechange=function(){Z._updateConnectionState()},he.onerror=function(){Object.defineProperty(he,"state",{value:"failed",writable:!0}),Z._updateConnectionState()},{iceTransport:X,dtlsTransport:he}},Ce.prototype._disposeIceAndDtlsTransports=function(Z){var X=this.transceivers[Z].iceGatherer;X&&(delete X.onlocalcandidate,delete this.transceivers[Z].iceGatherer);var he=this.transceivers[Z].iceTransport;he&&(delete he.onicestatechange,delete this.transceivers[Z].iceTransport);var ie=this.transceivers[Z].dtlsTransport;ie&&(delete ie.ondtlsstatechange,delete ie.onerror,delete this.transceivers[Z].dtlsTransport)},Ce.prototype._transceive=function(Z,X,he){var ie=fe(Z.localCapabilities,Z.remoteCapabilities);X&&Z.rtpSender&&(ie.encodings=Z.sendEncodingParameters,ie.rtcp={cname:O.localCName,compound:Z.rtcpParameters.compound},Z.recvEncodingParameters.length&&(ie.rtcp.ssrc=Z.recvEncodingParameters[0].ssrc),Z.rtpSender.send(ie)),he&&Z.rtpReceiver&&ie.codecs.length>0&&("video"===Z.kind&&Z.recvEncodingParameters&&Y<15019&&Z.recvEncodingParameters.forEach(function(me){delete me.rtx}),ie.encodings=Z.recvEncodingParameters.length?Z.recvEncodingParameters:[{}],ie.rtcp={compound:Z.rtcpParameters.compound},Z.rtcpParameters.cname&&(ie.rtcp.cname=Z.rtcpParameters.cname),Z.sendEncodingParameters.length&&(ie.rtcp.ssrc=Z.sendEncodingParameters[0].ssrc),Z.rtpReceiver.receive(ie))},Ce.prototype.setLocalDescription=function(Z){var he,ie,X=this;if(-1===["offer","answer"].indexOf(Z.type))return Promise.reject(K("TypeError",'Unsupported type "'+Z.type+'"'));if(!d("setLocalDescription",Z.type,X.signalingState)||X._isClosed)return Promise.reject(K("InvalidStateError","Can not set local "+Z.type+" in state "+X.signalingState));if("offer"===Z.type)he=O.splitSections(Z.sdp),ie=he.shift(),he.forEach(function(Be,Te){var Ke=O.parseRtpParameters(Be);X.transceivers[Te].localCapabilities=Ke}),X.transceivers.forEach(function(Be,Te){X._gather(Be.mid,Te)});else if("answer"===Z.type){he=O.splitSections(X._remoteDescription.sdp),ie=he.shift();var me=O.matchPrefix(ie,"a=ice-lite").length>0;he.forEach(function(Be,Te){var Ke=X.transceivers[Te],ve=Ke.iceGatherer,xe=Ke.iceTransport,Le=Ke.dtlsTransport,Ie=Ke.localCapabilities,Oe=Ke.remoteCapabilities;if(!(O.isRejected(Be)&&0===O.matchPrefix(Be,"a=bundle-only").length||Ke.rejected)){var Ge=O.getIceParameters(Be,ie),We=O.getDtlsParameters(Be,ie);me&&(We.role="server"),(!X.usingBundle||0===Te)&&(X._gather(Ke.mid,Te),"new"===xe.state&&xe.start(ve,Ge,me?"controlling":"controlled"),"new"===Le.state&&Le.start(We));var He=fe(Ie,Oe);X._transceive(Ke,He.codecs.length>0,!1)}})}return X._localDescription={type:Z.type,sdp:Z.sdp},X._updateSignalingState("offer"===Z.type?"have-local-offer":"stable"),Promise.resolve()},Ce.prototype.setRemoteDescription=function(Z){var X=this;if(-1===["offer","answer"].indexOf(Z.type))return Promise.reject(K("TypeError",'Unsupported type "'+Z.type+'"'));if(!d("setRemoteDescription",Z.type,X.signalingState)||X._isClosed)return Promise.reject(K("InvalidStateError","Can not set remote "+Z.type+" in state "+X.signalingState));var he={};X.remoteStreams.forEach(function(xe){he[xe.id]=xe});var ie=[],me=O.splitSections(Z.sdp),Be=me.shift(),Te=O.matchPrefix(Be,"a=ice-lite").length>0,Ke=O.matchPrefix(Be,"a=group:BUNDLE ").length>0;X.usingBundle=Ke;var ve=O.matchPrefix(Be,"a=ice-options:")[0];return X.canTrickleIceCandidates=!!ve&&ve.substr(14).split(" ").indexOf("trickle")>=0,me.forEach(function(xe,Le){var Ie=O.splitLines(xe),Oe=O.getKind(xe),$e=O.isRejected(xe)&&0===O.matchPrefix(xe,"a=bundle-only").length,Ge=Ie[0].substr(2).split(" ")[2],We=O.getDirection(xe,Be),He=O.parseMsid(xe),ot=O.getMid(xe)||O.generateIdentifier();if($e||"application"===Oe&&("DTLS/SCTP"===Ge||"UDP/DTLS/SCTP"===Ge))X.transceivers[Le]={mid:ot,kind:Oe,protocol:Ge,rejected:!0};else{!$e&&X.transceivers[Le]&&X.transceivers[Le].rejected&&(X.transceivers[Le]=X._createTransceiver(Oe,!0));var lt,mt,Qt,sn,Mt,Rn,ur,_n,tn,Mr,nr,js=O.parseRtpParameters(xe);$e||(Mr=O.getIceParameters(xe,Be),(nr=O.getDtlsParameters(xe,Be)).role="client"),ur=O.parseRtpEncodingParameters(xe);var qn=O.parseRtcpParameters(xe),cr=O.matchPrefix(xe,"a=end-of-candidates",Be).length>0,Ei=O.matchPrefix(xe,"a=candidate:").map(function($n){return O.parseCandidate($n)}).filter(function($n){return 1===$n.component});if(("offer"===Z.type||"answer"===Z.type)&&!$e&&Ke&&Le>0&&X.transceivers[Le]&&(X._disposeIceAndDtlsTransports(Le),X.transceivers[Le].iceGatherer=X.transceivers[0].iceGatherer,X.transceivers[Le].iceTransport=X.transceivers[0].iceTransport,X.transceivers[Le].dtlsTransport=X.transceivers[0].dtlsTransport,X.transceivers[Le].rtpSender&&X.transceivers[Le].rtpSender.setTransport(X.transceivers[0].dtlsTransport),X.transceivers[Le].rtpReceiver&&X.transceivers[Le].rtpReceiver.setTransport(X.transceivers[0].dtlsTransport)),"offer"!==Z.type||$e)"answer"!==Z.type||$e||(mt=(lt=X.transceivers[Le]).iceGatherer,Qt=lt.iceTransport,sn=lt.dtlsTransport,Mt=lt.rtpReceiver,Rn=lt.sendEncodingParameters,_n=lt.localCapabilities,X.transceivers[Le].recvEncodingParameters=ur,X.transceivers[Le].remoteCapabilities=js,X.transceivers[Le].rtcpParameters=qn,Ei.length&&"new"===Qt.state&&(!Te&&!cr||Ke&&0!==Le?Ei.forEach(function($n){je(lt.iceTransport,$n)}):Qt.setRemoteCandidates(Ei)),(!Ke||0===Le)&&("new"===Qt.state&&Qt.start(mt,Mr,"controlling"),"new"===sn.state&&sn.start(nr)),!fe(lt.localCapabilities,lt.remoteCapabilities).codecs.filter(function($n){return"rtx"===$n.name.toLowerCase()}).length&&lt.sendEncodingParameters[0].rtx&&delete lt.sendEncodingParameters[0].rtx,X._transceive(lt,"sendrecv"===We||"recvonly"===We,"sendrecv"===We||"sendonly"===We),!Mt||"sendrecv"!==We&&"sendonly"!==We?delete lt.rtpReceiver:(tn=Mt.track,He?(he[He.stream]||(he[He.stream]=new J.MediaStream),ee(tn,he[He.stream]),ie.push([tn,Mt,he[He.stream]])):(he.default||(he.default=new J.MediaStream),ee(tn,he.default),ie.push([tn,Mt,he.default]))));else{(lt=X.transceivers[Le]||X._createTransceiver(Oe)).mid=ot,lt.iceGatherer||(lt.iceGatherer=X._createIceGatherer(Le,Ke)),Ei.length&&"new"===lt.iceTransport.state&&(!cr||Ke&&0!==Le?Ei.forEach(function($n){je(lt.iceTransport,$n)}):lt.iceTransport.setRemoteCandidates(Ei)),_n=J.RTCRtpReceiver.getCapabilities(Oe),Y<15019&&(_n.codecs=_n.codecs.filter(function($n){return"rtx"!==$n.name})),Rn=lt.sendEncodingParameters||[{ssrc:1001*(2*Le+2)}];var lr,ws=!1;"sendrecv"===We||"sendonly"===We?(ws=!lt.rtpReceiver,Mt=lt.rtpReceiver||new J.RTCRtpReceiver(lt.dtlsTransport,Oe),ws&&(tn=Mt.track,He&&"-"===He.stream||(He?(he[He.stream]||(he[He.stream]=new J.MediaStream,Object.defineProperty(he[He.stream],"id",{get:function(){return He.stream}})),Object.defineProperty(tn,"id",{get:function(){return He.track}}),lr=he[He.stream]):(he.default||(he.default=new J.MediaStream),lr=he.default)),lr&&(ee(tn,lr),lt.associatedRemoteMediaStreams.push(lr)),ie.push([tn,Mt,lr]))):lt.rtpReceiver&&lt.rtpReceiver.track&&(lt.associatedRemoteMediaStreams.forEach(function($n){var jr=$n.getTracks().find(function(At){return At.id===lt.rtpReceiver.track.id});jr&&function pe(Z,X){X.removeTrack(Z),X.dispatchEvent(new J.MediaStreamTrackEvent("removetrack",{track:Z}))}(jr,$n)}),lt.associatedRemoteMediaStreams=[]),lt.localCapabilities=_n,lt.remoteCapabilities=js,lt.rtpReceiver=Mt,lt.rtcpParameters=qn,lt.sendEncodingParameters=Rn,lt.recvEncodingParameters=ur,X._transceive(X.transceivers[Le],!1,ws)}}}),void 0===X._dtlsRole&&(X._dtlsRole="offer"===Z.type?"active":"passive"),X._remoteDescription={type:Z.type,sdp:Z.sdp},X._updateSignalingState("offer"===Z.type?"have-remote-offer":"stable"),Object.keys(he).forEach(function(xe){var Le=he[xe];if(Le.getTracks().length){if(-1===X.remoteStreams.indexOf(Le)){X.remoteStreams.push(Le);var Ie=new Event("addstream");Ie.stream=Le,J.setTimeout(function(){X._dispatchEvent("addstream",Ie)})}ie.forEach(function(Oe){Le.id===Oe[2].id&&Qe(X,Oe[0],Oe[1],[Le])})}}),ie.forEach(function(xe){xe[2]||Qe(X,xe[0],xe[1],[])}),J.setTimeout(function(){!X||!X.transceivers||X.transceivers.forEach(function(xe){xe.iceTransport&&"new"===xe.iceTransport.state&&xe.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),xe.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},Ce.prototype.close=function(){this.transceivers.forEach(function(Z){Z.iceTransport&&Z.iceTransport.stop(),Z.dtlsTransport&&Z.dtlsTransport.stop(),Z.rtpSender&&Z.rtpSender.stop(),Z.rtpReceiver&&Z.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},Ce.prototype._updateSignalingState=function(Z){this.signalingState=Z;var X=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",X)},Ce.prototype._maybeFireNegotiationNeeded=function(){var Z=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,J.setTimeout(function(){if(Z.needNegotiation){Z.needNegotiation=!1;var X=new Event("negotiationneeded");Z._dispatchEvent("negotiationneeded",X)}},0))},Ce.prototype._updateIceConnectionState=function(){var Z,X={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(ie){ie.iceTransport&&!ie.rejected&&X[ie.iceTransport.state]++}),Z="new",X.failed>0?Z="failed":X.checking>0?Z="checking":X.disconnected>0?Z="disconnected":X.new>0?Z="new":X.connected>0?Z="connected":X.completed>0&&(Z="completed"),Z!==this.iceConnectionState){this.iceConnectionState=Z;var he=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",he)}},Ce.prototype._updateConnectionState=function(){var Z,X={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(ie){ie.iceTransport&&ie.dtlsTransport&&!ie.rejected&&(X[ie.iceTransport.state]++,X[ie.dtlsTransport.state]++)}),X.connected+=X.completed,Z="new",X.failed>0?Z="failed":X.connecting>0?Z="connecting":X.disconnected>0?Z="disconnected":X.new>0?Z="new":X.connected>0&&(Z="connected"),Z!==this.connectionState){this.connectionState=Z;var he=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",he)}},Ce.prototype.createOffer=function(){var Z=this;if(Z._isClosed)return Promise.reject(K("InvalidStateError","Can not call createOffer after close"));var X=Z.transceivers.filter(function(Te){return"audio"===Te.kind}).length,he=Z.transceivers.filter(function(Te){return"video"===Te.kind}).length,ie=arguments[0];if(ie){if(ie.mandatory||ie.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==ie.offerToReceiveAudio&&(X=!0===ie.offerToReceiveAudio?1:!1===ie.offerToReceiveAudio?0:ie.offerToReceiveAudio),void 0!==ie.offerToReceiveVideo&&(he=!0===ie.offerToReceiveVideo?1:!1===ie.offerToReceiveVideo?0:ie.offerToReceiveVideo)}for(Z.transceivers.forEach(function(Te){"audio"===Te.kind?--X<0&&(Te.wantReceive=!1):"video"===Te.kind&&--he<0&&(Te.wantReceive=!1)});X>0||he>0;)X>0&&(Z._createTransceiver("audio"),X--),he>0&&(Z._createTransceiver("video"),he--);var me=O.writeSessionBoilerplate(Z._sdpSessionId,Z._sdpSessionVersion++);Z.transceivers.forEach(function(Te,Ke){var ve=Te.track,xe=Te.kind,Le=Te.mid||O.generateIdentifier();Te.mid=Le,Te.iceGatherer||(Te.iceGatherer=Z._createIceGatherer(Ke,Z.usingBundle));var Ie=J.RTCRtpSender.getCapabilities(xe);Y<15019&&(Ie.codecs=Ie.codecs.filter(function($e){return"rtx"!==$e.name})),Ie.codecs.forEach(function($e){"H264"===$e.name&&void 0===$e.parameters["level-asymmetry-allowed"]&&($e.parameters["level-asymmetry-allowed"]="1"),Te.remoteCapabilities&&Te.remoteCapabilities.codecs&&Te.remoteCapabilities.codecs.forEach(function(Ge){$e.name.toLowerCase()===Ge.name.toLowerCase()&&$e.clockRate===Ge.clockRate&&($e.preferredPayloadType=Ge.payloadType)})}),Ie.headerExtensions.forEach(function($e){(Te.remoteCapabilities&&Te.remoteCapabilities.headerExtensions||[]).forEach(function(We){$e.uri===We.uri&&($e.id=We.id)})});var Oe=Te.sendEncodingParameters||[{ssrc:1001*(2*Ke+1)}];ve&&Y>=15019&&"video"===xe&&!Oe[0].rtx&&(Oe[0].rtx={ssrc:Oe[0].ssrc+1}),Te.wantReceive&&(Te.rtpReceiver=new J.RTCRtpReceiver(Te.dtlsTransport,xe)),Te.localCapabilities=Ie,Te.sendEncodingParameters=Oe}),"max-compat"!==Z._config.bundlePolicy&&(me+="a=group:BUNDLE "+Z.transceivers.map(function(Te){return Te.mid}).join(" ")+"\r\n"),me+="a=ice-options:trickle\r\n",Z.transceivers.forEach(function(Te,Ke){me+=U(Te,Te.localCapabilities,"offer",Te.stream,Z._dtlsRole),me+="a=rtcp-rsize\r\n",Te.iceGatherer&&"new"!==Z.iceGatheringState&&(0===Ke||!Z.usingBundle)&&(Te.iceGatherer.getLocalCandidates().forEach(function(ve){ve.component=1,me+="a="+O.writeCandidate(ve)+"\r\n"}),"completed"===Te.iceGatherer.state&&(me+="a=end-of-candidates\r\n"))});var Be=new J.RTCSessionDescription({type:"offer",sdp:me});return Promise.resolve(Be)},Ce.prototype.createAnswer=function(){var Z=this;if(Z._isClosed)return Promise.reject(K("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==Z.signalingState&&"have-local-pranswer"!==Z.signalingState)return Promise.reject(K("InvalidStateError","Can not call createAnswer in signalingState "+Z.signalingState));var X=O.writeSessionBoilerplate(Z._sdpSessionId,Z._sdpSessionVersion++);Z.usingBundle&&(X+="a=group:BUNDLE "+Z.transceivers.map(function(me){return me.mid}).join(" ")+"\r\n"),X+="a=ice-options:trickle\r\n";var he=O.getMediaSections(Z._remoteDescription.sdp).length;Z.transceivers.forEach(function(me,Be){if(!(Be+1>he)){if(me.rejected)return"application"===me.kind?X+="DTLS/SCTP"===me.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+me.protocol+" webrtc-datachannel\r\n":"audio"===me.kind?X+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===me.kind&&(X+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(X+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+me.mid+"\r\n");var Te;me.stream&&("audio"===me.kind?Te=me.stream.getAudioTracks()[0]:"video"===me.kind&&(Te=me.stream.getVideoTracks()[0]),Te&&Y>=15019&&"video"===me.kind&&!me.sendEncodingParameters[0].rtx&&(me.sendEncodingParameters[0].rtx={ssrc:me.sendEncodingParameters[0].ssrc+1}));var Ke=fe(me.localCapabilities,me.remoteCapabilities);!Ke.codecs.filter(function(xe){return"rtx"===xe.name.toLowerCase()}).length&&me.sendEncodingParameters[0].rtx&&delete me.sendEncodingParameters[0].rtx,X+=U(me,Ke,"answer",me.stream,Z._dtlsRole),me.rtcpParameters&&me.rtcpParameters.reducedSize&&(X+="a=rtcp-rsize\r\n")}});var ie=new J.RTCSessionDescription({type:"answer",sdp:X});return Promise.resolve(ie)},Ce.prototype.addIceCandidate=function(Z){var he,X=this;return Z&&void 0===Z.sdpMLineIndex&&!Z.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(ie,me){if(!X._remoteDescription)return me(K("InvalidStateError","Can not add ICE candidate without a remote description"));if(Z&&""!==Z.candidate){var Te=Z.sdpMLineIndex;if(Z.sdpMid)for(var Ke=0;Ke<X.transceivers.length;Ke++)if(X.transceivers[Ke].mid===Z.sdpMid){Te=Ke;break}var ve=X.transceivers[Te];if(!ve)return me(K("OperationError","Can not add ICE candidate"));if(ve.rejected)return ie();var xe=Object.keys(Z.candidate).length>0?O.parseCandidate(Z.candidate):{};if("tcp"===xe.protocol&&(0===xe.port||9===xe.port)||xe.component&&1!==xe.component)return ie();if((0===Te||Te>0&&ve.iceTransport!==X.transceivers[0].iceTransport)&&!je(ve.iceTransport,xe))return me(K("OperationError","Can not add ICE candidate"));var Le=Z.candidate.trim();0===Le.indexOf("a=")&&(Le=Le.substr(2)),(he=O.getMediaSections(X._remoteDescription.sdp))[Te]+="a="+(xe.type?Le:"end-of-candidates")+"\r\n",X._remoteDescription.sdp=O.getDescription(X._remoteDescription.sdp)+he.join("")}else for(var Be=0;Be<X.transceivers.length&&(X.transceivers[Be].rejected||(X.transceivers[Be].iceTransport.addRemoteCandidate({}),(he=O.getMediaSections(X._remoteDescription.sdp))[Be]+="a=end-of-candidates\r\n",X._remoteDescription.sdp=O.getDescription(X._remoteDescription.sdp)+he.join(""),!X.usingBundle));Be++);ie()})},Ce.prototype.getStats=function(Z){if(Z&&Z instanceof J.MediaStreamTrack){var X=null;if(this.transceivers.forEach(function(ie){ie.rtpSender&&ie.rtpSender.track===Z?X=ie.rtpSender:ie.rtpReceiver&&ie.rtpReceiver.track===Z&&(X=ie.rtpReceiver)}),!X)throw K("InvalidAccessError","Invalid selector.");return X.getStats()}var he=[];return this.transceivers.forEach(function(ie){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(me){ie[me]&&he.push(ie[me].getStats())})}),Promise.all(he).then(function(ie){var me=new Map;return ie.forEach(function(Be){Be.forEach(function(Te){me.set(Te.id,Te)})}),me})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(Z){var X=J[Z];if(X&&X.prototype&&X.prototype.getStats){var he=X.prototype.getStats;X.prototype.getStats=function(){return he.apply(this).then(function(ie){var me=new Map;return Object.keys(ie).forEach(function(Be){ie[Be].type=function H(J){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[J.type]||J.type}(ie[Be]),me.set(Be,ie[Be])}),me})}}});var st=["createOffer","createAnswer"];return st.forEach(function(Z){var X=Ce.prototype[Z];Ce.prototype[Z]=function(){var he=arguments;return"function"==typeof he[0]||"function"==typeof he[1]?X.apply(this,[arguments[2]]).then(function(ie){"function"==typeof he[0]&&he[0].apply(null,[ie])},function(ie){"function"==typeof he[1]&&he[1].apply(null,[ie])}):X.apply(this,arguments)}}),(st=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(Z){var X=Ce.prototype[Z];Ce.prototype[Z]=function(){var he=arguments;return"function"==typeof he[1]||"function"==typeof he[2]?X.apply(this,arguments).then(function(){"function"==typeof he[1]&&he[1].apply(null)},function(ie){"function"==typeof he[2]&&he[2].apply(null,[ie])}):X.apply(this,arguments)}}),["getStats"].forEach(function(Z){var X=Ce.prototype[Z];Ce.prototype[Z]=function(){var he=arguments;return"function"==typeof he[1]?X.apply(this,arguments).then(function(){"function"==typeof he[1]&&he[1].apply(null)}):X.apply(this,arguments)}}),Ce}},9751:(pt,de,F)=>{"use strict";F.d(de,{y:()=>K});var O=F(930),H=F(727),U=F(8822),ce=F(9635),fe=F(2416),d=F(576),je=F(2806);let K=(()=>{class pe{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Ye=new pe;return Ye.source=this,Ye.operator=Ce,Ye}subscribe(Ce,Ye,st){const Z=function ee(pe){return pe&&pe instanceof O.Lv||function Y(pe){return pe&&(0,d.m)(pe.next)&&(0,d.m)(pe.error)&&(0,d.m)(pe.complete)}(pe)&&(0,H.Nn)(pe)}(Ce)?Ce:new O.Hp(Ce,Ye,st);return(0,je.x)(()=>{const{operator:X,source:he}=this;Z.add(X?X.call(Z,he):he?this._subscribe(Z):this._trySubscribe(Z))}),Z}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Ye){Ce.error(Ye)}}forEach(Ce,Ye){return new(Ye=J(Ye))((st,Z)=>{const X=new O.Hp({next:he=>{try{Ce(he)}catch(ie){Z(ie),X.unsubscribe()}},error:Z,complete:st});this.subscribe(X)})}_subscribe(Ce){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ce)}[U.L](){return this}pipe(...Ce){return(0,ce.U)(Ce)(this)}toPromise(Ce){return new(Ce=J(Ce))((Ye,st)=>{let Z;this.subscribe(X=>Z=X,X=>st(X),()=>Ye(Z))})}}return pe.create=Qe=>new pe(Qe),pe})();function J(pe){var Qe;return null!==(Qe=pe??fe.v.Promise)&&void 0!==Qe?Qe:Promise}},7579:(pt,de,F)=>{"use strict";F.d(de,{x:()=>je});var O=F(9751),H=F(727);const ce=(0,F(3888).d)(J=>function(){J(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=F(8737),d=F(2806);let je=(()=>{class J extends O.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const pe=new K(this,this);return pe.operator=ee,pe}_throwIfClosed(){if(this.closed)throw new ce}next(ee){(0,d.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(ee)}})}error(ee){(0,d.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:pe}=this;for(;pe.length;)pe.shift().error(ee)}})}complete(){(0,d.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:pe,isStopped:Qe,observers:Ce}=this;return pe||Qe?H.Lc:(this.currentObservers=null,Ce.push(ee),new H.w0(()=>{this.currentObservers=null,(0,fe.P)(Ce,ee)}))}_checkFinalizedStatuses(ee){const{hasError:pe,thrownError:Qe,isStopped:Ce}=this;pe?ee.error(Qe):Ce&&ee.complete()}asObservable(){const ee=new O.y;return ee.source=this,ee}}return J.create=(Y,ee)=>new K(Y,ee),J})();class K extends je{constructor(Y,ee){super(),this.destination=Y,this.source=ee}next(Y){var ee,pe;null===(pe=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===pe||pe.call(ee,Y)}error(Y){var ee,pe;null===(pe=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===pe||pe.call(ee,Y)}complete(){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===ee||ee.call(Y)}_subscribe(Y){var ee,pe;return null!==(pe=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(Y))&&void 0!==pe?pe:H.Lc}}},930:(pt,de,F)=>{"use strict";F.d(de,{Hp:()=>st,Lv:()=>pe});var O=F(576),H=F(727),U=F(2416),ce=F(7849),fe=F(5032);const d=J("C",void 0,void 0);function J(me,Be,Te){return{kind:me,value:Be,error:Te}}var Y=F(3410),ee=F(2806);class pe extends H.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,H.Nn)(Be)&&Be.add(this)):this.destination=ie}static create(Be,Te,Ke){return new st(Be,Te,Ke)}next(Be){this.isStopped?he(function K(me){return J("N",me,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?he(function je(me){return J("E",void 0,me)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?he(d,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function Ce(me,Be){return Qe.call(me,Be)}class Ye{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Be)}catch(Ke){Z(Ke)}}error(Be){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Be)}catch(Ke){Z(Ke)}else Z(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(Te){Z(Te)}}}class st extends pe{constructor(Be,Te,Ke){let ve;if(super(),(0,O.m)(Be)||!Be)ve={next:Be??void 0,error:Te??void 0,complete:Ke??void 0};else{let xe;this&&U.v.useDeprecatedNextContext?(xe=Object.create(Be),xe.unsubscribe=()=>this.unsubscribe(),ve={next:Be.next&&Ce(Be.next,xe),error:Be.error&&Ce(Be.error,xe),complete:Be.complete&&Ce(Be.complete,xe)}):ve=Be}this.destination=new Ye(ve)}}function Z(me){U.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(me):(0,ce.h)(me)}function he(me,Be){const{onStoppedNotification:Te}=U.v;Te&&Y.z.setTimeout(()=>Te(me,Be))}const ie={closed:!0,next:fe.Z,error:function X(me){throw me},complete:fe.Z}},727:(pt,de,F)=>{"use strict";F.d(de,{Lc:()=>d,w0:()=>fe,Nn:()=>je});var O=F(576);const U=(0,F(3888).d)(J=>function(ee){J(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((pe,Qe)=>`${Qe+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var ce=F(8737);class fe{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const Ce of ee)Ce.remove(this);else ee.remove(this);const{initialTeardown:pe}=this;if((0,O.m)(pe))try{pe()}catch(Ce){Y=Ce instanceof U?Ce.errors:[Ce]}const{_finalizers:Qe}=this;if(Qe){this._finalizers=null;for(const Ce of Qe)try{K(Ce)}catch(Ye){Y=Y??[],Ye instanceof U?Y=[...Y,...Ye.errors]:Y.push(Ye)}}if(Y)throw new U(Y)}}add(Y){var ee;if(Y&&Y!==this)if(this.closed)K(Y);else{if(Y instanceof fe){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(Y)}}_hasParent(Y){const{_parentage:ee}=this;return ee===Y||Array.isArray(ee)&&ee.includes(Y)}_addParent(Y){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(Y),ee):ee?[ee,Y]:Y}_removeParent(Y){const{_parentage:ee}=this;ee===Y?this._parentage=null:Array.isArray(ee)&&(0,ce.P)(ee,Y)}remove(Y){const{_finalizers:ee}=this;ee&&(0,ce.P)(ee,Y),Y instanceof fe&&Y._removeParent(this)}}fe.EMPTY=(()=>{const J=new fe;return J.closed=!0,J})();const d=fe.EMPTY;function je(J){return J instanceof fe||J&&"closed"in J&&(0,O.m)(J.remove)&&(0,O.m)(J.add)&&(0,O.m)(J.unsubscribe)}function K(J){(0,O.m)(J)?J():J.unsubscribe()}},2416:(pt,de,F)=>{"use strict";F.d(de,{v:()=>O});const O={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,de,F)=>{"use strict";F.d(de,{E:()=>H});const H=new(F(9751).y)(fe=>fe.complete())},8996:(pt,de,F)=>{"use strict";F.d(de,{D:()=>Be});var O=F(8421),H=F(5363),U=F(9468),d=F(9751),K=F(2202),J=F(576),Y=F(9672);function pe(Te,Ke){if(!Te)throw new Error("Iterable cannot be null");return new d.y(ve=>{(0,Y.f)(ve,Ke,()=>{const xe=Te[Symbol.asyncIterator]();(0,Y.f)(ve,Ke,()=>{xe.next().then(Le=>{Le.done?ve.complete():ve.next(Le.value)})},0,!0)})})}var Qe=F(3670),Ce=F(8239),Ye=F(1144),st=F(6495),Z=F(2206),X=F(4532),he=F(3260);function Be(Te,Ke){return Ke?function me(Te,Ke){if(null!=Te){if((0,Qe.c)(Te))return function ce(Te,Ke){return(0,O.Xf)(Te).pipe((0,U.R)(Ke),(0,H.Q)(Ke))}(Te,Ke);if((0,Ye.z)(Te))return function je(Te,Ke){return new d.y(ve=>{let xe=0;return Ke.schedule(function(){xe===Te.length?ve.complete():(ve.next(Te[xe++]),ve.closed||this.schedule())})})}(Te,Ke);if((0,Ce.t)(Te))return function fe(Te,Ke){return(0,O.Xf)(Te).pipe((0,U.R)(Ke),(0,H.Q)(Ke))}(Te,Ke);if((0,Z.D)(Te))return pe(Te,Ke);if((0,st.T)(Te))return function ee(Te,Ke){return new d.y(ve=>{let xe;return(0,Y.f)(ve,Ke,()=>{xe=Te[K.h](),(0,Y.f)(ve,Ke,()=>{let Le,Ie;try{({value:Le,done:Ie}=xe.next())}catch(Oe){return void ve.error(Oe)}Ie?ve.complete():ve.next(Le)},0,!0)}),()=>(0,J.m)(xe?.return)&&xe.return()})}(Te,Ke);if((0,he.L)(Te))return function ie(Te,Ke){return pe((0,he.Q)(Te),Ke)}(Te,Ke)}throw(0,X.z)(Te)}(Te,Ke):(0,O.Xf)(Te)}},8421:(pt,de,F)=>{"use strict";F.d(de,{Xf:()=>Qe});var O=F(655),H=F(1144),U=F(8239),ce=F(9751),fe=F(3670),d=F(2206),je=F(4532),K=F(6495),J=F(3260),Y=F(576),ee=F(7849),pe=F(8822);function Qe(me){if(me instanceof ce.y)return me;if(null!=me){if((0,fe.c)(me))return function Ce(me){return new ce.y(Be=>{const Te=me[pe.L]();if((0,Y.m)(Te.subscribe))return Te.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,H.z)(me))return function Ye(me){return new ce.y(Be=>{for(let Te=0;Te<me.length&&!Be.closed;Te++)Be.next(me[Te]);Be.complete()})}(me);if((0,U.t)(me))return function st(me){return new ce.y(Be=>{me.then(Te=>{Be.closed||(Be.next(Te),Be.complete())},Te=>Be.error(Te)).then(null,ee.h)})}(me);if((0,d.D)(me))return X(me);if((0,K.T)(me))return function Z(me){return new ce.y(Be=>{for(const Te of me)if(Be.next(Te),Be.closed)return;Be.complete()})}(me);if((0,J.L)(me))return function he(me){return X((0,J.Q)(me))}(me)}throw(0,je.z)(me)}function X(me){return new ce.y(Be=>{(function ie(me,Be){var Te,Ke,ve,xe;return(0,O.mG)(this,void 0,void 0,function*(){try{for(Te=(0,O.KL)(me);!(Ke=yield Te.next()).done;)if(Be.next(Ke.value),Be.closed)return}catch(Le){ve={error:Le}}finally{try{Ke&&!Ke.done&&(xe=Te.return)&&(yield xe.call(Te))}finally{if(ve)throw ve.error}}Be.complete()})})(me,Be).catch(Te=>Be.error(Te))})}},6451:(pt,de,F)=>{"use strict";F.d(de,{T:()=>d});var O=F(8189),H=F(8421),U=F(515),ce=F(3269),fe=F(8996);function d(...je){const K=(0,ce.yG)(je),J=(0,ce._6)(je,1/0),Y=je;return Y.length?1===Y.length?(0,H.Xf)(Y[0]):(0,O.J)(J)((0,fe.D)(Y,K)):U.E}},5403:(pt,de,F)=>{"use strict";F.d(de,{x:()=>H});var O=F(930);function H(ce,fe,d,je,K){return new U(ce,fe,d,je,K)}class U extends O.Lv{constructor(fe,d,je,K,J,Y){super(fe),this.onFinalize=J,this.shouldUnsubscribe=Y,this._next=d?function(ee){try{d(ee)}catch(pe){fe.error(pe)}}:super._next,this._error=K?function(ee){try{K(ee)}catch(pe){fe.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=je?function(){try{je()}catch(ee){fe.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:d}=this;super.unsubscribe(),!d&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(pt,de,F)=>{"use strict";F.d(de,{U:()=>U});var O=F(4482),H=F(5403);function U(ce,fe){return(0,O.e)((d,je)=>{let K=0;d.subscribe((0,H.x)(je,J=>{je.next(ce.call(fe,J,K++))}))})}},8189:(pt,de,F)=>{"use strict";F.d(de,{J:()=>U});var O=F(5577),H=F(4671);function U(ce=1/0){return(0,O.z)(H.y,ce)}},5577:(pt,de,F)=>{"use strict";F.d(de,{z:()=>K});var O=F(4004),H=F(8421),U=F(4482),ce=F(9672),fe=F(5403),je=F(576);function K(J,Y,ee=1/0){return(0,je.m)(Y)?K((pe,Qe)=>(0,O.U)((Ce,Ye)=>Y(pe,Ce,Qe,Ye))((0,H.Xf)(J(pe,Qe))),ee):("number"==typeof Y&&(ee=Y),(0,U.e)((pe,Qe)=>function d(J,Y,ee,pe,Qe,Ce,Ye,st){const Z=[];let X=0,he=0,ie=!1;const me=()=>{ie&&!Z.length&&!X&&Y.complete()},Be=Ke=>X<pe?Te(Ke):Z.push(Ke),Te=Ke=>{Ce&&Y.next(Ke),X++;let ve=!1;(0,H.Xf)(ee(Ke,he++)).subscribe((0,fe.x)(Y,xe=>{Qe?.(xe),Ce?Be(xe):Y.next(xe)},()=>{ve=!0},void 0,()=>{if(ve)try{for(X--;Z.length&&X<pe;){const xe=Z.shift();Ye?(0,ce.f)(Y,Ye,()=>Te(xe)):Te(xe)}me()}catch(xe){Y.error(xe)}}))};return J.subscribe((0,fe.x)(Y,Be,()=>{ie=!0,me()})),()=>{st?.()}}(pe,Qe,J,ee)))}},5363:(pt,de,F)=>{"use strict";F.d(de,{Q:()=>ce});var O=F(9672),H=F(4482),U=F(5403);function ce(fe,d=0){return(0,H.e)((je,K)=>{je.subscribe((0,U.x)(K,J=>(0,O.f)(K,fe,()=>K.next(J),d),()=>(0,O.f)(K,fe,()=>K.complete(),d),J=>(0,O.f)(K,fe,()=>K.error(J),d)))})}},3099:(pt,de,F)=>{"use strict";F.d(de,{B:()=>fe});var O=F(8421),H=F(7579),U=F(930),ce=F(4482);function fe(je={}){const{connector:K=(()=>new H.x),resetOnError:J=!0,resetOnComplete:Y=!0,resetOnRefCountZero:ee=!0}=je;return pe=>{let Qe,Ce,Ye,st=0,Z=!1,X=!1;const he=()=>{Ce?.unsubscribe(),Ce=void 0},ie=()=>{he(),Qe=Ye=void 0,Z=X=!1},me=()=>{const Be=Qe;ie(),Be?.unsubscribe()};return(0,ce.e)((Be,Te)=>{st++,!X&&!Z&&he();const Ke=Ye=Ye??K();Te.add(()=>{st--,0===st&&!X&&!Z&&(Ce=d(me,ee))}),Ke.subscribe(Te),!Qe&&st>0&&(Qe=new U.Hp({next:ve=>Ke.next(ve),error:ve=>{X=!0,he(),Ce=d(ie,J,ve),Ke.error(ve)},complete:()=>{Z=!0,he(),Ce=d(ie,Y),Ke.complete()}}),(0,O.Xf)(Be).subscribe(Qe))})(pe)}}function d(je,K,...J){if(!0===K)return void je();if(!1===K)return;const Y=new U.Hp({next:()=>{Y.unsubscribe(),je()}});return K(...J).subscribe(Y)}},9468:(pt,de,F)=>{"use strict";F.d(de,{R:()=>H});var O=F(4482);function H(U,ce=0){return(0,O.e)((fe,d)=>{d.add(U.schedule(()=>fe.subscribe(d),ce))})}},8505:(pt,de,F)=>{"use strict";F.d(de,{b:()=>fe});var O=F(576),H=F(4482),U=F(5403),ce=F(4671);function fe(d,je,K){const J=(0,O.m)(d)||je||K?{next:d,error:je,complete:K}:d;return J?(0,H.e)((Y,ee)=>{var pe;null===(pe=J.subscribe)||void 0===pe||pe.call(J);let Qe=!0;Y.subscribe((0,U.x)(ee,Ce=>{var Ye;null===(Ye=J.next)||void 0===Ye||Ye.call(J,Ce),ee.next(Ce)},()=>{var Ce;Qe=!1,null===(Ce=J.complete)||void 0===Ce||Ce.call(J),ee.complete()},Ce=>{var Ye;Qe=!1,null===(Ye=J.error)||void 0===Ye||Ye.call(J,Ce),ee.error(Ce)},()=>{var Ce,Ye;Qe&&(null===(Ce=J.unsubscribe)||void 0===Ce||Ce.call(J)),null===(Ye=J.finalize)||void 0===Ye||Ye.call(J)}))}):ce.y}},4408:(pt,de,F)=>{"use strict";F.d(de,{o:()=>fe});var O=F(727);class H extends O.w0{constructor(je,K){super()}schedule(je,K=0){return this}}const U={setInterval(d,je,...K){const{delegate:J}=U;return J?.setInterval?J.setInterval(d,je,...K):setInterval(d,je,...K)},clearInterval(d){const{delegate:je}=U;return(je?.clearInterval||clearInterval)(d)},delegate:void 0};var ce=F(8737);class fe extends H{constructor(je,K){super(je,K),this.scheduler=je,this.work=K,this.pending=!1}schedule(je,K=0){var J;if(this.closed)return this;this.state=je;const Y=this.id,ee=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(ee,Y,K)),this.pending=!0,this.delay=K,this.id=null!==(J=this.id)&&void 0!==J?J:this.requestAsyncId(ee,this.id,K),this}requestAsyncId(je,K,J=0){return U.setInterval(je.flush.bind(je,this),J)}recycleAsyncId(je,K,J=0){if(null!=J&&this.delay===J&&!1===this.pending)return K;null!=K&&U.clearInterval(K)}execute(je,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const J=this._execute(je,K);if(J)return J;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(je,K){let Y,J=!1;try{this.work(je)}catch(ee){J=!0,Y=ee||new Error("Scheduled action threw falsy error")}if(J)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:je,scheduler:K}=this,{actions:J}=K;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(J,this),null!=je&&(this.id=this.recycleAsyncId(K,je,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,de,F)=>{"use strict";F.d(de,{v:()=>U});var O=F(6063);class H{constructor(fe,d=H.now){this.schedulerActionCtor=fe,this.now=d}schedule(fe,d=0,je){return new this.schedulerActionCtor(this,fe).schedule(je,d)}}H.now=O.l.now;class U extends H{constructor(fe,d=H.now){super(fe,d),this.actions=[],this._active=!1}flush(fe){const{actions:d}=this;if(this._active)return void d.push(fe);let je;this._active=!0;do{if(je=fe.execute(fe.state,fe.delay))break}while(fe=d.shift());if(this._active=!1,je){for(;fe=d.shift();)fe.unsubscribe();throw je}}}},4986:(pt,de,F)=>{"use strict";F.d(de,{P:()=>ce,z:()=>U});var O=F(4408);const U=new(F(7565).v)(O.o),ce=U},6063:(pt,de,F)=>{"use strict";F.d(de,{l:()=>O});const O={now:()=>(O.delegate||Date).now(),delegate:void 0}},3410:(pt,de,F)=>{"use strict";F.d(de,{z:()=>O});const O={setTimeout(H,U,...ce){const{delegate:fe}=O;return fe?.setTimeout?fe.setTimeout(H,U,...ce):setTimeout(H,U,...ce)},clearTimeout(H){const{delegate:U}=O;return(U?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(pt,de,F)=>{"use strict";F.d(de,{h:()=>H});const H=function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,de,F)=>{"use strict";F.d(de,{L:()=>O});const O="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(pt,de,F)=>{"use strict";F.d(de,{_6:()=>d,jO:()=>ce,yG:()=>fe});var O=F(576),H=F(3532);function U(je){return je[je.length-1]}function ce(je){return(0,O.m)(U(je))?je.pop():void 0}function fe(je){return(0,H.K)(U(je))?je.pop():void 0}function d(je,K){return"number"==typeof U(je)?je.pop():K}},8737:(pt,de,F)=>{"use strict";function O(H,U){if(H){const ce=H.indexOf(U);0<=ce&&H.splice(ce,1)}}F.d(de,{P:()=>O})},3888:(pt,de,F)=>{"use strict";function O(H){const ce=H(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}F.d(de,{d:()=>O})},2806:(pt,de,F)=>{"use strict";F.d(de,{O:()=>ce,x:()=>U});var O=F(2416);let H=null;function U(fe){if(O.v.useDeprecatedSynchronousErrorHandling){const d=!H;if(d&&(H={errorThrown:!1,error:null}),fe(),d){const{errorThrown:je,error:K}=H;if(H=null,je)throw K}}else fe()}function ce(fe){O.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=fe)}},9672:(pt,de,F)=>{"use strict";function O(H,U,ce,fe=0,d=!1){const je=U.schedule(function(){ce(),d?H.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(H.add(je),!d)return je}F.d(de,{f:()=>O})},4671:(pt,de,F)=>{"use strict";function O(H){return H}F.d(de,{y:()=>O})},1144:(pt,de,F)=>{"use strict";F.d(de,{z:()=>O});const O=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(pt,de,F)=>{"use strict";F.d(de,{D:()=>H});var O=F(576);function H(U){return Symbol.asyncIterator&&(0,O.m)(U?.[Symbol.asyncIterator])}},576:(pt,de,F)=>{"use strict";function O(H){return"function"==typeof H}F.d(de,{m:()=>O})},3670:(pt,de,F)=>{"use strict";F.d(de,{c:()=>U});var O=F(8822),H=F(576);function U(ce){return(0,H.m)(ce[O.L])}},6495:(pt,de,F)=>{"use strict";F.d(de,{T:()=>U});var O=F(2202),H=F(576);function U(ce){return(0,H.m)(ce?.[O.h])}},8239:(pt,de,F)=>{"use strict";F.d(de,{t:()=>H});var O=F(576);function H(U){return(0,O.m)(U?.then)}},3260:(pt,de,F)=>{"use strict";F.d(de,{L:()=>ce,Q:()=>U});var O=F(655),H=F(576);function U(fe){return(0,O.FC)(this,arguments,function*(){const je=fe.getReader();try{for(;;){const{value:K,done:J}=yield(0,O.qq)(je.read());if(J)return yield(0,O.qq)(void 0);yield yield(0,O.qq)(K)}}finally{je.releaseLock()}})}function ce(fe){return(0,H.m)(fe?.getReader)}},3532:(pt,de,F)=>{"use strict";F.d(de,{K:()=>H});var O=F(576);function H(U){return U&&(0,O.m)(U.schedule)}},4482:(pt,de,F)=>{"use strict";F.d(de,{A:()=>H,e:()=>U});var O=F(576);function H(ce){return(0,O.m)(ce?.lift)}function U(ce){return fe=>{if(H(fe))return fe.lift(function(d){try{return ce(d,this)}catch(je){this.error(je)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,de,F)=>{"use strict";function O(){}F.d(de,{Z:()=>O})},9635:(pt,de,F)=>{"use strict";F.d(de,{U:()=>U,z:()=>H});var O=F(4671);function H(...ce){return U(ce)}function U(ce){return 0===ce.length?O.y:1===ce.length?ce[0]:function(d){return ce.reduce((je,K)=>K(je),d)}}},7849:(pt,de,F)=>{"use strict";F.d(de,{h:()=>U});var O=F(2416),H=F(3410);function U(ce){H.z.setTimeout(()=>{const{onUnhandledError:fe}=O.v;if(!fe)throw ce;fe(ce)})}},4532:(pt,de,F)=>{"use strict";function O(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(de,{z:()=>O})},7463:pt=>{"use strict";var de={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};de.localCName=de.generateIdentifier(),de.splitLines=function(F){return F.trim().split("\n").map(function(O){return O.trim()})},de.splitSections=function(F){return F.split("\nm=").map(function(H,U){return(U>0?"m="+H:H).trim()+"\r\n"})},de.getDescription=function(F){var O=de.splitSections(F);return O&&O[0]},de.getMediaSections=function(F){var O=de.splitSections(F);return O.shift(),O},de.matchPrefix=function(F,O){return de.splitLines(F).filter(function(H){return 0===H.indexOf(O)})},de.parseCandidate=function(F){for(var O,H={foundation:(O=0===F.indexOf("a=candidate:")?F.substring(12).split(" "):F.substring(10).split(" "))[0],component:parseInt(O[1],10),protocol:O[2].toLowerCase(),priority:parseInt(O[3],10),ip:O[4],address:O[4],port:parseInt(O[5],10),type:O[7]},U=8;U<O.length;U+=2)switch(O[U]){case"raddr":H.relatedAddress=O[U+1];break;case"rport":H.relatedPort=parseInt(O[U+1],10);break;case"tcptype":H.tcpType=O[U+1];break;case"ufrag":H.ufrag=O[U+1],H.usernameFragment=O[U+1];break;default:H[O[U]]=O[U+1]}return H},de.writeCandidate=function(F){var O=[];O.push(F.foundation),O.push(F.component),O.push(F.protocol.toUpperCase()),O.push(F.priority),O.push(F.address||F.ip),O.push(F.port);var H=F.type;return O.push("typ"),O.push(H),"host"!==H&&F.relatedAddress&&F.relatedPort&&(O.push("raddr"),O.push(F.relatedAddress),O.push("rport"),O.push(F.relatedPort)),F.tcpType&&"tcp"===F.protocol.toLowerCase()&&(O.push("tcptype"),O.push(F.tcpType)),(F.usernameFragment||F.ufrag)&&(O.push("ufrag"),O.push(F.usernameFragment||F.ufrag)),"candidate:"+O.join(" ")},de.parseIceOptions=function(F){return F.substr(14).split(" ")},de.parseRtpMap=function(F){var O=F.substr(9).split(" "),H={payloadType:parseInt(O.shift(),10)};return O=O[0].split("/"),H.name=O[0],H.clockRate=parseInt(O[1],10),H.channels=3===O.length?parseInt(O[2],10):1,H.numChannels=H.channels,H},de.writeRtpMap=function(F){var O=F.payloadType;void 0!==F.preferredPayloadType&&(O=F.preferredPayloadType);var H=F.channels||F.numChannels||1;return"a=rtpmap:"+O+" "+F.name+"/"+F.clockRate+(1!==H?"/"+H:"")+"\r\n"},de.parseExtmap=function(F){var O=F.substr(9).split(" ");return{id:parseInt(O[0],10),direction:O[0].indexOf("/")>0?O[0].split("/")[1]:"sendrecv",uri:O[1]}},de.writeExtmap=function(F){return"a=extmap:"+(F.id||F.preferredId)+(F.direction&&"sendrecv"!==F.direction?"/"+F.direction:"")+" "+F.uri+"\r\n"},de.parseFmtp=function(F){for(var H,O={},U=F.substr(F.indexOf(" ")+1).split(";"),ce=0;ce<U.length;ce++)O[(H=U[ce].trim().split("="))[0].trim()]=H[1];return O},de.writeFmtp=function(F){var O="",H=F.payloadType;if(void 0!==F.preferredPayloadType&&(H=F.preferredPayloadType),F.parameters&&Object.keys(F.parameters).length){var U=[];Object.keys(F.parameters).forEach(function(ce){U.push(F.parameters[ce]?ce+"="+F.parameters[ce]:ce)}),O+="a=fmtp:"+H+" "+U.join(";")+"\r\n"}return O},de.parseRtcpFb=function(F){var O=F.substr(F.indexOf(" ")+1).split(" ");return{type:O.shift(),parameter:O.join(" ")}},de.writeRtcpFb=function(F){var O="",H=F.payloadType;return void 0!==F.preferredPayloadType&&(H=F.preferredPayloadType),F.rtcpFeedback&&F.rtcpFeedback.length&&F.rtcpFeedback.forEach(function(U){O+="a=rtcp-fb:"+H+" "+U.type+(U.parameter&&U.parameter.length?" "+U.parameter:"")+"\r\n"}),O},de.parseSsrcMedia=function(F){var O=F.indexOf(" "),H={ssrc:parseInt(F.substr(7,O-7),10)},U=F.indexOf(":",O);return U>-1?(H.attribute=F.substr(O+1,U-O-1),H.value=F.substr(U+1)):H.attribute=F.substr(O+1),H},de.parseSsrcGroup=function(F){var O=F.substr(13).split(" ");return{semantics:O.shift(),ssrcs:O.map(function(H){return parseInt(H,10)})}},de.getMid=function(F){var O=de.matchPrefix(F,"a=mid:")[0];if(O)return O.substr(6)},de.parseFingerprint=function(F){var O=F.substr(14).split(" ");return{algorithm:O[0].toLowerCase(),value:O[1]}},de.getDtlsParameters=function(F,O){return{role:"auto",fingerprints:de.matchPrefix(F+O,"a=fingerprint:").map(de.parseFingerprint)}},de.writeDtlsParameters=function(F,O){var H="a=setup:"+O+"\r\n";return F.fingerprints.forEach(function(U){H+="a=fingerprint:"+U.algorithm+" "+U.value+"\r\n"}),H},de.parseCryptoLine=function(F){var O=F.substr(9).split(" ");return{tag:parseInt(O[0],10),cryptoSuite:O[1],keyParams:O[2],sessionParams:O.slice(3)}},de.writeCryptoLine=function(F){return"a=crypto:"+F.tag+" "+F.cryptoSuite+" "+("object"==typeof F.keyParams?de.writeCryptoKeyParams(F.keyParams):F.keyParams)+(F.sessionParams?" "+F.sessionParams.join(" "):"")+"\r\n"},de.parseCryptoKeyParams=function(F){if(0!==F.indexOf("inline:"))return null;var O=F.substr(7).split("|");return{keyMethod:"inline",keySalt:O[0],lifeTime:O[1],mkiValue:O[2]?O[2].split(":")[0]:void 0,mkiLength:O[2]?O[2].split(":")[1]:void 0}},de.writeCryptoKeyParams=function(F){return F.keyMethod+":"+F.keySalt+(F.lifeTime?"|"+F.lifeTime:"")+(F.mkiValue&&F.mkiLength?"|"+F.mkiValue+":"+F.mkiLength:"")},de.getCryptoParameters=function(F,O){return de.matchPrefix(F+O,"a=crypto:").map(de.parseCryptoLine)},de.getIceParameters=function(F,O){var H=de.matchPrefix(F+O,"a=ice-ufrag:")[0],U=de.matchPrefix(F+O,"a=ice-pwd:")[0];return H&&U?{usernameFragment:H.substr(12),password:U.substr(10)}:null},de.writeIceParameters=function(F){return"a=ice-ufrag:"+F.usernameFragment+"\r\na=ice-pwd:"+F.password+"\r\n"},de.parseRtpParameters=function(F){for(var O={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},U=de.splitLines(F)[0].split(" "),ce=3;ce<U.length;ce++){var fe=U[ce],d=de.matchPrefix(F,"a=rtpmap:"+fe+" ")[0];if(d){var je=de.parseRtpMap(d),K=de.matchPrefix(F,"a=fmtp:"+fe+" ");switch(je.parameters=K.length?de.parseFmtp(K[0]):{},je.rtcpFeedback=de.matchPrefix(F,"a=rtcp-fb:"+fe+" ").map(de.parseRtcpFb),O.codecs.push(je),je.name.toUpperCase()){case"RED":case"ULPFEC":O.fecMechanisms.push(je.name.toUpperCase())}}}return de.matchPrefix(F,"a=extmap:").forEach(function(J){O.headerExtensions.push(de.parseExtmap(J))}),O},de.writeRtpDescription=function(F,O){var H="";H+="m="+F+" ",H+=O.codecs.length>0?"9":"0",H+=" UDP/TLS/RTP/SAVPF ",H+=O.codecs.map(function(ce){return void 0!==ce.preferredPayloadType?ce.preferredPayloadType:ce.payloadType}).join(" ")+"\r\n",H+="c=IN IP4 0.0.0.0\r\n",H+="a=rtcp:9 IN IP4 0.0.0.0\r\n",O.codecs.forEach(function(ce){H+=de.writeRtpMap(ce),H+=de.writeFmtp(ce),H+=de.writeRtcpFb(ce)});var U=0;return O.codecs.forEach(function(ce){ce.maxptime>U&&(U=ce.maxptime)}),U>0&&(H+="a=maxptime:"+U+"\r\n"),H+="a=rtcp-mux\r\n",O.headerExtensions&&O.headerExtensions.forEach(function(ce){H+=de.writeExtmap(ce)}),H},de.parseRtpEncodingParameters=function(F){var je,O=[],H=de.parseRtpParameters(F),U=-1!==H.fecMechanisms.indexOf("RED"),ce=-1!==H.fecMechanisms.indexOf("ULPFEC"),fe=de.matchPrefix(F,"a=ssrc:").map(function(Y){return de.parseSsrcMedia(Y)}).filter(function(Y){return"cname"===Y.attribute}),d=fe.length>0&&fe[0].ssrc,K=de.matchPrefix(F,"a=ssrc-group:FID").map(function(Y){return Y.substr(17).split(" ").map(function(pe){return parseInt(pe,10)})});K.length>0&&K[0].length>1&&K[0][0]===d&&(je=K[0][1]),H.codecs.forEach(function(Y){if("RTX"===Y.name.toUpperCase()&&Y.parameters.apt){var ee={ssrc:d,codecPayloadType:parseInt(Y.parameters.apt,10)};d&&je&&(ee.rtx={ssrc:je}),O.push(ee),U&&((ee=JSON.parse(JSON.stringify(ee))).fec={ssrc:d,mechanism:ce?"red+ulpfec":"red"},O.push(ee))}}),0===O.length&&d&&O.push({ssrc:d});var J=de.matchPrefix(F,"b=");return J.length&&(J=0===J[0].indexOf("b=TIAS:")?parseInt(J[0].substr(7),10):0===J[0].indexOf("b=AS:")?1e3*parseInt(J[0].substr(5),10)*.95-16e3:void 0,O.forEach(function(Y){Y.maxBitrate=J})),O},de.parseRtcpParameters=function(F){var O={},H=de.matchPrefix(F,"a=ssrc:").map(function(fe){return de.parseSsrcMedia(fe)}).filter(function(fe){return"cname"===fe.attribute})[0];H&&(O.cname=H.value,O.ssrc=H.ssrc);var U=de.matchPrefix(F,"a=rtcp-rsize");O.reducedSize=U.length>0,O.compound=0===U.length;var ce=de.matchPrefix(F,"a=rtcp-mux");return O.mux=ce.length>0,O},de.parseMsid=function(F){var O,H=de.matchPrefix(F,"a=msid:");if(1===H.length)return{stream:(O=H[0].substr(7).split(" "))[0],track:O[1]};var U=de.matchPrefix(F,"a=ssrc:").map(function(ce){return de.parseSsrcMedia(ce)}).filter(function(ce){return"msid"===ce.attribute});return U.length>0?{stream:(O=U[0].value.split(" "))[0],track:O[1]}:void 0},de.parseSctpDescription=function(F){var U,O=de.parseMLine(F),H=de.matchPrefix(F,"a=max-message-size:");H.length>0&&(U=parseInt(H[0].substr(19),10)),isNaN(U)&&(U=65536);var ce=de.matchPrefix(F,"a=sctp-port:");if(ce.length>0)return{port:parseInt(ce[0].substr(12),10),protocol:O.fmt,maxMessageSize:U};if(de.matchPrefix(F,"a=sctpmap:").length>0){var d=de.matchPrefix(F,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:U}}},de.writeSctpDescription=function(F,O){var H=[];return H="DTLS/SCTP"!==F.protocol?["m="+F.kind+" 9 "+F.protocol+" "+O.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+O.port+"\r\n"]:["m="+F.kind+" 9 "+F.protocol+" "+O.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+O.port+" "+O.protocol+" 65535\r\n"],void 0!==O.maxMessageSize&&H.push("a=max-message-size:"+O.maxMessageSize+"\r\n"),H.join("")},de.generateSessionId=function(){return Math.random().toString().substr(2,21)},de.writeSessionBoilerplate=function(F,O,H){var ce=void 0!==O?O:2;return"v=0\r\no="+(H||"thisisadapterortc")+" "+(F||de.generateSessionId())+" "+ce+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},de.writeMediaSection=function(F,O,H,U){var ce=de.writeRtpDescription(F.kind,O);if(ce+=de.writeIceParameters(F.iceGatherer.getLocalParameters()),ce+=de.writeDtlsParameters(F.dtlsTransport.getLocalParameters(),"offer"===H?"actpass":"active"),ce+="a=mid:"+F.mid+"\r\n",ce+=F.direction?"a="+F.direction+"\r\n":F.rtpSender&&F.rtpReceiver?"a=sendrecv\r\n":F.rtpSender?"a=sendonly\r\n":F.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",F.rtpSender){var fe="msid:"+U.id+" "+F.rtpSender.track.id+"\r\n";ce+="a="+fe,ce+="a=ssrc:"+F.sendEncodingParameters[0].ssrc+" "+fe,F.sendEncodingParameters[0].rtx&&(ce+="a=ssrc:"+F.sendEncodingParameters[0].rtx.ssrc+" "+fe,ce+="a=ssrc-group:FID "+F.sendEncodingParameters[0].ssrc+" "+F.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return ce+="a=ssrc:"+F.sendEncodingParameters[0].ssrc+" cname:"+de.localCName+"\r\n",F.rtpSender&&F.sendEncodingParameters[0].rtx&&(ce+="a=ssrc:"+F.sendEncodingParameters[0].rtx.ssrc+" cname:"+de.localCName+"\r\n"),ce},de.getDirection=function(F,O){for(var H=de.splitLines(F),U=0;U<H.length;U++)switch(H[U]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return H[U].substr(2)}return O?de.getDirection(O):"sendrecv"},de.getKind=function(F){return de.splitLines(F)[0].split(" ")[0].substr(2)},de.isRejected=function(F){return"0"===F.split(" ",2)[1]},de.parseMLine=function(F){var H=de.splitLines(F)[0].substr(2).split(" ");return{kind:H[0],port:parseInt(H[1],10),protocol:H[2],fmt:H.slice(3).join(" ")}},de.parseOLine=function(F){var H=de.matchPrefix(F,"o=")[0].substr(2).split(" ");return{username:H[0],sessionId:H[1],sessionVersion:parseInt(H[2],10),netType:H[3],addressType:H[4],address:H[5]}},de.isValidSDP=function(F){if("string"!=typeof F||0===F.length)return!1;for(var O=de.splitLines(F),H=0;H<O.length;H++)if(O[H].length<2||"="!==O[H].charAt(1))return!1;return!0},pt.exports=de},655:(pt,de,F)=>{"use strict";function ce(Ie,Oe){var $e={};for(var Ge in Ie)Object.prototype.hasOwnProperty.call(Ie,Ge)&&Oe.indexOf(Ge)<0&&($e[Ge]=Ie[Ge]);if(null!=Ie&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(Ge=Object.getOwnPropertySymbols(Ie);We<Ge.length;We++)Oe.indexOf(Ge[We])<0&&Object.prototype.propertyIsEnumerable.call(Ie,Ge[We])&&($e[Ge[We]]=Ie[Ge[We]])}return $e}function K(Ie,Oe,$e,Ge){return new($e||($e=Promise))(function(He,ot){function lt(sn){try{Qt(Ge.next(sn))}catch(Mt){ot(Mt)}}function mt(sn){try{Qt(Ge.throw(sn))}catch(Mt){ot(Mt)}}function Qt(sn){sn.done?He(sn.value):function We(He){return He instanceof $e?He:new $e(function(ot){ot(He)})}(sn.value).then(lt,mt)}Qt((Ge=Ge.apply(Ie,Oe||[])).next())})}function Z(Ie){return this instanceof Z?(this.v=Ie,this):new Z(Ie)}function X(Ie,Oe,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Ge=$e.apply(Ie,Oe||[]),He=[];return We={},ot("next"),ot("throw"),ot("return"),We[Symbol.asyncIterator]=function(){return this},We;function ot(Rn){Ge[Rn]&&(We[Rn]=function(ur){return new Promise(function(_n,tn){He.push([Rn,ur,_n,tn])>1||lt(Rn,ur)})})}function lt(Rn,ur){try{!function mt(Rn){Rn.value instanceof Z?Promise.resolve(Rn.value.v).then(Qt,sn):Mt(He[0][2],Rn)}(Ge[Rn](ur))}catch(_n){Mt(He[0][3],_n)}}function Qt(Rn){lt("next",Rn)}function sn(Rn){lt("throw",Rn)}function Mt(Rn,ur){Rn(ur),He.shift(),He.length&&lt(He[0][0],He[0][1])}}function ie(Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Oe=Ie[Symbol.asyncIterator];return Oe?Oe.call(Ie):(Ie=function pe(Ie){var Oe="function"==typeof Symbol&&Symbol.iterator,$e=Oe&&Ie[Oe],Ge=0;if($e)return $e.call(Ie);if(Ie&&"number"==typeof Ie.length)return{next:function(){return Ie&&Ge>=Ie.length&&(Ie=void 0),{value:Ie&&Ie[Ge++],done:!Ie}}};throw new TypeError(Oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ie),$e={},Ge("next"),Ge("throw"),Ge("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function Ge(He){$e[He]=Ie[He]&&function(ot){return new Promise(function(lt,mt){!function We(He,ot,lt,mt){Promise.resolve(mt).then(function(Qt){He({value:Qt,done:lt})},ot)}(lt,mt,(ot=Ie[He](ot)).done,ot.value)})}}}F.d(de,{FC:()=>X,KL:()=>ie,_T:()=>ce,mG:()=>K,qq:()=>Z})},4650:(pt,de,F)=>{"use strict";F.d(de,{$8M:()=>vl,$Z:()=>Xy,AFp:()=>$p,ALo:()=>yw,AaK:()=>K,AsE:()=>gm,BQk:()=>Qh,CHM:()=>ih,CRH:()=>JT,CZH:()=>Mv,CqO:()=>T0,D6c:()=>nD,DjV:()=>_m,EJc:()=>Pm,EpF:()=>D0,F$t:()=>_s,F4k:()=>Z_,FYo:()=>Ng,FiY:()=>Pi,G48:()=>b1,Gf:()=>Sw,GfV:()=>In,Gpc:()=>ee,Hsn:()=>J_,Ikx:()=>p,JOm:()=>ta,KtG:()=>Br,LFG:()=>Xe,LSH:()=>Hf,Lbi:()=>VI,Lck:()=>vo,MAs:()=>Jh,MGl:()=>cm,MMx:()=>mb,NdJ:()=>Xh,OlP:()=>Hn,Oqu:()=>Dp,P3R:()=>Ig,PXZ:()=>GI,Q6J:()=>am,QGY:()=>K_,QP$:()=>Cr,Qsj:()=>WE,QtT:()=>db,R0b:()=>_c,RDi:()=>Cg,Rgc:()=>Dm,SBq:()=>Gc,SDv:()=>Ev,Sil:()=>Ji,Suo:()=>YT,TTD:()=>Ne,TgZ:()=>bp,Tol:()=>Mn,Udp:()=>qe,VKq:()=>Op,W1O:()=>Aw,WLB:()=>UT,X6Q:()=>zp,XFs:()=>At,Xpm:()=>Ha,Xts:()=>Ag,Y36:()=>Hh,YKP:()=>Fs,YNc:()=>q_,Yjl:()=>ha,Yz7:()=>tn,Z0I:()=>qn,ZZ4:()=>eD,_Bn:()=>pb,_UZ:()=>um,_Vd:()=>Si,_c5:()=>br,_uU:()=>pm,aQg:()=>Ul,c2e:()=>UI,cJS:()=>Mr,cg1:()=>P,dDg:()=>_1,dqk:()=>dn,eFA:()=>Zw,ekj:()=>Jc,eoX:()=>ai,f3M:()=>ct,g9A:()=>u1,h0i:()=>cf,hGG:()=>Vm,hij:()=>rf,iGM:()=>ZT,ifc:()=>be,ip1:()=>Gw,jDz:()=>FT,kEZ:()=>$T,kL8:()=>q,lG2:()=>Ho,lcZ:()=>Tb,lqb:()=>Vi,lri:()=>En,n5z:()=>dh,oAB:()=>Gi,oxw:()=>Pl,pQV:()=>Cv,q4F:()=>ro,qLn:()=>go,qOj:()=>pp,qZA:()=>Ep,rWj:()=>Gp,s9C:()=>zc,sBO:()=>Su,sIi:()=>Od,s_b:()=>Pp,soG:()=>Yi,tb:()=>qw,tp0:()=>k,uIk:()=>sm,vHH:()=>Z,vpe:()=>Du,wAp:()=>Se,xp6:()=>w_,ynx:()=>sa,z2F:()=>Gb,zSh:()=>pu,zs3:()=>ra});var O=F(7579),H=F(727),U=F(9751),ce=F(6451),fe=F(3099);function d(o){for(let u in o)if(o[u]===d)return u;throw Error("Could not find renamed property on target object.")}function je(o,u){for(const l in u)u.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=u[l])}function K(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(K).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const u=o.toString();if(null==u)return""+u;const l=u.indexOf("\n");return-1===l?u:u.substring(0,l)}function J(o,u){return null==o||""===o?null===u?"":u:null==u||""===u?o:o+" "+u}const Y=d({__forward_ref__:d});function ee(o){return o.__forward_ref__=ee,o.toString=function(){return K(this())},o}function pe(o){return Qe(o)?o():o}function Qe(o){return"function"==typeof o&&o.hasOwnProperty(Y)&&o.__forward_ref__===ee}function Ce(o){return o&&!!o.\u0275providers}const st="https://g.co/ng/security#xss";class Z extends Error{constructor(u,l){super(function X(o,u){return`NG0${Math.abs(o)}${u?": "+u.trim():""}`}(u,l)),this.code=u}}function he(o){return"string"==typeof o?o:null==o?"":String(o)}function Ke(o,u){throw new Z(-201,!1)}function Mt(o,u,l,g){throw new Error(`ASSERTION ERROR: ${o}`+(null==g?"":` [Expected=> ${l} ${g} ${u} <=Actual]`))}function tn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Mr(o){return{providers:o.providers||[],imports:o.imports||[]}}function nr(o){return cr(o,es)||cr(o,$n)}function qn(o){return null!==nr(o)}function cr(o,u){return o.hasOwnProperty(u)?o[u]:null}function lr(o){return o&&(o.hasOwnProperty(ts)||o.hasOwnProperty(jr))?o[ts]:null}const es=d({\u0275prov:d}),ts=d({\u0275inj:d}),$n=d({ngInjectableDef:d}),jr=d({ngInjectorDef:d});var At=(()=>((At=At||{})[At.Default=0]="Default",At[At.Host=1]="Host",At[At.Self=2]="Self",At[At.SkipSelf=4]="SkipSelf",At[At.Optional=8]="Optional",At))();let ci;function pn(o){const u=ci;return ci=o,u}function li(o,u,l){const g=nr(o);return g&&"root"==g.providedIn?void 0===g.value?g.value=g.factory():g.value:l&At.Optional?null:void 0!==u?u:void Ke(K(o))}const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ci={},Sn="__NG_DI_FLAG__",qt="ngTempTokenPath",Hs=/\n/gm,Yr="__source";let ir;function Kn(o){const u=ir;return ir=o,u}function gn(o,u=At.Default){if(void 0===ir)throw new Z(-203,!1);return null===ir?li(o,void 0,u):ir.get(o,u&At.Optional?null:void 0,u)}function Xe(o,u=At.Default){return(function zn(){return ci}()||gn)(pe(o),u)}function ct(o,u=At.Default){return Xe(o,nn(u))}function nn(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Kt(o){const u=[];for(let l=0;l<o.length;l++){const g=pe(o[l]);if(Array.isArray(g)){if(0===g.length)throw new Z(900,!1);let m,y=At.Default;for(let T=0;T<g.length;T++){const A=g[T],R=ge(A);"number"==typeof R?-1===R?m=A.token:y|=R:m=A}u.push(Xe(m,y))}else u.push(Xe(g))}return u}function ln(o,u){return o[Sn]=u,o.prototype[Sn]=u,o}function ge(o){return o[Sn]}function oe(o){return{toString:o}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),be=(()=>{return(o=be||(be={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",be;var o})();const Lt={},vt=[],en=d({\u0275cmp:d}),yt=d({\u0275dir:d}),Gn=d({\u0275pipe:d}),Rr=d({\u0275mod:d}),dt=d({\u0275fac:d}),Hr=d({__NG_ELEMENT_ID__:d});let Co=0;function Ha(o){return oe(()=>{const l=!0===o.standalone,g={},m={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:g,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||vt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||be.Emulated,id:"c"+Co++,styles:o.styles||vt,_:null,setInput:null,schemas:o.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},y=o.dependencies,T=o.features;return m.inputs=Cc(o.inputs,g),m.outputs=Cc(o.outputs),T&&T.forEach(A=>A(m)),m.directiveDefs=y?()=>("function"==typeof y?y():y).map(da).filter(mr):null,m.pipeDefs=y?()=>("function"==typeof y?y():y).map(Mi).filter(mr):null,m})}function da(o){return jn(o)||_r(o)}function mr(o){return null!==o}function Gi(o){return oe(()=>({type:o.type,bootstrap:o.bootstrap||vt,declarations:o.declarations||vt,imports:o.imports||vt,exports:o.exports||vt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Cc(o,u){if(null==o)return Lt;const l={};for(const g in o)if(o.hasOwnProperty(g)){let m=o[g],y=m;Array.isArray(m)&&(y=m[1],m=m[0]),l[m]=g,u&&(u[m]=y)}return l}const Ho=Ha;function ha(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function jn(o){return o[en]||null}function _r(o){return o[yt]||null}function Mi(o){return o[Gn]||null}function Cr(o){const u=jn(o)||_r(o)||Mi(o);return null!==u&&u.standalone}function Jr(o,u){const l=o[Rr]||null;if(!l&&!0===u)throw new Error(`Type ${K(o)} does not have '\u0275mod' property.`);return l}function is(o){return Array.isArray(o)&&"object"==typeof o[1]}function on(o){return Array.isArray(o)&&!0===o[1]}function gt(o){return 0!=(4&o.flags)}function wc(o){return o.componentOffset>-1}function ei(o){return 1==(1&o.flags)}function Pr(o){return null!==o.template}function yn(o){return 0!=(256&o[2])}function ma(o,u){return o.hasOwnProperty(dt)?o[dt]:null}class _a{constructor(u,l,g){this.previousValue=u,this.currentValue=l,this.firstChange=g}isFirstChange(){return this.firstChange}}function Ne(){return ae}function ae(o){return o.type.prototype.ngOnChanges&&(o.setInput=Tc),Jl}function Jl(){const o=Sc(this),u=o?.current;if(u){const l=o.previous;if(l===Lt)o.previous=u;else for(let g in u)l[g]=u[g];o.current=null,this.ngOnChanges(u)}}function Tc(o,u,l,g){const m=this.declaredInputs[l],y=Sc(o)||function Ka(o,u){return o[Lu]=u}(o,{previous:Lt,current:null}),T=y.current||(y.current={}),A=y.previous,R=A[m];T[m]=new _a(R&&R.currentValue,u,A===Lt),o[g]=u}Ne.ngInherit=!0;const Lu="__ngSimpleChanges__";function Sc(o){return o[Lu]||null}function Lr(o){for(;Array.isArray(o);)o=o[0];return o}function ya(o,u){return Lr(u[o])}function qr(o,u){return Lr(u[o.index])}function Ja(o,u){return o.data[u]}function ss(o,u){return o[u]}function ni(o,u){const l=u[o];return is(l)?l:l[0]}function Vu(o){return 64==(64&o[2])}function zs(o,u){return null==u?null:o[u]}function Ql(o){o[18]=0}function ba(o,u){o[5]+=u;let l=o,g=o[3];for(;null!==g&&(1===u&&1===l[5]||-1===u&&0===l[5]);)g[5]+=u,l=g,g=g[3]}const Gt={lFrame:Ic(null),bindingsEnabled:!0};function Ss(){return Gt.bindingsEnabled}function tt(){return Gt.lFrame.lView}function kn(){return Gt.lFrame.tView}function ih(o){return Gt.lFrame.contextLView=o,o[8]}function Br(o){return Gt.lFrame.contextLView=null,o}function ri(){let o=ed();for(;null!==o&&64===o.type;)o=o.parent;return o}function ed(){return Gt.lFrame.currentTNode}function Uu(){const o=Gt.lFrame,u=o.currentTNode;return o.isParent?u:u.parent}function So(o,u){const l=Gt.lFrame;l.currentTNode=o,l.isParent=u}function Ko(){return Gt.lFrame.isParent}function cl(){Gt.lFrame.isParent=!1}function ii(){const o=Gt.lFrame;let u=o.bindingRootIndex;return-1===u&&(u=o.bindingRootIndex=o.tView.bindingStartIndex),u}function Tr(){return Gt.lFrame.bindingIndex}function uo(){return Gt.lFrame.bindingIndex++}function co(o){const u=Gt.lFrame,l=u.bindingIndex;return u.bindingIndex=u.bindingIndex+o,l}function td(o){Gt.lFrame.inI18n=o}function ah(o,u){const l=Gt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Vr(u)}function Vr(o){Gt.lFrame.currentDirectiveIndex=o}function Zo(){return Gt.lFrame.currentQueryIndex}function Ks(o){Gt.lFrame.currentQueryIndex=o}function Zs(o){const u=o[1];return 2===u.type?u.declTNode:1===u.type?o[6]:null}function ju(o,u,l){if(l&At.SkipSelf){let m=u,y=o;for(;!(m=m.parent,null!==m||l&At.Host||(m=Zs(y),null===m||(y=y[15],10&m.type))););if(null===m)return!1;u=m,o=y}const g=Gt.lFrame=Ca();return g.currentTNode=u,g.lView=o,!0}function Hu(o){const u=Ca(),l=o[1];Gt.lFrame=u,u.currentTNode=l.firstChild,u.lView=o,u.tView=l,u.contextLView=o,u.bindingIndex=l.bindingStartIndex,u.inI18n=!1}function Ca(){const o=Gt.lFrame,u=null===o?null:o.child;return null===u?Ic(o):u}function Ic(o){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=u),u}function Xm(){const o=Gt.lFrame;return Gt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Sf=Xm;function sg(){const o=Xm();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function as(){return Gt.lFrame.selectedIndex}function Yo(o){Gt.lFrame.selectedIndex=o}function Jn(){const o=Gt.lFrame;return Ja(o.tView,o.selectedIndex)}function xc(o,u){for(let l=u.directiveStart,g=u.directiveEnd;l<g;l++){const y=o.data[l].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:A,ngAfterViewInit:R,ngAfterViewChecked:B,ngOnDestroy:G}=y;T&&(o.contentHooks||(o.contentHooks=[])).push(-l,T),A&&((o.contentHooks||(o.contentHooks=[])).push(l,A),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,A)),R&&(o.viewHooks||(o.viewHooks=[])).push(-l,R),B&&((o.viewHooks||(o.viewHooks=[])).push(l,B),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,B)),null!=G&&(o.destroyHooks||(o.destroyHooks=[])).push(l,G)}}function wa(o,u,l){Gu(o,u,3,l)}function Xa(o,u,l,g){(3&o[2])===l&&Gu(o,u,l,g)}function Nc(o,u){let l=o[2];(3&l)===u&&(l&=2047,l+=1,o[2]=l)}function Gu(o,u,l,g){const y=g??-1,T=u.length-1;let A=0;for(let R=void 0!==g?65535&o[18]:0;R<T;R++)if("number"==typeof u[R+1]){if(A=u[R],null!=g&&A>=g)break}else u[R]<0&&(o[18]+=65536),(A<y||-1==y)&&(eu(o,l,u,R),o[18]=(4294901760&o[18])+R+2),R++}function eu(o,u,l,g){const m=l[g]<0,y=l[g+1],A=o[m?-l[g]:l[g]];if(m){if(o[2]>>11<o[18]>>16&&(3&o[2])===u){o[2]+=2048;try{y.call(A)}finally{}}}else try{y.call(A)}finally{}}class dl{constructor(u,l,g){this.factory=u,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=g}}function Da(o,u,l){let g=0;for(;g<l.length;){const m=l[g];if("number"==typeof m){if(0!==m)break;g++;const y=l[g++],T=l[g++],A=l[g++];o.setAttribute(u,T,A,y)}else{const y=m,T=l[++g];fl(y)?o.setProperty(u,y,T):o.setAttribute(u,y,T),g++}}return g}function nu(o){return 3===o||4===o||6===o}function fl(o){return 64===o.charCodeAt(0)}function us(o,u){if(null!==u&&0!==u.length)if(null===o||0===o.length)o=u.slice();else{let l=-1;for(let g=0;g<u.length;g++){const m=u[g];"number"==typeof m?l=m:0===l||pl(o,l,m,null,-1===l||2===l?u[++g]:null)}}return o}function pl(o,u,l,g,m){let y=0,T=o.length;if(-1===u)T=-1;else for(;y<o.length;){const A=o[y++];if("number"==typeof A){if(A===u){T=-1;break}if(A>u){T=y-1;break}}}for(;y<o.length;){const A=o[y];if("number"==typeof A)break;if(A===l){if(null===g)return void(null!==m&&(o[y+1]=m));if(g===o[y+1])return void(o[y+2]=m)}y++,null!==g&&y++,null!==m&&y++}-1!==T&&(o.splice(T,0,u),y=T+1),o.splice(y++,0,l),null!==g&&o.splice(y++,0,g),null!==m&&o.splice(y++,0,m)}function Ta(o){return-1!==o}function Ao(o){return 32767&o}function Sa(o,u){let l=function gl(o){return o>>16}(o),g=u;for(;l>0;)g=g[15],l--;return g}let ru=!0;function lo(o){const u=ru;return ru=o,u}let qu=0;const cs={};function ls(o,u){const l=ml(o,u);if(-1!==l)return l;const g=u[1];g.firstCreatePass&&(o.injectorIndex=u.length,iu(g.data,o),iu(u,null),iu(g.blueprint,null));const m=kc(o,u),y=o.injectorIndex;if(Ta(m)){const T=Ao(m),A=Sa(m,u),R=A[1].data;for(let B=0;B<8;B++)u[y+B]=A[T+B]|R[T+B]}return u[y+8]=m,y}function iu(o,u){o.push(0,0,0,0,0,0,0,0,u)}function ml(o,u){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===u[o.injectorIndex+8]?-1:o.injectorIndex}function kc(o,u){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,g=null,m=u;for(;null!==m;){if(g=Ur(m),null===g)return-1;if(l++,m=m[15],-1!==g.injectorIndex)return g.injectorIndex|l<<16}return-1}function _l(o,u,l){!function Oc(o,u,l){let g;"string"==typeof l?g=l.charCodeAt(0)||0:l.hasOwnProperty(Hr)&&(g=l[Hr]),null==g&&(g=l[Hr]=qu++);const m=255&g;u.data[o+(m>>5)]|=1<<m}(o,u,l)}function Wu(o,u,l){if(l&At.Optional||void 0!==o)return o;Ke()}function Pc(o,u,l,g){if(l&At.Optional&&void 0===g&&(g=null),0==(l&(At.Self|At.Host))){const m=o[9],y=pn(void 0);try{return m?m.get(u,g,l&At.Optional):li(u,g,l&At.Optional)}finally{pn(y)}}return Wu(g,0,l)}function lh(o,u,l,g=At.Default,m){if(null!==o){if(1024&u[2]){const T=function ug(o,u,l,g,m){let y=o,T=u;for(;null!==y&&null!==T&&1024&T[2]&&!(256&T[2]);){const A=Ys(y,T,l,g|At.Self,cs);if(A!==cs)return A;let R=y.parent;if(!R){const B=T[21];if(B){const G=B.get(l,cs,g);if(G!==cs)return G}R=Ur(T),T=T[15]}y=R}return m}(o,u,l,g,cs);if(T!==cs)return T}const y=Ys(o,u,l,g,cs);if(y!==cs)return y}return Pc(u,l,g,m)}function Ys(o,u,l,g,m){const y=function su(o){if("string"==typeof o)return o.charCodeAt(0)||0;const u=o.hasOwnProperty(Hr)?o[Hr]:void 0;return"number"==typeof u?u>=0?255&u:rd:u}(l);if("function"==typeof y){if(!ju(u,o,g))return g&At.Host?Wu(m,0,g):Pc(u,l,g,m);try{const T=y(g);if(null!=T||g&At.Optional)return T;Ke()}finally{Sf()}}else if("number"==typeof y){let T=null,A=ml(o,u),R=-1,B=g&At.Host?u[16][6]:null;for((-1===A||g&At.SkipSelf)&&(R=-1===A?kc(o,u):u[A+8],-1!==R&&ki(g,!1)?(T=u[1],A=Ao(R),u=Sa(R,u)):A=-1);-1!==A;){const G=u[1];if(Fc(y,A,G.data)){const te=nd(A,u,l,T,g,B);if(te!==cs)return te}R=u[A+8],-1!==R&&ki(g,u[1].data[A+8]===B)&&Fc(y,A,u)?(T=G,A=Ao(R),u=Sa(R,u)):A=-1}}return m}function nd(o,u,l,g,m,y){const T=u[1],A=T.data[o+8],G=Ia(A,T,l,null==g?wc(A)&&ru:g!=T&&0!=(3&A.type),m&At.Host&&y===A);return null!==G?xo(u,T,G,A):cs}function Ia(o,u,l,g,m){const y=o.providerIndexes,T=u.data,A=1048575&y,R=o.directiveStart,G=y>>20,Ee=m?A+G:o.directiveEnd;for(let Ae=g?A:A+G;Ae<Ee;Ae++){const Je=T[Ae];if(Ae<R&&l===Je||Ae>=R&&Je.type===l)return Ae}if(m){const Ae=T[R];if(Ae&&Pr(Ae)&&Ae.type===l)return R}return null}function xo(o,u,l,g){let m=o[l];const y=u.data;if(function Di(o){return o instanceof dl}(m)){const T=m;T.resolving&&function me(o,u){const l=u?`. Dependency path: ${u.join(" > ")} > ${o}`:"";throw new Z(-200,`Circular dependency in DI detected for ${o}${l}`)}(function ie(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():he(o)}(y[l]));const A=lo(T.canSeeViewProviders);T.resolving=!0;const R=T.injectImpl?pn(T.injectImpl):null;ju(o,g,At.Default);try{m=o[l]=T.factory(void 0,y,o,g),u.firstCreatePass&&l>=g.directiveStart&&function Nn(o,u,l){const{ngOnChanges:g,ngOnInit:m,ngDoCheck:y}=u.type.prototype;if(g){const T=ae(u);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,T),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,T)}m&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,m),y&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,y))}(l,y[l],u)}finally{null!==R&&pn(R),lo(A),T.resolving=!1,Sf()}}return m}function Fc(o,u,l){return!!(l[u+(o>>5)]&1<<o)}function ki(o,u){return!(o&At.Self||o&At.Host&&u)}class si{constructor(u,l){this._tNode=u,this._lView=l}get(u,l,g){return lh(this._tNode,this._lView,u,nn(g),l)}}function rd(){return new si(ri(),tt())}function dh(o){return oe(()=>{const u=o.prototype.constructor,l=u[dt]||Aa(u),g=Object.prototype;let m=Object.getPrototypeOf(o.prototype).constructor;for(;m&&m!==g;){const y=m[dt]||Aa(m);if(y&&y!==l)return y;m=Object.getPrototypeOf(m)}return y=>new y})}function Aa(o){return Qe(o)?()=>{const u=Aa(pe(o));return u&&u()}:ma(o)}function Ur(o){const u=o[1],l=u.type;return 2===l?u.declTNode:1===l?o[6]:null}function vl(o){return function ds(o,u){if("class"===u)return o.classes;if("style"===u)return o.styles;const l=o.attrs;if(l){const g=l.length;let m=0;for(;m<g;){const y=l[m];if(nu(y))break;if(0===y)m+=2;else if("number"==typeof y)for(m++;m<g&&"string"==typeof l[m];)m++;else{if(y===u)return l[m+1];m+=2}}}return null}(ri(),o)}const xa="__parameters__";function Ku(o,u,l){return oe(()=>{const g=function fh(o){return function(...l){if(o){const g=o(...l);for(const m in g)this[m]=g[m]}}}(u);function m(...y){if(this instanceof m)return g.apply(this,y),this;const T=new m(...y);return A.annotation=T,A;function A(R,B,G){const te=R.hasOwnProperty(xa)?R[xa]:Object.defineProperty(R,xa,{value:[]})[xa];for(;te.length<=G;)te.push(null);return(te[G]=te[G]||[]).push(T),R}}return l&&(m.prototype=Object.create(l.prototype)),m.prototype.ngMetadataName=o,m.annotationCls=m,m})}class Hn{constructor(u,l){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=tn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Is(o,u){o.forEach(l=>Array.isArray(l)?Is(l,u):u(l))}function Zu(o,u,l){u>=o.length?o.push(l):o.splice(u,0,l)}function No(o,u){return u>=o.length-1?o.pop():o.splice(u,1)[0]}function Na(o,u){const l=[];for(let g=0;g<o;g++)l.push(u);return l}function Sr(o,u,l){let g=Ir(o,u);return g>=0?o[1|g]=l:(g=~g,function gh(o,u,l,g){let m=o.length;if(m==u)o.push(l,g);else if(1===m)o.push(g,o[0]),o[0]=l;else{for(m--,o.push(o[m-1],o[m]);m>u;)o[m]=o[m-2],m--;o[u]=l,o[u+1]=g}}(o,g,u,l)),g}function ea(o,u){const l=Ir(o,u);if(l>=0)return o[1|l]}function Ir(o,u){return function Ju(o,u,l){let g=0,m=o.length>>l;for(;m!==g;){const y=g+(m-g>>1),T=o[y<<l];if(u===T)return y<<l;T>u?m=y:g=y+1}return~(m<<l)}(o,u,1)}const Pi=ln(Ku("Optional"),8),k=ln(Ku("SkipSelf"),4);var ta=(()=>((ta=ta||{})[ta.Important=1]="Important",ta[ta.DashCase=2]="DashCase",ta))();const gg=/^>|^->|<!--|-->|--!>|<!-$/g,bh=/(<|>)/;const Ch=new Map;let fd=0;const Cl="__ngContext__";function Ki(o,u){is(u)?(o[Cl]=u[20],function cu(o){Ch.set(o[20],o)}(u)):o[Cl]=u}let Me;function et(o,u){return Me(o,u)}function Ut(o){const u=o[3];return on(u)?u[3]:u}function gi(o){return Oa(o[13])}function pr(o){return Oa(o[4])}function Oa(o){for(;null!==o&&!on(o);)o=o[4];return o}function du(o,u,l,g,m){if(null!=g){let y,T=!1;on(g)?y=g:is(g)&&(T=!0,g=g[0]);const A=Lr(g);0===o&&null!==l?null==m?vd(u,l,A):oc(u,l,A,m||null,!0):1===o&&null!==l?oc(u,l,A,m||null,!0):2===o?Of(u,A,T):3===o&&u.destroyNode(A),null!=y&&function jc(o,u,l,g,m){const y=l[7];y!==Lr(l)&&du(u,o,g,y,m);for(let A=10;A<l.length;A++){const R=l[A];Pf(R[1],R,o,u,g,y)}}(u,o,y,l,m)}}function oi(o,u){return o.createText(u)}function Ro(o,u,l){o.setValue(u,l)}function po(o,u){return o.createComment(function hd(o){return o.replace(gg,u=>u.replace(bh,"\u200b$1\u200b"))}(u))}function rc(o,u,l){return o.createElement(u,l)}function n_(o,u){const l=o[9],g=l.indexOf(u),m=u[3];512&u[2]&&(u[2]&=-513,ba(m,-1)),l.splice(g,1)}function md(o,u){if(o.length<=10)return;const l=10+u,g=o[l];if(g){const m=g[17];null!==m&&m!==o&&n_(m,g),u>0&&(o[l-1][4]=g[4]);const y=No(o,10+u);!function pd(o,u){Pf(o,u,u[11],2,null,null),u[0]=null,u[6]=null}(g[1],g);const T=y[19];null!==T&&T.detachView(y[1]),g[3]=null,g[4]=null,g[2]&=-65}return g}function _g(o,u){if(!(128&u[2])){const l=u[11];l.destroyNode&&Pf(o,u,l,3,null,null),function na(o){let u=o[13];if(!u)return Th(o[1],o);for(;u;){let l=null;if(is(u))l=u[13];else{const g=u[10];g&&(l=g)}if(!l){for(;u&&!u[4]&&u!==o;)is(u)&&Th(u[1],u),u=u[3];null===u&&(u=o),is(u)&&Th(u[1],u),l=u&&u[4]}u=l}}(u)}}function Th(o,u){if(!(128&u[2])){u[2]&=-65,u[2]|=128,function xs(o,u){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let g=0;g<l.length;g+=2){const m=u[l[g]];if(!(m instanceof dl)){const y=l[g+1];if(Array.isArray(y))for(let T=0;T<y.length;T+=2){const A=m[y[T]],R=y[T+1];try{R.call(A)}finally{}}else try{y.call(m)}finally{}}}}(o,u),function _d(o,u){const l=o.cleanup,g=u[7];let m=-1;if(null!==l)for(let y=0;y<l.length-1;y+=2)if("string"==typeof l[y]){const T=l[y+3];T>=0?g[m=T]():g[m=-T].unsubscribe(),y+=2}else{const T=g[m=l[y+1]];l[y].call(T)}if(null!==g){for(let y=m+1;y<g.length;y++)(0,g[y])();u[7]=null}}(o,u),1===u[1].type&&u[11].destroy();const l=u[17];if(null!==l&&on(u[3])){l!==u[3]&&n_(l,u);const g=u[19];null!==g&&g.detachView(o)}!function mg(o){Ch.delete(o[20])}(u)}}function Sh(o,u,l){return vy(o,u.parent,l)}function vy(o,u,l){let g=u;for(;null!==g&&40&g.type;)g=(u=g).parent;if(null===g)return l[0];{const{componentOffset:m}=g;if(m>-1){const{encapsulation:y}=o.data[g.directiveStart+m];if(y===be.None||y===be.Emulated)return null}return qr(g,l)}}function oc(o,u,l,g,m){o.insertBefore(u,l,g,m)}function vd(o,u,l){o.appendChild(u,l)}function yy(o,u,l,g,m){null!==g?oc(o,u,l,g,m):vd(o,u,l)}function Rf(o,u){return o.parentNode(u)}function r_(o,u,l){return vg(o,u,l)}function BE(o,u,l){return 40&o.type?qr(o,l):null}let Ih,Eg,Bf,hu,vg=BE;function VE(o,u){vg=o,Ih=u}function Ln(o,u,l,g){const m=Sh(o,g,u),y=u[11],A=r_(g.parent||u[6],g,u);if(null!=m)if(Array.isArray(l))for(let R=0;R<l.length;R++)yy(y,m,l[R],A,!1);else yy(y,m,l,A,!1);void 0!==Ih&&Ih(y,g,u,l,m)}function Ah(o,u){if(null!==u){const l=u.type;if(3&l)return qr(u,o);if(4&l)return gs(-1,o[u.index]);if(8&l){const g=u.child;if(null!==g)return Ah(o,g);{const m=o[u.index];return on(m)?gs(-1,m):Lr(m)}}if(32&l)return et(u,o)()||Lr(o[u.index]);{const g=i_(o,u);return null!==g?Array.isArray(g)?g[0]:Ah(Ut(o[16]),g):Ah(o,u.next)}}return null}function i_(o,u){return null!==u?o[16][6].projection[u.projection]:null}function gs(o,u){const l=10+o+1;if(l<u.length){const g=u[l],m=g[1].firstChild;if(null!==m)return Ah(g,m)}return u[7]}function Of(o,u,l){const g=Rf(o,u);g&&function FE(o,u,l,g){o.removeChild(u,l,g)}(o,g,u,l)}function kf(o,u,l,g,m,y,T){for(;null!=l;){const A=g[l.index],R=l.type;if(T&&0===u&&(A&&Ki(Lr(A),g),l.flags|=2),32!=(32&l.flags))if(8&R)kf(o,u,l.child,g,m,y,!1),du(u,o,m,A,y);else if(32&R){const B=et(l,g);let G;for(;G=B();)du(u,o,m,G,y);du(u,o,m,A,y)}else 16&R?xh(o,u,g,l,m,y):du(u,o,m,A,y);l=T?l.projectionNext:l.next}}function Pf(o,u,l,g,m,y){kf(l,g,o.firstChild,u,m,y,!1)}function xh(o,u,l,g,m,y){const T=l[16],R=T[6].projection[g.projection];if(Array.isArray(R))for(let B=0;B<R.length;B++)du(u,o,m,R[B],y);else kf(o,u,R,T[3],m,y,!0)}function yg(o,u,l){""===l?o.removeAttribute(u,"class"):o.setAttribute(u,"class",l)}function bg(o,u,l){const{mergedAttrs:g,classes:m,styles:y}=l;null!==g&&Da(o,u,g),null!==m&&yg(o,u,m),null!==y&&function Ff(o,u,l){o.setAttribute(u,"style",l)}(o,u,y)}function Nh(o){return function Lf(){if(void 0===Eg&&(Eg=null,dn.trustedTypes))try{Eg=dn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Eg}()?.createHTML(o)||o}function Cg(o){Bf=o}function Dl(o){return function wl(){if(void 0===hu&&(hu=null,dn.trustedTypes))try{hu=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return hu}()?.createScriptURL(o)||o}class Cy{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${st})`}}function Hc(o){return o instanceof Cy?o.changingThisBreaksApplicationSecurity:o}function Uf(o,u){const l=function Iy(o){return o instanceof Cy&&o.getTypeName()||null}(o);if(null!=l&&l!==u){if("ResourceURL"===l&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${l} (see ${st})`)}return l===u}class o_{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const l=(new window.DOMParser).parseFromString(Nh(u),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(u):(l.removeChild(l.firstChild),l)}catch{return null}}}class My{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const g=this.inertDocument.createElement("body");l.appendChild(g)}}getInertBodyElement(u){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Nh(u),l;const g=this.inertDocument.createElement("body");return g.innerHTML=Nh(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(g),g}stripCustomNsAttrs(u){const l=u.attributes;for(let m=l.length-1;0<m;m--){const T=l.item(m).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&u.removeAttribute(T)}let g=u.firstChild;for(;g;)g.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(g),g=g.nextSibling}}const $E=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Dg(o){return(o=String(o)).match($E)?o:"unsafe:"+o}function fu(o){const u={};for(const l of o.split(","))u[l]=!0;return u}function ac(...o){const u={};for(const l of o)for(const g in l)l.hasOwnProperty(g)&&(u[g]=!0);return u}const Oy=fu("area,br,col,hr,img,wbr"),ky=fu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a_=fu("rp,rt"),c_=ac(Oy,ac(ky,fu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ac(a_,fu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ac(a_,ky)),Tg=fu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),l_=ac(Tg,fu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Ti=(()=>((Ti=Ti||{})[Ti.NONE=0]="NONE",Ti[Ti.HTML=1]="HTML",Ti[Ti.STYLE=2]="STYLE",Ti[Ti.SCRIPT=3]="SCRIPT",Ti[Ti.URL=4]="URL",Ti[Ti.RESOURCE_URL=5]="RESOURCE_URL",Ti))();function Hf(o){const u=Gf();return u?u.sanitize(Ti.URL,o)||"":Uf(o,"URL")?Hc(o):Dg(he(o))}function cc(o){const u=Gf();if(u)return Dl(u.sanitize(Ti.RESOURCE_URL,o)||"");if(Uf(o,"ResourceURL"))return Dl(Hc(o));throw new Z(904,!1)}function Ig(o,u,l){return function mT(o,u){return"src"===u&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===u&&("base"===o||"link"===o)?cc:Hf}(u,l)(o)}function Gf(){const o=tt();return o&&o[12]}const Ag=new Hn("ENVIRONMENT_INITIALIZER"),By=new Hn("INJECTOR",-1),g_=new Hn("INJECTOR_DEF_TYPES");class vT{get(u,l=Ci){if(l===Ci){const g=new Error(`NullInjectorError: No provider for ${K(u)}!`);throw g.name="NullInjectorError",g}return l}}function yT(...o){return{\u0275providers:qE(0,o),\u0275fromNgModule:!0}}function qE(o,...u){const l=[],g=new Set;let m;return Is(u,y=>{const T=y;Bi(T,l,[],g)&&(m||(m=[]),m.push(T))}),void 0!==m&&Zt(m,l),l}function Zt(o,u){for(let l=0;l<o.length;l++){const{providers:m}=o[l];m_(m,y=>{u.push(y)})}}function Bi(o,u,l,g){if(!(o=pe(o)))return!1;let m=null,y=lr(o);const T=!y&&jn(o);if(y||T){if(T&&!T.standalone)return!1;m=o}else{const R=o.ngModule;if(y=lr(R),!y)return!1;m=R}const A=g.has(m);if(T){if(A)return!1;if(g.add(m),T.dependencies){const R="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const B of R)Bi(B,u,l,g)}}else{if(!y)return!1;{if(null!=y.imports&&!A){let B;g.add(m);try{Is(y.imports,G=>{Bi(G,u,l,g)&&(B||(B=[]),B.push(G))})}finally{}void 0!==B&&Zt(B,u)}if(!A){const B=ma(m)||(()=>new m);u.push({provide:m,useFactory:B,deps:vt},{provide:g_,useValue:m,multi:!0},{provide:Ag,useValue:()=>Xe(m),multi:!0})}const R=y.providers;null==R||A||m_(R,G=>{u.push(G)})}}return m!==o&&void 0!==o.providers}function m_(o,u){for(let l of o)Ce(l)&&(l=l.\u0275providers),Array.isArray(l)?m_(l,u):u(l)}const qf=d({provide:String,useValue:d});function ms(o){return null!==o&&"object"==typeof o&&qf in o}function Ed(o){return"function"==typeof o}const pu=new Hn("Set Injector scope."),Tl={},kh={};let Cd;function Sl(){return void 0===Cd&&(Cd=new vT),Cd}class Vi{}class wn extends Vi{constructor(u,l,g,m){super(),this.parent=l,this.source=g,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mi(u,T=>this.processProvider(T)),this.records.set(By,wd(void 0,this)),m.has("environment")&&this.records.set(Vi,wd(void 0,this));const y=this.records.get(pu);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(g_.multi,vt,At.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();for(const u of this._onDestroyHooks)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(u){this._onDestroyHooks.push(u)}runInContext(u){this.assertNotDestroyed();const l=Kn(this),g=pn(void 0);try{return u()}finally{Kn(l),pn(g)}}get(u,l=Ci,g=At.Default){this.assertNotDestroyed(),g=nn(g);const m=Kn(this),y=pn(void 0);try{if(!(g&At.SkipSelf)){let A=this.records.get(u);if(void 0===A){const R=function gu(o){return"function"==typeof o||"object"==typeof o&&o instanceof Hn}(u)&&nr(u);A=R&&this.injectableDefInScope(R)?wd(lc(u),Tl):null,this.records.set(u,A)}if(null!=A)return this.hydrate(u,A)}return(g&At.Self?Sl():this.parent).get(u,l=g&At.Optional&&l===Ci?null:l)}catch(T){if("NullInjectorError"===T.name){if((T[qt]=T[qt]||[]).unshift(K(u)),m)throw T;return function le(o,u,l,g){const m=o[qt];throw u[Yr]&&m.unshift(u[Yr]),o.message=function ye(o,u,l,g=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let m=K(u);if(Array.isArray(u))m=u.map(K).join(" -> ");else if("object"==typeof u){let y=[];for(let T in u)if(u.hasOwnProperty(T)){let A=u[T];y.push(T+":"+("string"==typeof A?JSON.stringify(A):K(A)))}m=`{${y.join(", ")}}`}return`${l}${g?"("+g+")":""}[${m}]: ${o.replace(Hs,"\n  ")}`}("\n"+o.message,m,l,g),o.ngTokenPath=m,o[qt]=null,o}(T,u,"R3InjectorError",this.source)}throw T}finally{pn(y),Kn(m)}}resolveInjectorInitializers(){const u=Kn(this),l=pn(void 0);try{const g=this.get(Ag.multi,vt,At.Self);for(const m of g)m()}finally{Kn(u),pn(l)}}toString(){const u=[],l=this.records;for(const g of l.keys())u.push(K(g));return`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(u){let l=Ed(u=pe(u))?u:pe(u&&u.provide);const g=function Zi(o){return ms(o)?wd(void 0,o.useValue):wd(Ph(o),Tl)}(u);if(Ed(u)||!0!==u.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=wd(void 0,Tl,!0),m.factory=()=>Kt(m.multi),this.records.set(l,m)),l=u,m.multi.push(u)}this.records.set(l,g)}hydrate(u,l){return l.value===Tl&&(l.value=kh,l.value=l.factory()),"object"==typeof l.value&&l.value&&function no(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(u){if(!u.providedIn)return!1;const l=pe(u.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function lc(o){const u=nr(o),l=null!==u?u.factory:ma(o);if(null!==l)return l;if(o instanceof Hn)throw new Z(204,!1);if(o instanceof Function)return function zf(o){const u=o.length;if(u>0)throw Na(u,"?"),new Z(204,!1);const l=function Ei(o){const u=o&&(o[es]||o[$n]);if(u){const l=function ws(o){if(o.hasOwnProperty("name"))return o.name;const u=(""+o).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),u}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Z(204,!1)}function Ph(o,u,l){let g;if(Ed(o)){const m=pe(o);return ma(m)||lc(m)}if(ms(o))g=()=>pe(o.useValue);else if(function Wf(o){return!(!o||!o.useFactory)}(o))g=()=>o.useFactory(...Kt(o.deps||[]));else if(function Rh(o){return!(!o||!o.useExisting)}(o))g=()=>Xe(pe(o.useExisting));else{const m=pe(o&&(o.useClass||o.provide));if(!function Ui(o){return!!o.deps}(o))return ma(m)||lc(m);g=()=>new m(...Kt(o.deps))}return g}function wd(o,u,l=!1){return{factory:o,value:u,multi:l?[]:void 0}}function mi(o,u){for(const l of o)Array.isArray(l)?mi(l,u):l&&Ce(l)?mi(l.\u0275providers,u):u(l)}class Ms{}class mu{}class Il{resolveComponentFactory(u){throw function xg(o){const u=Error(`No component factory found for ${K(o)}. Did you add it to @NgModule.entryComponents?`);return u.ngComponent=o,u}(u)}}let Si=(()=>{class o{}return o.NULL=new Il,o})();function Al(){return Fh(ri(),tt())}function Fh(o,u){return new Gc(qr(o,u))}let Gc=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=Al,o})();function __(o){return o instanceof Gc?o.nativeElement:o}class Ng{}let WE=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Lh(){const o=tt(),l=ni(ri().index,o);return(is(l)?l:o)[11]}(),o})(),Bh=(()=>{class o{}return o.\u0275prov=tn({token:o,providedIn:"root",factory:()=>null}),o})();class In{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const ro=new In("15.0.4"),Dd={};function Mg(o){return o.ngOriginalError}class go{constructor(){this._console=console}handleError(u){const l=this._findOriginalError(u);this._console.error("ERROR",u),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(u){let l=u&&Mg(u);for(;l&&Mg(l);)l=Mg(l);return l||null}}function _u(o){return o instanceof Function?o():o}function Kf(o,u,l){let g=o.length;for(;;){const m=o.indexOf(u,l);if(-1===m)return m;if(0===m||o.charCodeAt(m-1)<=32){const y=u.length;if(m+y===g||o.charCodeAt(m+y)<=32)return m}l=m+1}}const Ml="ng-template";function Bn(o,u,l){let g=0;for(;g<o.length;){let m=o[g++];if(l&&"class"===m){if(m=o[g],-1!==Kf(m.toLowerCase(),u,0))return!0}else if(1===m){for(;g<o.length&&"string"==typeof(m=o[g++]);)if(m.toLowerCase()===u)return!0;return!1}}return!1}function Vh(o){return 4===o.type&&o.value!==Ml}function KE(o,u,l){return u===(4!==o.type||l?o.value:Ml)}function Sd(o,u,l){let g=4;const m=o.attrs||[],y=function Jf(o){for(let u=0;u<o.length;u++)if(nu(o[u]))return u;return o.length}(m);let T=!1;for(let A=0;A<u.length;A++){const R=u[A];if("number"!=typeof R){if(!T)if(4&g){if(g=2|1&g,""!==R&&!KE(o,R,l)||""===R&&1===u.length){if(ka(g))return!1;T=!0}}else{const B=8&g?R:u[++A];if(8&g&&null!==o.attrs){if(!Bn(o.attrs,B,l)){if(ka(g))return!1;T=!0}continue}const te=Zf(8&g?"class":R,m,Vh(o),l);if(-1===te){if(ka(g))return!1;T=!0;continue}if(""!==B){let Ee;Ee=te>y?"":m[te+1].toLowerCase();const Ae=8&g?Ee:null;if(Ae&&-1!==Kf(Ae,B,0)||2&g&&B!==Ee){if(ka(g))return!1;T=!0}}}}else{if(!T&&!ka(g)&&!ka(R))return!1;if(T&&ka(R))continue;T=!1,g=R|1&g}}return ka(g)||T}function ka(o){return 0==(1&o)}function Zf(o,u,l,g){if(null===u)return-1;let m=0;if(g||!l){let y=!1;for(;m<u.length;){const T=u[m];if(T===o)return m;if(3===T||6===T)y=!0;else{if(1===T||2===T){let A=u[++m];for(;"string"==typeof A;)A=u[++m];continue}if(4===T)break;if(0===T){m+=4;continue}}m+=y?1:2}return-1}return function Uh(o,u){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const g=o[l];if("number"==typeof g)return-1;if(g===u)return l;l++}return-1}(u,o)}function Yf(o,u,l=!1){for(let g=0;g<u.length;g++)if(Sd(o,u[g],l))return!0;return!1}function E_(o,u){e:for(let l=0;l<u.length;l++){const g=u[l];if(o.length===g.length){for(let m=0;m<o.length;m++)if(o[m]!==g[m])continue e;return!0}}return!1}function Qf(o,u){return o?":not("+u.trim()+")":u}function YE(o){let u=o[0],l=1,g=2,m="",y=!1;for(;l<o.length;){let T=o[l];if("string"==typeof T)if(2&g){const A=o[++l];m+="["+T+(A.length>0?'="'+A+'"':"")+"]"}else 8&g?m+="."+T:4&g&&(m+=" "+T);else""!==m&&!ka(T)&&(u+=Qf(y,m),m=""),g=T,y=y||!ka(g);l++}return""!==m&&(u+=Qf(y,m)),u}const mn={};function w_(o){JE(kn(),tt(),as()+o,!1)}function JE(o,u,l,g){if(!g)if(3==(3&u[2])){const y=o.preOrderCheckHooks;null!==y&&wa(u,y,l)}else{const y=o.preOrderHooks;null!==y&&Xa(u,y,0,l)}Yo(l)}function Xf(o,u=null,l=null,g){const m=zy(o,u,l,g);return m.resolveInjectorInitializers(),m}function zy(o,u=null,l=null,g,m=new Set){const y=[l||vt,yT(o)];return g=g||("object"==typeof o?void 0:K(o)),new wn(y,u||Sl(),g||null,m)}let ra=(()=>{class o{static create(l,g){if(Array.isArray(l))return Xf({name:""},g,l,"");{const m=l.name??"";return Xf({name:m},l.parent,l.providers,m)}}}return o.THROW_IF_NOT_FOUND=Ci,o.NULL=new vT,o.\u0275prov=tn({token:o,providedIn:"any",factory:()=>Xe(By)}),o.__NG_ELEMENT_ID__=-1,o})();function Hh(o,u=At.Default){const l=tt();return null===l?Xe(o,u):lh(ri(),l,pe(o),u)}function Xy(){throw new Error("invalid")}function N_(o,u){const l=o.contentQueries;if(null!==l)for(let g=0;g<l.length;g+=2){const m=l[g],y=l[g+1];if(-1!==y){const T=o.data[y];Ks(m),T.contentQueries(2,u[y],y)}}}function Hg(o,u,l,g,m,y,T,A,R,B,G){const te=u.blueprint.slice();return te[0]=m,te[2]=76|g,(null!==G||o&&1024&o[2])&&(te[2]|=1024),Ql(te),te[3]=te[15]=o,te[8]=l,te[10]=T||o&&o[10],te[11]=A||o&&o[11],te[12]=R||o&&o[12]||null,te[9]=B||o&&o[9]||null,te[6]=y,te[20]=function fs(){return fd++}(),te[21]=G,te[16]=2==u.type?o[16]:te,te}function Ad(o,u,l,g,m){let y=o.data[u];if(null===y)y=Gg(o,u,l,g,m),function $u(){return Gt.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=l,y.value=g,y.attrs=m;const T=Uu();y.injectorIndex=null===T?-1:T.injectorIndex}return So(y,!0),y}function Gg(o,u,l,g,m){const y=ed(),T=Ko(),R=o.data[u]=function aC(o,u,l,g,m,y){return{type:l,index:g,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?y:y&&y.parent,l,u,g,m);return null===o.firstChild&&(o.firstChild=R),null!==y&&(T?null==y.child&&null!==R.parent&&(y.child=R):null===y.next&&(y.next=R)),R}function np(o,u,l,g){if(0===l)return-1;const m=u.length;for(let y=0;y<l;y++)u.push(g),o.blueprint.push(g),o.data.push(null);return m}function t0(o,u,l){Hu(u);try{const g=o.viewQuery;null!==g&&hc(1,g,l);const m=o.template;null!==m&&oC(o,u,m,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&N_(o,u),o.staticViewQueries&&hc(2,o.viewQuery,l);const y=o.components;null!==y&&function sC(o,u){for(let l=0;l<u.length;l++)fC(o,u[l])}(u,y)}catch(g){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),g}finally{u[2]&=-5,sg()}}function qg(o,u,l,g){const m=u[2];if(128!=(128&m)){Hu(u);try{Ql(u),function oh(o){return Gt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&oC(o,u,l,2,g);const T=3==(3&m);if(T){const B=o.preOrderCheckHooks;null!==B&&wa(u,B,null)}else{const B=o.preOrderHooks;null!==B&&Xa(u,B,0,null),Nc(u,0)}if(function op(o){for(let u=gi(o);null!==u;u=pr(u)){if(!u[2])continue;const l=u[9];for(let g=0;g<l.length;g++){const m=l[g],y=m[3];0==(512&m[2])&&ba(y,1),m[2]|=512}}}(u),function hC(o){for(let u=gi(o);null!==u;u=pr(u))for(let l=10;l<u.length;l++){const g=u[l],m=g[1];Vu(g)&&qg(m,g,m.template,g[8])}}(u),null!==o.contentQueries&&N_(o,u),T){const B=o.contentCheckHooks;null!==B&&wa(u,B)}else{const B=o.contentHooks;null!==B&&Xa(u,B,1),Nc(u,1)}!function iC(o,u){const l=o.hostBindingOpCodes;if(null!==l)try{for(let g=0;g<l.length;g++){const m=l[g];if(m<0)Yo(~m);else{const y=m,T=l[++g],A=l[++g];ah(T,y),A(2,u[y])}}}finally{Yo(-1)}}(o,u);const A=o.components;null!==A&&function e0(o,u){for(let l=0;l<u.length;l++)B_(o,u[l])}(u,A);const R=o.viewQuery;if(null!==R&&hc(2,R,g),T){const B=o.viewCheckHooks;null!==B&&wa(u,B)}else{const B=o.viewHooks;null!==B&&Xa(u,B,2),Nc(u,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),u[2]&=-41,512&u[2]&&(u[2]&=-513,ba(u[3],-1))}finally{sg()}}}function oC(o,u,l,g,m){const y=as(),T=2&g;try{Yo(-1),T&&u.length>22&&JE(o,u,22,!1),l(g,m)}finally{Yo(y)}}function M_(o,u,l){if(gt(u)){const m=u.directiveEnd;for(let y=u.directiveStart;y<m;y++){const T=o.data[y];T.contentQueries&&T.contentQueries(1,l[y],y)}}}function Wg(o,u,l){!Ss()||(function lC(o,u,l,g){const m=l.directiveStart,y=l.directiveEnd;wc(l)&&function P_(o,u,l){const g=qr(u,o),m=zg(l),y=o[10],T=Qg(o,Hg(o,m,null,l.onPush?32:16,g,u,y,y.createRenderer(g,l),null,null,null));o[u.index]=T}(u,l,o.data[m+l.componentOffset]),o.firstCreatePass||ls(l,u),Ki(g,u);const T=l.initialInputs;for(let A=m;A<y;A++){const R=o.data[A],B=xo(u,o,A,l);Ki(B,u),null!==T&&L_(0,A-m,B,R,0,T),Pr(R)&&(ni(l.index,u)[8]=xo(u,o,A,l))}}(o,u,l,qr(l,u)),64==(64&l.flags)&&ip(o,u,l))}function ia(o,u,l=qr){const g=u.localNames;if(null!==g){let m=u.index+1;for(let y=0;y<g.length;y+=2){const T=g[y+1],A=-1===T?l(u,o):o[T];o[m++]=A}}}function zg(o){const u=o.tView;return null===u||u.incompleteFirstPass?o.tView=La(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):u}function La(o,u,l,g,m,y,T,A,R,B){const G=22+g,te=G+m,Ee=function Gh(o,u){const l=[];for(let g=0;g<u;g++)l.push(g<o?null:mn);return l}(G,te),Ae="function"==typeof B?B():B;return Ee[1]={type:o,blueprint:Ee,template:l,queries:null,viewQuery:A,declTNode:u,data:Ee.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:R,consts:Ae,incompleteFirstPass:!1}}function R_(o,u,l,g){const m=d0(u);null===l?m.push(g):(m.push(l),o.firstCreatePass&&V_(o).push(g,m.length-1))}function Rl(o,u,l,g){for(let m in o)if(o.hasOwnProperty(m)){l=null===l?{}:l;const y=o[m];null===g?O_(l,u,m,y):g.hasOwnProperty(m)&&O_(l,u,g[m],y)}return l}function O_(o,u,l,g){o.hasOwnProperty(l)?o[l].push(u,g):o[l]=[u,g]}function Oo(o,u,l,g,m,y,T,A){const R=qr(u,l);let G,B=u.inputs;!A&&null!=B&&(G=B[g])?(lp(o,l,G,g,m),wc(u)&&Zg(l,u.index)):3&u.type&&(g=function Kg(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(g),m=null!=T?T(m,u.value||"",g):m,y.setProperty(R,g,m))}function Zg(o,u){const l=ni(u,o);16&l[2]||(l[2]|=32)}function rp(o,u,l,g){let m=!1;if(Ss()){const y=null===g?null:{"":-1},T=function a0(o,u){const l=o.directiveRegistry;let g=null,m=null;if(l)for(let y=0;y<l.length;y++){const T=l[y];if(Yf(u,T.selectors,!1))if(g||(g=[]),Pr(T))if(null!==T.findHostDirectiveDefs){const A=[];m=m||new Map,T.findHostDirectiveDefs(T,A,m),g.unshift(...A,T),yu(o,u,A.length)}else g.unshift(T),yu(o,u,0);else m=m||new Map,T.findHostDirectiveDefs?.(T,g,m),g.push(T)}return null===g?null:[g,m]}(o,l);let A,R;null===T?A=R=null:[A,R]=T,null!==A&&(m=!0,o0(o,u,l,A,y,R)),y&&function k_(o,u,l){if(u){const g=o.localNames=[];for(let m=0;m<u.length;m+=2){const y=l[u[m+1]];if(null==y)throw new Z(-301,!1);g.push(u[m],y)}}}(l,g,y)}return l.mergedAttrs=us(l.mergedAttrs,l.attrs),m}function o0(o,u,l,g,m,y){for(let B=0;B<g.length;B++)_l(ls(l,u),o,g[B].type);!function Nd(o,u,l){o.flags|=1,o.directiveStart=u,o.directiveEnd=u+l,o.providerIndexes=u}(l,o.data.length,g.length);for(let B=0;B<g.length;B++){const G=g[B];G.providersResolver&&G.providersResolver(G)}let T=!1,A=!1,R=np(o,u,g.length,null);for(let B=0;B<g.length;B++){const G=g[B];l.mergedAttrs=us(l.mergedAttrs,G.hostAttrs),sp(o,l,u,R,G),dC(R,G,m),null!==G.contentQueries&&(l.flags|=4),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(l.flags|=64);const te=G.type.prototype;!T&&(te.ngOnChanges||te.ngOnInit||te.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),T=!0),!A&&(te.ngOnChanges||te.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),A=!0),R++}!function uC(o,u,l){const m=u.directiveEnd,y=o.data,T=u.attrs,A=[];let R=null,B=null;for(let G=u.directiveStart;G<m;G++){const te=y[G],Ee=l?l.get(te):null,Je=Ee?Ee.outputs:null;R=Rl(te.inputs,G,R,Ee?Ee.inputs:null),B=Rl(te.outputs,G,B,Je);const ft=null===R||null===T||Vh(u)?null:Jg(R,G,T);A.push(ft)}null!==R&&(R.hasOwnProperty("class")&&(u.flags|=8),R.hasOwnProperty("style")&&(u.flags|=16)),u.initialInputs=A,u.inputs=R,u.outputs=B}(o,l,y)}function ip(o,u,l){const g=l.directiveStart,m=l.directiveEnd,y=l.index,T=function uh(){return Gt.lFrame.currentDirectiveIndex}();try{Yo(y);for(let A=g;A<m;A++){const R=o.data[A],B=u[A];Vr(A),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&Yg(R,B)}}finally{Yo(-1),Vr(T)}}function Yg(o,u){null!==o.hostBindings&&o.hostBindings(1,u)}function yu(o,u,l){u.componentOffset=l,(o.components||(o.components=[])).push(u.index)}function dC(o,u,l){if(l){if(u.exportAs)for(let g=0;g<u.exportAs.length;g++)l[u.exportAs[g]]=o;Pr(u)&&(l[""]=o)}}function sp(o,u,l,g,m){o.data[g]=m;const y=m.factory||(m.factory=ma(m.type)),T=new dl(y,Pr(m),Hh);o.blueprint[g]=T,l[g]=T,function xd(o,u,l,g,m){const y=m.hostBindings;if(y){let T=o.hostBindingOpCodes;null===T&&(T=o.hostBindingOpCodes=[]);const A=~u.index;(function cC(o){let u=o.length;for(;u>0;){const l=o[--u];if("number"==typeof l&&l<0)return l}return 0})(T)!=A&&T.push(A),T.push(l,g,y)}}(o,u,g,np(o,l,m.hostVars,mn),m)}function F_(o,u,l,g,m,y,T){if(null==y)o.removeAttribute(u,m,l);else{const A=null==T?he(y):T(y,g||"",m);o.setAttribute(u,m,A,l)}}function L_(o,u,l,g,m,y){const T=y[u];if(null!==T){const A=g.setInput;for(let R=0;R<T.length;){const B=T[R++],G=T[R++],te=T[R++];null!==A?g.setInput(l,te,B,G):l[G]=te}}}function Jg(o,u,l){let g=null,m=0;for(;m<l.length;){const y=l[m];if(0!==y)if(5!==y){if("number"==typeof y)break;if(o.hasOwnProperty(y)){null===g&&(g=[]);const T=o[y];for(let A=0;A<T.length;A+=2)if(T[A]===u){g.push(y,T[A+1],l[m+1]);break}}m+=2}else m+=2;else m+=4}return g}function u0(o,u,l,g){return[o,!0,!1,u,null,0,g,l,null,null]}function B_(o,u){const l=ni(u,o);if(Vu(l)){const g=l[1];48&l[2]?qg(g,l,g.template,l[8]):l[5]>0&&ap(l)}}function ap(o){for(let g=gi(o);null!==g;g=pr(g))for(let m=10;m<g.length;m++){const y=g[m];if(Vu(y))if(512&y[2]){const T=y[1];qg(T,y,T.template,y[8])}else y[5]>0&&ap(y)}const l=o[1].components;if(null!==l)for(let g=0;g<l.length;g++){const m=ni(l[g],o);Vu(m)&&m[5]>0&&ap(m)}}function fC(o,u){const l=ni(u,o),g=l[1];(function c0(o,u){for(let l=u.length;l<o.blueprint.length;l++)u.push(o.blueprint[l])})(g,l),t0(g,l,l[8])}function Qg(o,u){return o[13]?o[14][4]=u:o[13]=u,o[14]=u,u}function up(o){for(;o;){o[2]|=32;const u=Ut(o);if(yn(o)&&!u)return o;o=u}return null}function mo(o,u,l,g=!0){const m=u[10];m.begin&&m.begin();try{qg(o,u,o.template,l)}catch(T){throw g&&h0(u,T),T}finally{m.end&&m.end()}}function hc(o,u,l){Ks(0),u(o,l)}function d0(o){return o[7]||(o[7]=[])}function V_(o){return o.cleanup||(o.cleanup=[])}function h0(o,u){const l=o[9],g=l?l.get(go,null):null;g&&g.handleError(u)}function lp(o,u,l,g,m){for(let y=0;y<l.length;){const T=l[y++],A=l[y++],R=u[T],B=o.data[T];null!==B.setInput?B.setInput(R,m,g,A):R[A]=m}}function Os(o,u,l){const g=ya(u,o);Ro(o[11],g,l)}function Wc(o,u,l){let g=l?o.styles:null,m=l?o.classes:null,y=0;if(null!==u)for(let T=0;T<u.length;T++){const A=u[T];"number"==typeof A?y=A:1==y?m=J(m,A):2==y&&(g=J(g,A+": "+u[++T]+";"))}l?o.styles=g:o.stylesWithoutHost=g,l?o.classes=m:o.classesWithoutHost=m}function Xg(o,u,l,g,m=!1){for(;null!==l;){const y=u[l.index];if(null!==y&&g.push(Lr(y)),on(y))for(let A=10;A<y.length;A++){const R=y[A],B=R[1].firstChild;null!==B&&Xg(R[1],R,B,g)}const T=l.type;if(8&T)Xg(o,u,l.child,g);else if(32&T){const A=et(l,u);let R;for(;R=A();)g.push(R)}else if(16&T){const A=i_(u,l);if(Array.isArray(A))g.push(...A);else{const R=Ut(u[16]);Xg(R[1],R,A,g,!0)}}l=m?l.projectionNext:l.next}return g}class dp{constructor(u,l){this._lView=u,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,l=u[1];return Xg(l,u,l.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(on(u)){const l=u[8],g=l?l.indexOf(this):-1;g>-1&&(md(u,g),No(l,g))}this._attachedToViewContainer=!1}_g(this._lView[1],this._lView)}onDestroy(u){R_(this._lView[1],this._lView,null,u)}markForCheck(){up(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){mo(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sc(o,u){Pf(o,u,u[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=u}}class hp extends dp{constructor(u){super(u),this._view=u}detectChanges(){const u=this._view;mo(u[1],u,u[8],!1)}checkNoChanges(){}get context(){return null}}class Md extends Si{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const l=jn(u);return new qh(l,this.ngModule)}}function f0(o){const u=[];for(let l in o)o.hasOwnProperty(l)&&u.push({propName:o[l],templateName:l});return u}class p0{constructor(u,l){this.injector=u,this.parentInjector=l}get(u,l,g){g=nn(g);const m=this.injector.get(u,Dd,g);return m!==Dd||l===Dd?m:this.parentInjector.get(u,l,g)}}class qh extends mu{constructor(u,l){super(),this.componentDef=u,this.ngModule=l,this.componentType=u.type,this.selector=function C_(o){return o.map(YE).join(",")}(u.selectors),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return f0(this.componentDef.inputs)}get outputs(){return f0(this.componentDef.outputs)}create(u,l,g,m){let y=(m=m||this.ngModule)instanceof Vi?m:m?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const T=y?new p0(u,y):u,A=T.get(Ng,null);if(null===A)throw new Z(407,!1);const R=T.get(Bh,null),B=A.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",te=g?function n0(o,u,l){return o.selectRootElement(u,l===be.ShadowDom)}(B,g,this.componentDef.encapsulation):rc(B,G,function gC(o){const u=o.toLowerCase();return"svg"===u?"svg":"math"===u?"math":null}(G)),Ee=this.componentDef.onPush?288:272,Ae=La(0,null,null,1,0,null,null,null,null,null),Je=Hg(null,Ae,null,Ee,null,null,A,B,R,T,null);let ft,Et;Hu(Je);try{const $t=this.componentDef;let cn,ut=null;$t.findHostDirectiveDefs?(cn=[],ut=new Map,$t.findHostDirectiveDefs($t,cn,ut),cn.push($t)):cn=[$t];const Cn=function _C(o,u){const l=o[1];return o[22]=u,Ad(l,22,2,"#host",null)}(Je,te),ui=function vC(o,u,l,g,m,y,T,A){const R=m[1];!function em(o,u,l,g){for(const m of o)u.mergedAttrs=us(u.mergedAttrs,m.hostAttrs);null!==u.mergedAttrs&&(Wc(u,u.mergedAttrs,!0),null!==l&&bg(g,l,u))}(g,o,u,T);const B=y.createRenderer(u,l),G=Hg(m,zg(l),null,l.onPush?32:16,m[o.index],o,y,B,A||null,null,null);return R.firstCreatePass&&yu(R,o,g.length-1),Qg(m,G),m[o.index]=G}(Cn,te,$t,cn,Je,A,B);Et=Ja(Ae,22),te&&function Wh(o,u,l,g){if(g)Da(o,l,["ng-version",ro.full]);else{const{attrs:m,classes:y}=function kg(o){const u=[],l=[];let g=1,m=2;for(;g<o.length;){let y=o[g];if("string"==typeof y)2===m?""!==y&&u.push(y,o[++g]):8===m&&l.push(y);else{if(!ka(m))break;m=y}g++}return{attrs:u,classes:l}}(u.selectors[0]);m&&Da(o,l,m),y&&y.length>0&&yg(o,l,y.join(" "))}}(B,$t,te,g),void 0!==l&&function yC(o,u,l){const g=o.projection=[];for(let m=0;m<u.length;m++){const y=l[m];g.push(null!=y?Array.from(y):null)}}(Et,this.ngContentSelectors,l),ft=function tm(o,u,l,g,m,y){const T=ri(),A=m[1],R=qr(T,m);o0(A,m,T,l,null,g);for(let G=0;G<l.length;G++)Ki(xo(m,A,T.directiveStart+G,T),m);ip(A,m,T),R&&Ki(R,m);const B=xo(m,A,T.directiveStart+T.componentOffset,T);if(o[8]=m[8]=B,null!==y)for(const G of y)G(B,u);return M_(A,T,o),B}(ui,$t,cn,ut,Je,[bC]),t0(Ae,Je,null)}finally{sg()}return new mC(this.componentType,ft,Fh(Et,Je),Je,Et)}}class mC extends Ms{constructor(u,l,g,m,y){super(),this.location=g,this._rootLView=m,this._tNode=y,this.instance=l,this.hostView=this.changeDetectorRef=new hp(m),this.componentType=u}setInput(u,l){const g=this._tNode.inputs;let m;if(null!==g&&(m=g[u])){const y=this._rootLView;lp(y[1],y,m,u,l),Zg(y,this._tNode.index)}}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}function bC(){const o=ri();xc(tt()[1],o)}function pp(o){let u=function fp(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const g=[o];for(;u;){let m;if(Pr(o))m=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Z(903,!1);m=u.\u0275dir}if(m){if(l){g.push(m);const T=o;T.inputs=nm(o.inputs),T.declaredInputs=nm(o.declaredInputs),T.outputs=nm(o.outputs);const A=m.hostBindings;A&&m0(o,A);const R=m.viewQuery,B=m.contentQueries;if(R&&EC(o,R),B&&CC(o,B),je(o.inputs,m.inputs),je(o.declaredInputs,m.declaredInputs),je(o.outputs,m.outputs),Pr(m)&&m.data.animation){const G=o.data;G.animation=(G.animation||[]).concat(m.data.animation)}}const y=m.features;if(y)for(let T=0;T<y.length;T++){const A=y[T];A&&A.ngInherit&&A(o),A===pp&&(l=!1)}}u=Object.getPrototypeOf(u)}!function g0(o){let u=0,l=null;for(let g=o.length-1;g>=0;g--){const m=o[g];m.hostVars=u+=m.hostVars,m.hostAttrs=us(m.hostAttrs,l=us(l,m.hostAttrs))}}(g)}function nm(o){return o===Lt?{}:o===vt?[]:o}function EC(o,u){const l=o.viewQuery;o.viewQuery=l?(g,m)=>{u(g,m),l(g,m)}:u}function CC(o,u){const l=o.contentQueries;o.contentQueries=l?(g,m,y)=>{u(g,m,y),l(g,m,y)}:u}function m0(o,u){const l=o.hostBindings;o.hostBindings=l?(g,m)=>{u(g,m),l(g,m)}:u}let Rd=null;function fc(){if(!Rd){const o=dn.Symbol;if(o&&o.iterator)Rd=o.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<u.length;++l){const g=u[l];"entries"!==g&&"size"!==g&&Map.prototype[g]===Map.prototype.entries&&(Rd=g)}}}return Rd}function Od(o){return!!vp(o)&&(Array.isArray(o)||!(o instanceof Map)&&fc()in o)}function vp(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function bu(o,u,l){return o[u]=l}function io(o,u,l){return!Object.is(o[u],l)&&(o[u]=l,!0)}function kd(o,u,l,g){const m=io(o,u,l);return io(o,u+1,g)||m}function sm(o,u,l,g){const m=tt();return io(m,uo(),u)&&(kn(),function dc(o,u,l,g,m,y){const T=qr(o,u);F_(u[11],T,y,o.value,l,g,m)}(Jn(),m,o,u,l,g)),sm}function Pd(o,u,l,g){return io(o,uo(),l)?u+he(l)+g:mn}function Ld(o,u,l,g,m,y,T,A,R,B){const te=function ko(o,u,l,g,m,y){const T=kd(o,u,l,g);return kd(o,u+2,m,y)||T}(o,Tr(),l,m,T,R);return co(4),te?u+he(l)+g+he(m)+y+he(T)+A+he(R)+B:mn}function q_(o,u,l,g,m,y,T,A){const R=tt(),B=kn(),G=o+22,te=B.firstCreatePass?function TT(o,u,l,g,m,y,T,A,R){const B=u.consts,G=Ad(u,o,4,T||null,zs(B,A));rp(u,l,G,zs(B,R)),xc(u,G);const te=G.tViews=La(2,G,g,m,y,u.directiveRegistry,u.pipeRegistry,null,u.schemas,B);return null!==u.queries&&(u.queries.template(u,G),te.queries=u.queries.embeddedTView(G)),G}(G,B,R,u,l,g,m,y,T):B.data[G];So(te,!1);const Ee=R[11].createComment("");Ln(B,R,Ee,te),Ki(Ee,R),Qg(R,R[G]=u0(Ee,R,Ee,te)),ei(te)&&Wg(B,R,te),null!=T&&ia(R,te,A)}function Jh(o){return ss(function Qa(){return Gt.lFrame.contextLView}(),22+o)}function am(o,u,l){const g=tt();return io(g,uo(),u)&&Oo(kn(),Jn(),g,o,u,g[11],l,!1),am}function kl(o,u,l,g,m){const T=m?"class":"style";lp(o,l,u.inputs[T],T,g)}function bp(o,u,l,g){const m=tt(),y=kn(),T=22+o,A=m[11],R=m[T]=rc(A,u,function Qn(){return Gt.lFrame.currentNamespace}()),B=y.firstCreatePass?function W_(o,u,l,g,m,y,T){const A=u.consts,B=Ad(u,o,2,m,zs(A,y));return rp(u,l,B,zs(A,T)),null!==B.attrs&&Wc(B,B.attrs,!1),null!==B.mergedAttrs&&Wc(B,B.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,B),B}(T,y,m,0,u,l,g):y.data[T];return So(B,!0),bg(A,R,B),32!=(32&B.flags)&&Ln(y,m,R,B),0===function Do(){return Gt.lFrame.elementDepthCount}()&&Ki(R,m),function Xl(){Gt.lFrame.elementDepthCount++}(),ei(B)&&(Wg(y,m,B),M_(y,B,m)),null!==g&&ia(m,B),bp}function Ep(){let o=ri();Ko()?cl():(o=o.parent,So(o,!1));const u=o;!function Ts(){Gt.lFrame.elementDepthCount--}();const l=kn();return l.firstCreatePass&&(xc(l,o),gt(o)&&l.queries.elementEnd(o)),null!=u.classesWithoutHost&&function hl(o){return 0!=(8&o.flags)}(u)&&kl(l,u,tt(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function Mc(o){return 0!=(16&o.flags)}(u)&&kl(l,u,tt(),u.stylesWithoutHost,!1),Ep}function um(o,u,l,g){return bp(o,u,l,g),Ep(),um}function sa(o,u,l){const g=tt(),m=kn(),y=o+22,T=m.firstCreatePass?function z_(o,u,l,g,m){const y=u.consts,T=zs(y,g),A=Ad(u,o,8,"ng-container",T);return null!==T&&Wc(A,T,!0),rp(u,l,A,zs(y,m)),null!==u.queries&&u.queries.elementStart(u,A),A}(y,m,g,u,l):m.data[y];So(T,!0);const A=g[y]=g[11].createComment("");return Ln(m,g,A,T),Ki(A,g),ei(T)&&(Wg(m,g,T),M_(m,T,g)),null!=l&&ia(g,T),sa}function Qh(){let o=ri();const u=kn();return Ko()?cl():(o=o.parent,So(o,!1)),u.firstCreatePass&&(xc(u,o),gt(o)&&u.queries.elementEnd(o)),Qh}function D0(){return tt()}function K_(o){return!!o&&"function"==typeof o.then}function Z_(o){return!!o&&"function"==typeof o.subscribe}const T0=Z_;function Xh(o,u,l,g){const m=tt(),y=kn(),T=ri();return function Y_(o,u,l,g,m,y,T){const A=ei(g),B=o.firstCreatePass&&V_(o),G=u[8],te=d0(u);let Ee=!0;if(3&g.type||T){const ft=qr(g,u),Et=T?T(ft):ft,$t=te.length,cn=T?Cn=>T(Lr(Cn[g.index])):g.index;let ut=null;if(!T&&A&&(ut=function ef(o,u,l,g){const m=o.cleanup;if(null!=m)for(let y=0;y<m.length-1;y+=2){const T=m[y];if(T===l&&m[y+1]===g){const A=u[7],R=m[y+2];return A.length>R?A[R]:null}"string"==typeof T&&(y+=2)}return null}(o,u,m,g.index)),null!==ut)(ut.__ngLastListenerFn__||ut).__ngNextListenerFn__=y,ut.__ngLastListenerFn__=y,Ee=!1;else{y=A0(g,u,G,y,!1);const Cn=l.listen(Et,m,y);te.push(y,Cn),B&&B.push(m,cn,$t,$t+1)}}else y=A0(g,u,G,y,!1);const Ae=g.outputs;let Je;if(Ee&&null!==Ae&&(Je=Ae[m])){const ft=Je.length;if(ft)for(let Et=0;Et<ft;Et+=2){const ui=u[Je[Et]][Je[Et+1]].subscribe(y),Er=te.length;te.push(y,ui),B&&B.push(m,g.index,Er,-(Er+1))}}}(y,m,m[11],T,o,u,g),Xh}function I0(o,u,l,g){try{return!1!==l(g)}catch(m){return h0(o,m),!1}}function A0(o,u,l,g,m){return function y(T){if(T===Function)return g;up(o.componentOffset>-1?ni(o.index,u):u);let R=I0(u,0,g,T),B=y.__ngNextListenerFn__;for(;B;)R=I0(u,0,B,T)&&R,B=B.__ngNextListenerFn__;return m&&!1===R&&(T.preventDefault(),T.returnValue=!1),R}}function Pl(o=1){return function gy(o){return(Gt.lFrame.contextLView=function If(o,u){for(;o>0;)u=u[15],o--;return u}(o,Gt.lFrame.contextLView))[8]}(o)}function AC(o,u){let l=null;const g=function ZE(o){const u=o.attrs;if(null!=u){const l=u.indexOf(5);if(0==(1&l))return u[l+1]}return null}(o);for(let m=0;m<u.length;m++){const y=u[m];if("*"!==y){if(null===g?Yf(o,y,!0):E_(g,y))return m}else l=m}return l}function _s(o){const u=tt()[16][6];if(!u.projection){const g=u.projection=Na(o?o.length:1,null),m=g.slice();let y=u.child;for(;null!==y;){const T=o?AC(y,o):0;null!==T&&(m[T]?m[T].projectionNext=y:g[T]=y,m[T]=y),y=y.next}}}function J_(o,u=0,l){const g=tt(),m=kn(),y=Ad(m,22+o,16,null,l||null);null===y.projection&&(y.projection=u),cl(),32!=(32&y.flags)&&function s_(o,u,l){xh(u[11],0,u,l,Sh(o,l,u),r_(l.parent||u[6],l,u))}(m,g,y)}function zc(o,u,l){return cm(o,"",u,"",l),zc}function cm(o,u,l,g,m){const y=tt(),T=Pd(y,u,l,g);return T!==mn&&Oo(kn(),Jn(),y,o,T,y[11],m,!1),cm}function X_(o,u){return o<<17|u<<2}function Kc(o){return o>>17&32767}function Zc(o){return 2|o}function $d(o){return(131068&o)>>2}function R0(o,u){return-131069&o|u<<2}function wp(o){return 1|o}function nv(o,u,l,g,m){const y=o[l+1],T=null===u;let A=g?Kc(y):$d(y),R=!1;for(;0!==A&&(!1===R||T);){const G=o[A+1];RC(o[A],u)&&(R=!0,o[A+1]=g?wp(G):Zc(G)),A=g?Kc(G):$d(G)}R&&(o[l+1]=g?Zc(y):wp(y))}function RC(o,u){return null===o||null==u||(Array.isArray(o)?o[1]:o)===u||!(!Array.isArray(o)||"string"!=typeof u)&&Ir(o,u)>=0}const vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jd(o){return o.substring(vs.key,vs.keyEnd)}function P0(o,u){const l=vs.textEnd;return l===u?-1:(u=vs.keyEnd=function PC(o,u,l){for(;u<l&&o.charCodeAt(u)>32;)u++;return u}(o,vs.key=u,l),Yc(o,u,l))}function Yc(o,u,l){for(;u<l&&o.charCodeAt(u)<=32;)u++;return u}function qe(o,u,l){return Ba(o,u,l,!1),qe}function Jc(o,u){return Ba(o,u,null,!0),Jc}function Mn(o){Va(Sr,ks,o,!0)}function ks(o,u){for(let l=function rv(o){return function F0(o){vs.key=0,vs.keyEnd=0,vs.value=0,vs.valueEnd=0,vs.textEnd=o.length}(o),P0(o,Yc(o,0,vs.textEnd))}(u);l>=0;l=P0(u,l))Sr(o,jd(u),!0)}function Ba(o,u,l,g){const m=tt(),y=kn(),T=co(2);y.firstUpdatePass&&vi(y,o,T,g),u!==mn&&io(m,T,u)&&UC(y,y.data[as()],m,m[11],o,m[T+1]=function fm(o,u){return null==o||("string"==typeof u?o+=u:"object"==typeof o&&(o=K(Hc(o)))),o}(u,l),g,T)}function Va(o,u,l,g){const m=kn(),y=co(2);m.firstUpdatePass&&vi(m,null,y,g);const T=tt();if(l!==mn&&io(T,y,l)){const A=m.data[as()];if(av(A,g)&&!LC(m,y)){let R=g?A.classesWithoutHost:A.stylesWithoutHost;null!==R&&(l=J(R,l||"")),kl(m,A,T,l,g)}else!function VC(o,u,l,g,m,y,T,A){m===mn&&(m=vt);let R=0,B=0,G=0<m.length?m[0]:null,te=0<y.length?y[0]:null;for(;null!==G||null!==te;){const Ee=R<m.length?m[R+1]:void 0,Ae=B<y.length?y[B+1]:void 0;let ft,Je=null;G===te?(R+=2,B+=2,Ee!==Ae&&(Je=te,ft=Ae)):null===te||null!==G&&G<te?(R+=2,Je=G):(B+=2,Je=te,ft=Ae),null!==Je&&UC(o,u,l,g,Je,ft,T,A),G=R<m.length?m[R]:null,te=B<y.length?y[B]:null}}(m,A,T,T[11],T[y+1],T[y+1]=function ov(o,u,l){if(null==l||""===l)return vt;const g=[],m=Hc(l);if(Array.isArray(m))for(let y=0;y<m.length;y++)o(g,m[y],!0);else if("object"==typeof m)for(const y in m)m.hasOwnProperty(y)&&o(g,y,m[y]);else"string"==typeof m&&u(g,m);return g}(o,u,l),g,y)}}function LC(o,u){return u>=o.expandoStartIndex}function vi(o,u,l,g){const m=o.data;if(null===m[l+1]){const y=m[as()],T=LC(o,l);av(y,g)&&null===u&&!T&&(u=!1),u=function sv(o,u,l,g){const m=function os(o){const u=Gt.lFrame.currentDirectiveIndex;return-1===u?null:o[u]}(o);let y=g?u.residualClasses:u.residualStyles;if(null===m)0===(g?u.classBindings:u.styleBindings)&&(l=nf(l=V0(null,o,u,l,g),u.attrs,g),y=null);else{const T=u.directiveStylingLast;if(-1===T||o[T]!==m)if(l=V0(m,o,u,l,g),null===y){let R=function dm(o,u,l){const g=l?u.classBindings:u.styleBindings;if(0!==$d(g))return o[Kc(g)]}(o,u,g);void 0!==R&&Array.isArray(R)&&(R=V0(null,o,u,R[1],g),R=nf(R,u.attrs,g),function hm(o,u,l,g){o[Kc(l?u.classBindings:u.styleBindings)]=g}(o,u,g,R))}else y=function BC(o,u,l){let g;const m=u.directiveEnd;for(let y=1+u.directiveStylingLast;y<m;y++)g=nf(g,o[y].hostAttrs,l);return nf(g,u.attrs,l)}(o,u,g)}return void 0!==y&&(g?u.residualClasses=y:u.residualStyles=y),l}(m,y,u,g),function NC(o,u,l,g,m,y){let T=y?u.classBindings:u.styleBindings,A=Kc(T),R=$d(T);o[g]=l;let G,B=!1;if(Array.isArray(l)){const te=l;G=te[1],(null===G||Ir(te,G)>0)&&(B=!0)}else G=l;if(m)if(0!==R){const Ee=Kc(o[A+1]);o[g+1]=X_(Ee,A),0!==Ee&&(o[Ee+1]=R0(o[Ee+1],g)),o[A+1]=function ev(o,u){return 131071&o|u<<17}(o[A+1],g)}else o[g+1]=X_(A,0),0!==A&&(o[A+1]=R0(o[A+1],g)),A=g;else o[g+1]=X_(R,0),0===A?A=g:o[R+1]=R0(o[R+1],g),R=g;B&&(o[g+1]=Zc(o[g+1])),nv(o,G,g,!0),nv(o,G,g,!1),function MC(o,u,l,g,m){const y=m?o.residualClasses:o.residualStyles;null!=y&&"string"==typeof u&&Ir(y,u)>=0&&(l[g+1]=wp(l[g+1]))}(u,G,o,g,y),T=X_(A,R),y?u.classBindings=T:u.styleBindings=T}(m,y,u,l,T,g)}}function V0(o,u,l,g,m){let y=null;const T=l.directiveEnd;let A=l.directiveStylingLast;for(-1===A?A=l.directiveStart:A++;A<T&&(y=u[A],g=nf(g,y.hostAttrs,m),y!==o);)A++;return null!==o&&(l.directiveStylingLast=A),g}function nf(o,u,l){const g=l?1:2;let m=-1;if(null!==u)for(let y=0;y<u.length;y++){const T=u[y];"number"==typeof T?m=T:m===g&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Sr(o,T,!!l||u[++y]))}return void 0===o?null:o}function UC(o,u,l,g,m,y,T,A){if(!(3&u.type))return;const R=o.data,B=R[A+1],G=function tv(o){return 1==(1&o)}(B)?$0(R,u,l,m,$d(B),T):void 0;ys(G)||(ys(y)||function tf(o){return 2==(2&o)}(B)&&(y=$0(R,null,l,m,A,T)),function yd(o,u,l,g,m){if(u)m?o.addClass(l,g):o.removeClass(l,g);else{let y=-1===g.indexOf("-")?void 0:ta.DashCase;null==m?o.removeStyle(l,g,y):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),y|=ta.Important),o.setStyle(l,g,m,y))}}(g,T,ya(as(),l),m,y))}function $0(o,u,l,g,m,y){const T=null===u;let A;for(;m>0;){const R=o[m],B=Array.isArray(R),G=B?R[1]:R,te=null===G;let Ee=l[m+1];Ee===mn&&(Ee=te?vt:void 0);let Ae=te?ea(Ee,g):G===g?Ee:void 0;if(B&&!ys(Ae)&&(Ae=ea(R,g)),ys(Ae)&&(A=Ae,T))return A;const Je=o[m+1];m=T?Kc(Je):$d(Je)}if(null!==u){let R=y?u.residualClasses:u.residualStyles;null!=R&&(A=ea(R,g))}return A}function ys(o){return void 0!==o}function av(o,u){return 0!=(o.flags&(u?8:16))}function pm(o,u=""){const l=tt(),g=kn(),m=o+22,y=g.firstCreatePass?Ad(g,m,1,u,null):g.data[m],T=l[m]=oi(l[11],u);Ln(g,l,T,y),So(y,!1)}function Dp(o){return rf("",o,""),Dp}function rf(o,u,l){const g=tt(),m=Pd(g,o,u,l);return m!==mn&&Os(g,as(),m),rf}function gm(o,u,l,g,m){const y=tt(),T=function Eu(o,u,l,g,m,y){const A=kd(o,Tr(),l,m);return co(2),A?u+he(l)+g+he(m)+y:mn}(y,o,u,l,g,m);return T!==mn&&Os(y,as(),T),gm}function _m(o,u,l,g,m,y,T,A,R){Va(Sr,ks,Ld(tt(),o,u,l,g,m,y,T,A,R),!0)}function p(o,u,l){const g=tt();return io(g,uo(),u)&&Oo(kn(),Jn(),g,o,u,g[11],l,!0),p}const c=void 0;var v=["en",[["a","p"],["AM","PM"],c],[["AM","PM"],c,c],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],c,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],c,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",c,"{1} 'at' {0}",c],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function f(o){const l=Math.floor(Math.abs(o)),g=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===g?1:5}];let C={};function P(o){const u=function nt(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=ne(u);if(l)return l;const g=u.split("-")[0];if(l=ne(g),l)return l;if("en"===g)return v;throw new Z(701,!1)}function q(o){return P(o)[Se.PluralCase]}function ne(o){return o in C||(C[o]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[o]),C[o]}var Se=(()=>((Se=Se||{})[Se.LocaleId=0]="LocaleId",Se[Se.DayPeriodsFormat=1]="DayPeriodsFormat",Se[Se.DayPeriodsStandalone=2]="DayPeriodsStandalone",Se[Se.DaysFormat=3]="DaysFormat",Se[Se.DaysStandalone=4]="DaysStandalone",Se[Se.MonthsFormat=5]="MonthsFormat",Se[Se.MonthsStandalone=6]="MonthsStandalone",Se[Se.Eras=7]="Eras",Se[Se.FirstDayOfWeek=8]="FirstDayOfWeek",Se[Se.WeekendRange=9]="WeekendRange",Se[Se.DateFormat=10]="DateFormat",Se[Se.TimeFormat=11]="TimeFormat",Se[Se.DateTimeFormat=12]="DateTimeFormat",Se[Se.NumberSymbols=13]="NumberSymbols",Se[Se.NumberFormats=14]="NumberFormats",Se[Se.CurrencyCode=15]="CurrencyCode",Se[Se.CurrencySymbol=16]="CurrencySymbol",Se[Se.CurrencyName=17]="CurrencyName",Se[Se.Currencies=18]="Currencies",Se[Se.Directionality=19]="Directionality",Se[Se.PluralCase=20]="PluralCase",Se[Se.ExtraData=21]="ExtraData",Se))();const it=["zero","one","two","few","many"],bt="en-US",jt={marker:"element"},Un={marker:"ICU"};var Dn=(()=>((Dn=Dn||{})[Dn.SHIFT=2]="SHIFT",Dn[Dn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Dn[Dn.COMMENT=2]="COMMENT",Dn))();let Cu=bt;function pc(o){(function sn(o,u){null==o&&Mt(u,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(Cu=o.toLowerCase().replace(/_/g,"-"))}function Wt(o,u,l){const g=u.insertBeforeIndex,m=Array.isArray(g)?g[0]:g;return null===m?BE(o,0,l):Lr(l[m])}function Zr(o,u,l,g,m){const y=u.insertBeforeIndex;if(Array.isArray(y)){let T=g,A=null;if(3&u.type||(A=T,T=m),null!==T&&-1===u.componentOffset)for(let R=1;R<y.length;R++)oc(o,T,l[y[R]],A,!1)}}function gr(o,u){if(o.push(u),o.length>1)for(let l=o.length-2;l>=0;l--){const g=o[l];Po(g)||Gd(g,u)&&null===gc(g)&&af(g,u.index)}}function Po(o){return!(64&o.type)}function Gd(o,u){return Po(u)||o.index>u.index}function gc(o){const u=o.insertBeforeIndex;return Array.isArray(u)?u[0]:u}function af(o,u){const l=o.insertBeforeIndex;Array.isArray(l)?l[0]=u:(VE(Wt,Zr),o.insertBeforeIndex=u)}function Fo(o,u){const l=o.data[u];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function nI(o,u,l){const g=Gg(o,l,64,null,null);return gr(u,g),g}function Np(o,u){const l=u[o.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function Q0(o){return o>>>17}function Ps(o){return(131070&o)>>>1}let pv=0,oa=0;function Fl(o,u,l,g){const m=l[11];let T,y=null;for(let A=0;A<u.length;A++){const R=u[A];if("string"==typeof R){const B=u[++A];null===l[B]&&(l[B]=oi(m,R))}else if("number"==typeof R)switch(1&R){case 0:const B=Q0(R);let G,te;if(null===y&&(y=B,T=Rf(m,g)),B===y?(G=g,te=T):(G=null,te=Lr(l[B])),null!==te){const ft=Ps(R);oc(m,te,l[ft],G,!1);const $t=Fo(o,ft);if(null!==$t&&"object"==typeof $t){const cn=Np($t,l);null!==cn&&Fl(o,$t.create[cn],l,l[$t.anchorIdx])}}break;case 1:const Ae=u[++A],Je=u[++A];F_(m,ya(R>>>1,l),null,null,Ae,Je,null)}else switch(R){case Un:const B=u[++A],G=u[++A];null===l[G]&&Ki(l[G]=po(m,B),l);break;case jt:const te=u[++A],Ee=u[++A];null===l[Ee]&&Ki(l[Ee]=rc(m,te,null),l)}}}function Jt(o,u,l,g,m){for(let y=0;y<l.length;y++){const T=l[y],A=l[++y];if(T&m){let R="";for(let B=y+1;B<=y+A;B++){const G=l[B];if("string"==typeof G)R+=G;else if("number"==typeof G)if(G<0)R+=he(u[g-G]);else{const te=G>>>2;switch(3&G){case 1:const Ee=l[++B],Ae=l[++B],Je=o.data[te];"string"==typeof Je?F_(u[11],u[te],null,Je,Ee,R,Ae):Oo(o,Je,u,Ee,R,u[11],Ae,!1);break;case 0:const ft=u[te];null!==ft&&Ro(u[11],ft,R);break;case 2:Tn(o,Fo(o,te),u,R);break;case 3:tb(o,Fo(o,te),g,u)}}}}else{const R=l[y+1];if(R>0&&3==(3&R)){const G=Fo(o,R>>>2);u[G.currentCaseLViewIndex]<0&&tb(o,G,g,u)}}y+=A}}function tb(o,u,l,g){let m=g[u.currentCaseLViewIndex];if(null!==m){let y=pv;m<0&&(m=g[u.currentCaseLViewIndex]=~m,y=-1),Jt(o,g,u.update[m],l,y)}}function Tn(o,u,l,g){const m=function nb(o,u){let l=o.cases.indexOf(u);if(-1===l)switch(o.type){case 1:{const g=function Bt(o,u){const l=q(u)(parseInt(o,10)),g=it[l];return void 0!==g?g:"other"}(u,function wu(){return Cu}());l=o.cases.indexOf(g),-1===l&&"other"!==g&&(l=o.cases.indexOf("other"));break}case 0:l=o.cases.indexOf("other")}return-1===l?null:l}(u,g);if(Np(u,l)!==m&&(gv(o,u,l),l[u.currentCaseLViewIndex]=null===m?null:~m,null!==m)){const T=l[u.anchorIdx];T&&Fl(o,u.create[m],l,T)}}function gv(o,u,l){let g=Np(u,l);if(null!==g){const m=u.remove[g];for(let y=0;y<m.length;y++){const T=m[y];if(T>0){const A=ya(T,l);null!==A&&Of(l[11],A)}else gv(o,Fo(o,~T),l)}}}function mv(){const o=[];let l,g,u=-1;function y(A,R){u=0;const B=Np(A,R);g=null!==B?A.remove[B]:vt}function T(){if(u<g.length){const A=g[u++];return A>0?l[A]:(o.push(u,g),y(l[1].data[~A],l),T())}return 0===o.length?null:(g=o.pop(),u=o.pop(),T())}return function m(A,R){for(l=R;o.length;)o.pop();return y(A.value,R),T}}const bs=/\ufffd(\d+):?\d*\ufffd/gi,sI=/\ufffd(\d+)\ufffd/,YC=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,AT=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Lo=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,oI=/\uE500/g;function ib(o,u,l,g,m,y,T){const A=np(o,g,1,null);let R=A<<Dn.SHIFT,B=Uu();u===B&&(B=null),null===B&&(R|=Dn.APPEND_EAGERLY),T&&(R|=Dn.COMMENT,function Nt(o){void 0===Me&&(Me=o())}(mv)),m.push(R,null===y?"":y);const G=Gg(o,A,T?32:1,null===y?"":y,null);gr(l,G);const te=G.index;return So(G,!1),null!==B&&u!==B&&function ZC(o,u){let l=o.insertBeforeIndex;null===l?(VE(Wt,Zr),l=o.insertBeforeIndex=[null,u]):(function Oe(o,u,l){o!=u&&Mt(l,o,u,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(u))}(B,te),G}function sb(o,u,l,g,m,y,T){const A=T.match(bs),R=ib(o,u,l,y,g,A?null:T,!1);A&&Rp(m,T,R.index,null,0,null)}function Rp(o,u,l,g,m,y){const T=o.length,A=T+1;o.push(null,null);const R=T+2,B=u.split(bs);let G=0;for(let te=0;te<B.length;te++){const Ee=B[te];if(1&te){const Ae=m+parseInt(Ee,10);o.push(-1-Ae),G|=NT(Ae)}else""!==Ee&&o.push(Ee)}return o.push(l<<2|(g?1:0)),g&&o.push(g,y),o[T]=G,o[A]=o.length-R,G}function NT(o){return 1<<Math.min(o,31)}function JC(o){let u,y,l="",g=0,m=!1;for(;null!==(u=AT.exec(o));)m?u[0]===`\ufffd/*${y}\ufffd`&&(g=u.index,m=!1):(l+=o.substring(g,u.index+u[0].length),y=u[1],m=!0);return l+=o.slice(g),l}function XC(o,u,l,g,m,y){let T=0;const A={type:m.type,currentCaseLViewIndex:np(o,u,1,null),anchorIdx:y,cases:[],create:[],remove:[],update:[]};(function cI(o,u,l){o.push(NT(u.mainBinding),2,-1-u.mainBinding,l<<2|2)})(l,m,y),function Ua(o,u,l){const g=o.data[u];null===g?o.data[u]=l:g.value=l}(o,y,A);const R=m.values;for(let B=0;B<R.length;B++){const G=R[B],te=[];for(let Ee=0;Ee<G.length;Ee++){const Ae=G[Ee];if("string"!=typeof Ae){const Je=te.push(Ae)-1;G[Ee]=`\x3c!--\ufffd${Je}\ufffd--\x3e`}}T=ab(o,A,u,l,g,m.cases[B],G.join(""),te)|T}T&&function lI(o,u,l){o.push(u,1,l<<2|3)}(l,T,y)}function uI(o){const u=[],l=[];let g=1,m=0;const y=ob(o=o.replace(YC,function(T,A,R){return g="select"===R?0:1,m=parseInt(A.slice(1),10),""}));for(let T=0;T<y.length;){let A=y[T++].trim();1===g&&(A=A.replace(/\s*(?:=)?(\w+)\s*/,"$1")),A.length&&u.push(A);const R=ob(y[T++]);u.length>l.length&&l.push(R)}return{type:g,mainBinding:m,cases:u,values:l}}function ob(o){if(!o)return[];let u=0;const l=[],g=[],m=/[{}]/g;let y;for(m.lastIndex=0;y=m.exec(o);){const A=y.index;if("}"==y[0]){if(l.pop(),0==l.length){const R=o.substring(u,A);YC.test(R)?g.push(uI(R)):g.push(R),u=A+1}}else{if(0==l.length){const R=o.substring(u,A);g.push(R),u=A+1}l.push("{")}}const T=o.substring(u);return g.push(T),g}function ab(o,u,l,g,m,y,T,A){const R=[],B=[],G=[];u.cases.push(y),u.create.push(R),u.remove.push(B),u.update.push(G);const Ee=function $f(o){const u=new My(o);return function Ry(){try{return!!(new window.DOMParser).parseFromString(Nh(""),"text/html")}catch{return!1}}()?new o_(u):u}(function Vf(){return void 0!==Bf?Bf:typeof document<"u"?document:void 0}()).getInertBodyElement(T),Ae=function f_(o){return"content"in o&&function jf(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}(Ee)||Ee;return Ae?ub(o,u,l,g,R,B,G,Ae,m,A,0):0}function ub(o,u,l,g,m,y,T,A,R,B,G){let te=0,Ee=A.firstChild;for(;Ee;){const Ae=np(o,l,1,null);switch(Ee.nodeType){case Node.ELEMENT_NODE:const Je=Ee,ft=Je.tagName.toLowerCase();if(c_.hasOwnProperty(ft)){vv(m,jt,ft,R,Ae),o.data[Ae]=ft;const ut=Je.attributes;for(let Cn=0;Cn<ut.length;Cn++){const ui=ut.item(Cn),Er=ui.name.toLowerCase();ui.value.match(bs)?l_.hasOwnProperty(Er)&&Rp(T,ui.value,Ae,ui.name,0,Tg[Er]?Dg:null):MT(m,Ae,ui)}te=ub(o,u,l,g,m,y,T,Ee,Ae,B,G+1)|te,cb(y,Ae,G)}break;case Node.TEXT_NODE:const Et=Ee.textContent||"",$t=Et.match(bs);vv(m,null,$t?"":Et,R,Ae),cb(y,Ae,G),$t&&(te=Rp(T,Et,Ae,null,0,null)|te);break;case Node.COMMENT_NODE:const cn=sI.exec(Ee.textContent||"");if(cn){const Cn=B[parseInt(cn[1],10)];vv(m,Un,"",R,Ae),XC(o,l,g,R,Cn,Ae),ew(y,Ae,G)}}Ee=Ee.nextSibling}return te}function cb(o,u,l){0===l&&o.push(u)}function ew(o,u,l){0===l&&(o.push(~u),o.push(u))}function vv(o,u,l,g,m){null!==u&&o.push(u),o.push(l,m,function eb(o,u,l){return o|u<<17|l<<1}(0,g,m))}function MT(o,u,l){o.push(u<<1|1,l.name,l.value)}function nw(o,u,l=-1){const g=kn(),m=tt(),y=22+o,T=zs(g.consts,u),A=Uu();g.firstCreatePass&&function xT(o,u,l,g,m,y){const T=Uu(),A=[],R=[],B=[[]];m=function QC(o,u){if(function bm(o){return-1===o}(u))return JC(o);{const l=o.indexOf(`:${u}\ufffd`)+2+u.toString().length,g=o.search(new RegExp(`\ufffd\\/\\*\\d+:${u}\ufffd`));return JC(o.substring(l,g))}}(m,y);const G=function rb(o){return o.replace(oI," ")}(m).split(Lo);for(let te=0;te<G.length;te++){let Ee=G[te];if(0==(1&te)){const Ae=ob(Ee);for(let Je=0;Je<Ae.length;Je++){let ft=Ae[Je];if(0==(1&Je)){const Et=ft;""!==Et&&sb(o,T,B[0],A,R,l,Et)}else{const Et=ft;if("object"!=typeof Et)throw new Error(`Unable to parse ICU expression in "${m}" message.`);XC(o,l,R,u,Et,ib(o,T,B[0],l,A,"",!0).index)}}}else{const Ae=47===Ee.charCodeAt(0),ft=(Ee.charCodeAt(Ae?1:0),22+Number.parseInt(Ee.substring(Ae?2:1)));if(Ae)B.shift(),So(Uu(),!1);else{const Et=nI(o,B[0],ft);B.unshift([]),So(Et,!0)}}}o.data[g]={create:A,update:R}}(g,null===A?0:A.index,m,y,T,l);const R=g.data[y],G=vy(g,A===m[6]?null:A,m);(function iI(o,u,l,g){const m=o[11];for(let y=0;y<u.length;y++){const T=u[y++],A=u[y],R=(T&Dn.COMMENT)===Dn.COMMENT,B=(T&Dn.APPEND_EAGERLY)===Dn.APPEND_EAGERLY,G=T>>>Dn.SHIFT;let te=o[G];null===te&&(te=o[G]=R?m.createComment(A):oi(m,A)),B&&null!==l&&oc(m,l,te,g,!1)}})(m,R.create,G,A&&8&A.type?m[A.index]:null),td(!0)}function Ev(o,u,l){nw(o,u,l),function rw(){td(!1)}()}function Cv(o){return function _M(o){o&&(pv|=1<<Math.min(oa,31)),oa++}(io(tt(),uo(),o)),Cv}function db(o){!function rI(o,u,l){if(oa>0){const g=o.data[l];Jt(o,u,Array.isArray(g)?g:g.update,Tr()-oa-1,pv)}pv=0,oa=0}(kn(),tt(),o+22)}function hb(o,u,l,g,m){if(o=pe(o),Array.isArray(o))for(let y=0;y<o.length;y++)hb(o[y],u,l,g,m);else{const y=kn(),T=tt();let A=Ed(o)?o:pe(o.provide),R=Ph(o);const B=ri(),G=1048575&B.providerIndexes,te=B.directiveStart,Ee=B.providerIndexes>>20;if(Ed(o)||!o.multi){const Ae=new dl(R,m,Hh),Je=fb(A,u,m?G:G+Ee,te);-1===Je?(_l(ls(B,T),y,A),ow(y,o,u.length),u.push(A),B.directiveStart++,B.directiveEnd++,m&&(B.providerIndexes+=1048576),l.push(Ae),T.push(Ae)):(l[Je]=Ae,T[Je]=Ae)}else{const Ae=fb(A,u,G+Ee,te),Je=fb(A,u,G,G+Ee),ft=Ae>=0&&l[Ae],Et=Je>=0&&l[Je];if(m&&!Et||!m&&!ft){_l(ls(B,T),y,A);const $t=function lw(o,u,l,g,m){const y=new dl(o,l,Hh);return y.multi=[],y.index=u,y.componentProviders=0,aw(y,m,g&&!l),y}(m?PT:uw,l.length,m,g,R);!m&&Et&&(l[Je].providerFactory=$t),ow(y,o,u.length,0),u.push(A),B.directiveStart++,B.directiveEnd++,m&&(B.providerIndexes+=1048576),l.push($t),T.push($t)}else ow(y,o,Ae>-1?Ae:Je,aw(l[m?Je:Ae],R,!m&&g));!m&&g&&Et&&l[Je].componentProviders++}}}function ow(o,u,l,g){const m=Ed(u),y=function Oh(o){return!!o.useClass}(u);if(m||y){const R=(y?pe(u.useClass):u).prototype.ngOnDestroy;if(R){const B=o.destroyHooks||(o.destroyHooks=[]);if(!m&&u.multi){const G=B.indexOf(l);-1===G?B.push(l,[g,R]):B[G+1].push(g,R)}else B.push(l,R)}}}function aw(o,u,l){return l&&o.componentProviders++,o.multi.push(u)-1}function fb(o,u,l,g){for(let m=l;m<g;m++)if(u[m]===o)return m;return-1}function uw(o,u,l,g){return cw(this.multi,[])}function PT(o,u,l,g){const m=this.multi;let y;if(this.providerFactory){const T=this.providerFactory.componentProviders,A=xo(l,l[1],this.providerFactory.index,g);y=A.slice(0,T),cw(m,y);for(let R=T;R<A.length;R++)y.push(A[R])}else y=[],cw(m,y);return y}function cw(o,u){for(let l=0;l<o.length;l++)u.push((0,o[l])());return u}function pb(o,u=[]){return l=>{l.providersResolver=(g,m)=>function kT(o,u,l){const g=kn();if(g.firstCreatePass){const m=Pr(o);hb(l,g.data,g.blueprint,m,!0),hb(u,g.data,g.blueprint,m,!1)}}(g,m?m(o):o,u)}}class cf{}class Fs{}function vo(o,u){return new gb(o,u??null)}class gb extends cf{constructor(u,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Md(this);const g=Jr(u);this._bootstrapComponents=_u(g.bootstrap),this._r3Injector=zy(u,l,[{provide:cf,useValue:this},{provide:Si,useValue:this.componentFactoryResolver}],K(u),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(u)}get injector(){return this._r3Injector}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class hw extends Fs{constructor(u){super(),this.moduleType=u}create(u){return new gb(this.moduleType,u)}}class pI extends cf{constructor(u,l,g){super(),this.componentFactoryResolver=new Md(this),this.instance=null;const m=new wn([...u,{provide:cf,useValue:this},{provide:Si,useValue:this.componentFactoryResolver}],l||Sl(),g,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(u){this.injector.onDestroy(u)}}function mb(o,u,l=null){return new pI(o,u,l).injector}let gI=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const g=qE(0,l.type),m=g.length>0?mb([g],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,m)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=tn({token:o,providedIn:"environment",factory:()=>new o(Xe(Vi))}),o})();function FT(o){o.getStandaloneInjector=u=>u.get(gI).getOrCreateStandaloneInjector(o)}function Op(o,u,l,g){return _w(tt(),ii(),o,u,l,g)}function UT(o,u,l,g,m){return function Cm(o,u,l,g,m,y,T){const A=u+l;return kd(o,A,m,y)?bu(o,A+2,T?g.call(T,m,y):g(m,y)):Ls(o,A+2)}(tt(),ii(),o,u,l,g,m)}function $T(o,u,l,g,m,y){return function Dv(o,u,l,g,m,y,T,A){const R=u+l;return function im(o,u,l,g,m){const y=kd(o,u,l,g);return io(o,u+2,m)||y}(o,R,m,y,T)?bu(o,R+3,A?g.call(A,m,y,T):g(m,y,T)):Ls(o,R+3)}(tt(),ii(),o,u,l,g,m,y)}function Ls(o,u){const l=o[u];return l===mn?void 0:l}function _w(o,u,l,g,m,y){const T=u+l;return io(o,T,m)?bu(o,T+1,y?g.call(y,m):g(m)):Ls(o,T+1)}function yw(o,u){const l=kn();let g;const m=o+22;l.firstCreatePass?(g=function qT(o,u){if(u)for(let l=u.length-1;l>=0;l--){const g=u[l];if(o===g.name)return g}}(u,l.pipeRegistry),l.data[m]=g,g.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(m,g.onDestroy)):g=l.data[m];const y=g.factory||(g.factory=ma(g.type)),T=pn(Hh);try{const A=lo(!1),R=y();return lo(A),function om(o,u,l,g){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),u[l]=g}(l,tt(),m,R),R}finally{pn(T)}}function Tb(o,u,l){const g=o+22,m=tt(),y=ss(m,g);return function wm(o,u){return o[1].data[u].pure}(m,g)?_w(m,ii(),u,y.transform,l,y):y.transform(l)}function Sv(o){return u=>{setTimeout(o,void 0,u)}}const Du=class bI extends O.x{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,l,g){let m=u,y=l||(()=>null),T=g;if(u&&"object"==typeof u){const R=u;m=R.next?.bind(R),y=R.error?.bind(R),T=R.complete?.bind(R)}this.__isAsync&&(y=Sv(y),m&&(m=Sv(m)),T&&(T=Sv(T)));const A=super.subscribe({next:m,error:y,complete:T});return u instanceof H.w0&&u.add(A),A}};function Cw(){return this._results[fc()]()}class Ib{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=fc(),g=Ib.prototype;g[l]||(g[l]=Cw)}get changes(){return this._changes||(this._changes=new Du)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,l){return this._results.reduce(u,l)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,l){const g=this;g.dirty=!1;const m=function fi(o){return o.flat(Number.POSITIVE_INFINITY)}(u);(this._changesDetected=!function ph(o,u,l){if(o.length!==u.length)return!1;for(let g=0;g<o.length;g++){let m=o[g],y=u[g];if(l&&(m=l(m),y=l(y)),y!==m)return!1}return!0}(g._results,m,l))&&(g._results=m,g.length=m.length,g.last=m[this.length-1],g.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Dm=(()=>{class o{}return o.__NG_ELEMENT_ID__=Iv,o})();const WT=Dm,EI=class extends WT{constructor(u,l,g){super(),this._declarationLView=u,this._declarationTContainer=l,this.elementRef=g}createEmbeddedView(u,l){const g=this._declarationTContainer.tViews,m=Hg(this._declarationLView,g,u,16,null,g.declTNode,null,null,null,null,l||null);m[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(m[19]=T.createEmbeddedView(g)),t0(g,m,u),new dp(m)}};function Iv(){return Av(ri(),tt())}function Av(o,u){return 4&o.type?new EI(u,o,Fh(o,u)):null}let Pp=(()=>{class o{}return o.__NG_ELEMENT_ID__=xv,o})();function xv(){return Dw(ri(),tt())}const Fp=Pp,Ab=class extends Fp{constructor(u,l,g){super(),this._lContainer=u,this._hostTNode=l,this._hostLView=g}get element(){return Fh(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){const u=kc(this._hostTNode,this._hostLView);if(Ta(u)){const l=Sa(u,this._hostLView),g=Ao(u);return new si(l[1].data[g+8],l)}return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const l=zT(this._lContainer);return null!==l&&l[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,l,g){let m,y;"number"==typeof g?m=g:null!=g&&(m=g.index,y=g.injector);const T=u.createEmbeddedView(l||{},y);return this.insert(T,m),T}createComponent(u,l,g,m,y){const T=u&&!function Lc(o){return"function"==typeof o}(u);let A;if(T)A=l;else{const te=l||{};A=te.index,g=te.injector,m=te.projectableNodes,y=te.environmentInjector||te.ngModuleRef}const R=T?u:new qh(jn(u)),B=g||this.parentInjector;if(!y&&null==R.ngModule){const Ee=(T?B:this.parentInjector).get(Vi,null);Ee&&(y=Ee)}const G=R.create(B,m,void 0,y);return this.insert(G.hostView,A),G}insert(u,l){const g=u._lView,m=g[1];if(function nh(o){return on(o[3])}(g)){const G=this.indexOf(u);if(-1!==G)this.detach(G);else{const te=g[3],Ee=new Ab(te,te[6],te[3]);Ee.detach(Ee.indexOf(u))}}const y=this._adjustIndex(l),T=this._lContainer;!function $c(o,u,l,g){const m=10+g,y=l.length;g>0&&(l[m-1][4]=u),g<y-10?(u[4]=l[m],Zu(l,10+g,u)):(l.push(u),u[4]=null),u[3]=l;const T=u[17];null!==T&&l!==T&&function gd(o,u){const l=o[9];u[16]!==u[3][3][16]&&(o[2]=!0),null===l?o[9]=[u]:l.push(u)}(T,u);const A=u[19];null!==A&&A.insertView(o),u[2]|=64}(m,g,T,y);const A=gs(y,T),R=g[11],B=Rf(R,T[7]);return null!==B&&function ic(o,u,l,g,m,y){g[0]=m,g[6]=u,Pf(o,g,l,1,m,y)}(m,T[6],R,g,B,A),u.attachToViewContainerRef(),Zu(ww(T),y,u),u}move(u,l){return this.insert(u,l)}indexOf(u){const l=zT(this._lContainer);return null!==l?l.indexOf(u):-1}remove(u){const l=this._adjustIndex(u,-1),g=md(this._lContainer,l);g&&(No(ww(this._lContainer),l),_g(g[1],g))}detach(u){const l=this._adjustIndex(u,-1),g=md(this._lContainer,l);return g&&null!=No(ww(this._lContainer),l)?new dp(g):null}_adjustIndex(u,l=0){return u??this.length+l}};function zT(o){return o[8]}function ww(o){return o[8]||(o[8]=[])}function Dw(o,u){let l;const g=u[o.index];if(on(g))l=g;else{let m;if(8&o.type)m=Lr(g);else{const y=u[11];m=y.createComment("");const T=qr(o,u);oc(y,Rf(y,T),m,function by(o,u){return o.nextSibling(u)}(y,T),!1)}u[o.index]=l=u0(g,u,m,o),Qg(u,l)}return new Ab(l,o,u)}class xb{constructor(u){this.queryList=u,this.matches=null}clone(){return new xb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tw{constructor(u=[]){this.queries=u}createEmbeddedView(u){const l=u.queries;if(null!==l){const g=null!==u.contentQueries?u.contentQueries[0]:l.length,m=[];for(let y=0;y<g;y++){const T=l.getByIndex(y);m.push(this.queries[T.indexInDeclarationView].clone())}return new Tw(m)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let l=0;l<this.queries.length;l++)null!==Iw(u,l).matches&&this.queries[l].setDirty()}}class lf{constructor(u,l,g=null){this.predicate=u,this.flags=l,this.read=g}}class Qc{constructor(u=[]){this.queries=u}elementStart(u,l){for(let g=0;g<this.queries.length;g++)this.queries[g].elementStart(u,l)}elementEnd(u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(u)}embeddedTView(u){let l=null;for(let g=0;g<this.length;g++){const m=null!==l?l.length:0,y=this.getByIndex(g).embeddedTView(u,m);y&&(y.indexInDeclarationView=g,null!==l?l.push(y):l=[y])}return null!==l?new Qc(l):null}template(u,l){for(let g=0;g<this.queries.length;g++)this.queries[g].template(u,l)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class Tm{constructor(u,l=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(u,l){this.isApplyingToNode(l)&&this.matchTNode(u,l)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,l){this.elementStart(u,l)}embeddedTView(u,l){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,l),new Tm(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let g=u.parent;for(;null!==g&&8&g.type&&g.index!==l;)g=g.parent;return l===(null!==g?g.index:-1)}return this._appliesToNextNode}matchTNode(u,l){const g=this.metadata.predicate;if(Array.isArray(g))for(let m=0;m<g.length;m++){const y=g[m];this.matchTNodeWithReadOption(u,l,Nb(l,y)),this.matchTNodeWithReadOption(u,l,Ia(l,u,y,!1,!1))}else g===Dm?4&l.type&&this.matchTNodeWithReadOption(u,l,-1):this.matchTNodeWithReadOption(u,l,Ia(l,u,g,!1,!1))}matchTNodeWithReadOption(u,l,g){if(null!==g){const m=this.metadata.read;if(null!==m)if(m===Gc||m===Pp||m===Dm&&4&l.type)this.addMatch(l.index,-2);else{const y=Ia(l,u,m,!1,!1);null!==y&&this.addMatch(l.index,y)}else this.addMatch(l.index,g)}}addMatch(u,l){null===this.matches?this.matches=[u,l]:this.matches.push(u,l)}}function Nb(o,u){const l=o.localNames;if(null!==l)for(let g=0;g<l.length;g+=2)if(l[g]===u)return l[g+1];return null}function yi(o,u,l,g){return-1===l?function KT(o,u){return 11&o.type?Fh(o,u):4&o.type?Av(o,u):null}(u,o):-2===l?function Mb(o,u,l){return l===Gc?Fh(u,o):l===Dm?Av(u,o):l===Pp?Dw(u,o):void 0}(o,u,g):xo(o,o[1],l,u)}function Sm(o,u,l,g){const m=u[19].queries[g];if(null===m.matches){const y=o.data,T=l.matches,A=[];for(let R=0;R<T.length;R+=2){const B=T[R];A.push(B<0?null:yi(u,y[B],T[R+1],l.metadata.read))}m.matches=A}return m.matches}function Lp(o,u,l,g){const m=o.queries.getByIndex(l),y=m.matches;if(null!==y){const T=Sm(o,u,m,l);for(let A=0;A<y.length;A+=2){const R=y[A];if(R>0)g.push(T[A/2]);else{const B=y[A+1],G=u[-R];for(let te=10;te<G.length;te++){const Ee=G[te];Ee[17]===Ee[3]&&Lp(Ee[1],Ee,B,g)}if(null!==G[9]){const te=G[9];for(let Ee=0;Ee<te.length;Ee++){const Ae=te[Ee];Lp(Ae[1],Ae,B,g)}}}}}return g}function ZT(o){const u=tt(),l=kn(),g=Zo();Ks(g+1);const m=Iw(l,g);if(o.dirty&&function al(o){return 4==(4&o[2])}(u)===(2==(2&m.metadata.flags))){if(null===m.matches)o.reset([]);else{const y=m.crossesNgTemplate?Lp(l,u,g,[]):Sm(l,u,m,g);o.reset(y,__),o.notifyOnChanges()}return!0}return!1}function Sw(o,u,l){const g=kn();g.firstCreatePass&&(Im(g,new lf(o,u,l),-1),2==(2&u)&&(g.staticViewQueries=!0)),QT(g,tt(),u)}function YT(o,u,l,g){const m=kn();if(m.firstCreatePass){const y=ri();Im(m,new lf(u,l,g),y.index),function df(o,u){const l=o.contentQueries||(o.contentQueries=[]);u!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,u)}(m,o),2==(2&l)&&(m.staticContentQueries=!0)}QT(m,tt(),l)}function JT(){return function CI(o,u){return o[19].queries[u].queryList}(tt(),Zo())}function QT(o,u,l){const g=new Ib(4==(4&l));R_(o,u,g,g.destroy),null===u[19]&&(u[19]=new Tw),u[19].queries.push(new xb(g))}function Im(o,u,l){null===o.queries&&(o.queries=new Qc),o.queries.track(new Tm(u,l))}function Iw(o,u){return o.queries.getByIndex(u)}function Aw(o,u){return Av(o,u)}function Up(...o){}const Gw=new Hn("Application Initializer");let Mv=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Up,this.reject=Up,this.initialized=!1,this.done=!1,this.donePromise=new Promise((g,m)=>{this.resolve=g,this.reject=m})}runInitializers(){if(this.initialized)return;const l=[],g=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const y=this.appInits[m]();if(K_(y))l.push(y);else if(T0(y)){const T=new Promise((A,R)=>{y.subscribe({complete:A,error:R})});l.push(T)}}Promise.all(l).then(()=>{g()}).catch(m=>{this.reject(m)}),0===l.length&&g(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Xe(Gw,8))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const $p=new Hn("AppId",{providedIn:"root",factory:function a1(){return`${Rv()}${Rv()}${Rv()}`}});function Rv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const u1=new Hn("Platform Initializer"),VI=new Hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qw=new Hn("appBootstrapListener");let UI=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Yi=new Hn("LocaleId",{providedIn:"root",factory:()=>ct(Yi,At.Optional|At.SkipSelf)||function c1(){return typeof $localize<"u"&&$localize.locale||bt}()}),Pm=new Hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ht{constructor(u,l){this.ngModuleFactory=u,this.componentFactories=l}}let Ji=(()=>{class o{compileModuleSync(l){return new hw(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const g=this.compileModuleSync(l),y=_u(Jr(l).declarations).reduce((T,A)=>{const R=jn(A);return R&&T.push(new qh(R)),T},[]);return new ht(g,y)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const at=(()=>Promise.resolve(0))();function Qi(o){typeof Zone>"u"?at.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class _c{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:g=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Du(!1),this.onMicrotaskEmpty=new Du(!1),this.onStable=new Du(!1),this.onError=new Du(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!g&&l,m.shouldCoalesceRunChangeDetection=g,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function f1(){let o=dn.requestAnimationFrame,u=dn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const g=u[Zone.__symbol__("OriginalDelegate")];g&&(u=g)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function p1(o){const u=()=>{!function jI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(dn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Kw(o),o.isCheckStableRunning=!0,zw(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Kw(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,g,m,y,T,A)=>{try{return HI(o),l.invokeTask(m,y,T,A)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||o.shouldCoalesceRunChangeDetection)&&u(),g1(o)}},onInvoke:(l,g,m,y,T,A,R)=>{try{return HI(o),l.invoke(m,y,T,A,R)}finally{o.shouldCoalesceRunChangeDetection&&u(),g1(o)}},onHasTask:(l,g,m,y)=>{l.hasTask(m,y),g===m&&("microTask"==y.change?(o._hasPendingMicrotasks=y.microTask,Kw(o),zw(o)):"macroTask"==y.change&&(o.hasPendingMacrotasks=y.macroTask))},onHandleError:(l,g,m,y)=>(l.handleError(m,y),o.runOutsideAngular(()=>o.onError.emit(y)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_c.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(_c.isInAngularZone())throw new Z(909,!1)}run(u,l,g){return this._inner.run(u,l,g)}runTask(u,l,g,m){const y=this._inner,T=y.scheduleEventTask("NgZoneEvent: "+m,u,$I,Up,Up);try{return y.runTask(T,l,g)}finally{y.cancelTask(T)}}runGuarded(u,l,g){return this._inner.runGuarded(u,l,g)}runOutsideAngular(u){return this._outer.run(u)}}const $I={};function zw(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Kw(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function HI(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function g1(o){o._nesting--,zw(o)}class m1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Du,this.onMicrotaskEmpty=new Du,this.onStable=new Du,this.onError=new Du}run(u,l,g){return u.apply(l,g)}runGuarded(u,l,g){return u.apply(l,g)}runOutsideAngular(u){return u()}runTask(u,l,g,m){return u.apply(l,g)}}const En=new Hn(""),Gp=new Hn("");let qp,_1=(()=>{class o{constructor(l,g,m){this._ngZone=l,this.registry=g,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,qp||(function rn(o){qp=o}(m),m.addToWindow(g)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_c.assertNotInAngularZone(),Qi(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qi(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(g=>!g.updateCb||!g.updateCb(l)||(clearTimeout(g.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,g,m){let y=-1;g&&g>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==y),l(this._didWork,this.getPendingTasks())},g)),this._callbacks.push({doneCb:l,timeoutId:y,updateCb:m})}whenStable(l,g,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,g,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,g,m){return[]}}return o.\u0275fac=function(l){return new(l||o)(Xe(_c),Xe(ai),Xe(Gp))},o.\u0275prov=tn({token:o,factory:o.\u0275fac}),o})(),ai=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,g){this._applications.set(l,g)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,g=!0){return qp?.findTestabilityInTree(this,l,g)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Fn=null;const v1=new Hn("AllowMultipleToken"),bi=new Hn("PlatformDestroyListeners");class GI{constructor(u,l){this.name=u,this.token=l}}function Zw(o,u,l=[]){const g=`Platform: ${u}`,m=new Hn(g);return(y=[])=>{let T=jb();if(!T||T.injector.get(v1,!1)){const A=[...l,...y,{provide:m,useValue:!0}];o?o(A):function Ub(o){if(Fn&&!Fn.get(v1,!1))throw new Z(400,!1);Fn=o;const u=o.get(Wd);(function Fm(o){const u=o.get(u1,null);u&&u.forEach(l=>l())})(o)}(function $b(o=[],u){return ra.create({name:u,providers:[{provide:pu,useValue:"platform"},{provide:bi,useValue:new Set([()=>Fn=null])},...o]})}(A,g))}return function Tu(o){const u=jb();if(!u)throw new Z(401,!1);return u}()}}function jb(){return Fn?.get(Wd)??null}let Wd=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,g){const m=function Ue(o,u){let l;return l="noop"===o?new m1:("zone.js"===o?void 0:o)||new _c(u),l}(g?.ngZone,function Hb(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(g)),y=[{provide:_c,useValue:m}];return m.run(()=>{const T=ra.create({providers:y,parent:this.injector,name:l.moduleType.name}),A=l.create(T),R=A.injector.get(go,null);if(!R)throw new Z(402,!1);return m.runOutsideAngular(()=>{const B=m.onError.subscribe({next:G=>{R.handleError(G)}});A.onDestroy(()=>{hf(this._modules,A),B.unsubscribe()})}),function Ov(o,u,l){try{const g=l();return K_(g)?g.catch(m=>{throw u.runOutsideAngular(()=>o.handleError(m)),m}):g}catch(g){throw u.runOutsideAngular(()=>o.handleError(g)),g}}(R,m,()=>{const B=A.injector.get(Mv);return B.runInitializers(),B.donePromise.then(()=>(pc(A.injector.get(Yi,bt)||bt),this._moduleDoBootstrap(A),A))})})}bootstrapModule(l,g=[]){const m=vc({},g);return function Vb(o,u,l){const g=new hw(l);return Promise.resolve(g)}(0,0,l).then(y=>this.bootstrapModuleFactory(y,m))}_moduleDoBootstrap(l){const g=l.injector.get(Gb);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(m=>g.bootstrap(m));else{if(!l.instance.ngDoBootstrap)throw new Z(403,!1);l.instance.ngDoBootstrap(g)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Z(404,!1);this._modules.slice().forEach(g=>g.destroy()),this._destroyListeners.forEach(g=>g());const l=this._injector.get(bi,null);l&&(l.forEach(g=>g()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Xe(ra))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function vc(o,u){return Array.isArray(u)?u.reduce(vc,o):{...o,...u}}let Gb=(()=>{class o{constructor(l,g,m){this._zone=l,this._injector=g,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new U.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),T=new U.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{_c.assertNotInAngularZone(),Qi(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{_c.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),B.unsubscribe()}});this.isStable=(0,ce.T)(y,T.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,g){const m=l instanceof mu;if(!this._injector.get(Mv).done)throw!m&&Cr(l),new Z(405,false);let T;T=m?l:this._injector.get(Si).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const A=function Wp(o){return o.isBoundToModule}(T)?void 0:this._injector.get(cf),B=T.create(ra.NULL,[],g||T.selector,A),G=B.location.nativeElement,te=B.injector.get(En,null);return te?.registerApplication(G),B.onDestroy(()=>{this.detachView(B.hostView),hf(this.components,B),te?.unregisterApplication(G)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new Z(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const g=l;this._views.push(g),g.attachToAppRef(this)}detachView(l){const g=l;hf(this._views,g),g.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const g=this._injector.get(qw,[]);g.push(...this._bootstrapListeners),g.forEach(m=>m(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>hf(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Z(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(Xe(_c),Xe(Vi),Xe(go))},o.\u0275prov=tn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function hf(o,u){const l=o.indexOf(u);l>-1&&o.splice(l,1)}function zp(){return!1}function b1(){}let Su=(()=>{class o{}return o.__NG_ELEMENT_ID__=ZI,o})();function ZI(o){return function ff(o,u,l){if(wc(o)&&!l){const g=ni(o.index,u);return new dp(g,g)}return 47&o.type?new dp(u[16],u):null}(ri(),tt(),16==(16&o))}class Zp{constructor(){}supports(u){return Od(u)}create(u){return new Yp(u)}}const Yw=(o,u)=>u;class Yp{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||Yw}forEachItem(u){let l;for(l=this._itHead;null!==l;l=l._next)u(l)}forEachOperation(u){let l=this._itHead,g=this._removalsHead,m=0,y=null;for(;l||g;){const T=!g||l&&l.currentIndex<Xw(g,m,y)?l:g,A=Xw(T,m,y),R=T.currentIndex;if(T===g)m--,g=g._nextRemoved;else if(l=l._next,null==T.previousIndex)m++;else{y||(y=[]);const B=A-m,G=R-m;if(B!=G){for(let Ee=0;Ee<B;Ee++){const Ae=Ee<y.length?y[Ee]:y[Ee]=0,Je=Ae+Ee;G<=Je&&Je<B&&(y[Ee]=Ae+1)}y[T.previousIndex]=G-B}}A!==R&&u(T,A,R)}}forEachPreviousItem(u){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)u(l)}forEachAddedItem(u){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)u(l)}forEachMovedItem(u){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)u(l)}forEachRemovedItem(u){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)u(l)}forEachIdentityChange(u){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)u(l)}diff(u){if(null==u&&(u=[]),!Od(u))throw new Z(900,!1);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let m,y,T,l=this._itHead,g=!1;if(Array.isArray(u)){this.length=u.length;for(let A=0;A<this.length;A++)y=u[A],T=this._trackByFn(A,y),null!==l&&Object.is(l.trackById,T)?(g&&(l=this._verifyReinsertion(l,y,T,A)),Object.is(l.item,y)||this._addIdentityChange(l,y)):(l=this._mismatch(l,y,T,A),g=!0),l=l._next}else m=0,function _p(o,u){if(Array.isArray(o))for(let l=0;l<o.length;l++)u(o[l]);else{const l=o[fc()]();let g;for(;!(g=l.next()).done;)u(g.value)}}(u,A=>{T=this._trackByFn(m,A),null!==l&&Object.is(l.trackById,T)?(g&&(l=this._verifyReinsertion(l,A,T,m)),Object.is(l.item,A)||this._addIdentityChange(l,A)):(l=this._mismatch(l,A,T,m),g=!0),l=l._next,m++}),this.length=m;return this._truncate(l),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,l,g,m){let y;return null===u?y=this._itTail:(y=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null))?(Object.is(u.item,l)||this._addIdentityChange(u,l),this._reinsertAfter(u,y,m)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(g,m))?(Object.is(u.item,l)||this._addIdentityChange(u,l),this._moveAfter(u,y,m)):u=this._addAfter(new Jw(l,g),y,m),u}_verifyReinsertion(u,l,g,m){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null);return null!==y?u=this._reinsertAfter(y,u._prev,m):u.currentIndex!=m&&(u.currentIndex=m,this._addToMoves(u,m)),u}_truncate(u){for(;null!==u;){const l=u._next;this._addToRemovals(this._unlink(u)),u=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,l,g){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const m=u._prevRemoved,y=u._nextRemoved;return null===m?this._removalsHead=y:m._nextRemoved=y,null===y?this._removalsTail=m:y._prevRemoved=m,this._insertAfter(u,l,g),this._addToMoves(u,g),u}_moveAfter(u,l,g){return this._unlink(u),this._insertAfter(u,l,g),this._addToMoves(u,g),u}_addAfter(u,l,g){return this._insertAfter(u,l,g),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,l,g){const m=null===l?this._itHead:l._next;return u._next=m,u._prev=l,null===m?this._itTail=u:m._prev=u,null===l?this._itHead=u:l._next=u,null===this._linkedRecords&&(this._linkedRecords=new Qw),this._linkedRecords.put(u),u.currentIndex=g,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const l=u._prev,g=u._next;return null===l?this._itHead=g:l._next=g,null===g?this._itTail=l:g._prev=l,u}_addToMoves(u,l){return u.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qw),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,l){return u.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class Jw{constructor(u,l){this.item=u,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Fv{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,l){let g;for(g=this._head;null!==g;g=g._nextDup)if((null===l||l<=g.currentIndex)&&Object.is(g.trackById,u))return g;return null}remove(u){const l=u._prevDup,g=u._nextDup;return null===l?this._head=g:l._nextDup=g,null===g?this._tail=l:g._prevDup=l,null===this._head}}class Qw{constructor(){this.map=new Map}put(u){const l=u.trackById;let g=this.map.get(l);g||(g=new Fv,this.map.set(l,g)),g.add(u)}get(u,l){const m=this.map.get(u);return m?m.get(u,l):null}remove(u){const l=u.trackById;return this.map.get(l).remove(u)&&this.map.delete(l),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xw(o,u,l){const g=o.previousIndex;if(null===g)return g;let m=0;return l&&g<l.length&&(m=l[g]),g+u+m}class Lv{constructor(){}supports(u){return u instanceof Map||vp(u)}create(){return new Bv}}class Bv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let l;for(l=this._mapHead;null!==l;l=l._next)u(l)}forEachPreviousItem(u){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)u(l)}forEachChangedItem(u){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)u(l)}forEachAddedItem(u){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)u(l)}forEachRemovedItem(u){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)u(l)}diff(u){if(u){if(!(u instanceof Map||vp(u)))throw new Z(900,!1)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(u,(g,m)=>{if(l&&l.key===m)this._maybeAddToChanges(l,g),this._appendAfter=l,l=l._next;else{const y=this._getOrCreateRecordForKey(m,g);l=this._insertBeforeOrAppend(l,y)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let g=l;null!==g;g=g._nextRemoved)g===this._mapHead&&(this._mapHead=null),this._records.delete(g.key),g._nextRemoved=g._next,g.previousValue=g.currentValue,g.currentValue=null,g._prev=null,g._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,l){if(u){const g=u._prev;return l._next=u,l._prev=g,u._prev=l,g&&(g._next=l),u===this._mapHead&&(this._mapHead=l),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(u,l){if(this._records.has(u)){const m=this._records.get(u);this._maybeAddToChanges(m,l);const y=m._prev,T=m._next;return y&&(y._next=T),T&&(T._prev=y),m._next=null,m._prev=null,m}const g=new D1(u);return this._records.set(u,g),g.currentValue=l,this._addToAdditions(g),g}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,l){Object.is(l,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=l,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,l){u instanceof Map?u.forEach(l):Object.keys(u).forEach(g=>l(u[g],g))}}class D1{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function T1(){return new eD([new Zp])}let eD=(()=>{class o{constructor(l){this.factories=l}static create(l,g){if(null!=g){const m=g.factories.slice();l=l.concat(m)}return new o(l)}static extend(l){return{provide:o,useFactory:g=>o.create(l,g||T1()),deps:[[o,new k,new Pi]]}}find(l){const g=this.factories.find(m=>m.supports(l));if(null!=g)return g;throw new Z(901,!1)}}return o.\u0275prov=tn({token:o,providedIn:"root",factory:T1}),o})();function tD(){return new Ul([new Lv])}let Ul=(()=>{class o{constructor(l){this.factories=l}static create(l,g){if(g){const m=g.factories.slice();l=l.concat(m)}return new o(l)}static extend(l){return{provide:o,useFactory:g=>o.create(l,g||tD()),deps:[[o,new k,new Pi]]}}find(l){const g=this.factories.find(m=>m.supports(l));if(g)return g;throw new Z(901,!1)}}return o.\u0275prov=tn({token:o,providedIn:"root",factory:tD}),o})();const br=Zw(null,"core",[]);let Vm=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Xe(Gb))},o.\u0275mod=Gi({type:o}),o.\u0275inj=Mr({}),o})();function nD(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},310:()=>{"use strict";class hv extends Error{constructor(i){super(`No translation found for ${Ip(i)}.`),this.parsedMessage=i,this.type="MissingTranslationError"}}const sf=function(p,...i){if(sf.translate){const f=sf.translate(p,i);p=f[0],i=f[1]}let c=xp(p[0],p.raw[0]);for(let f=1;f<p.length;f++)c+=i[f-1]+xp(p[f],p.raw[f]);return c};function xp(p,i){return":"===i.charAt(0)?p.substring(function Z0(p,i){for(let c=1,f=1;c<p.length;c++,f++)if("\\"===i[f])f++;else if(":"===p[c])return c;throw new Error(`Unterminated $localize metadata block in "${i}".`)}(p,i)+1):p}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=sf},3942:(pt,de,F)=>{"use strict";F.d(de,{Z:()=>Ye});var O=F(2090),H=F(4859),U=F(9681),ce=F(1877);class fe{constructor(Z,X){this._delegate=Z,this.firebase=X,(0,U._addComponent)(Z,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Z.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this._delegate.automaticDataCollectionEnabled=Z}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Z=>{this._delegate.checkDestroyed(),Z()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Z,X=U._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const ie=this._delegate.container.getProvider(Z);return!ie.isInitialized()&&"EXPLICIT"===(null===(he=ie.getComponent())||void 0===he?void 0:he.instantiationMode)&&ie.initialize(),ie.getImmediate({identifier:X})}_removeServiceInstance(Z,X=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Z).clearInstance(X)}_addComponent(Z){(0,U._addComponent)(this._delegate,Z)}_addOrOverwriteComponent(Z){(0,U._addOrOverwriteComponent)(this._delegate,Z)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const je=new O.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function J(){const st=function K(st){const Z={},X={__esModule:!0,initializeApp:function me(ve,xe={}){const Le=U.initializeApp(ve,xe);if((0,O.r3)(Z,Le.name))return Z[Le.name];const Ie=new st(Le,X);return Z[Le.name]=Ie,Ie},app:ie,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Te(ve){const xe=ve.name,Le=xe.replace("-compat","");if(U._registerComponent(ve)&&"PUBLIC"===ve.type){const Ie=(Oe=ie())=>{if("function"!=typeof Oe[Le])throw je.create("invalid-app-argument",{appName:xe});return Oe[Le]()};void 0!==ve.serviceProps&&(0,O.ZB)(Ie,ve.serviceProps),X[Le]=Ie,st.prototype[Le]=function(...Oe){return this._getService.bind(this,xe).apply(this,ve.multipleInstances?Oe:[])}}return"PUBLIC"===ve.type?X[Le]:null},removeApp:function he(ve){delete Z[ve]},useAsService:function Ke(ve,xe){return"serverAuth"===xe?null:xe},modularAPIs:U}};function ie(ve){if(!(0,O.r3)(Z,ve=ve||U._DEFAULT_ENTRY_NAME))throw je.create("no-app",{appName:ve});return Z[ve]}return X.default=X,Object.defineProperty(X,"apps",{get:function Be(){return Object.keys(Z).map(ve=>Z[ve])}}),ie.App=st,X}(fe);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:J,extendNamespace:function Z(X){(0,O.ZB)(st,X)},createSubscribe:O.ne,ErrorFactory:O.LL,deepExtend:O.ZB}),st}(),ee=new ce.Yd("@firebase/app-compat");if((0,O.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=Y;!function Ce(st){(0,U.registerVersion)("@firebase/app-compat","0.2.0",st)}()},9681:(pt,de,F)=>{"use strict";F.r(de),F.d(de,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>Ei,_DEFAULT_ENTRY_NAME:()=>mt,_addComponent:()=>Rn,_addOrOverwriteComponent:()=>ur,_apps:()=>sn,_clearComponents:()=>Mr,_components:()=>Mt,_getProvider:()=>tn,_registerComponent:()=>_n,_removeServiceInstance:()=>js,deleteApp:()=>ts,getApp:()=>lr,getApps:()=>es,initializeApp:()=>ws,onLog:()=>At,registerVersion:()=>jr,setLogLevel:()=>ci});var O=F(5861),H=F(4859),U=F(1877),ce=F(2090),fe=F(8766);class d{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(ct=>{if(function je(Xe){return"VERSION"===Xe.getComponent()?.type}(ct)){const nn=ct.getImmediate();return`${nn.library}/${nn.version}`}return null}).filter(ct=>ct).join(" ")}}const K="@firebase/app",J="0.9.0",Y=new U.Yd("@firebase/app"),mt="[DEFAULT]",Qt={[K]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,Mt=new Map;function Rn(Xe,Ze){try{Xe.container.addComponent(Ze)}catch(ct){Y.debug(`Component ${Ze.name} failed to register with FirebaseApp ${Xe.name}`,ct)}}function ur(Xe,Ze){Xe.container.addOrOverwriteComponent(Ze)}function _n(Xe){const Ze=Xe.name;if(Mt.has(Ze))return Y.debug(`There were multiple attempts to register component ${Ze}.`),!1;Mt.set(Ze,Xe);for(const ct of sn.values())Rn(ct,Xe);return!0}function tn(Xe,Ze){const ct=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return ct&&ct.triggerHeartbeat(),Xe.container.getProvider(Ze)}function js(Xe,Ze,ct=mt){tn(Xe,Ze).clearInstance(ct)}function Mr(){Mt.clear()}const qn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cr{constructor(Ze,ct,nn){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},ct),this._name=ct.name,this._automaticDataCollectionEnabled=ct.automaticDataCollectionEnabled,this._container=nn,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}const Ei="9.15.0";function ws(Xe,Ze={}){let ct=Xe;"object"!=typeof Ze&&(Ze={name:Ze});const nn=Object.assign({name:mt,automaticDataCollectionEnabled:!1},Ze),Kt=nn.name;if("string"!=typeof Kt||!Kt)throw qn.create("bad-app-name",{appName:String(Kt)});if(ct||(ct=(0,ce.aH)()),!ct)throw qn.create("no-options");const ln=sn.get(Kt);if(ln){if((0,ce.vZ)(ct,ln.options)&&(0,ce.vZ)(nn,ln.config))return ln;throw qn.create("duplicate-app",{appName:Kt})}const ge=new H.H0(Kt);for(const ye of Mt.values())ge.addComponent(ye);const le=new cr(ct,nn,ge);return sn.set(Kt,le),le}function lr(Xe=mt){const Ze=sn.get(Xe);if(!Ze&&Xe===mt)return ws();if(!Ze)throw qn.create("no-app",{appName:Xe});return Ze}function es(){return Array.from(sn.values())}function ts(Xe){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(Xe){const Ze=Xe.name;sn.has(Ze)&&(sn.delete(Ze),yield Promise.all(Xe.container.getProviders().map(ct=>ct.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function jr(Xe,Ze,ct){var nn;let Kt=null!==(nn=Qt[Xe])&&void 0!==nn?nn:Xe;ct&&(Kt+=`-${ct}`);const ln=Kt.match(/\s|\//),ge=Ze.match(/\s|\//);if(ln||ge){const le=[`Unable to register library "${Kt}" with version "${Ze}":`];return ln&&le.push(`library name "${Kt}" contains illegal characters (whitespace or "/")`),ln&&ge&&le.push("and"),ge&&le.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void Y.warn(le.join(" "))}_n(new H.wA(`${Kt}-version`,()=>({library:Kt,version:Ze}),"VERSION"))}function At(Xe,Ze){if(null!==Xe&&"function"!=typeof Xe)throw qn.create("invalid-log-argument");(0,U.Am)(Xe,Ze)}function ci(Xe){(0,U.Ub)(Xe)}const li="firebase-heartbeat-store";let ns=null;function dn(){return ns||(ns=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,Ze)=>{0===Ze&&Xe.createObjectStore(li)}}).catch(Xe=>{throw qn.create("idb-open",{originalErrorMessage:Xe.message})})),ns}function la(){return(la=(0,O.Z)(function*(Xe){try{return(yield dn()).transaction(li).objectStore(li).get(Sn(Xe))}catch(Ze){if(Ze instanceof ce.ZR)Y.warn(Ze.message);else{const ct=qn.create("idb-get",{originalErrorMessage:Ze?.message});Y.warn(ct.message)}}})).apply(this,arguments)}function Wn(Xe,Ze){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,O.Z)(function*(Xe,Ze){try{const nn=(yield dn()).transaction(li,"readwrite");return yield nn.objectStore(li).put(Ze,Sn(Xe)),nn.done}catch(ct){if(ct instanceof ce.ZR)Y.warn(ct.message);else{const nn=qn.create("idb-set",{originalErrorMessage:ct?.message});Y.warn(nn.message)}}})).apply(this,arguments)}function Sn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Hs{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const ct=this.container.getProvider("app").getImmediate();this._storage=new ir(ct),this._heartbeatsCachePromise=this._storage.read().then(nn=>(this._heartbeatsCache=nn,nn))}triggerHeartbeat(){var Ze=this;return(0,O.Z)(function*(){const nn=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Kt=rr();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==Kt&&!Ze._heartbeatsCache.heartbeats.some(ln=>ln.date===Kt))return Ze._heartbeatsCache.heartbeats.push({date:Kt,agent:nn}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(ln=>{const ge=new Date(ln.date).valueOf();return Date.now()-ge<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,O.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const ct=rr(),{heartbeatsToSend:nn,unsentEntries:Kt}=function Yr(Xe,Ze=1024){const ct=[];let nn=Xe.slice();for(const Kt of Xe){const ln=ct.find(ge=>ge.agent===Kt.agent);if(ln){if(ln.dates.push(Kt.date),Kn(ct)>Ze){ln.dates.pop();break}}else if(ct.push({agent:Kt.agent,dates:[Kt.date]}),Kn(ct)>Ze){ct.pop();break}nn=nn.slice(1)}return{heartbeatsToSend:ct,unsentEntries:nn}}(Ze._heartbeatsCache.heartbeats),ln=(0,ce.L)(JSON.stringify({version:2,heartbeats:nn}));return Ze._heartbeatsCache.lastSentHeartbeatDate=ct,Kt.length>0?(Ze._heartbeatsCache.heartbeats=Kt,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),ln})()}}function rr(){return(new Date).toISOString().substring(0,10)}class ir{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,O.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,O.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function oo(Xe){return la.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var ct=this;return(0,O.Z)(function*(){var nn;if(yield ct._canUseIndexedDBPromise){const ln=yield ct.read();return Wn(ct.app,{lastSentHeartbeatDate:null!==(nn=Ze.lastSentHeartbeatDate)&&void 0!==nn?nn:ln.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var ct=this;return(0,O.Z)(function*(){var nn;if(yield ct._canUseIndexedDBPromise){const ln=yield ct.read();return Wn(ct.app,{lastSentHeartbeatDate:null!==(nn=Ze.lastSentHeartbeatDate)&&void 0!==nn?nn:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...Ze.heartbeats]})}})()}}function Kn(Xe){return(0,ce.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function gn(Xe){_n(new H.wA("platform-logger",Ze=>new d(Ze),"PRIVATE")),_n(new H.wA("heartbeat",Ze=>new Hs(Ze),"PRIVATE")),jr(K,J,Xe),jr(K,J,"esm2017"),jr("fire-js","")}("")},4859:(pt,de,F)=>{"use strict";F.d(de,{H0:()=>K,wA:()=>U});var O=F(5861),H=F(2090);class U{constructor(Y,ee,pe){this.name=Y,this.instanceFactory=ee,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const ce="[DEFAULT]";class fe{constructor(Y,ee){this.name=Y,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const ee=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(ee)){const pe=new H.BH;if(this.instancesDeferred.set(ee,pe),this.isInitialized(ee)||this.shouldAutoInitialize())try{const Qe=this.getOrInitializeService({instanceIdentifier:ee});Qe&&pe.resolve(Qe)}catch{}}return this.instancesDeferred.get(ee).promise}getImmediate(Y){var ee;const pe=this.normalizeInstanceIdentifier(Y?.identifier),Qe=null!==(ee=Y?.optional)&&void 0!==ee&&ee;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(Qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ce){if(Qe)return null;throw Ce}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function je(J){return"EAGER"===J.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[ee,pe]of this.instancesDeferred.entries()){const Qe=this.normalizeInstanceIdentifier(ee);try{const Ce=this.getOrInitializeService({instanceIdentifier:Qe});pe.resolve(Ce)}catch{}}}}clearInstance(Y=ce){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,O.Z)(function*(){const ee=Array.from(Y.instances.values());yield Promise.all([...ee.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...ee.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=ce){return this.instances.has(Y)}getOptions(Y=ce){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:ee={}}=Y,pe=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Qe=this.getOrInitializeService({instanceIdentifier:pe,options:ee});for(const[Ce,Ye]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ce)&&Ye.resolve(Qe);return Qe}onInit(Y,ee){var pe;const Qe=this.normalizeInstanceIdentifier(ee),Ce=null!==(pe=this.onInitCallbacks.get(Qe))&&void 0!==pe?pe:new Set;Ce.add(Y),this.onInitCallbacks.set(Qe,Ce);const Ye=this.instances.get(Qe);return Ye&&Y(Ye,Qe),()=>{Ce.delete(Y)}}invokeOnInitCallbacks(Y,ee){const pe=this.onInitCallbacks.get(ee);if(pe)for(const Qe of pe)try{Qe(Y,ee)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:ee={}}){let pe=this.instances.get(Y);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(J=Y,J===ce?void 0:J),options:ee}),this.instances.set(Y,pe),this.instancesOptions.set(Y,ee),this.invokeOnInitCallbacks(pe,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,pe)}catch{}var J;return pe||null}normalizeInstanceIdentifier(Y=ce){return this.component?this.component.multipleInstances?Y:ce:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const ee=this.getProvider(Y.name);if(ee.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);ee.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const ee=new fe(Y,this);return this.providers.set(Y,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,de,F)=>{"use strict";F.d(de,{Am:()=>J,Ub:()=>K,Yd:()=>je,in:()=>H});const O=[];var H=(()=>{return(Y=H||(H={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",H;var Y})();const U={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ce=H.INFO,fe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},d=(Y,ee,...pe)=>{if(ee<Y.logLevel)return;const Qe=(new Date).toISOString(),Ce=fe[ee];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[Ce](`[${Qe}]  ${Y.name}:`,...pe)};class je{constructor(ee){this.name=ee,this._logLevel=ce,this._logHandler=d,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in H))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?U[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...ee),this._logHandler(this,H.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...ee),this._logHandler(this,H.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,H.INFO,...ee),this._logHandler(this,H.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,H.WARN,...ee),this._logHandler(this,H.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...ee),this._logHandler(this,H.ERROR,...ee)}}function K(Y){O.forEach(ee=>{ee.setLogLevel(Y)})}function J(Y,ee){for(const pe of O){let Qe=null;ee&&ee.level&&(Qe=U[ee.level]),pe.userLogHandler=null===Y?null:(Ce,Ye,...st)=>{const Z=st.map(X=>{if(null==X)return null;if("string"==typeof X)return X;if("number"==typeof X||"boolean"==typeof X)return X.toString();if(X instanceof Error)return X.message;try{return JSON.stringify(X)}catch{return null}}).filter(X=>X).join(" ");Ye>=(Qe??Ce.logLevel)&&Y({level:H[Ye].toLowerCase(),message:Z,args:st,type:Ce.name})}}}},259:(pt,de,F)=>{"use strict";F.d(de,{C6:()=>O.getApps,Mq:()=>O.getApp,ZF:()=>O.initializeApp});var O=F(9681);(0,O.registerVersion)("firebase","9.15.0","app")},9260:(pt,de,F)=>{"use strict";F.d(de,{Z:()=>O.Z});var O=F(3942);O.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(pt,de,F)=>{"use strict";F.r(de);var O=F(5861),H=F(3942),U=F(552),ce=F(2090),je=(F(9681),F(1877),F(4859));function K(){return window}function ee(){return(ee=(0,O.Z)(function*(oe,z,re){var Pe;const{BuildInfo:be}=K();(0,U.ap)(z.sessionId,"AuthEvent did not contain a session ID");const Lt=yield X(z.sessionId),vt={};return(0,U.aq)()?vt.ibi=be.packageName:(0,U.ar)()?vt.apn=be.packageName:(0,U.as)(oe,"operation-not-supported-in-this-environment"),be.displayName&&(vt.appDisplayName=be.displayName),vt.sessionId=Lt,(0,U.at)(oe,re,z.type,void 0,null!==(Pe=z.eventId)&&void 0!==Pe?Pe:void 0,vt)})).apply(this,arguments)}function Qe(){return(Qe=(0,O.Z)(function*(oe){const{BuildInfo:z}=K(),re={};(0,U.aq)()?re.iosBundleId=z.packageName:(0,U.ar)()?re.androidPackageName=z.packageName:(0,U.as)(oe,"operation-not-supported-in-this-environment"),yield(0,U.au)(oe,re)})).apply(this,arguments)}function st(){return(st=(0,O.Z)(function*(oe,z,re){const{cordova:Pe}=K();let be=()=>{};try{yield new Promise((Lt,vt)=>{let en=null;function yt(){var dt;Lt();const Hr=null===(dt=Pe.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof Hr&&Hr(),"function"==typeof re?.close&&re.close()}function Gn(){en||(en=window.setTimeout(()=>{vt((0,U.aw)(oe,"redirect-cancelled-by-user"))},2e3))}function Rr(){"visible"===document?.visibilityState&&Gn()}z.addPassiveListener(yt),document.addEventListener("resume",Gn,!1),(0,U.ar)()&&document.addEventListener("visibilitychange",Rr,!1),be=()=>{z.removePassiveListener(yt),document.removeEventListener("resume",Gn,!1),document.removeEventListener("visibilitychange",Rr,!1),en&&window.clearTimeout(en)}})}finally{be()}})).apply(this,arguments)}function X(oe){return he.apply(this,arguments)}function he(){return(he=(0,O.Z)(function*(oe){const z=ie(oe),re=yield crypto.subtle.digest("SHA-256",z);return Array.from(new Uint8Array(re)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ie(oe){if((0,U.ap)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(oe);const z=new ArrayBuffer(oe.length),re=new Uint8Array(z);for(let Pe=0;Pe<oe.length;Pe++)re[Pe]=oe.charCodeAt(Pe);return re}class Be extends U.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(z=>{this.resolveInialized=z})}addPassiveListener(z){this.passiveListeners.add(z)}removePassiveListener(z){this.passiveListeners.delete(z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(z){return this.resolveInialized(),this.passiveListeners.forEach(re=>re(z)),super.onEvent(z)}initialized(){var z=this;return(0,O.Z)(function*(){yield z.initPromise})()}}function ve(oe){return xe.apply(this,arguments)}function xe(){return(xe=(0,O.Z)(function*(oe){const z=yield Oe()._get($e(oe));return z&&(yield Oe()._remove($e(oe))),z})).apply(this,arguments)}function Ie(){const oe=[],z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let re=0;re<20;re++){const Pe=Math.floor(Math.random()*z.length);oe.push(z.charAt(Pe))}return oe.join("")}function Oe(){return(0,U.az)(U.b)}function $e(oe){return(0,U.aA)("authEvent",oe.config.apiKey,oe.name)}function He(oe){if(!oe?.includes("?"))return{};const[z,...re]=oe.split("?");return(0,ce.zd)(re.join("?"))}const mt=class lt{constructor(){this._redirectPersistence=U.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=U.aB,this._overrideRedirectResult=U.aC}_initialize(z){var re=this;return(0,O.Z)(function*(){const Pe=z._key();let be=re.eventManagers.get(Pe);return be||(be=new Be(z),re.eventManagers.set(Pe,be),re.attachCallbackListeners(z,be)),be})()}_openPopup(z){(0,U.as)(z,"operation-not-supported-in-this-environment")}_openRedirect(z,re,Pe,be){var Lt=this;return(0,O.Z)(function*(){!function Z(oe){var z,re,Pe,be,Lt,vt,en,yt,Gn,Rr;const dt=K();(0,U.ax)("function"==typeof(null===(z=dt?.universalLinks)||void 0===z?void 0:z.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,U.ax)(typeof(null===(re=dt?.BuildInfo)||void 0===re?void 0:re.packageName)<"u",oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,U.ax)("function"==typeof(null===(Lt=null===(be=null===(Pe=dt?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===be?void 0:be.browsertab)||void 0===Lt?void 0:Lt.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.ax)("function"==typeof(null===(yt=null===(en=null===(vt=dt?.cordova)||void 0===vt?void 0:vt.plugins)||void 0===en?void 0:en.browsertab)||void 0===yt?void 0:yt.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,U.ax)("function"==typeof(null===(Rr=null===(Gn=dt?.cordova)||void 0===Gn?void 0:Gn.InAppBrowser)||void 0===Rr?void 0:Rr.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(z);const vt=yield Lt._initialize(z);yield vt.initialized(),vt.resetRedirect(),(0,U.aD)(),yield Lt._originValidation(z);const en=function Te(oe,z,re=null){return{type:z,eventId:re,urlResponse:null,sessionId:Ie(),postBody:null,tenantId:oe.tenantId,error:(0,U.aw)(oe,"no-auth-event")}}(z,Pe,be);yield function Ke(oe,z){return Oe()._set($e(oe),z)}(z,en);const yt=yield function Y(oe,z,re){return ee.apply(this,arguments)}(z,en,re),Gn=yield function Ce(oe){const{cordova:z}=K();return new Promise(re=>{z.plugins.browsertab.isAvailable(Pe=>{let be=null;Pe?z.plugins.browsertab.openUrl(oe):be=z.InAppBrowser.open(oe,(0,U.av)()?"_blank":"_system","location=yes"),re(be)})})}(yt);return function Ye(oe,z,re){return st.apply(this,arguments)}(z,vt,Gn)})()}_isIframeWebStorageSupported(z,re){throw new Error("Method not implemented.")}_originValidation(z){const re=z._key();return this.originValidationPromises[re]||(this.originValidationPromises[re]=function pe(oe){return Qe.apply(this,arguments)}(z)),this.originValidationPromises[re]}attachCallbackListeners(z,re){const{universalLinks:Pe,handleOpenURL:be,BuildInfo:Lt}=K(),vt=setTimeout((0,O.Z)(function*(){yield ve(z),re.onEvent(Qt())}),500),en=function(){var Rr=(0,O.Z)(function*(dt){clearTimeout(vt);const Hr=yield ve(z);let Co=null;Hr&&dt?.url&&(Co=function Le(oe,z){var re,Pe;const be=function We(oe){const z=He(oe),re=z.link?decodeURIComponent(z.link):void 0,Pe=He(re).link,be=z.deep_link_id?decodeURIComponent(z.deep_link_id):void 0;return He(be).link||be||Pe||re||oe}(z);if(be.includes("/__/auth/callback")){const Lt=He(be),vt=Lt.firebaseError?function Ge(oe){try{return JSON.parse(oe)}catch{return null}}(decodeURIComponent(Lt.firebaseError)):null,en=null===(Pe=null===(re=vt?.code)||void 0===re?void 0:re.split("auth/"))||void 0===Pe?void 0:Pe[1],yt=en?(0,U.aw)(en):null;return yt?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:yt,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:be,postBody:null}}return null}(Hr,dt.url)),re.onEvent(Co||Qt())});return function(Hr){return Rr.apply(this,arguments)}}();typeof Pe<"u"&&"function"==typeof Pe.subscribe&&Pe.subscribe(null,en);const yt=be,Gn=`${Lt.packageName.toLowerCase()}://`;K().handleOpenURL=function(){var Rr=(0,O.Z)(function*(dt){if(dt.toLowerCase().startsWith(Gn)&&en({url:dt}),"function"==typeof yt)try{yt(dt)}catch(Hr){console.error(Hr)}});return function(dt){return Rr.apply(this,arguments)}}()}};function Qt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,U.aw)("no-auth-event")}}function _n(){var oe;return(null===(oe=self?.location)||void 0===oe?void 0:oe.protocol)||null}function js(oe=(0,ce.z$)()){return!("file:"!==_n()&&"ionic:"!==_n()&&"capacitor:"!==_n()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ei(){try{const oe=self.localStorage,z=U.aI();if(oe)return oe.setItem(z,"1"),oe.removeItem(z),!function cr(oe=(0,ce.z$)()){return function nr(){return(0,ce.w1)()&&11===document?.documentMode}()||function qn(oe=(0,ce.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,ce.hl)()}catch{return ws()&&(0,ce.hl)()}return!1}function ws(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function lr(){return(function tn(){return"http:"===_n()||"https:"===_n()}()||(0,ce.ru)()||js())&&!function Mr(){return(0,ce.b$)()||(0,ce.UG)()}()&&Ei()&&!ws()}function es(){return js()&&typeof document<"u"}function $n(){return($n=(0,O.Z)(function*(){return!!es()&&new Promise(oe=>{const z=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(z),oe(!0)})})})).apply(this,arguments)}const At={LOCAL:"local",NONE:"none",SESSION:"session"},ci=U.ax,zn="persistence";function li(oe){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(oe){yield oe._initializationPromise;const z=oo(),re=U.aA(zn,oe.config.apiKey,oe.name);z&&z.setItem(re,oe._getPersistence())})).apply(this,arguments)}function oo(){var oe;try{return(null===(oe=function jr(){return typeof window<"u"?window:null}())||void 0===oe?void 0:oe.sessionStorage)||null}catch{return null}}const la=U.ax;class Wn{constructor(){this.browserResolver=U.az(U.k),this.cordovaResolver=U.az(mt),this.underlyingResolver=null,this._redirectPersistence=U.a,this._completeRedirectFn=U.aB,this._overrideRedirectResult=U.aC}_initialize(z){var re=this;return(0,O.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._initialize(z)})()}_openPopup(z,re,Pe,be){var Lt=this;return(0,O.Z)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openPopup(z,re,Pe,be)})()}_openRedirect(z,re,Pe,be){var Lt=this;return(0,O.Z)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openRedirect(z,re,Pe,be)})()}_isIframeWebStorageSupported(z,re){this.assertedUnderlyingResolver._isIframeWebStorageSupported(z,re)}_originValidation(z){return this.assertedUnderlyingResolver._originValidation(z)}get _shouldInitProactively(){return es()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return la(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var z=this;return(0,O.Z)(function*(){if(z.underlyingResolver)return;const re=yield function ts(){return $n.apply(this,arguments)}();z.underlyingResolver=re?z.cordovaResolver:z.browserResolver})()}}function Ci(oe){return oe.unwrap()}function qt(oe){return Hs(oe)}function Hs(oe){const{_tokenResponse:z}=oe instanceof ce.ZR?oe.customData:oe;if(!z)return null;if(!(oe instanceof ce.ZR)&&"temporaryProof"in z&&"phoneNumber"in z)return U.P.credentialFromResult(oe);const re=z.providerId;if(!re||re===U.o.PASSWORD)return null;let Pe;switch(re){case U.o.GOOGLE:Pe=U.Q;break;case U.o.FACEBOOK:Pe=U.N;break;case U.o.GITHUB:Pe=U.T;break;case U.o.TWITTER:Pe=U.W;break;default:const{oauthIdToken:be,oauthAccessToken:Lt,oauthTokenSecret:vt,pendingToken:en,nonce:yt}=z;return Lt||vt||be||en?en?re.startsWith("saml.")?U.aL._create(re,en):U.J._fromParams({providerId:re,signInMethod:re,pendingToken:en,idToken:be,accessToken:Lt}):new U.U(re).credential({idToken:be,accessToken:Lt,rawNonce:yt}):null}return oe instanceof ce.ZR?Pe.credentialFromError(oe):Pe.credentialFromResult(oe)}function rr(oe,z){return z.catch(re=>{throw re instanceof ce.ZR&&function un(oe,z){var re;const Pe=null===(re=z.customData)||void 0===re?void 0:re._tokenResponse;if("auth/multi-factor-auth-required"===z?.code)z.resolver=new Kn(oe,U.an(oe,z));else if(Pe){const be=Hs(z),Lt=z;be&&(Lt.credential=be,Lt.tenantId=Pe.tenantId||void 0,Lt.email=Pe.email||void 0,Lt.phoneNumber=Pe.phoneNumber||void 0)}}(oe,re),re}).then(re=>{const be=re.user;return{operationType:re.operationType,credential:qt(re),additionalUserInfo:U.al(re),user:gn.getOrCreate(be)}})}function Yr(oe,z){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*(oe,z){const re=yield z;return{verificationId:re.verificationId,confirm:Pe=>rr(oe,re.confirm(Pe))}})).apply(this,arguments)}class Kn{constructor(z,re){this.resolver=re,this.auth=function Sn(oe){return oe.wrapped()}(z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(z){return rr(Ci(this.auth),this.resolver.resolveSignIn(z))}}class gn{constructor(z){this._delegate=z,this.multiFactor=U.ao(z)}static getOrCreate(z){return gn.USER_MAP.has(z)||gn.USER_MAP.set(z,new gn(z)),gn.USER_MAP.get(z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(z){return this._delegate.getIdTokenResult(z)}getIdToken(z){return this._delegate.getIdToken(z)}linkAndRetrieveDataWithCredential(z){return this.linkWithCredential(z)}linkWithCredential(z){var re=this;return(0,O.Z)(function*(){return rr(re.auth,U.Z(re._delegate,z))})()}linkWithPhoneNumber(z,re){var Pe=this;return(0,O.Z)(function*(){return Yr(Pe.auth,U.l(Pe._delegate,z,re))})()}linkWithPopup(z){var re=this;return(0,O.Z)(function*(){return rr(re.auth,U.d(re._delegate,z,Wn))})()}linkWithRedirect(z){var re=this;return(0,O.Z)(function*(){return yield li(U.aE(re.auth)),U.g(re._delegate,z,Wn)})()}reauthenticateAndRetrieveDataWithCredential(z){return this.reauthenticateWithCredential(z)}reauthenticateWithCredential(z){var re=this;return(0,O.Z)(function*(){return rr(re.auth,U._(re._delegate,z))})()}reauthenticateWithPhoneNumber(z,re){return Yr(this.auth,U.r(this._delegate,z,re))}reauthenticateWithPopup(z){return rr(this.auth,U.e(this._delegate,z,Wn))}reauthenticateWithRedirect(z){var re=this;return(0,O.Z)(function*(){return yield li(U.aE(re.auth)),U.h(re._delegate,z,Wn)})()}sendEmailVerification(z){return U.ab(this._delegate,z)}unlink(z){var re=this;return(0,O.Z)(function*(){return yield U.ak(re._delegate,z),re})()}updateEmail(z){return U.ag(this._delegate,z)}updatePassword(z){return U.ah(this._delegate,z)}updatePhoneNumber(z){return U.u(this._delegate,z)}updateProfile(z){return U.af(this._delegate,z)}verifyBeforeUpdateEmail(z,re){return U.ac(this._delegate,z,re)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gn.USER_MAP=new WeakMap;const Xe=U.ax;let Ze=(()=>{class oe{constructor(re,Pe){if(this.app=re,Pe.isInitialized())return this._delegate=Pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=re.options;Xe(be,"invalid-api-key",{appName:re.name}),Xe(be,"invalid-api-key",{appName:re.name});const Lt=typeof window<"u"?Wn:void 0;this._delegate=Pe.initialize({options:{persistence:nn(be,re.name),popupRedirectResolver:Lt}}),this._delegate._updateErrorMap(U.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(re){this._delegate.languageCode=re}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(re){this._delegate.tenantId=re}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(re,Pe){U.G(this._delegate,re,Pe)}applyActionCode(re){return U.a2(this._delegate,re)}checkActionCode(re){return U.a3(this._delegate,re)}confirmPasswordReset(re,Pe){return U.a1(this._delegate,re,Pe)}createUserWithEmailAndPassword(re,Pe){var be=this;return(0,O.Z)(function*(){return rr(be._delegate,U.a5(be._delegate,re,Pe))})()}fetchProvidersForEmail(re){return this.fetchSignInMethodsForEmail(re)}fetchSignInMethodsForEmail(re){return U.aa(this._delegate,re)}isSignInWithEmailLink(re){return U.a8(this._delegate,re)}getRedirectResult(){var re=this;return(0,O.Z)(function*(){Xe(lr(),re._delegate,"operation-not-supported-in-this-environment");const Pe=yield U.j(re._delegate,Wn);return Pe?rr(re._delegate,Promise.resolve(Pe)):{credential:null,user:null}})()}addFrameworkForLogging(re){!function sn(oe,z){(0,U.aE)(oe)._logFramework(z)}(this._delegate,re)}onAuthStateChanged(re,Pe,be){const{next:Lt,error:vt,complete:en}=ct(re,Pe,be);return this._delegate.onAuthStateChanged(Lt,vt,en)}onIdTokenChanged(re,Pe,be){const{next:Lt,error:vt,complete:en}=ct(re,Pe,be);return this._delegate.onIdTokenChanged(Lt,vt,en)}sendSignInLinkToEmail(re,Pe){return U.a7(this._delegate,re,Pe)}sendPasswordResetEmail(re,Pe){return U.a0(this._delegate,re,Pe||void 0)}setPersistence(re){var Pe=this;return(0,O.Z)(function*(){let be;switch(function pn(oe,z){ci(Object.values(At).includes(z),oe,"invalid-persistence-type"),(0,ce.b$)()?ci(z!==At.SESSION,oe,"unsupported-persistence-type"):(0,ce.UG)()?ci(z===At.NONE,oe,"unsupported-persistence-type"):ws()?ci(z===At.NONE||z===At.LOCAL&&(0,ce.hl)(),oe,"unsupported-persistence-type"):ci(z===At.NONE||Ei(),oe,"unsupported-persistence-type")}(Pe._delegate,re),re){case At.SESSION:be=U.a;break;case At.LOCAL:be=(yield U.az(U.i)._isAvailable())?U.i:U.b;break;case At.NONE:be=U.L;break;default:return U.as("argument-error",{appName:Pe._delegate.name})}return Pe._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(re){return this.signInWithCredential(re)}signInAnonymously(){return rr(this._delegate,U.X(this._delegate))}signInWithCredential(re){return rr(this._delegate,U.Y(this._delegate,re))}signInWithCustomToken(re){return rr(this._delegate,U.$(this._delegate,re))}signInWithEmailAndPassword(re,Pe){return rr(this._delegate,U.a6(this._delegate,re,Pe))}signInWithEmailLink(re,Pe){return rr(this._delegate,U.a9(this._delegate,re,Pe))}signInWithPhoneNumber(re,Pe){return Yr(this._delegate,U.s(this._delegate,re,Pe))}signInWithPopup(re){var Pe=this;return(0,O.Z)(function*(){return Xe(lr(),Pe._delegate,"operation-not-supported-in-this-environment"),rr(Pe._delegate,U.c(Pe._delegate,re,Wn))})()}signInWithRedirect(re){var Pe=this;return(0,O.Z)(function*(){return Xe(lr(),Pe._delegate,"operation-not-supported-in-this-environment"),yield li(Pe._delegate),U.f(Pe._delegate,re,Wn)})()}updateCurrentUser(re){return this._delegate.updateCurrentUser(re)}verifyPasswordResetCode(re){return U.a4(this._delegate,re)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=At,oe})();function ct(oe,z,re){let Pe=oe;"function"!=typeof oe&&({next:Pe,error:z,complete:re}=oe);const be=Pe;return{next:vt=>be(vt&&gn.getOrCreate(vt)),error:z,complete:re}}function nn(oe,z){const re=function dn(oe,z){const re=oo();if(!re)return[];const Pe=U.aA(zn,oe,z);switch(re.getItem(Pe)){case At.NONE:return[U.L];case At.LOCAL:return[U.i,U.a];case At.SESSION:return[U.a];default:return[]}}(oe,z);if(typeof self<"u"&&!re.includes(U.i)&&re.push(U.i),typeof window<"u")for(const Pe of[U.b,U.a])re.includes(Pe)||re.push(Pe);return re.includes(U.L)||re.push(U.L),re}class Kt{constructor(){this.providerId="phone",this._delegate=new U.P(Ci(H.Z.auth()))}static credential(z,re){return U.P.credential(z,re)}verifyPhoneNumber(z,re){return this._delegate.verifyPhoneNumber(z,re)}unwrap(){return this._delegate}}Kt.PHONE_SIGN_IN_METHOD=U.P.PHONE_SIGN_IN_METHOD,Kt.PROVIDER_ID=U.P.PROVIDER_ID;const ln=U.ax;class ge{constructor(z,re,Pe=H.Z.app()){var be;ln(null===(be=Pe.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:Pe.name}),this._delegate=new U.R(z,re,Pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ye(oe){oe.INTERNAL.registerComponent(new je.wA("auth-compat",z=>{const re=z.getProvider("app-compat").getImmediate(),Pe=z.getProvider("auth");return new Ze(re,Pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:U.A.EMAIL_SIGNIN,PASSWORD_RESET:U.A.PASSWORD_RESET,RECOVER_EMAIL:U.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:U.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:U.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:U.A.VERIFY_EMAIL}},EmailAuthProvider:U.M,FacebookAuthProvider:U.N,GithubAuthProvider:U.T,GoogleAuthProvider:U.Q,OAuthProvider:U.U,SAMLAuthProvider:U.V,PhoneAuthProvider:Kt,PhoneMultiFactorGenerator:U.m,RecaptchaVerifier:ge,TwitterAuthProvider:U.W,Auth:Ze,AuthCredential:U.H,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.3.0")}(H.Z)},8766:(pt,de,F)=>{"use strict";F.d(de,{Lj:()=>me,X3:()=>ie});var O=F(5861);let U,ce;const je=new WeakMap,K=new WeakMap,J=new WeakMap,Y=new WeakMap,ee=new WeakMap;let Ce={get(xe,Le,Ie){if(xe instanceof IDBTransaction){if("done"===Le)return K.get(xe);if("objectStoreNames"===Le)return xe.objectStoreNames||J.get(xe);if("store"===Le)return Ie.objectStoreNames[1]?void 0:Ie.objectStore(Ie.objectStoreNames[0])}return X(xe[Le])},set:(xe,Le,Ie)=>(xe[Le]=Ie,!0),has:(xe,Le)=>xe instanceof IDBTransaction&&("done"===Le||"store"===Le)||Le in xe};function Z(xe){return"function"==typeof xe?function st(xe){return xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function d(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(xe)?function(...Le){return xe.apply(he(this),Le),X(je.get(this))}:function(...Le){return X(xe.apply(he(this),Le))}:function(Le,...Ie){const Oe=xe.call(he(this),Le,...Ie);return J.set(Oe,Le.sort?Le.sort():[Le]),X(Oe)}}(xe):(xe instanceof IDBTransaction&&function Qe(xe){if(K.has(xe))return;const Le=new Promise((Ie,Oe)=>{const $e=()=>{xe.removeEventListener("complete",Ge),xe.removeEventListener("error",We),xe.removeEventListener("abort",We)},Ge=()=>{Ie(),$e()},We=()=>{Oe(xe.error||new DOMException("AbortError","AbortError")),$e()};xe.addEventListener("complete",Ge),xe.addEventListener("error",We),xe.addEventListener("abort",We)});K.set(xe,Le)}(xe),((xe,Le)=>Le.some(Ie=>xe instanceof Ie))(xe,function fe(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(xe,Ce):xe)}function X(xe){if(xe instanceof IDBRequest)return function pe(xe){const Le=new Promise((Ie,Oe)=>{const $e=()=>{xe.removeEventListener("success",Ge),xe.removeEventListener("error",We)},Ge=()=>{Ie(X(xe.result)),$e()},We=()=>{Oe(xe.error),$e()};xe.addEventListener("success",Ge),xe.addEventListener("error",We)});return Le.then(Ie=>{Ie instanceof IDBCursor&&je.set(Ie,xe)}).catch(()=>{}),ee.set(Le,xe),Le}(xe);if(Y.has(xe))return Y.get(xe);const Le=Z(xe);return Le!==xe&&(Y.set(xe,Le),ee.set(Le,xe)),Le}const he=xe=>ee.get(xe);function ie(xe,Le,{blocked:Ie,upgrade:Oe,blocking:$e,terminated:Ge}={}){const We=indexedDB.open(xe,Le),He=X(We);return Oe&&We.addEventListener("upgradeneeded",ot=>{Oe(X(We.result),ot.oldVersion,ot.newVersion,X(We.transaction))}),Ie&&We.addEventListener("blocked",()=>Ie()),He.then(ot=>{Ge&&ot.addEventListener("close",()=>Ge()),$e&&ot.addEventListener("versionchange",()=>$e())}).catch(()=>{}),He}function me(xe,{blocked:Le}={}){const Ie=indexedDB.deleteDatabase(xe);return Le&&Ie.addEventListener("blocked",()=>Le()),X(Ie).then(()=>{})}const Be=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Ke=new Map;function ve(xe,Le){if(!(xe instanceof IDBDatabase)||Le in xe||"string"!=typeof Le)return;if(Ke.get(Le))return Ke.get(Le);const Ie=Le.replace(/FromIndex$/,""),Oe=Le!==Ie,$e=Te.includes(Ie);if(!(Ie in(Oe?IDBIndex:IDBObjectStore).prototype)||!$e&&!Be.includes(Ie))return;const Ge=function(){var We=(0,O.Z)(function*(He,...ot){const lt=this.transaction(He,$e?"readwrite":"readonly");let mt=lt.store;return Oe&&(mt=mt.index(ot.shift())),(yield Promise.all([mt[Ie](...ot),$e&&lt.done]))[0]});return function(ot){return We.apply(this,arguments)}}();return Ke.set(Le,Ge),Ge}!function Ye(xe){Ce=xe(Ce)}(xe=>({...xe,get:(Le,Ie,Oe)=>ve(Le,Ie)||xe.get(Le,Ie,Oe),has:(Le,Ie)=>!!ve(Le,Ie)||xe.has(Le,Ie)}))},5861:(pt,de,F)=>{"use strict";function O(U,ce,fe,d,je,K,J){try{var Y=U[K](J),ee=Y.value}catch(pe){return void fe(pe)}Y.done?ce(ee):Promise.resolve(ee).then(d,je)}function H(U){return function(){var ce=this,fe=arguments;return new Promise(function(d,je){var K=U.apply(ce,fe);function J(ee){O(K,d,je,J,Y,"next",ee)}function Y(ee){O(K,d,je,J,Y,"throw",ee)}J(void 0)})}}F.d(de,{Z:()=>H})}},pt=>{var de=O=>pt(pt.s=O);de(310),de(7355)}]);