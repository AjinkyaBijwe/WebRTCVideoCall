"use strict";(self.webpackChunkvideoWebRTC=self.webpackChunkvideoWebRTC||[]).push([[792],{401:(Ii,_e,N)=>{N.d(_e,{Am:()=>tn,Bd:()=>ve,FA:()=>kt,Fy:()=>Ti,I9:()=>Or,Im:()=>ji,Ku:()=>Wt,Ll:()=>gn,T9:()=>pn,Uj:()=>gt,XA:()=>Zt,ZQ:()=>ot,bD:()=>ys,c1:()=>nr,cY:()=>en,eX:()=>ge,g:()=>je,gR:()=>cn,hp:()=>mo,jZ:()=>$n,lT:()=>Bo,lV:()=>Us,mS:()=>Ht,nr:()=>se,p7:()=>mn,sr:()=>wi,tD:()=>$i,u:()=>ue,zW:()=>fe,zw:()=>We});const K=function(V){const x=[];let j=0;for(let pe=0;pe<V.length;pe++){let G=V.charCodeAt(pe);G<128?x[j++]=G:G<2048?(x[j++]=G>>6|192,x[j++]=63&G|128):55296==(64512&G)&&pe+1<V.length&&56320==(64512&V.charCodeAt(pe+1))?(G=65536+((1023&G)<<10)+(1023&V.charCodeAt(++pe)),x[j++]=G>>18|240,x[j++]=G>>12&63|128,x[j++]=G>>6&63|128,x[j++]=63&G|128):(x[j++]=G>>12|224,x[j++]=G>>6&63|128,x[j++]=63&G|128)}return x},At={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,x){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let G=0;G<V.length;G+=3){const Ke=V[G],Ye=G+1<V.length,Fn=Ye?V[G+1]:0,Rt=G+2<V.length,ut=Rt?V[G+2]:0;let Gi=(15&Fn)<<2|ut>>6,bo=63&ut;Rt||(bo=64,Ye||(Gi=64)),pe.push(j[Ke>>2],j[(3&Ke)<<4|Fn>>4],j[Gi],j[bo])}return pe.join("")},encodeString(V,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(V):this.encodeByteArray(K(V),x)},decodeString(V,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(V):function(V){const x=[];let j=0,pe=0;for(;j<V.length;){const G=V[j++];if(G<128)x[pe++]=String.fromCharCode(G);else if(G>191&&G<224){const Ke=V[j++];x[pe++]=String.fromCharCode((31&G)<<6|63&Ke)}else if(G>239&&G<365){const Rt=((7&G)<<18|(63&V[j++])<<12|(63&V[j++])<<6|63&V[j++])-65536;x[pe++]=String.fromCharCode(55296+(Rt>>10)),x[pe++]=String.fromCharCode(56320+(1023&Rt))}else{const Ke=V[j++],Ye=V[j++];x[pe++]=String.fromCharCode((15&G)<<12|(63&Ke)<<6|63&Ye)}}return x.join("")}(this.decodeStringToByteArray(V,x))},decodeStringToByteArray(V,x){this.init_();const j=x?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let G=0;G<V.length;){const Ke=j[V.charAt(G++)],Fn=G<V.length?j[V.charAt(G)]:0;++G;const ut=G<V.length?j[V.charAt(G)]:64;++G;const Le=G<V.length?j[V.charAt(G)]:64;if(++G,null==Ke||null==Fn||null==ut||null==Le)throw new pt;pe.push(Ke<<2|Fn>>4),64!==ut&&(pe.push(Fn<<4&240|ut>>2),64!==Le&&pe.push(ut<<6&192|Le))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class pt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gt=function(V){return function(V){const x=K(V);return At.encodeByteArray(x,!0)}(V).replace(/\./g,"")},ue=function(V){try{return At.decodeString(V,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function We(V,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return x}for(const j in x)!x.hasOwnProperty(j)||!Mt(j)||(V[j]=We(V[j],x[j]));return V}function Mt(V){return"__proto__"!==V}function Ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wt=()=>{try{return Ht().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const x=V&&ue(V[1]);return x&&JSON.parse(x)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},pn=()=>{var V;return null===(V=wt())||void 0===V?void 0:V.config},Zt=V=>{var x;return null===(x=wt())||void 0===x?void 0:x[`_${V}`]};class en{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((x,j)=>{this.resolve=x,this.reject=j})}wrapCallback(x){return(j,pe)=>{j?this.reject(j):this.resolve(pe),"function"==typeof x&&(this.promise.catch(()=>{}),1===x.length?x(j):x(j,pe))}}}function Ti(V,x){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=x||"demo-project",G=V.iat||0,Ke=V.sub||V.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:G,exp:G+3600,auth_time:G,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},V);return[gt(JSON.stringify({alg:"none",type:"JWT"})),gt(JSON.stringify(Ye)),""].join(".")}function ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $n(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function gn(){var V;const x=null===(V=wt())||void 0===V?void 0:V.forceEnvironment;if("node"===x)return!0;if("browser"===x)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return typeof window<"u"||mn()}function mn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function nr(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function wi(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Us(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Bo(){const V=ot();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function se(){return!gn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise((V,x)=>{try{let j=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(pe);G.onsuccess=()=>{G.result.close(),j||self.indexedDB.deleteDatabase(pe),V(!0)},G.onupgradeneeded=()=>{j=!1},G.onerror=()=>{var Ke;x((null===(Ke=G.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(j){x(j)}})}class je extends Error{constructor(x,j,pe){super(j),this.code=x,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kt.prototype.create)}}class kt{constructor(x,j,pe){this.service=x,this.serviceName=j,this.errors=pe}create(x,...j){const pe=j[0]||{},G=`${this.service}/${x}`,Ke=this.errors[x],Ye=Ke?function Q(V,x){return V.replace(H,(j,pe)=>{const G=x[pe];return null!=G?String(G):`<${pe}?>`})}(Ke,pe):"Error";return new je(G,`${this.serviceName}: ${Ye} (${G}).`,pe)}}const H=/\{\$([^}]+)}/g;function cn(V,x){return Object.prototype.hasOwnProperty.call(V,x)}function ji(V){for(const x in V)if(Object.prototype.hasOwnProperty.call(V,x))return!1;return!0}function ys(V,x){if(V===x)return!0;const j=Object.keys(V),pe=Object.keys(x);for(const G of j){if(!pe.includes(G))return!1;const Ke=V[G],Ye=x[G];if(cr(Ke)&&cr(Ye)){if(!ys(Ke,Ye))return!1}else if(Ke!==Ye)return!1}for(const G of pe)if(!j.includes(G))return!1;return!0}function cr(V){return null!==V&&"object"==typeof V}function tn(V){const x=[];for(const[j,pe]of Object.entries(V))Array.isArray(pe)?pe.forEach(G=>{x.push(encodeURIComponent(j)+"="+encodeURIComponent(G))}):x.push(encodeURIComponent(j)+"="+encodeURIComponent(pe));return x.length?"&"+x.join("&"):""}function Or(V){const x={};return V.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[G,Ke]=pe.split("=");x[decodeURIComponent(G)]=decodeURIComponent(Ke)}}),x}function mo(V){const x=V.indexOf("?");if(!x)return"";const j=V.indexOf("#",x);return V.substring(x,j>0?j:void 0)}function $i(V,x){const j=new Hi(V,x);return j.subscribe.bind(j)}class Hi{constructor(x,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{x(this)}).catch(pe=>{this.error(pe)})}next(x){this.forEachObserver(j=>{j.next(x)})}error(x){this.forEachObserver(j=>{j.error(x)}),this.close(x)}complete(){this.forEachObserver(x=>{x.complete()}),this.close()}subscribe(x,j,pe){let G;if(void 0===x&&void 0===j&&void 0===pe)throw new Error("Missing Observer.");G=function ec(V,x){if("object"!=typeof V||null===V)return!1;for(const j of x)if(j in V&&"function"==typeof V[j])return!0;return!1}(x,["next","error","complete"])?x:{next:x,error:j,complete:pe},void 0===G.next&&(G.next=Fr),void 0===G.error&&(G.error=Fr),void 0===G.complete&&(G.complete=Fr);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),Ke}unsubscribeOne(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(x){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,x)}sendOne(x,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[x])try{j(this.observers[x])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(x){this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fr(){}function Wt(V){return V&&V._delegate?V._delegate:V}},510:(Ii,_e,N)=>{var I={};N.r(I),N.d(I,{fixNegotiationNeeded:()=>Rz,shimAddTrackRemoveTrack:()=>Sz,shimAddTrackRemoveTrackWithNative:()=>Az,shimGetSendersWithDtmf:()=>Cz,shimGetUserMedia:()=>Iz,shimMediaStream:()=>Tz,shimOnTrack:()=>wz,shimPeerConnection:()=>fO,shimSenderReceiverGetStats:()=>Dz});var Z={};N.r(Z),N.d(Z,{shimAddTransceiver:()=>Fz,shimCreateAnswer:()=>Bz,shimCreateOffer:()=>Vz,shimGetDisplayMedia:()=>Hye,shimGetParameters:()=>Lz,shimGetUserMedia:()=>Nz,shimOnTrack:()=>Mz,shimPeerConnection:()=>pO,shimRTCDataChannel:()=>kz,shimReceiverGetStats:()=>Pz,shimRemoveStream:()=>Oz,shimSenderGetStats:()=>xz});var oe={};N.r(oe),N.d(oe,{shimAudioContext:()=>Kz,shimCallbacksAPI:()=>$z,shimConstraints:()=>Gz,shimCreateOfferLegacy:()=>qz,shimGetUserMedia:()=>Hz,shimLocalStreamsAPI:()=>Uz,shimRTCIceServerUrls:()=>Wz,shimRemoteStreamsAPI:()=>jz,shimTrackEventTransceiver:()=>zz});var K={};N.r(K),N.d(K,{removeExtmapAllowMixed:()=>_O,shimAddIceCandidateNullOrEmpty:()=>cw,shimConnectionState:()=>mO,shimMaxMessageSize:()=>ow,shimParameterlessSetLocalDescription:()=>lw,shimRTCIceCandidate:()=>sw,shimRTCIceCandidateRelayProtocol:()=>gO,shimSendThrowTypeError:()=>aw});var S=N(467);let pt=null,gt=1;const ue=Symbol("SIGNAL");function re(n){const e=pt;return pt=n,e}function wt(n){if((!ve(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==gt)){if(!n.producerMustRecompute(n)&&!Ti(n))return n.dirty=!1,void(n.lastCleanEpoch=gt);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=gt}}function Ti(n){mn(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(wt(t),r!==t.version))return!0}return!1}function gn(n,e){if(function nr(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),mn(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)gn(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mn(i),i.producerIndexOfThis[r]=e}}function ve(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mn(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let se=null;function Ge(n){return"function"==typeof n}function cn(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ui=cn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ji(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ge(r))try{r()}catch(s){e=s instanceof Ui?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{go(s)}catch(o){e=e??[],o instanceof Ui?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ui(e)}}add(e){var t;if(e&&e!==this)if(this.closed)go(e);else{if(e instanceof kn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ji(t,e)}remove(e){const{_finalizers:t}=this;t&&ji(t,e),e instanceof kn&&e._removeParent(this)}}kn.EMPTY=(()=>{const n=new kn;return n.closed=!0,n})();const ys=kn.EMPTY;function cr(n){return n instanceof kn||n&&"closed"in n&&Ge(n.remove)&&Ge(n.add)&&Ge(n.unsubscribe)}function go(n){Ge(n)?n():n.unsubscribe()}const tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Or={setTimeout(n,e,...t){const{delegate:r}=Or;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Or;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mo(n){Or.setTimeout(()=>{const{onUnhandledError:e}=tn;if(!e)throw n;e(n)})}function kr(){}const $i=ec("C",void 0,void 0);function ec(n,e,t){return{kind:n,value:e,error:t}}let Fr=null;function _o(n){if(tn.useDeprecatedSynchronousErrorHandling){const e=!Fr;if(e&&(Fr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Fr;if(Fr=null,t)throw r}}else n()}class ha extends kn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cr(e)&&e.add(this)):this.destination=sl}static create(e,t,r){return new vr(e,t,r)}next(e){this.isStopped?jo(function wu(n){return ec("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?jo(function Hi(n){return ec("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jo($i,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const vs=Function.prototype.bind;function fa(n,e){return vs.call(n,e)}class Eh{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vo(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vo(r)}else vo(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vo(t)}}}class vr extends ha{constructor(e,t,r){let i;if(super(),Ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&tn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fa(e.next,s),error:e.error&&fa(e.error,s),complete:e.complete&&fa(e.complete,s)}):i=e}this.destination=new Eh(i)}}function vo(n){tn.useDeprecatedSynchronousErrorHandling?function yo(n){tn.useDeprecatedSynchronousErrorHandling&&Fr&&(Fr.errorThrown=!0,Fr.error=n)}(n):mo(n)}function jo(n,e){const{onStoppedNotification:t}=tn;t&&Or.setTimeout(()=>t(n,e))}const sl={closed:!0,next:kr,error:function Uo(n){throw n},complete:kr},$o="function"==typeof Symbol&&Symbol.observable||"@@observable";function bs(n){return n}function tc(n){return 0===n.length?bs:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Wt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function j(n){return n&&n instanceof ha||function x(n){return n&&Ge(n.next)&&Ge(n.error)&&Ge(n.complete)}(n)&&cr(n)}(t)?t:new vr(t,r,i);return _o(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=V(r))((i,s)=>{const o=new vr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[$o](){return this}pipe(...t){return tc(t)(this)}toPromise(t){return new(t=V(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function V(n){var e;return null!==(e=n??tn.Promise)&&void 0!==e?e:Promise}const pe=cn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let G=(()=>{class n extends Wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Ke(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new pe}next(t){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ys:(this.currentObservers=null,s.push(t),new kn(()=>{this.currentObservers=null,ji(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Wt;return t.source=this,t}}return n.create=(e,t)=>new Ke(e,t),n})();class Ke extends G{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ys}}class Ye extends G{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Fn(n){return Ge(n?.lift)}function Rt(n){return e=>{if(Fn(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ut(n,e,t,r,i){return new Lr(n,e,t,r,i)}class Lr extends ha{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Le(n,e){return Rt((t,r)=>{let i=0;t.subscribe(ut(r,s=>{r.next(n.call(e,s,i++))}))})}const bo="https://g.co/ng/security#xss";class be extends Error{constructor(e,t){super(function Ho(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ee(n){return{toString:n}.toString()}const he="__parameters__";function bt(n,e,t){return ee(()=>{const r=function vt(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,l,h){const g=c.hasOwnProperty(he)?c[he]:Object.defineProperty(c,he,{value:[]})[he];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const it=globalThis;function nn(n){for(let e in n)if(n[e]===nn)return e;throw Error("Could not find renamed property on target object.")}function Au(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function br(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(br).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Su(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const tC=nn({__forward_ref__:nn});function un(n){return n.__forward_ref__=un,n.toString=function(){return br(this())},n}function dt(n){return Th(n)?n():n}function Th(n){return"function"==typeof n&&n.hasOwnProperty(tC)&&n.__forward_ref__===un}function Ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ol(n){return wh(n,Dh)||wh(n,a0)}function wh(n,e){return n.hasOwnProperty(e)?n[e]:null}function al(n){return n&&(n.hasOwnProperty(Nu)||n.hasOwnProperty(wg))?n[Nu]:null}const Dh=nn({\u0275prov:nn}),Nu=nn({\u0275inj:nn}),a0=nn({ngInjectableDef:nn}),wg=nn({ngInjectorDef:nn});class Me{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rg(n){return n&&!!n.\u0275providers}const zi=nn({\u0275cmp:nn}),Ng=nn({\u0275dir:nn}),xu=nn({\u0275pipe:nn}),u0=nn({\u0275mod:nn}),$s=nn({\u0275fac:nn}),Pu=nn({__NG_ELEMENT_ID__:nn}),Rh=nn({__NG_ENV_ID__:nn});function Et(n){return"string"==typeof n?n:null==n?"":String(n)}function h0(n,e){throw new be(-201,!1)}var Ft=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ft||{});let Hs;function ic(){return Hs}function Er(n){const e=Hs;return Hs=n,e}function Mg(n,e,t){const r=ol(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ft.Optional?null:void 0!==e?e:void h0()}const ku={},ga="__NG_DI_FLAG__",Nh="ngTempTokenPath",f0=/\n/gm,xh="__source";let zr;function ma(n){const e=zr;return zr=n,e}function xg(n,e=Ft.Default){if(void 0===zr)throw new be(-203,!1);return null===zr?Mg(n,void 0,e):zr.get(n,e&Ft.Optional?null:void 0,e)}function Se(n,e=Ft.Default){return(ic()||xg)(dt(n),e)}function U(n,e=Ft.Default){return Se(n,Ph(e))}function Ph(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Fu(n){const e=[];for(let t=0;t<n.length;t++){const r=dt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new be(900,!1);let i,s=Ft.Default;for(let o=0;o<r.length;o++){const a=r[o],c=Og(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(Se(i,s))}else e.push(Se(r))}return e}function sc(n,e){return n[ga]=e,n.prototype[ga]=e,n}function Og(n){return n[ga]}const oc=sc(bt("Optional"),8),cl=sc(bt("SkipSelf"),4);function Go(n,e){return n.hasOwnProperty($s)?n[$s]:null}function ac(n,e){n.forEach(t=>Array.isArray(t)?ac(t,e):e(t))}function Fh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Lh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ci(n,e,t){let r=_a(n,e);return r>=0?n[1|r]=t:(r=~r,function ul(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function dl(n,e){const t=_a(n,e);if(t>=0)return n[1|t]}function _a(n,e){return function I0(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Ts={},Qt=[],Wo=new Me(""),T0=new Me("",-1),Lu=new Me("");class Vu{get(e,t=ku){if(t===ku){const r=new Error(`NullInjectorError: No provider for ${br(e)}!`);throw r.name="NullInjectorError",r}return t}}var hl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(hl||{}),Gs=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gs||{}),rn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(rn||{});function uC(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Bu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];C0(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function w0(n){return 3===n||4===n||6===n}function C0(n){return 64===n.charCodeAt(0)}function cc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||D0(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function D0(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const A0="ng-template";function Lg(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==uC(e[i+1].toLowerCase(),t,0))return!0}else if(Vg(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function Vg(n){return 4===n.type&&n.value!==A0}function Bg(n,e,t){return e===(4!==n.type||t?n.value:A0)}function dC(n,e,t){let r=4;const i=n.attrs,s=null!==i?function Ug(n){for(let e=0;e<n.length;e++)if(w0(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Bg(n,c,t)||""===c&&1===e.length){if(is(r))return!1;o=!0}}else if(8&r){if(null===i||!Lg(n,i,c,t)){if(is(r))return!1;o=!0}}else{const l=e[++a],h=hC(c,i,Vg(n),t);if(-1===h){if(is(r))return!1;o=!0;continue}if(""!==l){let g;if(g=h>s?"":i[h+1].toLowerCase(),2&r&&l!==g){if(is(r))return!1;o=!0}}}}else{if(!o&&!is(r)&&!is(c))return!1;if(o&&is(c))continue;o=!1,r=c|1&r}}return is(r)||o}function is(n){return!(1&n)}function hC(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function pC(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Vh(n,e,t=!1){for(let r=0;r<e.length;r++)if(dC(n,e[r],t))return!0;return!1}function jg(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function S0(n,e){return n?":not("+e.trim()+")":e}function $g(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!is(o)&&(e+=S0(s,i),i=""),r=o,s=s||!is(r);t++}return""!==i&&(e+=S0(s,i)),e}function pr(n){return ee(()=>{const e=yC(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===hl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gs.Emulated,styles:n.styles||Qt,_:null,schemas:n.schemas||null,tView:null,id:""};Bh(t);const r=n.dependencies;return t.directiveDefs=Uh(r,!1),t.pipeDefs=Uh(r,!0),t.id=function Ok(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function Hg(n){return Lt(n)||Ir(n)}function _C(n){return null!==n}function Bt(n){return ee(()=>({type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gg(n,e){if(null==n)return Ts;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=rn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==rn.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Be(n){return ee(()=>{const e=yC(n);return Bh(e),e})}function Lt(n){return n[zi]||null}function Ir(n){return n[Ng]||null}function qr(n){return n[xu]||null}function Di(n,e){const t=n[u0]||null;if(!t&&!0===e)throw new Error(`Type ${br(n)} does not have '\u0275mod' property.`);return t}function yC(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ts,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gg(n.inputs,e),outputs:Gg(n.outputs),debugInfo:null}}function Bh(n){n.features?.forEach(e=>e(n))}function Uh(n,e){if(!n)return null;const t=e?qr:Hg;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(_C)}function kk(...n){return{\u0275providers:R0(0,n),\u0275fromNgModule:!0}}function R0(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return ac(e,o=>{const a=o;zg(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&bC(i,s),t}function bC(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];zo(i,s=>{e(s,r)})}}function zg(n,e,t,r){if(!(n=dt(n)))return!1;let i=null,s=al(n);const o=!s&&Lt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=al(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)zg(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{ac(s.imports,h=>{zg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&bC(l,e)}if(!a){const l=Go(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:Lu,useValue:i,multi:!0},i),e({provide:Wo,useValue:()=>Se(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const l=n;zo(c,h=>{e(h,l)})}}}return i!==n&&void 0!==n.providers}function zo(n,e){for(let t of n)Rg(t)&&(t=t.\u0275providers),Array.isArray(t)?zo(t,e):e(t)}const qg=nn({provide:String,useValue:nn});function Kg(n){return null!==n&&"object"==typeof n&&qg in n}function fl(n){return"function"==typeof n}const Qg=new Me(""),pl={},Yg={};let Jg;function uc(){return void 0===Jg&&(Jg=new Vu),Jg}class Kr{}class gl extends Kr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zg(e,o=>this.processProvider(o)),this.records.set(T0,ss(void 0,this)),i.has("environment")&&this.records.set(Kr,ss(void 0,this));const s=this.records.get(Qg);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Lu,Qt,Ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=re(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),re(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=ma(this),r=Er(void 0);try{return e()}finally{ma(t),Er(r)}}get(e,t=ku,r=Ft.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Rh))return e[Rh](this);r=Ph(r);const s=ma(this),o=Er(void 0);try{if(!(r&Ft.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function Uu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Me}(e)&&ol(e);c=l&&this.injectableDefInScope(l)?ss(Xg(e),pl):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ft.Self?uc():this.parent).get(e,t=r&Ft.Optional&&t===ku?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Nh]=a[Nh]||[]).unshift(br(e)),s)throw a;return function Oh(n,e,t,r){const i=n[Nh];throw e[xh]&&i.unshift(e[xh]),n.message=function kg(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=br(e);if(Array.isArray(e))i=e.map(br).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):br(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(f0,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Nh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Er(o),ma(s)}}resolveInjectorInitializers(){const e=re(null),t=ma(this),r=Er(void 0);try{const s=this.get(Wo,Qt,Ft.Self);for(const o of s)o()}finally{ma(t),Er(r),re(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(br(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(e){let t=fl(e=dt(e))?e:dt(e&&e.provide);const r=function jh(n){return Kg(n)?ss(void 0,n.useValue):ss(IC(n),pl)}(e);if(!fl(e)&&!0===e.multi){let i=this.records.get(t);i||(i=ss(void 0,pl,!0),i.factory=()=>Fu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=re(null);try{return t.value===pl&&(t.value=Yg,t.value=t.factory()),"object"==typeof t.value&&t.value&&function wC(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=dt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Xg(n){const e=ol(n),t=null!==e?e.factory:Go(n);if(null!==t)return t;if(n instanceof Me)throw new be(204,!1);if(n instanceof Function)return function Fk(n){if(n.length>0)throw new be(204,!1);const t=function Ch(n){return n&&(n[Dh]||n[a0])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new be(204,!1)}function IC(n,e,t){let r;if(fl(n)){const i=dt(n);return Go(i)||Xg(i)}if(Kg(n))r=()=>dt(n.useValue);else if(function x0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Fu(n.deps||[]));else if(function M0(n){return!(!n||!n.useExisting)}(n))r=()=>Se(dt(n.useExisting));else{const i=dt(n&&(n.useClass||n.provide));if(!function TC(n){return!!n.deps}(n))return Go(i)||Xg(i);r=()=>new i(...Fu(n.deps))}return r}function ss(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Zg(n,e){for(const t of n)Array.isArray(t)?Zg(t,e):t&&Rg(t)?Zg(t.\u0275providers,e):e(t)}function In(n,e){n instanceof gl&&n.assertNotDestroyed();const r=ma(n),i=Er(void 0);try{return e()}finally{ma(r),Er(i)}}function P0(){return void 0!==ic()||null!=function g0(){return zr}()}const Sn=0,Re=1,rt=2,lr=3,Eo=4,ur=5,os=6,_l=7,Rn=8,gr=9,Ws=10,ct=11,Hu=12,F0=13,yl=14,Ln=15,Gu=16,vl=17,qo=18,Wu=19,rm=20,va=21,Gh=22,hc=23,_t=25,im=1,Io=7,El=9,Yn=10;var Il=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Il||{});function Vr(n){return Array.isArray(n)&&"object"==typeof n[im]}function li(n){return Array.isArray(n)&&!0===n[im]}function zu(n){return!!(4&n.flags)}function zs(n){return n.componentOffset>-1}function To(n){return!(1&~n.flags)}function as(n){return!!n.template}function sm(n){return!!(512&n[rt])}class PC{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function qh(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function Br(){return W0}function W0(n){return n.type.prototype.ngOnChanges&&(n.setInput=OC),cm}function cm(){const n=Kh(this),e=n?.current;if(e){const t=n.previous;if(t===Ts)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function OC(n,e,t,r,i){const s=this.declaredInputs[r],o=Kh(n)||function kC(n,e){return n[z0]=e}(n,{previous:Ts,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new PC(l&&l.currentValue,t,c===Ts),qh(n,e,i,t)}Br.ngInherit=!0;const z0="__ngSimpleChanges__";function Kh(n){return n[z0]||null}const ws=function(n,e,t){};let q0=!1;function _n(n){for(;Array.isArray(n);)n=n[Sn];return n}function Tl(n,e){return _n(e[n])}function Qr(n,e){return _n(e[n.index])}function Qu(n,e){return n.data[e]}function Ai(n,e){const t=e[n];return Vr(t)?t:t[Sn]}function dm(n){return!(128&~n[rt])}function wo(n,e){return null==e?null:n[e]}function Yu(n){n[vl]=0}function BC(n){1024&n[rt]||(n[rt]|=1024,dm(n)&&Ju(n))}function hm(n){return!!(9216&n[rt]||n[hc]?.dirty)}function fm(n){n[Ws].changeDetectionScheduler?.notify(1),hm(n)?Ju(n):64&n[rt]&&(function K0(){return q0}()?(n[rt]|=1024,Ju(n)):n[Ws].changeDetectionScheduler?.notify())}function Ju(n){n[Ws].changeDetectionScheduler?.notify();let e=pc(n);for(;null!==e&&!(8192&e[rt])&&(e[rt]|=8192,dm(e));)e=pc(e)}function Jh(n,e){if(!(256&~n[rt]))throw new be(911,!1);null===n[va]&&(n[va]=[]),n[va].push(e)}function pc(n){const e=n[lr];return li(e)?e[lr]:e}const ft={lFrame:rb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gm(){return ft.bindingsEnabled}function Cl(){return null!==ft.skipHydrationRootTNode}function le(){return ft.lFrame.lView}function Ut(){return ft.lFrame.tView}function Ct(n){return ft.lFrame.contextLView=n,n[Rn]}function xt(n){return ft.lFrame.contextLView=null,n}function dn(){let n=_m();for(;null!==n&&64===n.type;)n=n.parent;return n}function _m(){return ft.lFrame.currentTNode}function Co(n,e){const t=ft.lFrame;t.currentTNode=n,t.isParent=e}function X0(){return ft.lFrame.isParent}function Xu(){ft.lFrame.isParent=!1}function qs(){return ft.lFrame.bindingIndex++}function Qo(n){const e=ft.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function KC(n,e){const t=ft.lFrame;t.bindingIndex=t.bindingRootIndex=n,Em(e)}function Em(n){ft.lFrame.currentDirectiveIndex=n}function Im(){return ft.lFrame.currentQueryIndex}function Xh(n){ft.lFrame.currentQueryIndex=n}function Tm(n){const e=n[Re];return 2===e.type?e.declTNode:1===e.type?n[ur]:null}function tb(n,e,t){if(t&Ft.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ft.Host||(i=Tm(s),null===i||(s=s[yl],10&i.type))););if(null===i)return!1;e=i,n=s}const r=ft.lFrame=nb();return r.currentTNode=e,r.lView=n,!0}function Zu(n){const e=nb(),t=n[Re];ft.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nb(){const n=ft.lFrame,e=null===n?null:n.child;return null===e?rb(n):e}function rb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Zh(){const n=ft.lFrame;return ft.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ib=Zh;function wm(){const n=Zh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function di(){return ft.lFrame.selectedIndex}function mc(n){ft.lFrame.selectedIndex=n}function Nn(){const n=ft.lFrame;return Qu(n.tView,n.selectedIndex)}let ab=!0;function _c(){return ab}function Cs(n){ab=n}function ef(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function yc(n,e,t){cb(n,e,3,t)}function tf(n,e,t,r){(3&n[rt])===t&&cb(n,e,t,r)}function Am(n,e){let t=n[rt];(3&t)===e&&(t&=16383,t+=1,n[rt]=t)}function cb(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[vl]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[vl]+=65536),(a<s||-1==s)&&(XC(n,t,e,c),n[vl]=(4294901760&n[vl])+c+2),c++}function Sm(n,e){ws(4,n,e);const t=re(null);try{e.call(n)}finally{re(t),ws(5,n,e)}}function XC(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[rt]>>14<n[vl]>>16&&(3&n[rt])===e&&(n[rt]+=16384,Sm(a,s)):Sm(a,s)}const Dl=-1;class ed{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Rm(n){return n!==Dl}function Al(n){return 32767&n}function bc(n,e){let t=function Nm(n){return n>>16}(n),r=e;for(;t>0;)r=r[yl],t--;return r}let nf=!0;function rf(n){const e=nf;return nf=n,e}const db=255,Ki=5;let td=0;const Ks={};function Sl(n,e){const t=hb(n,e);if(-1!==t)return t;const r=e[Re];r.firstCreatePass&&(n.injectorIndex=e.length,nd(r.data,n),nd(e,null),nd(r.blueprint,null));const i=rd(n,e),s=n.injectorIndex;if(Rm(i)){const o=Al(i),a=bc(i,e),c=a[Re].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function nd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function rd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=yb(i),null===r)return Dl;if(t++,i=i[yl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Dl}function Mm(n,e,t){!function nD(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pu)&&(r=t[Pu]),null==r&&(r=t[Pu]=td++);const i=r&db;e.data[n+(i>>Ki)]|=1<<i}(n,e,t)}function xm(n,e,t){if(t&Ft.Optional||void 0!==n)return n;h0()}function fb(n,e,t,r){if(t&Ft.Optional&&void 0===r&&(r=null),!(t&(Ft.Self|Ft.Host))){const i=n[gr],s=Er(void 0);try{return i?i.get(e,r,t&Ft.Optional):Mg(e,r,t&Ft.Optional)}finally{Er(s)}}return xm(r,0,t)}function pb(n,e,t,r=Ft.Default,i){if(null!==n){if(2048&e[rt]&&!(r&Ft.Self)){const o=function iD(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[rt]&&!(512&o[rt]);){const a=gb(s,o,t,r|Ft.Self,Ks);if(a!==Ks)return a;let c=s.parent;if(!c){const l=o[rm];if(l){const h=l.get(t,Ks,r);if(h!==Ks)return h}c=yb(o),o=o[yl]}s=c}return i}(n,e,t,r,Ks);if(o!==Ks)return o}const s=gb(n,e,t,r,Ks);if(s!==Ks)return s}return fb(e,t,r,i)}function gb(n,e,t,r,i){const s=function Pm(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Pu)?n[Pu]:void 0;return"number"==typeof e?e>=0?e&db:rD:e}(t);if("function"==typeof s){if(!tb(e,n,r))return r&Ft.Host?xm(i,0,r):fb(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Ft.Optional)return o;h0()}finally{ib()}}else if("number"==typeof s){let o=null,a=hb(n,e),c=Dl,l=r&Ft.Host?e[Ln][ur]:null;for((-1===a||r&Ft.SkipSelf)&&(c=-1===a?rd(n,e):e[a+8],c!==Dl&&Do(r,!1)?(o=e[Re],a=Al(c),e=bc(c,e)):a=-1);-1!==a;){const h=e[Re];if(_b(s,a,h.data)){const g=mb(a,e,t,o,r,l);if(g!==Ks)return g}c=e[a+8],c!==Dl&&Do(r,e[Re].data[a+8]===l)&&_b(s,a,e)?(o=h,a=Al(c),e=bc(c,e)):a=-1}}return i}function mb(n,e,t,r,i,s){const o=e[Re],a=o.data[n+8],h=Yr(a,o,t,null==r?zs(a)&&nf:r!=o&&!!(3&a.type),i&Ft.Host&&s===a);return null!==h?Jo(e,o,h,a):Ks}function Yr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,h=s>>20,_=i?a+h:n.directiveEnd;for(let v=r?a:a+h;v<_;v++){const T=o[v];if(v<c&&t===T||v>=c&&T.type===t)return v}if(i){const v=o[c];if(v&&as(v)&&v.type===t)return c}return null}function Jo(n,e,t,r){let i=n[t];const s=e.data;if(function ZC(n){return n instanceof ed}(i)){const o=i;o.resolving&&function aC(n,e){throw e&&e.join(" > "),new be(-200,n)}(function on(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Et(n)}(s[t]));const a=rf(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Er(o.injectImpl):null;tb(n,r,Ft.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function JC(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=W0(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Er(l),rf(a),o.resolving=!1,ib()}}return i}function _b(n,e,t){return!!(t[e+(n>>Ki)]&1<<n)}function Do(n,e){return!(n&Ft.Self||n&Ft.Host&&e)}class mr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return pb(this._tNode,this._lView,e,Ph(r),t)}}function rD(){return new mr(dn(),le())}function Tn(n){return ee(()=>{const e=n.prototype.constructor,t=e[$s]||Om(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[$s]||Om(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Om(n){return Th(n)?()=>{const e=Om(dt(n));return e&&e()}:Go(n)}function yb(n){const e=n[Re],t=e.type;return 2===t?e.declTNode:1===t?n[ur]:null}function Xo(n){return function ba(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(w0(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(dn(),n)}function id(n,e=null,t=null,r){const i=km(n,e,t,r);return i.resolveInjectorInitializers(),i}function km(n,e=null,t=null,r,i=new Set){const s=[t||Qt,kk(n)];return r=r||("object"==typeof n?void 0:br(n)),new gl(s,e||uc(),r||null,i)}let dr=(()=>{class n{static{this.THROW_IF_NOT_FOUND=ku}static{this.NULL=new Vu}static create(t,r){if(Array.isArray(t))return id({name:""},r,t,"");{const i=t.name??"";return id({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ne({token:n,providedIn:"any",factory:()=>Se(T0)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function sf(n){return n.ngOriginalError}class Qs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&sf(e);for(;t&&sf(t);)t=sf(t);return t||null}}const af=new Me("",{providedIn:"root",factory:()=>U(Qs).handleError.bind(void 0)});let Ys=(()=>{class n{static{this.__NG_ELEMENT_ID__=Lm}static{this.__NG_ENV_ID__=t=>t}}return n})();class oD extends Ys{constructor(e){super(),this._lView=e}onDestroy(e){return Jh(this._lView,e),()=>function pm(n,e){if(null===n[va])return;const t=n[va].indexOf(e);-1!==t&&n[va].splice(t,1)}(this._lView,e)}}function Lm(){return new oD(le())}function l7(){return cf(dn(),le())}function cf(n,e){return new wn(Qr(n,e))}let wn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=l7}}return n})();function qk(n){return n instanceof wn?n.nativeElement:n}function aD(n){return e=>{setTimeout(n,void 0,e)}}const lt=class u7 extends G{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,P0()&&(this.destroyRef=U(Ys,{optional:!0})??void 0)}emit(e){const t=re(null);try{super.next(e)}finally{re(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=aD(s),i&&(i=aD(i)),o&&(o=aD(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof kn&&e.add(a),a}};function d7(){return this._results[Symbol.iterator]()}class cD{get changes(){return this._changes??=new lt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=cD.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=d7)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function ci(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function y0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Eb(n){return!(128&~n.flags)}const lD=new Map;let f7=0;const dD="__ngContext__";function Qi(n,e){Vr(e)?(n[dD]=e[Wu],function g7(n){lD.set(n[Wu],n)}(e)):n[dD]=e}function rF(n){return sF(n[Hu])}function iF(n){return sF(n[Eo])}function sF(n){for(;null!==n&&!li(n);)n=n[Eo];return n}let hD;const wb=new Me("",{providedIn:"root",factory:()=>P7}),P7="ng",fF=new Me(""),Ea=new Me("",{providedIn:"platform",factory:()=>"unknown"}),pF=new Me("",{providedIn:"root",factory:()=>function Rl(){if(void 0!==hD)return hD;if(typeof document<"u")return document;throw new be(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let gF=()=>null;function bD(n,e,t=!1){return gF(n,e,t)}const bF=new Me("",{providedIn:"root",factory:()=>!1});let xb;function wF(n){return function CD(){if(void 0===xb&&(xb=null,it.trustedTypes))try{xb=it.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return xb}()?.createScriptURL(n)||n}class CF{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bo})`}}function Nl(n){return n instanceof CF?n.changingThisBreaksApplicationSecurity:n}function Gm(n,e){const t=function X7(n){return n instanceof CF&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${bo})`)}return t===e}const nK=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var hf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hf||{});function ND(n){const e=zm();return e?e.sanitize(hf.URL,n)||"":Gm(n,"URL")?Nl(n):function DD(n){return(n=String(n)).match(nK)?n:"unsafe:"+n}(Et(n))}function OF(n){const e=zm();if(e)return wF(e.sanitize(hf.RESOURCE_URL,n)||"");if(Gm(n,"ResourceURL"))return wF(Nl(n));throw new be(904,!1)}function zm(){const n=le();return n&&n[Ws].sanitizer}function Js(n){return n instanceof Function?n():n}var Ml=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ml||{});let OD;function kD(n,e){return OD(n,e)}function pf(n,e,t,r,i){if(null!=r){let s,o=!1;li(r)?s=r:Vr(r)&&(o=!0,r=r[Sn]);const a=_n(r);0===n&&null!==t?null==i?qF(e,t,a):sd(e,t,a,i||null,!0):1===n&&null!==t?sd(e,t,a,i||null,!0):2===n?function Qm(n,e,t){const r=Vb(n,e);r&&function BK(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function $K(n,e,t,r,i){const s=t[Io];s!==_n(t)&&pf(e,n,r,s,i);for(let a=Yn;a<t.length;a++){const c=t[a];Ub(c[Re],c,n,e,r,s)}}(e,n,s,t,i)}}function Fb(n,e,t){return n.createElement(e,t)}function GF(n,e){e[Ws].changeDetectionScheduler?.notify(1),Ub(n,e,e[ct],2,null,null)}function WF(n,e){const t=n[El],r=t.indexOf(e);t.splice(r,1)}function qm(n,e){if(n.length<=Yn)return;const t=Yn+e,r=n[t];if(r){const i=r[Gu];null!==i&&i!==n&&WF(i,r),e>0&&(n[t-1][Eo]=r[Eo]);const s=Lh(n,Yn+e);!function xK(n,e){GF(n,e),e[Sn]=null,e[ur]=null}(r[Re],r);const o=s[qo];null!==o&&o.detachView(s[Re]),r[lr]=null,r[Eo]=null,r[rt]&=-129}return r}function Lb(n,e){if(!(256&e[rt])){const t=e[ct];t.destroyNode&&Ub(n,e,t,3,null,null),function OK(n){let e=n[Hu];if(!e)return VD(n[Re],n);for(;e;){let t=null;if(Vr(e))t=e[Hu];else{const r=e[Yn];r&&(t=r)}if(!t){for(;e&&!e[Eo]&&e!==n;)Vr(e)&&VD(e[Re],e),e=e[lr];null===e&&(e=n),Vr(e)&&VD(e[Re],e),t=e&&e[Eo]}e=t}}(e)}}function VD(n,e){if(256&e[rt])return;const t=re(null);try{e[rt]&=-129,e[rt]|=256,e[hc]&&function ot(n){if(mn(n),ve(n))for(let e=0;e<n.producerNode.length;e++)gn(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[hc]),function VK(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ed)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];ws(4,a,c);try{c.call(a)}finally{ws(5,a,c)}}else{ws(4,i,s);try{s.call(i)}finally{ws(5,i,s)}}}}}(n,e),function LK(n,e){const t=n.cleanup,r=e[_l];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[_l]=null);const i=e[va];if(null!==i){e[va]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Re].type&&e[ct].destroy();const r=e[Gu];if(null!==r&&li(e[lr])){r!==e[lr]&&WF(r,e);const i=e[qo];null!==i&&i.detachView(n)}!function m7(n){lD.delete(n[Wu])}(e)}finally{re(t)}}function BD(n,e,t){return function zF(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Sn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Gs.None||s===Gs.Emulated)return null}return Qr(r,t)}}(n,e.parent,t)}function sd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function qF(n,e,t){n.appendChild(e,t)}function KF(n,e,t,r,i){null!==r?sd(n,e,t,r,i):qF(n,e,t)}function Vb(n,e){return n.parentNode(e)}function QF(n,e,t){return JF(n,e,t)}let UD,JF=function YF(n,e,t){return 40&n.type?Qr(n,t):null};function Bb(n,e,t,r){const i=BD(n,r,e),s=e[ct],a=QF(r.parent||e[ur],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)KF(s,i,t[c],a,!1);else KF(s,i,t,a,!1);void 0!==UD&&UD(s,r,e,t,i)}function Km(n,e){if(null!==e){const t=e.type;if(3&t)return Qr(e,n);if(4&t)return jD(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Km(n,r);{const i=n[e.index];return li(i)?jD(-1,i):_n(i)}}if(32&t)return kD(e,n)()||_n(n[e.index]);{const r=ZF(n,e);return null!==r?Array.isArray(r)?r[0]:Km(pc(n[Ln]),r):Km(n,e.next)}}return null}function ZF(n,e){return null!==e?n[Ln][ur].projection[e.projection]:null}function jD(n,e){const t=Yn+n+1;if(t<e.length){const r=e[t],i=r[Re].firstChild;if(null!==i)return Km(r,i)}return e[Io]}function $D(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&Qi(_n(a),r),t.flags|=2),32&~t.flags)if(8&c)$D(n,e,t.child,r,i,s,!1),pf(e,n,i,a,s);else if(32&c){const l=kD(t,r);let h;for(;h=l();)pf(e,n,i,h,s);pf(e,n,i,a,s)}else 16&c?tL(n,e,r,t,i,s):pf(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Ub(n,e,t,r,i,s){$D(t,r,n.firstChild,e,i,s,!1)}function tL(n,e,t,r,i,s){const o=t[Ln],c=o[ur].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)pf(e,n,i,c[l],s);else{let l=c;const h=o[lr];Eb(r)&&(l.flags|=128),$D(n,e,l,h,i,s,!0)}}function nL(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function rL(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Bu(n,e,r),null!==i&&nL(n,e,i),null!==s&&function GK(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Dt={};function xe(n=1){iL(Ut(),le(),di()+n,!1)}function iL(n,e,t,r){if(!r)if(3&~e[rt]){const s=n.preOrderHooks;null!==s&&tf(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&yc(e,s,t)}mc(t)}function Ce(n,e=Ft.Default){const t=le();return null===t?Se(n,e):pb(dn(),t,dt(n),e)}function oL(n,e,t,r,i,s){const o=re(null);try{let a=null;i&rn.SignalBased&&(a=e[r][ue]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&rn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):qh(e,a,r,s)}finally{re(o)}}function jb(n,e,t,r,i,s,o,a,c,l,h){const g=e.blueprint.slice();return g[Sn]=i,g[rt]=204|r,(null!==l||n&&2048&n[rt])&&(g[rt]|=2048),Yu(g),g[lr]=g[yl]=n,g[Rn]=t,g[Ws]=o||n&&n[Ws],g[ct]=a||n&&n[ct],g[gr]=c||n&&n[gr]||null,g[ur]=s,g[Wu]=function p7(){return f7++}(),g[os]=h,g[rm]=l,g[Ln]=2==e.type?n[Ln]:g,g}function gf(n,e,t,r,i){let s=n.data[e];if(null===s)s=function HD(n,e,t,r,i){const s=_m(),o=X0(),c=n.data[e]=function XK(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cl()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function qC(){return ft.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function gc(){const n=ft.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Co(s,!0),s}function Ym(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function aL(n,e,t,r,i){const s=di(),o=2&r;try{mc(-1),o&&e.length>_t&&iL(n,e,_t,!1),ws(o?2:0,i),t(r,i)}finally{mc(s),ws(o?3:1,i)}}function GD(n,e,t){if(zu(e)){const r=re(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{re(r)}}}function WD(n,e,t){gm()&&(function sQ(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;zs(t)&&function hQ(n,e,t){const r=Qr(e,n),i=cL(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=$b(n,jb(n,i,null,o,r,e,null,n[Ws].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Sl(t,e),Qi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],l=Jo(e,n,a,t);Qi(l,e),null!==o&&fQ(0,a-i,l,c,0,o),as(c)&&(Ai(t.index,e)[Rn]=Jo(e,n,a,t))}}(n,e,t,Qr(t,e)),!(64&~t.flags)&&fL(n,e,t))}function zD(n,e,t=Qr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function cL(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=qD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function qD(n,e,t,r,i,s,o,a,c,l,h){const g=_t+r,_=g+i,v=function zK(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dt);return t}(g,_),T="function"==typeof l?l():l;return v[Re]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}let lL=()=>null;function uL(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,c=rn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(null!==i){if(!i.hasOwnProperty(s))continue;l=i[s]}0===n?dL(r,t,l,a,c):dL(r,t,l,a)}return r}function dL(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function As(n,e,t,r,i,s,o,a){const c=Qr(e,t);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(XD(n,t,h,r,i),zs(e)&&function tQ(n,e){const t=Ai(e,n);16&t[rt]||(t[rt]|=64)}(t,e.index)):3&e.type&&(r=function eQ(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function KD(n,e,t,r){if(gm()){const i=null===r?null:{"":-1},s=function aQ(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Vh(e,o.selectors,!1))if(r||(r=[]),as(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),QD(n,e,a.length)}else r.unshift(o),QD(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&hL(n,e,t,o,i,a),i&&function cQ(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new be(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=cc(t.mergedAttrs,t.attrs)}function hL(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Mm(Sl(t,e),n,r[l].type);!function uQ(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=Ym(n,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];t.mergedAttrs=cc(t.mergedAttrs,h.hostAttrs),dQ(n,t,e,c,h),lQ(c,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function ZK(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],_=t?t.get(g):null,T=_?_.outputs:null;c=uL(0,g.inputs,h,c,_?_.inputs:null),l=uL(1,g.outputs,h,l,T);const C=null===c||null===o||Vg(e)?null:pQ(c,h,o);a.push(C)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function fL(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Gk(){return ft.lFrame.currentDirectiveIndex}();try{mc(s);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];Em(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&oQ(c,l)}}finally{mc(-1),Em(o)}}function oQ(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function QD(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lQ(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;as(e)&&(t[""]=n)}}function dQ(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Go(i.type)),o=new ed(s,as(i),Ce);n.blueprint[r]=o,t[r]=o,function rQ(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function iQ(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Ym(n,t,i.hostVars,Dt),i)}function Ia(n,e,t,r,i,s){const o=Qr(n,e);!function YD(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Et(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[ct],o,s,n.value,t,r,i)}function fQ(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)oL(r,t,o[a++],o[a++],o[a++],o[a++])}function pQ(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function pL(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function gL(n,e){const t=n.contentQueries;if(null!==t){const r=re(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];Xh(t[i]),a.contentQueries(2,e[o],o)}}}finally{re(r)}}}function $b(n,e){return n[Hu]?n[F0][Eo]=e:n[Hu]=e,n[F0]=e,e}function JD(n,e,t){Xh(0);const r=re(null);try{e(n,t)}finally{re(r)}}function mL(n){return n[_l]||(n[_l]=[])}function _L(n){return n.cleanup||(n.cleanup=[])}function Hb(n,e){const t=n[gr],r=t?t.get(Qs,null):null;r&&r.handleError(e)}function XD(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=t[s++];oL(n.data[o],e[o],r,a,c,i)}}function Tc(n,e,t){const r=Tl(e,n);!function HF(n,e,t){n.setValue(e,t)}(n[ct],r,t)}function gQ(n,e){const t=Ai(e,n),r=t[Re];!function mQ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Sn];null!==i&&null===t[os]&&(t[os]=bD(i,t[gr])),ZD(r,t,t[Rn])}function ZD(n,e,t){Zu(e);try{const r=n.viewQuery;null!==r&&JD(1,r,t);const i=n.template;null!==i&&aL(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[qo]?.finishViewCreation(n),n.staticContentQueries&&gL(n,e),n.staticViewQueries&&JD(2,n.viewQuery,t);const s=n.components;null!==s&&function _Q(n,e){for(let t=0;t<e.length;t++)gQ(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[rt]&=-5,wm()}}function Jm(n,e,t,r){const i=re(null);try{const s=e.tView,c=jb(n,s,t,4096&n[rt]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[Gu]=n[e.index];const h=n[qo];return null!==h&&(c[qo]=h.createEmbeddedView(s)),ZD(s,c,t),c}finally{re(i)}}function mf(n,e){return!e||null===e.firstChild||Eb(n)}function Xm(n,e,t,r=!0){const i=e[Re];if(function kK(n,e,t,r){const i=Yn+r,s=t.length;r>0&&(t[i-1][Eo]=e),r<s-Yn?(e[Eo]=t[i],Fh(t,Yn+r,e)):(t.push(e),e[Eo]=null),e[lr]=t;const o=e[Gu];null!==o&&t!==o&&function FK(n,e){const t=n[El];e[Ln]!==e[lr][lr][Ln]&&(n[rt]|=Il.HasTransplantedViews),null===t?n[El]=[e]:t.push(e)}(o,e);const a=e[qo];null!==a&&a.insertView(n),fm(e),e[rt]|=128}(i,e,n,t),r){const o=jD(t,n),a=e[ct],c=Vb(a,n[Io]);null!==c&&function PK(n,e,t,r,i,s){r[Sn]=i,r[ur]=e,Ub(n,r,t,1,i,s)}(i,n[ur],a,e,c,o)}const s=e[os];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Zm(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(_n(s)),li(s)&&bL(s,r);const o=t.type;if(8&o)Zm(n,e,t.child,r);else if(32&o){const a=kD(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=ZF(e,t);if(Array.isArray(a))r.push(...a);else{const c=pc(e[Ln]);Zm(c[Re],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bL(n,e){for(let t=Yn;t<n.length;t++){const r=n[t],i=r[Re].firstChild;null!==i&&Zm(r[Re],r,i,e)}n[Io]!==n[Sn]&&e.push(n[Io])}let EL=[];const EQ={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ju(n.lView)},consumerOnSignalRead(){this.lView[hc]=this}},IL=100;function Gb(n,e=!0,t=0){const r=n[Ws],i=r.rendererFactory;i.begin?.();try{!function IQ(n,e){tA(n,e);let t=0;for(;hm(n);){if(t===IL)throw new be(103,!1);t++,tA(n,1)}}(n,t)}catch(o){throw e&&Hb(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function TQ(n,e,t,r){const i=e[rt];if(!(256&~i))return;e[Ws].inlineEffectRunner?.flush(),Zu(e);let o=null,a=null;(function wQ(n){return 2!==n.type})(n)&&(a=function yQ(n){return n[hc]??function vQ(n){const e=EL.pop()??Object.create(EQ);return e.lView=n,e}(n)}(e),o=function Zt(n){return n&&(n.nextProducerIndex=0),re(n)}(a));try{Yu(e),function eb(n){return ft.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&aL(n,e,t,2,r);const c=!(3&~i);if(c){const g=n.preOrderCheckHooks;null!==g&&yc(e,g,null)}else{const g=n.preOrderHooks;null!==g&&tf(e,g,0,null),Am(e,0)}if(function CQ(n){for(let e=rF(n);null!==e;e=iF(e)){if(!(e[rt]&Il.HasTransplantedViews))continue;const t=e[El];for(let r=0;r<t.length;r++){BC(t[r])}}}(e),TL(e,0),null!==n.contentQueries&&gL(n,e),c){const g=n.contentCheckHooks;null!==g&&yc(e,g)}else{const g=n.contentHooks;null!==g&&tf(e,g,1),Am(e,1)}!function WK(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)mc(~i);else{const s=i,o=t[++r],a=t[++r];KC(o,s),a(2,e[s])}}}finally{mc(-1)}}(n,e);const l=n.components;null!==l&&CL(e,l,0);const h=n.viewQuery;if(null!==h&&JD(2,h,r),c){const g=n.viewCheckHooks;null!==g&&yc(e,g)}else{const g=n.viewHooks;null!==g&&tf(e,g,2),Am(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Gh]){for(const g of e[Gh])g();e[Gh]=null}e[rt]&=-73}catch(c){throw Ju(e),c}finally{null!==a&&(function en(n,e){if(re(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ve(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gn(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,o),function bQ(n){n.lView[hc]!==n&&(n.lView=null,EL.push(n))}(a)),wm()}}function TL(n,e){for(let t=rF(n);null!==t;t=iF(t))for(let r=Yn;r<t.length;r++)wL(t[r],e)}function DQ(n,e,t){wL(Ai(e,n),t)}function wL(n,e){dm(n)&&tA(n,e)}function tA(n,e){const r=n[Re],i=n[rt],s=n[hc];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!Ti(s)),s&&(s.dirty=!1),n[rt]&=-9217,o)TQ(r,n,r.template,n[Rn]);else if(8192&i){TL(n,1);const a=r.components;null!==a&&CL(n,a,1)}}function CL(n,e,t){for(let r=0;r<e.length;r++)DQ(n,e[r],t)}function e_(n){for(n[Ws].changeDetectionScheduler?.notify();n;){n[rt]|=64;const e=pc(n);if(sm(n)&&!e)return n;n=e}return null}class t_{get rootNodes(){const e=this._lView,t=e[Re];return Zm(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return!(256&~this._lView[rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[lr];if(li(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(qm(e,r),Lh(t,r))}this._attachedToViewContainer=!1}Lb(this._lView[Re],this._lView)}onDestroy(e){Jh(this._lView,e)}markForCheck(){e_(this._cdRefInjectingView||this._lView)}detach(){this._lView[rt]&=-129}reattach(){fm(this._lView),this._lView[rt]|=128}detectChanges(){this._lView[rt]|=1024,Gb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,GF(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=e,fm(this._lView)}}let wr=(()=>{class n{static{this.__NG_ELEMENT_ID__=RQ}}return n})();const AQ=wr,SQ=class extends AQ{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Jm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new t_(i)}};function RQ(){return Wb(dn(),le())}function Wb(n,e){return 4&n.type?new SQ(e,n,cf(n,e)):null}let ML=()=>null;function _f(n,e){return ML(n,e)}class aA{}class ZQ{}class xL{}class tY{resolveComponentFactory(e){throw function eY(n){const e=Error(`No component factory found for ${br(n)}.`);return e.ngComponent=n,e}(e)}}let Yb=(()=>{class n{static{this.NULL=new tY}}return n})();class OL{}let wc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function nY(){const n=le(),t=Ai(dn().index,n);return(Vr(t)?t:n)[ct]}()}}return n})(),rY=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>null})}}return n})();const cA={},kL=new Set;function Ta(n){kL.has(n)||(kL.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function FL(...n){}class Pt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function iY(){const n="function"==typeof it.requestAnimationFrame;let e=it[n?"requestAnimationFrame":"setTimeout"],t=it[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function aY(n){const e=()=>{!function oY(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(it,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,uA(n),n.isCheckStableRunning=!0,lA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),uA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function cY(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return LL(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),VL(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return LL(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),VL(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,uA(n),lA(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pt.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Pt.isInAngularZone())throw new be(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,sY,FL,FL);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const sY={};function lA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function uA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function LL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VL(n){n._nesting--,lA(n)}class BL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}var od=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(od||{});const UL={destroy(){}};function hA(n,e){!e&&function dc(n){if(!P0())throw new be(-203,!1)}();const t=e?.injector??U(dr);if(!function Zo(n){return"browser"===(n??U(dr)).get(Ea)}(t))return UL;Ta("NgAfterNextRender");const r=t.get(o_),i=r.handler??=new $L,s=e?.phase??od.MixedReadWrite,o=()=>{i.unregister(c),a()},a=t.get(Ys).onDestroy(o),c=In(t,()=>new jL(s,()=>{o(),n()}));return i.register(c),{destroy:o}}class jL{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=U(Pt),this.errorHandler=U(Qs,{optional:!0}),U(aA,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class $L{constructor(){this.executingCallbacks=!1,this.buckets={[od.EarlyRead]:new Set,[od.Write]:new Set,[od.MixedReadWrite]:new Set,[od.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let o_=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Xb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Su(i,a):2==s&&(r=Su(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class WL extends Yb{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Lt(e);return new l_(t,this.ngModule)}}function zL(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}class Zb{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ph(r);const i=this.injector.get(e,cA,r);return i!==cA||t===cA?i:this.parentInjector.get(e,t,r)}}class l_ extends xL{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=zL(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return zL(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function gC(n){return n.map($g).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=re(null);try{let o=(i=i||this.ngModule)instanceof Kr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Zb(e,o):e,c=a.get(OL,null);if(null===c)throw new be(407,!1);const l=a.get(rY,null),_={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(o_,null),changeDetectionScheduler:a.get(aA,null)},v=c.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",C=r?function qK(n,e,t,r){const s=r.get(bF,!1)||t===Gs.ShadowDom,o=n.selectRootElement(e,s);return function KK(n){lL(n)}(o),o}(v,r,this.componentDef.encapsulation,a):Fb(v,T,function fY(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(T));let A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let k=null;null!==C&&(k=bD(C,a,!0));const P=qD(0,null,null,1,0,null,null,null,null,null,null),q=jb(null,P,null,A,null,null,_,v,a,null,k);let ne,me;Zu(q);try{const we=this.componentDef;let F,R=null;we.findHostDirectiveDefs?(F=[],R=new Map,we.findHostDirectiveDefs(we,F,R),F.push(we)):F=[we];const O=function gY(n,e){const t=n[Re],r=_t;return n[r]=e,gf(t,r,2,"#host",null)}(q,C),B=function mY(n,e,t,r,i,s,o){const a=i[Re];!function _Y(n,e,t,r){for(const i of n)e.mergedAttrs=cc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Xb(e,e.mergedAttrs,!0),null!==t&&rL(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=bD(e,i[gr]));const l=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=jb(i,cL(t),null,h,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&QD(a,n,r.length-1),$b(i,g),i[n.index]=g}(O,C,we,F,q,_,v);me=Qu(P,_t),C&&function vY(n,e,t,r){if(r)Bu(n,t,["ng-version","17.3.12"]);else{const{attrs:i,classes:s}=function mC(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!is(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Bu(n,t,i),s&&s.length>0&&nL(n,t,s.join(" "))}}(v,we,C,r),void 0!==t&&function bY(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(me,this.ngContentSelectors,t),ne=function yY(n,e,t,r,i,s){const o=dn(),a=i[Re],c=Qr(o,i);hL(a,i,o,t,null,r);for(let h=0;h<t.length;h++)Qi(Jo(i,a,o.directiveStart+h,o),i);fL(a,i,o),c&&Qi(c,i);const l=Jo(i,a,o.directiveStart+o.componentOffset,o);if(n[Rn]=i[Rn]=l,null!==s)for(const h of s)h(l,e);return GD(a,o,i),l}(B,we,F,R,q,[EY]),ZD(P,q,null)}finally{wm()}return new pY(this.componentType,ne,cf(me,q),q,me)}finally{re(s)}}}class pY extends ZQ{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new t_(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;XD(s[Re],s,i,e,t),this.previousInputValues.set(e,t),e_(Ai(this._tNode.index,s))}}get injector(){return new mr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function EY(){const n=dn();ef(le()[Re],n)}let Xs=(()=>{class n{static{this.__NG_ELEMENT_ID__=IY}}return n})();function IY(){return QL(dn(),le())}const TY=Xs,qL=class extends TY{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return cf(this._hostTNode,this._hostLView)}get injector(){return new mr(this._hostTNode,this._hostLView)}get parentInjector(){const e=rd(this._hostTNode,this._hostLView);if(Rm(e)){const t=bc(e,this._hostLView),r=Al(e);return new mr(t[Re].data[r+8],t)}return new mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=KL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Yn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=_f(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,mf(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function ya(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const c=o?e:new l_(Lt(e)),l=r||this.parentInjector;if(!s&&null==c.ngModule){const C=(o?l:this.parentInjector).get(Kr,null);C&&(s=C)}const h=Lt(c.componentType??{}),g=_f(this._lContainer,h?.id??null),v=c.create(l,i,g?.firstChild??null,s);return this.insertImpl(v.hostView,a,mf(this._hostTNode,g)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function Q0(n){return li(n[lr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[lr],l=new qL(c,c[ur],c[lr]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Xm(o,i,s,r),e.attachToViewContainerRef(),Fh(gA(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=KL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=qm(this._lContainer,t);r&&(Lh(gA(this._lContainer),t),Lb(r[Re],r))}detach(e){const t=this._adjustIndex(e,-1),r=qm(this._lContainer,t);return r&&null!=Lh(gA(this._lContainer),t)?new t_(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KL(n){return n[8]}function gA(n){return n[8]||(n[8]=[])}function QL(n,e){let t;const r=e[n.index];return li(r)?t=r:(t=pL(r,e,null,n),e[n.index]=t,$b(e,t)),YL(t,e,n,r),new qL(t,n,e)}let YL=function XL(n,e,t,r){if(n[Io])return;let i;i=8&t.type?_n(r):function wY(n,e){const t=n[ct],r=t.createComment(""),i=Qr(e,n);return sd(t,Vb(t,i),r,function UK(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Io]=i},mA=()=>!1;class _A{constructor(e){this.queryList=e,this.matches=null}clone(){return new _A(this.queryList)}setDirty(){this.queryList.setDirty()}}class yA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new yA(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==TA(e,t).matches&&this.queries[t].setDirty()}}class ZL{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function xY(n){return n.split(",").map(e=>e.trim())}(e):e}}class vA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new vA(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class bA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new bA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,SY(t,s)),this.matchTNodeWithReadOption(e,t,Yr(t,e,s,!1,!1))}else r===wr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Yr(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===wn||i===Xs||i===wr&&4&t.type)this.addMatch(t.index,-2);else{const s=Yr(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function SY(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function NY(n,e,t,r){return-1===t?function RY(n,e){return 11&n.type?cf(n,e):4&n.type?Wb(n,e):null}(e,n):-2===t?function MY(n,e,t){return t===wn?cf(e,n):t===wr?Wb(e,n):t===Xs?QL(e,n):void 0}(n,e,r):Jo(n,n[Re],t,e)}function eV(n,e,t,r){const i=e[qo].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:NY(e,s[l],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function EA(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=eV(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const l=s[a+1],h=e[-c];for(let g=Yn;g<h.length;g++){const _=h[g];_[Gu]===_[lr]&&EA(_[Re],_,l,r)}if(null!==h[El]){const g=h[El];for(let _=0;_<g.length;_++){const v=g[_];EA(v[Re],v,l,r)}}}}}return r}function tV(n,e,t){const r=new cD(!(4&~t));return function JK(n,e,t,r){const i=mL(e);i.push(t),n.firstCreatePass&&_L(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[qo]??=new yA).queries.push(new _A(r))-1}function iV(n,e,t){null===n.queries&&(n.queries=new vA),n.queries.track(new bA(e,t))}function TA(n,e){return n.queries.getByIndex(e)}function sV(n,e){const t=n[Re],r=TA(t,e);return r.crossesNgTemplate?EA(t,n,e,[]):eV(t,n,r,e)}function cV(n){return function oV(n){return"function"==typeof n&&void 0!==n[ue]}(n)&&"function"==typeof n.set}function hn(n){let e=function vV(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(as(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new be(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=tE(n.inputs),o.inputTransforms=tE(n.inputTransforms),o.declaredInputs=tE(n.declaredInputs),o.outputs=tE(n.outputs);const a=i.hostBindings;a&&KY(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&zY(n,c),l&&qY(n,l),GY(n,i),Au(n.outputs,i.outputs),as(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===hn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function WY(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=cc(i.hostAttrs,t=cc(t,i.hostAttrs))}}(r)}function GY(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function tE(n){return n===Ts?{}:n===Qt?[]:n}function zY(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function qY(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function KY(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function TV(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class ad{}class wV{}class DA extends ad{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new WL(this);const i=Di(e);this._bootstrapComponents=Js(i.bootstrap),this._r3Injector=km(e,t,[{provide:ad,useValue:this},{provide:Yb,useValue:this.componentFactoryResolver},...r],br(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class AA extends wV{constructor(e){super(),this.moduleType=e}create(e){return new DA(this.moduleType,e,[])}}class CV extends ad{constructor(e){super(),this.componentFactoryResolver=new WL(this),this.instance=null;const t=new gl([...e.providers,{provide:ad,useValue:this},{provide:Yb,useValue:this.componentFactoryResolver}],e.parent||uc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function nE(n,e,t=null){return new CV({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let vf=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ye(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iE(n){return!!function SA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Cr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Nt(n,e,t,r,i,s,o,a){const c=le(),l=Ut(),h=n+_t,g=l.firstCreatePass?function oJ(n,e,t,r,i,s,o,a,c){const l=e.consts,h=gf(e,n,4,o||null,wo(l,a));KD(e,t,h,wo(l,c)),ef(e,h);const g=h.tView=qD(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,c,e,t,r,i,s,o):l.data[h];Co(g,!1);const _=DV(l,c,g,n);_c()&&Bb(l,c,_,g),Qi(_,c);const v=pL(_,c,_,g);return c[h]=v,$b(c,v),function JL(n,e,t){return mA(n,e,t)}(v,g,c),To(g)&&WD(l,c,g),null!=o&&zD(c,g,a),Nt}let DV=function AV(n,e,t,r){return Cs(!0),e[ct].createComment("")};function Mn(n,e,t,r){const i=le();return Cr(i,qs(),e)&&(Ut(),Ia(Nn(),i,n,e,t,r)),Mn}function Sf(n,e,t,r,i,s){const a=function cd(n,e,t,r){const i=Cr(n,e,t);return Cr(n,e+1,r)||i}(n,function Ko(){return ft.lFrame.bindingIndex}(),t,i);return Qo(2),a?e+Et(t)+r+Et(i)+s:Dt}function dE(n,e){return n<<17|e<<2}function kl(n){return n>>17&32767}function VA(n){return 2|n}function ud(n){return(131068&n)>>2}function BA(n,e){return-131069&n|e<<2}function UA(n){return 1|n}function i2(n,e,t,r){const i=n[t+1],s=null===e;let o=r?kl(i):ud(i),a=!1;for(;0!==o&&(!1===a||s);){const l=n[o+1];zJ(n[o],e)&&(a=!0,n[o+1]=r?UA(l):VA(l)),o=r?kl(l):ud(l)}a&&(n[t+1]=r?VA(i):UA(i))}function zJ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&_a(n,e)>=0}const Jr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function s2(n){return n.substring(Jr.key,Jr.keyEnd)}function o2(n,e){const t=Jr.textEnd;return t===e?-1:(e=Jr.keyEnd=function YJ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Jr.key=e,t),kf(n,e,t))}function kf(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function It(n,e,t){const r=le();return Cr(r,qs(),e)&&As(Ut(),Nn(),r,n,e,r[ct],t,!1),It}function jA(n,e,t,r,i){const o=i?"class":"style";XD(n,t,e.inputs[o],o,r)}function Yt(n,e){return function ea(n,e,t,r){const i=le(),s=Ut(),o=Qo(2);s.firstUpdatePass&&f2(s,n,o,r),e!==Dt&&Cr(i,o,e)&&g2(s,s.data[di()],i,i[ct],n,i[o+1]=function aX(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=br(Nl(n)))),n}(e,t),r,o)}(n,e,null,!0),Yt}function Da(n){!function ta(n,e,t,r){const i=Ut(),s=Qo(2);i.firstUpdatePass&&f2(i,null,s,r);const o=le();if(t!==Dt&&Cr(o,s,t)){const a=i.data[di()];if(_2(a,r)&&!h2(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Su(c,t||"")),jA(i,a,o,t,r)}else!function oX(n,e,t,r,i,s,o,a){i===Dt&&(i=Qt);let c=0,l=0,h=0<i.length?i[0]:null,g=0<s.length?s[0]:null;for(;null!==h||null!==g;){const _=c<i.length?i[c+1]:void 0,v=l<s.length?s[l+1]:void 0;let C,T=null;h===g?(c+=2,l+=2,_!==v&&(T=g,C=v)):null===g||null!==h&&h<g?(c+=2,T=h):(l+=2,T=g,C=v),null!==T&&g2(n,e,t,r,T,C,o,a),h=c<i.length?i[c]:null,g=l<s.length?s[l]:null}}(i,a,o,o[ct],o[s+1],o[s+1]=function iX(n,e,t){if(null==t||""===t)return Qt;const r=[],i=Nl(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(sX,Aa,n,!0)}function Aa(n,e){for(let t=function KJ(n){return function c2(n){Jr.key=0,Jr.keyEnd=0,Jr.value=0,Jr.valueEnd=0,Jr.textEnd=n.length}(n),o2(n,kf(n,0,Jr.textEnd))}(e);t>=0;t=o2(e,t))Ci(n,s2(e),!0)}function h2(n,e){return e>=n.expandoStartIndex}function f2(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[di()],o=h2(n,t);_2(s,r)&&null===e&&!o&&(e=!1),e=function eX(n,e,t,r){const i=function Yo(n){const e=ft.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=m_(t=$A(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=$A(i,n,e,t,r),null===s){let c=function tX(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==ud(r))return n[kl(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=$A(null,n,e,c[1],r),c=m_(c,e.attrs,r),function nX(n,e,t,r){n[kl(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function rX(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=m_(r,n[s].hostAttrs,t);return m_(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function GJ(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=kl(o),c=ud(o);n[r]=t;let h,l=!1;if(Array.isArray(t)?(h=t[1],(null===h||_a(t,h)>0)&&(l=!0)):h=t,i)if(0!==c){const _=kl(n[a+1]);n[r+1]=dE(_,a),0!==_&&(n[_+1]=BA(n[_+1],r)),n[a+1]=function $J(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=dE(a,0),0!==a&&(n[a+1]=BA(n[a+1],r)),a=r;else n[r+1]=dE(c,0),0===a?a=r:n[c+1]=BA(n[c+1],r),c=r;l&&(n[r+1]=VA(n[r+1])),i2(n,h,r,!0),i2(n,h,r,!1),function WJ(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&_a(s,e)>=0&&(t[r+1]=UA(t[r+1]))}(e,h,n,r,s),o=dE(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function $A(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=m_(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function m_(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ci(n,o,!!t||e[++s]))}return void 0===n?null:n}function sX(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Ci(n,r,t)}function g2(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],h=function HJ(n){return!(1&~n)}(l)?m2(c,e,t,i,ud(l),o):void 0;hE(h)||(hE(s)||function jJ(n){return!(2&~n)}(l)&&(s=m2(c,null,t,i,a,o)),function HK(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ml.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ml.Important),n.setStyle(t,r,i,s))}}(r,o,Tl(di(),t),i,s))}function m2(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),h=l?c[1]:c,g=null===h;let _=t[i+1];_===Dt&&(_=g?Qt:void 0);let v=g?dl(_,r):h===r?_:void 0;if(l&&!hE(v)&&(v=dl(c,r)),hE(v)&&(a=v,o))return a;const T=n[i+1];i=o?kl(T):ud(T)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=dl(c,r))}return a}function hE(n){return void 0!==n}function _2(n,e){return!!(n.flags&(e?8:16))}function Xr(n,e,t){Ta("NgControlFlow");const r=le(),i=qs(),s=function WA(n,e){return n[e]}(r,_t+n);if(Cr(r,i,e)){const a=re(null);try{if(function eA(n,e){const t=qm(n,e);return void 0!==t&&Lb(t[Re],t),t}(s,0),-1!==e){const c=function zA(n,e){return Qu(n,e)}(r[Re],_t+e),l=_f(s,c.tView.ssrId);Xm(s,Jm(r,c,t,{dehydratedView:l}),0,mf(c,l))}}finally{re(a)}}else{const a=function vL(n,e){const t=Yn+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Rn]=t)}}function De(n,e,t,r){const i=le(),s=Ut(),o=_t+n,a=i[ct],c=s.firstCreatePass?function DX(n,e,t,r,i,s){const o=e.consts,c=gf(e,n,2,r,wo(o,i));return KD(e,t,c,wo(o,s)),null!==c.attrs&&Xb(c,c.attrs,!1),null!==c.mergedAttrs&&Xb(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],l=E2(s,i,c,a,e,n);i[o]=l;const h=To(c);return Co(c,!0),rL(a,l,c),!function h_(n){return!(32&~n.flags)}(c)&&_c()&&Bb(s,i,l,c),0===function UC(){return ft.lFrame.elementDepthCount}()&&Qi(l,i),function jC(){ft.lFrame.elementDepthCount++}(),h&&(WD(s,i,c),GD(s,c,i)),null!==r&&zD(i,c),De}function Te(){let n=dn();X0()?Xu():(n=n.parent,Co(n,!1));const e=n;(function HC(n){return ft.skipHydrationRootTNode===n})(e)&&function mm(){ft.skipHydrationRootTNode=null}(),function $C(){ft.lFrame.elementDepthCount--}();const t=Ut();return t.firstCreatePass&&(ef(t,n),zu(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function lb(n){return!!(8&n.flags)}(e)&&jA(t,e,le(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function tD(n){return!!(16&n.flags)}(e)&&jA(t,e,le(),e.stylesWithoutHost,!1),Te}function Jt(n,e,t,r){return De(n,e,t,r),Te(),Jt}let E2=(n,e,t,r,i,s)=>(Cs(!0),Fb(r,i,function ob(){return ft.lFrame.currentNamespace}()));function Zr(){return le()}const Lf="en-US";let A2=Lf;function at(n,e,t,r){const i=le(),s=Ut(),o=dn();return JA(s,i,i[ct],o,n,e,r),at}function JA(n,e,t,r,i,s,o){const a=To(r),l=n.firstCreatePass&&_L(n),h=e[Rn],g=mL(e);let _=!0;if(3&r.type||o){const C=Qr(r,e),A=o?o(C):C,k=g.length,P=o?ne=>o(_n(ne[r.index])):r.index;let q=null;if(!o&&a&&(q=function RZ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[_l],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,_=!1;else{s=tB(r,e,h,s,!1);const ne=t.listen(A,i,s);g.push(s,ne),l&&l.push(i,P,k,k+1)}}else s=tB(r,e,h,s,!1);const v=r.outputs;let T;if(_&&null!==v&&(T=v[i])){const C=T.length;if(C)for(let A=0;A<C;A+=2){const me=e[T[A]][T[A+1]].subscribe(s),we=g.length;g.push(s,me),l&&l.push(i,r.index,we,-(we+1))}}}function eB(n,e,t,r){const i=re(null);try{return ws(6,e,t),!1!==t(r)}catch(s){return Hb(n,s),!1}finally{ws(7,e,t),re(i)}}function tB(n,e,t,r,i){return function s(o){if(o===Function)return r;e_(n.componentOffset>-1?Ai(n.index,e):e);let c=eB(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)c=eB(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function tt(n=1){return function Cm(n){return(ft.lFrame.contextLView=function Y0(n,e){for(;n>0;)e=e[yl],n--;return e}(n,ft.lFrame.contextLView))[Rn]}(n)}function NZ(n,e){let t=null;const r=function fC(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Vh(n,s,!0):jg(r,s))return i}else t=i}return t}function XA(n){const e=le()[Ln][ur];if(!e.projection){const r=e.projection=function ll(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?NZ(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function ZA(n,e=0,t){const r=le(),i=Ut(),s=gf(i,_t+n,16,null,t||null);null===s.projection&&(s.projection=e),Xu(),(!r[os]||Cl())&&32&~s.flags&&function jK(n,e,t){tL(e[ct],0,e,t,BD(n,t,e),QF(t.parent||e[ur],t,e))}(i,r,s)}function Ur(n,e,t,r){!function rV(n,e,t,r){const i=Ut();if(i.firstCreatePass){const s=dn();iV(i,new ZL(e,t,r),s.index),function PY(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return tV(i,le(),t)}(n,e,t,r)}function Ma(n,e,t){!function nV(n,e,t){const r=Ut();return r.firstCreatePass&&(iV(r,new ZL(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),tV(r,le(),e)}(n,e,t)}function Cn(n){const e=le(),t=Ut(),r=Im();Xh(r+1);const i=TA(t,r);if(n.dirty&&function VC(n){return!(4&~n[rt])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=sV(e,r);n.reset(s,qk),n.notifyOnChanges()}return!0}return!1}function Dn(){return function IA(n,e){return n[qo].queries[e].queryList}(le(),Im())}function hr(n){return function wl(n,e){return n[e]}(function Z0(){return ft.lFrame.contextLView}(),_t+n)}function et(n,e=""){const t=le(),r=Ut(),i=n+_t,s=r.firstCreatePass?gf(r,i,1,e,null):r.data[i],o=bB(r,t,s,e,n);t[i]=o,_c()&&Bb(r,t,o,s),Co(s,!1)}let bB=(n,e,t,r,i)=>(Cs(!0),function FD(n,e){return n.createText(e)}(e[ct],r));function hi(n){return xa("",n,""),hi}function xa(n,e,t){const r=le(),i=function Af(n,e,t,r){return Cr(n,qs(),t)?e+Et(t)+r:Dt}(r,n,e,t);return i!==Dt&&Tc(r,di(),i),xa}function tS(n,e,t,r,i){const s=le(),o=Sf(s,n,e,t,r,i);return o!==Dt&&Tc(s,di(),o),tS}function Cc(n,e,t){cV(e)&&(e=e());const r=le();return Cr(r,qs(),e)&&As(Ut(),Nn(),r,n,e,r[ct],t,!1),Cc}function Fl(n,e){const t=cV(n);return t&&n.set(e),t}function Dc(n,e){const t=le(),r=Ut(),i=dn();return JA(r,t,t[ct],i,n,e),Dc}function nS(n,e,t,r,i){if(n=dt(n),Array.isArray(n))for(let s=0;s<n.length;s++)nS(n[s],e,t,r,i);else{const s=Ut(),o=le(),a=dn();let c=fl(n)?n:dt(n.provide);const l=IC(n),h=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(fl(n)||!n.multi){const v=new ed(l,i,Ce),T=iS(c,e,i?h:h+_,g);-1===T?(Mm(Sl(a,o),s,c),rS(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[T]=v,o[T]=v)}else{const v=iS(c,e,h+_,g),T=iS(c,e,h,h+_),A=T>=0&&t[T];if(i&&!A||!i&&!(v>=0&&t[v])){Mm(Sl(a,o),s,c);const k=function QZ(n,e,t,r,i){const s=new ed(n,t,Ce);return s.multi=[],s.index=e,s.componentProviders=0,SB(s,i,r&&!t),s}(i?KZ:qZ,t.length,i,r,l);!i&&A&&(t[T].providerFactory=k),rS(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else rS(s,n,v>-1?v:T,SB(t[i?T:v],l,!i&&r));!i&&r&&A&&t[T].componentProviders++}}}function rS(n,e,t,r){const i=fl(e),s=function EC(n){return!!n.useClass}(e);if(i||s){const c=(s?dt(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(t);-1===h?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function SB(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function iS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function qZ(n,e,t,r){return sS(this.multi,[])}function KZ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Jo(t,t[Re],this.providerFactory.index,r);s=a.slice(0,o),sS(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],sS(i,s);return s}function sS(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Vn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function zZ(n,e,t){const r=Ut();if(r.firstCreatePass){const i=as(n);nS(t,r.data,r.blueprint,i,!0),nS(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let YZ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=R0(0,t.type),i=r.length>0?nE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ne({token:n,providedIn:"environment",factory:()=>new n(Se(Kr))})}}return n})();function Mo(n){Ta("NgStandalone"),n.getStandaloneInjector=e=>e.get(YZ).getOrCreateStandaloneInjector(n)}function na(n,e){return Wb(n,e)}class Uf{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const Oee=new Uf("17.3.12");let YB=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const tU=new Me(""),EE=new Me("");let pS,hS=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,pS||(function ote(n){pS=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Se(Pt),Se(fS),Se(EE))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),fS=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return pS?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function R_(n){return!!n&&"function"==typeof n.then}function nU(n){return!!n&&"function"==typeof n.subscribe}const gS=new Me("");let mS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=U(gS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(R_(s))t.push(s);else if(nU(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const _S=new Me("");function sU(n,e){return Array.isArray(e)?e.reduce(sU,n):{...n,...e}}let Ac=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(af),this.afterRenderEffectManager=U(o_),this.externalTestViews=new Set,this.beforeRender=new G,this.afterTick=new G,this.componentTypes=[],this.components=[],this.isStable=U(vf).hasPendingTasks.pipe(Le(t=>!t)),this._injector=U(Kr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof xL;if(!this._injector.get(mS).done)throw!i&&function lc(n){const e=Lt(n)||Ir(n)||qr(n);return null!==e&&e.standalone}(t),new be(405,!1);let o;o=i?t:this._injector.get(Yb).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function ate(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ad),l=o.create(dr.NULL,[],r||o.selector,a),h=l.location.nativeElement,g=l.injector.get(tU,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),IE(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new be(101,!1);const r=re(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,re(r)}}detectChangesInAttachedViews(t){let r=0;const i=this.afterRenderEffectManager;for(;;){if(r===IL)throw new be(103,!1);if(t){const s=0===r;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)lte(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>yS(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>yS(s))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;IE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(_S,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>IE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new be(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function lte(n,e,t){!e&&!yS(n)||function ute(n,e,t){let r;t?(r=0,n[rt]|=1024):r=64&n[rt]?0:1,Gb(n,e,r)}(n,t,e)}function yS(n){return hm(n)}class dte{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let oU=(()=>{class n{compileModuleSync(t){return new AA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Js(Di(t).declarations).reduce((o,a)=>{const c=Lt(a);return c&&o.push(new l_(c)),o},[]);return new dte(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pte=(()=>{class n{constructor(){this.zone=U(Pt),this.applicationRef=U(Ac)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gte(){const n=U(Pt),e=U(Qs);return t=>n.runOutsideAngular(()=>e.handleError(t))}let _te=(()=>{class n{constructor(){this.subscription=new kn,this.initialized=!1,this.zone=U(Pt),this.pendingTasks=U(vf)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Pa=new Me("",{providedIn:"root",factory:()=>U(Pa,Ft.Optional|Ft.SkipSelf)||function yte(){return typeof $localize<"u"&&$localize.locale||Lf}()}),vS=new Me("");let uU=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function lY(n="zone.js",e){return"noop"===n?new BL:"zone.js"===n?new Pt(e):n}(r?.ngZone,function lU(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function eJ(n,e,t){return new DA(n,e,t)}(t.moduleType,this.injector,function cU(n){return[{provide:Pt,useFactory:n},{provide:Wo,multi:!0,useFactory:()=>{const e=U(pte,{optional:!0});return()=>e.initialize()}},{provide:Wo,multi:!0,useFactory:()=>{const e=U(_te);return()=>{e.initialize()}}},{provide:af,useFactory:gte}]}(()=>i)),o=s.injector.get(Qs,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{IE(this._modules,s),a.unsubscribe()})}),function iU(n,e,t){try{const r=t();return R_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(mS);return a.runInitializers(),a.donePromise.then(()=>(function S2(n){"string"==typeof n&&(A2=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Pa,Lf)||Lf),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=sU({},r);return function fte(n,e,t){const r=new AA(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ac);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new be(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(vS,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Se(dr))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ll=null;const dU=new Me("");function hU(n,e,t=[]){const r=`Platform: ${e}`,i=new Me(r);return(s=[])=>{let o=bS();if(!o||o.injector.get(dU,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Ete(n){if(Ll&&!Ll.get(dU,!1))throw new be(400,!1);(function rU(){!function ge(n){se=n}(()=>{throw new be(600,!1)})})(),Ll=n;const e=n.get(uU);(function pU(n){n.get(fF,null)?.forEach(t=>t())})(n)}(function fU(n=[],e){return dr.create({name:e,providers:[{provide:Qg,useValue:"platform"},{provide:vS,useValue:new Set([()=>Ll=null])},...n]})}(a,r))}return function Ite(n){const e=bS();if(!e)throw new be(401,!1);return e}()}}function bS(){return Ll?.get(uU)??null}let ra=(()=>{class n{static{this.__NG_ELEMENT_ID__=wte}}return n})();function wte(n){return function Cte(n,e,t){if(zs(n)&&!t){const r=Ai(n.index,e);return new t_(r,r)}return 47&n.type?new t_(e[Ln],e):null}(dn(),le(),!(16&~n))}class bU{constructor(){}supports(e){return iE(e)}create(e){return new Nte(e)}}const Rte=(n,e)=>e;class Nte{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Rte}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<IU(r,i,s)?t:r,a=IU(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,h=c-i;if(l!=h){for(let _=0;_<l;_++){const v=_<s.length?s[_]:s[_]=0,T=v+_;h<=T&&T<l&&(s[_]=v+1)}s[o.previousIndex]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!iE(e))throw new be(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function iJ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Mte(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new EU),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new EU),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Mte{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xte{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class EU{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new xte,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IU(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function wU(){return new CS([new bU])}let CS=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:wU})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wU()),deps:[[n,new cl,new oc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new be(901,!1)}}return n})();const Lte=hU(null,"core",[]);let Vte=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Se(Ac))}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})();function $f(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function SS(n,e){const t=Lt(n),r=e.elementInjector||uc();return new l_(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let KU=null;function Vl(){return KU}class Ene{}const ti=new Me("");let RS=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>U(Tne),providedIn:"platform"})}}return n})();const Ine=new Me("");let Tne=(()=>{class n extends RS{constructor(){super(),this._doc=U(ti),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function NS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function QU(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Sc(n){return n&&"?"!==n[0]?"?"+n:n}let fd=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>U(JU),providedIn:"root"})}}return n})();const YU=new Me("");let JU=(()=>{class n extends fd{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(ti).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return NS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Sc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Sc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Sc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(RS),Se(YU,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wne=(()=>{class n extends fd{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=NS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Sc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Sc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(RS),Se(YU,8))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})(),x_=(()=>{class n{constructor(t){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ane(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(QU(XU(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Sc(r))}normalize(t){return n.stripTrailingSlash(function Dne(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,XU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Sc}static{this.joinWithSlash=NS}static{this.stripTrailingSlash=QU}static{this.\u0275fac=function(r){return new(r||n)(Se(fd))}}static{this.\u0275prov=Ne({token:n,factory:()=>function Cne(){return new x_(Se(fd))}(),providedIn:"root"})}}return n})();function XU(n){return n.replace(/\/index.html$/,"")}class dre{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $S=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new dre(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),dj(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{dj(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ce(Xs),Ce(wr),Ce(CS))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function dj(n,e){n.context.$implicit=e.item}let HE=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ce(Xs),Ce(wr))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class hre{constructor(){this.$implicit=null,this.ngIf=null}}function hj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${br(e)}'.`)}let Gf=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(Ce(Xs))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Br]})}}return n})(),gj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})();const mj="browser";function GE(n){return"server"===n}let Gre=(()=>{class n{static{this.\u0275prov=Ne({token:n,providedIn:"root",factory:()=>function Hre(n){return n===mj}(U(Ea))?new Wre(U(ti),window):new qre})}}return n})();class Wre{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function zre(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class qre{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Iie extends Ene{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class KS extends Iie{static makeCurrent(){!function bne(n){KU??=n}(new KS)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tie(){return F_=F_||document.querySelector("base"),F_?F_.getAttribute("href"):null}();return null==t?null:function wie(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){F_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function cre(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let F_=null,Die=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const QS=new Me("");let Cj=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new be(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Se(QS),Se(Pt))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class Dj{constructor(e){this._doc=e}}const YS="ng-app-id";let Aj=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=GE(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${YS}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(YS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(YS,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Se(ti),Se(wb),Se(pF,8),Se(Ea))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const JS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},XS=/%COMP%/g,Nie=new Me("",{providedIn:"root",factory:()=>!0});function Rj(n,e){return e.map(t=>t.replace(XS,n))}let Nj=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=GE(a),this.defaultRenderer=new ZS(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gs.ShadowDom&&(r={...r,encapsulation:Gs.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof xj?i.applyToHost(t):i instanceof e1&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Gs.Emulated:s=new xj(c,l,r,this.appId,h,o,a,g);break;case Gs.ShadowDom:return new Oie(c,l,t,r,o,a,this.nonce,g);default:s=new e1(c,l,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Se(Cj),Se(Aj),Se(wb),Se(Nie),Se(ti),Se(Ea),Se(Pt),Se(pF))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();class ZS{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(JS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Mj(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Mj(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new be(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=JS[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=JS[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ml.DashCase|Ml.Important)?e.style.setProperty(t,r,i&Ml.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ml.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Vl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Mj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Oie extends ZS{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Rj(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class e1 extends ZS{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?Rj(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class xj extends e1{constructor(e,t,r,i,s,o,a,c){const l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=function Mie(n){return"_ngcontent-%COMP%".replace(XS,n)}(l),this.hostAttr=function xie(n){return"_nghost-%COMP%".replace(XS,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let kie=(()=>{class n extends Dj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Se(ti))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const Pj=["alt","control","meta","shift"],Fie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lie={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Vie=(()=>{class n extends Dj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Pj.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Fie[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pj.forEach(o=>{o!==i&&(0,Lie[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Se(ti))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const kj=[{provide:Ea,useValue:mj},{provide:fF,useValue:function Bie(){KS.makeCurrent()},multi:!0},{provide:ti,useFactory:function jie(){return function x7(n){hD=n}(document),document},deps:[]}],$ie=hU(Lte,"browser",kj),Hie=new Me(""),Fj=[{provide:EE,useClass:class Cie{addToWindow(e){it.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new be(5103,!1);return s},it.getAllAngularTestabilities=()=>e.getAllTestabilities(),it.getAllAngularRootElements=()=>e.getAllRootElements(),it.frameworkStabilizers||(it.frameworkStabilizers=[]),it.frameworkStabilizers.push(r=>{const i=it.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Vl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:tU,useClass:hS,deps:[Pt,fS,EE]},{provide:hS,useClass:hS,deps:[Pt,fS,EE]}],Lj=[{provide:Qg,useValue:"root"},{provide:Qs,useFactory:function Uie(){return new Qs},deps:[]},{provide:QS,useClass:kie,multi:!0,deps:[ti,Pt,Ea]},{provide:QS,useClass:Vie,multi:!0,deps:[ti]},Nj,Aj,Cj,{provide:OL,useExisting:Nj},{provide:class Kre{},useClass:Die,deps:[]},[]];let Gie=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:wb,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(Hie,12))}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({providers:[...Lj,...Fj],imports:[gj,Vte]})}}return n})(),Wie=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Se(ti))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Mc=N(635);const t1=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function jj(n){return Ge(n?.then)}function $j(n){return Ge(n[$o])}function Hj(n){return Symbol.asyncIterator&&Ge(n?.[Symbol.asyncIterator])}function Gj(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wj=function Qie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zj(n){return Ge(n?.[Wj])}function qj(n){return(0,Mc.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Mc.N3)(t.read());if(i)return yield(0,Mc.N3)(void 0);yield yield(0,Mc.N3)(r)}}finally{t.releaseLock()}})}function Kj(n){return Ge(n?.getReader)}function ni(n){if(n instanceof Wt)return n;if(null!=n){if($j(n))return function Yie(n){return new Wt(e=>{const t=n[$o]();if(Ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(t1(n))return function Jie(n){return new Wt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(jj(n))return function Xie(n){return new Wt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mo)})}(n);if(Hj(n))return Qj(n);if(zj(n))return function Zie(n){return new Wt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Kj(n))return function ese(n){return Qj(qj(n))}(n)}throw Gj(n)}function Qj(n){return new Wt(e=>{(function tse(n,e){var t,r,i,s;return(0,Mc.sH)(this,void 0,void 0,function*(){try{for(t=(0,Mc.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function xc(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function pd(n,e=0){return Rt((t,r)=>{t.subscribe(ut(r,i=>xc(r,n,()=>r.next(i),e),()=>xc(r,n,()=>r.complete(),e),i=>xc(r,n,()=>r.error(i),e)))})}function Wf(n,e=0){return Rt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Yj(n,e){if(!n)throw new Error("Iterable cannot be null");return new Wt(t=>{xc(t,e,()=>{const r=n[Symbol.asyncIterator]();xc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function zn(n,e){return e?function ase(n,e){if(null!=n){if($j(n))return function nse(n,e){return ni(n).pipe(Wf(e),pd(e))}(n,e);if(t1(n))return function ise(n,e){return new Wt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(jj(n))return function rse(n,e){return ni(n).pipe(Wf(e),pd(e))}(n,e);if(Hj(n))return Yj(n,e);if(zj(n))return function sse(n,e){return new Wt(t=>{let r;return xc(t,e,()=>{r=n[Wj](),xc(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}(n,e);if(Kj(n))return function ose(n,e){return Yj(qj(n),e)}(n,e)}throw Gj(n)}(n,e):ni(n)}const{isArray:cse}=Array,{getPrototypeOf:lse,prototype:use,keys:dse}=Object;function Jj(n){if(1===n.length){const e=n[0];if(cse(e))return{args:e,keys:null};if(function hse(n){return n&&"object"==typeof n&&lse(n)===use}(e)){const t=dse(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Xj(n){return n&&Ge(n.schedule)}function n1(n){return n[n.length-1]}function KE(n){return Ge(n1(n))?n.pop():void 0}function V_(n){return Xj(n1(n))?n.pop():void 0}const{isArray:pse}=Array;function r1(n){return Le(e=>function gse(n,e){return pse(e)?n(...e):n(e)}(n,e))}function Zj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let e$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(wc),Ce(wn))}}static{this.\u0275dir=Be({type:n})}}return n})(),gd=(()=>{class n extends e${static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tn(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,features:[hn]})}}return n})();const Oo=new Me(""),yse={provide:Oo,useExisting:un(()=>md),multi:!0},bse=new Me("");let md=(()=>{class n extends e${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vse(){const n=Vl()?Vl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(wc),Ce(wn),Ce(bse,8))}}static{this.\u0275dir=Be({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&at("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Vn([yse]),hn]})}}return n})();function Bl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Si=new Me(""),Ul=new Me(""),Ese=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function s$(n){return Bl(n.value)?{required:!0}:null}function a$(n){return Bl(n.value)||Ese.test(n.value)?null:{email:!0}}function QE(n){return null}function d$(n){return null!=n}function h$(n){return R_(n)?zn(n):n}function f$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function p$(n,e){return e.map(t=>t(n))}function g$(n){return n.map(e=>function Ise(n){return!n.validate}(e)?e:t=>e.validate(t))}function s1(n){return null!=n?function m$(n){if(!n)return null;const e=n.filter(d$);return 0==e.length?null:function(t){return f$(p$(t,e))}}(g$(n)):null}function o1(n){return null!=n?function _$(n){if(!n)return null;const e=n.filter(d$);return 0==e.length?null:function(t){return function mse(...n){const e=KE(n),{args:t,keys:r}=Jj(n),i=new Wt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let h=0;h<o;h++){let g=!1;ni(t[h]).subscribe(ut(s,_=>{g||(g=!0,l--),a[h]=_},()=>c--,void 0,()=>{(!c||!g)&&(l||s.next(r?Zj(r,a):a),s.complete())}))}});return e?i.pipe(r1(e)):i}(p$(t,e).map(h$)).pipe(Le(f$))}}(g$(n)):null}function y$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function a1(n){return n?Array.isArray(n)?n:[n]:[]}function YE(n,e){return Array.isArray(n)?n.includes(e):n===e}function E$(n,e){const t=a1(e);return a1(n).forEach(i=>{YE(t,i)||t.push(i)}),t}function I$(n,e){return a1(e).filter(t=>!YE(n,t))}class T${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=s1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=o1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class us extends T${get formDirective(){return null}get path(){return null}}class jl extends T${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class w${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let B_=(()=>{class n extends w${constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(jl,2))}}static{this.\u0275dir=Be({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Yt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[hn]})}}return n})(),zf=(()=>{class n extends w${constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ce(us,10))}}static{this.\u0275dir=Be({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Yt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[hn]})}}return n})();const U_="VALID",XE="INVALID",qf="PENDING",j_="DISABLED";function u1(n){return(ZE(n)?n.validators:n)||null}function d1(n,e){return(ZE(e)?e.asyncValidators:n)||null}function ZE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class h1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===U_}get invalid(){return this.status===XE}get pending(){return this.status==qf}get disabled(){return this.status===j_}get enabled(){return this.status!==j_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(E$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(E$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(I$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(I$(e,this._rawAsyncValidators))}hasValidator(e){return YE(this._rawValidators,e)}hasAsyncValidator(e){return YE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=j_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=U_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===U_||this.status===qf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?j_:U_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qf,this._hasOwnPendingAsyncValidator=!0;const t=h$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?j_:this.errors?XE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qf)?qf:this._anyControlsHaveStatus(XE)?XE:U_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ZE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Dse(n){return Array.isArray(n)?s1(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ase(n){return Array.isArray(n)?o1(n):n||null}(this._rawAsyncValidators)}}class f1 extends h1{constructor(e,t,r){super(u1(t),d1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function A$(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new be(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function D$(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new be(1e3,"");if(!r[t])throw new be(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Kf=new Me("CallSetDisabledState",{providedIn:"root",factory:()=>eI}),eI="always";function $_(n,e,t=eI){p1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Nse(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&S$(n,e)})}(n,e),function xse(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Mse(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&S$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Rse(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p1(n,e){const t=function v$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(y$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function b$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(y$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rI(e._rawValidators,i),rI(e._rawAsyncValidators,i)}function S$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Lse={provide:us,useExisting:un(()=>$l)},H_=Promise.resolve();let $l=(()=>{class n extends us{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new lt,this.form=new f1({},s1(t),o1(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){H_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),$_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){H_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){H_.then(()=>{const r=this._findContainer(t.path),i=new f1({});(function R$(n,e){p1(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){H_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){H_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function N$(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ce(Si,10),Ce(Ul,10),Ce(Kf,8))}}static{this.\u0275dir=Be({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&at("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[rn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vn([Lse]),hn]})}}return n})();function M$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function x$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const P$=class extends h1{constructor(e=null,t,r){super(u1(t),d1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ZE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=x$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){M$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){M$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){x$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Use={provide:jl,useExisting:un(()=>Qf)},F$=Promise.resolve();let Qf=(()=>{class n extends jl{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new P$,this._registered=!1,this.name="",this.update=new lt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _1(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===md?t=s:function kse(n){return Object.getPrototypeOf(n.constructor)===gd}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function m1(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){F$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&$f(r);F$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tI(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ce(us,9),Ce(Si,10),Ce(Ul,10),Ce(Oo,10),Ce(ra,8),Ce(Kf,8))}}static{this.\u0275dir=Be({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[rn.None,"disabled","isDisabled"],model:[rn.None,"ngModel","model"],options:[rn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vn([Use]),hn,Br]})}}return n})(),Yf=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const jse={provide:Oo,useExisting:un(()=>y1),multi:!0};let y1=(()=>{class n extends gd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tn(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&at("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Vn([jse]),hn]})}}return n})(),_d=(()=>{class n{constructor(){this._validator=QE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):QE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,features:[Br]})}}return n})();const ioe={provide:Si,useExisting:un(()=>yd),multi:!0};let yd=(()=>{class n extends _d{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=$f,this.createValidator=t=>s$}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tn(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Mn("required",i._enabled?"":null)},inputs:{required:"required"},features:[Vn([ioe]),hn]})}}return n})();const ooe={provide:Si,useExisting:un(()=>G_),multi:!0};let G_=(()=>{class n extends _d{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=$f,this.createValidator=t=>a$}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tn(n)))(i||n)}})()}static{this.\u0275dir=Be({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[Vn([ooe]),hn]})}}return n})(),uoe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),hoe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kf,useValue:t.callSetDisabledState??eI}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({imports:[uoe]})}}return n})();function st(...n){return zn(n,V_(n))}function w1(...n){const e=V_(n),t=KE(n),{args:r,keys:i}=Jj(n);if(0===r.length)return zn([],e);const s=new Wt(function poe(n,e,t=bs){return r=>{Z$(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)Z$(e,()=>{const l=zn(n[c],e);let h=!1;l.subscribe(ut(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Zj(i,o):bs));return t?s.pipe(r1(t)):s}function Z$(n,e,t){n?xc(t,n,e):e()}const sI=cn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pi(n,e,t=1/0){return Ge(e)?pi((r,i)=>Le((s,o)=>e(r,s,i,o))(ni(n(r,i))),t):("number"==typeof e&&(t=e),Rt((r,i)=>function goe(n,e,t,r,i,s,o,a){const c=[];let l=0,h=0,g=!1;const _=()=>{g&&!c.length&&!l&&e.complete()},v=C=>l<r?T(C):c.push(C),T=C=>{s&&e.next(C),l++;let A=!1;ni(t(C,h++)).subscribe(ut(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){const k=c.shift();o?xc(e,o,()=>T(k)):T(k)}_()}catch(k){e.error(k)}}))};return n.subscribe(ut(e,v,()=>{g=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Jf(n=1/0){return pi(bs,n)}function W_(...n){return function moe(){return Jf(1)}()(zn(n,V_(n)))}function eH(n){return new Wt(e=>{ni(n()).subscribe(e)})}function oI(n,e){const t=Ge(n)?n:()=>n,r=i=>i.error(t());return new Wt(e?i=>e.schedule(r,0,i):r)}const to=new Wt(n=>n.complete());function C1(){return Rt((n,e)=>{let t=null;n._refCount++;const r=ut(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tH extends Wt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Fn(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kn;const t=this.getSubject();e.add(this.source.subscribe(ut(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kn.EMPTY)}return e}refCount(){return C1()(this)}}function Hr(n,e){return Rt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ut(r,c=>{i?.unsubscribe();let l=0;const h=s++;ni(n(c,h)).subscribe(i=ut(r,g=>r.next(e?e(c,g,h,l++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function gi(n){return n<=0?()=>to:Rt((e,t)=>{let r=0;e.subscribe(ut(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function z_(...n){const e=V_(n);return Rt((t,r)=>{(e?W_(n,t,e):W_(n,t)).subscribe(r)})}function Sr(n,e){return Rt((t,r)=>{let i=0;t.subscribe(ut(r,s=>n.call(e,s,i++)&&r.next(s)))})}function aI(n){return Rt((e,t)=>{let r=!1;e.subscribe(ut(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function nH(n=yoe){return Rt((e,t)=>{let r=!1;e.subscribe(ut(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yoe(){return new sI}function Hl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Sr((i,s)=>n(i,s,r)):bs,gi(1),t?aI(e):nH(()=>new sI))}function q_(n,e){return Ge(e)?pi(n,e,1):pi(n,1)}function mi(n,e,t){const r=Ge(n)||e||t?{next:n,error:e,complete:t}:n;return r?Rt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ut(s,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),s.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):bs}function Xf(n){return Rt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ut(t,void 0,void 0,o=>{s=ni(n(o,Xf(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function cI(n,e){return Rt(function voe(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ut(o,h=>{const g=l++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function D1(n){return n<=0?()=>to:Rt((e,t)=>{let r=[];e.subscribe(ut(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function A1(n){return Rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ri(n){return Rt((e,t)=>{ni(n).subscribe(ut(t,()=>t.complete(),kr)),!t.closed&&e.subscribe(t)})}const Vt="primary",K_=Symbol("RouteTitle");class Eoe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zf(n){return new Eoe(n)}function Ioe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Oa(n,e){const t=n?S1(n):void 0,r=e?S1(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!iH(n[i],e[i]))return!1;return!0}function S1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function iH(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function sH(n){return n.length>0?n[n.length-1]:null}function Gl(n){return function foe(n){return!!n&&(n instanceof Wt||Ge(n.lift)&&Ge(n.subscribe))}(n)?n:R_(n)?zn(Promise.resolve(n)):st(n)}const woe={exact:function cH(n,e,t){if(!vd(n.segments,e.segments)||!lI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cH(n.children[r],e.children[r],t))return!1;return!0},subset:lH},oH={exact:function Coe(n,e){return Oa(n,e)},subset:function Doe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iH(n[t],e[t]))},ignored:()=>!0};function aH(n,e,t){return woe[t.paths](n.root,e.root,t.matrixParams)&&oH[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function lH(n,e,t){return uH(n,e,e.segments,t)}function uH(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!vd(i,t)||e.hasChildren()||!lI(i,t,r))}if(n.segments.length===t.length){if(!vd(n.segments,t)||!lI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!lH(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(vd(n.segments,i)&&lI(n.segments,i,r)&&n.children[Vt])&&uH(n.children[Vt],e,s,r)}}function lI(n,e,t){return e.every((r,i)=>oH[t](n[i].parameters,r.parameters))}class ep{constructor(e=new xn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zf(this.queryParams),this._queryParamMap}toString(){return Roe.serialize(this)}}class xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uI(this)}}class Q_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Zf(this.parameters),this._parameterMap}toString(){return fH(this)}}function vd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>new R1,providedIn:"root"})}}return n})();class R1{parse(e){const t=new Uoe(e);return new ep(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Y_(e.root,!0)}`,r=function xoe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${dI(t)}=${dI(i)}`).join("&"):`${dI(t)}=${dI(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Noe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Roe=new R1;function uI(n){return n.segments.map(e=>fH(e)).join("/")}function Y_(n,e){if(!n.hasChildren())return uI(n);if(e){const t=n.children[Vt]?Y_(n.children[Vt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Vt&&r.push(`${i}:${Y_(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Soe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Vt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Vt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Vt?[Y_(n.children[Vt],!1)]:[`${i}:${Y_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${uI(n)}/${t[0]}`:`${uI(n)}/(${t.join("//")})`}}function dH(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dI(n){return dH(n).replace(/%3B/gi,";")}function N1(n){return dH(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hI(n){return decodeURIComponent(n)}function hH(n){return hI(n.replace(/\+/g,"%20"))}function fH(n){return`${N1(n.path)}${function Moe(n){return Object.entries(n).map(([e,t])=>`;${N1(e)}=${N1(t)}`).join("")}(n.parameters)}`}const Poe=/^[^\/()?;#]+/;function M1(n){const e=n.match(Poe);return e?e[0]:""}const Ooe=/^[^\/()?;=#]+/,Foe=/^[^=?&#]+/,Voe=/^[^&#]+/;class Uoe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new xn(e,t)),r}parseSegment(){const e=M1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new be(4009,!1);return this.capture(e),new Q_(hI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function koe(n){const e=n.match(Ooe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=M1(this.remaining);i&&(r=i,this.capture(r))}e[hI(t)]=hI(r)}parseQueryParam(e){const t=function Loe(n){const e=n.match(Foe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Boe(n){const e=n.match(Voe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=hH(t),s=hH(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=M1(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new be(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Vt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Vt]:new xn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new be(4011,!1)}}function pH(n){return n.segments.length>0?new xn([],{[Vt]:n}):n}function gH(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=gH(i);if(r===Vt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function joe(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new xn(n.segments.concat(e.segments),e.children)}return n}(new xn(n.segments,e))}function np(n){return n instanceof ep}function mH(n){let e;const i=pH(function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new xn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function _H(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return x1(i,i,i,t,r);const s=function Hoe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vH(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new vH(t,e,r)}(e);if(s.toRoot())return x1(i,i,new xn([],{}),t,r);const o=function Goe(n,e,t){if(n.isAbsolute)return new pI(e,!0,0);if(!t)return new pI(e,!1,NaN);if(null===t.parent)return new pI(t,!0,0);const r=fI(n.commands[0])?0:1;return function Woe(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new be(4005,!1);i=r.segments.length}return new pI(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?X_(o.segmentGroup,o.index,s.commands):bH(o.segmentGroup,o.index,s.commands);return x1(i,o.segmentGroup,a,t,r)}function fI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function J_(n){return"object"==typeof n&&null!=n&&n.outlets}function x1(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),o=n===e?t:yH(n,e,t);const a=pH(gH(o));return new ep(a,s,i)}function yH(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:yH(s,e,t)}),new xn(n.segments,r)}class vH{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fI(r[0]))throw new be(4003,!1);const i=r.find(J_);if(i&&i!==sH(r))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function bH(n,e,t){if(n??=new xn([],{}),0===n.segments.length&&n.hasChildren())return X_(n,e,t);const r=function qoe(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(J_(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!IH(c,l,o))return s;r+=2}else{if(!IH(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new xn(n.segments.slice(0,r.pathIndex),{});return s.children[Vt]=new xn(n.segments.slice(r.pathIndex),n.children),X_(s,0,i)}return r.match&&0===i.length?new xn(n.segments,{}):r.match&&!n.hasChildren()?P1(n,e,t):r.match?X_(n,0,i):P1(n,e,t)}function X_(n,e,t){if(0===t.length)return new xn(n.segments,{});{const r=function zoe(n){return J_(n[0])?n[0].outlets:{[Vt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Vt)&&n.children[Vt]&&1===n.numberOfChildren&&0===n.children[Vt].segments.length){const s=X_(n.children[Vt],e,t);return new xn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=bH(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new xn(n.segments,i)}}function P1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(J_(s)){const c=Koe(s.outlets);return new xn(r,c)}if(0===i&&fI(t[0])){r.push(new Q_(n.segments[e].path,EH(t[0]))),i++;continue}const o=J_(s)?s.outlets[Vt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&fI(a)?(r.push(new Q_(o,EH(a))),i+=2):(r.push(new Q_(o,{})),i++)}return new xn(r,{})}function Koe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=P1(new xn([],{}),0,r))}),e}function EH(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function IH(n,e,t){return n==t.path&&Oa(e,t.parameters)}const Z_="imperative";var Xt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Xt||{});class ka{constructor(e,t){this.id=e,this.url=t}}class gI extends ka{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Xt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pc extends ka{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Xt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var no=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(no||{}),mI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(mI||{});class rp extends ka{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Xt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ip extends ka{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Xt.NavigationSkipped}}class _I extends ka{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Xt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class TH extends ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qoe extends ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yoe extends ka{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Xt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Joe extends ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xoe extends ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Xt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zoe{constructor(e){this.route=e,this.type=Xt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eae{constructor(e){this.route=e,this.type=Xt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tae{constructor(e){this.snapshot=e,this.type=Xt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nae{constructor(e){this.snapshot=e,this.type=Xt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rae{constructor(e){this.snapshot=e,this.type=Xt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iae{constructor(e){this.snapshot=e,this.type=Xt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wH{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Xt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class O1{}class k1{constructor(e){this.url=e}}class sae{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ey,this.attachRef=null}}let ey=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sae,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class CH{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=F1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=F1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=L1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return L1(e,this._root).map(t=>t.value)}}function F1(n,e){if(n===e.value)return e;for(const t of e.children){const r=F1(n,t);if(r)return r}return null}function L1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=L1(n,t);if(r.length)return r.unshift(e),r}return[]}class oa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sp(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class DH extends CH{constructor(e,t){super(e),this.snapshot=t,U1(this,e)}toString(){return this.snapshot.toString()}}function AH(n){const e=function oae(n){const s=new B1([],{},{},"",{},Vt,n,null,{});return new SH("",new oa(s,[]))}(n),t=new Ye([new Q_("",{})]),r=new Ye({}),i=new Ye({}),s=new Ye({}),o=new Ye(""),a=new bd(t,r,s,o,i,Vt,n,e.root);return a.snapshot=e.root,new DH(new oa(a,[]),e)}class bd{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Le(l=>l[K_]))??st(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Le(e=>Zf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Le(e=>Zf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function V1(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&NH(i)&&(r.resolve[K_]=i.title),r}class B1{get title(){return this.data?.[K_]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zf(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class SH extends CH{constructor(e,t){super(t),this.url=e,U1(this,t)}toString(){return RH(this._root)}}function U1(n,e){e.value._routerState=n,e.children.forEach(t=>U1(n,t))}function RH(n){const e=n.children.length>0?` { ${n.children.map(RH).join(", ")} } `:"";return`${n.value}${e}`}function j1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Oa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Oa(e.params,t.params)||n.paramsSubject.next(t.params),function Toe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Oa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Oa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $1(n,e){const t=Oa(n.params,e.params)&&function Aoe(n,e){return vd(n,e)&&n.every((t,r)=>Oa(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$1(n.parent,e.parent))}function NH(n){return"string"==typeof n.title||null===n.title}let H1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Vt,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=U(ey),this.location=U(Xs),this.changeDetector=U(ra),this.environmentInjector=U(Kr),this.inputBinder=U(yI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new be(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new G1(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Br]})}}return n})();class G1{__ngOutletInjector(e){return new G1(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bd?this.route:e===ey?this.childContexts:this.parent.get(e,t)}}const yI=new Me("");let MH=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=w1([r.queryParams,r.params,r.data]).pipe(Hr(([s,o,a],c)=>(a={...s,...o,...a},0===c?st(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function vne(n){const e=Lt(n);if(!e)return null;const t=new l_(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function ty(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cae(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ty(n,r,i);return ty(n,r)})}(n,e,t);return new oa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ty(n,a)),o}}const r=function lae(n){return new bd(new Ye(n.url),new Ye(n.params),new Ye(n.queryParams),new Ye(n.fragment),new Ye(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ty(n,s));return new oa(r,i)}}const xH="ngNavigationCancelingError";function PH(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=np(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OH(!1,no.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function OH(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[xH]=!0,t.cancellationCode=e,t}function kH(n){return!!n&&n[xH]}let FH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Mo],decls:1,vars:0,template:function(r,i){1&r&&Jt(0,"router-outlet")},dependencies:[H1],encapsulation:2})}}return n})();function W1(n){const e=n.children&&n.children.map(W1),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=FH),t}function Fa(n){return n.outlet||Vt}function ny(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _ae{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),j1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=sp(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=sp(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=sp(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=sp(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new iae(s.value.snapshot))}),e.children.length&&this.forwardEvent(new nae(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(j1(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),j1(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=ny(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class LH{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vI{constructor(e,t){this.component=e,this.route=t}}function yae(n,e,t){const r=n._root;return ry(r,e?e._root:null,t,[r.value])}function op(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function oC(n){return null!==ol(n)}(n)?e.get(n):n:r}function ry(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=sp(e);return n.children.forEach(o=>{(function bae(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Eae(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vd(n.url,e.url)||!Oa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$1(n,e)||!Oa(n.queryParams,e.queryParams);default:return!$1(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new LH(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ry(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new vI(a.outlet.component,o))}else o&&iy(e,a,i),i.canActivateChecks.push(new LH(r)),ry(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>iy(a,t.getContext(o),i)),i}function iy(n,e,t){const r=sp(n),i=n.value;Object.entries(r).forEach(([s,o])=>{iy(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new vI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function sy(n){return"function"==typeof n}function VH(n){return n instanceof sI||"EmptyError"===n?.name}const bI=Symbol("INITIAL_VALUE");function ap(){return Hr(n=>w1(n.map(e=>e.pipe(gi(1),z_(bI)))).pipe(Le(e=>{for(const t of e)if(!0!==t){if(t===bI)return bI;if(!1===t||t instanceof ep)return t}return!0}),Sr(e=>e!==bI),gi(1)))}function BH(n){return function Cu(...n){return tc(n)}(mi(e=>{if(np(e))throw PH(0,e)}),Le(e=>!0===e))}class z1{constructor(e){this.segmentGroup=e||null}}class q1 extends Error{constructor(e){super(),this.urlTree=e}}function cp(n){return oI(new z1(n))}class Uae{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Vt])return oI(new be(4e3,!1));i=i.children[Vt]}}applyRedirectCommands(e,t,r){const i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new q1(i);return i}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ep(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new xn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new be(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const K1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jae(n,e,t,r,i){const s=Q1(n,e,t);return s.matched?(r=function dae(n,e){return n.providers&&!n._injector&&(n._injector=nE(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Lae(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(o=>{const a=op(o,n);return Gl(function Aae(n){return n&&sy(n.canMatch)}(a)?a.canMatch(e,t):In(n,()=>a(e,t)))})).pipe(ap(),BH()):st(!0)}(r,e,t).pipe(Le(o=>!0===o?s:{...K1}))):st(s)}function Q1(n,e,t){if("**"===e.path)return function $ae(n){return{matched:!0,parameters:n.length>0?sH(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...K1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ioe)(t,n,e);if(!i)return{...K1};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function UH(n,e,t,r){return t.length>0&&function Wae(n,e,t){return t.some(r=>EI(n,e,r)&&Fa(r)!==Vt)}(n,t,r)?{segmentGroup:new xn(e,Gae(r,new xn(t,n.children))),slicedSegments:[]}:0===t.length&&function zae(n,e,t){return t.some(r=>EI(n,e,r))}(n,t,r)?{segmentGroup:new xn(n.segments,Hae(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:t}}function Hae(n,e,t,r){const i={};for(const s of t)if(EI(n,e,s)&&!r[Fa(s)]){const o=new xn([],{});i[Fa(s)]=o}return{...r,...i}}function Gae(n,e){const t={};t[Vt]=e;for(const r of n)if(""===r.path&&Fa(r)!==Vt){const i=new xn([],{});t[Fa(r)]=i}return t}function EI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Qae{}class Xae{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Uae(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new be(4002,`'${e.segmentGroup}'`)}recognize(){const e=UH(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Le(t=>{const r=new B1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Vt,this.rootComponentType,null,{}),i=new oa(r,t),s=new SH("",i),o=function $oe(n,e,t=null,r=null){return _H(mH(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Vt).pipe(Xf(r=>{if(r instanceof q1)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof z1?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,i=V1(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(Le(s=>s instanceof oa?[s]:[]))}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return zn(i).pipe(q_(s=>{const o=r.children[s],a=function gae(n,e){const t=n.filter(r=>Fa(r)===e);return t.push(...n.filter(r=>Fa(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),cI((s,o)=>(s.push(...o),s)),aI(null),function boe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Sr((i,s)=>n(i,s,r)):bs,D1(1),t?aI(e):nH(()=>new sI))}(),pi(s=>{if(null===s)return cp(r);const o=jH(s);return function Zae(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),st(o)}))}processSegment(e,t,r,i,s,o){return zn(t).pipe(q_(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Xf(c=>{if(c instanceof z1)return st(null);throw c}))),Hl(a=>!!a),Xf(a=>{if(VH(a))return function Kae(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?st(new Qae):cp(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function qae(n,e,t,r){return!!(Fa(n)===r||r!==Vt&&EI(e,t,n))&&Q1(e,n,t).matched}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):cp(i):cp(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:h}=Q1(t,i,s);if(!a)return cp(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,g).pipe(pi(_=>this.processSegment(e,r,t,_.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){const o=jae(t,r,i,e);return"**"===r.path&&(t.children={}),o.pipe(Hr(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Hr(({routes:c})=>{const l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:g,parameters:_}=a,v=new B1(h,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function tce(n){return n.data||{}}(r),Fa(r),r.component??r._loadedComponent??null,r,function nce(n){return n.resolve||{}}(r)),{segmentGroup:T,slicedSegments:C}=UH(t,h,g,c);if(0===C.length&&T.hasChildren())return this.processChildren(l,c,T).pipe(Le(k=>null===k?null:new oa(v,k)));if(0===c.length&&0===C.length)return st(new oa(v,[]));const A=Fa(r)===s;return this.processSegment(l,c,T,C,A?Vt:s,!0).pipe(Le(k=>new oa(v,k instanceof oa?[k]:[])))})):cp(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function Fae(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(o=>{const a=op(o,n);return Gl(function Tae(n){return n&&sy(n.canLoad)}(a)?a.canLoad(e,t):In(n,()=>a(e,t)))})).pipe(ap(),BH())}(e,t,r).pipe(pi(i=>i?this.configLoader.loadChildren(e,t).pipe(mi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Bae(n){return oI(OH(!1,no.GuardRejected))}())):st({routes:[],injector:e})}}function ece(n){const e=n.value.routeConfig;return e&&""===e.path}function jH(n){const e=[],t=new Set;for(const r of n){if(!ece(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=jH(r.children);e.push(new oa(r.value,i))}return e.filter(r=>!t.has(r))}function ice(n,e){return pi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);const s=new Set(i.map(c=>c.route)),o=new Set;for(const c of s)if(!o.has(c))for(const l of $H(c))o.add(l);let a=0;return zn(o).pipe(q_(c=>s.has(c)?function sce(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!NH(i)&&(s[K_]=i.title),function oce(n,e,t,r){const i=S1(n);if(0===i.length)return st({});const s={};return zn(i).pipe(pi(o=>function ace(n,e,t,r){const i=ny(e)??r,s=op(n,i);return Gl(s.resolve?s.resolve(e,t):In(i,()=>s(e,t)))}(n[o],e,t,r).pipe(Hl(),mi(a=>{s[o]=a}))),D1(1),function rH(n){return Le(()=>n)}(s),Xf(o=>VH(o)?to:oI(o)))}(s,n,e,r).pipe(Le(o=>(n._resolvedData=o,n.data=V1(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=V1(c,c.parent,n).resolve,st(void 0))),mi(()=>a++),D1(1),pi(c=>a===o.size?st(t):to))})}function $H(n){const e=n.children.map(t=>$H(t)).flat();return[n,...e]}function Y1(n){return Hr(e=>{const t=n(e);return t?zn(t).pipe(Le(()=>e)):st(e)})}let HH=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Vt);return r}getResolvedTitleForRoute(t){return t.data[K_]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>U(cce),providedIn:"root"})}}return n})(),cce=(()=>{class n extends HH{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Se(Wie))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const lp=new Me("",{providedIn:"root",factory:()=>({})}),up=new Me("");let J1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(oU)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gl(t.loadComponent()).pipe(Le(GH),mi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),A1(()=>{this.componentLoaders.delete(t)})),i=new tH(r,()=>new G).pipe(C1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function lce(n,e,t,r){return Gl(n.loadChildren()).pipe(Le(GH),pi(i=>i instanceof wV||Array.isArray(i)?st(i):zn(e.compileModuleAsync(i))),Le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(up,[],{optional:!0,self:!0}).flat()),{routes:o.map(W1),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(A1(()=>{this.childrenLoaders.delete(r)})),o=new tH(s,()=>new G).pipe(C1());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GH(n){return function uce(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let X1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>U(dce),providedIn:"root"})}}return n})(),dce=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const WH=new Me(""),zH=new Me("");function hce(n,e,t){const r=n.get(zH),i=n.get(ti);return n.get(Pt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s;const o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),function fce(n){return new Promise(e=>{hA(e,{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&In(n,()=>c({transition:a,from:e,to:t})),o})}let II=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new G,this.transitionAbortSubject=new G,this.configLoader=U(J1),this.environmentInjector=U(Kr),this.urlSerializer=U(tp),this.rootContexts=U(ey),this.location=U(x_),this.inputBindingEnabled=null!==U(yI,{optional:!0}),this.titleStrategy=U(HH),this.options=U(lp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(X1),this.createViewTransition=U(WH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>st(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new eae(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Zoe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new Ye({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Z_,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Sr(s=>0!==s.id),Le(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Hr(s=>{let o=!1,a=!1;return st(s).pipe(Hr(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",no.SupersededByNewNavigation),to;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new ip(c.id,this.urlSerializer.serialize(c.rawUrl),g,mI.IgnoredSameUrlNavigation)),c.resolve(null),to}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return st(c).pipe(Hr(g=>{const _=this.transitions?.getValue();return this.events.next(new gI(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?to:Promise.resolve(g)}),function rce(n,e,t,r,i,s){return pi(o=>function Yae(n,e,t,r,i,s,o="emptyOnly"){return new Xae(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Le(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),mi(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new TH(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:g,extractedUrl:_,source:v,restoredState:T,extras:C}=c,A=new gI(g,this.urlSerializer.serialize(_),v,T);this.events.next(A);const k=AH(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:k,urlAfterRedirects:_,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,st(s)}{const g="";return this.events.next(new ip(c.id,this.urlSerializer.serialize(c.extractedUrl),g,mI.IgnoredByUrlHandlingStrategy)),c.resolve(null),to}}),mi(c=>{const l=new Qoe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Le(c=>(this.currentTransition=s={...c,guards:yae(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function Sae(n,e){return pi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?st({...t,guardsResult:!0}):function Rae(n,e,t,r){return zn(n).pipe(pi(i=>function kae(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?st(s.map(a=>{const c=ny(e)??i,l=op(a,c);return Gl(function Dae(n){return n&&sy(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):In(c,()=>l(n,e,t,r))).pipe(Hl())})).pipe(ap()):st(!0)}(i.component,i.route,t,e,r)),Hl(i=>!0!==i,!0))}(o,r,i,n).pipe(pi(a=>a&&function Iae(n){return"boolean"==typeof n}(a)?function Nae(n,e,t,r){return zn(e).pipe(q_(i=>W_(function xae(n,e){return null!==n&&e&&e(new tae(n)),st(!0)}(i.route.parent,r),function Mae(n,e){return null!==n&&e&&e(new rae(n)),st(!0)}(i.route,r),function Oae(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function vae(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>eH(()=>st(o.guards.map(c=>{const l=ny(o.node)??t,h=op(c,l);return Gl(function Cae(n){return n&&sy(n.canActivateChild)}(h)?h.canActivateChild(r,n):In(l,()=>h(r,n))).pipe(Hl())})).pipe(ap())));return st(s).pipe(ap())}(n,i.path,t),function Pae(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(s=>eH(()=>{const o=ny(e)??t,a=op(s,o);return Gl(function wae(n){return n&&sy(n.canActivate)}(a)?a.canActivate(e,n):In(o,()=>a(e,n))).pipe(Hl())}));return st(i).pipe(ap())}(n,i.route,t))),Hl(i=>!0!==i,!0))}(r,s,n,e):st(a)),Le(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),mi(c=>{if(s.guardsResult=c.guardsResult,np(c.guardsResult))throw PH(0,c.guardsResult);const l=new Yoe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Sr(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",no.GuardRejected),!1)),Y1(c=>{if(c.guards.canActivateChecks.length)return st(c).pipe(mi(l=>{const h=new Joe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Hr(l=>{let h=!1;return st(l).pipe(ice(this.paramsInheritanceStrategy,this.environmentInjector),mi({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",no.NoDataFromResolver)}}))}),mi(l=>{const h=new Xoe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Y1(c=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(mi(_=>{h.component=_}),Le(()=>{})));for(const _ of h.children)g.push(...l(_));return g};return w1(l(c.targetSnapshot.root)).pipe(aI(null),gi(1))}),Y1(()=>this.afterPreactivation()),Hr(()=>{const{currentSnapshot:c,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?zn(h).pipe(Le(()=>s)):st(s)}),Le(c=>{const l=function aae(n,e,t){const r=ty(n,e._root,t?t._root:void 0);return new DH(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,s}),mi(()=>{this.events.next(new O1)}),((n,e,t,r)=>Le(i=>(new _ae(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),gi(1),mi({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Ri(this.transitionAbortSubject.pipe(mi(c=>{throw c}))),A1(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",no.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xf(c=>{if(a=!0,kH(c))this.events.next(new rp(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function uae(n){return kH(n)&&np(n.url)}(c)?this.events.next(new k1(c.url)):s.resolve(!1);else{this.events.next(new _I(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return to}))}))}cancelNavigationTransition(t,r,i){const s=new rp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pce(n){return n!==Z_}let gce=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>U(_ce),providedIn:"root"})}}return n})();class mce{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let _ce=(()=>{class n extends mce{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tn(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qH=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:()=>U(yce),providedIn:"root"})}}return n})(),yce=(()=>{class n extends qH{constructor(){super(...arguments),this.location=U(x_),this.urlSerializer=U(tp),this.options=U(lp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(X1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ep,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=AH(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof gI)this.stateMemento=this.createStateMemento();else if(t instanceof ip)this.rawUrlTree=r.initialUrl;else if(t instanceof TH){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof O1?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof rp&&(t.code===no.GuardRejected||t.code===no.NoDataFromResolver)?this.restoreHistory(r):t instanceof _I?this.restoreHistory(r,!0):t instanceof Pc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tn(n)))(i||n)}})()}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oy=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(oy||{});function KH(n,e){n.events.pipe(Sr(t=>t instanceof Pc||t instanceof rp||t instanceof _I||t instanceof ip),Le(t=>t instanceof Pc||t instanceof ip?oy.COMPLETE:t instanceof rp&&(t.code===no.Redirect||t.code===no.SupersededByNewNavigation)?oy.REDIRECTING:oy.FAILED),Sr(t=>t!==oy.REDIRECTING),gi(1)).subscribe(()=>{e()})}function vce(n){throw n}const bce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ece={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ds=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(YB),this.stateManager=U(qH),this.options=U(lp,{optional:!0})||{},this.pendingTasks=U(vf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(II),this.urlSerializer=U(tp),this.location=U(x_),this.urlHandlingStrategy=U(X1),this._events=new G,this.errorHandler=this.options.errorHandler||vce,this.navigated=!1,this.routeReuseStrategy=U(gce),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(up,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(yI,{optional:!0}),this.eventsSubscription=new kn,this.isNgZoneEnabled=U(Pt)instanceof Pt&&Pt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof rp&&r.code!==no.Redirect&&r.code!==no.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pc)this.navigated=!0;else if(r instanceof k1){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pce(i.source)};this.scheduleNavigation(o,Z_,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Tce(n){return!(n instanceof O1||n instanceof k1)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Z_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(W1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=mH(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),g=this.currentUrlTree.root}return _H(g,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=np(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Z_,null,r)}navigate(t,r={skipLocationChange:!1}){return function Ice(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new be(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...bce}:!1===r?{...Ece}:r,np(t))return aH(this.currentUrlTree,t,i);const s=this.parseUrl(t);return aH(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((g,_)=>{a=g,c=_});const h=this.pendingTasks.add();return KH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ed=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new G,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Pc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function kF(n,e,t){return function _K(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?OF:ND}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ce(ds),Ce(bd),Xo("tabindex"),Ce(wc),Ce(wn),Ce(fd))}}static{this.\u0275dir=Be({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&at("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Mn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[rn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",$f],skipLocationChange:[rn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",$f],replaceUrl:[rn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",$f],routerLink:"routerLink"},standalone:!0,features:[TV,Br]})}}return n})();class QH{}let Dce=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Sr(t=>t instanceof Pc),q_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=nE(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return zn(i).pipe(Jf())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const s=i.pipe(pi(o=>null===o?st(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?zn([s,this.loader.loadComponent(r)]).pipe(Jf()):s})}static{this.\u0275fac=function(r){return new(r||n)(Se(ds),Se(oU),Se(Kr),Se(QH),Se(J1))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Z1=new Me("");let YH=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=U(Kr),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ip&&t.code===mI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wH&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular((0,S.A)(function*(){yield new Promise(s=>{setTimeout(()=>{s()}),hA(()=>{s()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new wH(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function sL(){throw new Error("invalid")}()}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();function La(n,e){return{\u0275kind:n,\u0275providers:e}}function XH(){const n=U(dr);return e=>{const t=n.get(Ac);if(e!==t.components[0])return;const r=n.get(ds),i=n.get(ZH);1===n.get(eR)&&r.initialNavigation(),n.get(e3,null,Ft.Optional)?.setUpPreloading(),n.get(Z1,null,Ft.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const ZH=new Me("",{factory:()=>new G}),eR=new Me("",{providedIn:"root",factory:()=>1}),e3=new Me("");function Nce(n){return La(0,[{provide:e3,useExisting:Dce},{provide:QH,useExisting:n}])}function xce(n){return La(9,[{provide:WH,useValue:hce},{provide:zH,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const t3=new Me("ROUTER_FORROOT_GUARD"),Pce=[x_,{provide:tp,useClass:R1},ds,ey,{provide:bd,useFactory:function JH(n){return n.routerState.root},deps:[ds]},J1,[]];let n3=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Pce,[],{provide:up,multi:!0,useValue:t},{provide:t3,useFactory:Lce,deps:[[ds,new oc,new cl]]},{provide:lp,useValue:r||{}},r?.useHash?{provide:fd,useClass:wne}:{provide:fd,useClass:JU},{provide:Z1,useFactory:()=>{const n=U(Gre),e=U(Pt),t=U(lp),r=U(II),i=U(tp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new YH(i,r,n,e,t)}},r?.preloadingStrategy?Nce(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Vce(r):[],r?.bindToComponentInputs?La(8,[MH,{provide:yI,useExisting:MH}]).\u0275providers:[],r?.enableViewTransitions?xce().\u0275providers:[],[{provide:r3,useFactory:XH},{provide:_S,multi:!0,useExisting:r3}]]}}static forChild(t){return{ngModule:n,providers:[{provide:up,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(t3,8))}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})();function Lce(n){return"guarded"}function Vce(n){return["disabled"===n.initialNavigation?La(3,[{provide:gS,multi:!0,useFactory:()=>{const e=U(ds);return()=>{e.setUpLocationChangeListener()}}},{provide:eR,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?La(2,[{provide:eR,useValue:0},{provide:gS,multi:!0,deps:[dr],useFactory:e=>{const t=e.get(Ine,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ds),s=e.get(ZH);KH(i,()=>{r(!0)}),e.get(II).afterPreactivation=()=>(r(!0),s.closed?st(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const r3=new Me(""),i3=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},nR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0;let _=(15&a)<<2|l>>6,v=63&l;c||(v=64,o||(_=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[_],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(i3(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==g)throw Error();r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==g&&r.push(l<<6&192|g))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},TI=function(n){return function(n){const e=i3(n);return nR.encodeByteArray(e,!0)}(n).replace(/\./g,"")},wI=function(n){try{return nR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ro(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rR(){try{return"object"==typeof indexedDB}catch{return!1}}function o3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iR=()=>{try{return o3().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&wI(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},ele=()=>{var n;return null===(n=iR())||void 0===n?void 0:n.config};class dp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}class Wl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Wl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hp.prototype.create)}}class hp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function rle(n,e){return n.replace(ile,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Wl(i,`${this.serviceName}: ${o} (${i}).`,r)}}const ile=/\{\$([^}]+)}/g;function sR(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(c3(s)&&c3(o)){if(!sR(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function c3(n){return null!==n&&"object"==typeof n}function oR(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class ole{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function ale(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=aR),void 0===i.error&&(i.error=aR),void 0===i.complete&&(i.complete=aR);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aR(){}const cle=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})};function ay(n){return n&&n._delegate?n._delegate:n}class zl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Id="[DEFAULT]";class gle{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dp;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function _le(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Id})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Id){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,S.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Id){return this.instances.has(e)}getOptions(e=Id){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Id?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Id){return this.component?this.component.multipleInstances?e:Id:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yle{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gle(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const lR=[];var qn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(qn||{});const l3={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},vle=qn.INFO,ble={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},Ele=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=ble[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class uR{constructor(e){this.name=e,this._logLevel=vle,this._logHandler=Ele,this._userLogHandler=null,lR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?l3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...e),this._logHandler(this,qn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...e),this._logHandler(this,qn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...e),this._logHandler(this,qn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...e),this._logHandler(this,qn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...e),this._logHandler(this,qn.ERROR,...e)}}const Ile=(n,e)=>e.some(t=>n instanceof t);let u3,d3;const h3=new WeakMap,dR=new WeakMap,f3=new WeakMap,hR=new WeakMap,fR=new WeakMap;let pR={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return dR.get(n);if("objectStoreNames"===e)return n.objectStoreNames||f3.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ql(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Rle(n){return"function"==typeof n?function Sle(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function wle(){return d3||(d3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(gR(this),e),ql(h3.get(this))}:function(...e){return ql(n.apply(gR(this),e))}:function(e,...t){const r=n.call(gR(this),e,...t);return f3.set(r,e.sort?e.sort():[e]),ql(r)}}(n):(n instanceof IDBTransaction&&function Dle(n){if(dR.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});dR.set(n,e)}(n),Ile(n,function Tle(){return u3||(u3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,pR):n)}function ql(n){if(n instanceof IDBRequest)return function Cle(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ql(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&h3.set(t,n)}).catch(()=>{}),fR.set(e,n),e}(n);if(hR.has(n))return hR.get(n);const e=Rle(n);return e!==n&&(hR.set(n,e),fR.set(e,n)),e}const gR=n=>fR.get(n),Mle=["get","getKey","getAll","getAllKeys","count"],xle=["put","add","delete","clear"],mR=new Map;function p3(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(mR.get(e))return mR.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=xle.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Mle.includes(t))return;const s=function(){var o=(0,S.A)(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),i&&l.done]))[0]});return function(c){return o.apply(this,arguments)}}();return mR.set(e,s),s}!function Ale(n){pR=n(pR)}(n=>({...n,get:(e,t,r)=>p3(e,t)||n.get(e,t,r),has:(e,t)=>!!p3(e,t)||n.has(e,t)}));class Ple{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Ole(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const _R="@firebase/app",Td=new uR("@firebase/app"),DI="[DEFAULT]",oue={[_R]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wd=new Map,AI=new Map;function aue(n,e){try{n.container.addComponent(e)}catch(t){Td.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cd(n){const e=n.name;if(AI.has(e))return Td.debug(`There were multiple attempts to register component ${e}.`),!1;AI.set(e,n);for(const t of wd.values())aue(t,n);return!0}function yR(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Oc=new hp("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class lue{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oc.create("app-deleted",{appName:this._name})}}const m3="9.15.0";function _3(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:DI,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Oc.create("bad-app-name",{appName:String(i)});if(t||(t=ele()),!t)throw Oc.create("no-options");const s=wd.get(i);if(s){if(sR(t,s.options)&&sR(r,s.config))return s;throw Oc.create("duplicate-app",{appName:i})}const o=new yle(i);for(const c of AI.values())o.addComponent(c);const a=new lue(t,r,o);return wd.set(i,a),a}function Dd(n,e,t){var r;let i=null!==(r=oue[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Td.warn(a.join(" "))}Cd(new zl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const due="firebase-heartbeat-database",hue=1,cy="firebase-heartbeat-store";let bR=null;function y3(){return bR||(bR=function Nle(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=ql(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ql(o.result),c.oldVersion,c.newVersion,ql(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(due,hue,{upgrade:(n,e)=>{0===e&&n.createObjectStore(cy)}}).catch(n=>{throw Oc.create("idb-open",{originalErrorMessage:n.message})})),bR}function ER(){return(ER=(0,S.A)(function*(n){try{return(yield y3()).transaction(cy).objectStore(cy).get(b3(n))}catch(e){if(e instanceof Wl)Td.warn(e.message);else{const t=Oc.create("idb-get",{originalErrorMessage:e?.message});Td.warn(t.message)}}})).apply(this,arguments)}function v3(n,e){return IR.apply(this,arguments)}function IR(){return(IR=(0,S.A)(function*(n,e){try{const r=(yield y3()).transaction(cy,"readwrite");return yield r.objectStore(cy).put(e,b3(n)),r.done}catch(t){if(t instanceof Wl)Td.warn(t.message);else{const r=Oc.create("idb-set",{originalErrorMessage:t?.message});Td.warn(r.message)}}})).apply(this,arguments)}function b3(n){return`${n.name}!${n.options.appId}`}class mue{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yue(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,S.A)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=E3();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,S.A)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=E3(),{heartbeatsToSend:r,unsentEntries:i}=function _ue(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),I3(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),I3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=TI(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function E3(){return(new Date).toISOString().substring(0,10)}class yue{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.A)(function*(){return!!rR()&&function Qce(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,S.A)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function fue(n){return ER.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,S.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return v3(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,S.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return v3(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function I3(n){return TI(JSON.stringify({version:2,heartbeats:n})).length}!function vue(n){Cd(new zl("platform-logger",e=>new Ple(e),"PRIVATE")),Cd(new zl("heartbeat",e=>new mue(e),"PRIVATE")),Dd(_R,"0.9.0",n),Dd(_R,"0.9.0","esm2017"),Dd("fire-js","")}(""),Dd("firebase","9.15.0","app");const TR=new Map,T3={activated:!1,tokenObservers:[]},Iue={initialized:!1,enabled:!1};function Ni(n){return TR.get(n)||Object.assign({},T3)}function SI(){return Iue}const wR="https://content-firebaseappcheck.googleapis.com/v1",Due="exchangeDebugToken",w3={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Sue{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,S.A)(function*(){t.stop();try{t.pending=new dp,yield function Rue(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new dp,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hs=new hp("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RI(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function C3(n){if(!Ni(n).activated)throw hs.create("use-before-activation",{appName:n.name})}function CR(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=NI(t)+"d:"),r&&(o+=NI(r)+"h:"),o+=NI(i)+"m:"+NI(s)+"s",o}function NI(n){return 0===n?"00":n>=10?n.toString():"0"+n}function DR(n,e){return AR.apply(this,arguments)}function AR(){return(AR=(0,S.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const g=yield i.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(g){throw hs.create("fetch-network-error",{originalErrorMessage:g?.message})}if(200!==o.status)throw hs.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(g){throw hs.create("fetch-parse-error",{originalErrorMessage:g?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}})).apply(this,arguments)}const Oue="firebase-app-check-database",kue=1,ly="firebase-app-check-store",D3="debug-token";let MI=null;function A3(){return MI||(MI=new Promise((n,e)=>{try{const t=indexedDB.open(Oue,kue);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(hs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ly,{keyPath:"compositeKey"})}}catch(t){e(hs.create("storage-open",{originalErrorMessage:t?.message}))}}),MI)}function S3(n,e){return SR.apply(this,arguments)}function SR(){return(SR=(0,S.A)(function*(n,e){const r=(yield A3()).transaction(ly,"readwrite"),s=r.objectStore(ly).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(hs.create("storage-set",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}function R3(n){return RR.apply(this,arguments)}function RR(){return(RR=(0,S.A)(function*(n){const t=(yield A3()).transaction(ly,"readonly"),i=t.objectStore(ly).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const c=a.target.result;s(c?c.value:void 0)},t.onerror=a=>{var c;o(hs.create("storage-get",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}function N3(n){return`${n.options.appId}-${n.name}`}const uy=new uR("@firebase/app-check");function NR(){return(NR=(0,S.A)(function*(n){if(rR()){let e;try{e=yield function Fue(n){return R3(N3(n))}(n)}catch(t){uy.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}})).apply(this,arguments)}function MR(n,e){return rR()?function Lue(n,e){return S3(N3(n),e)}(n,e).catch(t=>{uy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xR(){return(xR=(0,S.A)(function*(){let n;try{n=yield function Bue(){return R3(D3)}()}catch{}if(n)return n;{const e=cle();return function Vue(n){return S3(D3,n)}(e).catch(t=>uy.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}})).apply(this,arguments)}function M3(){return SI().enabled}function x3(){return PR.apply(this,arguments)}function PR(){return(PR=(0,S.A)(function*(){const n=SI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Hue={error:"UNKNOWN_ERROR"};function Gue(n){return nR.encodeString(JSON.stringify(n),!1)}function xI(n){return OR.apply(this,arguments)}function OR(){return(OR=(0,S.A)(function*(n,e=!1){const t=n.app;C3(t);const r=Ni(t);let s,i=r.token;if(i&&!fp(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(fp(c)?i=c:yield MR(t,void 0))}if(!e&&i&&fp(i))return{token:i.token};let a,o=!1;if(M3()){r.exchangeTokenPromise||(r.exchangeTokenPromise=DR(function Pue(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${wR}/projects/${t}/apps/${r}:${Due}?key=${i}`,body:{debug_token:e}}}(t,yield x3()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const c=yield r.exchangeTokenPromise;return yield MR(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Ni(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?uy.warn(c.message):uy.error(c),s=c}return i?s?a=fp(i)?{token:i.token,internalError:s}:k3(s):(a={token:i.token},r.token=i,yield MR(t,i)):a=k3(s),o&&O3(t,a),a})).apply(this,arguments)}function kR(n,e,t,r){const{app:i}=n,s=Ni(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&fp(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),P3(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>P3(n))}function FR(n,e){const t=Ni(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function P3(n){const{app:e}=n,t=Ni(e);let r=t.tokenRefresher;r||(r=function Wue(n){const{app:e}=n;return new Sue((0,S.A)(function*(){let r;if(r=Ni(e).token?yield xI(n,!0):yield xI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},w3.RETRIAL_MIN_WAIT,w3.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function O3(n,e){const t=Ni(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function fp(n){return n.expireTimeMillis-Date.now()>0}function k3(n){return{token:Gue(Hue),error:n}}class zue{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ni(this.app);for(const t of e)FR(this.app,t.next);return Promise.resolve()}}function Zue(n,e){const t=new dp;Ni(n).reCAPTCHAState={initialized:t};const i=function F3(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=RI(!1);return s?PI(n,e,s,i,t):function nde(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=RI(!1);if(!o)throw new Error("no recaptcha");PI(n,e,o,i,t)}),t.promise}function PI(n,e,t,r,i){t.ready(()=>{(function tde(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible"}),s=Ni(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function L3(n){return LR.apply(this,arguments)}function LR(){return(LR=(0,S.A)(function*(n){C3(n);const t=yield Ni(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ni(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})})).apply(this,arguments)}class VR{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,S.A)(function*(){var t,r;!function j3(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw hs.create("throttled",{time:CR(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const i=yield L3(e._app).catch(o=>{throw hs.create("recaptcha-error")});let s;try{s=yield DR(function Mue(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${wR}/projects/${t}/apps/${r}:exchangeRecaptchaV3Token?key=${i}`,body:{recaptcha_v3_token:e}}}(e._app,i),e._heartbeatServiceProvider)}catch(o){throw null!==(t=o.code)&&void 0!==t&&t.includes("fetch-status-error")?(e._throttleData=function U3(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=function fle(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(r=o.customData)||void 0===r?void 0:r.httpStatus),e._throttleData),hs.create("throttled",{time:CR(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):o}return e._throttleData=null,s})()}initialize(e){this._app=e,this._heartbeatServiceProvider=yR(e,"heartbeat"),Zue(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof VR&&this._siteKey===e._siteKey}}function ide(n=function uue(n=DI){const e=wd.get(n);if(!e&&n===DI)return _3();if(!e)throw Oc.create("no-app",{appName:n});return e}(),e){const t=yR(n=ay(n),"app-check");if(SI().initialized||function $ue(){const n=o3(),e=SI();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new dp;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function jue(){return xR.apply(this,arguments)}())}(),M3()&&x3().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw hs.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function sde(n,e,t){const r=function Tue(n,e){return TR.set(n,e),TR.get(n)}(n,Object.assign({},T3));r.activated=!0,r.provider=e,r.cachedTokenPromise=function Uue(n){return NR.apply(this,arguments)}(n).then(i=>(i&&fp(i)&&(r.token=i,O3(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),Ni(n).isTokenAutoRefreshEnabled&&kR(r,"INTERNAL",()=>{}),r}function BR(){return(BR=(0,S.A)(function*(n,e){const t=yield xI(n,e);if(t.error)throw t.error;return{token:t.token}})).apply(this,arguments)}const $3="app-check-internal";!function cde(){Cd(new zl("app-check",n=>function que(n,e){return new zue(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($3).initialize()})),Cd(new zl($3,n=>function Kue(n){return{getToken:e=>xI(n,e),addTokenListener:e=>kR(n,"INTERNAL",e),removeTokenListener:e=>FR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Dd("@firebase/app-check","0.6.0")}();const lde=function H3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},G3=new hp("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),W3=new uR("@firebase/auth");function OI(n,...e){W3.logLevel<=qn.ERROR&&W3.error(`Auth (${m3}): ${n}`,...e)}function Rs(n,...e){throw UR(n,...e)}function Va(n,...e){return UR(n,...e)}function UR(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return G3.create(n,...e)}function $e(n,e,...t){if(!n)throw UR(e,...t)}function Ba(n){const e="INTERNAL ASSERTION FAILED: "+n;throw OI(e),new Error(e)}function Kl(n,e){n||Ba(e)}const q3=new Map;function kc(n){Kl(n instanceof Function,"Expected a class definition");let e=q3.get(n);return e?(Kl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,q3.set(n,e),e)}function K3(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function hde(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function jR(){return"http:"===K3()||"https:"===K3()}()||function qce(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class hy{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kl(t>e,"Short delay should be less than long delay!"),this.isMobile=function Wce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ro())}()||function Kce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return hde()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Q3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},gde=new hy(3e4,6e4);function _i(n,e,t,r){return HR.apply(this,arguments)}function HR(){return(HR=(0,S.A)(function*(n,e,t,r,i={}){return Y3(n,i,(0,S.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=oR(Object.assign({key:n.config.apiKey},o)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),Q3.fetch()(J3(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function Y3(n,e,t){return GR.apply(this,arguments)}function GR(){return(GR=(0,S.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},pde),e);try{const i=new mde(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw fy(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw fy(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw fy(n,"email-already-in-use",o);if("USER_DISABLED"===c)throw fy(n,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw function z3(n,e,t){const r=Object.assign(Object.assign({},lde()),{[e]:t});return new hp("auth","Firebase",r).create(e,{appName:n.name})}(n,h,l);Rs(n,h)}}catch(i){if(i instanceof Wl)throw i;Rs(n,"network-request-failed")}})).apply(this,arguments)}function WR(){return(WR=(0,S.A)(function*(n,e,t,r,i={}){const s=yield _i(n,e,t,r,i);return"mfaPendingCredential"in s&&Rs(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function J3(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?function $R(n,e){Kl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}(n.config,i):`${n.config.apiScheme}://${i}`}class mde{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Va(this.auth,"network-request-failed")),gde.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fy(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Va(n,e,r);return i.customData._tokenResponse=t,i}function zR(){return(zR=(0,S.A)(function*(n,e){return _i(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function KR(){return(KR=(0,S.A)(function*(n,e){return _i(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function py(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function QR(){return(QR=(0,S.A)(function*(n,e=!1){const t=ay(n),r=yield t.getIdToken(e),i=kI(r);$e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:py(YR(i.auth_time)),issuedAtTime:py(YR(i.iat)),expirationTime:py(YR(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function YR(n){return 1e3*Number(n)}function kI(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return OI("JWT malformed, contained fewer than 3 sections"),null;try{const i=wI(t);return i?JSON.parse(i):(OI("Failed to decode base64 JWT payload"),null)}catch(i){return OI("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Lc(n,e){return JR.apply(this,arguments)}function JR(){return(JR=(0,S.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Wl&&function Ide({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class Tde{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,S.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,S.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class X3{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=py(this.lastLoginAt),this.creationTime=py(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gy(n){return XR.apply(this,arguments)}function XR(){return XR=(0,S.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Lc(n,function vde(n,e){return KR.apply(this,arguments)}(t,{idToken:r}));$e(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Dde(n){return n.map(e=>{var{providerId:t}=e,r=(0,Mc.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function Cde(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),h=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new X3(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)}),XR.apply(this,arguments)}function ZR(){return(ZR=(0,S.A)(function*(n){const e=ay(n);yield gy(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function eN(){return(eN=(0,S.A)(function*(n,e){const t=yield Y3(n,{},(0,S.A)(function*(){const r=oR({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=J3(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Q3.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class my{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Ede(n){const e=kI(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,S.A)(function*(){return $e(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,S.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Ade(n,e){return eN.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new my;return r&&($e("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&($e("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&($e("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new my,this.toJSON())}_performRefresh(){return Ba("not implemented")}}function Ql(n,e){$e("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Ad{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Mc.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tde(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new X3(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,S.A)(function*(){const r=yield Lc(t,t.stsTokenManager.getToken(t.auth,e));return $e(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function bde(n){return QR.apply(this,arguments)}(this,e)}reload(){return function wde(n){return ZR.apply(this,arguments)}(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Ad(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,S.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield gy(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,S.A)(function*(){const t=yield e.getIdToken();return yield Lc(e,function _de(n,e){return zR.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,h;const g=null!==(r=t.displayName)&&void 0!==r?r:void 0,_=null!==(i=t.email)&&void 0!==i?i:void 0,v=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,T=null!==(o=t.photoURL)&&void 0!==o?o:void 0,C=null!==(a=t.tenantId)&&void 0!==a?a:void 0,A=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,k=null!==(l=t.createdAt)&&void 0!==l?l:void 0,P=null!==(h=t.lastLoginAt)&&void 0!==h?h:void 0,{uid:q,emailVerified:ne,isAnonymous:me,providerData:we,stsTokenManager:F}=t;$e(q&&F,e,"internal-error");const R=my.fromJSON(this.name,F);$e("string"==typeof q,e,"internal-error"),Ql(g,e.name),Ql(_,e.name),$e("boolean"==typeof ne,e,"internal-error"),$e("boolean"==typeof me,e,"internal-error"),Ql(v,e.name),Ql(T,e.name),Ql(C,e.name),Ql(A,e.name),Ql(k,e.name),Ql(P,e.name);const O=new Ad({uid:q,auth:e,email:_,emailVerified:ne,displayName:g,isAnonymous:me,photoURL:T,phoneNumber:v,tenantId:C,stsTokenManager:R,createdAt:k,lastLoginAt:P});return we&&Array.isArray(we)&&(O.providerData=we.map(B=>Object.assign({},B))),A&&(O._redirectEventId=A),O}static _fromIdTokenResponse(e,t,r=!1){return(0,S.A)(function*(){const i=new my;i.updateFromServerResponse(t);const s=new Ad({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield gy(s),s})()}}const Z3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,S.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,S.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,S.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function FI(n,e,t){return`firebase:${n}:${e}:${t}`}class gp{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=FI(this.userKey,i.apiKey,s),this.fullPersistenceKey=FI("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,S.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Ad._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,S.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,S.A)(function*(){if(!t.length)return new gp(kc(Z3),e,r);const i=(yield Promise.all(t.map(function(){var l=(0,S.A)(function*(h){if(yield h._isAvailable())return h});return function(h){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||kc(Z3);const o=FI(r,e.config.apiKey,e.name);let a=null;for(const l of t)try{const h=yield l._get(o);if(h){const g=Ad._fromJSON(e,h);l!==s&&(a=g),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var l=(0,S.A)(function*(h){if(h!==s)try{yield h._remove(o)}catch{}});return function(h){return l.apply(this,arguments)}}())),new gp(s,e,r)):new gp(s,e,r)})()}}function e4(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function r4(n=ro()){return/iemobile/i.test(n)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function t4(n=ro()){return/firefox\//i.test(n)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function s4(n=ro()){return/blackberry/i.test(n)}(e))return"Blackberry";if(function o4(n=ro()){return/webos/i.test(n)}(e))return"Webos";if(function tN(n=ro()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function n4(n=ro()){return/crios\//i.test(n)}(e))&&!e.includes("edge/"))return"Chrome";if(function i4(n=ro()){return/android/i.test(n)}(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function a4(n,e=[]){let t;switch(n){case"Browser":t=e4(ro());break;case"Worker":t=`${e4(ro())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${m3}/${r}`}class Nde{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,S.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class Mde{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c4(this),this.idTokenSubscription=new c4(this),this.beforeStateQueue=new Nde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G3,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=kc(t)),this._initializationPromise=this.queue((0,S.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield gp.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,S.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,S.A)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=s?._redirectEventId,l=yield t.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(s=l.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return $e(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,S.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,S.A)(function*(){try{yield gy(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function fde(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,S.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,S.A)(function*(){const r=e?ay(e):null;return r&&$e(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,S.A)(function*(){if(!r._deleted)return e&&$e(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,S.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,S.A)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,S.A)(function*(){yield t.assertedPersistence.setPersistence(kc(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hp("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,S.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,S.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&kc(e)||t._popupRedirectResolver;$e(r,t,"argument-error"),t.redirectPersistenceManager=yield gp.create(t,[kc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,S.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,S.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,S.A)(function*(){if(e===t.currentUser)return t.queue((0,S.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return $e(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,S.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,S.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}class c4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function sle(n,e){const t=new ole(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class _y{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,t){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}function Vc(n,e){return pN.apply(this,arguments)}function pN(){return(pN=(0,S.A)(function*(n,e){return function Fc(n,e,t,r){return WR.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",function ri(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}(n,e))})).apply(this,arguments)}class mp extends _y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=(0,Mc.Tt)(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new mp(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return Vc(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Vc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=oR(t)}return e}}class Bc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class p4 extends Bc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Jde=(()=>{class n extends p4{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return mp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();(function R4(n){return`__${n}${Math.floor(1e6*Math.random())}`})("rcb"),new hy(3e4,6e4),new hy(2e3,1e4),new hy(3e4,6e4),new hy(5e3,15e3);var j4="@firebase/auth";class Cfe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,S.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}iR(),function Afe(n){Cd(new zl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,c)=>{$e(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),$e(!o?.includes(":"),"argument-error",{appName:a.name});const l={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a4(n)},h=new Mde(a,c,l);return function dde(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(kc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(h,t),h})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cd(new zl("auth-internal",e=>{const t=function Ns(n){return ay(n)}(e.getProvider("auth").getImmediate());return new Cfe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dd(j4,"0.21.0",function Dfe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),Dd(j4,"0.21.0","esm2017")}("Browser");const QI_firebase={apiKey:"AIzaSyCIHKjcCgDNcTKRhujdEcOsODVjsURkgF8",authDomain:"webrtc-720e4.firebaseapp.com",projectId:"webrtc-720e4",storageBucket:"webrtc-720e4.appspot.com",messagingSenderId:"837219898574",appId:"1:837219898574:web:318a8d9ff02d67dabf2c9f",measurementId:"G-6TXG2ZM2S6"};var yp=N(156);(0,yp.registerVersion)("firebase","10.14.1","app");class Pfe extends kn{constructor(e,t){super()}schedule(e,t=0){return this}}const YI={setInterval(n,e,...t){const{delegate:r}=YI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=YI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class G4 extends Pfe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return YI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&YI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ji(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const PM={now:()=>(PM.delegate||Date).now(),delegate:void 0};class Ey{constructor(e,t=Ey.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ey.now=PM.now;class W4 extends Ey{constructor(e,t=Ey.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Ffe=new class kfe extends W4{}(class Ofe extends G4{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),JI=new W4(G4),Lfe=JI,XI=new Uf("ANGULARFIRE2_VERSION");class z4{constructor(){return((n,e)=>{const t=(0,yp.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(Bfe)}}const Bfe="app-check";function vp(){}class q4{zone;delegate;constructor(e,t=Ffe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Ufe{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vp,{},vp,vp)),t.pipe(mi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let K4=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new q4(Zone.current)),this.insideAngular=t.run(()=>new q4(Zone.current,JI)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Se(Pt))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function io(n){return function $fe(n){return function(t){return(t=t.lift(new Ufe(n.ngZone))).pipe(Wf(n.outsideAngular),pd(n.insideAngular))}}(function bp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Uc=N(574);Uc.A.registerVersion("firebase","10.14.1","app-compat");const zfe=["ngOnDestroy"];class Q4{constructor(e){return e}}const ZI=new Me("angularfire2.app.options"),eT=new Me("angularfire2.app.name");function OM(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Uc.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Uc.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Qfe("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Q4(o)}const Qfe=(n,...e)=>{},Yfe={provide:Q4,useFactory:OM,deps:[ZI,Pt,[new oc,eT]]};let Jfe=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ZI,useValue:t},{provide:eT,useValue:r}]}}constructor(t){Uc.A.registerVersion("angularfire",XI.full,"core"),Uc.A.registerVersion("angularfire",XI.full,"app-compat"),Uc.A.registerVersion("angular",Oee.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Se(Ea))};static \u0275mod=Bt({type:n});static \u0275inj=Kt({providers:[Yfe]})}return n})();function Y4(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Xfe(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(J4("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Zfe?" You may need to reload as Firebase is not HMR aware.":""}`),J4("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Zfe=typeof module<"u"&&!!module.hot,J4=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],N(324);class epe extends G{constructor(e=1/0,t=1/0,r=PM){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function kM(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new vr({next:()=>{r.unsubscribe(),n()}});return ni(e(...t)).subscribe(r)}function Z4(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function tpe(n={}){const{connector:e=(()=>new G),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,h=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=c=void 0,h=g=!1},T=()=>{const C=o;v(),C?.unsubscribe()};return Rt((C,A)=>{l++,!g&&!h&&_();const k=c=c??e();A.add(()=>{l--,0===l&&!g&&!h&&(a=kM(T,i))}),k.subscribe(A),!o&&l>0&&(o=new vr({next:P=>k.next(P),error:P=>{g=!0,_(),a=kM(v,t,P),k.error(P)},complete:()=>{h=!0,_(),a=kM(v,r),k.complete()}}),ni(C).subscribe(o))})(s)}}({connector:()=>new epe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function eG(n,e){return Ge(e)?Hr(()=>n,e):Hr(()=>n)}const tG=new Me("angularfire2.auth.use-emulator"),nG=new Me("angularfire2.auth.settings"),rG=new Me("angularfire2.auth.tenant-id"),iG=new Me("angularfire2.auth.langugage-code"),sG=new Me("angularfire2.auth.use-device-language"),oG=new Me("angularfire.auth.persistence"),aG=(n,e,t,r,i,s,o,a)=>Y4(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[l,h]of Object.entries(o))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let Iy=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,h,g,_,v){const T=new G,C=st(void 0).pipe(pd(o.outsideAngular),Hr(()=>s.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,324)))),Le(()=>OM(t,s,r)),Le(A=>aG(A,s,a,l,h,g,c,_)),Z4({bufferSize:1,refCount:!1}));if(GE(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{C.pipe(Hl()).subscribe();const A=C.pipe(Hr(q=>q.getRedirectResult().then(ne=>ne,()=>null)),io,Z4({bufferSize:1,refCount:!1})),k=C.pipe(Hr(q=>new Wt(ne=>({unsubscribe:s.runOutsideAngular(()=>q.onAuthStateChanged(me=>ne.next(me),me=>ne.error(me),()=>ne.complete()))})))),P=C.pipe(Hr(q=>new Wt(ne=>({unsubscribe:s.runOutsideAngular(()=>q.onIdTokenChanged(me=>ne.next(me),me=>ne.error(me),()=>ne.complete()))}))));this.authState=A.pipe(eG(k),Wf(o.outsideAngular),pd(o.insideAngular)),this.user=A.pipe(eG(P),Wf(o.outsideAngular),pd(o.insideAngular)),this.idToken=this.user.pipe(Hr(q=>q?zn(q.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Hr(q=>q?zn(q.getIdTokenResult()):st(null))),this.credential=function X4(...n){const e=V_(n),t=function fse(n,e){return"number"==typeof n1(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?ni(r[0]):Jf(t)(zn(r,e)):to}(A,T,this.authState.pipe(Sr(q=>!q))).pipe(Le(q=>q?.user?q:null),Wf(o.outsideAngular),pd(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(zfe.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,g),g})})})}))(this,C,s,{spy:{apply:(A,k,P)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&P.then(q=>T.next(q))}}})}static \u0275fac=function(r){return new(r||n)(Se(ZI),Se(eT,8),Se(Ea),Se(Pt),Se(K4),Se(tG,8),Se(nG,8),Se(rG,8),Se(iG,8),Se(sG,8),Se(oG,8),Se(z4,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),rpe=(()=>{class n{constructor(){Uc.A.registerVersion("angularfire",XI.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Bt({type:n});static \u0275inj=Kt({providers:[Iy]})}return n})();function FM(){return Rt((n,e)=>{let t,r=!1;n.subscribe(ut(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function ipe(n,e){return n===e}var Md,hG,lG=N(779),Ua=N(398),bn=N(401),uG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dG={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(F,R,O){O||(O=0);var B=Array(16);if("string"==typeof R)for(var $=0;16>$;++$)B[$]=R.charCodeAt(O++)|R.charCodeAt(O++)<<8|R.charCodeAt(O++)<<16|R.charCodeAt(O++)<<24;else for($=0;16>$;++$)B[$]=R[O++]|R[O++]<<8|R[O++]<<16|R[O++]<<24;var X=F.g[3],L=(R=F.g[0])+(X^(O=F.g[1])&(($=F.g[2])^X))+B[0]+3614090360&4294967295;L=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=(O=($=(X=(R=O+(L<<7&4294967295|L>>>25))+((L=X+($^R&(O^$))+B[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=$+(O^X&(R^O))+B[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=O+(R^$&(X^R))+B[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=R+(X^O&($^X))+B[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=X+($^R&(O^$))+B[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=$+(O^X&(R^O))+B[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=O+(R^$&(X^R))+B[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=R+(X^O&($^X))+B[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=X+($^R&(O^$))+B[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=$+(O^X&(R^O))+B[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=O+(R^$&(X^R))+B[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=R+(X^O&($^X))+B[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=X+($^R&(O^$))+B[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=$+(O^X&(R^O))+B[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=O+(R^$&(X^R))+B[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=R+($^X&(O^$))+B[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=X+(O^$&(R^O))+B[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=$+(R^O&(X^R))+B[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=O+(X^R&($^X))+B[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=R+($^X&(O^$))+B[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=X+(O^$&(R^O))+B[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=$+(R^O&(X^R))+B[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=O+(X^R&($^X))+B[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=R+($^X&(O^$))+B[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=X+(O^$&(R^O))+B[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=$+(R^O&(X^R))+B[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=O+(X^R&($^X))+B[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=R+($^X&(O^$))+B[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=X+(O^$&(R^O))+B[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=$+(R^O&(X^R))+B[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=O+(X^R&($^X))+B[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=R+(O^$^X)+B[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^O^$)+B[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=$+(X^R^O)+B[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=O+($^X^R)+B[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=R+(O^$^X)+B[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^O^$)+B[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=$+(X^R^O)+B[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=O+($^X^R)+B[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=R+(O^$^X)+B[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^O^$)+B[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=$+(X^R^O)+B[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=O+($^X^R)+B[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=R+(O^$^X)+B[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^O^$)+B[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=$+(X^R^O)+B[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=O+($^X^R)+B[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=R+($^(O|~X))+B[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=X+(O^(R|~$))+B[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=$+(R^(X|~O))+B[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=O+(X^($|~R))+B[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=R+($^(O|~X))+B[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=X+(O^(R|~$))+B[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=$+(R^(X|~O))+B[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=O+(X^($|~R))+B[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=R+($^(O|~X))+B[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=X+(O^(R|~$))+B[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=$+(R^(X|~O))+B[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=O+(X^($|~R))+B[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((X=(R=O+((L=R+($^(O|~X))+B[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=X+(O^(R|~$))+B[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^(($=X+((L=$+(R^(X|~O))+B[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~R))+B[9]+3951481745&4294967295,F.g[0]=F.g[0]+R&4294967295,F.g[1]=F.g[1]+($+(L<<21&4294967295|L>>>11))&4294967295,F.g[2]=F.g[2]+$&4294967295,F.g[3]=F.g[3]+X&4294967295}function o(F,R){this.h=R;for(var O=[],B=!0,$=F.length-1;0<=$;$--){var X=0|F[$];B&&X==R||(O[$]=X,B=!1)}this.g=O}(function e(F,R){function O(){}O.prototype=R.prototype,F.D=R.prototype,F.prototype=new O,F.prototype.constructor=F,F.C=function(B,$,X){for(var L=Array(arguments.length-2),Li=2;Li<arguments.length;Li++)L[Li-2]=arguments[Li];return R.prototype[$].apply(B,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(F,R){void 0===R&&(R=F.length);for(var O=R-this.blockSize,B=this.B,$=this.h,X=0;X<R;){if(0==$)for(;X<=O;)i(this,F,X),X+=this.blockSize;if("string"==typeof F){for(;X<R;)if(B[$++]=F.charCodeAt(X++),$==this.blockSize){i(this,B),$=0;break}}else for(;X<R;)if(B[$++]=F[X++],$==this.blockSize){i(this,B),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var R=1;R<F.length-8;++R)F[R]=0;var O=8*this.o;for(R=F.length-8;R<F.length;++R)F[R]=255&O,O/=256;for(this.u(F),F=Array(16),R=O=0;4>R;++R)for(var B=0;32>B;B+=8)F[O++]=this.g[R]>>>B&255;return F};var a={};function c(F){return-128<=F&&128>F?function s(F,R){var O=a;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=R(F)}(F,function(R){return new o([0|R],0>R?-1:0)}):new o([0|F],0>F?-1:0)}function l(F){if(isNaN(F)||!isFinite(F))return g;if(0>F)return A(l(-F));for(var R=[],O=1,B=0;F>=O;B++)R[B]=F/O|0,O*=4294967296;return new o(R,0)}var g=c(0),_=c(1),v=c(16777216);function T(F){if(0!=F.h)return!1;for(var R=0;R<F.g.length;R++)if(0!=F.g[R])return!1;return!0}function C(F){return-1==F.h}function A(F){for(var R=F.g.length,O=[],B=0;B<R;B++)O[B]=~F.g[B];return new o(O,~F.h).add(_)}function k(F,R){return F.add(A(R))}function P(F,R){for(;(65535&F[R])!=F[R];)F[R+1]+=F[R]>>>16,F[R]&=65535,R++}function q(F,R){this.g=F,this.h=R}function ne(F,R){if(T(R))throw Error("division by zero");if(T(F))return new q(g,g);if(C(F))return R=ne(A(F),R),new q(A(R.g),A(R.h));if(C(R))return R=ne(F,A(R)),new q(A(R.g),R.h);if(30<F.g.length){if(C(F)||C(R))throw Error("slowDivide_ only works with positive integers.");for(var O=_,B=R;0>=B.l(F);)O=me(O),B=me(B);var $=we(O,1),X=we(B,1);for(B=we(B,2),O=we(O,2);!T(B);){var L=X.add(B);0>=L.l(F)&&($=$.add(O),X=L),B=we(B,1),O=we(O,1)}return R=k(F,$.j(R)),new q($,R)}for($=g;0<=F.l(R);){for(O=Math.max(1,Math.floor(F.m()/R.m())),B=48>=(B=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,B-48),L=(X=l(O)).j(R);C(L)||0<L.l(F);)L=(X=l(O-=B)).j(R);T(X)&&(X=_),$=$.add(X),F=k(F,L)}return new q($,F)}function me(F){for(var R=F.g.length+1,O=[],B=0;B<R;B++)O[B]=F.i(B)<<1|F.i(B-1)>>>31;return new o(O,F.h)}function we(F,R){var O=R>>5;R%=32;for(var B=F.g.length-O,$=[],X=0;X<B;X++)$[X]=0<R?F.i(X+O)>>>R|F.i(X+O+1)<<32-R:F.i(X+O);return new o($,F.h)}(n=o.prototype).m=function(){if(C(this))return-A(this).m();for(var F=0,R=1,O=0;O<this.g.length;O++){var B=this.i(O);F+=(0<=B?B:4294967296+B)*R,R*=4294967296}return F},n.toString=function(F){if(2>(F=F||10)||36<F)throw Error("radix out of range: "+F);if(T(this))return"0";if(C(this))return"-"+A(this).toString(F);for(var R=l(Math.pow(F,6)),O=this,B="";;){var $=ne(O,R).g,X=((0<(O=k(O,$.j(R))).g.length?O.g[0]:O.h)>>>0).toString(F);if(T(O=$))return X+B;for(;6>X.length;)X="0"+X;B=X+B}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h},n.l=function(F){return C(F=k(this,F))?-1:T(F)?0:1},n.abs=function(){return C(this)?A(this):this},n.add=function(F){for(var R=Math.max(this.g.length,F.g.length),O=[],B=0,$=0;$<=R;$++){var X=B+(65535&this.i($))+(65535&F.i($)),L=(X>>>16)+(this.i($)>>>16)+(F.i($)>>>16);B=L>>>16,O[$]=(L&=65535)<<16|(X&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(F){if(T(this)||T(F))return g;if(C(this))return C(F)?A(this).j(A(F)):A(A(this).j(F));if(C(F))return A(this.j(A(F)));if(0>this.l(v)&&0>F.l(v))return l(this.m()*F.m());for(var R=this.g.length+F.g.length,O=[],B=0;B<2*R;B++)O[B]=0;for(B=0;B<this.g.length;B++)for(var $=0;$<F.g.length;$++){var X=this.i(B)>>>16,L=65535&this.i(B),Li=F.i($)>>>16,fo=65535&F.i($);O[2*B+2*$]+=L*fo,P(O,2*B+2*$),O[2*B+2*$+1]+=X*fo,P(O,2*B+2*$+1),O[2*B+2*$+1]+=L*Li,P(O,2*B+2*$+1),O[2*B+2*$+2]+=X*Li,P(O,2*B+2*$+2)}for(B=0;B<R;B++)O[B]=O[2*B+1]<<16|O[2*B];for(B=R;B<2*R;B++)O[B]=0;return new o(O,0)},n.A=function(F){return ne(this,F).h},n.and=function(F){for(var R=Math.max(this.g.length,F.g.length),O=[],B=0;B<R;B++)O[B]=this.i(B)&F.i(B);return new o(O,this.h&F.h)},n.or=function(F){for(var R=Math.max(this.g.length,F.g.length),O=[],B=0;B<R;B++)O[B]=this.i(B)|F.i(B);return new o(O,this.h|F.h)},n.xor=function(F){for(var R=Math.max(this.g.length,F.g.length),O=[],B=0;B<R;B++)O[B]=this.i(B)^F.i(B);return new o(O,this.h^F.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hG=dG.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function h(F,R){if(0==F.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==F.charAt(0))return A(h(F.substring(1),R));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=l(Math.pow(R,8)),B=g,$=0;$<F.length;$+=8){var X=Math.min(8,F.length-$),L=parseInt(F.substring($,$+X),R);8>X?(X=l(Math.pow(R,X)),B=B.j(X).add(l(L))):B=(B=B.j(O)).add(l(L))}return B},Md=dG.Integer=o}).apply(typeof uG<"u"?uG:typeof self<"u"?self:typeof window<"u"?window:{});var fG,Ty,pG,nT,LM,gG,mG,_G,tT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,E){return f==Array.prototype||f==Object.prototype||(f[y]=E.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof tT&&tT];for(var y=0;y<f.length;++y){var E=f[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var E=r;f=f.split(".");for(var D=0;D<f.length-1;D++){var Y=f[D];if(!(Y in E))break e;E=E[Y]}(y=y(D=E[f=f[f.length-1]]))!=D&&null!=y&&e(E,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function s(f,y){f instanceof String&&(f+="");var E=0,D=!1,Y={next:function(){if(!D&&E<f.length){var ae=E++;return{value:y(ae,f[ae]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}(this,function(y,E){return E})}});var o=o||{},a=this||self;function c(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function l(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,E){return f.call.apply(f.bind,arguments)}function g(f,y,E){if(!f)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,D),f.apply(y,Y)}}return function(){return f.apply(y,arguments)}}function _(f,y,E){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function v(f,y){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),f.apply(this,D)}}function T(f,y){function E(){}E.prototype=y.prototype,f.aa=y.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(D,Y,ae){for(var Ue=Array(arguments.length-2),jn=2;jn<arguments.length;jn++)Ue[jn-2]=arguments[jn];return y.prototype[Y].apply(D,Ue)}}function C(f){const y=f.length;if(0<y){const E=Array(y);for(let D=0;D<y;D++)E[D]=f[D];return E}return[]}function A(f,y){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const Y=f.length||0,ae=D.length||0;f.length=Y+ae;for(let Ue=0;Ue<ae;Ue++)f[Y+Ue]=D[Ue]}else f.push(D)}}function P(f){return/^[\s\xa0]*$/.test(f)}function q(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function ne(f){return ne[" "](f),f}ne[" "]=function(){};var me=!(-1==q().indexOf("Gecko")||-1!=q().toLowerCase().indexOf("webkit")&&-1==q().indexOf("Edge")||-1!=q().indexOf("Trident")||-1!=q().indexOf("MSIE")||-1!=q().indexOf("Edge"));function we(f,y,E){for(const D in f)y.call(E,f[D],D,f)}function R(f){const y={};for(const E in f)y[E]=f[E];return y}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,y){let E,D;for(let Y=1;Y<arguments.length;Y++){for(E in D=arguments[Y],D)f[E]=D[E];for(let ae=0;ae<O.length;ae++)E=O[ae],Object.prototype.hasOwnProperty.call(D,E)&&(f[E]=D[E])}}function $(f){var y=1;f=f.split(":");const E=[];for(;0<y&&f.length;)E.push(f.shift()),y--;return f.length&&E.push(f.join(":")),E}function X(f){a.setTimeout(()=>{throw f},0)}function L(){var f=ua;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var fo=new class k{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new ms,f=>f.reset());class ms{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Vi,Ja=!1,ua=new class Li{constructor(){this.h=this.g=null}add(y,E){const D=fo.get();D.set(y,E),this.h?this.h.next=D:this.g=D,this.h=D}},ph=()=>{const f=a.Promise.resolve(void 0);Vi=()=>{f.then(Nv)}};var Nv=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(E){X(E)}var y=fo;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}Ja=!1};function Vs(){this.s=this.s,this.C=this.C}function xr(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}Vs.prototype.s=!1,Vs.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vs.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},xr.prototype.h=function(){this.defaultPrevented=!0};var yu=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return f}();function Bs(f,y){if(xr.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,D=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(me){e:{try{ne(y.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(y=null)}}else"mouseover"==E?y=f.fromElement:"mouseout"==E&&(y=f.toElement);this.relatedTarget=y,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:gh[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Bs.aa.h.call(this)}}T(Bs,xr);var gh={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Xa="closure_listenable_"+(1e6*Math.random()|0),tl=0;function Mv(f,y,E,D,Y){this.listener=f,this.proxy=null,this.src=y,this.type=E,this.capture=!!D,this.ha=Y,this.key=++tl,this.da=this.fa=!1}function gg(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function vu(f){this.src=f,this.g={},this.h=0}function xv(f,y){var E=y.type;if(E in f.g){var ae,D=f.g[E],Y=Array.prototype.indexOf.call(D,y,void 0);(ae=0<=Y)&&Array.prototype.splice.call(D,Y,1),ae&&(gg(y),0==f.g[E].length&&(delete f.g[E],f.h--))}}function mg(f,y,E,D){for(var Y=0;Y<f.length;++Y){var ae=f[Y];if(!ae.da&&ae.listener==y&&ae.capture==!!E&&ae.ha==D)return Y}return-1}vu.prototype.add=function(f,y,E,D,Y){var ae=f.toString();(f=this.g[ae])||(f=this.g[ae]=[],this.h++);var Ue=mg(f,y,D,Y);return-1<Ue?(y=f[Ue],E||(y.fa=!1)):((y=new Mv(y,this.src,ae,!!D,Y)).fa=E,f.push(y)),y};var Pv="closure_lm_"+(1e6*Math.random()|0),Ov={};function kv(f,y,E,D,Y){if(D&&D.once)return Vw(f,y,E,D,Y);if(Array.isArray(y)){for(var ae=0;ae<y.length;ae++)kv(f,y[ae],E,D,Y);return null}return E=yg(E),f&&f[Xa]?f.K(y,E,l(D)?!!D.capture:!!D,Y):Fv(f,y,E,!1,D,Y)}function Fv(f,y,E,D,Y,ae){if(!y)throw Error("Invalid event type");var Ue=l(Y)?!!Y.capture:!!Y,jn=mh(f);if(jn||(f[Pv]=jn=new vu(f)),(E=jn.add(y,E,D,Ue,ae)).proxy)return E;if(D=function dk(){const y=Bw;return function f(E){return y.call(f.src,f.listener,E)}}(),E.proxy=D,D.src=f,D.listener=E,f.addEventListener)yu||(Y=Ue),void 0===Y&&(Y=!1),f.addEventListener(y.toString(),D,Y);else if(f.attachEvent)f.attachEvent(Lv(y.toString()),D);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(D)}return E}function Vw(f,y,E,D,Y){if(Array.isArray(y)){for(var ae=0;ae<y.length;ae++)Vw(f,y[ae],E,D,Y);return null}return E=yg(E),f&&f[Xa]?f.L(y,E,l(D)?!!D.capture:!!D,Y):Fv(f,y,E,!0,D,Y)}function Za(f,y,E,D,Y){if(Array.isArray(y))for(var ae=0;ae<y.length;ae++)Za(f,y[ae],E,D,Y);else D=l(D)?!!D.capture:!!D,E=yg(E),f&&f[Xa]?(f=f.i,(y=String(y).toString())in f.g&&-1<(E=mg(ae=f.g[y],E,D,Y))&&(gg(ae[E]),Array.prototype.splice.call(ae,E,1),0==ae.length&&(delete f.g[y],f.h--))):f&&(f=mh(f))&&(y=f.g[y.toString()],f=-1,y&&(f=mg(y,E,D,Y)),(E=-1<f?y[f]:null)&&bu(E))}function bu(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[Xa])xv(y.i,f);else{var E=f.type,D=f.proxy;y.removeEventListener?y.removeEventListener(E,D,f.capture):y.detachEvent?y.detachEvent(Lv(E),D):y.addListener&&y.removeListener&&y.removeListener(D),(E=mh(y))?(xv(E,f),0==E.h&&(E.src=null,y[Pv]=null)):gg(f)}}}function Lv(f){return f in Ov?Ov[f]:Ov[f]="on"+f}function Bw(f,y){if(f.da)f=!0;else{y=new Bs(y,this);var E=f.listener,D=f.ha||f.src;f.fa&&bu(f),f=E.call(D,y)}return f}function mh(f){return(f=f[Pv])instanceof vu?f:null}var _g="__closure_events_fn_"+(1e9*Math.random()>>>0);function yg(f){return"function"==typeof f?f:(f[_g]||(f[_g]=function(y){return f.handleEvent(y)}),f[_g])}function oi(){Vs.call(this),this.i=new vu(this),this.M=this,this.F=null}function Ei(f,y){var E,D=f.F;if(D)for(E=[];D;D=D.F)E.push(D);if(f=f.M,D=y.type||y,"string"==typeof y)y=new xr(y,f);else if(y instanceof xr)y.target=y.target||f;else{var Y=y;B(y=new xr(D,f),Y)}if(Y=!0,E)for(var ae=E.length-1;0<=ae;ae--){var Ue=y.g=E[ae];Y=Uw(Ue,D,!0,y)&&Y}if(Y=Uw(Ue=y.g=f,D,!0,y)&&Y,Y=Uw(Ue,D,!1,y)&&Y,E)for(ae=0;ae<E.length;ae++)Y=Uw(Ue=y.g=E[ae],D,!1,y)&&Y}function Uw(f,y,E,D){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var Y=!0,ae=0;ae<y.length;++ae){var Ue=y[ae];if(Ue&&!Ue.da&&Ue.capture==E){var jn=Ue.listener,Bi=Ue.ha||Ue.src;Ue.fa&&xv(f.i,Ue),Y=!1!==jn.call(Bi,D)&&Y}}return Y&&!D.defaultPrevented}function p9(f,y,E){if("function"==typeof f)E&&(f=_(f,E));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function g9(f){f.g=p9(()=>{f.g=null,f.i&&(f.i=!1,g9(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}T(oi,Vs),oi.prototype[Xa]=!0,oi.prototype.removeEventListener=function(f,y,E,D){Za(this,f,y,E,D)},oi.prototype.N=function(){if(oi.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var E=f.g[y],D=0;D<E.length;D++)gg(E[D]);delete f.g[y],f.h--}}this.F=null},oi.prototype.K=function(f,y,E,D){return this.i.add(String(f),y,!1,E,D)},oi.prototype.L=function(f,y,E,D){return this.i.add(String(f),y,!0,E,D)};class pwe extends Vs{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:g9(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vv(f){Vs.call(this),this.h=f,this.g={}}T(Vv,Vs);var m9=[];function _9(f){we(f.g,function(y,E){this.g.hasOwnProperty(E)&&bu(y)},f),f.g={}}Vv.prototype.N=function(){Vv.aa.N.call(this),_9(this)},Vv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hk=a.JSON.stringify,gwe=a.JSON.parse,mwe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function fk(){}function v9(){}fk.prototype.h=null;var Bv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pk(){xr.call(this,"d")}function gk(){xr.call(this,"c")}T(pk,xr),T(gk,xr);var _h={},b9=null;function jw(){return b9=b9||new oi}function E9(f){xr.call(this,_h.La,f)}function Uv(f){const y=jw();Ei(y,new E9(y))}function I9(f,y){xr.call(this,_h.STAT_EVENT,f),this.stat=y}function _s(f){const y=jw();Ei(y,new I9(y,f))}function T9(f,y){xr.call(this,_h.Ma,f),this.size=y}function jv(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function $v(){this.g=!0}function vg(f,y,E,D){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function bwe(f,y){if(!f.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E)for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var D=E[f];if(!(2>D.length)){var Y=D[1];if(Array.isArray(Y)&&!(1>Y.length)){var ae=Y[0];if("noop"!=ae&&"stop"!=ae&&"close"!=ae)for(var Ue=1;Ue<Y.length;Ue++)Y[Ue]=""}}}return hk(E)}catch{return y}}(f,E)+(D?" "+D:"")})}_h.La="serverreachability",T(E9,xr),_h.STAT_EVENT="statevent",T(I9,xr),_h.Ma="timingevent",T(T9,xr),$v.prototype.xa=function(){this.g=!1},$v.prototype.info=function(){};var mk,$w={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},w9={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Hw(){}function Eu(f,y,E,D){this.j=f,this.i=y,this.l=E,this.R=D||1,this.U=new Vv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new C9}function C9(){this.i=null,this.g="",this.h=!1}T(Hw,fk),Hw.prototype.g=function(){return new XMLHttpRequest},Hw.prototype.i=function(){return{}},mk=new Hw;var D9={},_k={};function yk(f,y,E){f.L=1,f.v=qw(nl(y)),f.m=E,f.P=!0,A9(f,null)}function A9(f,y){f.F=Date.now(),Gw(f),f.A=nl(f.v);var E=f.A,D=f.R;Array.isArray(D)||(D=[String(D)]),j9(E.i,"t",D),f.C=0,E=f.j.J,f.h=new C9,f.g=s7(f.j,E?y:null,!f.m),0<f.O&&(f.M=new pwe(_(f.Y,f,f.g),f.O)),y=f.U,E=f.g,D=f.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(m9[0]=Y.toString()),Y=m9);for(var ae=0;ae<Y.length;ae++){var Ue=kv(E,Y[ae],D||y.handleEvent,!1,y.h||y);if(!Ue)break;y.g[Ue.key]=Ue}y=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Uv(),function _we(f,y,E,D,Y,ae){f.info(function(){if(f.g)if(ae)for(var Ue="",jn=ae.split("&"),Bi=0;Bi<jn.length;Bi++){var fn=jn[Bi].split("=");if(1<fn.length){var ts=fn[0];fn=fn[1];var ns=ts.split("_");Ue=2<=ns.length&&"type"==ns[1]?Ue+(ts+"=")+fn+"&":Ue+(ts+"=redacted&")}}else Ue=null;else Ue=ae;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+y+"\n"+E+"\n"+Ue})}(f.i,f.u,f.A,f.l,f.R,f.m)}function S9(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function Ewe(f,y){var E=f.C,D=y.indexOf("\n",E);return-1==D?_k:(E=Number(y.substring(E,D)),isNaN(E)?D9:(D+=1)+E>y.length?_k:(y=y.slice(D,D+E),f.C=D+E,y))}function Gw(f){f.S=Date.now()+f.I,R9(f,f.I)}function R9(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=jv(_(f.ba,f),y)}function vk(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function Hv(f){0==f.j.G||f.J||t7(f.j,f)}function yh(f){vk(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,_9(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function bk(f,y){try{var E=f.j;if(0!=E.G&&(E.g==f||Ek(E.h,f)))if(!f.K&&Ek(E.h,f)&&3==E.G){try{var D=E.Da.g.parse(y)}catch{D=null}if(Array.isArray(D)&&3==D.length){var Y=D;if(0==Y[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<f.F))break e;Xw(E),Yw(E)}Ck(E),_s(18)}}else E.za=Y[1],0<E.za-E.T&&37500>Y[2]&&E.F&&0==E.v&&!E.C&&(E.C=jv(_(E.Za,E),6e3));if(1>=x9(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else bh(E,11)}else if((f.K||E.g==f)&&Xw(E),!P(y))for(Y=E.Da.g.parse(y),y=0;y<Y.length;y++){let fn=Y[y];if(E.T=fn[0],fn=fn[1],2==E.G)if("c"==fn[0]){E.K=fn[1],E.ia=fn[2];const ts=fn[3];null!=ts&&(E.la=ts,E.j.info("VER="+E.la));const ns=fn[4];null!=ns&&(E.Aa=ns,E.j.info("SVER="+E.Aa));const Ig=fn[5];null!=Ig&&"number"==typeof Ig&&0<Ig&&(E.L=D=1.5*Ig,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const da=f.g;if(da){const eC=da.g?da.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eC){var ae=D.h;ae.g||-1==eC.indexOf("spdy")&&-1==eC.indexOf("quic")&&-1==eC.indexOf("h2")||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ik(ae,ae.h),ae.h=null))}if(D.D){const Ak=da.g?da.g.getResponseHeader("X-HTTP-Session-Id"):null;Ak&&(D.ya=Ak,tr(D.I,D.D,Ak))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms"));var Ue=f;if((D=E).qa=i7(D,D.J?D.ia:null,D.W),Ue.K){P9(D.h,Ue);var jn=Ue,Bi=D.L;Bi&&(jn.I=Bi),jn.B&&(vk(jn),Gw(jn)),D.g=Ue}else Z9(D);0<E.i.length&&Jw(E)}else"stop"!=fn[0]&&"close"!=fn[0]||bh(E,7);else 3==E.G&&("stop"==fn[0]||"close"==fn[0]?"stop"==fn[0]?bh(E,7):wk(E):"noop"!=fn[0]&&E.l&&E.l.ta(fn),E.v=0)}Uv()}catch{}}Eu.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==rl(f)?y.j():this.Y(f)},Eu.prototype.Y=function(f){try{if(f==this.g)e:{const ns=rl(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>ns)&&(3!=ns||this.g&&(this.h.h||this.g.oa()||K9(this.g)))){this.J||4!=ns||7==y||Uv(),vk(this);var E=this.g.Z();this.X=E;t:if(S9(this)){var D=K9(this.g);f="";var Y=D.length,ae=4==rl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yh(this),Hv(this);var Ue="";break t}this.h.i=new a.TextDecoder}for(y=0;y<Y;y++)this.h.h=!0,f+=this.h.i.decode(D[y],{stream:!(ae&&y==Y-1)});D.length=0,this.h.g+=f,this.C=0,Ue=this.h.g}else Ue=this.g.oa();if(this.o=200==E,function ywe(f,y,E,D,Y,ae,Ue){f.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+y+"\n"+E+"\n"+ae+" "+Ue})}(this.i,this.u,this.A,this.l,this.R,ns,E),this.o){if(this.T&&!this.K){t:{if(this.g){var jn,Bi=this.g;if((jn=Bi.g?Bi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(jn)){var fn=jn;break t}}fn=null}if(!(E=fn)){this.o=!1,this.s=3,_s(12),yh(this),Hv(this);break e}vg(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bk(this,E)}if(this.P){let da;for(E=!0;!this.J&&this.C<Ue.length;){if(da=Ewe(this,Ue),da==_k){4==ns&&(this.s=4,_s(14),E=!1),vg(this.i,this.l,null,"[Incomplete Response]");break}if(da==D9){this.s=4,_s(15),vg(this.i,this.l,Ue,"[Invalid Chunk]"),E=!1;break}vg(this.i,this.l,da,null),bk(this,da)}if(S9(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ns||0!=Ue.length||this.h.h||(this.s=1,_s(16),E=!1),this.o=this.o&&E,E){if(0<Ue.length&&!this.W){this.W=!0;var ts=this.j;ts.g==this&&ts.ba&&!ts.M&&(ts.j.info("Great, no buffering proxy detected. Bytes received: "+Ue.length),Dk(ts),ts.M=!0,_s(11))}}else vg(this.i,this.l,Ue,"[Invalid Chunked Response]"),yh(this),Hv(this)}else vg(this.i,this.l,Ue,null),bk(this,Ue);4==ns&&yh(this),this.o&&!this.J&&(4==ns?t7(this.j,this):(this.o=!1,Gw(this)))}else(function Vwe(f){const y={};f=(f.g&&2<=rl(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<f.length;D++){if(P(f[D]))continue;var E=$(f[D]);const Y=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ae=y[Y]||[];y[Y]=ae,ae.push(E)}!function F(f,y){for(const E in f)y.call(void 0,f[E],E,f)}(y,function(D){return D.join(", ")})})(this.g),400==E&&0<Ue.indexOf("Unknown SID")?(this.s=3,_s(12)):(this.s=0,_s(13)),yh(this),Hv(this)}}}catch{}},Eu.prototype.cancel=function(){this.J=!0,yh(this)},Eu.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function vwe(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(Uv(),_s(17)),yh(this),this.s=2,Hv(this)):R9(this,this.S-f)};var Iwe=class{constructor(f,y){this.g=f,this.map=y}};function N9(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function M9(f){return!!f.h||!!f.g&&f.g.size>=f.j}function x9(f){return f.h?1:f.g?f.g.size:0}function Ek(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function Ik(f,y){f.g?f.g.add(y):f.h=y}function P9(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function O9(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const E of f.g.values())y=y.concat(E.D);return y}return C(f.i)}function k9(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(c(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var E=function wwe(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||"string"==typeof f){var y=[];f=f.length;for(var E=0;E<f;E++)y.push(E);return y}y=[],E=0;for(const D in f)y[E++]=D;return y}}}(f),D=function Twe(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(c(f)){for(var y=[],E=f.length,D=0;D<E;D++)y.push(f[D]);return y}for(D in y=[],E=0,f)y[E++]=f[D];return y}(f),Y=D.length,ae=0;ae<Y;ae++)y.call(void 0,D[ae],E&&E[ae],f)}N9.prototype.cancel=function(){if(this.i=O9(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var F9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vh(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof vh){this.h=f.h,Ww(this,f.j),this.o=f.o,this.g=f.g,zw(this,f.s),this.l=f.l;var y=f.i,E=new zv;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),L9(this,E),this.m=f.m}else f&&(y=String(f).match(F9))?(this.h=!1,Ww(this,y[1]||"",!0),this.o=Gv(y[2]||""),this.g=Gv(y[3]||"",!0),zw(this,y[4]),this.l=Gv(y[5]||"",!0),L9(this,y[6]||"",!0),this.m=Gv(y[7]||"")):(this.h=!1,this.i=new zv(null,this.h))}function nl(f){return new vh(f)}function Ww(f,y,E){f.j=E?Gv(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function zw(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function L9(f,y,E){y instanceof zv?(f.i=y,function Mwe(f,y){y&&!f.j&&(Iu(f),f.i=null,f.g.forEach(function(E,D){var Y=D.toLowerCase();D!=Y&&(B9(this,D),j9(this,Y,E))},f)),f.j=y}(f.i,f.h)):(E||(y=Wv(y,Rwe)),f.i=new zv(y,f.h))}function tr(f,y,E){f.i.set(y,E)}function qw(f){return tr(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Gv(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Wv(f,y,E){return"string"==typeof f?(f=encodeURI(f).replace(y,Dwe),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Dwe(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}vh.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Wv(y,V9,!0),":");var E=this.g;return(E||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(Wv(y,V9,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&f.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&f.push("/"),f.push(Wv(E,"/"==E.charAt(0)?Swe:Awe,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Wv(E,Nwe)),f.join("")};var V9=/[#\/\?@]/g,Awe=/[#\?:]/g,Swe=/[#\?]/g,Rwe=/[#\?@]/g,Nwe=/#/g;function zv(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Iu(f){f.g||(f.g=new Map,f.h=0,f.i&&function Cwe(f,y){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var D=f[E].indexOf("="),Y=null;if(0<=D){var ae=f[E].substring(0,D);Y=f[E].substring(D+1)}else ae=f[E];y(ae,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}(f.i,function(y,E){f.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}function B9(f,y){Iu(f),y=bg(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function U9(f,y){return Iu(f),y=bg(f,y),f.g.has(y)}function j9(f,y,E){B9(f,y),0<E.length&&(f.i=null,f.g.set(bg(f,y),C(E)),f.h+=E.length)}function bg(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Tu(f,y,E,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(E)}catch{}}function Owe(){this.g=new mwe}function kwe(f,y,E){const D=E||"";try{k9(f,function(Y,ae){let Ue=Y;l(Y)&&(Ue=hk(Y)),y.push(D+ae+"="+encodeURIComponent(Ue))})}catch(Y){throw y.push(D+"type="+encodeURIComponent("_badmap")),Y}}function qv(f){this.l=f.Ub||null,this.j=f.eb||!1}function Kw(f,y){oi.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $9(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function Kv(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Qv(f)}function Qv(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function H9(f){let y="";return we(f,function(E,D){y+=D,y+=":",y+=E,y+="\r\n"}),y}function Tk(f,y,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=H9(E),"string"==typeof f?null!=E&&encodeURIComponent(String(E)):tr(f,y,E))}function yr(f){oi.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=zv.prototype).add=function(f,y){Iu(this),this.i=null,f=bg(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(y),this.h+=1,this},n.forEach=function(f,y){Iu(this),this.g.forEach(function(E,D){E.forEach(function(Y){f.call(y,Y,D,this)},this)},this)},n.na=function(){Iu(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let D=0;D<y.length;D++){const Y=f[D];for(let ae=0;ae<Y.length;ae++)E.push(y[D])}return E},n.V=function(f){Iu(this);let y=[];if("string"==typeof f)U9(this,f)&&(y=y.concat(this.g.get(bg(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)y=y.concat(f[E])}return y},n.set=function(f,y){return Iu(this),this.i=null,U9(this,f=bg(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var D=y[E];const ae=encodeURIComponent(String(D)),Ue=this.V(D);for(D=0;D<Ue.length;D++){var Y=ae;""!==Ue[D]&&(Y+="="+encodeURIComponent(String(Ue[D]))),f.push(Y)}}return this.i=f.join("&")},T(qv,fk),qv.prototype.g=function(){return new Kw(this.l,this.j)},qv.prototype.i=function(f){return function(){return f}}({}),T(Kw,oi),(n=Kw.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,Qv(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kv(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Qv(this)),this.g&&(this.readyState=3,Qv(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$9(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Kv(this):Qv(this),3==this.readyState&&$9(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Kv(this))},n.Qa=function(f){this.g&&(this.response=f,Kv(this))},n.ga=function(){this.g&&Kv(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var E=y.next();!E.done;)f.push((E=E.value)[0]+": "+E[1]),E=y.next();return f.join("\r\n")},Object.defineProperty(Kw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),T(yr,oi);var Fwe=/^https?$/i,Lwe=["POST","PUT"];function G9(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,W9(f),Qw(f)}function W9(f){f.A||(f.A=!0,Ei(f,"complete"),Ei(f,"error"))}function z9(f){if(f.h&&typeof o<"u"&&(!f.v[1]||4!=rl(f)||2!=f.Z()))if(f.u&&4==rl(f))p9(f.Ea,0,f);else if(Ei(f,"readystatechange"),4==rl(f)){f.h=!1;try{const Ue=f.Z();e:switch(Ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var D;if(D=0===Ue){var Y=String(f.D).match(F9)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),D=!Fwe.test(Y?Y.toLowerCase():"")}E=D}if(E)Ei(f,"complete"),Ei(f,"success");else{f.m=6;try{var ae=2<rl(f)?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.Z()+"]",W9(f)}}finally{Qw(f)}}}function Qw(f,y){if(f.g){q9(f);const E=f.g,D=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Ei(f,"ready");try{E.onreadystatechange=D}catch{}}}function q9(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function rl(f){return f.g?f.g.readyState:0}function K9(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Yv(f,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||y}function Q9(f){this.Aa=0,this.i=[],this.j=new $v,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yv("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yv("baseRetryDelayMs",5e3,f),this.cb=Yv("retryDelaySeedMs",1e4,f),this.Wa=Yv("forwardChannelMaxRetries",2,f),this.wa=Yv("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new N9(f&&f.concurrentRequestLimit),this.Da=new Owe,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function wk(f){if(Y9(f),3==f.G){var y=f.U++,E=nl(f.I);if(tr(E,"SID",f.K),tr(E,"RID",y),tr(E,"TYPE","terminate"),Jv(f,E),(y=new Eu(f,f.j,y)).L=2,y.v=qw(nl(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=y.v,E=!0),E||(y.g=s7(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Gw(y)}r7(f)}function Yw(f){f.g&&(Dk(f),f.g.cancel(),f.g=null)}function Y9(f){Yw(f),f.u&&(a.clearTimeout(f.u),f.u=null),Xw(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function Jw(f){if(!M9(f.h)&&!f.s){f.s=!0;var y=f.Ga;Vi||ph(),Ja||(Vi(),Ja=!0),ua.add(y,f),f.B=0}}function J9(f,y){var E;E=y?y.l:f.U++;const D=nl(f.I);tr(D,"SID",f.K),tr(D,"RID",E),tr(D,"AID",f.T),Jv(f,D),f.m&&f.o&&Tk(D,f.m,f.o),E=new Eu(f,f.j,E,f.B+1),null===f.m&&(E.H=f.o),y&&(f.i=y.D.concat(f.i)),y=X9(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ik(f.h,E),yk(E,D,y)}function Jv(f,y){f.H&&we(f.H,function(E,D){tr(y,D,E)}),f.l&&k9({},function(E,D){tr(y,D,E)})}function X9(f,y,E){E=Math.min(f.i.length,E);var D=f.l?_(f.l.Na,f.l,f):null;e:{var Y=f.i;let ae=-1;for(;;){const Ue=["count="+E];-1==ae?0<E?(ae=Y[0].g,Ue.push("ofs="+ae)):ae=0:Ue.push("ofs="+ae);let jn=!0;for(let Bi=0;Bi<E;Bi++){let fn=Y[Bi].g;const ts=Y[Bi].map;if(fn-=ae,0>fn)ae=Math.max(0,Y[Bi].g-100),jn=!1;else try{kwe(ts,Ue,"req"+fn+"_")}catch{D&&D(ts)}}if(jn){D=Ue.join("&");break e}}}return f=f.i.splice(0,E),y.D=f,D}function Z9(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Vi||ph(),Ja||(Vi(),Ja=!0),ua.add(y,f),f.v=0}}function Ck(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=jv(_(f.Fa,f),n7(f,f.v)),f.v++,0))}function Dk(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function e7(f){f.g=new Eu(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=nl(f.qa);tr(y,"RID","rpc"),tr(y,"SID",f.K),tr(y,"AID",f.T),tr(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&tr(y,"TO",f.ja),tr(y,"TYPE","xmlhttp"),Jv(f,y),f.m&&f.o&&Tk(y,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=qw(nl(y)),E.m=null,E.P=!0,A9(E,f)}function Xw(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function t7(f,y){var E=null;if(f.g==y){Xw(f),Dk(f),f.g=null;var D=2}else{if(!Ek(f.h,y))return;E=y.D,P9(f.h,y),D=1}if(0!=f.G)if(y.o)if(1==D){E=y.m?y.m.length:0,y=Date.now()-y.F;var Y=f.B;Ei(D=jw(),new T9(D,E)),Jw(f)}else Z9(f);else if(3==(Y=y.s)||0==Y&&0<y.X||!(1==D&&function Bwe(f,y){return!(x9(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=jv(_(f.Ga,f,y),n7(f,f.B)),f.B++,0)))}(f,y)||2==D&&Ck(f)))switch(E&&0<E.length&&(y=f.h,y.i=y.i.concat(E)),Y){case 1:bh(f,5);break;case 4:bh(f,10);break;case 3:bh(f,6);break;default:bh(f,2)}}function n7(f,y){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*y}function bh(f,y){if(f.j.info("Error code "+y),2==y){var E=_(f.fb,f),D=f.Xa;const Y=!D;D=new vh(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ww(D,"https"),qw(D),Y?function xwe(f,y){const E=new $v;if(a.Image){const D=new Image;D.onload=v(Tu,E,"TestLoadImage: loaded",!0,y,D),D.onerror=v(Tu,E,"TestLoadImage: error",!1,y,D),D.onabort=v(Tu,E,"TestLoadImage: abort",!1,y,D),D.ontimeout=v(Tu,E,"TestLoadImage: timeout",!1,y,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=f}else y(!1)}(D.toString(),E):function Pwe(f,y){new $v;const D=new AbortController,Y=setTimeout(()=>{D.abort(),Tu(0,0,!1,y)},1e4);fetch(f,{signal:D.signal}).then(ae=>{clearTimeout(Y),Tu(0,0,!!ae.ok,y)}).catch(()=>{clearTimeout(Y),Tu(0,0,!1,y)})}(D.toString(),E)}else _s(2);f.G=0,f.l&&f.l.sa(y),r7(f),Y9(f)}function r7(f){if(f.G=0,f.ka=[],f.l){const y=O9(f.h);(0!=y.length||0!=f.i.length)&&(A(f.ka,y),A(f.ka,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.ra()}}function i7(f,y,E){var D=E instanceof vh?nl(E):new vh(E);if(""!=D.g)y&&(D.g=y+"."+D.g),zw(D,D.s);else{var Y=a.location;D=Y.protocol,y=y?y+"."+Y.hostname:Y.hostname,Y=+Y.port;var ae=new vh(null);D&&Ww(ae,D),y&&(ae.g=y),Y&&zw(ae,Y),E&&(ae.l=E),D=ae}return y=f.ya,(E=f.D)&&y&&tr(D,E,y),tr(D,"VER",f.la),Jv(f,D),D}function s7(f,y,E){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new yr(f.Ca&&!f.pa?new qv({eb:E}):f.pa)).Ha(f.J),y}function o7(){}function Zw(){}function po(f,y){oi.call(this),this.g=new Q9(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!P(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new Eg(this)}function a7(f){pk.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const E in y){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function c7(){gk.call(this),this.status=1}function Eg(f){this.g=f}(n=yr.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mk.g(),this.v=function y9(f){return f.h||(f.h=f.i())}(this.o?this.o:mk),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(ae){return void G9(this,ae)}if(f=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)E.set(Y,D[Y]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const ae of D.keys())E.set(ae,D.get(ae))}D=Array.from(E.keys()).find(ae=>"content-type"==ae.toLowerCase()),Y=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Lwe,y,void 0))||D||Y||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ue]of E)this.g.setRequestHeader(ae,Ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{q9(this),this.u=!0,this.g.send(f),this.u=!1}catch(ae){G9(this,ae)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ei(this,"complete"),Ei(this,"abort"),Qw(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qw(this,!0)),yr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?z9(this):this.bb())},n.bb=function(){z9(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<rl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),gwe(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Q9.prototype).la=8,n.G=1,n.connect=function(f,y,E,D){_s(0),this.W=f,this.H=y||{},E&&void 0!==D&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=i7(this,null,this.W),Jw(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Y=new Eu(this,this.j,f);let ae=this.o;if(this.S&&(ae?(ae=R(ae),B(ae,this.S)):ae=this.S),null!==this.m||this.O||(Y.H=ae,ae=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){var D=this.i[E];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(y+=D)){y=E;break e}if(4096===y||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=X9(this,Y,y),tr(E=nl(this.I),"RID",f),tr(E,"CVER",22),this.D&&tr(E,"X-HTTP-Session-Id",this.D),Jv(this,E),ae&&(this.O?y="headers="+encodeURIComponent(String(H9(ae)))+"&"+y:this.m&&Tk(E,this.m,ae)),Ik(this.h,Y),this.Ua&&tr(E,"TYPE","init"),this.P?(tr(E,"$req",y),tr(E,"SID","null"),Y.T=!0,yk(Y,E,null)):yk(Y,E,y),this.G=2}}else 3==this.G&&(f?J9(this,f):0==this.i.length||M9(this.h)||J9(this))},n.Fa=function(){if(this.u=null,e7(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=jv(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_s(10),Yw(this),e7(this))},n.Za=function(){null!=this.C&&(this.C=null,Yw(this),Ck(this),_s(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),_s(2)):(this.j.info("Failed to ping google.com"),_s(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=o7.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Zw.prototype.g=function(f,y){return new po(f,y)},T(po,oi),po.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},po.prototype.close=function(){wk(this.g)},po.prototype.o=function(f){var y=this.g;if("string"==typeof f){var E={};E.__data__=f,f=E}else this.u&&((E={}).__data__=hk(f),f=E);y.i.push(new Iwe(y.Ya++,f)),3==y.G&&Jw(y)},po.prototype.N=function(){this.g.l=null,delete this.j,wk(this.g),delete this.g,po.aa.N.call(this)},T(a7,pk),T(c7,gk),T(Eg,o7),Eg.prototype.ua=function(){Ei(this.g,"a")},Eg.prototype.ta=function(f){Ei(this.g,new a7(f))},Eg.prototype.sa=function(f){Ei(this.g,new c7)},Eg.prototype.ra=function(){Ei(this.g,"b")},Zw.prototype.createWebChannel=Zw.prototype.g,po.prototype.send=po.prototype.o,po.prototype.open=po.prototype.m,po.prototype.close=po.prototype.close,_G=jc.createWebChannelTransport=function(){return new Zw},mG=jc.getStatEventTarget=function(){return jw()},gG=jc.Event=_h,LM=jc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$w.NO_ERROR=0,$w.TIMEOUT=8,$w.HTTP_ERROR=6,nT=jc.ErrorCode=$w,w9.COMPLETE="complete",pG=jc.EventType=w9,v9.EventType=Bv,Bv.OPEN="a",Bv.CLOSE="b",Bv.ERROR="c",Bv.MESSAGE="d",oi.prototype.listen=oi.prototype.K,Ty=jc.WebChannel=v9,jc.FetchXmlHttpFactory=qv,yr.prototype.listenOnce=yr.prototype.L,yr.prototype.getLastError=yr.prototype.Ka,yr.prototype.getLastErrorCode=yr.prototype.Ba,yr.prototype.getStatus=yr.prototype.Z,yr.prototype.getResponseJson=yr.prototype.Oa,yr.prototype.getResponseText=yr.prototype.oa,yr.prototype.send=yr.prototype.ea,yr.prototype.setWithCredentials=yr.prototype.Ha,fG=jc.XhrIo=yr}).apply(typeof tT<"u"?tT:typeof self<"u"?self:typeof window<"u"?window:{});const yG="@firebase/firestore";class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let Ep="10.14.0";const Yl=new Ua.Vy("@firebase/firestore");function Ip(){return Yl.logLevel}function Ae(n,...e){if(Yl.logLevel<=Ua.$b.DEBUG){const t=e.map(VM);Yl.debug(`Firestore (${Ep}): ${n}`,...t)}}function Rr(n,...e){if(Yl.logLevel<=Ua.$b.ERROR){const t=e.map(VM);Yl.error(`Firestore (${Ep}): ${n}`,...t)}}function so(n,...e){if(Yl.logLevel<=Ua.$b.WARN){const t=e.map(VM);Yl.warn(`Firestore (${Ep}): ${n}`,...t)}}function VM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${Ep}) INTERNAL ASSERTION FAILED: `+n;throw Rr(e),new Error(e)}function Xe(n,e){n||Je()}function Ve(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends bn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cpe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class lpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class upe{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Xe(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,S.A)(function*(){yield l.promise,yield s(r.currentUser)}))},c=l=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vi)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe("string"==typeof r.accessToken),new vG(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(null===e||"string"==typeof e),new yi(e)}}class dpe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hpe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dpe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fpe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Xe(void 0===this.o);const r=s=>{null!=s.error&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe("string"==typeof t.token),this.R=t.token,new bG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ppe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class EG{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=ppe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function Tp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function IG(n){return n+"\0"}class rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nt(e)}static min(){return new nt(new rr(0,0))}static max(){return new nt(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wy{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zt extends wy{construct(e,t,r){return new zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const gpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends wy{construct(e,t,r){return new Xn(e,t,r)}static isValidIdentifier(e){return gpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ie(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ie(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Ie(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ie(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(t)}static emptyPath(){return new Xn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(zt.fromString(e))}static fromName(e){return new He(zt.fromString(e).popFirst(5))}static empty(){return new He(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new zt(e.slice()))}}class wp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function BM(n){return n.fields.find(e=>2===e.kind)}function xd(n){return n.fields.filter(e=>2!==e.kind)}wp.UNKNOWN_ID=-1;class Pd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cp(0,oo.min())}}function TG(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=nt.fromTimestamp(1e9===r?new rr(t+1,0):new rr(t,r));return new oo(i,He.empty(),e)}function wG(n){return new oo(n.readTime,n.key,-1)}class oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new oo(nt.min(),He.empty(),-1)}static max(){return new oo(nt.max(),He.empty(),-1)}}function UM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const CG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Jl(n){return jM.apply(this,arguments)}function jM(){return jM=(0,S.A)(function*(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==CG)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}),jM.apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new J((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class rT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new vi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Cy(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=$M(r.target.error);this.V.reject(new Cy(e,i))}}static open(e,t,r,i){try{return new rT(t,e.transaction(i,r))}catch(s){throw new Cy(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vpe(t)}}class ja{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ja.S((0,bn.ZQ)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ae("SimpleDb","Removing database:",e),Od(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,bn.zW)())return!1;if(ja.v())return!0;const e=(0,bn.ZQ)(),t=ja.S(e),r=0<t&&t<10,i=AG(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,S.A)(function*(){return t.db||(Ae("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Cy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Ie(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ie(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Cy(e,a))},s.onupgradeneeded=o=>{Ae("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Ae("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,S.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=rT.open(s.db,e,o?"readonly":"readwrite",r),l=i(c).next(h=>(c.g(),h)).catch(h=>(c.abort(h),J.reject(h))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){const l=c,h="FirebaseError"!==l.name&&a<3;if(Ae("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function AG(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ype{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Od(this.B.delete())}}class Cy extends Ie{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xl(n){return"IndexedDbTransactionError"===n.name}class vpe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ae("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Od(r)}add(e){return Ae("SimpleDb","ADD",this.store.name,e,e),Od(this.store.add(e))}get(e){return Od(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ae("SimpleDb","DELETE",this.store.name,e),Od(this.store.delete(e))}count(){return Ae("SimpleDb","COUNT",this.store.name),Od(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new J((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new J((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Ae("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new J((r,i)=>{t.onerror=s=>{const o=$M(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new J((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new ype(a),l=t(a.primaryKey,a.value,c);if(l instanceof J){const h=l.catch(g=>(c.done(),J.reject(g)));r.push(h)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>J.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Od(n){return new J((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=$M(r.target.error);t(i)}})}let SG=!1;function $M(n){const e=ja.S((0,bn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SG||(SG=!0,setTimeout(()=>{throw r},0)),r}}return n}class bpe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,S.A)(function*(){t.task=null;try{Ae("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Xl(r)?Ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Jl(r)}yield t.X(6e4)}))}}class Epe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,S.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return J.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Ae("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Ae("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=wG(s);UM(o,r)>0&&(r=o)}),new oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ao=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Dy(n){return null==n}function Ay(n){return 0===n&&1/n==-1/0}function RG(n){return"number"==typeof n&&Number.isInteger(n)&&!Ay(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NG(e)),e=Ipe(n.get(t),e);return NG(e)}function Ipe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function NG(n){return n+"\x01\x01"}function $a(n){const e=n.length;if(Xe(e>=2),2===e)return Xe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),zt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Je(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Je()}s=o+2}return new zt(r)}const MG=["userId","batchId"];function iT(n,e){return[n,Yi(e)]}function xG(n,e,t){return[n,Yi(e),t]}const Tpe={},wpe=["prefixPath","collectionGroup","readTime","documentId"],Cpe=["prefixPath","collectionGroup","documentId"],Dpe=["collectionGroup","readTime","prefixPath","documentId"],Ape=["canonicalId","targetId"],Spe=["targetId","path"],Rpe=["path","targetId"],Npe=["collectionId","parent"],Mpe=["indexId","uid"],xpe=["uid","sequenceNumber"],Ppe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ope=["indexId","uid","orderedDocumentKey"],kpe=["userId","collectionPath","documentId"],Fpe=["userId","collectionPath","largestBatchId"],Lpe=["userId","collectionGroup","largestBatchId"],PG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vpe=[...PG,"documentOverlays"],OG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kG=OG,HM=[...kG,"indexConfiguration","indexState","indexEntries"],Bpe=HM,Upe=[...HM,"globals"];class GM extends DG{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function si(n,e){const t=Ve(n);return ja.F(t._e,e)}function FG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Kn{constructor(e,t){this.comparator=e,this.root=t||Mi.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mi.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sT(this.root,e,this.comparator,!1)}getReverseIterator(){return new sT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sT(this.root,e,this.comparator,!0)}}class sT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Mi.RED,this.left=i??Mi.EMPTY,this.right=s??Mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Mi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Mi.EMPTY=null,Mi.RED=!0,Mi.BLACK=!1,Mi.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Mi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BG(this.data.getIterator())}getIteratorFrom(e){return new BG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class BG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dp(n){return n.hasNext()?n.getNext():void 0}class Ms{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new Pn(Xn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class UG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new UG("Invalid base64 string: "+s):s}}(e);return new _r(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const $pe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $c(n){if(Xe(!!n),"string"==typeof n){let e=0;const t=$pe.exec(n);if(Xe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hc(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function oT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function aT(n){const e=n.mapValue.fields.__previous_value__;return oT(e)?aT(e):e}function Sy(n){const e=$c(n.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class Hpe{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class eu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new eu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}const tu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cT={nullValue:"NULL_VALUE"};function nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oT(n)?4:WG(n)?9007199254740991:dT(n)?10:11:Je()}function Ha(n,e){if(n===e)return!0;const t=nu(n);if(t!==nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sy(n).isEqual(Sy(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=$c(i.timestampValue),a=$c(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Hc(n.bytesValue).isEqual(Hc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ir(i.geoPointValue.latitude)===ir(s.geoPointValue.latitude)&&ir(i.geoPointValue.longitude)===ir(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ir(i.integerValue)===ir(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ir(i.doubleValue),a=ir(s.doubleValue);return o===a?Ay(o)===Ay(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Tp(n.arrayValue.values||[],e.arrayValue.values||[],Ha);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(FG(o)!==FG(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!Ha(o[c],a[c])))return!1;return!0}(n,e);default:return Je()}var s}function Ry(n,e){return void 0!==(n.values||[]).find(t=>Ha(t,e))}function ru(n,e){if(n===e)return 0;const t=nu(n),r=nu(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ir(s.integerValue||s.doubleValue),c=ir(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return jG(n.timestampValue,e.timestampValue);case 4:return jG(Sy(n),Sy(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Hc(s),c=Hc(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=Tt(a[l],c[l]);if(0!==h)return h}return Tt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tt(ir(s.latitude),ir(o.latitude));return 0!==a?a:Tt(ir(s.longitude),ir(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $G(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;const v=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(c=(o.fields||{}).value)||void 0===c?void 0:c.arrayValue,C=Tt((null===(l=v?.values)||void 0===l?void 0:l.length)||0,(null===(h=T?.values)||void 0===h?void 0:h.length)||0);return 0!==C?C:$G(v,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===tu.mapValue&&o===tu.mapValue)return 0;if(s===tu.mapValue)return 1;if(o===tu.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){const _=Tt(c[g],h[g]);if(0!==_)return _;const v=ru(a[c[g]],l[h[g]]);if(0!==v)return v}return Tt(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Je()}}function jG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=$c(n),r=$c(e),i=Tt(t.seconds,r.seconds);return 0!==i?i:Tt(t.nanos,r.nanos)}function $G(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ru(t[i],r[i]);if(s)return s}return Tt(t.length,r.length)}function Ap(n){return WM(n)}function WM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=$c(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hc(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=WM(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${WM(t.fields[o])}`;return i+"}"}(n.mapValue):Je()}function kd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zM(n){return!!n&&"integerValue"in n}function Ny(n){return!!n&&"arrayValue"in n}function HG(n){return!!n&&"nullValue"in n}function GG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uT(n){return!!n&&"mapValue"in n}function dT(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function My(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=My(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=My(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const zG={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Gpe(n){return"nullValue"in n?cT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?kd(eu.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?dT(n)?zG:{mapValue:{}}:Je()}function Wpe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?kd(eu.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?zG:"mapValue"in n?dT(n)?{mapValue:{}}:tu:Je()}function qG(n,e){const t=ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KG(n,e){const t=ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=My(t)}setAll(e){let t=Xn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=My(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());uT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];uT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xi(My(this.value))}}function QG(n){const e=[];return Zl(n.fields,(t,r)=>{const i=new Xn([t]);if(uT(r)){const s=QG(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ms(e)}class Zn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Zn(e,0,nt.min(),nt.min(),nt.min(),xi.empty(),0)}static newFoundDocument(e,t,r,i){return new Zn(e,1,t,nt.min(),r,i,0)}static newNoDocument(e,t){return new Zn(e,2,t,nt.min(),nt.min(),xi.empty(),0)}static newUnknownDocument(e,t){return new Zn(e,3,t,nt.min(),nt.min(),xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iu{constructor(e,t){this.position=e,this.inclusive=t}}function YG(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?He.comparator(He.fromName(o.referenceValue),t.key):ru(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function JG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ha(n.position[t],e.position[t]))return!1;return!0}class xy{constructor(e,t="asc"){this.field=e,this.dir=t}}function zpe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class XG{}class qt extends XG{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new qpe(e,t,r):"array-contains"===t?new Ype(e,r):"in"===t?new i8(e,r):"not-in"===t?new Jpe(e,r):"array-contains-any"===t?new Xpe(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Kpe(e,r):new Qpe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ru(t,this.value)):null!==t&&nu(this.value)===nu(t)&&this.matchesComparison(ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends XG{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new An(e,t)}matches(e){return Sp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sp(n){return"and"===n.op}function qM(n){return"or"===n.op}function KM(n){return ZG(n)&&Sp(n)}function ZG(n){for(const e of n.filters)if(e instanceof An)return!1;return!0}function QM(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+Ap(n.value);if(KM(n))return n.filters.map(e=>QM(e)).join(",");{const e=n.filters.map(t=>QM(t)).join(",");return`${n.op}(${e})`}}function e8(n,e){return n instanceof qt?(r=n,(i=e)instanceof qt&&r.op===i.op&&r.field.isEqual(i.field)&&Ha(r.value,i.value)):n instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&e8(o,i.filters[a]),!0)}(n,e):void Je();var r,i}function t8(n,e){const t=n.filters.concat(e);return An.create(t,n.op)}function n8(n){return n instanceof qt?`${(t=n).field.canonicalString()} ${t.op} ${Ap(t.value)}`:n instanceof An?function(t){return t.op.toString()+" {"+t.getFilters().map(n8).join(" ,")+"}"}(n):"Filter";var t}class qpe extends qt{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kpe extends qt{constructor(e,t){super(e,"in",t),this.keys=r8(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qpe extends qt{constructor(e,t){super(e,"not-in",t),this.keys=r8(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function r8(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class Ype extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ny(t)&&Ry(t.arrayValue,this.value)}}class i8 extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ry(this.value.arrayValue,t)}}class Jpe extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ry(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ry(this.value.arrayValue,t)}}class Xpe extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ny(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ry(this.value.arrayValue,r))}}class Zpe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function YM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Zpe(n,e,t,r,i,s,o)}function Fd(n){const e=Ve(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>QM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Dy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ap(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ap(r)).join(",")),e.ue=t}return e.ue}function Py(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zpe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!e8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JG(n.startAt,e.startAt)&&JG(n.endAt,e.endAt)}function hT(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fT(n,e){return n.filters.filter(t=>t instanceof qt&&t.field.isEqual(e))}function s8(n,e,t){let r=cT,i=!0;for(const s of fT(n,e)){let o=cT,a=!0;switch(s.op){case"<":case"<=":o=Gpe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=cT}qG({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];qG({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function o8(n,e,t){let r=tu,i=!0;for(const s of fT(n,e)){let o=tu,a=!0;switch(s.op){case">=":case">":o=Wpe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=tu}KG({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];KG({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Gc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function a8(n,e,t,r,i,s,o,a){return new Gc(n,e,t,r,i,s,o,a)}function Rp(n){return new Gc(n)}function c8(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JM(n){return null!==n.collectionGroup}function Np(n){const e=Ve(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pn(Xn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xy(s,r))}),t.has(Xn.keyField().canonicalString())||e.ce.push(new xy(Xn.keyField(),r))}return e.ce}function Ji(n){const e=Ve(n);return e.le||(e.le=function u8(n,e){if("F"===n.limitType)return YM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new xy(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new iu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new iu(n.startAt.position,n.startAt.inclusive):null;return YM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Np(n))),e.le}function XM(n,e){const t=n.filters.concat([e]);return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pT(n,e,t){return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Oy(n,e){return Py(Ji(n),Ji(e))&&n.limitType===e.limitType}function d8(n){return`${Fd(Ji(n))}|lt:${n.limitType}`}function Mp(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>n8(i)).join(", ")}]`),Dy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ap(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ap(i)).join(",")),`Target(${r})`}(Ji(n))}; limitType=${n.limitType})`}function ky(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):He.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Np(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const l=YG(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Np(r),i)||r.endAt&&!function(o,a,c){const l=YG(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Np(r),i)));var r,i}function h8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f8(n){return(e,t)=>{let r=!1;for(const i of Np(n)){const s=ege(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ege(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return null!==c&&null!==l?ru(c,l):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}class Wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return VG(this.inner)}size(){return this.innerSize}}const tge=new Kn(He.comparator);function xs(){return tge}const p8=new Kn(He.comparator);function Fy(...n){let e=p8;for(const t of n)e=e.insert(t.key,t);return e}function g8(n){let e=p8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ga(){return Ly()}function m8(){return Ly()}function Ly(){return new Wc(n=>n.toString(),(n,e)=>n.isEqual(e))}const nge=new Kn(He.comparator),rge=new Pn(He.comparator);function Ot(...n){let e=rge;for(const t of n)e=e.add(t);return e}const ige=new Pn(Tt);function ZM(){return ige}function ex(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ay(e)?"-0":e}}function _8(n){return{integerValue:""+n}}function y8(n,e){return RG(e)?_8(e):ex(n,e)}class gT{constructor(){this._=void 0}}function sge(n,e,t){return n instanceof xp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&oT(s)&&(s=aT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ld?b8(n,e):n instanceof Vd?E8(n,e):function(i,s){const o=v8(i,s),a=I8(o)+I8(i.Pe);return zM(o)&&zM(i.Pe)?_8(a):ex(i.serializer,a)}(n,e)}function oge(n,e,t){return n instanceof Ld?b8(n,e):n instanceof Vd?E8(n,e):t}function v8(n,e){return n instanceof Pp?zM(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class xp extends gT{}class Ld extends gT{constructor(e){super(),this.elements=e}}function b8(n,e){const t=T8(e);for(const r of n.elements)t.some(i=>Ha(i,r))||t.push(r);return{arrayValue:{values:t}}}class Vd extends gT{constructor(e){super(),this.elements=e}}function E8(n,e){let t=T8(e);for(const r of n.elements)t=t.filter(i=>!Ha(i,r));return{arrayValue:{values:t}}}class Pp extends gT{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function I8(n){return ir(n.integerValue||n.doubleValue)}function T8(n){return Ny(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vy{constructor(e,t){this.field=e,this.transform=t}}class cge{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _T{}function w8(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new kp(n.key,sr.none()):new Op(n.key,n.data,sr.none());{const t=n.data,r=xi.empty();let i=new Pn(Xn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new zc(n.key,r,new Ms(i.toArray()),sr.none())}}function lge(n,e,t){n instanceof Op?function(i,s,o){const a=i.value.clone(),c=A8(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof zc?function(i,s,o){if(!mT(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=A8(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(D8(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function By(n,e,t,r){return n instanceof Op?function(s,o,a,c){if(!mT(s.precondition,o))return a;const l=s.value.clone(),h=S8(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof zc?function(s,o,a,c){if(!mT(s.precondition,o))return a;const l=S8(s.fieldTransforms,c,o),h=o.data;return h.setAll(D8(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,mT(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function uge(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=v8(r.transform,i||null);null!=s&&(null===t&&(t=xi.empty()),t.set(r.field,s))}return t||null}function C8(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Tp(r,i,(s,o)=>function age(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Ld&&i instanceof Ld||r instanceof Vd&&i instanceof Vd?Tp(r.elements,i.elements,Ha):r instanceof Pp&&i instanceof Pp?Ha(r.Pe,i.Pe):r instanceof xp&&i instanceof xp);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Op extends _T{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zc extends _T{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function D8(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function A8(n,e,t){const r=new Map;Xe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,oge(o,a,t[i]))}return r}function S8(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,sge(s,o,e))}return r}class kp extends _T{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tx extends _T{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lge(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=By(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=By(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=m8();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=w8(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&Tp(this.mutations,e.mutations,(t,r)=>C8(t,r))&&Tp(this.baseMutations,e.baseMutations,(t,r)=>C8(t,r))}}class rx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Xe(e.mutations.length===r.length);let i=function(){return nge}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rx(e,t,r,i)}}class ix{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dge{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gr,sn;function N8(n){switch(n){default:return Je();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function M8(n){if(void 0===n)return Rr("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Gr.OK:return ie.OK;case Gr.CANCELLED:return ie.CANCELLED;case Gr.UNKNOWN:return ie.UNKNOWN;case Gr.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Gr.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Gr.INTERNAL:return ie.INTERNAL;case Gr.UNAVAILABLE:return ie.UNAVAILABLE;case Gr.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Gr.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Gr.NOT_FOUND:return ie.NOT_FOUND;case Gr.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Gr.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Gr.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Gr.ABORTED:return ie.ABORTED;case Gr.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Gr.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Gr.DATA_LOSS:return ie.DATA_LOSS;default:return Je()}}(sn=Gr||(Gr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";function x8(){return new TextEncoder}const hge=new Md([4294967295,4294967295],0);function P8(n){const e=x8().encode(n),t=new hG;return t.update(e),new Uint8Array(t.digest())}function O8(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Md([t,r],0),new Md([i,s],0)]}class sx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Uy(`Invalid padding: ${t}`);if(r<0)throw new Uy(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Uy(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Uy(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Md.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Md.fromNumber(r)));return 1===i.compare(hge)&&(i=new Md([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=P8(e),[r,i]=O8(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sx(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=P8(e),[r,i]=O8(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Uy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,$y.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jy(nt.min(),i,new Kn(Tt),xs(),Ot())}}class $y{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $y(r,t,Ot(),Ot(),Ot())}}class vT{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class k8{constructor(e,t){this.targetId=e,this.me=t}}class F8{constructor(e,t,r=_r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class L8{constructor(){this.fe=0,this.ge=B8(),this.pe=_r.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ot(),t=Ot(),r=Ot();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Je()}}),new $y(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=B8()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fge{constructor(e){this.Le=e,this.Be=new Map,this.ke=xs(),this.qe=V8(),this.Qe=new Kn(Tt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(hT(s))if(0===r){const o=new He(s.path);this.Ue(t,o,Zn.newNoDocument(o,nt.min()))}else Xe(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Hc(r).toUint8Array()}catch(c){if(c instanceof UG)return so("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new sx(o,i,s)}catch(c){return so(c instanceof Uy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hT(a.target)){const c=new He(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,Zn.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Ot();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Je(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new jy(e,t,this.Qe,this.ke,r);return this.ke=xs(),this.qe=V8(),this.Qe=new Kn(Tt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new L8,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pn(Tt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new L8),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function V8(){return new Kn(He.comparator)}function B8(){return new Kn(He.comparator)}const pge={asc:"ASCENDING",desc:"DESCENDING"},gge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mge={and:"AND",or:"OR"};class _ge{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ox(n,e){return n.useProto3Json||Dy(e)?e:{value:e}}function Fp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yge(n,e){return Fp(n,e.toTimestamp())}function Nr(n){return Xe(!!n),nt.fromTimestamp(function(t){const r=$c(t);return new rr(r.seconds,r.nanos)}(n))}function ax(n,e){return cx(n,e).canonicalString()}function cx(n,e){const t=(i=n,new zt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function j8(n){const e=zt.fromString(n);return Xe(X8(e)),e}function Hy(n,e){return ax(n.databaseId,e.path)}function Wa(n,e){const t=j8(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(G8(t))}function $8(n,e){return ax(n.databaseId,e)}function H8(n){const e=j8(n);return 4===e.length?zt.emptyPath():G8(e)}function lx(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function G8(n){return Xe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function W8(n,e,t){return{name:Hy(n,e),fields:t.value.mapValue.fields}}function z8(n,e,t){const r=Wa(n,e.name),i=Nr(e.updateTime),s=e.createTime?Nr(e.createTime):nt.min(),o=new xi({mapValue:{fields:e.fields}}),a=Zn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Gy(n,e){let t;if(e instanceof Op)t={update:W8(n,e.key,e.value)};else if(e instanceof kp)t={delete:Hy(n,e.key)};else if(e instanceof zc)t={update:W8(n,e.key,e.data),updateMask:Dge(e.fieldMask)};else{if(!(e instanceof tx))return Je();t={verify:Hy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof xp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:yge(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Je()),t;var s}function ux(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?sr.updateTime(Nr(s.updateTime)):void 0!==s.exists?sr.exists(s.exists):sr.none():sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(Xe("REQUEST_TIME"===a.setToServerValue),c=new xp):"appendMissingElements"in a?c=new Ld(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Vd(a.removeAllFromArray.values||[]):"increment"in a?c=new Pp(o,a.increment):Je();const l=Xn.fromServerFormat(a.fieldPath);return new Vy(l,c)}(n,i)):[];var s;if(e.update){const i=Wa(n,e.update.name),s=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ms((e.updateMask.fieldPaths||[]).map(h=>Xn.fromServerFormat(h)));return new zc(i,s,o,t,r)}return new Op(i,s,t,r)}if(e.delete){const i=Wa(n,e.delete);return new kp(i,t)}if(e.verify){const i=Wa(n,e.verify);return new tx(i,t)}return Je()}function q8(n,e){return{documents:[$8(n,e.path)]}}function bT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$8(n,i);const s=function(l){if(0!==l.length)return J8(An.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(h=>{return{field:su((_=h).field),direction:Tge(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=ox(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function Q8(n){let e=H8(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Xe(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const _=Y8(g);return _ instanceof An&&KM(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new xy(Lp((T=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,Dy(_)?null:_}(t.limit));let c=null;var g;t.startAt&&(c=new iu((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new iu(g.values||[],!g.before)}(t.endAt)),a8(e,i,o,s,a,"F",c,l)}function Y8(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Lp(t.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Lp(t.unaryFilter.field);return qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lp(t.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lp(t.unaryFilter.field);return qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}(n):void 0!==n.fieldFilter?qt.create(Lp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return An.create(t.compositeFilter.filters.map(r=>Y8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Je()}}(t.compositeFilter.op))}(n):Je();var t}function Tge(n){return pge[n]}function wge(n){return gge[n]}function Cge(n){return mge[n]}function su(n){return{fieldPath:n.canonicalString()}}function Lp(n){return Xn.fromServerFormat(n.fieldPath)}function J8(n){return n instanceof qt?function(t){if("=="===t.op){if(GG(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NAN"}};if(HG(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(GG(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NOT_NAN"}};if(HG(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:su(t.field),op:wge(t.op),value:t.value}}}(n):n instanceof An?function(t){const r=t.getFilters().map(i=>J8(i));return 1===r.length?r[0]:{compositeFilter:{op:Cge(t.op),filters:r}}}(n):Je()}function Dge(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function X8(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class qc{constructor(e,t,r,i,s=nt.min(),o=nt.min(),a=_r.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new qc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Z8{constructor(e){this.ct=e}}function e6(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ET(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hy(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Fp(s,o.version.toTimestamp()),createTime:Fp(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bd(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:Bd(e.version)}}var s,o;return r}function ET(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ud(n){const e=new rr(n.seconds,n.nanoseconds);return nt.fromTimestamp(e)}function jd(n,e){const t=(e.baseMutations||[]).map(s=>ux(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>ux(n.ct,s)),i=rr.fromMillis(e.localWriteTimeMs);return new nx(e.batchId,i,t,r)}function Wy(n){const e=Ud(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ud(n.lastLimboFreeSnapshotVersion):nt.min();let r;return r=void 0!==n.query.documents?(Xe(1===(s=n.query).documents.length),Ji(Rp(H8(s.documents[0])))):function(s){return Ji(Q8(s))}(n.query),new qc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken));var s}function t6(n,e){const t=Bd(e.snapshotVersion),r=Bd(e.lastLimboFreeSnapshotVersion);let i;i=hT(e.target)?q8(n.ct,e.target):bT(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fd(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dx(n){const e=Q8({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?pT(e,e.limit,"L"):e}function hx(n,e){return new ix(e.largestBatchId,ux(n.ct,e.overlayMutation))}function n6(n,e){const t=e.path.lastSegment();return[n,Yi(e.path.popLast()),t]}function r6(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bd(r.readTime),documentKey:Yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Sge{getBundleMetadata(e,t){return i6(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ud(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return i6(e).put({bundleId:(i=t).id,createTime:Bd(Nr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return s6(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:dx(s.bundledQuery),readTime:Ud(s.readTime)};var s})}saveNamedQuery(e,t){return s6(e).put({name:(i=t).name,readTime:Bd(Nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function i6(n){return si(n,"bundles")}function s6(n){return si(n,"namedQueries")}class IT{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new IT(e,t.uid||"")}getOverlay(e,t){return zy(e).get(n6(this.userId,t)).next(r=>r?hx(this.serializer,r):null)}getOverlays(e,t){const r=Ga();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new ix(t,o);i.push(this.ht(e,a))}),J.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Yi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(zy(e).j("collectionPathOverlayIndex",a))}),J.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ga(),s=Yi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zy(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const l=hx(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ga();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zy(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{const g=hx(this.serializer,l);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return zy(e).put(function(i,s,o){const[a,c,l]=n6(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Gy(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function zy(n){return si(n,"documentOverlays")}class Rge{Pt(e){return si(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?_r.fromUint8Array(r):_r.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class $d{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ay(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=$c(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Hc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?WG(e)?this.dt(t,Number.MAX_SAFE_INTEGER):dT(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Je()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(ir(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),He.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Nge(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function o6(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Nge(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}$d.vt=new $d;class Mge{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=o6(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=o6(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xge{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Pge{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class qy{constructor(){this.jt=new Mge,this.Ht=new xge(this.jt),this.Jt=new Pge(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Hd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hd(this.indexId,this.documentKey,this.arrayValue,r)}}function ou(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=a6(n.arrayValue,e.arrayValue),0!==t?t:(t=a6(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function a6(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class c6{constructor(e){this.Xt=new Pn((t,r)=>Xn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Xe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=BM(e);if(void 0!==t&&!this.sn(t))return!1;const r=xd(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Pn(Xn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Pd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pd(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pd(r.field,"asc"===r.dir?0:1)));return new wp(wp.UNKNOWN_ID,this.collectionId,t,Cp.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function l6(n){var e,t;if(Xe(n instanceof qt||n instanceof An),n instanceof qt){if(n instanceof i8){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>qt.create(n.field,"==",s)))||[];return An.create(i,"or")}return n}const r=n.filters.map(i=>l6(i));return An.create(r,n.op)}function Oge(n){if(0===n.getFilters().length)return[];const e=gx(l6(n));return Xe(u6(e)),fx(e)||px(e)?[e]:e.getFilters()}function fx(n){return n instanceof qt}function px(n){return n instanceof An&&KM(n)}function u6(n){return fx(n)||px(n)||function(t){if(t instanceof An&&qM(t)){for(const r of t.getFilters())if(!fx(r)&&!px(r))return!1;return!0}return!1}(n)}function gx(n){if(Xe(n instanceof qt||n instanceof An),n instanceof qt)return n;if(1===n.filters.length)return gx(n.filters[0]);const e=n.filters.map(r=>gx(r));let t=An.create(e,n.op);return t=TT(t),u6(t)?t:(Xe(t instanceof An),Xe(Sp(t)),Xe(t.filters.length>1),t.filters.reduce((r,i)=>mx(r,i)))}function mx(n,e){let t;return Xe(n instanceof qt||n instanceof An),Xe(e instanceof qt||e instanceof An),t=n instanceof qt?e instanceof qt?An.create([n,e],"and"):d6(n,e):e instanceof qt?d6(e,n):function(i,s){if(Xe(i.filters.length>0&&s.filters.length>0),Sp(i)&&Sp(s))return t8(i,s.getFilters());const o=qM(i)?i:s,a=qM(i)?s:i,c=o.filters.map(l=>mx(l,a));return An.create(c,"or")}(n,e),TT(t)}function d6(n,e){if(Sp(e))return t8(e,n.getFilters());{const t=e.filters.map(r=>mx(n,r));return An.create(t,"or")}}function TT(n){if(Xe(n instanceof qt||n instanceof An),n instanceof qt)return n;const e=n.getFilters();if(1===e.length)return TT(e[0]);if(ZG(n))return n;const t=e.map(i=>TT(i)),r=[];return t.forEach(i=>{i instanceof qt?r.push(i):i instanceof An&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,n.op)}class kge{constructor(){this.un=new _x}addToCollectionParentIndex(e,t){return this.un.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(oo.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class _x{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(zt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(zt.comparator)).toArray()}}const wT=new Uint8Array(0);class Fge{constructor(e,t){this.databaseId=t,this.cn=new _x,this.ln=new Wc(r=>Fd(r),(r,i)=>Py(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Yi(i)};return h6(e).put(s)}return J.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[IG(t),""],!1,!0);return h6(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push($a(o.parent))}return r})}addFieldIndex(e,t){const r=Ky(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Bp(e);return s.next(a=>{o.put(r6(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Ky(e),i=Bp(e),s=Vp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ky(e),r=Vp(e),i=Bp(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return J.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new c6(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Vp(e);let i=!0;const s=new Map;return J.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ot();const a=[];return J.forEach(s,(c,l)=>{var q;Ae("IndexedDbIndexManager",`Using index ${q=c,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(ne=>`${ne.fieldPath}:${ne.kind}`).join(",")}`} to execute ${Fd(t)}`);const h=function(q,ne){const me=BM(ne);if(void 0===me)return null;for(const we of fT(q,me.fieldPath))switch(we.op){case"array-contains-any":return we.value.arrayValue.values||[];case"array-contains":return[we.value]}return null}(l,c),g=function(q,ne){const me=new Map;for(const we of xd(ne))for(const F of fT(q,we.fieldPath))switch(F.op){case"==":case"in":me.set(we.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return me.set(we.fieldPath.canonicalString(),F.value),Array.from(me.values())}return null}(l,c),_=function(q,ne){const me=[];let we=!0;for(const F of xd(ne)){const R=0===F.kind?s8(q,F.fieldPath,q.startAt):o8(q,F.fieldPath,q.startAt);me.push(R.value),we&&(we=R.inclusive)}return new iu(me,we)}(l,c),v=function(q,ne){const me=[];let we=!0;for(const F of xd(ne)){const R=0===F.kind?o8(q,F.fieldPath,q.endAt):s8(q,F.fieldPath,q.endAt);me.push(R.value),we&&(we=R.inclusive)}return new iu(me,we)}(l,c),T=this.In(c,l,_),C=this.In(c,l,v),A=this.Tn(c,l,g),k=this.En(c.indexId,h,T,_.inclusive,C,v.inclusive,A);return J.forEach(k,P=>r.G(P,t.limit).next(q=>{q.forEach(ne=>{const me=He.fromSegments(ne.documentKey);o.has(me)||(o=o.add(me),a.push(me))})}))}).next(()=>a)}return J.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Oge(An.create(e.filters,"and")).map(r=>YM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),l=c/(null!=t?t.length:1),h=[];for(let g=0;g<c;++g){const _=t?this.dn(t[g/l]):wT,v=this.An(e,_,r[g%l],i),T=this.Rn(e,_,s[g%l],o),C=a.map(A=>this.An(e,_,A,!0));h.push(...this.createRange(v,T,C))}return h}An(e,t,r,i){const s=new Hd(e,He.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Hd(e,He.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new c6(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return J.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let l=new Pn(Xn.comparator),h=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:l=l.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new qy;for(const i of xd(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);$d.vt.It(s,o)}return r.zt()}dn(e){const t=new qy;return $d.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new qy;return $d.vt.It(kd(this.databaseId,t),r.Yt(function(s){const o=xd(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new qy);let s=0;for(const o of xd(e)){const a=r[s++];for(const c of i)if(this.fn(t,o.fieldPath)&&Ny(a))i=this.gn(i,o,a);else{const l=c.Yt(o.kind);$d.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new qy;c.seed(a.zt()),$d.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ky(e),i=Bp(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return J.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,g){const _=g?new Cp(g.sequenceNumber,new oo(Ud(g.readTime),new He($a(g.documentKey)),g.largestBatchId)):Cp.empty(),v=h.fields.map(([T,C])=>new Pd(Xn.fromServerFormat(T),C));return new wp(h.indexId,h.collectionGroup,v,_)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Tt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ky(e),s=Bp(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>J.forEach(a,c=>s.put(r6(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?J.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),J.forEach(a,c=>this.wn(e,i,c).next(l=>{const h=this.Sn(s,c);return l.isEqual(h)?J.resolve():this.bn(e,s,c,l,h)}))))})}Dn(e,t,r,i){return Vp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Vp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Vp(e);let s=new Pn(ou);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Hd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Pn(ou);const i=this.Vn(t,e);if(null==i)return r;const s=BM(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Ny(o))for(const a of o.arrayValue.values||[])r=r.add(new Hd(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Hd(t.indexId,e.key,wT,i));return r}bn(e,t,r,i,s){Ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,l,h,g,_){const v=c.getIterator(),T=l.getIterator();let C=Dp(v),A=Dp(T);for(;C||A;){let k=!1,P=!1;if(C&&A){const q=h(C,A);q<0?P=!0:q>0&&(k=!0)}else null!=C?P=!0:k=!0;k?(g(A),A=Dp(T)):P?(_(C),C=Dp(v)):(C=Dp(v),A=Dp(T))}}(i,s,ou,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),J.waitFor(o)}yn(e){let t=1;return Bp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ou(o,a)).filter((o,a,c)=>!a||0!==ou(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=ou(o,e),c=ou(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,wT,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,wT,[]]))}return s}Cn(e,t){return ou(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(f6)}getMinOffset(e,t){return J.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Je())).next(f6)}}function h6(n){return si(n,"collectionParents")}function Vp(n){return si(n,"indexEntries")}function Ky(n){return si(n,"indexConfiguration")}function Bp(n){return si(n,"indexState")}function f6(n){Xe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;UM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new oo(e.readTime,e.documentKey,t)}const p6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function g6(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(h,g,_)=>(a++,_.delete()));s.push(c.next(()=>{Xe(1===a)}));const l=[];for(const h of t.mutations){const g=xG(e,h.key.path,t.batchId);s.push(i.delete(g)),l.push(h.key)}return J.waitFor(s).next(()=>l)}function CT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class DT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Xe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new DT(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Up(e),o=au(e);return o.add({}).next(a=>{Xe("number"==typeof a);const c=new nx(a,t,r,i),l=function(v,T,C){const A=C.baseMutations.map(P=>Gy(v.ct,P)),k=C.mutations.map(P=>Gy(v.ct,P));return{userId:T,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:A,mutations:k}}(this.serializer,this.userId,c),h=[];let g=new Pn((_,v)=>Tt(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=xG(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),h.push(o.put(l)),h.push(s.put(v,Tpe))}return g.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),J.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return au(e).get(t).next(r=>r?(Xe(r.userId===this.userId),jd(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?J.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return au(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(Xe(a.batchId>=r),s=jd(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return au(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(e).U("userMutationsIndex",t).next(r=>r.map(i=>jd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=iT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Up(e).J({range:i},(o,a,c)=>{const[l,h,g]=o,_=$a(h);if(l===this.userId&&t.path.isEqual(_))return au(e).get(g).next(v=>{if(!v)throw Je();Xe(v.userId===this.userId),s.push(jd(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Tt);const i=[];return t.forEach(s=>{const o=iT(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Up(e).J({range:a},(l,h,g)=>{const[_,v,T]=l,C=$a(v);_===this.userId&&s.path.isEqual(C)?r=r.add(T):g.done()});i.push(c)}),J.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=iT(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Pn(Tt);return Up(e).J({range:o},(c,l,h)=>{const[g,_,v]=c,T=$a(_);g===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(au(e).get(s).next(o=>{if(null===o)throw Je();Xe(o.userId===this.userId),r.push(jd(this.serializer,o))}))}),J.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return g6(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),J.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Up(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=$a(s[1]);i.push(c)}else a.done()}).next(()=>{Xe(0===i.length)})})}containsKey(e,t){return m6(e,this.userId,t)}Nn(e){return _6(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function m6(n,e,t){const r=iT(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Up(n).J({range:s,H:!0},(a,c,l)=>{const[h,g,_]=a;h===e&&g===i&&(o=!0),l.done()}).next(()=>o)}function au(n){return si(n,"mutations")}function Up(n){return si(n,"documentMutations")}function _6(n){return si(n,"mutationQueues")}class Gd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gd(0)}static kn(){return new Gd(-1)}}class Lge{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Gd(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>nt.fromTimestamp(new rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jp(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Xe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return jp(e).J((o,a)=>{const c=Wy(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>J.waitFor(s)).next(()=>i)}forEachTarget(e,t){return jp(e).J((r,i)=>{const s=Wy(i);t(s)})}qn(e){return y6(e).get("targetGlobalKey").next(t=>(Xe(null!==t),t))}Qn(e,t){return y6(e).put("targetGlobalKey",t)}Kn(e,t){return jp(e).put(t6(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return jp(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const l=Wy(a);Py(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=cu(e);return t.forEach(o=>{const a=Yi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),J.waitFor(i)}removeMatchingKeys(e,t,r){const i=cu(e);return J.forEach(t,s=>{const o=Yi(s.path);return J.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=cu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=cu(e);let s=Ot();return i.J({range:r,H:!0},(o,a,c)=>{const l=$a(o[1]),h=new He(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Yi(t.path),i=IDBKeyRange.bound([r],[IG(r)],!1,!0);let s=0;return cu(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return jp(e).get(t).next(r=>r?Wy(r):null)}}function jp(n){return si(n,"targets")}function y6(n){return si(n,"targetGlobal")}function cu(n){return si(n,"targetDocuments")}function v6([n,e],[t,r]){const i=Tt(n,t);return 0===i?Tt(e,r):i}class Vge{constructor(e){this.Un=e,this.buffer=new Pn(v6),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();v6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,S.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xl(r)?Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Jl(r)}yield t.Hn(3e5)}))}}class Bge{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return J.resolve(ao.oe);const r=new Vge(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(p6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p6):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Ip()<=Ua.$b.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${g} documents in `+(l-c)+`ms\nTotal Duration: ${l-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Uge{constructor(e,t){this.db=e,this.garbageCollector=function E6(n,e){return new Bge(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return AT(e,r)}removeReference(e,t,r){return AT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return AT(e,t)}nr(e,t){return function(i,s){let o=!1;return _6(i).Y(a=>m6(i,a,s).next(c=>(c&&(o=!0),J.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,nt.min()),cu(e).delete([0,Yi(o.path)])))});i.push(c)}}).next(()=>J.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return AT(e,t)}tr(e,t){const r=cu(e);let i,s=ao.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{0===o?(s!==ao.oe&&t(new He($a(i)),s),s=l,i=c):s=ao.oe}).next(()=>{s!==ao.oe&&t(new He($a(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function AT(n,e){return cu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Yi(e.path),sequenceNumber:i}));var i}class I6{constructor(){this.changes=new Wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jge{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wd(e).put(r)}removeEntry(e,t,r){return Wd(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ET(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Zn.newInvalidDocument(t);return Wd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qy(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Zn.newInvalidDocument(t)};return Wd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qy(t))},(i,s)=>{r={document:this.ir(t,s),size:CT(s)}}).next(()=>r)}getEntries(e,t){let r=xs();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=xs(),i=new Kn(He.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,CT(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return J.resolve();let i=new Pn(D6);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Qy(i.first()),Qy(i.last())),o=i.getIterator();let a=o.getNext();return Wd(e).J({index:"documentKeyIndex",range:s},(c,l,h)=>{const g=He.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&D6(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(Qy(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ET(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wd(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=xs();for(const g of l){const _=this.ir(He.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(ky(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=xs();const o=C6(t,r),a=C6(t,oo.max());return Wd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,h)=>{const g=this.ir(He.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new $ge(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return w6(e).get("remoteDocumentGlobalKey").next(t=>(Xe(!!t),t))}rr(e,t){return w6(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function Age(n,e){let t;if(e.document)t=z8(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=Ud(e.noDocument.readTime);t=Zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=He.fromSegments(e.unknownDocument.path),i=Ud(e.unknownDocument.version);t=Zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new rr(i[0],i[1]);return nt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(nt.min()))return r}return Zn.newInvalidDocument(e)}}function T6(n){return new jge(n)}class $ge extends I6{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Wc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((s,o)=>Tt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=e6(this.cr.serializer,o);i=i.add(s.path.popLast());const l=CT(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=e6(this.cr.serializer,o.convertToNoDocument(nt.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function w6(n){return si(n,"remoteDocumentGlobal")}function Wd(n){return si(n,"remoteDocumentsV14")}function Qy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function C6(n,e){const t=e.documentKey.path.toArray();return[n,ET(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function D6(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Tt(t[s],r[s]),i)return i;return i=Tt(t.length,r.length),i||(i=Tt(t[t.length-2],r[r.length-2]),i||Tt(t[t.length-1],r[r.length-1]))}class Hge{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class A6{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&By(r.mutation,i,Ms.empty(),rr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const i=Ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Fy();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=xs();const o=Ly(),a=Ly();return t.forEach((c,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof zc)?s=s.insert(l.key,l):void 0!==h?(o.set(l.key,h.mutation.getFieldMask()),By(h.mutation,l,h.mutation.getFieldMask(),rr.now())):o.set(l.key,Ms.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var g;return a.set(l,new Hge(h,null!==(g=o.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Ly();let i=new Kn((o,a)=>o-a),s=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let h=r.get(c)||Ms.empty();h=a.applyToLocalView(l,h),r.set(c,h);const g=(i.get(a.batchId)||Ot()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,g=m8();h.forEach(_=>{if(!s.has(_)){const v=w8(t.get(_),r.get(_));null!==v&&g.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,g))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return He.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):JM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):J.resolve(Ga());let a=-1,c=s;return o.next(l=>J.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ot())).next(h=>({batchId:a,changes:g8(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(r=>{let i=Fy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Fy();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,c=>{const l=(g=t,_=c.child(s),new Gc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{const h=l.getKey();null===o.get(h)&&(o=o.insert(h,Zn.newInvalidDocument(h)))});let a=Fy();return o.forEach((c,l)=>{const h=s.get(c);void 0!==h&&By(h.mutation,l,Ms.empty(),rr.now()),ky(t,l)&&(a=a.insert(c,l))}),a})}}class Gge{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return J.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Nr(i.createTime)}),J.resolve();var i}getNamedQuery(e,t){return J.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:dx(i.bundledQuery),readTime:Nr(i.readTime)}),J.resolve();var i}}class Wge{constructor(){this.overlays=new Kn(He.comparator),this.Ir=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ga();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=Ga(),s=t.length+1,o=new He(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kn((l,h)=>l-h);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=Ga(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Ga(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return J.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ix(t,r));let s=this.Ir.get(t);void 0===s&&(s=Ot(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class zge{constructor(){this.sessionToken=_r.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}class yx{constructor(){this.Tr=new Pn(bi.Er),this.dr=new Pn(bi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new bi(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new bi(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new He(new zt([])),r=new bi(t,e),i=new bi(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new He(new zt([])),r=new bi(t,e),i=new bi(t,e+1);let s=Ot();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new bi(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class bi{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return He.comparator(e.key,t.key)||Tt(e.wr,t.wr)}static Ar(e,t){return Tt(e.wr,t.wr)||He.comparator(e.key,t.key)}}class qge{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pn(bi.Er)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new nx(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new bi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,t){return J.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bi(t,0),i=new bi(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(Tt);return t.forEach(i=>{const s=new bi(i,0),o=new bi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;He.isDocumentKey(s)||(s=s.child(""));const o=new bi(new He(s),0);let a=new Pn(Tt);return this.br.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),J.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Xe(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return J.forEach(t.mutations,i=>{const s=new bi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new bi(t,0),i=this.br.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return J.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kge{constructor(e){this.Mr=e,this.docs=new Kn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let r=xs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=xs();const o=t.path,a=new He(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||UM(wG(h),r)<=0||(i.has(h.key)||ky(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Je()}Or(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Qge(this)}getSize(e){return J.resolve(this.size)}}class Qge extends I6{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Yge{constructor(e){this.persistence=e,this.Nr=new Wc(t=>Fd(t),Py),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yx,this.targetCount=0,this.kr=Gd.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),J.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Gd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Kn(t),J.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.Br.containsKey(t))}}class vx{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ao(0),this.Kr=!1,this.Kr=!0,this.$r=new zge,this.referenceDelegate=e(this),this.Ur=new Yge(this),this.indexManager=new kge,this.remoteDocumentCache=new Kge(r=>this.referenceDelegate.Wr(r)),this.serializer=new Z8(t),this.Gr=new Gge(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wge,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new qge(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new Jge(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Jge extends DG{constructor(e){super(),this.currentSequenceNumber=e}}class ST{constructor(e){this.persistence=e,this.Jr=new yx,this.Yr=null}static Zr(e){return new ST(e)}get Xr(){if(this.Yr)return this.Yr;throw Je()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),J.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const i=He.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,nt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return J.or([()=>J.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Xge{constructor(e){this.serializer=e}O(e,t,r,i){const s=new rT("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MG,{unique:!0}),c.createObjectStore("documentMutations"),S6(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=J.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),S6(e)),o=o.next(()=>function(c){const l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nt.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MG,{unique:!0});const g=l.store("mutations"),_=h.map(v=>g.put(v));return J.waitFor(_)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const l=c.createObjectStore("documentOverlays",{keyPath:kpe});l.createIndex("collectionPathOverlayIndex",Fpe,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Lpe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:wpe});l.createIndex("documentKeyIndex",Cpe),l.createIndex("collectionGroupIndex",Dpe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Mpe}).createIndex("sequenceNumberIndex",xpe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Ppe}).createIndex("documentKeyIndex",Ope,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=CT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>J.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>J.forEach(a,c=>{Xe(c.userId===s.userId);const l=jd(this.serializer,c);return g6(e,s.userId,l).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new zt(o),l=[0,Yi(c)];s.push(t.get(l).next(h=>h?J.resolve():t.put({targetId:0,path:Yi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>J.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Npe});const r=t.store("collectionParents"),i=new _x,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Yi(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new zt(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{const h=$a(a);return s(h.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Wy(i),o=t6(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(g=o,g.document?new He(zt.fromString(g.document.name).popFirst(5)):g.noDocument?He.fromSegments(g.noDocument.path):g.unknownDocument?He.fromSegments(g.unknownDocument.path):Je()).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>J.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=T6(this.serializer),s=new vx(ST.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var l;let h=null!==(l=a.get(c.userId))&&void 0!==l?l:Ot();jd(this.serializer,c).keys().forEach(g=>h=h.add(g)),a.set(c.userId,h)}),J.forEach(a,(c,l)=>{const h=new yi(l),g=IT.lt(this.serializer,h),_=s.getIndexManager(h),v=DT.lt(h,this.serializer,_,s.referenceDelegate);return new A6(i,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new GM(t,ao.oe),c).next()})})}}function S6(n){n.createObjectStore("targetDocuments",{keyPath:Spe}).createIndex("documentTargetsIndex",Rpe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ape,{unique:!0}),n.createObjectStore("targetGlobal")}const bx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ex{constructor(e,t,r,i,s,o,a,c,l,h,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=g,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!Ex.D())throw new Ie(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uge(this,i),this.Ai=t+"main",this.serializer=new Z8(c),this.Ri=new ja(this.Ai,this.hi,new Xge(this.serializer)),this.$r=new Rge,this.Ur=new Lge(this.referenceDelegate,this.serializer),this.remoteDocumentCache=T6(this.serializer),this.Gr=new Sge,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===h&&Rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(ie.FAILED_PRECONDITION,bx);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ao(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,S.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,S.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,S.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>NT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Xl(e))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Yy(e).get("owner").next(t=>J.resolve(this.vi(t)))}Ci(e){return NT(e).delete(this.clientId)}Fi(){var e=this;return(0,S.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=si(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return J.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?J.resolve(!0):Yy(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ie(ie.FAILED_PRECONDITION,bx);return!1}}return!(!this.networkEnabled||!this.inForeground)||NT(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,S.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new GM(t,ao.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>NT(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return DT.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fge(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return IT.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ae("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(c=this.hi)?Upe:16===c?Bpe:15===c?HM:14===c?kG:13===c?OG:12===c?Vpe:11===c?PG:void Je();var c;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new GM(a,this.Qr?this.Qr.next():ao.oe),"readwrite-primary"===t?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ie(ie.FAILED_PRECONDITION,CG);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Yy(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(ie.FAILED_PRECONDITION,bx)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yy(e).put("owner",t)}static D(){return ja.D()}bi(e){const t=Yy(e);return t.get("owner").next(r=>this.vi(r)?(Ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,bn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Ae("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Rr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yy(n){return si(n,"owner")}function NT(n){return si(n,"clientMetadata")}function Ix(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Tx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ot(),i=Ot();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tx(e,t.fromCache,r,i)}}class Zge{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class R6{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,bn.nr)()?8:AG((0,bn.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Zge;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ip()<=Ua.$b.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Mp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Ip()<=Ua.$b.DEBUG&&Ae("QueryEngine","Query:",Mp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ip()<=Ua.$b.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Mp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(t))):J.resolve())}Yi(e,t){if(c8(t))return J.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=pT(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ot(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,pT(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return c8(t)||i.isEqual(nt.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?J.resolve(null):(Ip()<=Ua.$b.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mp(t)),this.rs(e,o,t,TG(i,-1)).next(a=>a))})}ts(e,t){let r=new Pn(f8(e));return t.forEach((i,s)=>{ky(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Ip()<=Ua.$b.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Mp(t)),this.Ji.getDocumentsMatchingQuery(e,t,oo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class eme{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Kn(Tt),this._s=new Wc(s=>Fd(s),Py),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function N6(n,e,t,r){return new eme(n,e,t,r)}function M6(n,e){return wx.apply(this,arguments)}function wx(){return wx=(0,S.A)(function*(n,e){const t=Ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ot();for(const l of i){o.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of s){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})}),wx.apply(this,arguments)}function x6(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function P6(n,e,t){let r=Ot(),i=Ot();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=xs();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(nt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function rme(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $p(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new qc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Hp(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,S.A)(function*(n,e,t){const r=Ve(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xl(o))throw o;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}),Cx.apply(this,arguments)}function MT(n,e,t){const r=Ve(n);let i=nt.min(),s=Ot();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){const g=Ve(c),_=g._s.get(h);return void 0!==_?J.resolve(g.os.get(_)):g.Ur.getTargetData(l,h)}(r,o,Ji(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:nt.min(),t?s:Ot())).next(a=>(F6(r,h8(e),a),{documents:a,Ts:s})))}function O6(n,e){const t=Ve(n),r=Ve(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function k6(n,e){const t=Ve(n),r=t.us.get(e)||nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,TG(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(F6(t,e,i),i))}function F6(n,e,t){let r=n.us.get(e)||nt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function Dx(){return Dx=(0,S.A)(function*(n,e,t,r){const i=Ve(n);let s=Ot(),o=xs();for(const l of t){const h=e.Es(l.metadata.name);l.document&&(s=s.add(h));const g=e.ds(l);g.setReadTime(e.As(l.metadata.readTime)),o=o.insert(h,g)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield $p(i,(h=r,Ji(Rp(zt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>P6(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))}),Dx.apply(this,arguments)}function sme(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,S.A)(function*(n,e,t=Ot()){const r=yield $p(n,Ji(dx(e.bundledQuery))),i=Ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Nr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(_r.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}),Ax.apply(this,arguments)}function L6(n,e){return`firestore_clients_${n}_${e}`}function V6(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sx(n,e){return`firestore_targets_${n}_${e}`}class xT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Ie(i.error.code,i.error.message))),o?new xT(e,t,i.state,s):(Rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jy{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ie(r.error.code,r.error.message))),s?new Jy(e,r.state,i):(Rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=ZM();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=RG(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new PT(e,s):(Rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Rx{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Rx(t.clientId,t.onlineState):(Rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nx{constructor(){this.activeTargetIds=ZM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mx{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Kn(Tt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=L6(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Nx),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,S.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(L6(e.persistenceKey,i));if(s){const o=PT.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Sx(this.persistenceKey,e));if(i){const s=Jy.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sx(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ae("SharedClientState","READ",e,t),t}setItem(e,t){Ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ae("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,S.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ao.oe;if(null!=o)try{const c=JSON.parse(o);Xe("number"==typeof c),a=c}catch(c){Rr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ao.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new xT(this.currentUser,e,t,r),s=V6(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=V6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=Sx(this.persistenceKey,e),s=new Jy(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return PT.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return xT.Rs(new yi(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Jy.Rs(i,t)}Ls(e){return Rx.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,S.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=ZM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class B6{constructor(){this.so=new Nx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Nx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ome{_o(e){}shutdown(){}}class U6{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OT=null;function xx(){return null===OT?OT=268435456+Math.round(2147483648*Math.random()):OT++,"0x"+OT.toString(16)}const ame={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cme{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Zi="WebChannelConnection";class lme extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=xx(),c=this.xo(t,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(h=>(Ae("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw so("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ep,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${ame[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=xx();return new Promise((o,a)=>{const c=new fG;c.setWithCredentials(!0),c.listenOnce(pG.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nT.NO_ERROR:const h=c.getResponseJson();Ae(Zi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case nT.TIMEOUT:Ae(Zi,`RPC '${e}' ${s} timed out`),a(new Ie(ie.DEADLINE_EXCEEDED,"Request time out"));break;case nT.HTTP_ERROR:const g=c.getStatus();if(Ae(Zi,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const T=function(A){const k=A.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(k)>=0?k:ie.UNKNOWN}(v.status);a(new Ie(T,v.message))}else a(new Ie(ie.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Ie(ie.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Ae(Zi,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);Ae(Zi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){const i=xx(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_G(),a=mG(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=s.join("");Ae(Zi,`Creating RPC '${e}' stream ${i}: ${h}`,c);const g=o.createWebChannel(h,c);let _=!1,v=!1;const T=new cme({Io:A=>{v?Ae(Zi,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(Ae(Zi,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),Ae(Zi,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},To:()=>g.close()}),C=(A,k,P)=>{A.listen(k,q=>{try{P(q)}catch(ne){setTimeout(()=>{throw ne},0)}})};return C(g,Ty.EventType.OPEN,()=>{v||(Ae(Zi,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),C(g,Ty.EventType.CLOSE,()=>{v||(v=!0,Ae(Zi,`RPC '${e}' stream ${i} transport closed`),T.So())}),C(g,Ty.EventType.ERROR,A=>{v||(v=!0,so(Zi,`RPC '${e}' stream ${i} transport errored:`,A),T.So(new Ie(ie.UNAVAILABLE,"The operation could not be completed")))}),C(g,Ty.EventType.MESSAGE,A=>{var k;if(!v){const P=A.data[0];Xe(!!P);const ne=P.error||(null===(k=P[0])||void 0===k?void 0:k.error);if(ne){Ae(Zi,`RPC '${e}' stream ${i} received error:`,ne);const me=ne.status;let we=function(O){const B=Gr[O];if(void 0!==B)return M8(B)}(me),F=ne.message;void 0===we&&(we=ie.INTERNAL,F="Unknown error status: "+me+" with message "+ne.message),v=!0,T.So(new Ie(we,F)),g.close()}else Ae(Zi,`RPC '${e}' stream ${i} received:`,P),T.bo(P)}}),C(a,gG.STAT_EVENT,A=>{A.stat===LM.PROXY?Ae(Zi,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===LM.NOPROXY&&Ae(Zi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function j6(){return typeof window<"u"?window:null}function kT(){return typeof document<"u"?document:null}function Xy(n){return new _ge(n,!0)}class Px{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class $6{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Px(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,S.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,S.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,S.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Ie(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,S.A)(function*(){e.state=0,e.start()}))}I_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ume extends $6{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function bge(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Je(),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Xe(void 0===h||"string"==typeof h),_r.fromBase64String(h||"")):(Xe(void 0===h||h instanceof Buffer||h instanceof Uint8Array),_r.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ie.UNKNOWN:M8(l.code);return new Ie(h,l.message||"")}(o);t=new F8(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Wa(n,r.document.name),s=Nr(r.document.updateTime),o=r.document.createTime?Nr(r.document.createTime):nt.min(),a=new xi({mapValue:{fields:r.document.fields}}),c=Zn.newFoundDocument(i,s,o,a);t=new vT(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Wa(n,r.document),s=r.readTime?Nr(r.readTime):nt.min(),o=Zn.newNoDocument(i,s);t=new vT([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Wa(n,r.document);t=new vT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Je();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new dge(i,s);t=new k8(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return nt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?nt.min():o.readTime?Nr(o.readTime):nt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=lx(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=hT(c)?{documents:q8(s,c)}:{query:bT(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=U8(s,o.resumeToken);const l=ox(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(nt.min())>0){a.readTime=Fp(s,o.snapshotVersion.toTimestamp());const l=ox(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function Ige(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Je()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=lx(this.serializer),t.removeTarget=e,this.a_(t)}}class dme extends $6{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function Ege(n,e){return n&&n.length>0?(Xe(void 0!==e),n.map(t=>function(i,s){let o=Nr(i.updateTime?i.updateTime:s);return o.isEqual(nt.min())&&(o=Nr(s)),new cge(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=lx(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gy(this.serializer,r))};this.a_(t)}}class hme extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ie(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,cx(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(ie.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,cx(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(ie.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fme{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rr(t),this.D_=!1):Ae("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class pme{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,S.A)(function*(){var c;lu(o)&&(Ae("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,S.A)(function*(h){const g=Ve(h);g.L_.add(4),yield Gp(g),g.q_.set("Unknown"),g.L_.delete(4),yield Zy(g)}),function l(h){return c.apply(this,arguments)})(o))}))}),this.q_=new fme(r,i)}}function Zy(n){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,S.A)(function*(n){if(lu(n))for(const e of n.B_)yield e(!0)}),Ox.apply(this,arguments)}function Gp(n){return kx.apply(this,arguments)}function kx(){return kx=(0,S.A)(function*(n){for(const e of n.B_)yield e(!1)}),kx.apply(this,arguments)}function FT(n,e){const t=Ve(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Vx(t)?Lx(t):qp(t).r_()&&Fx(t,e))}function Wp(n,e){const t=Ve(n),r=qp(t);t.N_.delete(e),r.r_()&&H6(t,e),0===t.N_.size&&(r.r_()?r.o_():lu(t)&&t.q_.set("Unknown"))}function Fx(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qp(n).A_(e)}function H6(n,e){n.Q_.xe(e),qp(n).R_(e)}function Lx(n){n.Q_=new fge({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),qp(n).start(),n.q_.v_()}function Vx(n){return lu(n)&&!qp(n).n_()&&n.N_.size>0}function lu(n){return 0===Ve(n).L_.size}function G6(n){n.Q_=void 0}function gme(n){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,S.A)(function*(n){n.q_.set("Online")}),Bx.apply(this,arguments)}function mme(n){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,S.A)(function*(n){n.N_.forEach((e,t)=>{Fx(n,e)})}),Ux.apply(this,arguments)}function _me(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,S.A)(function*(n,e){G6(n),Vx(n)?(n.q_.M_(e),Lx(n)):n.q_.set("Unknown")}),jx.apply(this,arguments)}function yme(n,e,t){return $x.apply(this,arguments)}function $x(){return $x=(0,S.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof F8&&2===e.state&&e.cause)try{yield(r=(0,S.A)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield LT(n,r)}else if(e instanceof vT?n.Q_.Ke(e):e instanceof k8?n.Q_.He(e):n.Q_.We(e),!t.isEqual(nt.min()))try{const r=yield x6(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(_r.EMPTY_BYTE_STRING,h.snapshotVersion)),H6(s,c);const g=new qc(h.target,c,l,h.sequenceNumber);Fx(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),yield LT(n,r)}var r}),$x.apply(this,arguments)}function LT(n,e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,S.A)(function*(n,e,t){if(!Xl(e))throw e;n.L_.add(1),yield Gp(n),n.q_.set("Offline"),t||(t=()=>x6(n.localStore)),n.asyncQueue.enqueueRetryable((0,S.A)(function*(){Ae("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Zy(n)}))}),Hx.apply(this,arguments)}function W6(n,e){return e().catch(t=>LT(n,t,e))}function zp(n){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,S.A)(function*(n){const e=Ve(n),t=uu(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;vme(e);)try{const i=yield rme(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,bme(e,i)}catch(i){yield LT(e,i)}z6(e)&&q6(e)}),Gx.apply(this,arguments)}function vme(n){return lu(n)&&n.O_.length<10}function bme(n,e){n.O_.push(e);const t=uu(n);t.r_()&&t.V_&&t.m_(e.mutations)}function z6(n){return lu(n)&&!uu(n).n_()&&n.O_.length>0}function q6(n){uu(n).start()}function Eme(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,S.A)(function*(n){uu(n).p_()}),Wx.apply(this,arguments)}function Ime(n){return zx.apply(this,arguments)}function zx(){return zx=(0,S.A)(function*(n){const e=uu(n);for(const t of n.O_)e.m_(t.mutations)}),zx.apply(this,arguments)}function Tme(n,e,t){return qx.apply(this,arguments)}function qx(){return qx=(0,S.A)(function*(n,e,t){const r=n.O_.shift(),i=rx.from(r,e,t);yield W6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield zp(n)}),qx.apply(this,arguments)}function wme(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,S.A)(function*(n,e){var t;e&&uu(n).V_&&(yield(t=(0,S.A)(function*(i,s){if(N8(a=s.code)&&a!==ie.ABORTED){const o=i.O_.shift();uu(i).s_(),yield W6(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield zp(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),z6(n)&&q6(n)}),Kx.apply(this,arguments)}function K6(n,e){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,S.A)(function*(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=lu(t);t.L_.add(3),yield Gp(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Zy(t)}),Qx.apply(this,arguments)}function Yx(n,e){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,S.A)(function*(n,e){const t=Ve(n);e?(t.L_.delete(2),yield Zy(t)):e||(t.L_.add(2),yield Gp(t),t.q_.set("Unknown"))}),Jx.apply(this,arguments)}function qp(n){return n.K_||(n.K_=function(t,r,i){const s=Ve(t);return s.w_(),new ume(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:gme.bind(null,n),Ro:mme.bind(null,n),mo:_me.bind(null,n),d_:yme.bind(null,n)}),n.B_.push(function(){var e=(0,S.A)(function*(t){t?(n.K_.s_(),Vx(n)?Lx(n):n.q_.set("Unknown")):(yield n.K_.stop(),G6(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function uu(n){return n.U_||(n.U_=function(t,r,i){const s=Ve(t);return s.w_(),new dme(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Eme.bind(null,n),mo:wme.bind(null,n),f_:Ime.bind(null,n),g_:Tme.bind(null,n)}),n.B_.push(function(){var e=(0,S.A)(function*(t){t?(n.U_.s_(),yield zp(n)):(yield n.U_.stop(),n.O_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class Xx{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Xx(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(n,e){if(Rr("AsyncQueue",`${e}: ${n}`),Xl(n))return new Ie(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Qp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=Fy(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new Qp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Q6{constructor(){this.W_=new Kn(He.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Je():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yp{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Yp(e,t,Qp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Cme{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Dme{constructor(){this.queries=Y6(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ve(t),s=i.queries;i.queries=Y6(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})}(this,new Ie(ie.ABORTED,"Firestore shutting down"))}}function Y6(){return new Wc(n=>d8(n),Oy)}function Zx(n,e){return eP.apply(this,arguments)}function eP(){return eP=(0,S.A)(function*(n,e){const t=Ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Cme,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Kp(o,`Initialization of query '${Mp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&rP(t)}),eP.apply(this,arguments)}function tP(n,e){return nP.apply(this,arguments)}function nP(){return nP=(0,S.A)(function*(n,e){const t=Ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),nP.apply(this,arguments)}function Ame(n,e){const t=Ve(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&rP(t)}function Sme(n,e,t){const r=Ve(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function rP(n){n.Y_.forEach(e=>{e.next()})}var iP,J6;(J6=iP||(iP={})).ea="default",J6.Cache="cache";class sP{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Yp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==iP.Cache}}class Rme{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class X6{constructor(e){this.serializer=e}Es(e){return Wa(this.serializer,e)}ds(e){return e.metadata.exists?z8(this.serializer,e.document,!1):Zn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Nr(e)}}class Nme{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Z6(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=zt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new X6(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Ot()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,S.A)(function*(){const t=yield function ime(n,e,t,r){return Dx.apply(this,arguments)}(e.localStore,new X6(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield sme(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function Z6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eW{constructor(e){this.key=e}}class tW{constructor(e){this.key=e}}class nW{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ot(),this.mutatedKeys=Ot(),this.Aa=f8(e),this.Ra=new Qp(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Q6,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const _=i.get(h),v=ky(this.query,g)?g:null,T=!!_&&this.mutatedKeys.has(_.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;_&&v?_.data.isEqual(v.data)?T!==C&&(r.track({type:3,doc:v}),A=!0):this.ga(_,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),A=!0):_&&!v&&(r.track({type:1,doc:_}),A=!0,(c||l)&&(a=!0)),A&&(v?(o=o.add(v),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,g)=>function(v,T){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return C(v)-C(T)}(h.type,g.type)||this.Aa(h.doc,g.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],c=0===this.da.size&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,0!==o.length||l?{snapshot:new Yp(this.query,e.Ra,s,o,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Q6,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ot(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new tW(r))}),this.da.forEach(r=>{e.has(r)||t.push(new eW(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ot();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Yp.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Mme{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xme{constructor(e){this.key=e,this.va=!1}}class Pme{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Wc(a=>d8(a),Oy),this.Ma=new Map,this.xa=new Set,this.Oa=new Kn(He.comparator),this.Na=new Map,this.La=new yx,this.Ba={},this.ka=new Map,this.qa=Gd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Ome(n,e){return oP.apply(this,arguments)}function oP(){return oP=(0,S.A)(function*(n,e,t=!0){const r=VT(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield rW(r,e,t,!0),i}),oP.apply(this,arguments)}function kme(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,S.A)(function*(n,e){const t=VT(n);yield rW(t,e,!0,!1)}),aP.apply(this,arguments)}function rW(n,e,t,r){return cP.apply(this,arguments)}function cP(){return cP=(0,S.A)(function*(n,e,t,r){const i=yield $p(n.localStore,Ji(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield lP(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&FT(n.remoteStore,i),a}),cP.apply(this,arguments)}function lP(n,e,t,r,i){return uP.apply(this,arguments)}function uP(){return uP=(0,S.A)(function*(n,e,t,r,i){n.Ka=(g,_,v)=>{return(T=(0,S.A)(function*(A,k,P,q){let ne=k.view.ma(P);ne.ns&&(ne=yield MT(A.localStore,k.query,!1).then(({documents:R})=>k.view.ma(R,ne)));const me=q&&q.targetChanges.get(k.targetId),we=q&&null!=q.targetMismatches.get(k.targetId),F=k.view.applyChanges(ne,A.isPrimaryClient,me,we);return EP(A,k.targetId,F.wa),F.snapshot}),function C(A,k,P,q){return T.apply(this,arguments)})(n,g,_,v);var T};const s=yield MT(n.localStore,e,!0),o=new nW(e,s.Ts),a=o.ma(s.documents),c=$y.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,c);EP(n,t,l.wa);const h=new Mme(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot}),uP.apply(this,arguments)}function Fme(n,e,t){return dP.apply(this,arguments)}function dP(){return dP=(0,S.A)(function*(n,e,t){const r=Ve(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Oy(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Wp(r.remoteStore,i.targetId),Jp(r,i.targetId)}).catch(Jl))):(Jp(r,i.targetId),yield Hp(r.localStore,i.targetId,!0))}),dP.apply(this,arguments)}function Lme(n,e){return hP.apply(this,arguments)}function hP(){return hP=(0,S.A)(function*(n,e){const t=Ve(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wp(t.remoteStore,r.targetId))}),hP.apply(this,arguments)}function fP(){return fP=(0,S.A)(function*(n,e,t){const r=xP(n);try{const i=yield function(o,a){const c=Ve(o),l=rr.now(),h=a.reduce((v,T)=>v.add(T.key),Ot());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=xs(),C=Ot();return c.cs.getEntries(v,h).next(A=>{T=A,T.forEach((k,P)=>{P.isValidDocument()||(C=C.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,T)).next(A=>{g=A;const k=[];for(const P of a){const q=uge(P,g.get(P.key).overlayedDocument);null!=q&&k.push(new zc(P.key,q,QG(q.value.mapValue),sr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,k,a)}).next(A=>{_=A;const k=A.applyToLocalDocumentSet(g,C);return c.documentOverlayCache.saveOverlays(v,A.batchId,k)})}).then(()=>({batchId:_.batchId,changes:g8(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Kn(Tt)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Kc(r,i.changes),yield zp(r.remoteStore)}catch(i){const s=Kp(i,"Failed to persist write");t.reject(s)}}),fP.apply(this,arguments)}function iW(n,e){return pP.apply(this,arguments)}function pP(){return pP=(0,S.A)(function*(n,e){const t=Ve(n);try{const r=yield function nme(n,e){const t=Ve(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,g)=>{const _=i.get(g);if(!_)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,g)));let v=_.withSequenceNumber(s.currentSequenceNumber);var C,A,k;null!==e.targetMismatches.get(g)?v=v.withResumeToken(_r.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(g,v),A=v,k=h,(0===(C=_).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,v))});let c=xs(),l=Ot();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(P6(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(nt.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Xe(o.va):i.removedDocuments.size>0&&(Xe(o.va),o.va=!1))}),yield Kc(t,r,e)}catch(r){yield Jl(r)}}),pP.apply(this,arguments)}function sW(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Ve(o);c.onlineState=a;let l=!1;c.queries.forEach((h,g)=>{for(const _ of g.j_)_.Z_(a)&&(l=!0)}),l&&rP(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bme(n,e,t){return gP.apply(this,arguments)}function gP(){return gP=(0,S.A)(function*(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Kn(He.comparator);o=o.insert(s,Zn.newNoDocument(s,nt.min()));const a=Ot().add(s),c=new jy(nt.min(),new Map,new Kn(Tt),o,a);yield iW(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),IP(r)}else yield Hp(r.localStore,e,!1).then(()=>Jp(r,e,t)).catch(Jl)}),gP.apply(this,arguments)}function Ume(n,e){return mP.apply(this,arguments)}function mP(){return mP=(0,S.A)(function*(n,e){const t=Ve(n),r=e.batch.batchId;try{const i=yield function tme(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){const g=l.batch,_=g.keys();let v=J.resolve();return _.forEach(T=>{v=v.next(()=>h.getEntry(c,T)).next(C=>{const A=l.docVersions.get(T);Xe(null!==A),C.version.compareTo(A)<0&&(g.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),h.addEntry(C)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ot();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);bP(t,r,null),vP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Kc(t,i)}catch(i){yield Jl(i)}}),mP.apply(this,arguments)}function jme(n,e,t){return _P.apply(this,arguments)}function _P(){return _P=(0,S.A)(function*(n,e,t){const r=Ve(n);try{const i=yield function(o,a){const c=Ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(g=>(Xe(null!==g),h=g.keys(),c.mutationQueue.removeMutationBatch(l,g))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);bP(r,e,t),vP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Kc(r,i)}catch(i){yield Jl(i)}}),_P.apply(this,arguments)}function yP(){return yP=(0,S.A)(function*(n,e){const t=Ve(n);lu(t.remoteStore)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ve(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Kp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),yP.apply(this,arguments)}function vP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function bP(n,e,t){const r=Ve(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Jp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||oW(n,r)})}function oW(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Wp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),IP(n))}function EP(n,e,t){for(const r of t)r instanceof eW?(n.La.addReference(r.key,e),Hme(n,r)):r instanceof tW?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||oW(n,r.key)):Je()}function Hme(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.xa.add(r),IP(n))}function IP(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new He(zt.fromString(e)),r=n.qa.next();n.Na.set(r,new xme(t)),n.Oa=n.Oa.insert(t,r),FT(n.remoteStore,new qc(Ji(Rp(t.path)),r,"TargetPurposeLimboResolution",ao.oe))}}function Kc(n,e,t){return TP.apply(this,arguments)}function TP(){return TP=(0,S.A)(function*(n,e,t){const r=Ve(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const g=l?!l.fromCache:null===(h=t?.targetChanges.get(c.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(l){i.push(l);const g=Tx.Wi(c.targetId,l);s.push(g)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,S.A)(function*(l,h){const g=Ve(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>J.forEach(h,v=>J.forEach(v.$i,T=>g.persistence.referenceDelegate.addReference(_,v.targetId,T)).next(()=>J.forEach(v.Ui,T=>g.persistence.referenceDelegate.removeReference(_,v.targetId,T)))))}catch(_){if(!Xl(_))throw _;Ae("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const v=_.targetId;if(!_.fromCache){const T=g.os.get(v),A=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);g.os=g.os.insert(v,A)}}}),function c(l,h){return a.apply(this,arguments)})(r.localStore,s))}),TP.apply(this,arguments)}function Gme(n,e){return wP.apply(this,arguments)}function wP(){return wP=(0,S.A)(function*(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=yield M6(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(c=>{c.reject(new Ie(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kc(t,r.hs)}var s}),wP.apply(this,arguments)}function Wme(n,e){const t=Ve(n),r=t.Na.get(e);if(r&&r.va)return Ot().add(r.key);{let i=Ot();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function zme(n,e){return CP.apply(this,arguments)}function CP(){return CP=(0,S.A)(function*(n,e){const t=Ve(n),r=yield MT(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&EP(t,e.targetId,i.wa),i}),CP.apply(this,arguments)}function qme(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,S.A)(function*(n,e){const t=Ve(n);return k6(t.localStore,e).then(r=>Kc(t,r))}),DP.apply(this,arguments)}function Kme(n,e,t,r){return AP.apply(this,arguments)}function AP(){return AP=(0,S.A)(function*(n,e,t,r){const i=Ve(n),s=yield function(a,c){const l=Ve(a),h=Ve(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Mn(g,c).next(_=>_?l.localDocuments.getDocuments(g,_):J.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield zp(i.remoteStore):"acknowledged"===t||"rejected"===t?(bP(i,e,r||null),vP(i,e),c=e,Ve(Ve(i.localStore).mutationQueue).On(c)):Je(),yield Kc(i,s)):Ae("SyncEngine","Cannot apply mutation batch with id: "+e)}),AP.apply(this,arguments)}function SP(){return SP=(0,S.A)(function*(n,e){const t=Ve(n);if(VT(t),xP(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield aW(t,r.toArray());t.Qa=!0,yield Yx(t.remoteStore,!0);for(const s of i)FT(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Jp(t,o),Hp(t.localStore,o,!0))),Wp(t.remoteStore,o)}),yield i,yield aW(t,r),function(o){const a=Ve(o);a.Na.forEach((c,l)=>{Wp(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Kn(He.comparator)}(t),t.Qa=!1,yield Yx(t.remoteStore,!1)}}),SP.apply(this,arguments)}function aW(n,e,t){return RP.apply(this,arguments)}function RP(){return RP=(0,S.A)(function*(n,e,t){const r=Ve(n),i=[],s=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&0!==c.length){a=yield $p(r.localStore,Ji(c[0]));for(const l of c){const h=r.Fa.get(l),g=yield zme(r,h);g.snapshot&&s.push(g.snapshot)}}else{const l=yield O6(r.localStore,o);a=yield $p(r.localStore,l),yield lP(r,cW(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}),RP.apply(this,arguments)}function cW(n){return a8(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Yme(n){return t=Ve(n).localStore,Ve(Ve(t).persistence).Qi();var t}function Jme(n,e,t,r){return NP.apply(this,arguments)}function NP(){return NP=(0,S.A)(function*(n,e,t,r){const i=Ve(n);if(i.Qa)return void Ae("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield k6(i.localStore,h8(s[0])),a=jy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_r.EMPTY_BYTE_STRING);yield Kc(i,o,a);break}case"rejected":yield Hp(i.localStore,e,!0),Jp(i,e,r);break;default:Je()}}),NP.apply(this,arguments)}function Xme(n,e,t){return MP.apply(this,arguments)}function MP(){return MP=(0,S.A)(function*(n,e,t){const r=VT(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ae("SyncEngine","Adding an already active target "+i);continue}const s=yield O6(r.localStore,i),o=yield $p(r.localStore,s);yield lP(r,cW(s),o.targetId,!1,o.resumeToken),FT(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Hp(r.localStore,i,!1).then(()=>{Wp(r.remoteStore,i),Jp(r,i)}).catch(Jl))}}),MP.apply(this,arguments)}function VT(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iW.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wme.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bme.bind(null,e),e.Ca.d_=Ame.bind(null,e.eventManager),e.Ca.$a=Sme.bind(null,e.eventManager),e}function xP(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ume.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jme.bind(null,e),e}let Xp=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,S.A)(function*(){r.serializer=Xy(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return N6(this.persistence,new R6,t.initialUser,this.serializer)}Ga(t){return new vx(ST.Zr,this.serializer)}Wa(t){return new B6}terminate(){var t=this;return(0,S.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class PP extends Xp{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,S.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield xP(r.Ja.syncEngine),yield zp(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return N6(this.persistence,new R6,e.initialUser,this.serializer)}ja(e,t){return new b6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new Epe(t,this.persistence);return new bpe(e.asyncQueue,r)}Ga(e){const t=Ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new Ex(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,j6(),kT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new B6}}class lW extends PP{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,S.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof Mx&&(r.sharedClientState.syncEngine={no:Kme.bind(null,i),ro:Jme.bind(null,i),io:Xme.bind(null,i),Qi:Yme.bind(null,i),eo:qme.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,S.A)(function*(o){yield function Qme(n,e){return SP.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=j6();if(!Mx.D(t))throw new Ie(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let Zp=(()=>{class n{initialize(t,r){var i=this;return(0,S.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>sW(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=Gme.bind(null,i.syncEngine),yield Yx(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Dme}createDatastore(t){const r=Xy(t.databaseInfo.databaseId),i=new lme(t.databaseInfo);return new hme(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>sW(this.syncEngine,r,0),c=U6.D()?new U6:new ome,new pme(i,s,o,a,c);var i,s,o,a,c}createSyncEngine(t,r){return function(s,o,a,c,l,h,g){const _=new Pme(s,o,a,c,l,h);return g&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,S.A)(function*(){var r,i,s;yield(s=(0,S.A)(function*(a){const c=Ve(a);Ae("RemoteStore","RemoteStore shutting down."),c.L_.add(5),yield Gp(c),c.k_.shutdown(),c.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function uW(n,e=10240){let t=0;return{read:()=>(0,S.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,S.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class BT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class t_e{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new vi,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,S.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,S.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,S.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new Rme(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,S.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,S.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,S.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class n_e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,S.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ie(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,S.A)(function*(o,a){const c=Ve(o),l={documents:a.map(v=>Hy(c.serializer,v))},h=yield c.Lo("BatchGetDocuments",c.serializer.databaseId,zt.emptyPath(),l,a.length),g=new Map;h.forEach(v=>{const T=function vge(n,e){return"found"in e?function(r,i){Xe(!!i.found);const s=Wa(r,i.found.name),o=Nr(i.found.updateTime),a=i.found.createTime?Nr(i.found.createTime):nt.min(),c=new xi({mapValue:{fields:i.found.fields}});return Zn.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){Xe(!!i.missing),Xe(!!i.readTime);const s=Wa(r,i.missing),o=Nr(i.readTime);return Zn.newNoDocument(s,o)}(n,e):Je()}(c.serializer,v);g.set(T.key.toString(),T)});const _=[];return a.forEach(v=>{const T=g.get(v.toString());Xe(!!T),_.push(T)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,S.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=He.fromPath(i);e.mutations.push(new tx(s,e.precondition(s)))}),yield(r=(0,S.A)(function*(s,o){const a=Ve(s),c={writes:o.map(l=>Gy(a.serializer,l))};yield a.Mo("Commit",a.serializer.databaseId,zt.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nt.min())?sr.exists(!1):sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nt.min()))throw new Ie(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class r_e{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Px(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,S.A)(function*(){const t=new n_e(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Dy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!N8(t)}return!1}}class i_e{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=EG.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,S.A)(function*(c){Ae("FirestoreClient","Received user=",c.uid),yield o.authCredentialListener(c),o.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Ae("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,S.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Kp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function OP(n,e){return kP.apply(this,arguments)}function kP(){return kP=(0,S.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,S.A)(function*(s){r.isEqual(s)||(yield M6(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),kP.apply(this,arguments)}function dW(n,e){return FP.apply(this,arguments)}function FP(){return FP=(0,S.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LP(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>K6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>K6(e.remoteStore,i)),n._onlineComponents=e}),FP.apply(this,arguments)}function LP(n){return VP.apply(this,arguments)}function VP(){return VP=(0,S.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield OP(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;so("Error using user provided cache. Falling back to memory cache: "+e),yield OP(n,new Xp)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),yield OP(n,new Xp);var i;return n._offlineComponents}),VP.apply(this,arguments)}function UT(n){return BP.apply(this,arguments)}function BP(){return BP=(0,S.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield dW(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),yield dW(n,new Zp))),n._onlineComponents}),BP.apply(this,arguments)}function hW(n){return LP(n).then(e=>e.persistence)}function eg(n){return LP(n).then(e=>e.localStore)}function fW(n){return UT(n).then(e=>e.remoteStore)}function UP(n){return UT(n).then(e=>e.syncEngine)}function tg(n){return jP.apply(this,arguments)}function jP(){return jP=(0,S.A)(function*(n){const e=yield UT(n),t=e.eventManager;return t.onListen=Ome.bind(null,e.syncEngine),t.onUnlisten=Fme.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kme.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lme.bind(null,e.syncEngine),t}),jP.apply(this,arguments)}function gW(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function(s,o,a,c,l){const h=new BT({next:_=>{h.Za(),o.enqueueAndForget(()=>tP(s,g));const v=_.docs.has(a);!v&&_.fromCache?l.reject(new Ie(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&"server"===c.source?l.reject(new Ie(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(_)},error:_=>l.reject(_)}),g=new sP(Rp(a.path),h,{includeMetadataChanges:!0,_a:!0});return Zx(s,g)}(yield tg(n),n.asyncQueue,e,t,r)})),r.promise}function mW(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function(s,o,a,c,l){const h=new BT({next:_=>{h.Za(),o.enqueueAndForget(()=>tP(s,g)),_.fromCache&&"server"===c.source?l.reject(new Ie(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(_)},error:_=>l.reject(_)}),g=new sP(a,h,{includeMetadataChanges:!0,_a:!0});return Zx(s,g)}(yield tg(n),n.asyncQueue,e,t,r)})),r.promise}function _W(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const yW=new Map;function $P(n,e,t){if(!t)throw new Ie(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vW(n,e,t,r){if(!0===e&&!0===r)throw new Ie(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bW(n){if(!He.isDocumentKey(n))throw new Ie(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EW(n){if(He.isDocumentKey(n))throw new Ie(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Je()}function $t(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jT(n);throw new Ie(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IW(n,e){if(e<=0)throw new Ie(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class TW{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=_W(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ie(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ev{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TW({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TW(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new cpe;switch(r.type){case"firstParty":return new hpe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,S.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=yW.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),yW.delete(t),r.terminate())}(this),Promise.resolve()}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class za extends Pi{constructor(e,t,r){super(e,t,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new He(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function CW(n,e,...t){if(n=(0,bn.Ku)(n),$P("collection","path",e),n instanceof ev){const r=zt.fromString(e,...t);return EW(r),new za(n,null,r)}{if(!(n instanceof er||n instanceof za))throw new Ie(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return EW(r),new za(n.firestore,null,r)}}function $T(n,e,...t){if(n=(0,bn.Ku)(n),1===arguments.length&&(e=EG.newId()),$P("doc","path",e),n instanceof ev){const r=zt.fromString(e,...t);return bW(r),new er(n,null,new He(r))}{if(!(n instanceof er||n instanceof za))throw new Ie(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(zt.fromString(e,...t));return bW(r),new er(n.firestore,n instanceof za?n.converter:null,new He(r))}}function DW(n,e){return n=(0,bn.Ku)(n),e=(0,bn.Ku)(e),(n instanceof er||n instanceof za)&&(e instanceof er||e instanceof za)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function HP(n,e){return n=(0,bn.Ku)(n),e=(0,bn.Ku)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&Oy(n._query,e._query)&&n.converter===e.converter}class AW{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Px(this,"async_queue_retry"),this.Vu=()=>{const r=kT();r&&Ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=kT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=kT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new vi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,S.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Xl(t))throw t;Ae("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Rr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Xx.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Je()}verifyOperationInProgress(){}wu(){var e=this;return(0,S.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function GP(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class __e{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends ev{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new AW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,S.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new AW(t),e._firestoreClient=void 0,yield t}})()}}function or(n){if(n._terminated)throw new Ie(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SW(n),n._firestoreClient}function SW(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Hpe(n._databaseId,c,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_W(h.experimentalLongPollingOptions),h.useFetchStreams));var c,h;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new i_e(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function WP(){return WP=(0,S.A)(function*(n){so("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();RW(n,Zp.provider,{build:t=>new lW(t,e.cacheSizeBytes)})}),WP.apply(this,arguments)}function RW(n,e,t){if((n=$t(n,Bn))._firestoreClient||n._terminated)throw new Ie(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ie(ie.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},SW(n)}class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(_r.fromBase64String(e))}catch(t){throw new Ie(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zd{constructor(e){this._methodName=e}}class HT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}class GT{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const S_e=/^__.*__$/;class R_e{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new zc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Op(e,this.data,t,this.fieldTransforms)}}class NW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class WT{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new WT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return KT(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(MW(this.Cu)&&S_e.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class N_e{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xy(e)}Qu(e,t,r,i=!1){return new WT({Cu:e,methodName:t,qu:r,path:Xn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qd(n){const e=n._freezeSettings(),t=Xy(n._databaseId);return new N_e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zT(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);XP("Data must be an object, but it was:",o,r);const a=OW(r,o);let c,l;if(s.merge)c=new Ms(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const _=rv(e,g,t);if(!o.contains(_))throw new Ie(ie.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);FW(h,_)||h.push(_)}c=new Ms(h),l=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,l=o.fieldTransforms;return new R_e(new xi(a),c,l)}class nv extends zd{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nv}}function xW(n,e,t){return new WT({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zP extends zd{_toFieldTransform(e){return new Vy(e.path,new xp)}isEqual(e){return e instanceof zP}}class qP extends zd{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=xW(this,e,!0),r=this.Ku.map(s=>Kd(s,t)),i=new Ld(r);return new Vy(e.path,i)}isEqual(e){return e instanceof qP&&(0,bn.bD)(this.Ku,e.Ku)}}class KP extends zd{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=xW(this,e,!0),r=this.Ku.map(s=>Kd(s,t)),i=new Vd(r);return new Vy(e.path,i)}isEqual(e){return e instanceof KP&&(0,bn.bD)(this.Ku,e.Ku)}}class QP extends zd{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Pp(e.serializer,y8(e.serializer,this.$u));return new Vy(e.path,t)}isEqual(e){return e instanceof QP&&this.$u===e.$u}}function YP(n,e,t,r){const i=n.Qu(1,e,t);XP("Data must be an object, but it was:",i,r);const s=[],o=xi.empty();Zl(r,(c,l)=>{const h=qT(e,c,t);l=(0,bn.Ku)(l);const g=i.Nu(h);if(l instanceof nv)s.push(h);else{const _=Kd(l,g);null!=_&&(s.push(h),o.set(h,_))}});const a=new Ms(s);return new NW(o,a,i.fieldTransforms)}function JP(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[rv(e,r,t)],c=[i];if(s.length%2!=0)throw new Ie(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(rv(e,s[_])),c.push(s[_+1]);const l=[],h=xi.empty();for(let _=a.length-1;_>=0;--_)if(!FW(l,a[_])){const v=a[_];let T=c[_];T=(0,bn.Ku)(T);const C=o.Nu(v);if(T instanceof nv)l.push(v);else{const A=Kd(T,C);null!=A&&(l.push(v),h.set(v,A))}}const g=new Ms(l);return new NW(h,g,o.fieldTransforms)}function PW(n,e,t,r=!1){return Kd(t,n.Qu(r?4:3,e))}function Kd(n,e){if(kW(n=(0,bn.Ku)(n)))return XP("Unsupported field value:",e,n),OW(n,e);if(n instanceof zd)return function(r,i){if(!MW(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Kd(a,i.Lu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,bn.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return y8(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=rr.fromDate(r);return{timestampValue:Fp(i.serializer,s)}}if(r instanceof rr){const s=new rr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fp(i.serializer,s)}}if(r instanceof HT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qa)return{bytesValue:U8(i.serializer,r._byteString)};if(r instanceof er){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ax(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof GT)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if("number"!=typeof c)throw a.Bu("VectorValues must only contain numeric values.");return ex(a.serializer,c)})}}}}};var a;throw i.Bu(`Unsupported field value: ${jT(r)}`)}(n,e)}function OW(n,e){const t={};return VG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zl(n,(r,i)=>{const s=Kd(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function kW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof HT||n instanceof qa||n instanceof er||n instanceof zd||n instanceof GT)}function XP(n,e,t){if(!kW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=jT(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function rv(n,e,t){if((e=(0,bn.Ku)(e))instanceof Qc)return e._internalPath;if("string"==typeof e)return qT(n,e);throw KT("Field path arguments must be of type string or ",n,!1,void 0,t)}const M_e=new RegExp("[~\\*/\\[\\]]");function qT(n,e,t){if(e.search(M_e)>=0)throw KT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw KT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function KT(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ie(ie.INVALID_ARGUMENT,a+n+c)}function FW(n,e){return n.some(t=>t.isEqual(e))}class iv{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new x_e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class x_e extends iv{data(){return super.data()}}function QT(n,e){return"string"==typeof e?qT(n,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}function LW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZP{}class sv extends ZP{}function du(n,e,...t){let r=[];e instanceof ZP&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof ng).length,a=s.filter(c=>c instanceof ov).length;if(o>1||o>0&&a>0)throw new Ie(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class ov extends sv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ov(e,t,r)}_apply(e){const t=this._parse(e);return jW(e._query,t),new Pi(e.firestore,e.converter,XM(e._query,t))}_parse(e){const t=qd(e.firestore);return function(s,o,a,c,l,h,g){let _;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Ie(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){UW(g,h);const v=[];for(const T of g)v.push(BW(c,s,T));_={arrayValue:{values:v}}}else _=BW(c,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||UW(g,h),_=PW(a,"where",g,"in"===h||"not-in"===h);return qt.create(l,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ng extends ZP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ng(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:An.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)jW(o,c),o=XM(o,c)}(e._query,t),new Pi(e.firestore,e.converter,XM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class eO extends sv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new eO(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Ie(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ie(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xy(s,o)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Gc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class YT extends sv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new YT(e,t,r)}_apply(e){return new Pi(e.firestore,e.converter,pT(e._query,this._limit,this._limitType))}}class JT extends sv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new JT(e,t,r)}_apply(e){const t=VW(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(s=t,new Gc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class XT extends sv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XT(e,t,r)}_apply(e){const t=VW(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(s=t,new Gc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function VW(n,e,t,r){if(t[0]=(0,bn.Ku)(t[0]),t[0]instanceof iv)return function(s,o,a,c,l){if(!c)throw new Ie(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Np(s))if(g.field.isKeyField())h.push(kd(o,c.key));else{const _=c.data.field(g.field);if(oT(_))throw new Ie(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=g.field.canonicalString();throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(_)}return new iu(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=qd(n.firestore);return function(o,a,c,l,h,g){const _=o.explicitOrderBy;if(h.length>_.length)throw new Ie(ie.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let T=0;T<h.length;T++){const C=h[T];if(_[T].field.isKeyField()){if("string"!=typeof C)throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!JM(o)&&-1!==C.indexOf("/"))throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);const A=o.path.child(zt.fromString(C));if(!He.isDocumentKey(A))throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const k=new He(A);v.push(kd(a,k))}else{const A=PW(c,l,C);v.push(A)}}return new iu(v,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BW(n,e,t){if("string"==typeof(t=(0,bn.Ku)(t))){if(""===t)throw new Ie(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JM(e)&&-1!==t.indexOf("/"))throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(zt.fromString(t));if(!He.isDocumentKey(r))throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kd(n,new He(r))}if(t instanceof er)return kd(n,t._key);throw new Ie(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jT(t)}.`)}function UW(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jW(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(ie.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tO{convertValue(e,t="none"){switch(nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Je()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>ir(o.doubleValue));return new GT(s)}convertGeoPoint(e){return new HT(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=aT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sy(e));default:return null}}convertTimestamp(e){const t=$c(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=zt.fromString(e);Xe(X8(r));const i=new eu(r.get(1),r.get(3)),s=new He(r.popFirst(5));return i.isEqual(t)||Rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function ZT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class j_e extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class Qd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yc extends iv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new av(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class av extends Yc{data(e={}){return super.data(e)}}class hu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new av(this._firestore,this._userDataWriter,r.key,r,new Qd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new av(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new av(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:H_e(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function H_e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function HW(n,e){return n instanceof Yc&&e instanceof Yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hu&&e instanceof hu&&n._firestore===e._firestore&&HP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fu extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function GW(n,e,t){n=$t(n,er);const r=$t(n.firestore,Bn),i=ZT(n.converter,e,t);return rg(r,[zT(qd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,sr.none())])}function WW(n,e,t,...r){n=$t(n,er);const i=$t(n.firestore,Bn),s=qd(i);let o;return o="string"==typeof(e=(0,bn.Ku)(e))||e instanceof Qc?JP(s,"updateDoc",n._key,e,t,r):YP(s,"updateDoc",n._key,e),rg(i,[o.toMutation(n._key,sr.exists(!0))])}function zW(n,...e){var t,r,i;n=(0,bn.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||GP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(GP(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let c,l,h;if(n instanceof er)l=$t(n.firestore,Bn),h=Rp(n._key.path),c={next:g=>{e[o]&&e[o](nO(l,n,g))},error:e[o+1],complete:e[o+2]};else{const g=$t(n,Pi);l=$t(g.firestore,Bn),h=g._query;const _=new fu(l);c={next:v=>{e[o]&&e[o](new hu(l,_,g,v))},error:e[o+1],complete:e[o+2]},LW(n._query)}return function(_,v,T,C){const A=new BT(C),k=new sP(v,A,T);return _.asyncQueue.enqueueAndForget((0,S.A)(function*(){return Zx(yield tg(_),k)})),()=>{A.Za(),_.asyncQueue.enqueueAndForget((0,S.A)(function*(){return tP(yield tg(_),k)}))}}(or(l),h,a,c)}function rg(n,e){return function(r,i){const s=new vi;return r.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function Vme(n,e,t){return fP.apply(this,arguments)}(yield UP(r),i,s)})),s.promise}(or(n),e)}function nO(n,e,t){const r=t.docs.get(e._key),i=new fu(n);return new Yc(n,i,e._key,r,new Qd(t.hasPendingWrites,t.fromCache),e.converter)}const aye={maxAttempts:5};class qW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qd(e)}set(e,t,r){this._verifyNotCommitted();const i=pu(e,this._firestore),s=ZT(i.converter,t,r),o=zT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=pu(e,this._firestore);let o;return o="string"==typeof(t=(0,bn.Ku)(t))||t instanceof Qc?JP(this._dataReader,"WriteBatch.update",s._key,t,r,i):YP(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pu(e,this._firestore);return this._mutations=this._mutations.concat(new kp(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pu(n,e){if((n=(0,bn.Ku)(n)).firestore!==e)throw new Ie(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cye extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=qd(t)}get(t){const r=pu(t,this._firestore),i=new j_e(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Je();const o=s[0];if(o.isFoundDocument())return new iv(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new iv(this._firestore,i,r._key,null,r.converter);throw Je()})}set(t,r,i){const s=pu(t,this._firestore),o=ZT(s.converter,r,i),a=zT(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=pu(t,this._firestore);let a;return a="string"==typeof(r=(0,bn.Ku)(r))||r instanceof Qc?JP(this._dataReader,"Transaction.update",o._key,r,i,s):YP(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=pu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pu(e,this._firestore),r=new fu(this._firestore);return super.get(e).then(i=>new Yc(this._firestore,r,t._key,i._document,new Qd(!1,!1),t.converter))}}function iO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JW(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function XW(){if(!function jpe(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Ep=yp.SDK_VERSION,(0,yp._registerComponent)(new lG.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Bn(new upe(r.getProvider("auth-internal")),new fpe(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ie(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,yp.registerVersion)(yG,"4.7.3",e),(0,yp.registerVersion)(yG,"4.7.3","esm2017")}();class cv{constructor(e){this._delegate=e}static fromBase64String(e){return XW(),new cv(qa.fromBase64String(e))}static fromUint8Array(e){return JW(),new cv(qa.fromUint8Array(e))}toBase64(){return XW(),this._delegate.toBase64()}toUint8Array(){return JW(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sO(n){return function yye(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vye{enableIndexedDbPersistence(e,t){return function v_e(n,e){so("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return RW(n,Zp.provider,{build:r=>new PP(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function b_e(n){return WP.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function E_e(n){if(n._initialized&&!n._terminated)throw new Ie(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,S.A)(function*(){try{yield(t=(0,S.A)(function*(i){if(!ja.D())return Promise.resolve();const s=i+"main";yield ja.delete(s)}),function r(i){return t.apply(this,arguments)})(Ix(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZW{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof eu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&so("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function wW(n,e,t,r={}){var i;const s=(n=$t(n,ev))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=yi.MOCK_USER;else{a=(0,bn.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Ie(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yi(l)}n._authCredentials=new lpe(new vG(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function T_e(n){return function s_e(n){return n.asyncQueue.enqueue((0,S.A)(function*(){const e=yield hW(n),t=yield fW(n);return e.setNetworkEnabled(!0),function(i){const s=Ve(i);return s.L_.delete(0),Zy(s)}(t)}))}(or(n=$t(n,Bn)))}(this._delegate)}disableNetwork(){return function w_e(n){return function o_e(n){return n.asyncQueue.enqueue((0,S.A)(function*(){const e=yield hW(n),t=yield fW(n);return e.setNetworkEnabled(!1),(r=(0,S.A)(function*(s){const o=Ve(s);o.L_.add(0),yield Gp(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(or(n=$t(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vW("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function I_e(n){return function(t){const r=new vi;return t.asyncQueue.enqueueAndForget((0,S.A)(function*(){return function $me(n,e){return yP.apply(this,arguments)}(yield UP(t),r)})),r.promise}(or(n=$t(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function X_e(n,e){return function u_e(n,e){const t=new BT(e);return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return i=yield tg(n),s=t,Ve(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return i=yield tg(n),s=t,void Ve(i).Y_.delete(s);var i,s}))}}(or(n=$t(n,Bn)),GP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ig(this,CW(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fo(this,$T(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function m_e(n,e){if(n=$t(n,ev),$P("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(r=e,new Gc(zt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lye(n,e,t){n=$t(n,Bn);const r=Object.assign(Object.assign({},aye),t);return function(s){if(s.maxAttempts<1)throw new Ie(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new vi;return s.asyncQueue.enqueueAndForget((0,S.A)(function*(){const l=yield function pW(n){return UT(n).then(e=>e.datastore)}(s);new r_e(s.asyncQueue,l,a,o,c).au()})),c.promise}(or(n),i=>e(new cye(n,i)),r)}(this._delegate,t=>e(new ez(this,t)))}batch(){return or(this._delegate),new tz(new qW(this._delegate,e=>rg(this._delegate,e)))}loadBundle(e){return function C_e(n,e){const t=or(n=$t(n,Bn)),r=new __e;return function d_e(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?x8().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return uW(h,g);if(h instanceof ArrayBuffer)return uW(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new t_e(h,a);var h}(t,Xy(e));n.asyncQueue.enqueueAndForget((0,S.A)(function*(){!function Zme(n,e,t){const r=Ve(n);var i;(i=(0,S.A)(function*(o,a,c){try{const l=yield a.getMetadata();if(yield function(T,C){const A=Ve(T),k=Nr(C.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.Gr.getBundleMetadata(P,C.id)).then(P=>!!P&&P.createTime.compareTo(k)>=0)}(o.localStore,l))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(T=l).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);c._updateProgress(Z6(l));const h=new Nme(l,o.localStore,a.serializer);let g=yield a.Ua();for(;g;){const v=yield h.la(g);v&&c._updateProgress(v),g=yield a.Ua()}const _=yield h.complete();return yield Kc(o,_.Ia,void 0),yield function(T,C){const A=Ve(T);return A.persistence.runTransaction("Save bundle","readwrite",k=>A.Gr.saveBundleMetadata(k,C))}(o.localStore,l),c._completeWith(_.progress),Promise.resolve(_.Pa)}catch(l){return so("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}var T}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield UP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function D_e(n,e){return function h_e(n,e){return n.asyncQueue.enqueue((0,S.A)(function*(){return function(r,i){const s=Ve(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield eg(n),e)}))}(or(n=$t(n,Bn)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class tw extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new cv(new qa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fo.forKey(t,this.firestore,null)}}class ez{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tw(e)}get(e){const t=Jd(e);return this._delegate.get(t).then(r=>new lv(this._firestore,new Yc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jd(e);return r?(iO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jd(e);return this._delegate.delete(t),this}}class tz{constructor(e){this._delegate=e}set(e,t,r){const i=Jd(e);return r?(iO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jd(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new av(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uv(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Yd(e,new tw(e),t),i.set(t,s)),s}}Yd.INSTANCES=new WeakMap;class Fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fo(t,new er(t._delegate,r,new He(e)))}static forKey(e,t,r){return new Fo(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ig(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ig(this.firestore,CW(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,bn.Ku)(e))instanceof er&&DW(this._delegate,e)}set(e,t){t=iO("DocumentReference.set",t);try{return t?GW(this._delegate,e,t):GW(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WW(this._delegate,e):WW(this._delegate,e,t,...r)}catch(i){throw fs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Y_e(n){return rg($t(n.firestore,Bn),[new kp(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=nz(e),r=rz(e,i=>new lv(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zW(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function W_e(n){n=$t(n,er);const e=$t(n.firestore,Bn),t=or(e),r=new fu(e);return function a_e(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return(r=(0,S.A)(function*(s,o,a){try{const c=yield function(h,g){const _=Ve(h);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,g))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Ie(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=Kp(c,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield eg(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Yc(e,r,n._key,i,new Qd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function z_e(n){n=$t(n,er);const e=$t(n.firestore,Bn);return gW(or(e),n._key,{source:"server"}).then(t=>nO(e,n,t))}(this._delegate):function G_e(n){n=$t(n,er);const e=$t(n.firestore,Bn);return gW(or(e),n._key).then(t=>nO(e,n,t))}(this._delegate),t.then(r=>new lv(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fo(this.firestore,this._delegate.withConverter(e?Yd.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function nz(n){for(const e of n)if("object"==typeof e&&!sO(e))return e;return{}}function rz(n,e){var t,r;let i;return i=sO(n[0])?n[0]:sO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class lv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HW(this._delegate,e._delegate)}}class uv extends lv{data(e){const t=this._delegate.data(e);return this._delegate._converter||function ape(n,e){n||Je()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tw(e)}where(e,t,r){try{return new ps(this.firestore,du(this._delegate,function P_e(n,e,t){const r=e,i=QT("where",n);return ov._create(i,r,t)}(e,t,r)))}catch(i){throw fs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,du(this._delegate,function O_e(n,e="asc"){const t=e,r=QT("orderBy",n);return eO._create(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,du(this._delegate,function k_e(n){return IW("limit",n),YT._create("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,du(this._delegate,function F_e(n){return IW("limitToLast",n),YT._create("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,du(this._delegate,function L_e(...n){return JT._create("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,du(this._delegate,function V_e(...n){return JT._create("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,du(this._delegate,function B_e(...n){return XT._create("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,du(this._delegate,function U_e(...n){return XT._create("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return HP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function K_e(n){n=$t(n,Pi);const e=$t(n.firestore,Bn),t=or(e),r=new fu(e);return function c_e(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,S.A)(function*(){return(r=(0,S.A)(function*(s,o,a){try{const c=yield MT(s,o,!0),l=new nW(o,c.Ts),h=l.ma(c.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(c){const l=Kp(c,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield eg(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hu(e,r,n,i))}(this._delegate):"server"===e?.source?function Q_e(n){n=$t(n,Pi);const e=$t(n.firestore,Bn),t=or(e),r=new fu(e);return mW(t,n._query,{source:"server"}).then(i=>new hu(e,r,n,i))}(this._delegate):function q_e(n){n=$t(n,Pi);const e=$t(n.firestore,Bn),t=or(e),r=new fu(e);return LW(n._query),mW(t,n._query).then(i=>new hu(e,r,n,i))}(this._delegate),t.then(r=>new oO(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=nz(e),r=rz(e,i=>new oO(this.firestore,new hu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zW(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?Yd.getInstance(this.firestore,e):null))}}class Eye{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new uv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Eye(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new uv(this._firestore,r))})}isEqual(e){return HW(this._delegate,e._delegate)}}class ig extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fo(this.firestore,e):null}doc(e){try{return new Fo(this.firestore,void 0===e?$T(this._delegate):$T(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function J_e(n,e){const t=$t(n.firestore,Bn),r=$T(n),i=ZT(n.converter,e);return rg(t,[zT(qd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fo(this.firestore,t))}isEqual(e){return DW(this._delegate,e._delegate)}withConverter(e){return new ig(this.firestore,this._delegate.withConverter(e?Yd.getInstance(this.firestore,e):null))}}function Jd(n){return $t(n,er)}class aO{constructor(...e){this._delegate=new Qc(...e)}static documentId(){return new aO(Xn.keyField().canonicalString())}isEqual(e){return(e=(0,bn.Ku)(e))instanceof Qc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dye(){return new zP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xd(e)}static delete(){const e=function uye(){return new nv("deleteField")}();return e._methodName="FieldValue.delete",new Xd(e)}static arrayUnion(...e){const t=function hye(...n){return new qP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xd(t)}static arrayRemove(...e){const t=function fye(...n){return new KP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xd(t)}static increment(e){const t=function pye(n){return new QP("increment",n)}(e);return t._methodName="FieldValue.increment",new Xd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Iye={Firestore:ZW,GeoPoint:HT,Timestamp:rr,Blob:cv,Transaction:ez,WriteBatch:tz,DocumentReference:Fo,DocumentSnapshot:lv,Query:ps,QueryDocumentSnapshot:uv,QuerySnapshot:oO,CollectionReference:ig,FieldPath:aO,FieldValue:Xd,setLogLevel:function bye(n){!function ope(n){Yl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function iz(n,e){return function Cye(n,e=JI){return new Wt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cO(n,e){return iz(n,e).pipe(Le(t=>({payload:t,type:"query"})))}!function wye(n){(function Tye(n,e){n.INTERNAL.registerComponent(new lG.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Iye)))})(n,(e,t)=>new ZW(e,t,new vye)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Uc.A);class sz{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=dz(r,t);return new cz(i,s,this.afs)}snapshotChanges(){return function Dye(n,e){return iz(n,e).pipe(z_(void 0),FM(),Le(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(io)}valueChanges(e={}){return this.snapshotChanges().pipe(Le(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return zn(this.ref.get(e)).pipe(io)}}function nw(n,e){return cO(n,e).pipe(z_(void 0),FM(),Le(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const l=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function oz(n,e,t){return nw(n,t).pipe(cI((r,i)=>function Aye(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Sye(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function cG(n,e=bs){return n=n??ipe,Rt((t,r)=>{let i,s=!0;t.subscribe(ut(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),Le(r=>r.map(i=>({type:i.type,payload:i}))))}function lO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function az(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cz{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Le(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(z_(void 0),FM(),Sr(([r,i])=>i.length>0||!r),Le(([,r])=>r),io)}auditTrail(e){return this.stateChanges(e).pipe(cI((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=az(e);return oz(this.query,t,this.afs.schedulers.outsideAngular).pipe(io)}valueChanges(e={}){return cO(this.query,this.afs.schedulers.outsideAngular).pipe(Le(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),io)}get(e){return zn(this.query.get(e)).pipe(io)}add(e){return this.ref.add(e)}doc(e){return new sz(this.ref.doc(e),this.afs)}}class Rye{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nw(this.query,this.afs.schedulers.outsideAngular).pipe(Le(t=>t.filter(r=>e.indexOf(r.type)>-1)),Sr(t=>t.length>0),io):nw(this.query,this.afs.schedulers.outsideAngular).pipe(io)}auditTrail(e){return this.stateChanges(e).pipe(cI((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=az(e);return oz(this.query,t,this.afs.schedulers.outsideAngular).pipe(io)}valueChanges(e={}){return cO(this.query,this.afs.schedulers.outsideAngular).pipe(Le(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),io)}get(e){return zn(this.query.get(e)).pipe(io)}}const lz=new Me("angularfire2.enableFirestorePersistence"),uz=new Me("angularfire2.firestore.persistenceSettings"),Nye=new Me("angularfire2.firestore.settings"),Mye=new Me("angularfire2.firestore.use-emulator");function dz(n,e=(t=>t)){return{query:e(n),ref:n}}let hz=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,h,g,_,v,T,C,A,k,P){this.schedulers=c;const q=OM(t,a,r),ne=h;g&&aG(q,a,_,T,C,A,v,k),[this.firestore,this.persistenceEnabled$]=Y4(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{const me=a.runOutsideAngular(()=>q.firestore());if(s&&me.settings(s),ne&&me.useEmulator(...ne),i&&!GE(o)){const we=()=>{try{return zn(me.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(F){return typeof console<"u"&&console.warn(F),st(!1)}};return[me,a.runOutsideAngular(we)]}return[me,st(!1)]},[s,ne,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=dz(i,r),a=this.schedulers.ngZone.run(()=>s);return new cz(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Rye(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new sz(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Se(ZI),Se(eT,8),Se(lz,8),Se(Nye,8),Se(Ea),Se(Pt),Se(K4),Se(uz,8),Se(Mye,8),Se(Iy,8),Se(tG,8),Se(nG,8),Se(rG,8),Se(iG,8),Se(sG,8),Se(oG,8),Se(z4,8))};static \u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),xye=(()=>{class n{constructor(){Uc.A.registerVersion("angularfire",XI.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lz,useValue:!0},{provide:uz,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Bt({type:n});static \u0275inj=Kt({providers:[hz]})}return n})(),uO=(()=>{class n{constructor(){this.toasts=[]}showAlert(t){this.toasts.push({...t})}hideAlert(t){this.toasts=this.toasts.filter(r=>r!==t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gu=(()=>{class n{constructor(t,r,i,s,o){this.afs=t,this.afAuth=r,this.router=i,this.route=s,this.sharedService=o,this.userData={uid:null,email:null,displayName:null,photoURL:"./assets/dummy-user.png",emailVerified:!1},this.app=_3(QI_firebase),this.appCheck=ide(this.app,{provider:new VR("6LfLt9IjAAAAAMDLMl7xkkZtneFyCglcnQ7Sjj3D"),isTokenAutoRefreshEnabled:!0})}getToken(){var t=this;return(0,S.A)(function*(){let r;try{r=yield function ode(n,e){return BR.apply(this,arguments)}(t.appCheck)}catch{return}return r})()}checkToken(){var t=this;return new Promise(function(){var r=(0,S.A)(function*(i,s){i((yield t.getToken())||!0)});return function(i,s){return r.apply(this,arguments)}}())}signIn(t,r){this.checkToken().then(()=>this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{i.user&&i.user.emailVerified?(this.SetUserData(i.user),this.router.navigate(["dashboard"])):this.router.navigate(["verify-email-address"])}).catch(i=>{this.sharedService.showAlert({class:"error",title:i.message,iconClass:"fa-solid fa-phone"})})).catch(i=>{console.error(i)})}signUp(t,r){this.checkToken().then(()=>this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.sendVerificationMail(i.user),this.SetUserData(i.user)}).catch(i=>{this.sharedService.showAlert({class:"error",title:i.message,iconClass:"fa-solid fa-phone"})})).catch(i=>{console.error(i)})}sendVerificationMail(t){this.checkToken().then(()=>t.sendEmailVerification().then(()=>{this.router.navigate(["verify-email-address"])})).catch(r=>{console.error(r)})}forgotPassword(t){this.checkToken().then(()=>this.afAuth.sendPasswordResetEmail(t).then(()=>{this.sharedService.showAlert({class:"info",title:"Password reset email sent, check your inbox.",iconClass:"fa-solid fa-phone"})}).catch(r=>{this.sharedService.showAlert({class:"error",title:r,iconClass:"fa-solid fa-phone"})})).catch(r=>{this.sharedService.showAlert({class:"error",title:r,iconClass:"fa-solid fa-phone"})})}get isLoggedIn(){let t=localStorage.getItem("WebRTCVideoCallUser");return t&&(t=JSON.parse(t),this.userData=t),!(!t||!1===t.emailVerified)}GoogleAuth(){this.checkToken().then(()=>this.AuthLogin(new Jde)).catch(t=>{console.error(t)})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.SetUserData(r.user),this.router.navigate(["dashboard"])}).catch(r=>{this.sharedService.showAlert({class:"error",title:r,iconClass:"fa-solid fa-phone"})})}SetUserData(t){localStorage.setItem("WebRTCVideoCallUser",JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName?t.displayName:t.email,photoURL:t.photoURL,emailVerified:t.emailVerified}))}SignOut(){this.afAuth.signOut().then(()=>{this.userData=null,localStorage.removeItem("WebRTCVideoCallUser"),this.router.navigate(["sign-in"])})}getValidationMessage(t){t.validationMessage=null,t&&t.errors&&t.dirty&&((t.errors.pattern||t.errors.email)&&(t.errors.validationMessage=`Invalid ${t.name}`),t.errors.required&&(t.errors.validationMessage="required"))}static{this.\u0275fac=function(r){return new(r||n)(Se(hz),Se(Iy),Se(ds),Se(bd),Se(uO))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Pye=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){this.loginForm={email:"",password:""},this.backToPreviousPage()}backToPreviousPage(){const{redirect:t}=window.history.state;this.router.navigateByUrl(t||"/dashboard")}static{this.\u0275fac=function(r){return new(r||n)(Ce(gu),Ce(ds))}}static{this.\u0275cmp=pr({type:n,selectors:[["app-sign-in"]],decls:35,vars:5,consts:[["userLoginForm","ngForm"],["email","ngModel"],["password","ngModel"],["name","userLoginForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","me-1"],[1,"form-group","text-center"],["routerLink","/forgot-password",1,"link"],[1,"form-group","text-center","mb-0"],["routerLink","/register-user",1,"link"]],template:function(r,i){if(1&r){const s=Zr();De(0,"form",3,0)(2,"h4",4),Jt(3,"i",5),et(4," VideoWebRTC "),Te(),De(5,"div",6)(6,"h5"),et(7,"Sign In"),Te(),De(8,"div",7)(9,"input",8,1),Dc("ngModelChange",function(a){return Ct(s),Fl(i.loginForm.email,a)||(i.loginForm.email=a),xt(a)}),at("ngModelChange",function(){Ct(s);const a=hr(10);return xt(i.authService.getValidationMessage(a))}),Te(),De(11,"div",9),et(12),Te()(),De(13,"div",7)(14,"input",10,2),Dc("ngModelChange",function(a){return Ct(s),Fl(i.loginForm.password,a)||(i.loginForm.password=a),xt(a)}),at("ngModelChange",function(){Ct(s);const a=hr(15);return xt(i.authService.getValidationMessage(a))}),Te(),De(16,"div",9),et(17),Te()(),De(18,"div",7)(19,"button",11),at("click",function(){return Ct(s),xt(i.authService.signIn(i.loginForm.email,i.loginForm.password))}),et(20," Sign In "),Te()(),De(21,"div",7)(22,"div",12)(23,"span"),et(24,"OR"),Te()()(),De(25,"div",7)(26,"button",13),at("click",function(){return Ct(s),xt(i.authService.GoogleAuth())}),Jt(27,"i",14),et(28," Log in with Google "),Te()(),De(29,"div",15)(30,"span",16),et(31,"Forgot Password?"),Te()(),De(32,"div",17)(33,"span",18),et(34,"Don't have an account ? Sign Up"),Te()()()()}if(2&r){const s=hr(1),o=hr(10),a=hr(15);xe(9),Cc("ngModel",i.loginForm.email),xe(3),hi(null==o||null==o.errors?null:o.errors.validationMessage),xe(2),Cc("ngModel",i.loginForm.password),xe(3),hi(null==a||null==a.errors?null:a.errors.validationMessage),xe(2),It("disabled",s.invalid)}},dependencies:[Ed,Yf,md,B_,zf,yd,G_,Qf,$l]})}}return n})(),Oye=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.registerForm={email:"",password:""}}static{this.\u0275fac=function(r){return new(r||n)(Ce(gu))}}static{this.\u0275cmp=pr({type:n,selectors:[["app-sign-up"]],decls:32,vars:5,consts:[["userSignupForm","ngForm"],["email","ngModel"],["password","ngModel"],["name","userSignupForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","me-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(r,i){if(1&r){const s=Zr();De(0,"form",3,0)(2,"h4",4),Jt(3,"i",5),et(4," VideoWebRTC "),Te(),De(5,"div",6)(6,"h5"),et(7,"Sign Up"),Te(),De(8,"div",7)(9,"input",8,1),Dc("ngModelChange",function(a){return Ct(s),Fl(i.registerForm.email,a)||(i.registerForm.email=a),xt(a)}),at("ngModelChange",function(){Ct(s);const a=hr(10);return xt(i.authService.getValidationMessage(a))}),Te(),De(11,"div",9),et(12),Te()(),De(13,"div",7)(14,"input",10,2),Dc("ngModelChange",function(a){return Ct(s),Fl(i.registerForm.password,a)||(i.registerForm.password=a),xt(a)}),at("ngModelChange",function(){Ct(s);const a=hr(15);return xt(i.authService.getValidationMessage(a))}),Te(),De(16,"div",9),et(17),Te()(),De(18,"div",7)(19,"button",11),at("click",function(){return Ct(s),xt(i.authService.signUp(i.registerForm.email,i.registerForm.password))}),et(20," Sign Up "),Te()(),De(21,"div",7)(22,"div",12)(23,"span"),et(24,"OR"),Te()()(),De(25,"div",7)(26,"button",13),at("click",function(){return Ct(s),xt(i.authService.GoogleAuth())}),Jt(27,"i",14),et(28," Continue with Google "),Te()(),De(29,"div",15)(30,"span",16),et(31,"Already have an account ? Sign In"),Te()()()()}if(2&r){const s=hr(1),o=hr(10),a=hr(15);xe(9),Cc("ngModel",i.registerForm.email),xe(3),hi(null==o||null==o.errors?null:o.errors.validationMessage),xe(2),Cc("ngModel",i.registerForm.password),xe(3),hi(null==a||null==a.errors?null:a.errors.validationMessage),xe(2),It("disabled",s.invalid)}},dependencies:[Ed,Yf,md,B_,zf,yd,G_,Qf,$l]})}}return n})();class Fye{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return function Lye(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);t.set(s,r),r+=i.byteLength}return t}(e).buffer}}function fz(n){return new Vye(n).unpack()}function pz(n){const e=new Bye,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class Vye{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let s,o,r=0,i="";for(;r<e;)s=t[r],s<160?(o=s,r++):(192^s)<32?(o=(31&s)<<6|63&t[r+1],r+=2):(224^s)<16?(o=(15&s)<<12|(63&t[r+1])<<6|63&t[r+2],r+=3):(o=(7&s)<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++)t[this.unpack()]=this.unpack();return t}unpack_float(){const e=this.unpack_uint32();return(e>>31?-1:1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),i=(e>>20&2047)-1023;return(e>>31?-1:1)*((1048575&e|1048576)*2**(i-20)+this.unpack_uint32()*2**(i-52))}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class Bye{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"==typeof e)this.pack_string(e);else if("number"==typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else{if("object"!=typeof e)throw new Error(`Type "${typeof e}" not yet supported`);if(null===e)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e)this.pack_bin(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(t!=Object&&!t.toString().startsWith("class"))throw new Error(`Type "${t.toString()}" not yet supported`);{const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}}}}this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(t)}this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(r)}this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(t)}const r=i=>{if(i<t){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),s=Math.floor((e/2**r-1)*2**52),o=2**32,a=t<<31|r+1023<<20|s/o&1048575,c=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(r)}const i=s=>{if(s<t.length){const o=t[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const t=4294967295&e;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}constructor(){this._bufferBuilder=new Fye,this._textEncoder=new TextEncoder}}let gz=!0,mz=!0;function iw(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function Zd(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=l=>{const h=t(l);h&&(a.handleEvent?a.handleEvent(h):a(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Uye(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(gz=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function jye(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(mz=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function _z(){if("object"==typeof window){if(gz)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function dO(n,e){mz&&console.warn(n+" is deprecated, please use "+e+" instead.")}function yz(n){return"[object Object]"===Object.prototype.toString.call(n)}function vz(n){return yz(n)?Object.keys(n).reduce(function(e,t){const r=yz(n[t]),i=r?vz(n[t]):n[t],s=r&&!Object.keys(i).length;return void 0===i||s?e:Object.assign(e,{[t]:i})},{}):n}function hO(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?hO(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(i=>{hO(n,n.get(i),t)})}))}function bz(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(null===e)return i;const s=[];return n.forEach(o=>{"track"===o.type&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{n.forEach(a=>{a.type===r&&a.trackId===o.id&&hO(n,a,i)})}),i}const Ez=_z;function Iz(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(a){if("object"!=typeof a||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if("require"===l||"advanced"===l||"mediaSource"===l)return;const h="object"==typeof a[l]?a[l]:{ideal:a[l]};void 0!==h.exact&&"number"==typeof h.exact&&(h.min=h.max=h.exact);const g=function(_,v){return _?_+v.charAt(0).toUpperCase()+v.slice(1):"deviceId"===v?"sourceId":v};if(void 0!==h.ideal){c.optional=c.optional||[];let _={};"number"==typeof h.ideal?(_[g("min",l)]=h.ideal,c.optional.push(_),_={},_[g("max",l)]=h.ideal,c.optional.push(_)):(_[g("",l)]=h.ideal,c.optional.push(_))}void 0!==h.exact&&"number"!=typeof h.exact?(c.mandatory=c.mandatory||{},c.mandatory[g("",l)]=h.exact):["min","max"].forEach(_=>{void 0!==h[_]&&(c.mandatory=c.mandatory||{},c.mandatory[g(_,l)]=h[_])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if((a=JSON.parse(JSON.stringify(a)))&&"object"==typeof a.audio){const l=function(h,g,_){g in h&&!(_ in h)&&(h[_]=h[g],delete h[g])};l((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&"object"==typeof a.video){let l=a.video.facingMode;l=l&&("object"==typeof l?l:{ideal:l});const h=e.version<66;if(l&&("user"===l.exact||"environment"===l.exact||"user"===l.ideal||"environment"===l.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||h)){let g;if(delete a.video.facingMode,"environment"===l.exact||"environment"===l.ideal?g=["back","rear"]:("user"===l.exact||"user"===l.ideal)&&(g=["front"]),g)return t.mediaDevices.enumerateDevices().then(_=>{let v=(_=_.filter(T=>"videoinput"===T.kind)).find(T=>g.some(C=>T.label.toLowerCase().includes(C)));return!v&&_.length&&g.includes("back")&&(v=_[_.length-1]),v&&(a.video.deviceId=l.exact?{exact:v.deviceId}:{ideal:v.deviceId}),a.video=r(a.video),Ez("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Ez("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(a,c,l){i(a,h=>{t.webkitGetUserMedia(h,c,g=>{l&&l(s(g))})})}.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(h=>{if(l.audio&&!h.getAudioTracks().length||l.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function Tz(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function wz(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;s=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):{track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;s=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.id):{track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Zd(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Cz(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===s.kind?i.createDTMFSender(s):null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);-1!==c&&this._senders.splice(c,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function Dz(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>bz(o,s.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Zd(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>bz(s,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Az(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?-1===this._shimmedLocalStreams[a.id].indexOf(c)&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(g=>g.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const c=this.getSenders().filter(l=>-1===a.indexOf(l));this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);-1!==c&&this._shimmedLocalStreams[a].splice(c,1),1===this._shimmedLocalStreams[a].length&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function Sz(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Az(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const h=t.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(g=>this._reverseStreams[g.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(g=>{if(this.getSenders().find(v=>v.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const g=new n.MediaStream(h.getTracks());this._streams[h.id]=g,this._reverseStreams[g.id]=h,h=g}r.apply(this,[h])};const i=n.RTCPeerConnection.prototype.removeStream;function s(l,h){let g=h.sdp;return Object.keys(l._reverseStreams||[]).forEach(_=>{const v=l._reverseStreams[_];g=g.replace(new RegExp(l._streams[v.id].id,"g"),v.id)}),new RTCSessionDescription({type:h.type,sdp:g})}n.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},n.RTCPeerConnection.prototype.addTrack=function(h,g){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(1!==_.length||!_[0].getTracks().find(C=>C===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const T=this._streams[g.id];if(T)T.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new n.MediaStream([h]);this._streams[g.id]=C,this._reverseStreams[C.id]=g,this.addStream(C)}return this.getSenders().find(C=>C.track===h)},["createOffer","createAnswer"].forEach(function(l){const h=n.RTCPeerConnection.prototype[l],g={[l](){const _=arguments;return arguments.length&&"function"==typeof arguments[0]?h.apply(this,[T=>{const C=s(this,T);_[0].apply(null,[C])},T=>{_[1]&&_[1].apply(null,T)},arguments[2]]):h.apply(this,arguments).then(T=>s(this,T))}};n.RTCPeerConnection.prototype[l]=g[l]});const a=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function o(l,h){let g=h.sdp;return Object.keys(l._reverseStreams||[]).forEach(_=>{const v=l._reverseStreams[_],T=l._streams[v.id];g=g.replace(new RegExp(v.id,"g"),T.id)}),new RTCSessionDescription({type:h.type,sdp:g})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return""===l.type?l:s(this,l)}}),n.RTCPeerConnection.prototype.removeTrack=function(h){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(h._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let _;this._streams=this._streams||{},Object.keys(this._streams).forEach(v=>{this._streams[v].getTracks().find(C=>h.track===C)&&(_=this._streams[v])}),_&&(1===_.getTracks().length?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function fO(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=i[t]})}function Rz(n,e){Zd(n,"negotiationneeded",t=>{const r=t.target;if(!(e.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return t})}function Nz(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(i,s,o){dO("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return"object"==typeof o&&"object"==typeof o.audio&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return"audio"===this.kind&&"object"==typeof a&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function Hye(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===r.video?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function Mz(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function pO(n,e){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new("addIceCandidate"===i?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=t[l.type]||l.type})}catch(l){if("TypeError"!==l.name)throw l;c.forEach((h,g)=>{c.set(g,Object.assign({},h,{type:t[h.type]||h.type}))})}return c}).then(o,a)}}function xz(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Pz(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Zd(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Oz(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){dO("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function kz(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function Fz(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;void 0===r&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function Lz(n){if("object"!=typeof n||!n.RTCRtpSender)return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Vz(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Bz(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Uz(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(-1===r)return;this._localStreams.splice(r,1);const i=t.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function jz(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function $z(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,h){const _=t.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return h?(_.then(l,h),Promise.resolve()):_},e.createAnswer=function(l,h){const _=r.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return h?(_.then(l,h),Promise.resolve()):_};let a=function(c,l,h){const g=i.apply(this,[c]);return h?(g.then(l,h),Promise.resolve()):g};e.setLocalDescription=a,a=function(c,l,h){const g=s.apply(this,[c]);return h?(g.then(l,h),Promise.resolve()):g},e.setRemoteDescription=a,a=function(c,l,h){const g=o.apply(this,[c]);return h?(g.then(l,h),Promise.resolve()):g},e.addIceCandidate=a}function Hz(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=i=>r(Gz(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}.bind(e))}function Gz(n){return n&&void 0!==n.video?Object.assign({},n,{video:vz(n.video)}):n}function Wz(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];void 0===a.urls&&a.url?(dO("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function zz(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qz(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>"audio"===o.receiver.track.kind);!1===r.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0===r.offerToReceiveAudio&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>"video"===o.receiver.track.kind);!1===r.offerToReceiveVideo&&s?"sendrecv"===s.direction?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":"recvonly"===s.direction&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):!0===r.offerToReceiveVideo&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Kz(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var Qz=N(80),dv=N.n(Qz);function sw(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if("object"==typeof r&&r.candidate&&0===r.candidate.indexOf("a=")&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=dv().parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,Zd(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function gO(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Zd(n,"icecandidate",e=>{if(e.candidate){const t=dv().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function ow(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();"plan-b"===c&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(function(a){if(!a||!a.sdp)return!1;const c=dv().splitSections(a.sdp);return c.shift(),c.some(l=>{const h=dv().parseMLine(l);return h&&"application"===h.kind&&-1!==h.protocol.indexOf("SCTP")})}(arguments[0])){const c=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===c||c.length<2)return-1;const l=parseInt(c[1],10);return l!=l?-1:l}(arguments[0]),l=function(a){let c=65536;return"firefox"===e.browser&&(c=e.version<57?-1===a?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),c}(c),h=function(a,c){let l=65536;"firefox"===e.browser&&57===e.version&&(l=65535);const h=dv().matchPrefix(a.sdp,"a=max-message-size:");return h.length>0?l=parseInt(h[0].substring(19),10):"firefox"===e.browser&&-1!==c&&(l=2147483637),l}(arguments[0],c);let g;g=0===l&&0===h?Number.POSITIVE_INFINITY:0===l||0===h?Math.max(l,h):Math.min(l,h);const _={};Object.defineProperty(_,"maxMessageSize",{get:()=>g}),this._sctp=_}return o.apply(this,arguments)}}function aw(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0];if("open"===r.readyState&&i.sctp&&(a.length||a.size||a.byteLength)>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},Zd(n,"datachannel",r=>(e(r.channel,r.target),r))}function mO(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function _O(n,e){if(!n.RTCPeerConnection||"chrome"===e.browser&&e.version>=71||"safari"===e.browser&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&-1!==i.sdp.indexOf("\na=extmap-allow-mixed")){const s=i.sdp.split("\n").filter(o=>"a=extmap-allow-mixed"!==o.trim()).join("\n");n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return t.apply(this,arguments)}}function cw(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||0===t.length||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function lw(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||0===t.length||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if("object"!=typeof i||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer"}return i.sdp||"offer"!==i.type&&"answer"!==i.type?t.apply(this,[i]):("offer"===i.type?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const Yz=function Gye({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=_z,r=function $ye(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(i=>"Chromium"===i.brand);if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=iw(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=iw(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=iw(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return e}(n),i={browserDetails:r,commonShim:K,extractVersion:iw,disableLog:Uye,disableWarnings:jye,sdp:Qz};switch(r.browser){case"chrome":if(!I||!fO||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(null===r.version)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=I,cw(n,r),lw(n),Iz(n,r),Tz(n),fO(n,r),wz(n),Sz(n,r),Cz(n),Dz(n),Rz(n,r),sw(n),gO(n),mO(n),ow(n,r),aw(n),_O(n,r);break;case"firefox":if(!Z||!pO||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=Z,cw(n,r),lw(n),Nz(n,r),pO(n,r),Mz(n),Oz(n),xz(n),Pz(n),kz(n),Fz(n),Lz(n),Vz(n),Bz(n),sw(n),mO(n),ow(n,r),aw(n);break;case"safari":if(!oe||!e.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=oe,cw(n,r),lw(n),Wz(n),qz(n),$z(n),Uz(n),jz(n),zz(n),Hz(n),Kz(n),sw(n),gO(n),ow(n,r),aw(n),_O(n,r);break;default:t("Unsupported browser!")}return i}({window:typeof window>"u"?void 0:window});var eh=4294967295;function Jz(n,e,t){var r=Math.floor(t/4294967296),i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function Xz(n,e){return 4294967296*n.getInt32(e)+n.getUint32(e+4)}var yO,vO,bO,uw=(typeof process>"u"||"never"!==(null===(yO=null==process?void 0:process.env)||void 0===yO?void 0:yO.TEXT_ENCODING))&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function Zz(n){for(var e=n.length,t=0,r=0;r<e;){var i=n.charCodeAt(r++);if(4294967168&i)if(4294965248&i){if(i>=55296&&i<=56319&&r<e){var s=n.charCodeAt(r);56320==(64512&s)&&(++r,i=((1023&i)<<10)+(1023&s)+65536)}t+=4294901760&i?4:3}else t+=2;else t++}return t}var hv=uw?new TextEncoder:void 0,Kye=uw?typeof process<"u"&&"force"!==(null===(vO=null==process?void 0:process.env)||void 0===vO?void 0:vO.TEXT_ENCODING)?200:0:eh,Jye=hv?.encodeInto?function Yye(n,e,t){hv.encodeInto(n,e.subarray(t))}:function Qye(n,e,t){e.set(hv.encode(n),t)};function e5(n,e,t){for(var r=e,i=r+t,s=[],o="";r<i;){var a=n[r++];if(128&a)if(192==(224&a)){var c=63&n[r++];s.push((31&a)<<6|c)}else if(224==(240&a)){c=63&n[r++];var l=63&n[r++];s.push((31&a)<<12|c<<6|l)}else if(240==(248&a)){var g=(7&a)<<18|(c=63&n[r++])<<12|(l=63&n[r++])<<6|63&n[r++];g>65535&&(s.push((g-=65536)>>>10&1023|55296),g=56320|1023&g),s.push(g)}else s.push(a);else s.push(a);s.length>=4096&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return s.length>0&&(o+=String.fromCharCode.apply(String,s)),o}var Zye=uw?new TextDecoder:null,eve=uw?typeof process<"u"&&"force"!==(null===(bO=null==process?void 0:process.env)||void 0===bO?void 0:bO.TEXT_DECODER)?200:0:eh,dw=function(){return function n(e,t){this.type=e,this.data=t}}(),nve=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ka=function(n){function e(t){var r=n.call(this,t)||this,i=Object.create(e.prototype);return Object.setPrototypeOf(r,i),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:e.name}),r}return nve(e,n),e}(Error),dve={type:-1,encode:function cve(n){if(n instanceof Date){var e=function ave(n){var e=n.getTime(),t=Math.floor(e/1e3),r=1e6*(e-1e3*t),i=Math.floor(r/1e9);return{sec:t+i,nsec:r-1e9*i}}(n);return function ove(n){var i,e=n.sec,t=n.nsec;if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){var r=new Uint8Array(4);return(i=new DataView(r.buffer)).setUint32(0,e),r}var s=e/4294967296,o=4294967295&e;return r=new Uint8Array(8),(i=new DataView(r.buffer)).setUint32(0,t<<2|3&s),i.setUint32(4,o),r}return r=new Uint8Array(12),(i=new DataView(r.buffer)).setUint32(0,t),Jz(i,4,e),r}(e)}return null},decode:function uve(n){var e=function lve(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:var i=e.getUint32(0);return{sec:4294967296*(3&i)+e.getUint32(4),nsec:i>>>2};case 12:return{sec:Xz(e,4),nsec:e.getUint32(0)};default:throw new Ka("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(n.length))}}(n);return new Date(1e3*e.sec+e.nsec/1e6)}},t5=function(){function n(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(dve)}return n.prototype.register=function(e){var t=e.type,r=e.encode,i=e.decode;if(t>=0)this.encoders[t]=r,this.decoders[t]=i;else{var s=1+t;this.builtInEncoders[s]=r,this.builtInDecoders[s]=i}},n.prototype.tryToEncode=function(e,t){for(var r=0;r<this.builtInEncoders.length;r++)if(null!=(i=this.builtInEncoders[r])&&null!=(s=i(e,t)))return new dw(-1-r,s);for(r=0;r<this.encoders.length;r++){var i,s;if(null!=(i=this.encoders[r])&&null!=(s=i(e,t)))return new dw(r,s)}return e instanceof dw?e:null},n.prototype.decode=function(e,t,r){var i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new dw(t,e)},n.defaultCodec=new n,n}();function hw(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?new Uint8Array(n):Uint8Array.from(n)}function EO(n){return"".concat(n<0?"-":"","0x").concat(Math.abs(n).toString(16).padStart(2,"0"))}!function(){function n(e,t,r,i,s,o,a,c){void 0===e&&(e=t5.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=100),void 0===i&&(i=2048),void 0===s&&(s=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===c&&(c=!1),this.extensionCodec=e,this.context=t,this.maxDepth=r,this.initialBufferSize=i,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}n.prototype.reinitializeState=function(){this.pos=0},n.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},n.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},n.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},n.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},n.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r},n.prototype.encodeNil=function(){this.writeU8(192)},n.prototype.encodeBoolean=function(e){this.writeU8(!1===e?194:195)},n.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},n.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},n.prototype.encodeString=function(e){if(e.length>Kye){var i=Zz(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),Jye(e,this.bytes,this.pos),this.pos+=i}else i=Zz(e),this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),function qye(n,e,t){for(var r=n.length,i=t,s=0;s<r;){var o=n.charCodeAt(s++);if(4294967168&o){if(4294965248&o){if(o>=55296&&o<=56319&&s<r){var a=n.charCodeAt(s);56320==(64512&a)&&(++s,o=((1023&o)<<10)+(1023&a)+65536)}4294901760&o?(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128):(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128)}else e[i++]=o>>6&31|192;e[i++]=63&o|128}else e[i++]=o}}(e,this.bytes,this.pos),this.pos+=i},n.prototype.encodeObject=function(e,t){var r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},n.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var r=hw(e);this.writeU8a(r)},n.prototype.encodeArray=function(e,t){var r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large array: ".concat(r));this.writeU8(221),this.writeU32(r)}for(var i=0,s=e;i<s.length;i++)this.doEncode(s[i],t+1)},n.prototype.countWithoutUndefined=function(e,t){for(var r=0,i=0,s=t;i<s.length;i++)void 0!==e[s[i]]&&r++;return r},n.prototype.encodeMap=function(e,t){var r=Object.keys(e);this.sortKeys&&r.sort();var i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: ".concat(i));this.writeU8(223),this.writeU32(i)}for(var s=0,o=r;s<o.length;s++){var a=o[s],c=e[a];this.ignoreUndefined&&void 0===c||(this.encodeString(a),this.doEncode(c,t+1))}},n.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},n.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},n.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},n.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},n.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},n.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},n.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},n.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},n.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},n.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},n.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function Wye(n,e,t){var i=t;n.setUint32(e,t/4294967296),n.setUint32(e+4,i)}(this.view,this.pos,e),this.pos+=8},n.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),Jz(this.view,this.pos,e),this.pos+=8}}();var yve=function(){function n(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return n.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},n.prototype.find=function(e,t,r){e:for(var s=0,o=this.caches[r-1];s<o.length;s++){for(var a=o[s],c=a.bytes,l=0;l<r;l++)if(c[l]!==e[t+l])continue e;return a.str}return null},n.prototype.store=function(e,t){var r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)},n.prototype.decode=function(e,t,r){var i=this.find(e,t,r);if(null!=i)return this.hit++,i;this.miss++;var s=e5(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,s),s},n}(),IO=function(n,e){var r,i,s,o,t={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return function c(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=2&l[0]?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[2&l[0],s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(!(s=(s=t.trys).length>0&&s[s.length-1])&&(6===l[0]||2===l[0])){t=0;continue}if(3===l[0]&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(6===l[0]&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(h){l=[6,h],i=0}finally{r=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,h])}}},n5=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}},sg=function(n){return this instanceof sg?(this.v=n,this):new sg(n)},Eve=function(n){var e=typeof n;return"string"===e||"number"===e},TO=new DataView(new ArrayBuffer(0)),Ive=new Uint8Array(TO.buffer),wO=function(){try{TO.getInt8(0)}catch(n){return n.constructor}throw new Error("never reached")}(),r5=new wO("Insufficient data"),Tve=new yve;function th(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}!function(){function n(e,t,r,i,s,o,a,c){void 0===e&&(e=t5.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=eh),void 0===i&&(i=eh),void 0===s&&(s=eh),void 0===o&&(o=eh),void 0===a&&(a=eh),void 0===c&&(c=Tve),this.extensionCodec=e,this.context=t,this.maxStrLength=r,this.maxBinLength=i,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=TO,this.bytes=Ive,this.headByte=-1,this.stack=[]}n.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},n.prototype.setBuffer=function(e){this.bytes=hw(e),this.view=function hve(n){if(n instanceof ArrayBuffer)return new DataView(n);var e=hw(n);return new DataView(e.buffer,e.byteOffset,e.byteLength)}(this.bytes),this.pos=0},n.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),r=hw(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}else this.setBuffer(e)},n.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},n.prototype.createExtraByteError=function(e){var r=this.view;return new RangeError("Extra ".concat(r.byteLength-this.pos," of ").concat(r.byteLength," byte(s) found at buffer[").concat(e,"]"))},n.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},n.prototype.decodeMulti=function(e){return IO(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},n.prototype.decodeAsync=function(e){var t,r,i,s;return function(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(g){o(g)}}function c(h){try{l(r.throw(h))}catch(g){o(g)}}function l(h){h.done?s(h.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function(){var o,a,c,l,h,_,v;return IO(this,function(T){switch(T.label){case 0:o=!1,T.label=1;case 1:T.trys.push([1,6,7,12]),t=n5(e),T.label=2;case 2:return[4,t.next()];case 3:if((r=T.sent()).done)return[3,5];if(c=r.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{a=this.doDecodeSync(),o=!0}catch(C){if(!(C instanceof wO))throw C}this.totalPos+=this.pos,T.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return l=T.sent(),i={error:l},[3,12];case 7:return T.trys.push([7,,10,11]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,9];case 8:T.sent(),T.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw _=(h=this).pos,v=h.totalPos,new RangeError("Insufficient data in parsing ".concat(EO(h.headByte)," at ").concat(v," (").concat(_," in the current buffer)"))}})})},n.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},n.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},n.prototype.decodeMultiAsync=function(e,t){return function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(_){r[_]&&(i[_]=function(v){return new Promise(function(T,C){s.push([_,v,T,C])>1||a(_,v)})})}function a(_,v){try{!function c(_){_.value instanceof sg?Promise.resolve(_.value.v).then(l,h):g(s[0][2],_)}(r[_](v))}catch(T){g(s[0][3],T)}}function l(_){a("next",_)}function h(_){a("throw",_)}function g(_,v){_(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function(){var i,s,o,a,c,l,h,g,_;return IO(this,function(v){switch(v.label){case 0:i=t,s=-1,v.label=1;case 1:v.trys.push([1,13,14,19]),o=n5(e),v.label=2;case 2:return[4,sg(o.next())];case 3:if((a=v.sent()).done)return[3,12];if(c=a.value,t&&0===s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c),i&&(s=this.readArraySize(),i=!1,this.complete()),v.label=4;case 4:v.trys.push([4,9,,10]),v.label=5;case 5:return[4,sg(this.doDecodeSync())];case 6:return[4,v.sent()];case 7:return v.sent(),0==--s?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((l=v.sent())instanceof wO))throw l;return[3,10];case 10:this.totalPos+=this.pos,v.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return h=v.sent(),g={error:h},[3,19];case 14:return v.trys.push([14,,17,18]),a&&!a.done&&(_=o.return)?[4,sg(_.call(o))]:[3,16];case 15:v.sent(),v.label=16;case 16:return[3,18];case 17:if(g)throw g.error;return[7];case 18:return[7];case 19:return[2]}})})},n.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!=(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else t=this.decodeUtf8String(i=e-160,0);else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){var i=this.lookU8();t=this.decodeUtf8String(i,1)}else if(218===e)i=this.lookU16(),t=this.decodeUtf8String(i,2);else if(219===e)i=this.lookU32(),t=this.decodeUtf8String(i,4);else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e)r=this.lookU16(),t=this.decodeBinary(r,2);else if(198===e)r=this.lookU32(),t=this.decodeBinary(r,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)r=this.lookU8(),t=this.decodeExtension(r,1);else if(200===e)r=this.lookU16(),t=this.decodeExtension(r,2);else{if(201!==e)throw new Ka("Unrecognized type byte: ".concat(EO(e)));r=this.lookU32(),t=this.decodeExtension(r,4)}this.complete();for(var s=this.stack;s.length>0;){var o=s[s.length-1];if(0===o.type){if(o.array[o.position]=t,o.position++,o.position!==o.size)continue e;s.pop(),t=o.array}else{if(1===o.type){if(!Eve(t))throw new Ka("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new Ka("The key __proto__ is not allowed");o.key=t,o.type=2;continue e}if(o.map[o.key]=t,o.readCount++,o.readCount!==o.size){o.key=null,o.type=1;continue e}s.pop(),t=o.map}}return t}},n.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},n.prototype.complete=function(){this.headByte=-1},n.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new Ka("Unrecognized array type byte: ".concat(EO(e)))}},n.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new Ka("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},n.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new Ka("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},n.prototype.decodeUtf8String=function(e,t){var r;if(e>this.maxStrLength)throw new Ka("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw r5;var s,i=this.pos+t;return s=this.stateIsMapKey()&&null!==(r=this.keyDecoder)&&void 0!==r&&r.canBeCached(e)?this.keyDecoder.decode(this.bytes,i,e):e>eve?function tve(n,e,t){var r=n.subarray(e,e+t);return Zye.decode(r)}(this.bytes,i,e):e5(this.bytes,i,e),this.pos+=t+e,s},n.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},n.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new Ka("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw r5;var r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i},n.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new Ka("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)},n.prototype.lookU8=function(){return this.view.getUint8(this.pos)},n.prototype.lookU16=function(){return this.view.getUint16(this.pos)},n.prototype.lookU32=function(){return this.view.getUint32(this.pos)},n.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},n.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},n.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},n.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},n.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},n.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},n.prototype.readU64=function(){var e=function zye(n,e){return 4294967296*n.getUint32(e)+n.getUint32(e+4)}(this.view,this.pos);return this.pos+=8,e},n.prototype.readI64=function(){var e=Xz(this.view,this.pos);return this.pos+=8,e},n.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},n.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e}}();class s5{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),c=e.slice(o,a);t.push({__peerData:this._dataCount,n:s,data:c,total:i}),o=a,s++}return this._dataCount++,t}}}const DO=Yz.default||Yz,pv=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(n)&&("chrome"===n?e>=this.minChromeVersion:"firefox"===n?e>=this.minFirefoxVersion:"safari"===n&&!this.isIOS&&e>=this.minSafariVersion)}getBrowser(){return DO.browserDetails.browser}getVersion(){return DO.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=DO.browserDetails.version||0;if("chrome"===n&&e<this.minChromeVersion)return!1;if("firefox"===n&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"&&["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Ove=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),o5=()=>Math.random().toString(36).slice(2),a5={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},Ps=new class kve extends s5{noop(){}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(i){i.target&&t(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer}isSecure(){return"https:"===location.protocol}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=a5,this.browser=pv.getBrowser(),this.browserVersion=pv.getVersion(),this.pack=pz,this.unpack=fz,this.supports=function(){const t={browser:pv.isBrowserSupported(),webRTC:pv.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let r;try{let i;r=new RTCPeerConnection(a5),t.audioVideo=!0;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!i.ordered;try{i.binaryType="blob",t.binaryBlob=!pv.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return t}(),this.validateId=Ove,this.randomToken=o5}};var AO,Ze=new class Vve{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const r=["PeerJS: ",...t];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}},Bve=Object.prototype.hasOwnProperty,gs="~";function gv(){}function Uve(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function c5(n,e,t,r,i){if("function"!=typeof t)throw new TypeError("The listener must be a function");var s=new Uve(t,r||n,i),o=gs?gs+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function fw(n,e){0==--n._eventsCount?n._events=new gv:delete n._events[e]}function es(){this._events=new gv,this._eventsCount=0}Object.create&&(gv.prototype=Object.create(null),(new gv).__proto__||(gs=!1)),es.prototype.eventNames=function(){var t,r,e=[];if(0===this._eventsCount)return e;for(r in t=this._events)Bve.call(t,r)&&e.push(gs?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},es.prototype.listeners=function(e){var r=this._events[gs?gs+e:e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},es.prototype.listenerCount=function(e){var r=this._events[gs?gs+e:e];return r?r.fn?1:r.length:0},es.prototype.emit=function(e,t,r,i,s,o){var a=gs?gs+e:e;if(!this._events[a])return!1;var h,g,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,s),!0;case 6:return c.fn.call(c.context,t,r,i,s,o),!0}for(g=1,h=new Array(l-1);g<l;g++)h[g-1]=arguments[g];c.fn.apply(c.context,h)}else{var v,_=c.length;for(g=0;g<_;g++)switch(c[g].once&&this.removeListener(e,c[g].fn,void 0,!0),l){case 1:c[g].fn.call(c[g].context);break;case 2:c[g].fn.call(c[g].context,t);break;case 3:c[g].fn.call(c[g].context,t,r);break;case 4:c[g].fn.call(c[g].context,t,r,i);break;default:if(!h)for(v=1,h=new Array(l-1);v<l;v++)h[v-1]=arguments[v];c[g].fn.apply(c[g].context,h)}}return!0},es.prototype.on=function(e,t,r){return c5(this,e,t,r,!1)},es.prototype.once=function(e,t,r){return c5(this,e,t,r,!0)},es.prototype.removeListener=function(e,t,r,i){var s=gs?gs+e:e;if(!this._events[s])return this;if(!t)return fw(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&fw(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&c.push(o[a]);c.length?this._events[s]=1===c.length?c[0]:c:fw(this,s)}return this},es.prototype.removeAllListeners=function(e){var t;return e?this._events[t=gs?gs+e:e]&&fw(this,t):(this._events=new gv,this._eventsCount=0),this},es.prototype.off=es.prototype.removeListener,es.prototype.addListener=es.prototype.on,es.prefixed=gs,es.EventEmitter=es,AO=es;var nh={};th(nh,"ConnectionType",()=>Jc),th(nh,"PeerErrorType",()=>Mr),th(nh,"BaseConnectionErrorType",()=>pw),th(nh,"DataConnectionErrorType",()=>gw),th(nh,"SerializationType",()=>mv),th(nh,"SocketEventType",()=>Xc),th(nh,"ServerMessageType",()=>Oi);var SO,Jc=function(n){return n.Data="data",n.Media="media",n}(Jc||{}),Mr=function(n){return n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc",n}(Mr||{}),pw=function(n){return n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed",n}(pw||{}),gw=function(n){return n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big",n}(gw||{}),mv=function(n){return n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw",n}(mv||{}),Xc=function(n){return n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close",n}(Xc||{}),Oi=function(n){return n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE",n}(Oi||{});SO=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class jve extends AO.EventEmitter{constructor(e,t,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[],this._baseUrl=(e?"wss://":"ws://")+t+":"+r+i+"peerjs?key="+s}start(e,t){this._id=e,this._socket||!this._disconnected||(this._socket=new WebSocket(`${this._baseUrl}&id=${e}&token=${t}&version=`+SO.version),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ze.log("Server message received:",s)}catch{return void Ze.log("Invalid server message",i.data)}this.emit(Xc.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ze.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Xc.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ze.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void Ze.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:Oi.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(Xc.Error,"Invalid message");if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class l5{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Jc.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,s=t.createDataChannel(r.label,{ordered:!!e.reliable});r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){Ze.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ze.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(Ze.log(`Received ICE candidates for ${t}:`,o.candidate),s.socket.send({type:Oi.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":Ze.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(pw.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":Ze.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(pw.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":Ze.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},Ze.log("Listening for data channel"),e.ondatachannel=o=>{Ze.log("Received data channel");const a=o.channel;s.getConnection(t,r)._initializeDataChannel(a)},Ze.log("Listening for remote stream"),e.ontrack=o=>{Ze.log("Received remote stream");const a=o.streams[0],c=s.getConnection(t,r);c.type===Jc.Media&&this._addStreamToMediaConnection(a,c)}}cleanup(){Ze.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&"closed"!==i.readyState),("closed"!==e.signalingState||r)&&e.close()}_makeOffer(){var e=this;return(0,S.A)(function*(){const t=e.connection.peerConnection,r=e.connection.provider;try{const i=yield t.createOffer(e.connection.options.constraints);Ze.log("Created offer."),e.connection.options.sdpTransform&&"function"==typeof e.connection.options.sdpTransform&&(i.sdp=e.connection.options.sdpTransform(i.sdp)||i.sdp);try{yield t.setLocalDescription(i),Ze.log("Set localDescription:",i,`for:${e.connection.peer}`);let s={sdp:i,type:e.connection.type,connectionId:e.connection.connectionId,metadata:e.connection.metadata};if(e.connection.type===Jc.Data){const o=e.connection;s={...s,label:o.label,reliable:o.reliable,serialization:o.serialization}}r.socket.send({type:Oi.Offer,payload:s,dst:e.connection.peer})}catch(s){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=s&&(r.emitError(Mr.WebRTC,s),Ze.log("Failed to setLocalDescription, ",s))}}catch(i){r.emitError(Mr.WebRTC,i),Ze.log("Failed to createOffer, ",i)}})()}_makeAnswer(){var e=this;return(0,S.A)(function*(){const t=e.connection.peerConnection,r=e.connection.provider;try{const i=yield t.createAnswer();Ze.log("Created answer."),e.connection.options.sdpTransform&&"function"==typeof e.connection.options.sdpTransform&&(i.sdp=e.connection.options.sdpTransform(i.sdp)||i.sdp);try{yield t.setLocalDescription(i),Ze.log("Set localDescription:",i,`for:${e.connection.peer}`),r.socket.send({type:Oi.Answer,payload:{sdp:i,type:e.connection.type,connectionId:e.connection.connectionId},dst:e.connection.peer})}catch(s){r.emitError(Mr.WebRTC,s),Ze.log("Failed to setLocalDescription, ",s)}}catch(i){r.emitError(Mr.WebRTC,i),Ze.log("Failed to create answer, ",i)}})()}handleSDP(e,t){var r=this;return(0,S.A)(function*(){t=new RTCSessionDescription(t);const i=r.connection.peerConnection,s=r.connection.provider;Ze.log("Setting remote description",t);const o=r;try{yield i.setRemoteDescription(t),Ze.log(`Set remoteDescription:${e} for:${r.connection.peer}`),"OFFER"===e&&(yield o._makeAnswer())}catch(a){s.emitError(Mr.WebRTC,a),Ze.log("Failed to setRemoteDescription, ",a)}})()}handleCandidate(e){var t=this;return(0,S.A)(function*(){Ze.log("handleCandidate:",e);try{yield t.connection.peerConnection.addIceCandidate(e),Ze.log(`Added ICE candidate for:${t.connection.peer}`)}catch(r){t.connection.provider.emitError(Mr.WebRTC,r),Ze.log("Failed to handleCandidate, ",r)}})()}_addTracksToConnection(e,t){if(Ze.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return Ze.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){Ze.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class u5 extends AO.EventEmitter{emitError(e,t){Ze.error("Error:",t),this.emit("error",new $ve(`${e}`,t))}}class $ve extends Error{constructor(e,t){"string"==typeof t?super(t):(super(),Object.assign(this,t)),this.type=e}}class d5 extends u5{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}class mw extends d5{static#e=this.ID_PREFIX="mc_";get type(){return Jc.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||mw.ID_PREFIX+Ps.randomToken(),this._negotiator=new l5(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ze.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ze.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){Ze.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case Oi.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case Oi.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ze.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void Ze.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class Hve{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${t}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",SO.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}retrieveId(){var e=this;return(0,S.A)(function*(){try{const t=yield e._buildRequest("id");if(200!==t.status)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ze.error("Error retrieving ID",t);let r="";throw"/"===e._options.path&&e._options.host!==Ps.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}})()}listAllPeers(){var e=this;return(0,S.A)(function*(){try{const t=yield e._buildRequest("peers");if(200!==t.status){if(401===t.status){let r="";throw r=e._options.host===Ps.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ze.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}})()}}class rh extends d5{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Jc.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||rh.ID_PREFIX+o5(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new l5(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{Ze.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{Ze.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{Ze.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e,t=!1){if(this.open)return this._send(e,t);this.emitError(gw.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}handleMessage(e){var t=this;return(0,S.A)(function*(){const r=e.payload;switch(e.type){case Oi.Answer:yield t._negotiator.handleSDP(e.type,r.sdp);break;case Oi.Candidate:yield t._negotiator.handleCandidate(r.candidate);break;default:Ze.warn("Unrecognized message type:",e.type,"from peer:",t.peer)}})()}}class RO extends rh{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>rh.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return Ze.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class NO extends RO{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new s5,this.serialization=mv.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=fz(e),r=t.__peerData;if(r)return"close"===r.type?void this.close():void this._handleChunk(t);this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const i=function Pve(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.byteLength;return t}(r.data);this._handleDataMessage({data:i})}}_send(e,t){const r=pz(e);if(r instanceof Promise)return this._send_blob(r);!t&&r.byteLength>this.chunker.chunkedMTU?this._sendChunks(r):this._bufferedSend(r)}_send_blob(e){var t=this;return(0,S.A)(function*(){const r=yield e;r.byteLength>t.chunker.chunkedMTU?t._sendChunks(r):t._bufferedSend(r)})()}_sendChunks(e){const t=this.chunker.chunk(e);Ze.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class Gve extends RO{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=mv.None}}class Wve extends RO{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;r&&"close"===r.type?this.close():this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));r.byteLength>=Ps.chunkedMTU?this.emitError(gw.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=mv.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class _w extends u5{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){let r;super(),this._serializers={raw:Gve,json:Wve,binary:NO,"binary-utf8":NO,default:NO},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:Ps.CLOUD_HOST,port:Ps.CLOUD_PORT,path:"/",key:_w.DEFAULT_KEY,token:Ps.randomToken(),config:Ps.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==Ps.CLOUD_HOST?this._options.secure=Ps.isSecure():this._options.host==Ps.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ze.setLogFunction(this._options.logFunction),Ze.logLevel=this._options.debug||0,this._api=new Hve(t),this._socket=this._createServerConnection(),Ps.supports.audioVideo||Ps.supports.data?!r||Ps.validateId(r)?r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Mr.ServerError,i)):this._delayedAbort(Mr.InvalidID,`ID "${r}" is invalid`):this._delayedAbort(Mr.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new jve(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Xc.Message,t=>{this._handleMessage(t)}),e.on(Xc.Error,t=>{this._abort(Mr.SocketError,t)}),e.on(Xc.Disconnected,()=>{this.disconnected||(this.emitError(Mr.Network,"Lost connection to server."),this.disconnect())}),e.on(Xc.Close,()=>{this.disconnected||this._abort(Mr.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,i=e.src;switch(t){case Oi.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Oi.Error:this._abort(Mr.ServerError,r.msg);break;case Oi.IdTaken:this._abort(Mr.UnavailableID,`ID "${this.id}" is taken`);break;case Oi.InvalidKey:this._abort(Mr.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Oi.Leave:Ze.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Oi.Expire:this.emitError(Mr.PeerUnavailable,`Could not connect to peer ${i}`);break;case Oi.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),Ze.warn(`Offer received for existing Connection ID:${s}`)),r.type===Jc.Media){const c=new mw(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=c,this._addConnection(i,o),this.emit("call",c)}else{if(r.type!==Jc.Data)return void Ze.warn(`Received malformed connection type:${r.type}`);{const c=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=c,this._addConnection(i,o),this.emit("connection",c)}}const a=this._getMessages(s);for(const c of a)o.handleMessage(c);break}default:{if(!r)return void Ze.warn(`You received a malformed message from ${i} of type ${t}`);const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):Ze.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected)return Ze.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(Mr.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected)return Ze.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(Mr.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!t)return void Ze.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const i=new mw(e,this,{...r,_stream:t});return this._addConnection(e,i),i}_addConnection(e,t){Ze.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===t)return i;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){Ze.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ze.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;Ze.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)Ze.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);Ze.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(e=(t=>{})){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(Mr.ServerError,t))}}var co={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},f5=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],p5=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],g5=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Os=typeof window<"u"&&typeof window.document<"u"?window.document:{},Lo="fullscreenEnabled"in Os&&Object.keys(co)||f5[0]in Os&&f5||p5[0]in Os&&p5||g5[0]in Os&&g5||[],qve={requestFullscreen:function(n){return n[Lo[co.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[Lo[co.requestFullscreen]]},get exitFullscreen(){return Os[Lo[co.exitFullscreen]].bind(Os)},get fullscreenPseudoClass(){return":"+Lo[co.fullscreen]},addEventListener:function(n,e,t){return Os.addEventListener(Lo[co[n]],e,t)},removeEventListener:function(n,e,t){return Os.removeEventListener(Lo[co[n]],e,t)},get fullscreenEnabled(){return!!Os[Lo[co.fullscreenEnabled]]},set fullscreenEnabled(n){},get fullscreenElement(){return Os[Lo[co.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return Os[("on"+Lo[co.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return Os[("on"+Lo[co.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return Os[("on"+Lo[co.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return Os[("on"+Lo[co.fullscreenerror]).toLowerCase()]=n}};const _v=qve,Kve=["localVideoStream"],Qve=["remoteVideoStream"],Yve=["fullScreen"];function Jve(n,e){if(1&n){const t=Zr();De(0,"button",45),at("click",function(){return Ct(t),xt(tt().answerCall())}),Jt(1,"i",46),et(2," Answer "),Te()}}function Xve(n,e){if(1&n&&(De(0,"h6",47),Jt(1,"i",48),et(2," Call Connected to "),De(3,"span",49),et(4),Te()()),2&n){const t=tt();xe(4),xa(" ",t.callerNumber.length?t.callerNumber:t.connectedCallNumber," ")}}function Zve(n,e){if(1&n){const t=Zr();De(0,"input",50),Dc("ngModelChange",function(i){Ct(t);const s=tt();return Fl(s.chatMessage,i)||(s.chatMessage=i),xt(i)}),at("keydown.enter",function(){Ct(t);const i=tt();return xt(i.sendMessage(i.chatMessage,i.authService.userData))}),Te()}2&n&&Cc("ngModel",tt().chatMessage)}function e0e(n,e){if(1&n&&(De(0,"div",53)(1,"div",54)(2,"span",55),Jt(3,"i",56),et(4),Te(),De(5,"span"),et(6),Te()()()),2&n){const t=e.$implicit,r=e.index,i=tt(2);Da(t.class),Yt("mb-2",r!==i.chatMessages.length-1),xe(4),tS(" ",t.user," (",t.sentMessage?"You":t.number,") "),xe(2),xa(" ",t.text," ")}}function t0e(n,e){if(1&n&&(De(0,"div",51),Nt(1,e0e,7,7,"div",52),Te()),2&n){const t=tt();xe(),It("ngForOf",t.chatMessages)}}let n0e=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.afAuth=r,this.router=i,this.sharedService=s,this.showSidebar=!0,this.isCollapsed=!0,this.chatMessage="",this.chatMessages=[],this.callerNumber="",this.callConnected=!1,this.hasFullscreenSupport=!1,this.incomingCall=!1}ngOnInit(){this.initializeFullscreenSupport(),this.generateNumber(),this.checkIncomingCall(),this.loadSounds()}initializeFullscreenSupport(){this.hasFullscreenSupport=_v.fullscreenEnabled,this.hasFullscreenSupport&&_v.addEventListener("fullscreenchange",()=>{this.isFullscreen=!!_v.fullscreenElement})}loadSounds(){this.callingAudio=this.createAudio("./assets/audio/calling.mp3",!0),this.messageAudio=this.createAudio("./assets/audio/message.mp3",!1)}createAudio(t,r){const i=new Audio;return i.src=t,i.load(),r&&i.addEventListener("ended",()=>{i.currentTime=0,i.play()},!1),i}checkIncomingCall(){this.peer.on("connection",t=>{this.handleDataConnection(t)}),this.peer.on("disconnected",()=>{this.hangUpAfterEvent("Peer Disconnected",!1)}),this.peer.on("error",()=>{this.hangUpAfterEvent("Number is Incorrect",!0)}),this.peer.on("call",t=>{this.handleIncomingCall(t)})}handleDataConnection(t){this.receivingDataConnection=t,t.on("data",r=>{this.handleIncomingData(r)}),t.on("close",()=>{this.hangUpAfterEvent("Call Disconnected by User",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Incoming Connection Error",!0)})}handleIncomingData(t){t.class="received-message",t.sentMessage=!1,this.chatMessages.unshift(t),this.messageAudio.play()}handleIncomingCall(t){this.receivingMediaConnection=t,this.incomingCall=!0,this.callingAudio.play()}generateNumber(){this.myNumber=Math.floor(9e4*Math.random())+1e4,this.peer=new _w(this.myNumber.toString(),{secure:!0})}callButton(t){var r=this;return(0,S.A)(function*(){const i=t.toString();r.activeDataConnection=r.peer.connect(i),r.setupDataConnectionHandlers(r.activeDataConnection,t);try{const s=yield r.getUserMediaStream();s&&r.setupMediaConnection(i,s)}catch{r.hangUpAfterEvent("Failed to get local stream",!0)}})()}setupDataConnectionHandlers(t,r){t.on("data",i=>{this.handleIncomingData(i)}),t.on("open",()=>{this.connectedCallNumber=r,this.callConnected=!0}),t.on("close",()=>{this.hangUpAfterEvent("User Call Ended",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Peer Connection Error",!0)})}getUserMediaStream(){return(0,S.A)(function*(){return yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0})})()}setupMediaConnection(t,r){this.myCallStream=r,this.localVideoStream.nativeElement.srcObject=r,this.activeMediaConnection=this.peer.call(t,r),this.setupMediaConnectionHandlers(this.activeMediaConnection)}setupMediaConnectionHandlers(t){t.on("stream",r=>{this.remoteVideoStream.nativeElement.srcObject=r}),t.on("close",()=>{this.hangUpAfterEvent("Active Call Closed",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Active Call Error",!0)})}answerCall(){var t=this;return(0,S.A)(function*(){try{const r=yield t.getUserMediaStream();r&&t.setupAnswerCall(r)}catch{t.hangUpAfterEvent("Failed to get Remote Stream",!0)}})()}setupAnswerCall(t){this.myCallStream=t,this.callerNumber=this.receivingMediaConnection.peer,this.localVideoStream.nativeElement.srcObject=t,this.receivingMediaConnection.answer(t),this.setupMediaConnectionHandlers(this.receivingMediaConnection),this.receivingMediaConnection.on("stream",r=>{this.callingAudio.pause(),this.incomingCall=!1,this.callConnected=!0,this.remoteVideoStream.nativeElement.srcObject=r})}hangUp(){this.closeConnections(),this.stopLocalStream(),this.resetCallState()}closeConnections(){this.activeDataConnection?.close(),this.activeMediaConnection?.close(),this.receivingDataConnection?.close(),this.receivingMediaConnection?.close()}stopLocalStream(){this.myCallStream?.getTracks()?.forEach(t=>t?.stop())}resetCallState(){this.localVideoStream.nativeElement.srcObject=null,this.remoteVideoStream.nativeElement.srcObject=null,this.incomingCall=!1,this.callConnected=!1}sendMessage(t,r){if(t?.length&&r?.displayName?.length){const i=this.createMessage(t,r.displayName);this.chatMessages.unshift(i),this.messageAudio.play(),this.chatMessage="",this.sendMessageToConnections(i)}}createMessage(t,r){return{text:t,user:r,number:this.myNumber,class:"sent-message",sentMessage:!0}}sendMessageToConnections(t){this.callConnected&&(this.activeDataConnection?.send(t),this.receivingDataConnection?.send(t))}hangUpAfterEvent(t,r){setTimeout(()=>{this.hangUp()},500),this.sharedService.showAlert({class:r?"error":"info",title:t,iconClass:"fa-solid fa-phone"})}signOut(){this.hangUp(),setTimeout(()=>{this.authService.SignOut()},1e3)}openFullscreen(){if(this.hasFullscreenSupport){const t=this.fullScreen.nativeElement;this.isFullscreen?_v.exitFullscreen(t):_v.requestFullscreen(t)}else this.sharedService.showAlert({class:"error",title:"Full Screen Not Supported. Please Try Disabling Adblocker or Other Extensions",iconClass:"fa-solid fa-phone"})}static{this.\u0275fac=function(r){return new(r||n)(Ce(gu),Ce(Iy),Ce(ds),Ce(uO))}}static{this.\u0275cmp=pr({type:n,selectors:[["app-dashboard"]],viewQuery:function(r,i){if(1&r&&(Ma(Kve,7),Ma(Qve,7),Ma(Yve,7)),2&r){let s;Cn(s=Dn())&&(i.localVideoStream=s.first),Cn(s=Dn())&&(i.remoteVideoStream=s.first),Cn(s=Dn())&&(i.fullScreen=s.first)}},decls:56,vars:11,consts:[["fullScreen",""],["remoteVideoStream",""],["localVideoStream",""],[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex","align-items-center"],[1,"nav-link","text-bg-dark","me-3",3,"click"],[1,"fa","fa-sign-out","me-2"],[1,"img","img-fluid","rounded-circle","me-2",2,"width","2rem",3,"src"],[1,"text-bg-dark"],[1,"container-xl"],[1,"title-number","justify-content-center","align-items-center","col-12","py-3","px-0"],[1,"alert","alert-success","text-align-center","m-0"],[1,"mb-0"],[1,"number"],[1,"main-body","row","d-flex","flex-wrap"],[1,"main","col","col-xl-8","pl-xl-0","pr-xl-3","col-lg-8","pl-lg-0","pr-lg-3","col-12","pb-3","border-end"],[1,"alert","alert-primary","d-flex","align-items-center"],[1,"fa-solid","fa-video","me-2"],[1,"dialer","d-flex"],[1,"input-group","me-2"],[1,"input-group-text"],[1,"fa-solid","fa-mobile-screen"],["type","number","placeholder","Call Number","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"fa-solid","fa-phone","me-1"],["type","button",1,"btn","btn-danger","me-2",3,"click","disabled"],[1,"fa-solid","fa-phone-slash","me-1"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"videos","mt-3",3,"hidden"],[1,"local-video"],["autoplay","","playsinline","",1,"rounded"],[1,"remote-video"],[1,"actions"],[1,"btn","btn-primary","rounded-circle","me-3",3,"click"],[1,"fa-solid","fa-expand"],[1,"btn","btn-danger","rounded-circle",3,"click"],[1,"fa-solid","fa-phone-slash"],[1,"chat","col","col-xl-4","pl-xl-3","pr-xl-0","col-lg-4","pl-lg-3","pr-lg-0","col-12","pb-3"],[1,"fa-solid","fa-comment-alt","me-2"],["class","alert alert-success",4,"ngIf"],[1,"form-group","mb-2"],["type","text","class","form-control","placeholder","Write Message","required","",3,"ngModel","ngModelChange","keydown.enter",4,"ngIf"],["class","messages form-control",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa-solid","fa-phone-volume","me-1"],[1,"alert","alert-success"],[1,"fa-solid","fa-user-alt","me-2"],[1,"text-danger"],["type","text","placeholder","Write Message","required","",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],[1,"messages","form-control"],["class","message",3,"mb-2","class",4,"ngFor","ngForOf"],[1,"message"],[1,"message-body"],[1,"user"],[1,"fa-solid","fa-user-alt","me-1"]],template:function(r,i){if(1&r){const s=Zr();De(0,"nav",3)(1,"div",4)(2,"a",5),et(3,"VideoWebRTC"),Te(),De(4,"form",6)(5,"a",7),at("click",function(){return Ct(s),xt(i.signOut())}),Jt(6,"i",8),et(7," Sign Out "),Te(),Jt(8,"img",9),De(9,"span",10),et(10),Te()()()(),De(11,"div",11)(12,"div",12)(13,"div",13)(14,"h4",14)(15,"span",15),et(16),Te(),et(17," is your phone number "),Te()()(),De(18,"div",16)(19,"div",17)(20,"h5",18),Jt(21,"i",19),et(22," Video "),Te(),De(23,"div",20)(24,"div",21)(25,"div",22),Jt(26,"i",23),Te(),De(27,"input",24),Dc("ngModelChange",function(a){return Ct(s),Fl(i.callNumber,a)||(i.callNumber=a),xt(a)}),Te()(),De(28,"button",25),at("click",function(){return Ct(s),xt(i.callButton(i.callNumber))}),Jt(29,"i",26),et(30," Call "),Te(),De(31,"button",27),at("click",function(){return Ct(s),xt(i.hangUp())}),Jt(32,"i",28),et(33," Hangup "),Te(),Nt(34,Jve,3,0,"button",29),Te(),De(35,"div",30,0)(37,"div",31),Jt(38,"video",32,1),Te(),De(40,"div",33),Jt(41,"video",32,2),Te(),De(43,"div",34)(44,"div",35),at("click",function(){return Ct(s),xt(i.openFullscreen())}),Jt(45,"i",36),Te(),De(46,"div",37),at("click",function(){return Ct(s),xt(i.hangUp())}),Jt(47,"i",38),Te()()()(),De(48,"div",39)(49,"h5",18),Jt(50,"i",40),et(51," Chat "),Te(),Nt(52,Xve,5,1,"h6",41),De(53,"div",42),Nt(54,Zve,1,1,"input",43),Te(),Nt(55,t0e,2,1,"div",44),Te()()()}2&r&&(xe(8),It("src",i.authService.userData.photoURL,ND),xe(2),hi(i.authService.userData.displayName),xe(6),xa(" ",i.myNumber," "),xe(11),Cc("ngModel",i.callNumber),xe(),It("disabled",!i.callNumber||i.callConnected||i.callNumber===i.myNumber),xe(3),It("disabled",!i.callConnected),xe(3),It("ngIf",i.incomingCall),xe(),It("hidden",!i.callConnected),xe(17),It("ngIf",i.callConnected),xe(2),It("ngIf",i.callConnected),xe(),It("ngIf",i.chatMessages.length))},dependencies:[$S,HE,Yf,md,y1,B_,zf,yd,Qf,$l],styles:[".nav-link[_ngcontent-%COMP%]{cursor:pointer}.user-logo[_ngcontent-%COMP%]{display:flex;color:var(--bs-white);align-items:center}.user-logo[_ngcontent-%COMP%]   img.img[_ngcontent-%COMP%]{width:40px;height:40px}.title-number[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--bs-danger);text-decoration:underline}.messages[_ngcontent-%COMP%]{overflow-y:auto;padding:.5rem}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;width:100%}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:3px 10px;border-radius:6px;background:#d4e9ff;border:1px solid #027bfe}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-weight:500;color:var(--bs-blue)}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]{justify-content:flex-end;text-align:right}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background:#ffe6e8;border:1px solid #ed858c}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:var(--bs-red)}.dialer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:50%}.videos[_ngcontent-%COMP%]{position:relative}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.55rem;display:flex}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;border:2px solid var(--bs-green)}.videos[_ngcontent-%COMP%]   .remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;width:20%;max-height:20%;border:2px solid var(--bs-yellow);right:2rem;bottom:2rem}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;bottom:25px;display:flex;align-items:center;justify-content:center;width:100%}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:38px;height:38px;display:flex;align-items:center;justify-content:center}@media (max-width: 1023px){.main[_ngcontent-%COMP%]{border-right:0!important}}"]})}}return n})(),r0e=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.resetPasswordForm={email:""}}static{this.\u0275fac=function(r){return new(r||n)(Ce(gu))}}static{this.\u0275cmp=pr({type:n,selectors:[["app-forgot-password"]],decls:23,vars:3,consts:[["userResetPasswordForm","ngForm"],["email","ngModel"],["name","userResetPasswordForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"text-center"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"validation-message"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(r,i){if(1&r){const s=Zr();De(0,"form",2,0)(2,"h4",3),Jt(3,"i",4),et(4," VideoWebRTC "),Te(),De(5,"div",5)(6,"h5"),et(7,"Reset Password"),Te(),De(8,"p",6),et(9,"Please enter your email address to "),Jt(10,"br"),et(11," request a password reset"),Te(),De(12,"div",7)(13,"input",8,1),Dc("ngModelChange",function(a){return Ct(s),Fl(i.resetPasswordForm.email,a)||(i.resetPasswordForm.email=a),xt(a)}),at("ngModelChange",function(){Ct(s);const a=hr(14);return xt(i.authService.getValidationMessage(a))}),Te(),De(15,"div",9),et(16),Te()(),De(17,"div",7)(18,"button",10),at("click",function(){return Ct(s),xt(i.authService.forgotPassword(i.resetPasswordForm.email))}),et(19," Reset Password "),Te()(),De(20,"div",11)(21,"span",12),et(22,"Go Back to ? Sign In"),Te()()()()}if(2&r){const s=hr(1),o=hr(14);xe(13),Cc("ngModel",i.resetPasswordForm.email),xe(3),hi(null==o||null==o.errors?null:o.errors.validationMessage),xe(2),It("disabled",s.invalid)}},dependencies:[Ed,Yf,md,B_,zf,yd,G_,Qf,$l]})}}return n})();function i0e(n,e){if(1&n&&(De(0,"div",5)(1,"p",10),et(2,"We have sent a confirmation email to "),De(3,"strong"),et(4),Te(),et(5,"."),Te(),De(6,"p",10),et(7,"Please check your email and click on the link to verfiy your email address."),Te()()),2&n){const t=e.ngIf;xe(4),hi(t.email)}}const s0e=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:Pye},{path:"register-user",component:Oye},{path:"dashboard",component:n0e,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!!this.authService.isLoggedIn||(this.router.navigate(["sign-in"],{state:{redirect:this.router.url}}),!1)}static{this.\u0275fac=function(r){return new(r||n)(Se(gu),Se(ds))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()]},{path:"forgot-password",component:r0e},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Ce(gu))}}static{this.\u0275cmp=pr({type:n,selectors:[["app-verify-email"]],decls:15,vars:2,consts:[["novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-redo-alt","me-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"],[1,"text-center"]],template:function(r,i){1&r&&(De(0,"form",0)(1,"h4",1),Jt(2,"i",2),et(3," VideoWebRTC "),Te(),De(4,"div",3)(5,"h5"),et(6,"Thank You for Registering"),Te(),Nt(7,i0e,8,1,"div",4),De(8,"div",5)(9,"button",6),at("click",function(){return i.authService.sendVerificationMail(i.authService.userData)}),Jt(10,"i",7),et(11," Resend Verification Email "),Te()(),De(12,"div",8)(13,"span",9),et(14,"Go Back to ? Sign In"),Te()()()()),2&r&&(xe(7),It("ngIf",i.authService.userData),xe(2),It("disabled",!i.authService.userData))},dependencies:[HE,Ed,Yf,zf,$l]})}}return n})()}];let o0e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({imports:[n3.forRoot(s0e),n3]})}}return n})();const u0e=["addListener","removeListener"],d0e=["addEventListener","removeEventListener"],h0e=["on","off"];function ki(n,e,t,r){if(Ge(t)&&(r=t,t=void 0),r)return ki(n,e,t).pipe(r1(r));const[i,s]=function g0e(n){return Ge(n.addEventListener)&&Ge(n.removeEventListener)}(n)?d0e.map(o=>a=>n[o](e,a,t)):function f0e(n){return Ge(n.addListener)&&Ge(n.removeListener)}(n)?u0e.map(m5(n,e)):function p0e(n){return Ge(n.on)&&Ge(n.off)}(n)?h0e.map(m5(n,e)):[];if(!i&&t1(n))return pi(o=>ki(o,e,t))(ni(n));if(!i)throw new TypeError("Invalid event target");return new Wt(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function m5(n,e){return t=>r=>n[t](e,r)}const{isArray:_0e}=Array;function y5(n){return 1===n.length&&_0e(n[0])?n[0]:n}function MO(...n){const e=KE(n),t=y5(n);return t.length?new Wt(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let o=0;!r.closed&&o<t.length;o++)ni(t[o]).subscribe(ut(r,a=>{if(i[o].push(a),i.every(c=>c.length)){const c=i.map(l=>l.shift());r.next(e?e(...c):c),i.some((l,h)=>!l.length&&s[h])&&r.complete()}},()=>{s[o]=!0,!i[o].length&&r.complete()}));return()=>{i=s=null}}):to}function xO(...n){const e=KE(n);return Rt((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)ni(n[c]).subscribe(ut(r,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(bs))&&(o=null))},kr));t.subscribe(ut(r,c=>{if(a){const l=[c,...s];r.next(e?e(...l):l)}}))})}Math,Math,Math;const L5=["*"],tEe=["dialog"];function VEe(n,e){if(1&n&&(De(0,"strong",3),et(1),Te()),2&n){const t=tt();xe(),hi(t.header)}}function BEe(n,e){}function UEe(n,e){if(1&n){const t=Zr();De(0,"div",1),Nt(1,BEe,0,0,"ng-template",4),De(2,"button",5),at("click",function(){return Ct(t),xt(tt().hide())}),Te()()}if(2&n){const t=tt(),r=hr(1);xe(),It("ngTemplateOutlet",t.contentHeaderTpl||r)}}const B5={animation:!0,transitionTimerDelayMs:5};let wv=(()=>{class n{constructor(){this.animation=B5.animation}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dg(n){return"string"==typeof n}function oh(n){return null!=n}function hg(n){return(n||document.body).getBoundingClientRect()}const YEe=()=>{},{transitionTimerDelayMs:JEe}=B5,Cv=new Map,Ls=(n,e,t,r)=>{let i=r.context||{};const s=Cv.get(e);if(s)switch(r.runningTransition){case"continue":return to;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),Cv.delete(e)}const o=t(e,r.animation,i)||YEe;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),st(void 0).pipe(function QEe(n){return e=>new Wt(t=>e.subscribe({next:o=>n.run(()=>t.next(o)),error:o=>n.run(()=>t.error(o)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new G,c=new G,l=a.pipe(function v0e(...n){return e=>W_(e,st(...n))}(!0));Cv.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const h=function zEe(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const g=ki(e,"transitionend").pipe(Ri(l),Sr(({target:v})=>v===e));(function v5(...n){return 1===(n=y5(n)).length?ni(n[0]):new Wt(function y0e(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push(ni(n[r]).subscribe(ut(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))})(function _5(n=0,e,t=Lfe){let r=-1;return null!=e&&(Xj(e)?t=e:r=e),new Wt(i=>{let s=function m0e(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(h+JEe).pipe(Ri(l)),g,c).pipe(Ri(l)).subscribe(()=>{Cv.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let z5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),q5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Y5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),J5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})();var Un=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(Un||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const iq=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function sq(n){const e=Array.from(n.querySelectorAll(iq)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Eq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Tq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),eTe=(()=>{class n{constructor(){this._ngbConfig=U(wv),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class dh{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let tTe=(()=>{class n{constructor(){this._document=U(ti)}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:o}=i;if(t>0){const a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=o),i.overflow=s}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nTe=(()=>{class n{constructor(){this._nativeElement=U(wn).nativeElement,this._zone=U(Pt)}ngOnInit(){this._zone.onStable.asObservable().pipe(gi(1)).subscribe(()=>{Ls(this._zone,this._nativeElement,(t,r)=>{r&&hg(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Ls(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pr({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,i){2&r&&(Da("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Yt("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Mo],decls:0,vars:0,template:function(r,i){},encapsulation:2})}}return n})();class wq{update(e){}close(e){}dismiss(e){}}const rTe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],iTe=["animation","backdropClass"];class sTe{_applyWindowOptions(e,t){rTe.forEach(r=>{oh(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){iTe.forEach(r=>{oh(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ri(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ri(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new G,this._dismissed=new G,this._hidden=new G,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function U5(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():st(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),MO(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var nk=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(nk||{});let oTe=(()=>{class n{constructor(){this._document=U(ti),this._elRef=U(wn),this._zone=U(Pt),this._closed$=new G,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new lt,this.shown=new G,this.hidden=new G}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":dg(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(gi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=MO(Ls(this._zone,t,()=>t.classList.remove("show"),r),Ls(this._zone,this._dialogEl.nativeElement,()=>{},r));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};MO(Ls(this._zone,this._elRef.nativeElement,(s,o)=>{o&&hg(s),s.classList.add("show")},t),Ls(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{ki(t,"keydown").pipe(Ri(this._closed$),Sr(i=>i.which===Un.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(nk.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;ki(this._dialogEl.nativeElement,"mousedown").pipe(Ri(this._closed$),mi(()=>r=!1),Hr(()=>ki(t,"mouseup").pipe(Ri(this._closed$),gi(1))),Sr(({target:i})=>t===i)).subscribe(()=>{r=!0}),ki(t,"click").pipe(Ri(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(nk.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=sq(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Ls(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pr({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(r,i){if(1&r&&Ma(tEe,7),2&r){let s;Cn(s=Dn())&&(i._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,i){2&r&&(Mn("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Da("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Yt("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Mo],ngContentSelectors:L5,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,i){1&r&&(XA(),De(0,"div",1,0)(2,"div",2),ZA(3),Te()()),2&r&&Da("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return n})(),aTe=(()=>{class n{constructor(){this._applicationRef=U(Ac),this._injector=U(dr),this._environmentInjector=U(Kr),this._document=U(ti),this._scrollBar=U(tTe),this._activeWindowCmptHasChanged=new G,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new lt;const t=U(Pt);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const r=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=ki(e,"focusin").pipe(Ri(t),Le(s=>s.target));ki(e,"keydown").pipe(Ri(t),Sr(s=>s.which===Un.Tab),xO(i)).subscribe(([s,o])=>{const[a,c]=sq(e);(o===a||o===e)&&s.shiftKey&&(c.focus(),s.preventDefault()),o===c&&!s.shiftKey&&(a.focus(),s.preventDefault())}),r&&ki(e,"click").pipe(Ri(t),xO(i),Le(s=>s[1])).subscribe(s=>s.focus())})})(t,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const s=i.container instanceof HTMLElement?i.container:oh(i.container)?this._document.querySelector(i.container):this._document.body;if(!s)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const o=new wq,a=(t=i.injector||t).get(Kr,null)||this._environmentInjector,c=this._getContentRef(t,a,r,o,i);let l=!1!==i.backdrop?this._attachBackdrop(s):void 0,h=this._attachWindowComponent(s,c.nodes),g=new sTe(h,c,l,i.beforeDismiss);return this._registerModalRef(g),this._registerWindowCmpt(h),g.hidden.pipe(gi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),o.close=_=>{g.close(_)},o.dismiss=_=>{g.dismiss(_)},o.update=_=>{g.update(_)},g.update(i),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),l&&l.instance&&l.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),g}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=SS(nTe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=SS(oTe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,r,i,s,o){return i?i instanceof wr?this._createFromTemplateRef(i,s):dg(i)?this._createFromString(i):this._createFromComponent(t,r,i,s,o):new dh([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(o){r.close(o)},dismiss(o){r.dismiss(o)}});return this._applicationRef.attachView(s),new dh([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new dh([[r]])}_createFromComponent(t,r,i,s,o){const c=SS(i,{environmentInjector:r,elementInjector:dr.create({providers:[{provide:wq,useValue:s}],parent:t})}),l=c.location.nativeElement;return o.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new dh([[l]],c.hostView,c)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cTe=(()=>{class n{constructor(){this._injector=U(dr),this._modalStack=U(aTe),this._config=U(eTe)}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({providers:[cTe]})}}return n})(),Sq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Fq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Lq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Vq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Bq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Uq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),jq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),ITe=(()=>{class n{constructor(){this._ngbConfig=U(wv),this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const TTe=(n,e)=>{const{classList:t}=n;if(e)return t.add("fade"),hg(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},wTe=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let CTe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Be({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0})}}return n})(),DTe=(()=>{class n{constructor(t){this.ariaLive=t,this._config=U(ITe),this._zone=U(Pt),this._element=U(wn),this.animation=this._config.animation,this.delay=this._config.delay,this.autohide=this._config.autohide,this.contentHeaderTpl=null,this.shown=new lt,this.hidden=new lt,this.ariaLive??=this._config.ariaLive}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(gi(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=Ls(this._zone,this._element.nativeElement,wTe,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=Ls(this._zone,this._element.nativeElement,TTe,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}static{this.\u0275fac=function(r){return new(r||n)(Xo("aria-live"))}}static{this.\u0275cmp=pr({type:n,selectors:[["ngb-toast"]],contentQueries:function(r,i,s){if(1&r&&Ur(s,CTe,7,wr),2&r){let o;Cn(o=Dn())&&(i.contentHeaderTpl=o.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(r,i){2&r&&(Mn("aria-live",i.ariaLive),Yt("fade",i.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[Br,Mo],ngContentSelectors:L5,decls:5,vars:1,consts:()=>{let t;return t=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[1,"toast-header"],[1,"toast-body"],[1,"me-auto"],[3,"ngTemplateOutlet"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(r,i){1&r&&(XA(),Nt(0,VEe,2,1,"ng-template",null,0,na)(2,UEe,3,1,"div",1),De(3,"div",2),ZA(4),Te()),2&r&&(xe(2),Xr(2,i.contentHeaderTpl||i.header?2:-1))},dependencies:[Gf],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2})}}return n})(),sk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),$q=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})();new Me("live announcer delay",{providedIn:"root",factory:()=>100});let Hq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Gq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({})}}return n})();const STe=[z5,q5,Y5,J5,Eq,Tq,Cq,Sq,Gq,Fq,Lq,Vq,Bq,Uq,jq,sk,$q,Hq];let RTe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({imports:[STe,z5,q5,Y5,J5,Eq,Tq,Cq,Sq,Gq,Fq,Lq,Vq,Bq,Uq,jq,sk,$q,Hq]})}}return n})();function NTe(n,e){if(1&n&&(De(0,"div",10),Jt(1,"i"),Te()),2&n){const t=tt().$implicit;xe(),Da(null==t?null:t.iconClass)}}function MTe(n,e){if(1&n&&(De(0,"div",11),et(1),Te()),2&n){const t=tt().$implicit;xe(),xa(" ",t.body," ")}}function xTe(n,e){if(1&n){const t=Zr();De(0,"button",14),at("click",function(){const i=Ct(t).$implicit,s=tt(2).$implicit;return xt(null==i?null:i.handler(s))}),Jt(1,"i"),et(2),Te()}if(2&n){const t=e.$implicit;Da(null!=t&&t.class?null==t?null:t.class:"btn-secondary"),It("disabled",null==t?null:t.disabled),xe(),Da(null==t?null:t.icon),xe(),xa(" ",null==t?null:t.text," ")}}function PTe(n,e){if(1&n&&(De(0,"div",12),Nt(1,xTe,3,6,"button",13),Te()),2&n){const t=tt().$implicit;xe(),It("ngForOf",t.buttons)}}function OTe(n,e){if(1&n){const t=Zr();De(0,"ngb-toast",1),at("hidden",function(){const i=Ct(t).$implicit;return xt(tt().sharedService.hideAlert(i))}),De(1,"div",2)(2,"div",3),Nt(3,NTe,2,2,"div",4),De(4,"div",5),et(5),Te(),De(6,"div",6),at("click",function(){const i=Ct(t).$implicit;return xt(tt().sharedService.hideAlert(i))}),Jt(7,"i",7),Te()(),Nt(8,MTe,2,1,"div",8),Te(),Nt(9,PTe,2,1,"div",9),Te()}if(2&n){const t=e.$implicit;Da(null==t?null:t.class),It("autohide",!0)("delay",7e3),xe(3),It("ngIf",null==t?null:t.iconClass),xe(2),hi(t.title),xe(3),It("ngIf",t.body),xe(),It("ngIf",null==t||null==t.buttons?null:t.buttons.length)}}let kTe=(()=>{class n{constructor(t){this.sharedService=t}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Ce(uO))}}static{this.\u0275cmp=pr({type:n,selectors:[["app-global-toast"]],hostAttrs:[1,"toast-container","position-fixed","top-0","end-0","p-4",2,"z-index","9999"],decls:1,vars:1,consts:[[3,"class","autohide","delay","hidden",4,"ngFor","ngForOf"],[3,"hidden","autohide","delay"],[1,"row","content"],[1,"row","title"],["class","row icon",4,"ngIf"],[1,"row","text"],[1,"row","close",3,"click"],[1,"fa-solid","fa-xmark"],["class","row body",4,"ngIf"],["class","row actions",4,"ngIf"],[1,"row","icon"],[1,"row","body"],[1,"row","actions"],["class","row btn btn-sm",3,"class","disabled","click",4,"ngFor","ngForOf"],[1,"row","btn","btn-sm",3,"click","disabled"]],template:function(r,i){1&r&&Nt(0,OTe,10,8,"ngb-toast",0),2&r&&It("ngForOf",i.sharedService.toasts)},dependencies:[$S,HE,DTe]})}}return n})(),FTe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=pr({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&Jt(0,"router-outlet")(1,"app-global-toast")},dependencies:[H1,kTe]})}}return n})(),LTe=(()=>{class n{constructor(t){this.authService=t}intercept(t,r){return zn(this.authService.getToken()).pipe(gi(1),Hr(i=>(i&&(t=t.clone({setHeaders:{"X-Firebase-AppCheck":i?.token}})),r.handle(t))))}static{this.\u0275fac=function(r){return new(r||n)(Se(gu))}}static{this.\u0275prov=Ne({token:n,factory:n.\u0275fac})}}return n})();const e9=new Me("");let hwe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n})}static{this.\u0275inj=Kt({imports:[gj,sk]})}}return n})(),fwe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Bt({type:n,bootstrap:[FTe]})}static{this.\u0275inj=Kt({providers:[gu,{provide:e9,useClass:LTe,multi:!0}],imports:[Gie,o0e,Jfe.initializeApp(QI_firebase),rpe,xye,hoe,hwe,RTe]})}}return n})();$ie().bootstrapModule(fwe).catch(n=>console.error(n))},80:Ii=>{const _e={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};_e.localCName=_e.generateIdentifier(),_e.splitLines=function(N){return N.trim().split("\n").map(I=>I.trim())},_e.splitSections=function(N){return N.split("\nm=").map((Z,oe)=>(oe>0?"m="+Z:Z).trim()+"\r\n")},_e.getDescription=function(N){const I=_e.splitSections(N);return I&&I[0]},_e.getMediaSections=function(N){const I=_e.splitSections(N);return I.shift(),I},_e.matchPrefix=function(N,I){return _e.splitLines(N).filter(Z=>0===Z.indexOf(I))},_e.parseCandidate=function(N){let I;I=0===N.indexOf("a=candidate:")?N.substring(12).split(" "):N.substring(10).split(" ");const Z={foundation:I[0],component:{1:"rtp",2:"rtcp"}[I[1]]||I[1],protocol:I[2].toLowerCase(),priority:parseInt(I[3],10),ip:I[4],address:I[4],port:parseInt(I[5],10),type:I[7]};for(let oe=8;oe<I.length;oe+=2)switch(I[oe]){case"raddr":Z.relatedAddress=I[oe+1];break;case"rport":Z.relatedPort=parseInt(I[oe+1],10);break;case"tcptype":Z.tcpType=I[oe+1];break;case"ufrag":Z.ufrag=I[oe+1],Z.usernameFragment=I[oe+1];break;default:void 0===Z[I[oe]]&&(Z[I[oe]]=I[oe+1])}return Z},_e.writeCandidate=function(N){const I=[];I.push(N.foundation);const Z=N.component;I.push("rtp"===Z?1:"rtcp"===Z?2:Z),I.push(N.protocol.toUpperCase()),I.push(N.priority),I.push(N.address||N.ip),I.push(N.port);const oe=N.type;return I.push("typ"),I.push(oe),"host"!==oe&&N.relatedAddress&&N.relatedPort&&(I.push("raddr"),I.push(N.relatedAddress),I.push("rport"),I.push(N.relatedPort)),N.tcpType&&"tcp"===N.protocol.toLowerCase()&&(I.push("tcptype"),I.push(N.tcpType)),(N.usernameFragment||N.ufrag)&&(I.push("ufrag"),I.push(N.usernameFragment||N.ufrag)),"candidate:"+I.join(" ")},_e.parseIceOptions=function(N){return N.substring(14).split(" ")},_e.parseRtpMap=function(N){let I=N.substring(9).split(" ");const Z={payloadType:parseInt(I.shift(),10)};return I=I[0].split("/"),Z.name=I[0],Z.clockRate=parseInt(I[1],10),Z.channels=3===I.length?parseInt(I[2],10):1,Z.numChannels=Z.channels,Z},_e.writeRtpMap=function(N){let I=N.payloadType;void 0!==N.preferredPayloadType&&(I=N.preferredPayloadType);const Z=N.channels||N.numChannels||1;return"a=rtpmap:"+I+" "+N.name+"/"+N.clockRate+(1!==Z?"/"+Z:"")+"\r\n"},_e.parseExtmap=function(N){const I=N.substring(9).split(" ");return{id:parseInt(I[0],10),direction:I[0].indexOf("/")>0?I[0].split("/")[1]:"sendrecv",uri:I[1],attributes:I.slice(2).join(" ")}},_e.writeExtmap=function(N){return"a=extmap:"+(N.id||N.preferredId)+(N.direction&&"sendrecv"!==N.direction?"/"+N.direction:"")+" "+N.uri+(N.attributes?" "+N.attributes:"")+"\r\n"},_e.parseFmtp=function(N){const I={};let Z;const oe=N.substring(N.indexOf(" ")+1).split(";");for(let K=0;K<oe.length;K++)Z=oe[K].trim().split("="),I[Z[0].trim()]=Z[1];return I},_e.writeFmtp=function(N){let I="",Z=N.payloadType;if(void 0!==N.preferredPayloadType&&(Z=N.preferredPayloadType),N.parameters&&Object.keys(N.parameters).length){const oe=[];Object.keys(N.parameters).forEach(K=>{oe.push(void 0!==N.parameters[K]?K+"="+N.parameters[K]:K)}),I+="a=fmtp:"+Z+" "+oe.join(";")+"\r\n"}return I},_e.parseRtcpFb=function(N){const I=N.substring(N.indexOf(" ")+1).split(" ");return{type:I.shift(),parameter:I.join(" ")}},_e.writeRtcpFb=function(N){let I="",Z=N.payloadType;return void 0!==N.preferredPayloadType&&(Z=N.preferredPayloadType),N.rtcpFeedback&&N.rtcpFeedback.length&&N.rtcpFeedback.forEach(oe=>{I+="a=rtcp-fb:"+Z+" "+oe.type+(oe.parameter&&oe.parameter.length?" "+oe.parameter:"")+"\r\n"}),I},_e.parseSsrcMedia=function(N){const I=N.indexOf(" "),Z={ssrc:parseInt(N.substring(7,I),10)},oe=N.indexOf(":",I);return oe>-1?(Z.attribute=N.substring(I+1,oe),Z.value=N.substring(oe+1)):Z.attribute=N.substring(I+1),Z},_e.parseSsrcGroup=function(N){const I=N.substring(13).split(" ");return{semantics:I.shift(),ssrcs:I.map(Z=>parseInt(Z,10))}},_e.getMid=function(N){const I=_e.matchPrefix(N,"a=mid:")[0];if(I)return I.substring(6)},_e.parseFingerprint=function(N){const I=N.substring(14).split(" ");return{algorithm:I[0].toLowerCase(),value:I[1].toUpperCase()}},_e.getDtlsParameters=function(N,I){return{role:"auto",fingerprints:_e.matchPrefix(N+I,"a=fingerprint:").map(_e.parseFingerprint)}},_e.writeDtlsParameters=function(N,I){let Z="a=setup:"+I+"\r\n";return N.fingerprints.forEach(oe=>{Z+="a=fingerprint:"+oe.algorithm+" "+oe.value+"\r\n"}),Z},_e.parseCryptoLine=function(N){const I=N.substring(9).split(" ");return{tag:parseInt(I[0],10),cryptoSuite:I[1],keyParams:I[2],sessionParams:I.slice(3)}},_e.writeCryptoLine=function(N){return"a=crypto:"+N.tag+" "+N.cryptoSuite+" "+("object"==typeof N.keyParams?_e.writeCryptoKeyParams(N.keyParams):N.keyParams)+(N.sessionParams?" "+N.sessionParams.join(" "):"")+"\r\n"},_e.parseCryptoKeyParams=function(N){if(0!==N.indexOf("inline:"))return null;const I=N.substring(7).split("|");return{keyMethod:"inline",keySalt:I[0],lifeTime:I[1],mkiValue:I[2]?I[2].split(":")[0]:void 0,mkiLength:I[2]?I[2].split(":")[1]:void 0}},_e.writeCryptoKeyParams=function(N){return N.keyMethod+":"+N.keySalt+(N.lifeTime?"|"+N.lifeTime:"")+(N.mkiValue&&N.mkiLength?"|"+N.mkiValue+":"+N.mkiLength:"")},_e.getCryptoParameters=function(N,I){return _e.matchPrefix(N+I,"a=crypto:").map(_e.parseCryptoLine)},_e.getIceParameters=function(N,I){const Z=_e.matchPrefix(N+I,"a=ice-ufrag:")[0],oe=_e.matchPrefix(N+I,"a=ice-pwd:")[0];return Z&&oe?{usernameFragment:Z.substring(12),password:oe.substring(10)}:null},_e.writeIceParameters=function(N){let I="a=ice-ufrag:"+N.usernameFragment+"\r\na=ice-pwd:"+N.password+"\r\n";return N.iceLite&&(I+="a=ice-lite\r\n"),I},_e.parseRtpParameters=function(N){const I={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},oe=_e.splitLines(N)[0].split(" ");I.profile=oe[2];for(let S=3;S<oe.length;S++){const At=oe[S],pt=_e.matchPrefix(N,"a=rtpmap:"+At+" ")[0];if(pt){const jt=_e.parseRtpMap(pt),gt=_e.matchPrefix(N,"a=fmtp:"+At+" ");switch(jt.parameters=gt.length?_e.parseFmtp(gt[0]):{},jt.rtcpFeedback=_e.matchPrefix(N,"a=rtcp-fb:"+At+" ").map(_e.parseRtcpFb),I.codecs.push(jt),jt.name.toUpperCase()){case"RED":case"ULPFEC":I.fecMechanisms.push(jt.name.toUpperCase())}}}_e.matchPrefix(N,"a=extmap:").forEach(S=>{I.headerExtensions.push(_e.parseExtmap(S))});const K=_e.matchPrefix(N,"a=rtcp-fb:* ").map(_e.parseRtcpFb);return I.codecs.forEach(S=>{K.forEach(At=>{S.rtcpFeedback.find(jt=>jt.type===At.type&&jt.parameter===At.parameter)||S.rtcpFeedback.push(At)})}),I},_e.writeRtpDescription=function(N,I){let Z="";Z+="m="+N+" ",Z+=I.codecs.length>0?"9":"0",Z+=" "+(I.profile||"UDP/TLS/RTP/SAVPF")+" ",Z+=I.codecs.map(K=>void 0!==K.preferredPayloadType?K.preferredPayloadType:K.payloadType).join(" ")+"\r\n",Z+="c=IN IP4 0.0.0.0\r\n",Z+="a=rtcp:9 IN IP4 0.0.0.0\r\n",I.codecs.forEach(K=>{Z+=_e.writeRtpMap(K),Z+=_e.writeFmtp(K),Z+=_e.writeRtcpFb(K)});let oe=0;return I.codecs.forEach(K=>{K.maxptime>oe&&(oe=K.maxptime)}),oe>0&&(Z+="a=maxptime:"+oe+"\r\n"),I.headerExtensions&&I.headerExtensions.forEach(K=>{Z+=_e.writeExtmap(K)}),Z},_e.parseRtpEncodingParameters=function(N){const I=[],Z=_e.parseRtpParameters(N),oe=-1!==Z.fecMechanisms.indexOf("RED"),K=-1!==Z.fecMechanisms.indexOf("ULPFEC"),S=_e.matchPrefix(N,"a=ssrc:").map(ue=>_e.parseSsrcMedia(ue)).filter(ue=>"cname"===ue.attribute),At=S.length>0&&S[0].ssrc;let pt;const jt=_e.matchPrefix(N,"a=ssrc-group:FID").map(ue=>ue.substring(17).split(" ").map(We=>parseInt(We,10)));jt.length>0&&jt[0].length>1&&jt[0][0]===At&&(pt=jt[0][1]),Z.codecs.forEach(ue=>{if("RTX"===ue.name.toUpperCase()&&ue.parameters.apt){let re={ssrc:At,codecPayloadType:parseInt(ue.parameters.apt,10)};At&&pt&&(re.rtx={ssrc:pt}),I.push(re),oe&&(re=JSON.parse(JSON.stringify(re)),re.fec={ssrc:At,mechanism:K?"red+ulpfec":"red"},I.push(re))}}),0===I.length&&At&&I.push({ssrc:At});let gt=_e.matchPrefix(N,"b=");return gt.length&&(gt=0===gt[0].indexOf("b=TIAS:")?parseInt(gt[0].substring(7),10):0===gt[0].indexOf("b=AS:")?1e3*parseInt(gt[0].substring(5),10)*.95-16e3:void 0,I.forEach(ue=>{ue.maxBitrate=gt})),I},_e.parseRtcpParameters=function(N){const I={},Z=_e.matchPrefix(N,"a=ssrc:").map(S=>_e.parseSsrcMedia(S)).filter(S=>"cname"===S.attribute)[0];Z&&(I.cname=Z.value,I.ssrc=Z.ssrc);const oe=_e.matchPrefix(N,"a=rtcp-rsize");I.reducedSize=oe.length>0,I.compound=0===oe.length;const K=_e.matchPrefix(N,"a=rtcp-mux");return I.mux=K.length>0,I},_e.writeRtcpParameters=function(N){let I="";return N.reducedSize&&(I+="a=rtcp-rsize\r\n"),N.mux&&(I+="a=rtcp-mux\r\n"),void 0!==N.ssrc&&N.cname&&(I+="a=ssrc:"+N.ssrc+" cname:"+N.cname+"\r\n"),I},_e.parseMsid=function(N){let I;const Z=_e.matchPrefix(N,"a=msid:");if(1===Z.length)return I=Z[0].substring(7).split(" "),{stream:I[0],track:I[1]};const oe=_e.matchPrefix(N,"a=ssrc:").map(K=>_e.parseSsrcMedia(K)).filter(K=>"msid"===K.attribute);return oe.length>0?(I=oe[0].value.split(" "),{stream:I[0],track:I[1]}):void 0},_e.parseSctpDescription=function(N){const I=_e.parseMLine(N),Z=_e.matchPrefix(N,"a=max-message-size:");let oe;Z.length>0&&(oe=parseInt(Z[0].substring(19),10)),isNaN(oe)&&(oe=65536);const K=_e.matchPrefix(N,"a=sctp-port:");if(K.length>0)return{port:parseInt(K[0].substring(12),10),protocol:I.fmt,maxMessageSize:oe};const S=_e.matchPrefix(N,"a=sctpmap:");if(S.length>0){const At=S[0].substring(10).split(" ");return{port:parseInt(At[0],10),protocol:At[1],maxMessageSize:oe}}},_e.writeSctpDescription=function(N,I){let Z=[];return Z="DTLS/SCTP"!==N.protocol?["m="+N.kind+" 9 "+N.protocol+" "+I.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+I.port+"\r\n"]:["m="+N.kind+" 9 "+N.protocol+" "+I.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+I.port+" "+I.protocol+" 65535\r\n"],void 0!==I.maxMessageSize&&Z.push("a=max-message-size:"+I.maxMessageSize+"\r\n"),Z.join("")},_e.generateSessionId=function(){return Math.random().toString().substr(2,22)},_e.writeSessionBoilerplate=function(N,I,Z){let oe;const K=void 0!==I?I:2;return oe=N||_e.generateSessionId(),"v=0\r\no="+(Z||"thisisadapterortc")+" "+oe+" "+K+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},_e.getDirection=function(N,I){const Z=_e.splitLines(N);for(let oe=0;oe<Z.length;oe++)switch(Z[oe]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return Z[oe].substring(2)}return I?_e.getDirection(I):"sendrecv"},_e.getKind=function(N){return _e.splitLines(N)[0].split(" ")[0].substring(2)},_e.isRejected=function(N){return"0"===N.split(" ",2)[1]},_e.parseMLine=function(N){const Z=_e.splitLines(N)[0].substring(2).split(" ");return{kind:Z[0],port:parseInt(Z[1],10),protocol:Z[2],fmt:Z.slice(3).join(" ")}},_e.parseOLine=function(N){const Z=_e.matchPrefix(N,"o=")[0].substring(2).split(" ");return{username:Z[0],sessionId:Z[1],sessionVersion:parseInt(Z[2],10),netType:Z[3],addressType:Z[4],address:Z[5]}},_e.isValidSDP=function(N){if("string"!=typeof N||0===N.length)return!1;const I=_e.splitLines(N);for(let Z=0;Z<I.length;Z++)if(I[Z].length<2||"="!==I[Z].charAt(1))return!1;return!0},Ii.exports=_e},574:(Ii,_e,N)=>{N.d(_e,{A:()=>fr});var I=N(401),Z=N(779),oe=N(156),K=N(398);class S{constructor(yt,wt){this._delegate=yt,this.firebase=wt,(0,oe._addComponent)(yt,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(yt,wt=oe._DEFAULT_ENTRY_NAME){var On;this._delegate.checkDestroyed();const Pr=this._delegate.container.getProvider(yt);return!Pr.isInitialized()&&"EXPLICIT"===(null===(On=Pr.getComponent())||void 0===On?void 0:On.instantiationMode)&&Pr.initialize(),Pr.getImmediate({identifier:wt})}_removeServiceInstance(yt,wt=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(wt)}_addComponent(yt){(0,oe._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,oe._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pt=new I.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ue=function gt(){const Gt=function jt(Gt){const yt={},wt={__esModule:!0,initializeApp:function pn(ot,$n={}){const gn=oe.initializeApp(ot,$n);if((0,I.gR)(yt,gn.name))return yt[gn.name];const ve=new Gt(gn,wt);return yt[gn.name]=ve,ve},app:Pr,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function en(ot){const $n=ot.name,gn=$n.replace("-compat","");if(oe._registerComponent(ot)&&"PUBLIC"===ot.type){const ve=(mn=Pr())=>{if("function"!=typeof mn[gn])throw pt.create("invalid-app-argument",{appName:$n});return mn[gn]()};void 0!==ot.serviceProps&&(0,I.zw)(ve,ot.serviceProps),wt[gn]=ve,Gt.prototype[gn]=function(...mn){return this._getService.bind(this,$n).apply(this,ot.multipleInstances?mn:[])}}return"PUBLIC"===ot.type?wt[gn]:null},removeApp:function On(ot){delete yt[ot]},useAsService:function Ti(ot,$n){return"serverAuth"===$n?null:$n},modularAPIs:oe}};function Pr(ot){if(!(0,I.gR)(yt,ot=ot||oe._DEFAULT_ENTRY_NAME))throw pt.create("no-app",{appName:ot});return yt[ot]}return wt.default=wt,Object.defineProperty(wt,"apps",{get:function Zt(){return Object.keys(yt).map(ot=>yt[ot])}}),Pr.App=Gt,wt}(S);return Gt.INTERNAL=Object.assign(Object.assign({},Gt.INTERNAL),{createFirebaseNamespace:gt,extendNamespace:function yt(wt){(0,I.zw)(Gt,wt)},createSubscribe:I.tD,ErrorFactory:I.FA,deepExtend:I.zw}),Gt}(),re=new K.Vy("@firebase/app-compat");try{const Gt=(0,I.mS)();if(void 0!==Gt.firebase){re.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const yt=Gt.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&re.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const fr=ue;!function Ht(Gt){(0,oe.registerVersion)("@firebase/app-compat","0.2.43",Gt)}()},156:(Ii,_e,N)=>{N.r(_e),N.d(_e,{FirebaseError:()=>K.g,SDK_VERSION:()=>jo,_DEFAULT_ENTRY_NAME:()=>Or,_addComponent:()=>wu,_addOrOverwriteComponent:()=>ec,_apps:()=>kr,_clearComponents:()=>fa,_components:()=>Hi,_getProvider:()=>_o,_isFirebaseApp:()=>ha,_isFirebaseServerApp:()=>vs,_registerComponent:()=>Fr,_removeServiceInstance:()=>yo,_serverApps:()=>$i,deleteApp:()=>tc,getApp:()=>bs,getApps:()=>Cu,initializeApp:()=>sl,initializeServerApp:()=>$o,onLog:()=>x,registerVersion:()=>V,setLogLevel:()=>j});var I=N(467),Z=N(779),oe=N(398),K=N(401);const S=(ee,z)=>z.some(he=>ee instanceof he);let At,pt;const ue=new WeakMap,re=new WeakMap,We=new WeakMap,Mt=new WeakMap,Ht=new WeakMap;let yt={get(ee,z,he){if(ee instanceof IDBTransaction){if("done"===z)return re.get(ee);if("objectStoreNames"===z)return ee.objectStoreNames||We.get(ee);if("store"===z)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return pn(ee[z])},set:(ee,z,he)=>(ee[z]=he,!0),has:(ee,z)=>ee instanceof IDBTransaction&&("done"===z||"store"===z)||z in ee};function Pr(ee){return"function"==typeof ee?function On(ee){return ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function gt(){return pt||(pt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ee)?function(...z){return ee.apply(Zt(this),z),pn(ue.get(this))}:function(...z){return pn(ee.apply(Zt(this),z))}:function(z,...he){const Fe=ee.call(Zt(this),z,...he);return We.set(Fe,z.sort?z.sort():[z]),pn(Fe)}}(ee):(ee instanceof IDBTransaction&&function Gt(ee){if(re.has(ee))return;const z=new Promise((he,Fe)=>{const mt=()=>{ee.removeEventListener("complete",vt),ee.removeEventListener("error",bt),ee.removeEventListener("abort",bt)},vt=()=>{he(),mt()},bt=()=>{Fe(ee.error||new DOMException("AbortError","AbortError")),mt()};ee.addEventListener("complete",vt),ee.addEventListener("error",bt),ee.addEventListener("abort",bt)});re.set(ee,z)}(ee),S(ee,function jt(){return At||(At=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ee,yt):ee)}function pn(ee){if(ee instanceof IDBRequest)return function fr(ee){const z=new Promise((he,Fe)=>{const mt=()=>{ee.removeEventListener("success",vt),ee.removeEventListener("error",bt)},vt=()=>{he(pn(ee.result)),mt()},bt=()=>{Fe(ee.error),mt()};ee.addEventListener("success",vt),ee.addEventListener("error",bt)});return z.then(he=>{he instanceof IDBCursor&&ue.set(he,ee)}).catch(()=>{}),Ht.set(z,ee),z}(ee);if(Mt.has(ee))return Mt.get(ee);const z=Pr(ee);return z!==ee&&(Mt.set(ee,z),Ht.set(z,ee)),z}const Zt=ee=>Ht.get(ee),ot=["get","getKey","getAll","getAllKeys","count"],$n=["put","add","delete","clear"],gn=new Map;function ve(ee,z){if(!(ee instanceof IDBDatabase)||z in ee||"string"!=typeof z)return;if(gn.get(z))return gn.get(z);const he=z.replace(/FromIndex$/,""),Fe=z!==he,mt=$n.includes(he);if(!(he in(Fe?IDBIndex:IDBObjectStore).prototype)||!mt&&!ot.includes(he))return;const vt=function(){var bt=(0,I.A)(function*(Qn,...it){const Es=this.transaction(Qn,mt?"readwrite":"readonly");let ln=Es.store;return Fe&&(ln=ln.index(it.shift())),(yield Promise.all([ln[he](...it),mt&&Es.done]))[0]});return function(it){return bt.apply(this,arguments)}}();return gn.set(z,vt),vt}!function wt(ee){yt=ee(yt)}(ee=>({...ee,get:(z,he,Fe)=>ve(z,he)||ee.get(z,he,Fe),has:(z,he)=>!!ve(z,he)||ee.has(z,he)}));class mn{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(he=>{if(function nr(ee){const z=ee.getComponent();return"VERSION"===z?.type}(he)){const Fe=he.getImmediate();return`${Fe.library}/${Fe.version}`}return null}).filter(he=>he).join(" ")}}const wi="@firebase/app",Us="0.10.13",ai=new oe.Vy("@firebase/app"),Or="[DEFAULT]",mo={[wi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},kr=new Map,$i=new Map,Hi=new Map;function wu(ee,z){try{ee.container.addComponent(z)}catch(he){ai.debug(`Component ${z.name} failed to register with FirebaseApp ${ee.name}`,he)}}function ec(ee,z){ee.container.addOrOverwriteComponent(z)}function Fr(ee){const z=ee.name;if(Hi.has(z))return ai.debug(`There were multiple attempts to register component ${z}.`),!1;Hi.set(z,ee);for(const he of kr.values())wu(he,ee);for(const he of $i.values())wu(he,ee);return!0}function _o(ee,z){const he=ee.container.getProvider("heartbeat").getImmediate({optional:!0});return he&&he.triggerHeartbeat(),ee.container.getProvider(z)}function yo(ee,z,he=Or){_o(ee,z).clearInstance(he)}function ha(ee){return void 0!==ee.options}function vs(ee){return void 0!==ee.settings}function fa(){Hi.clear()}const vr=new K.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class vo{constructor(z,he,Fe){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},he),this._name=he.name,this._automaticDataCollectionEnabled=he.automaticDataCollectionEnabled,this._container=Fe,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}class Uo extends vo{constructor(z,he,Fe,mt){const vt=void 0!==he.automaticDataCollectionEnabled&&he.automaticDataCollectionEnabled,bt={name:Fe,automaticDataCollectionEnabled:vt};super(void 0!==z.apiKey?z:z.options,bt,mt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:vt},he),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,he.releaseOnDeref=void 0,V(wi,Us,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(z){this.isDeleted||(this._refCount++,void 0!==z&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(z,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tc(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vr.create("server-app-deleted")}}const jo="10.14.1";function sl(ee,z={}){let he=ee;"object"!=typeof z&&(z={name:z});const Fe=Object.assign({name:Or,automaticDataCollectionEnabled:!1},z),mt=Fe.name;if("string"!=typeof mt||!mt)throw vr.create("bad-app-name",{appName:String(mt)});if(he||(he=(0,K.T9)()),!he)throw vr.create("no-options");const vt=kr.get(mt);if(vt){if((0,K.bD)(he,vt.options)&&(0,K.bD)(Fe,vt.config))return vt;throw vr.create("duplicate-app",{appName:mt})}const bt=new Z.h1(mt);for(const it of Hi.values())bt.addComponent(it);const Qn=new vo(he,Fe,bt);return kr.set(mt,Qn),Qn}function $o(ee,z){if((0,K.Bd)()&&!(0,K.p7)())throw vr.create("invalid-server-app-environment");let he;void 0===z.automaticDataCollectionEnabled&&(z.automaticDataCollectionEnabled=!1),he=ha(ee)?ee.options:ee;const Fe=Object.assign(Object.assign({},z),he);if(void 0!==Fe.releaseOnDeref&&delete Fe.releaseOnDeref,void 0!==z.releaseOnDeref&&typeof FinalizationRegistry>"u")throw vr.create("finalization-registry-not-supported",{});const vt=""+(Es=JSON.stringify(Fe),[...Es].reduce((ln,nn)=>Math.imul(31,ln)+nn.charCodeAt(0)|0,0)),bt=$i.get(vt);var Es;if(bt)return bt.incRefCount(z.releaseOnDeref),bt;const Qn=new Z.h1(vt);for(const Es of Hi.values())Qn.addComponent(Es);const it=new Uo(he,z,vt,Qn);return $i.set(vt,it),it}function bs(ee=Or){const z=kr.get(ee);if(!z&&ee===Or&&(0,K.T9)())return sl();if(!z)throw vr.create("no-app",{appName:ee});return z}function Cu(){return Array.from(kr.values())}function tc(ee){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,I.A)(function*(ee){let z=!1;const he=ee.name;kr.has(he)?(z=!0,kr.delete(he)):$i.has(he)&&ee.decRefCount()<=0&&($i.delete(he),z=!0),z&&(yield Promise.all(ee.container.getProviders().map(Fe=>Fe.delete())),ee.isDeleted=!0)})).apply(this,arguments)}function V(ee,z,he){var Fe;let mt=null!==(Fe=mo[ee])&&void 0!==Fe?Fe:ee;he&&(mt+=`-${he}`);const vt=mt.match(/\s|\//),bt=z.match(/\s|\//);if(vt||bt){const Qn=[`Unable to register library "${mt}" with version "${z}":`];return vt&&Qn.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),vt&&bt&&Qn.push("and"),bt&&Qn.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void ai.warn(Qn.join(" "))}Fr(new Z.uA(`${mt}-version`,()=>({library:mt,version:z}),"VERSION"))}function x(ee,z){if(null!==ee&&"function"!=typeof ee)throw vr.create("invalid-log-argument");(0,oe.Ey)(ee,z)}function j(ee){(0,oe.He)(ee)}const pe="firebase-heartbeat-database",G=1,Ke="firebase-heartbeat-store";let Ye=null;function Fn(){return Ye||(Ye=function en(ee,z,{blocked:he,upgrade:Fe,blocking:mt,terminated:vt}={}){const bt=indexedDB.open(ee,z),Qn=pn(bt);return Fe&&bt.addEventListener("upgradeneeded",it=>{Fe(pn(bt.result),it.oldVersion,it.newVersion,pn(bt.transaction),it)}),he&&bt.addEventListener("blocked",it=>he(it.oldVersion,it.newVersion,it)),Qn.then(it=>{vt&&it.addEventListener("close",()=>vt()),mt&&it.addEventListener("versionchange",Es=>mt(Es.oldVersion,Es.newVersion,Es))}).catch(()=>{}),Qn}(pe,G,{upgrade:(ee,z)=>{if(0===z)try{ee.createObjectStore(Ke)}catch(he){console.warn(he)}}}).catch(ee=>{throw vr.create("idb-open",{originalErrorMessage:ee.message})})),Ye}function ut(){return(ut=(0,I.A)(function*(ee){try{const he=(yield Fn()).transaction(Ke),Fe=yield he.objectStore(Ke).get(Gi(ee));return yield he.done,Fe}catch(z){if(z instanceof K.g)ai.warn(z.message);else{const he=vr.create("idb-get",{originalErrorMessage:z?.message});ai.warn(he.message)}}})).apply(this,arguments)}function Lr(ee,z){return Le.apply(this,arguments)}function Le(){return(Le=(0,I.A)(function*(ee,z){try{const Fe=(yield Fn()).transaction(Ke,"readwrite");yield Fe.objectStore(Ke).put(z,Gi(ee)),yield Fe.done}catch(he){if(he instanceof K.g)ai.warn(he.message);else{const Fe=vr.create("idb-set",{originalErrorMessage:he?.message});ai.warn(Fe.message)}}})).apply(this,arguments)}function Gi(ee){return`${ee.name}!${ee.options.appId}`}class Ho{constructor(z){this.container=z,this._heartbeatsCache=null;const he=this.container.getProvider("app").getImmediate();this._storage=new Tg(he),this._heartbeatsCachePromise=this._storage.read().then(Fe=>(this._heartbeatsCache=Fe,Fe))}triggerHeartbeat(){var z=this;return(0,I.A)(function*(){var he,Fe;try{const vt=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=js();return null==(null===(he=z._heartbeatsCache)||void 0===he?void 0:he.heartbeats)&&(z._heartbeatsCache=yield z._heartbeatsCachePromise,null==(null===(Fe=z._heartbeatsCache)||void 0===Fe?void 0:Fe.heartbeats))||z._heartbeatsCache.lastSentHeartbeatDate===bt||z._heartbeatsCache.heartbeats.some(Qn=>Qn.date===bt)?void 0:(z._heartbeatsCache.heartbeats.push({date:bt,agent:vt}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(Qn=>{const it=new Date(Qn.date).valueOf();return Date.now()-it<=2592e6}),z._storage.overwrite(z._heartbeatsCache))}catch(mt){ai.warn(mt)}})()}getHeartbeatsHeader(){var z=this;return(0,I.A)(function*(){var he;try{if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null==(null===(he=z._heartbeatsCache)||void 0===he?void 0:he.heartbeats)||0===z._heartbeatsCache.heartbeats.length)return"";const Fe=js(),{heartbeatsToSend:mt,unsentEntries:vt}=function Du(ee,z=1024){const he=[];let Fe=ee.slice();for(const mt of ee){const vt=he.find(bt=>bt.agent===mt.agent);if(vt){if(vt.dates.push(mt.date),nc(he)>z){vt.dates.pop();break}}else if(he.push({agent:mt.agent,dates:[mt.date]}),nc(he)>z){he.pop();break}Fe=Fe.slice(1)}return{heartbeatsToSend:he,unsentEntries:Fe}}(z._heartbeatsCache.heartbeats),bt=(0,K.Uj)(JSON.stringify({version:2,heartbeats:mt}));return z._heartbeatsCache.lastSentHeartbeatDate=Fe,vt.length>0?(z._heartbeatsCache.heartbeats=vt,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),bt}catch(Fe){return ai.warn(Fe),""}})()}}function js(){return(new Date).toISOString().substring(0,10)}class Tg{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.A)(function*(){return!!(0,K.zW)()&&(0,K.eX)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,I.A)(function*(){if(yield z._canUseIndexedDBPromise){const Fe=yield function Rt(ee){return ut.apply(this,arguments)}(z.app);return Fe?.heartbeats?Fe:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(z){var he=this;return(0,I.A)(function*(){var Fe;if(yield he._canUseIndexedDBPromise){const vt=yield he.read();return Lr(he.app,{lastSentHeartbeatDate:null!==(Fe=z.lastSentHeartbeatDate)&&void 0!==Fe?Fe:vt.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var he=this;return(0,I.A)(function*(){var Fe;if(yield he._canUseIndexedDBPromise){const vt=yield he.read();return Lr(he.app,{lastSentHeartbeatDate:null!==(Fe=z.lastSentHeartbeatDate)&&void 0!==Fe?Fe:vt.lastSentHeartbeatDate,heartbeats:[...vt.heartbeats,...z.heartbeats]})}})()}}function nc(ee){return(0,K.Uj)(JSON.stringify({version:2,heartbeats:ee})).length}!function Ih(ee){Fr(new Z.uA("platform-logger",z=>new mn(z),"PRIVATE")),Fr(new Z.uA("heartbeat",z=>new Ho(z),"PRIVATE")),V(wi,Us,ee),V(wi,Us,"esm2017"),V("fire-js","")}("")},779:(Ii,_e,N)=>{N.d(_e,{h1:()=>jt,uA:()=>oe});var I=N(467),Z=N(401);class oe{constructor(ue,re,We){this.name=ue,this.instanceFactory=re,this.type=We,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ue){return this.instantiationMode=ue,this}setMultipleInstances(ue){return this.multipleInstances=ue,this}setServiceProps(ue){return this.serviceProps=ue,this}setInstanceCreatedCallback(ue){return this.onInstanceCreated=ue,this}}const K="[DEFAULT]";class S{constructor(ue,re){this.name=ue,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ue){const re=this.normalizeInstanceIdentifier(ue);if(!this.instancesDeferred.has(re)){const We=new Z.cY;if(this.instancesDeferred.set(re,We),this.isInitialized(re)||this.shouldAutoInitialize())try{const Mt=this.getOrInitializeService({instanceIdentifier:re});Mt&&We.resolve(Mt)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(ue){var re;const We=this.normalizeInstanceIdentifier(ue?.identifier),Mt=null!==(re=ue?.optional)&&void 0!==re&&re;if(!this.isInitialized(We)&&!this.shouldAutoInitialize()){if(Mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:We})}catch(Ht){if(Mt)return null;throw Ht}}getComponent(){return this.component}setComponent(ue){if(ue.name!==this.name)throw Error(`Mismatching Component ${ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ue,this.shouldAutoInitialize()){if(function pt(gt){return"EAGER"===gt.instantiationMode}(ue))try{this.getOrInitializeService({instanceIdentifier:K})}catch{}for(const[re,We]of this.instancesDeferred.entries()){const Mt=this.normalizeInstanceIdentifier(re);try{const Ht=this.getOrInitializeService({instanceIdentifier:Mt});We.resolve(Ht)}catch{}}}}clearInstance(ue=K){this.instancesDeferred.delete(ue),this.instancesOptions.delete(ue),this.instances.delete(ue)}delete(){var ue=this;return(0,I.A)(function*(){const re=Array.from(ue.instances.values());yield Promise.all([...re.filter(We=>"INTERNAL"in We).map(We=>We.INTERNAL.delete()),...re.filter(We=>"_delete"in We).map(We=>We._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ue=K){return this.instances.has(ue)}getOptions(ue=K){return this.instancesOptions.get(ue)||{}}initialize(ue={}){const{options:re={}}=ue,We=this.normalizeInstanceIdentifier(ue.instanceIdentifier);if(this.isInitialized(We))throw Error(`${this.name}(${We}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Mt=this.getOrInitializeService({instanceIdentifier:We,options:re});for(const[Ht,fr]of this.instancesDeferred.entries())We===this.normalizeInstanceIdentifier(Ht)&&fr.resolve(Mt);return Mt}onInit(ue,re){var We;const Mt=this.normalizeInstanceIdentifier(re),Ht=null!==(We=this.onInitCallbacks.get(Mt))&&void 0!==We?We:new Set;Ht.add(ue),this.onInitCallbacks.set(Mt,Ht);const fr=this.instances.get(Mt);return fr&&ue(fr,Mt),()=>{Ht.delete(ue)}}invokeOnInitCallbacks(ue,re){const We=this.onInitCallbacks.get(re);if(We)for(const Mt of We)try{Mt(ue,re)}catch{}}getOrInitializeService({instanceIdentifier:ue,options:re={}}){let We=this.instances.get(ue);if(!We&&this.component&&(We=this.component.instanceFactory(this.container,{instanceIdentifier:(gt=ue,gt===K?void 0:gt),options:re}),this.instances.set(ue,We),this.instancesOptions.set(ue,re),this.invokeOnInitCallbacks(We,ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ue,We)}catch{}var gt;return We||null}normalizeInstanceIdentifier(ue=K){return this.component?this.component.multipleInstances?ue:K:ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class jt{constructor(ue){this.name=ue,this.providers=new Map}addComponent(ue){const re=this.getProvider(ue.name);if(re.isComponentSet())throw new Error(`Component ${ue.name} has already been registered with ${this.name}`);re.setComponent(ue)}addOrOverwriteComponent(ue){this.getProvider(ue.name).isComponentSet()&&this.providers.delete(ue.name),this.addComponent(ue)}getProvider(ue){if(this.providers.has(ue))return this.providers.get(ue);const re=new S(ue,this);return this.providers.set(ue,re),re}getProviders(){return Array.from(this.providers.values())}}},398:(Ii,_e,N)=>{N.d(_e,{$b:()=>Z,Ey:()=>gt,He:()=>jt,Vy:()=>pt});const I=[];var Z=function(ue){return ue[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT",ue}(Z||{});const oe={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},K=Z.INFO,S={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},At=(ue,re,...We)=>{if(re<ue.logLevel)return;const Mt=(new Date).toISOString(),Ht=S[re];if(!Ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Ht](`[${Mt}]  ${ue.name}:`,...We)};class pt{constructor(re){this.name=re,this._logLevel=K,this._logHandler=At,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in Z))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?oe[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...re),this._logHandler(this,Z.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...re),this._logHandler(this,Z.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...re),this._logHandler(this,Z.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...re),this._logHandler(this,Z.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...re),this._logHandler(this,Z.ERROR,...re)}}function jt(ue){I.forEach(re=>{re.setLogLevel(ue)})}function gt(ue,re){for(const We of I){let Mt=null;re&&re.level&&(Mt=oe[re.level]),We.userLogHandler=null===ue?null:(Ht,fr,...Gt)=>{const yt=Gt.map(wt=>{if(null==wt)return null;if("string"==typeof wt)return wt;if("number"==typeof wt||"boolean"==typeof wt)return wt.toString();if(wt instanceof Error)return wt.message;try{return JSON.stringify(wt)}catch{return null}}).filter(wt=>wt).join(" ");fr>=(Mt??Ht.logLevel)&&ue({level:Z[fr].toLowerCase(),message:yt,args:Gt,type:Ht.name})}}}},324:(Ii,_e,N)=>{var I=N(467),Z=N(574),oe=N(156),K=N(401),S=N(398),At=N(635),pt=N(779);const gt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const fr=function Mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Gt=function Ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new K.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),On=new S.Vy("@firebase/auth");function pn(p,...u){On.logLevel<=S.$b.ERROR&&On.error(`Auth (${oe.SDK_VERSION}): ${p}`,...u)}function Zt(p,...u){throw gn(p,...u)}function en(p,...u){return gn(p,...u)}function Ti(p,u,d){const m=Object.assign(Object.assign({},Gt()),{[u]:d});return new K.FA("auth","Firebase",m).create(u,{appName:p.name})}function ot(p){return Ti(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $n(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Zt(p,"argument-error"),Ti(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gn(p,...u){if("string"!=typeof p){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=p.name),p._errorFactory.create(d,...m)}return yt.create(p,...u)}function ve(p,u,...d){if(!p)throw gn(u,...d)}function mn(p){const u="INTERNAL ASSERTION FAILED: "+p;throw pn(u),new Error(u)}function nr(p,u){p||mn(u)}function wi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Us(){return"http:"===ai()||"https:"===ai()}function ai(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class te{constructor(u,d){this.shortDelay=u,this.longDelay=d,nr(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,K.jZ)()||(0,K.lV)()}get(){return function Bo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Us()||(0,K.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function se(p,u){nr(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class fe{static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Oe=new te(3e4,6e4);function ye(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function je(p,u,d,m){return kt.apply(this,arguments)}function kt(){return(kt=(0,I.A)(function*(p,u,d,m,b={}){return Q(p,b,(0,I.A)(function*(){let w={},M={};m&&("GET"===u?M=m:w={body:JSON.stringify(m)});const W=(0,K.Am)(Object.assign({key:p.config.apiKey},M)).slice(1),de=yield p._getAdditionalHeaders();de["Content-Type"]="application/json",p.languageCode&&(de["X-Firebase-Locale"]=p.languageCode);const ke=Object.assign({method:u,headers:de},w);return(0,K.c1)()||(ke.referrerPolicy="no-referrer"),fe.fetch()(Pe(p,p.config.apiHost,d,W),ke)}))})).apply(this,arguments)}function Q(p,u,d){return H.apply(this,arguments)}function H(){return(H=(0,I.A)(function*(p,u,d){p._canInitEmulator=!1;const m=Object.assign(Object.assign({},ge),u);try{const b=new En(p),w=yield Promise.race([d(),b.promise]);b.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw St(p,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const W=w.ok?M.errorMessage:M.error.message,[de,ke]=W.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===de)throw St(p,"credential-already-in-use",M);if("EMAIL_EXISTS"===de)throw St(p,"email-already-in-use",M);if("USER_DISABLED"===de)throw St(p,"user-disabled",M);const ze=m[de]||de.toLowerCase().replace(/[_\s]+/g,"-");if(ke)throw Ti(p,ze,ke);Zt(p,ze)}}catch(b){if(b instanceof K.g)throw b;Zt(p,"network-request-failed",{message:String(b)})}})).apply(this,arguments)}function ce(p,u,d,m){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,I.A)(function*(p,u,d,m,b={}){const w=yield je(p,u,d,m,b);return"mfaPendingCredential"in w&&Zt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function Pe(p,u,d,m){const b=`${u}${d}?${m}`;return p.config.emulator?se(p.config,b):`${p.config.apiScheme}://${b}`}function qe(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class En{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(en(this.auth,"network-request-failed")),Oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function St(p,u,d){const m={appName:p.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const b=en(p,u,m);return b.customData._tokenResponse=d,b}function Ge(p){return void 0!==p&&void 0!==p.getResponse}function cn(p){return void 0!==p&&void 0!==p.enterprise}class Ui{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return qe(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function kn(){return(kn=(0,I.A)(function*(p){return(yield je(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ys(p,u){return cr.apply(this,arguments)}function cr(){return(cr=(0,I.A)(function*(p,u){return je(p,"GET","/v2/recaptchaConfig",ye(p,u))})).apply(this,arguments)}function tn(){return(tn=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function mo(){return(mo=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function kr(p,u){return $i.apply(this,arguments)}function $i(){return($i=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Hi(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Fr(){return(Fr=(0,I.A)(function*(p,u=!1){const d=(0,K.Ku)(p),m=yield d.getIdToken(u),b=yo(m);ve(b&&b.exp&&b.auth_time&&b.iat,d.auth,"internal-error");const w="object"==typeof b.firebase?b.firebase:void 0,M=w?.sign_in_provider;return{claims:b,token:m,authTime:Hi(_o(b.auth_time)),issuedAtTime:Hi(_o(b.iat)),expirationTime:Hi(_o(b.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function _o(p){return 1e3*Number(p)}function yo(p){const[u,d,m]=p.split(".");if(void 0===u||void 0===d||void 0===m)return pn("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,K.u)(d);return b?JSON.parse(b):(pn("Failed to decode base64 JWT payload"),null)}catch(b){return pn("Caught error parsing JWT payload as JSON",b?.toString()),null}}function ha(p){const u=yo(p);return ve(u,"internal-error"),ve(typeof u.exp<"u","internal-error"),ve(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function vs(p,u){return fa.apply(this,arguments)}function fa(){return(fa=(0,I.A)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof K.g&&function Eh({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(m)&&p.auth.currentUser===p&&(yield p.auth.signOut()),m}})).apply(this,arguments)}class vr{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const b=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,I.A)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,I.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class vo{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hi(this.lastLoginAt),this.creationTime=Hi(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Uo(p){return jo.apply(this,arguments)}function jo(){return(jo=(0,I.A)(function*(p){var u;const d=p.auth,m=yield p.getIdToken(),b=yield vs(p,kr(d,{idToken:m}));ve(b?.users.length,d,"internal-error");const w=b.users[0];p._notifyReloadListener(w);const M=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?Cu(w.providerUserInfo):[],W=function bs(p,u){return[...p.filter(m=>!u.some(b=>b.providerId===m.providerId)),...u]}(p.providerData,M),ze=!!p.isAnonymous&&!(p.email&&w.passwordHash||W?.length),Qe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:W,metadata:new vo(w.createdAt,w.lastLoginAt),isAnonymous:ze};Object.assign(p,Qe)})).apply(this,arguments)}function $o(){return($o=(0,I.A)(function*(p){const u=(0,K.Ku)(p);yield Uo(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Cu(p){return p.map(u=>{var{providerId:d}=u,m=(0,At.Tt)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}function Wt(){return(Wt=(0,I.A)(function*(p,u){const d=yield Q(p,{},(0,I.A)(function*(){const m=(0,K.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:b,apiKey:w}=p.config,M=Pe(p,b,"/v1/token",`key=${w}`),W=yield p._getAdditionalHeaders();return W["Content-Type"]="application/x-www-form-urlencoded",fe.fetch()(M,{method:"POST",headers:W,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function x(){return(x=(0,I.A)(function*(p,u){return je(p,"POST","/v2/accounts:revokeToken",ye(p,u))})).apply(this,arguments)}class j{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){ve(u.idToken,"internal-error"),ve(typeof u.idToken<"u","internal-error"),ve(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):ha(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){ve(0!==u.length,"internal-error");const d=ha(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var m=this;return(0,I.A)(function*(){return d||!m.accessToken||m.isExpired?(ve(m.refreshToken,u,"user-token-expired"),m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null):m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,I.A)(function*(){const{accessToken:b,refreshToken:w,expiresIn:M}=yield function tc(p,u){return Wt.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(b,w,Number(M))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:b,expirationTime:w}=d,M=new j;return m&&(ve("string"==typeof m,"internal-error",{appName:u}),M.refreshToken=m),b&&(ve("string"==typeof b,"internal-error",{appName:u}),M.accessToken=b),w&&(ve("number"==typeof w,"internal-error",{appName:u}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new j,this.toJSON())}_performRefresh(){return mn("not implemented")}}function pe(p,u){ve("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class G{constructor(u){var{uid:d,auth:m,stsTokenManager:b}=u,w=(0,At.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new vo(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,I.A)(function*(){const m=yield vs(d,d.stsTokenManager.getToken(d.auth,u));return ve(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function ec(p){return Fr.apply(this,arguments)}(this,u)}reload(){return function sl(p){return $o.apply(this,arguments)}(this)}_assign(u){this!==u&&(ve(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new G(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,I.A)(function*(){let b=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),b=!0),d&&(yield Uo(m)),yield m.auth._persistUserIfCurrent(m),b&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,I.A)(function*(){if((0,oe._isFirebaseServerApp)(u.auth.app))return Promise.reject(ot(u.auth));const d=yield u.getIdToken();return yield vs(u,function go(p,u){return tn.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,b,w,M,W,de,ke,ze;const Qe=null!==(m=d.displayName)&&void 0!==m?m:void 0,Jn=null!==(b=d.email)&&void 0!==b?b:void 0,So=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,id=null!==(M=d.photoURL)&&void 0!==M?M:void 0,km=null!==(W=d.tenantId)&&void 0!==W?W:void 0,dr=null!==(de=d._redirectEventId)&&void 0!==de?de:void 0,sD=null!==(ke=d.createdAt)&&void 0!==ke?ke:void 0,Fm=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:vb,emailVerified:sf,isAnonymous:Qs,providerData:af,stsTokenManager:Ys}=d;ve(vb&&Ys,u,"internal-error");const oD=j.fromJSON(this.name,Ys);ve("string"==typeof vb,u,"internal-error"),pe(Qe,u.name),pe(Jn,u.name),ve("boolean"==typeof sf,u,"internal-error"),ve("boolean"==typeof Qs,u,"internal-error"),pe(So,u.name),pe(id,u.name),pe(km,u.name),pe(dr,u.name),pe(sD,u.name),pe(Fm,u.name);const Lm=new G({uid:vb,auth:u,email:Jn,emailVerified:sf,displayName:Qe,isAnonymous:Qs,photoURL:id,phoneNumber:So,tenantId:km,stsTokenManager:oD,createdAt:sD,lastLoginAt:Fm});return af&&Array.isArray(af)&&(Lm.providerData=af.map(bb=>Object.assign({},bb))),dr&&(Lm._redirectEventId=dr),Lm}static _fromIdTokenResponse(u,d,m=!1){return(0,I.A)(function*(){const b=new j;b.updateFromServerResponse(d);const w=new G({uid:d.localId,auth:u,stsTokenManager:b,isAnonymous:m});return yield Uo(w),w})()}static _fromGetAccountInfoResponse(u,d,m){return(0,I.A)(function*(){const b=d.users[0];ve(void 0!==b.localId,"internal-error");const w=void 0!==b.providerUserInfo?Cu(b.providerUserInfo):[],M=!(b.email&&b.passwordHash||w?.length),W=new j;W.updateFromIdToken(m);const de=new G({uid:b.localId,auth:u,stsTokenManager:W,isAnonymous:M}),ke={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:w,metadata:new vo(b.createdAt,b.lastLoginAt),isAnonymous:!(b.email&&b.passwordHash||w?.length)};return Object.assign(de,ke),de})()}}const Ke=new Map;function Ye(p){nr(p instanceof Function,"Expected a class definition");let u=Ke.get(p);return u?(nr(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,Ke.set(p,u),u)}const Rt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.A)(function*(){return!0})()}_set(d,m){var b=this;return(0,I.A)(function*(){b.storage[d]=m})()}_get(d){var m=this;return(0,I.A)(function*(){const b=m.storage[d];return void 0===b?null:b})()}_remove(d){var m=this;return(0,I.A)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return p.type="NONE",p})();function ut(p,u,d){return`firebase:${p}:${u}:${d}`}class Lr{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:b,name:w}=this.auth;this.fullUserKey=ut(this.userKey,b.apiKey,w),this.fullPersistenceKey=ut("persistence",b.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,I.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?G._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,I.A)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,I.A)(function*(){if(!d.length)return new Lr(Ye(Rt),u,m);const b=(yield Promise.all(d.map(function(){var ke=(0,I.A)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return ke.apply(this,arguments)}}()))).filter(ke=>ke);let w=b[0]||Ye(Rt);const M=ut(m,u.config.apiKey,u.name);let W=null;for(const ke of d)try{const ze=yield ke._get(M);if(ze){const Qe=G._fromJSON(u,ze);ke!==w&&(W=Qe),w=ke;break}}catch{}const de=b.filter(ke=>ke._shouldAllowMigration);return w._shouldAllowMigration&&de.length?(w=de[0],W&&(yield w._set(M,W.toJSON())),yield Promise.all(d.map(function(){var ke=(0,I.A)(function*(ze){if(ze!==w)try{yield ze._remove(M)}catch{}});return function(ze){return ke.apply(this,arguments)}}())),new Lr(w,u,m)):new Lr(w,u,m)})()}}function Le(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Ho(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Gi(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Du(u))return"Blackberry";if(Tg(u))return"Webos";if(bo(u))return"Safari";if((u.includes("chrome/")||be(u))&&!u.includes("edge/"))return"Chrome";if(js(u))return"Android";{const m=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Gi(p=(0,K.ZQ)()){return/firefox\//i.test(p)}function bo(p=(0,K.ZQ)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function be(p=(0,K.ZQ)()){return/crios\//i.test(p)}function Ho(p=(0,K.ZQ)()){return/iemobile/i.test(p)}function js(p=(0,K.ZQ)()){return/android/i.test(p)}function Du(p=(0,K.ZQ)()){return/blackberry/i.test(p)}function Tg(p=(0,K.ZQ)()){return/webos/i.test(p)}function nc(p=(0,K.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function he(p=(0,K.ZQ)()){return nc(p)||js(p)||Tg(p)||Du(p)||/windows phone/i.test(p)||Ho(p)}function Fe(p,u=[]){let d;switch(p){case"Browser":d=Le((0,K.ZQ)());break;case"Worker":d=`${Le((0,K.ZQ)())}-${p}`;break;default:d=p}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${oe.SDK_VERSION}/${m}`}class mt{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=w=>new Promise((M,W)=>{try{M(u(w))}catch(de){W(de)}});m.onAbort=d,this.queue.push(m);const b=this.queue.length-1;return()=>{this.queue[b]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,I.A)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const b of d.queue)yield b(u),b.onAbort&&m.push(b.onAbort)}catch(b){m.reverse();for(const w of m)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:b?.message})}})()}}function bt(){return(bt=(0,I.A)(function*(p,u={}){return je(p,"GET","/v2/passwordPolicy",ye(p,u))})).apply(this,arguments)}class it{constructor(u){var d,m,b,w;const M=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=M.minPasswordLength)&&void 0!==d?d:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(b=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==b?b:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,b,w,M,W;const de={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,de),this.validatePasswordCharacterOptions(u,de),de.isValid&&(de.isValid=null===(d=de.meetsMinPasswordLength)||void 0===d||d),de.isValid&&(de.isValid=null===(m=de.meetsMaxPasswordLength)||void 0===m||m),de.isValid&&(de.isValid=null===(b=de.containsLowercaseLetter)||void 0===b||b),de.isValid&&(de.isValid=null===(w=de.containsUppercaseLetter)||void 0===w||w),de.isValid&&(de.isValid=null===(M=de.containsNumericCharacter)||void 0===M||M),de.isValid&&(de.isValid=null===(W=de.containsNonAlphanumericCharacter)||void 0===W||W),de}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,b=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),b&&(d.meetsMaxPasswordLength=u.length<=b)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let b=0;b<u.length;b++)m=u.charAt(b),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,b,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=b)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class Es{constructor(u,d,m,b){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nn(this),this.idTokenSubscription=new nn(this),this.beforeStateQueue=new mt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=Ye(d)),this._initializationPromise=this.queue((0,I.A)(function*(){var b,w;if(!m._deleted&&(m.persistenceManager=yield Lr.create(m,u),!m._deleted)){if(null!==(b=m._popupRedirectResolver)&&void 0!==b&&b._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(w=m.currentUser)||void 0===w?void 0:w.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,I.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,I.A)(function*(){try{const m=yield kr(d,{idToken:u}),b=yield G._fromGetAccountInfoResponse(d,m,u);yield d.directlySetCurrentUser(b)}catch(m){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",m),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,I.A)(function*(){var m;if((0,oe._isFirebaseServerApp)(d.app)){const W=d.app.settings.authIdToken;return W?new Promise(de=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(W).then(de,de))}):d.directlySetCurrentUser(null)}const b=yield d.assertedPersistence.getCurrentUser();let w=b,M=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const W=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,de=w?._redirectEventId,ke=yield d.tryRedirectSignIn(u);(!W||W===de)&&ke?.user&&(w=ke.user,M=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield d.beforeStateQueue.runMiddleware(w)}catch(W){w=b,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(W))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return ve(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var d=this;return(0,I.A)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,I.A)(function*(){try{yield Uo(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function il(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,I.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,I.A)(function*(){if((0,oe._isFirebaseServerApp)(d.app))return Promise.reject(ot(d));const m=u?(0,K.Ku)(u):null;return m&&ve(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,I.A)(function*(){if(!m._deleted)return u&&ve(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,I.A)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,I.A)(function*(){return(0,oe._isFirebaseServerApp)(u.app)?Promise.reject(ot(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,oe._isFirebaseServerApp)(this.app)?Promise.reject(ot(this)):this.queue((0,I.A)(function*(){yield d.assertedPersistence.setPersistence(Ye(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,I.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,I.A)(function*(){const d=yield function vt(p){return bt.apply(this,arguments)}(u),m=new it(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new K.FA("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,I.A)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),b={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(b.tenantId=d.tenantId),yield function V(p,u){return x.apply(this,arguments)}(d,b)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,I.A)(function*(){const b=yield m.getOrInitRedirectPersistenceManager(d);return null===u?b.removeCurrentUser():b.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,I.A)(function*(){if(!d.redirectPersistenceManager){const m=u&&Ye(u)||d._popupRedirectResolver;ve(m,d,"argument-error"),d.redirectPersistenceManager=yield Lr.create(d,[Ye(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,I.A)(function*(){var m,b;return d._isInitialized&&(yield d.queue((0,I.A)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(b=d.redirectUser)||void 0===b?void 0:b._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,I.A)(function*(){if(u===d.currentUser)return d.queue((0,I.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,b){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let M=!1;const W=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(W,this,"internal-error"),W.then(()=>{M||w(this.currentUser)}),"function"==typeof d){const de=u.addObserver(d,m,b);return()=>{M=!0,de()}}{const de=u.addObserver(d);return()=>{M=!0,de()}}}directlySetCurrentUser(u){var d=this;return(0,I.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=Fe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,I.A)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const b=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();b&&(m["X-Firebase-Client"]=b);const w=yield u._getAppCheckToken();return w&&(m["X-Firebase-AppCheck"]=w),m})()}_getAppCheckToken(){var u=this;return(0,I.A)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function Pr(p,...u){On.logLevel<=S.$b.WARN&&On.warn(`Auth (${oe.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function ln(p){return(0,K.Ku)(p)}class nn{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,K.tD)(d=>this.observer=d)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Au={loadJS:()=>(0,I.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Su(p){return Au.loadJS(p)}function dt(p){return`__${p}${Math.floor(1e6*Math.random())}`}class nC{constructor(u){this.type="recaptcha-enterprise",this.auth=ln(u)}verify(u="verify",d=!1){var m=this;return(0,I.A)(function*(){function w(){return w=(0,I.A)(function*(W){if(!d){if(null==W.tenantId&&null!=W._agentRecaptchaConfig)return W._agentRecaptchaConfig.siteKey;if(null!=W.tenantId&&void 0!==W._tenantRecaptchaConfigs[W.tenantId])return W._tenantRecaptchaConfigs[W.tenantId].siteKey}return new Promise(function(){var de=(0,I.A)(function*(ke,ze){ys(W,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Qe=>{if(void 0!==Qe.recaptchaKey){const Jn=new Ui(Qe);return null==W.tenantId?W._agentRecaptchaConfig=Jn:W._tenantRecaptchaConfigs[W.tenantId]=Jn,ke(Jn.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(Qe=>{ze(Qe)})});return function(ke,ze){return de.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(W,de,ke){const ze=window.grecaptcha;cn(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(W,{action:u}).then(Qe=>{de(Qe)}).catch(()=>{de("NO_RECAPTCHA")})}):ke(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((W,de)=>{(function b(W){return w.apply(this,arguments)})(m.auth).then(ke=>{if(!d&&cn(window.grecaptcha))M(ke,W,de);else{if(typeof window>"u")return void de(new Error("RecaptchaVerifier is only supported in browser"));let ze=function tC(){return Au.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=ke),Su(ze).then(()=>{M(ke,W,de)}).catch(Qe=>{de(Qe)})}}).catch(ke=>{de(ke)})})})()}}function Xv(p,u,d){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,I.A)(function*(p,u,d,m=!1){const b=new nC(p);let w;try{w=yield b.verify(d)}catch{w=yield b.verify(d,!0)}const M=Object.assign({},u);return Object.assign(M,m?{captchaResp:w}:{captchaResponse:w}),Object.assign(M,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(M,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),M})).apply(this,arguments)}function Is(p,u,d,m){return e0.apply(this,arguments)}function e0(){return e0=(0,I.A)(function*(p,u,d,m){var b;if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield Xv(p,u,d,"getOobCode"===d);return m(p,w)}return m(p,u).catch(function(){var w=(0,I.A)(function*(M){if("auth/missing-recaptcha-token"===M.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const W=yield Xv(p,u,d,"getOobCode"===d);return m(p,W)}return Promise.reject(M)});return function(M){return w.apply(this,arguments)}}())}),e0.apply(this,arguments)}function n0(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function Wi(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class Ru{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return mn("not implemented")}_getIdTokenResponse(u){return mn("not implemented")}_linkToIdToken(u,d){return mn("not implemented")}_getReauthenticationResolver(u){return mn("not implemented")}}function sC(p,u){return r0.apply(this,arguments)}function r0(){return(r0=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:resetPassword",ye(p,u))})).apply(this,arguments)}function s0(){return(s0=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ne(p,u){return o0.apply(this,arguments)}function o0(){return(o0=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function ol(){return(ol=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:update",ye(p,u))})).apply(this,arguments)}function oC(p,u){return wh.apply(this,arguments)}function wh(){return(wh=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithPassword",ye(p,u))})).apply(this,arguments)}function Ch(p,u){return al.apply(this,arguments)}function al(){return(al=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:sendOobCode",ye(p,u))})).apply(this,arguments)}function Nu(){return(Nu=(0,I.A)(function*(p,u){return Ch(p,u)})).apply(this,arguments)}function a0(p,u){return wg.apply(this,arguments)}function wg(){return(wg=(0,I.A)(function*(p,u){return Ch(p,u)})).apply(this,arguments)}function Me(p,u){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,I.A)(function*(p,u){return Ch(p,u)})).apply(this,arguments)}function Ah(){return(Ah=(0,I.A)(function*(p,u){return Ch(p,u)})).apply(this,arguments)}function Ag(){return(Ag=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithEmailLink",ye(p,u))})).apply(this,arguments)}function c0(){return(c0=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithEmailLink",ye(p,u))})).apply(this,arguments)}class Sh extends Ru{constructor(u,d,m,b=null){super("password",m),this._email=u,this._password=d,this._tenantId=b}static _fromEmailAndPassword(u,d){return new Sh(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new Sh(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,I.A)(function*(){switch(d.signInMethod){case"password":return Is(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",oC);case"emailLink":return function Dg(p,u){return Ag.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Zt(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,I.A)(function*(){switch(m.signInMethod){case"password":return Is(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ne);case"emailLink":return function Sg(p,u){return c0.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:Zt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function pa(p,u){return l0.apply(this,arguments)}function l0(){return(l0=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithIdp",ye(p,u))})).apply(this,arguments)}class zi extends Ru{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new zi(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Zt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:b}=d,w=(0,At.Tt)(d,["providerId","signInMethod"]);if(!m||!b)return null;const M=new zi(m,b);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(u){return pa(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,pa(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,pa(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,K.Am)(d)}return u}}function xu(){return(xu=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:sendVerificationCode",ye(p,u))})).apply(this,arguments)}function $s(){return($s=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithPhoneNumber",ye(p,u))})).apply(this,arguments)}function Rh(){return(Rh=(0,I.A)(function*(p,u){const d=yield ce(p,"POST","/v1/accounts:signInWithPhoneNumber",ye(p,u));if(d.temporaryProof)throw St(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Et={USER_NOT_FOUND:"user-not-found"};function d0(){return(d0=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithPhoneNumber",ye(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Et)})).apply(this,arguments)}class rc extends Ru{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new rc({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new rc({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function u0(p,u){return $s.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function Pu(p,u){return Rh.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function on(p,u){return d0.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:b}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:b}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:b,temporaryProof:w}=u;return m||d||b||w?new rc({verificationId:d,verificationCode:m,phoneNumber:b,temporaryProof:w}):null}}class Ou{constructor(u){var d,m,b,w,M,W;const de=(0,K.I9)((0,K.hp)(u)),ke=null!==(d=de.apiKey)&&void 0!==d?d:null,ze=null!==(m=de.oobCode)&&void 0!==m?m:null,Qe=function aC(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=de.mode)&&void 0!==b?b:null);ve(ke&&ze&&Qe,"argument-error"),this.apiKey=ke,this.operation=Qe,this.code=ze,this.continueUrl=null!==(w=de.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=de.languageCode)&&void 0!==M?M:null,this.tenantId=null!==(W=de.tenantId)&&void 0!==W?W:null}static parseLink(u){const d=function Pk(p){const u=(0,K.I9)((0,K.hp)(p)).link,d=u?(0,K.I9)((0,K.hp)(u)).deep_link_id:null,m=(0,K.I9)((0,K.hp)(p)).deep_link_id;return(m?(0,K.I9)((0,K.hp)(m)).link:null)||m||d||u||p}(u);try{return new Ou(d)}catch{return null}}}let Ft=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,m){return Sh._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const b=Ou.parseLink(m);return ve(b,"argument-error"),Sh._fromEmailAndCode(d,b.code,b.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Hs{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class ic extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Er extends ic{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return ve("providerId"in d&&"signInMethod"in d,"argument-error"),zi._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return ve(u.idToken||u.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Er.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Er.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:b,pendingToken:w,nonce:M,providerId:W}=u;if(!m&&!b&&!d&&!w||!W)return null;try{return new Er(W)._credential({idToken:d,accessToken:m,nonce:M,pendingToken:w})}catch{return null}}}let Mg=(()=>{class p extends ic{constructor(){super("facebook.com")}static credential(d){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),cC=(()=>{class p extends ic{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:b}=d;if(!m&&!b)return null;try{return p.credential(m,b)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),lC=(()=>{class p extends ic{constructor(){super("github.com")}static credential(d){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class ga extends Ru{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return pa(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,pa(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,pa(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:b,pendingToken:w}=d;return m&&b&&w&&m===b?new ga(m,w):null}static _create(u,d){return new ga(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mh extends Hs{constructor(u){ve(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Mh.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Mh.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=ga.fromJSON(u);return ve(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return ga._create(m,d)}catch{return null}}}let f0=(()=>{class p extends ic{constructor(){super("twitter.com")}static credential(d,m){return zi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:b}=d;if(!m||!b)return null;try{return p.credential(m,b)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function p0(p,u){return xh.apply(this,arguments)}function xh(){return(xh=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signUp",ye(p,u))})).apply(this,arguments)}class zr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,b=!1){return(0,I.A)(function*(){const w=yield G._fromIdTokenResponse(u,m,b),M=g0(m);return new zr({user:w,providerId:M,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,I.A)(function*(){yield u._updateTokensIfNecessary(m,!0);const b=g0(m);return new zr({user:u,providerId:b,_tokenResponse:m,operationType:d})})()}}function g0(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function xg(){return(xg=(0,I.A)(function*(p){var u;if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const d=ln(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new zr({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield p0(d,{returnSecureToken:!0}),b=yield zr._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(b.user),b})).apply(this,arguments)}class Se extends K.g{constructor(u,d,m,b){var w;super(d.code,d.message),this.operationType=m,this.user=b,Object.setPrototypeOf(this,Se.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,b){return new Se(u,d,m,b)}}function Pg(p,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Se._fromErrorAndOperation(p,w,u,m):w})}function U(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function Fu(){return Fu=(0,I.A)(function*(p,u){const d=(0,K.Ku)(p);yield Oh(!0,d,u);const{providerUserInfo:m}=yield function Or(p,u){return mo.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),b=U(m||[]);return d.providerData=d.providerData.filter(w=>b.has(w.providerId)),b.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Fu.apply(this,arguments)}function sc(p,u){return Og.apply(this,arguments)}function Og(){return(Og=(0,I.A)(function*(p,u,d=!1){const m=yield vs(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return zr._forOperation(p,"link",m)})).apply(this,arguments)}function Oh(p,u,d){return kg.apply(this,arguments)}function kg(){return(kg=(0,I.A)(function*(p,u,d){yield Uo(u);const b=!1===p?"provider-already-linked":"no-such-provider";ve(U(u.providerData).has(d)===p,u.auth,b)})).apply(this,arguments)}function m0(p,u){return oc.apply(this,arguments)}function oc(){return(oc=(0,I.A)(function*(p,u,d=!1){const{auth:m}=p;if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(ot(m));const b="reauthenticate";try{const w=yield vs(p,Pg(m,b,u,p),d);ve(w.idToken,m,"internal-error");const M=yo(w.idToken);ve(M,m,"internal-error");const{sub:W}=M;return ve(p.uid===W,m,"user-mismatch"),zr._forOperation(p,b,w)}catch(w){throw"auth/user-not-found"===w?.code&&Zt(m,"user-mismatch"),w}})).apply(this,arguments)}function _0(p,u){return cl.apply(this,arguments)}function cl(){return(cl=(0,I.A)(function*(p,u,d=!1){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const m="signIn",b=yield Pg(p,m,u),w=yield zr._fromIdTokenResponse(p,m,b);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function kh(p,u){return Go.apply(this,arguments)}function Go(){return(Go=(0,I.A)(function*(p,u){return _0(ln(p),u)})).apply(this,arguments)}function y0(p,u){return ci.apply(this,arguments)}function ci(){return(ci=(0,I.A)(function*(p,u){const d=(0,K.Ku)(p);return yield Oh(!1,d,u.providerId),sc(d,u)})).apply(this,arguments)}function ac(p,u){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,I.A)(function*(p,u){return m0((0,K.Ku)(p),u)})).apply(this,arguments)}function ll(){return(ll=(0,I.A)(function*(p,u){return ce(p,"POST","/v1/accounts:signInWithCustomToken",ye(p,u))})).apply(this,arguments)}function v0(){return v0=(0,I.A)(function*(p,u){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const d=ln(p),m=yield function Lh(p,u){return ll.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),b=yield zr._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(b.user),b}),v0.apply(this,arguments)}class ul{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?b0._fromServerResponse(u,d):"totpInfo"in d?Ci._fromServerResponse(u,d):Zt(u,"internal-error")}}class b0 extends ul{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new b0(d)}}class Ci extends ul{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Ci(d)}}function dl(p,u,d){var m;ve((null===(m=d.url)||void 0===m?void 0:m.length)>0,p,"invalid-continue-uri"),ve(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ve(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(ve(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function _a(p){return E0.apply(this,arguments)}function E0(){return(E0=(0,I.A)(function*(p){const u=ln(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Ts(){return(Ts=(0,I.A)(function*(p,u,d){const m=ln(p),b={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&dl(m,b,d),yield Is(m,b,"getOobCode",a0)})).apply(this,arguments)}function Wo(){return Wo=(0,I.A)(function*(p,u,d){yield sC((0,K.Ku)(p),{oobCode:u,newPassword:d}).catch(function(){var m=(0,I.A)(function*(b){throw"auth/password-does-not-meet-requirements"===b.code&&_a(p),b});return function(b){return m.apply(this,arguments)}}())}),Wo.apply(this,arguments)}function Lu(){return Lu=(0,I.A)(function*(p,u){yield function Kt(p,u){return ol.apply(this,arguments)}((0,K.Ku)(p),{oobCode:u})}),Lu.apply(this,arguments)}function Vu(p,u){return hl.apply(this,arguments)}function hl(){return(hl=(0,I.A)(function*(p,u){const d=(0,K.Ku)(p),m=yield sC(d,{oobCode:u}),b=m.requestType;switch(ve(b,d,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(m.mfaInfo,d,"internal-error");default:ve(m.email,d,"internal-error")}let w=null;return m.mfaInfo&&(w=ul._fromServerResponse(ln(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:w},operation:b}})).apply(this,arguments)}function rn(){return(rn=(0,I.A)(function*(p,u){const{data:d}=yield Vu((0,K.Ku)(p),u);return d.email})).apply(this,arguments)}function Bu(){return(Bu=(0,I.A)(function*(p,u,d){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const m=ln(p),M=yield Is(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p0).catch(de=>{throw"auth/password-does-not-meet-requirements"===de.code&&_a(p),de}),W=yield zr._fromIdTokenResponse(m,"signIn",M);return yield m._updateCurrentUser(W.user),W})).apply(this,arguments)}function cc(){return(cc=(0,I.A)(function*(p,u,d){const m=ln(p),b={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(M,W){ve(W.handleCodeInApp,m,"argument-error"),W&&dl(m,M,W)})(b,d),yield Is(m,b,"getOobCode",Me)})).apply(this,arguments)}function Lg(){return(Lg=(0,I.A)(function*(p,u,d){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const m=(0,K.Ku)(p),b=Ft.credentialWithLink(u,d||wi());return ve(b._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),kh(m,b)})).apply(this,arguments)}function Bg(){return(Bg=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:createAuthUri",ye(p,u))})).apply(this,arguments)}function is(){return is=(0,I.A)(function*(p,u){const m={identifier:u,continueUri:Us()?wi():"http://localhost"},{signinMethods:b}=yield function Vg(p,u){return Bg.apply(this,arguments)}((0,K.Ku)(p),m);return b||[]}),is.apply(this,arguments)}function Vh(){return Vh=(0,I.A)(function*(p,u){const d=(0,K.Ku)(p),b={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&dl(d.auth,b,u);const{email:w}=yield function Dh(p,u){return Nu.apply(this,arguments)}(d.auth,b);w!==p.email&&(yield p.reload())}),Vh.apply(this,arguments)}function Ug(){return Ug=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&dl(m.auth,w,d);const{email:M}=yield function Cg(p,u){return Ah.apply(this,arguments)}(m.auth,w);M!==p.email&&(yield p.reload())}),Ug.apply(this,arguments)}function jg(){return(jg=(0,I.A)(function*(p,u){return je(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function $g(){return $g=(0,I.A)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,K.Ku)(p),w={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},M=yield vs(m,function pC(p,u){return jg.apply(this,arguments)}(m.auth,w));m.displayName=M.displayName||null,m.photoURL=M.photoUrl||null;const W=m.providerData.find(({providerId:de})=>"password"===de);W&&(W.displayName=m.displayName,W.photoURL=m.photoURL),yield m._updateTokensIfNecessary(M)}),$g.apply(this,arguments)}function pr(p,u,d){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,I.A)(function*(p,u,d){const{auth:m}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(w.email=u),d&&(w.password=d);const M=yield vs(p,function xk(p,u){return s0.apply(this,arguments)}(m,w));yield p._updateTokensIfNecessary(M,!0)}),Hg.apply(this,arguments)}class Bt{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class Gg extends Bt{constructor(u,d,m,b){super(u,d,m),this.username=b}}class Be extends Bt{constructor(u,d){super(u,"facebook.com",d)}}class qi extends Gg{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Lt extends Bt{constructor(u,d){super(u,"google.com",d)}}class Ir extends Gg{constructor(u,d,m){super(u,"twitter.com",d,m)}}function qr(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function _C(p){var u,d;if(!p)return null;const{providerId:m}=p,b=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!m&&p?.idToken){const M=null===(d=null===(u=yo(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(M)return new Bt(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!m)return null;switch(m){case"facebook.com":return new Be(w,b);case"github.com":return new qi(w,b);case"google.com":return new Lt(w,b);case"twitter.com":return new Ir(w,b,p.screenName||null);case"custom":case"anonymous":return new Bt(w,null);default:return new Bt(w,m,b)}}(d)}class zo{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new zo("enroll",u,d)}static _fromMfaPendingCredential(u){return new zo("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return zo._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return zo._fromIdtoken(u.multiFactorSession.idToken)}return null}}class qg{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=ln(u),b=d.customData._serverResponse,w=(b.mfaInfo||[]).map(W=>ul._fromServerResponse(m,W));ve(b.mfaPendingCredential,m,"internal-error");const M=zo._fromMfaPendingCredential(b.mfaPendingCredential);return new qg(M,w,function(){var W=(0,I.A)(function*(de){const ke=yield de._process(m,M);delete b.mfaInfo,delete b.mfaPendingCredential;const ze=Object.assign(Object.assign({},b),{idToken:ke.idToken,refreshToken:ke.refreshToken});switch(d.operationType){case"signIn":const Qe=yield zr._fromIdTokenResponse(m,d.operationType,ze);return yield m._updateCurrentUser(Qe.user),Qe;case"reauthenticate":return ve(d.user,m,"internal-error"),zr._forOperation(d.user,d.operationType,ze);default:Zt(m,"internal-error")}});return function(de){return W.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,I.A)(function*(){return d.signInResolver(u)})()}}class pl{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>ul._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new pl(u)}getSession(){var u=this;return(0,I.A)(function*(){return zo._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,I.A)(function*(){const b=u,w=yield m.getSession(),M=yield vs(m.user,b._process(m.user.auth,w,d));return yield m.user._updateTokensIfNecessary(M),m.user.reload()})()}unenroll(u){var d=this;return(0,I.A)(function*(){const m="string"==typeof u?u:u.uid,b=yield d.user.getIdToken();try{const w=yield vs(d.user,function Qg(p,u){return je(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ye(p,u))}(d.user.auth,{idToken:b,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:M})=>M!==m),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const Yg=new WeakMap,uc="__sak";class Kr{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const jh=(()=>{class p extends Kr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=he(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const b=this.storage.getItem(m),w=this.localCache[m];b!==w&&d(m,w,b)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((W,de,ke)=>{this.notifyListeners(W,ke)});const b=d.key;m?this.detachListener():this.stopPolling();const w=()=>{const W=this.storage.getItem(b);!m&&this.localCache[b]===W||this.notifyListeners(b,W)},M=this.storage.getItem(b);!function z(){return(0,K.lT)()&&10===document.documentMode}()||M===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,m){this.localCache[d]=m;const b=this.listeners[d];if(b)for(const w of Array.from(b))w(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var b=()=>super._set,w=this;return(0,I.A)(function*(){yield b().call(w,d,m),w.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,b=this;return(0,I.A)(function*(){const w=yield m().call(b,d);return b.localCache[d]=JSON.stringify(w),w})()}_remove(d){var m=()=>super._remove,b=this;return(0,I.A)(function*(){yield m().call(b,d),delete b.localCache[d]})()}}return p.type="LOCAL",p})(),ss=(()=>{class p extends Kr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return p.type="SESSION",p})();let wC=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(w=>w.isListeningto(d));if(m)return m;const b=new p(d);return this.receivers.push(b),b}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,I.A)(function*(){const b=d,{eventId:w,eventType:M,data:W}=b.data,de=m.handlersMap[M];if(!de?.size)return;b.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const ke=Array.from(de).map(function(){var Qe=(0,I.A)(function*(Jn){return Jn(b.origin,W)});return function(Jn){return Qe.apply(this,arguments)}}()),ze=yield function TC(p){return Promise.all(p.map(function(){var u=(0,I.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(ke);b.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:ze})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Uu(p="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return p+d}class Zg{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var b=this;return(0,I.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let M,W;return new Promise((de,ke)=>{const ze=Uu("",20);w.port1.start();const Qe=setTimeout(()=>{ke(new Error("unsupported_event"))},m);W={messageChannel:w,onMessage(Jn){const So=Jn;if(So.data.eventId===ze)switch(So.data.status){case"ack":clearTimeout(Qe),M=setTimeout(()=>{ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(M),de(So.data.response);break;default:clearTimeout(Qe),clearTimeout(M),ke(new Error("invalid_response"))}}},b.handlers.add(W),w.port1.addEventListener("message",W.onMessage),b.target.postMessage({eventType:u,eventId:ze,data:d},[w.port2])}).finally(()=>{W&&b.removeMessageHandler(W)})})()}}function In(){return window}function dc(){return typeof In().WorkerGlobalScope<"u"&&"function"==typeof In().importScripts}function em(){return(em=(0,I.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const tm="firebaseLocalStorageDb",ya="firebaseLocalStorage",O0="fbase_key";class ju{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function $h(p,u){return p.transaction([ya],u?"readwrite":"readonly").objectStore(ya)}function nm(){const p=indexedDB.open(tm,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const m=p.result;try{m.createObjectStore(ya,{keyPath:O0})}catch(b){d(b)}}),p.addEventListener("success",(0,I.A)(function*(){const m=p.result;m.objectStoreNames.contains(ya)?u(m):(m.close(),yield function AC(){const p=indexedDB.deleteDatabase(tm);return new ju(p).toPromise()}(),u(yield nm()))}))})}function k0(p,u,d){return $u.apply(this,arguments)}function $u(){return($u=(0,I.A)(function*(p,u,d){const m=$h(p,!0).put({[O0]:u,value:d});return new ju(m).toPromise()})).apply(this,arguments)}function Sn(){return(Sn=(0,I.A)(function*(p,u){const d=$h(p,!1).get(u),m=yield new ju(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function Re(p,u){const d=$h(p,!0).delete(u);return new ju(d).toPromise()}const ur=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,I.A)(function*(){return d.db||(d.db=yield nm()),d.db})()}_withRetries(d){var m=this;return(0,I.A)(function*(){let b=0;for(;;)try{const w=yield m._openDb();return yield d(w)}catch(w){if(b++>3)throw w;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,I.A)(function*(){return dc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,I.A)(function*(){d.receiver=wC._getInstance(function Tr(){return dc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,I.A)(function*(b,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(b,w){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,I.A)(function*(b,w){return["keyChanged"]});return function(b,w){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,I.A)(function*(){var m,b;if(d.activeServiceWorker=yield function ml(){return em.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Zg(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(m=w[0])&&void 0!==m&&m.fulfilled&&null!==(b=w[0])&&void 0!==b&&b.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,I.A)(function*(){if(m.sender&&m.activeServiceWorker&&function CC(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.A)(function*(){try{if(!indexedDB)return!1;const d=yield nm();return yield k0(d,uc,"1"),yield Re(d,uc),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,I.A)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var b=this;return(0,I.A)(function*(){return b._withPendingWrite((0,I.A)(function*(){return yield b._withRetries(w=>k0(w,d,m)),b.localCache[d]=m,b.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,I.A)(function*(){const b=yield m._withRetries(w=>function Hh(p,u){return Sn.apply(this,arguments)}(w,d));return m.localCache[d]=b,b})()}_remove(d){var m=this;return(0,I.A)(function*(){return m._withPendingWrite((0,I.A)(function*(){return yield m._withRetries(b=>Re(b,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,I.A)(function*(){const m=yield d._withRetries(M=>{const W=$h(M,!1).getAll();return new ju(W).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const b=[],w=new Set;if(0!==m.length)for(const{fbase_key:M,value:W}of m)w.add(M),JSON.stringify(d.localCache[M])!==JSON.stringify(W)&&(d.notifyListeners(M,W),b.push(M));for(const M of Object.keys(d.localCache))d.localCache[M]&&!w.has(M)&&(d.notifyListeners(M,null),b.push(M));return b})()}notifyListeners(d,m){this.localCache[d]=m;const b=this.listeners[d];if(b)for(const w of Array.from(b))w(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,I.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),ct=1e12;class Hu{constructor(u){this.auth=u,this.counter=ct,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new F0(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||ct;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||ct))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,I.A)(function*(){var m;return null===(m=d._widgets.get(u||ct))||void 0===m||m.execute(),""})()}}class F0{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof u?document.getElementById(u):u;ve(b,"argument-error",{appName:d}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yl(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<p;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ln=dt("rcb"),Gu=new te(3e4,6e4);class vl{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=In().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return ve(function qo(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Ge(In().grecaptcha)?Promise.resolve(In().grecaptcha):new Promise((m,b)=>{const w=In().setTimeout(()=>{b(en(u,"network-request-failed"))},Gu.get());In()[Ln]=()=>{In().clearTimeout(w),delete In()[Ln];const W=In().grecaptcha;if(!W||!Ge(W))return void b(en(u,"internal-error"));const de=W.render;W.render=(ke,ze)=>{const Qe=de(ke,ze);return this.counter++,Qe},this.hostLanguage=d,m(W)},Su(`${function Sk(){return Au.recaptchaV2Script}()}?${(0,K.Am)({onload:Ln,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),b(en(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=In().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wu{load(u){return(0,I.A)(function*(){return new Hu(u)})()}clearedOneInstance(){}}const rm="recaptcha",va={theme:"light",type:"image"};class Gh{constructor(u,d,m=Object.assign({},va)){this.parameters=m,this.type=rm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ln(u),this.isInvisible="invisible"===this.parameters.size,ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof d?document.getElementById(d):d;ve(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wu:new vl,this.validateStartingState()}verify(){var u=this;return(0,I.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(w=>{const M=W=>{W&&(u.tokenChangeListeners.delete(M),w(W))};u.tokenChangeListeners.add(M),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=In()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,I.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,I.A)(function*(){ve(Us()&&!dc(),u.auth,"internal-error"),yield function hc(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function ji(p){return kn.apply(this,arguments)}(u.auth);ve(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _t{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=rc._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function fc(){return(fc=(0,I.A)(function*(p,u,d){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const m=ln(p),b=yield Il(m,u,(0,K.Ku)(d));return new _t(b,w=>kh(m,w))})).apply(this,arguments)}function bl(){return(bl=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p);yield Oh(!1,m,"phone");const b=yield Il(m.auth,u,(0,K.Ku)(d));return new _t(b,w=>y0(m,w))})).apply(this,arguments)}function Yn(){return(Yn=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p);if((0,oe._isFirebaseServerApp)(m.auth.app))return Promise.reject(ot(m.auth));const b=yield Il(m.auth,u,(0,K.Ku)(d));return new _t(b,w=>ac(m,w))})).apply(this,arguments)}function Il(p,u,d){return Vr.apply(this,arguments)}function Vr(){return Vr=(0,I.A)(function*(p,u,d){var m;const b=yield d.verify();try{let w;if(ve("string"==typeof b,p,"argument-error"),ve(d.type===rm,p,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const M=w.session;if("phoneNumber"in w)return ve("enroll"===M.type,p,"internal-error"),(yield function M0(p,u){return je(p,"POST","/v2/accounts/mfaEnrollment:start",ye(p,u))}(p,{idToken:M.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{ve("signin"===M.type,p,"internal-error");const W=(null===(m=w.multiFactorHint)||void 0===m?void 0:m.uid)||w.multiFactorUid;return ve(W,p,"missing-multi-factor-info"),(yield function os(p,u){return je(p,"POST","/v2/accounts/mfaSignIn:start",ye(p,u))}(p,{mfaPendingCredential:M.credential,mfaEnrollmentId:W,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:M}=yield function Ng(p,u){return xu.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:b});return M}}finally{d._reset()}}),Vr.apply(this,arguments)}function zu(){return(zu=(0,I.A)(function*(p,u){const d=(0,K.Ku)(p);if((0,oe._isFirebaseServerApp)(d.auth.app))return Promise.reject(ot(d.auth));yield sc(d,u)})).apply(this,arguments)}let zs=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=ln(d)}verifyPhoneNumber(d,m){return Il(this.auth,d,(0,K.Ku)(m))}static credential(d,m){return rc._fromVerification(d,m)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:b}=d;return m&&b?rc._fromTokenResponse(m,b):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function To(p,u){return u?Ye(u):(ve(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class as extends Ru{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return pa(u,this._buildIdpRequest())}_linkToIdToken(u,d){return pa(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return pa(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function sm(p){return _0(p.auth,new as(p),p.bypassAuthState)}function SC(p){const{auth:u,user:d}=p;return ve(d,u,"internal-error"),m0(d,new as(p),p.bypassAuthState)}function RC(p){return qu.apply(this,arguments)}function qu(){return(qu=(0,I.A)(function*(p){const{auth:u,user:d}=p;return ve(d,u,"internal-error"),sc(d,new as(p),p.bypassAuthState)})).apply(this,arguments)}class om{constructor(u,d,m,b,w=!1){this.auth=u,this.resolver=m,this.user=b,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,I.A)(function*(m,b){u.pendingPromise={resolve:m,reject:b};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(m,b){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,I.A)(function*(){const{urlResponse:m,sessionId:b,postBody:w,tenantId:M,error:W,type:de}=u;if(W)return void d.reject(W);const ke={auth:d.auth,requestUri:m,sessionId:b,tenantId:M||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(de)(ke))}catch(ze){d.reject(ze)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return sm;case"linkViaPopup":case"linkViaRedirect":return RC;case"reauthViaPopup":case"reauthViaRedirect":return SC;default:Zt(this.auth,"internal-error")}}resolve(u){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NC=new te(2e3,1e4);function L0(){return(L0=(0,I.A)(function*(p,u,d){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(en(p,"operation-not-supported-in-this-environment"));const m=ln(p);$n(p,u,Hs);const b=To(m,d);return new U0(m,"signInViaPopup",u,b).executeNotNull()})).apply(this,arguments)}function V0(){return(V0=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p);if((0,oe._isFirebaseServerApp)(m.auth.app))return Promise.reject(en(m.auth,"operation-not-supported-in-this-environment"));$n(m.auth,u,Hs);const b=To(m.auth,d);return new U0(m.auth,"reauthViaPopup",u,b,m).executeNotNull()})).apply(this,arguments)}function B0(){return(B0=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p);$n(m.auth,u,Hs);const b=To(m.auth,d);return new U0(m.auth,"linkViaPopup",u,b,m).executeNotNull()})).apply(this,arguments)}let U0=(()=>{class p extends om{constructor(d,m,b,w,M){super(d,m,w,M),this.provider=b,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,I.A)(function*(){const m=yield d.execute();return ve(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,I.A)(function*(){nr(1===d.filter.length,"Popup operations only handle one event");const m=Uu();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(b=>{d.reject(b)}),d.resolver._isIframeWebStorageSupported(d.auth,b=>{b||d.reject(en(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,b;this.pollId=null!==(b=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==b&&b.closed?window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,NC.get())};d()}}return p.currentPopupAction=null,p})();const Bk="pendingRedirect",Wh=new Map;class Uk extends om{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,I.A)(function*(){let m=Wh.get(d.auth._key());if(!m){try{const w=(yield function jk(p,u){return j0.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(w)}catch(b){m=()=>Promise.reject(b)}Wh.set(d.auth._key(),m)}return d.bypassAuthState||Wh.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,I.A)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const b=yield m.auth._redirectUserForId(u.eventId);if(b)return m.user=b,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,I.A)(function*(){})()}cleanUp(){}}function j0(){return(j0=(0,I.A)(function*(p,u){const d=xC(u),m=MC(p);if(!(yield m._isAvailable()))return!1;const b="true"===(yield m._get(d));return yield m._remove(d),b})).apply(this,arguments)}function $0(p,u){return zh.apply(this,arguments)}function zh(){return(zh=(0,I.A)(function*(p,u){return MC(p)._set(xC(u),"true")})).apply(this,arguments)}function G0(p,u){Wh.set(p._key(),u)}function MC(p){return Ye(p._redirectPersistence)}function xC(p){return ut(Bk,p.config.apiKey,p.name)}function $k(p,u,d){return function PC(p,u,d){return qh.apply(this,arguments)}(p,u,d)}function qh(){return(qh=(0,I.A)(function*(p,u,d){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const m=ln(p);$n(p,u,Hs),yield m._initializationPromise;const b=To(m,d);return yield $0(b,m),b._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function Br(p,u,d){return function W0(p,u,d){return cm.apply(this,arguments)}(p,u,d)}function cm(){return(cm=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p);if($n(m.auth,u,Hs),(0,oe._isFirebaseServerApp)(m.auth.app))return Promise.reject(ot(m.auth));yield m.auth._initializationPromise;const b=To(m.auth,d);yield $0(b,m.auth);const w=yield lm(m);return b._openRedirect(m.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function OC(p,u,d){return function z0(p,u,d){return Kh.apply(this,arguments)}(p,u,d)}function Kh(){return(Kh=(0,I.A)(function*(p,u,d){const m=(0,K.Ku)(p);$n(m.auth,u,Hs),yield m.auth._initializationPromise;const b=To(m.auth,d);yield Oh(!1,m,u.providerId),yield $0(b,m.auth);const w=yield lm(m);return b._openRedirect(m.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function Ku(){return(Ku=(0,I.A)(function*(p,u){return yield ln(p)._initializationPromise,Qh(p,u,!1)})).apply(this,arguments)}function Qh(p,u){return ws.apply(this,arguments)}function ws(){return(ws=(0,I.A)(function*(p,u,d=!1){if((0,oe._isFirebaseServerApp)(p.app))return Promise.reject(ot(p));const m=ln(p),b=To(m,u),M=yield new Uk(m,b,d).execute();return M&&!d&&(delete M.user._redirectEventId,yield m._persistUserIfCurrent(M.user),yield m._setRedirectUser(null,u)),M})).apply(this,arguments)}function lm(p){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,I.A)(function*(p){const u=Uu(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class K0{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function um(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _n(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!_n(u)){const b=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(en(this.auth,b))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(FC(u))}saveEventToCache(u){this.cachedEventUids.add(FC(u)),this.lastProcessedEventTime=Date.now()}}function FC(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function _n({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function Tl(p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,I.A)(function*(p,u={}){return je(p,"GET","/v1/projects",u)})).apply(this,arguments)}const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qu=/^https?/;function Ai(){return(Ai=(0,I.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield Tl(p);for(const d of u)try{if(VC(d))return}catch{}Zt(p,"unauthorized-domain")})).apply(this,arguments)}function VC(p){const u=wi(),{protocol:d,hostname:m}=new URL(u);if(p.startsWith("chrome-extension://")){const M=new URL(p);return""===M.hostname&&""===m?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&M.hostname===m}if(!Qu.test(d))return!1;if(LC.test(p))return m===p;const b=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(m)}const dm=new te(3e4,6e4);function Q0(){const p=In().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Yu=null;const Y0=new te(5e3,15e3),hm="__/auth/iframe",fm="emulator/auth/iframe",Ju={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pm(p){const u=p.config;ve(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?se(u,fm):`https://${p.config.authDomain}/${hm}`,m={apiKey:u.apiKey,appName:p.name,v:oe.SDK_VERSION},b=Jh.get(p.config.apiHost);b&&(m.eid=b);const w=p._getFrameworks();return w.length&&(m.fw=w.join(",")),`${d}?${(0,K.Am)(m).slice(1)}`}function ft(){return ft=(0,I.A)(function*(p){const u=yield function BC(p){return Yu=Yu||function wo(p){return new Promise((u,d)=>{var m,b,w;function M(){Q0(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Q0(),d(en(p,"network-request-failed"))},timeout:dm.get()})}if(null!==(b=null===(m=In().gapi)||void 0===m?void 0:m.iframes)&&void 0!==b&&b.Iframe)u(gapi.iframes.getContext());else{if(null===(w=In().gapi)||void 0===w||!w.load){const W=dt("iframefcb");return In()[W]=()=>{gapi.load?M():d(en(p,"network-request-failed"))},Su(`${function un(){return Au.gapiScript}()}?onload=${W}`).catch(de=>d(de))}M()}}).catch(u=>{throw Yu=null,u})}(p),Yu}(p),d=In().gapi;return ve(d,p,"internal-error"),u.open({where:document.body,url:pm(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ju,dontclear:!0},m=>new Promise(function(){var b=(0,I.A)(function*(w,M){yield m.restyle({setHideOnLeave:!1});const W=en(p,"network-request-failed"),de=In().setTimeout(()=>{M(W)},Y0.get());function ke(){In().clearTimeout(de),w(m)}m.ping(ke).then(ke,()=>{M(W)})});return function(w,M){return b.apply(this,arguments)}}()))}),ft.apply(this,arguments)}const J0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gm{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const GC="__/auth/handler",WC="emulator/auth/handler",zC=encodeURIComponent("fac");function mm(p,u,d,m,b,w){return le.apply(this,arguments)}function le(){return(le=(0,I.A)(function*(p,u,d,m,b,w){ve(p.config.authDomain,p,"auth-domain-config-required"),ve(p.config.apiKey,p,"invalid-api-key");const M={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:m,v:oe.SDK_VERSION,eventId:b};if(u instanceof Hs){u.setDefaultLanguage(p.languageCode),M.providerId=u.providerId||"",(0,K.Im)(u.getCustomParameters())||(M.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ze,Qe]of Object.entries(w||{}))M[ze]=Qe}if(u instanceof ic){const ze=u.getScopes().filter(Qe=>""!==Qe);ze.length>0&&(M.scopes=ze.join(","))}p.tenantId&&(M.tid=p.tenantId);const W=M;for(const ze of Object.keys(W))void 0===W[ze]&&delete W[ze];const de=yield p._getAppCheckToken(),ke=de?`#${zC}=${encodeURIComponent(de)}`:"";return`${function Ut({config:p}){return p.emulator?se(p,WC):`https://${p.authDomain}/${GC}`}(p)}?${(0,K.Am)(W).slice(1)}${ke}`})).apply(this,arguments)}const Ct="webStorageSupport",dn=class xt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ss,this._completeRedirectFn=Qh,this._overrideRedirectResult=G0}_openPopup(u,d,m,b){var w=this;return(0,I.A)(function*(){var M;nr(null===(M=w.eventManagers[u._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const W=yield mm(u,d,m,wi(),b);return function Cl(p,u,d,m=500,b=600){const w=Math.max((window.screen.availHeight-b)/2,0).toString(),M=Math.max((window.screen.availWidth-m)/2,0).toString();let W="";const de=Object.assign(Object.assign({},J0),{width:m.toString(),height:b.toString(),top:w,left:M}),ke=(0,K.ZQ)().toLowerCase();d&&(W=be(ke)?"_blank":d),Gi(ke)&&(u=u||"http://localhost",de.scrollbars="yes");const ze=Object.entries(de).reduce((Jn,[So,id])=>`${Jn}${So}=${id},`,"");if(function ee(p=(0,K.ZQ)()){var u;return nc(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(ke)&&"_self"!==W)return function HC(p,u){const d=document.createElement("a");d.href=p,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",W),new gm(null);const Qe=window.open(u||"",W,ze);ve(Qe,p,"popup-blocked");try{Qe.focus()}catch{}return new gm(Qe)}(u,W,Uu())})()}_openRedirect(u,d,m,b){var w=this;return(0,I.A)(function*(){return yield w._originValidation(u),function P0(p){In().location.href=p}(yield mm(u,d,m,wi(),b)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:b,promise:w}=this.eventManagers[d];return b?Promise.resolve(b):(nr(w,"If manager is not set, promise should be"),w)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,I.A)(function*(){const m=yield function pc(p){return ft.apply(this,arguments)}(u),b=new K0(u);return m.register("authEvent",w=>(ve(w?.authEvent,u,"invalid-auth-event"),{status:b.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:b},d.iframes[u._key()]=m,b})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(Ct,{type:Ct},b=>{var w;const M=null===(w=b?.[0])||void 0===w?void 0:w[Ct];void 0!==M&&d(!!M),Zt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function wl(p){return Ai.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return he()||bo()||nc()}};class _m{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return mn("unexpected MultiFactorSessionType")}}}class gc extends _m{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new gc(u)}_finalizeEnroll(u,d,m){return function x0(p,u){return je(p,"POST","/v2/accounts/mfaEnrollment:finalize",ye(p,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function _l(p,u){return je(p,"POST","/v2/accounts/mfaSignIn:finalize",ye(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Co=(()=>{class p{constructor(){}static assertion(d){return gc._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var vm="@firebase/auth";class Ko{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,I.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Yo(){return window}(0,K.XA)("authIdTokenMaxAge"),function br(p){Au=p}({loadJS:p=>new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",p),m.onload=u,m.onerror=b=>{const w=en("internal-error");w.customData=b,d(w)},m.type="text/javascript",m.charset="UTF-8",function Em(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function qs(p){(0,oe._registerComponent)(new pt.uA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),b=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:M,authDomain:W}=m.options;ve(M&&!M.includes(":"),"invalid-api-key",{appName:m.name});const de={apiKey:M,authDomain:W,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fe(p)},ke=new Es(m,b,w,de);return function rC(p,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(Ye);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(m,u?.popupRedirectResolver)}(ke,d),ke},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new pt.uA("auth-internal",u=>{const d=ln(u.getProvider("auth").getImmediate());return new Ko(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(vm,"1.7.9",function eb(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,oe.registerVersion)(vm,"1.7.9","esm2017")}("Browser");function Tm(){return Tm=(0,I.A)(function*(p,u,d){var m;const{BuildInfo:b}=Yo();nr(u.sessionId,"AuthEvent did not contain a session ID");const w=yield function wm(p){return Cm.apply(this,arguments)}(u.sessionId),M={};return nc()?M.ibi=b.packageName:js()?M.apn=b.packageName:Zt(p,"operation-not-supported-in-this-environment"),b.displayName&&(M.appDisplayName=b.displayName),M.sessionId=w,mm(p,d,u.type,void 0,null!==(m=u.eventId)&&void 0!==m?m:void 0,M)}),Tm.apply(this,arguments)}function Zu(){return(Zu=(0,I.A)(function*(p){const{BuildInfo:u}=Yo(),d={};nc()?d.iosBundleId=u.packageName:js()?d.androidPackageName=u.packageName:Zt(p,"operation-not-supported-in-this-environment"),yield Tl(p,d)})).apply(this,arguments)}function Zh(){return(Zh=(0,I.A)(function*(p,u,d){const{cordova:m}=Yo();let b=()=>{};try{yield new Promise((w,M)=>{let W=null;function de(){var Qe;w();const Jn=null===(Qe=m.plugins.browsertab)||void 0===Qe?void 0:Qe.close;"function"==typeof Jn&&Jn(),"function"==typeof d?.close&&d.close()}function ke(){W||(W=window.setTimeout(()=>{M(en(p,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===document?.visibilityState&&ke()}u.addPassiveListener(de),document.addEventListener("resume",ke,!1),js()&&document.addEventListener("visibilitychange",ze,!1),b=()=>{u.removePassiveListener(de),document.removeEventListener("resume",ke,!1),document.removeEventListener("visibilitychange",ze,!1),W&&window.clearTimeout(W)}})}finally{b()}})).apply(this,arguments)}function Cm(){return(Cm=(0,I.A)(function*(p){const u=function di(p){if(nr(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let m=0;m<p.length;m++)d[m]=p.charCodeAt(m);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Nn extends K0{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,I.A)(function*(){yield u.initPromise})()}}function sb(p){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,I.A)(function*(p){const u=yield _c()._get(Cs(p));return u&&(yield _c()._remove(Cs(p))),u})).apply(this,arguments)}function ab(){const p=[];for(let d=0;d<20;d++){const m=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(m))}return p.join("")}function _c(){return Ye(jh)}function Cs(p){return ut("authEvent",p.config.apiKey,p.name)}function yc(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,K.I9)(d.join("?"))}const cb=class Am{constructor(){this._redirectPersistence=ss,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qh,this._overrideRedirectResult=G0}_initialize(u){var d=this;return(0,I.A)(function*(){const m=u._key();let b=d.eventManagers.get(m);return b||(b=new Nn(u),d.eventManagers.set(m,b),d.attachCallbackListeners(u,b)),b})()}_openPopup(u){Zt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,m,b){var w=this;return(0,I.A)(function*(){!function ib(p){var u,d,m,b,w,M,W,de,ke,ze;const Qe=Yo();ve("function"==typeof(null===(u=Qe?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ve(typeof(null===(d=Qe?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ve("function"==typeof(null===(w=null===(b=null===(m=Qe?.cordova)||void 0===m?void 0:m.plugins)||void 0===b?void 0:b.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve("function"==typeof(null===(de=null===(W=null===(M=Qe?.cordova)||void 0===M?void 0:M.plugins)||void 0===W?void 0:W.browsertab)||void 0===de?void 0:de.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve("function"==typeof(null===(ze=null===(ke=Qe?.cordova)||void 0===ke?void 0:ke.InAppBrowser)||void 0===ze?void 0:ze.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const M=yield w._initialize(u);yield M.initialized(),M.resetRedirect(),function H0(){Wh.clear()}(),yield w._originValidation(u);const W=function QC(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:ab(),postBody:null,tenantId:p.tenantId,error:en(p,"no-auth-event")}}(u,m,b);yield function YC(p,u){return _c()._set(Cs(p),u)}(u,W);const de=yield function Xh(p,u,d){return Tm.apply(this,arguments)}(u,W,d),ke=yield function nb(p){const{cordova:u}=Yo();return new Promise(d=>{u.plugins.browsertab.isAvailable(m=>{let b=null;m?u.plugins.browsertab.openUrl(p):b=u.InAppBrowser.open(p,function Ih(p=(0,K.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(b)})})}(de);return function rb(p,u,d){return Zh.apply(this,arguments)}(u,M,ke)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function tb(p){return Zu.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:m,handleOpenURL:b,BuildInfo:w}=Yo(),M=setTimeout((0,I.A)(function*(){yield sb(u),d.onEvent(Sm())}),500),W=function(){var ze=(0,I.A)(function*(Qe){clearTimeout(M);const Jn=yield sb(u);let So=null;Jn&&Qe?.url&&(So=function ob(p,u){var d,m;const b=function ef(p){const u=yc(p),d=u.link?decodeURIComponent(u.link):void 0,m=yc(d).link,b=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return yc(b).link||b||m||d||p}(u);if(b.includes("/__/auth/callback")){const w=yc(b),M=w.firebaseError?function JC(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,W=null===(m=null===(d=M?.code)||void 0===d?void 0:d.split("auth/"))||void 0===m?void 0:m[1],de=W?en(W):null;return de?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:de,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:b,postBody:null}}return null}(Jn,Qe.url)),d.onEvent(So||Sm())});return function(Jn){return ze.apply(this,arguments)}}();typeof m<"u"&&"function"==typeof m.subscribe&&m.subscribe(null,W);const de=b,ke=`${w.packageName.toLowerCase()}://`;Yo().handleOpenURL=function(){var ze=(0,I.A)(function*(Qe){if(Qe.toLowerCase().startsWith(ke)&&W({url:Qe}),"function"==typeof de)try{de(Qe)}catch(Jn){console.error(Jn)}});return function(Qe){return ze.apply(this,arguments)}}()}};function Sm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}function vc(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function lb(p=(0,K.ZQ)()){return!("file:"!==vc()&&"ionic:"!==vc()&&"capacitor:"!==vc()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function Al(){try{const p=self.localStorage,u=Uu();if(p)return p.setItem(u,"1"),p.removeItem(u),!function Rm(p=(0,K.ZQ)()){return function Wk(){return(0,K.lT)()&&11===document?.documentMode}()||function zk(p=(0,K.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,K.zW)()}catch{return Nm()&&(0,K.zW)()}return!1}function Nm(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bc(){return(function eD(){return"http:"===vc()||"https:"===vc()}()||(0,K.sr)()||lb())&&!function tD(){return(0,K.lV)()||(0,K.Ll)()}()&&Al()&&!Nm()}function nf(){return lb()&&typeof document<"u"}function ub(){return(ub=(0,I.A)(function*(){return!!nf()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const Ki={LOCAL:"local",NONE:"none",SESSION:"session"},td=ve,Ks="persistence";function Sl(p){return nd.apply(this,arguments)}function nd(){return(nd=(0,I.A)(function*(p){yield p._initializationPromise;const u=rd(),d=ut(Ks,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function rd(){var p;try{return(null===(p=function db(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Mm=ve;class ba{constructor(){this.browserResolver=Ye(dn),this.cordovaResolver=Ye(cb),this.underlyingResolver=null,this._redirectPersistence=ss,this._completeRedirectFn=Qh,this._overrideRedirectResult=G0}_initialize(u){var d=this;return(0,I.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,m,b){var w=this;return(0,I.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(u,d,m,b)})()}_openRedirect(u,d,m,b){var w=this;return(0,I.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(u,d,m,b)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return nf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,I.A)(function*(){if(u.underlyingResolver)return;const d=yield function rf(){return ub.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function xm(p){return p.unwrap()}function pb(p){return mb(p)}function mb(p){const{_tokenResponse:u}=p instanceof K.g?p.customData:p;if(!u)return null;if(!(p instanceof K.g)&&"temporaryProof"in u&&"phoneNumber"in u)return zs.credentialFromResult(p);const d=u.providerId;if(!d||d===gt.PASSWORD)return null;let m;switch(d){case gt.GOOGLE:m=cC;break;case gt.FACEBOOK:m=Mg;break;case gt.GITHUB:m=lC;break;case gt.TWITTER:m=f0;break;default:const{oauthIdToken:b,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:W,nonce:de}=u;return w||M||b||W?W?d.startsWith("saml.")?ga._create(d,W):zi._fromParams({providerId:d,signInMethod:d,pendingToken:W,idToken:b,accessToken:w}):new Er(d).credential({idToken:b,accessToken:w,rawNonce:de}):null}return p instanceof K.g?m.credentialFromError(p):m.credentialFromResult(p)}function Yr(p,u){return u.catch(d=>{throw d instanceof K.g&&function gb(p,u){var d;const m=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new _b(p,function Kg(p,u){var d;const m=(0,K.Ku)(p),b=u;return ve(u.customData.operationType,m,"argument-error"),ve(null===(d=b.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),qg._fromError(m,b)}(p,u));else if(m){const b=mb(u),w=u;b&&(w.credential=b,w.tenantId=m.tenantId||void 0,w.email=m.email||void 0,w.phoneNumber=m.phoneNumber||void 0)}}(p,d),d}).then(d=>{const b=d.user;return{operationType:d.operationType,credential:pb(d),additionalUserInfo:qr(d),user:Do.getOrCreate(b)}})}function Jo(p,u){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,I.A)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:m=>Yr(p,d.confirm(m))}})).apply(this,arguments)}class _b{constructor(u,d){this.resolver=d,this.auth=function fb(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Yr(xm(this.auth),this.resolver.resolveSignIn(u))}}class Do{constructor(u){this._delegate=u,this.multiFactor=function Jg(p){const u=(0,K.Ku)(p);return Yg.has(u)||Yg.set(u,pl._fromUser(u)),Yg.get(u)}(u)}static getOrCreate(u){return Do.USER_MAP.has(u)||Do.USER_MAP.set(u,new Do(u)),Do.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,I.A)(function*(){return Yr(d.auth,y0(d._delegate,u))})()}linkWithPhoneNumber(u,d){var m=this;return(0,I.A)(function*(){return Jo(m.auth,function Io(p,u,d){return bl.apply(this,arguments)}(m._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,I.A)(function*(){return Yr(d.auth,function Vk(p,u,d){return B0.apply(this,arguments)}(d._delegate,u,ba))})()}linkWithRedirect(u){var d=this;return(0,I.A)(function*(){return yield Sl(ln(d.auth)),OC(d._delegate,u,ba)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,I.A)(function*(){return Yr(d.auth,ac(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Jo(this.auth,function El(p,u,d){return Yn.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Yr(this.auth,function Lk(p,u,d){return V0.apply(this,arguments)}(this._delegate,u,ba))}reauthenticateWithRedirect(u){var d=this;return(0,I.A)(function*(){return yield Sl(ln(d.auth)),Br(d._delegate,u,ba)})()}sendEmailVerification(u){return function hC(p,u){return Vh.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,I.A)(function*(){return yield function Ph(p,u){return Fu.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function gC(p,u){const d=(0,K.Ku)(p);return(0,oe._isFirebaseServerApp)(d.auth.app)?Promise.reject(ot(d.auth)):pr(d,u,null)}(this._delegate,u)}updatePassword(u){return function mC(p,u){return pr((0,K.Ku)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function li(p,u){return zu.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function S0(p,u){return $g.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function fC(p,u,d){return Ug.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Do.USER_MAP=new WeakMap;const Ao=ve;let Ec=(()=>{class p{constructor(d,m){if(this.app=d,m.isInitialized())return this._delegate=m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=d.options;Ao(b,"invalid-api-key",{appName:d.name}),Ao(b,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?ba:void 0;this._delegate=m.initialize({options:{persistence:rD(b,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(fr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Do.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,m){!function iC(p,u,d){const m=ln(p);ve(m._canInitEmulator,m,"emulator-config-failed"),ve(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const b=!!d?.disableWarnings,w=n0(u),{host:M,port:W}=function Mk(p){const u=n0(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(m);if(b){const w=b[1];return{host:w,port:Wi(m.substr(w.length+1))}}{const[w,M]=m.split(":");return{host:w,port:Wi(M)}}}(u);m.config.emulator={url:`${w}//${M}${null===W?"":`:${W}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:M,port:W,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function ht(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,m)}applyActionCode(d){return function T0(p,u){return Lu.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Vu(this._delegate,d)}confirmPasswordReset(d,m){return function Qt(p,u,d){return Wo.apply(this,arguments)}(this._delegate,d,m)}createUserWithEmailAndPassword(d,m){var b=this;return(0,I.A)(function*(){return Yr(b._delegate,function uC(p,u,d){return Bu.apply(this,arguments)}(b._delegate,d,m))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function dC(p,u){return is.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function D0(p,u){const d=Ou.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,I.A)(function*(){Ao(bc(),d._delegate,"operation-not-supported-in-this-environment");const m=yield function kC(p,u){return Ku.apply(this,arguments)}(d._delegate,ba);return m?Yr(d._delegate,Promise.resolve(m)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function XC(p,u){ln(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,m,b){const{next:w,error:M,complete:W}=mr(d,m,b);return this._delegate.onAuthStateChanged(w,M,W)}onIdTokenChanged(d,m,b){const{next:w,error:M,complete:W}=mr(d,m,b);return this._delegate.onIdTokenChanged(w,M,W)}sendSignInLinkToEmail(d,m){return function C0(p,u,d){return cc.apply(this,arguments)}(this._delegate,d,m)}sendPasswordResetEmail(d,m){return function I0(p,u,d){return Ts.apply(this,arguments)}(this._delegate,d,m||void 0)}setPersistence(d){var m=this;return(0,I.A)(function*(){let b;switch(function nD(p,u){td(Object.values(Ki).includes(u),p,"invalid-persistence-type"),(0,K.lV)()?td(u!==Ki.SESSION,p,"unsupported-persistence-type"):(0,K.Ll)()?td(u===Ki.NONE,p,"unsupported-persistence-type"):Nm()?td(u===Ki.NONE||u===Ki.LOCAL&&(0,K.zW)(),p,"unsupported-persistence-type"):td(u===Ki.NONE||Al(),p,"unsupported-persistence-type")}(m._delegate,d),d){case Ki.SESSION:b=ss;break;case Ki.LOCAL:b=(yield Ye(ur)._isAvailable())?ur:jh;break;case Ki.NONE:b=Rt;break;default:return Zt("argument-error",{appName:m._delegate.name})}return m._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Yr(this._delegate,function ma(p){return xg.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Yr(this._delegate,kh(this._delegate,d))}signInWithCustomToken(d){return Yr(this._delegate,function Fg(p,u){return v0.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,m){return Yr(this._delegate,function w0(p,u,d){return(0,oe._isFirebaseServerApp)(p.app)?Promise.reject(ot(p)):kh((0,K.Ku)(p),Ft.credential(u,d)).catch(function(){var m=(0,I.A)(function*(b){throw"auth/password-does-not-meet-requirements"===b.code&&_a(p),b});return function(b){return m.apply(this,arguments)}}())}(this._delegate,d,m))}signInWithEmailLink(d,m){return Yr(this._delegate,function A0(p,u,d){return Lg.apply(this,arguments)}(this._delegate,d,m))}signInWithPhoneNumber(d,m){return Jo(this._delegate,function im(p,u,d){return fc.apply(this,arguments)}(this._delegate,d,m))}signInWithPopup(d){var m=this;return(0,I.A)(function*(){return Ao(bc(),m._delegate,"operation-not-supported-in-this-environment"),Yr(m._delegate,function am(p,u,d){return L0.apply(this,arguments)}(m._delegate,d,ba))})()}signInWithRedirect(d){var m=this;return(0,I.A)(function*(){return Ao(bc(),m._delegate,"operation-not-supported-in-this-environment"),yield Sl(m._delegate),$k(m._delegate,d,ba)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Gs(p,u){return rn.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=Ki,p})();function mr(p,u,d){let m=p;"function"!=typeof p&&({next:m,error:u,complete:d}=p);const b=m;return{next:M=>b(M&&Do.getOrCreate(M)),error:u,complete:d}}function rD(p,u){const d=function hb(p,u){const d=rd();if(!d)return[];const m=ut(Ks,p,u);switch(d.getItem(m)){case Ki.NONE:return[Rt];case Ki.LOCAL:return[ur,ss];case Ki.SESSION:return[ss];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(ur)&&d.push(ur),typeof window<"u")for(const m of[jh,ss])d.includes(m)||d.push(m);return d.includes(Rt)||d.push(Rt),d}class Tn{constructor(){this.providerId="phone",this._delegate=new zs(xm(Z.A.auth()))}static credential(u,d){return zs.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}Tn.PHONE_SIGN_IN_METHOD=zs.PHONE_SIGN_IN_METHOD,Tn.PROVIDER_ID=zs.PROVIDER_ID;const Om=ve;class iD{constructor(u,d,m=Z.A.app()){var b;Om(null===(b=m.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:m.name}),this._delegate=new Gh(m.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Xo(p){p.INTERNAL.registerComponent(new pt.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),m=u.getProvider("auth");return new Ec(d,m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ft,FacebookAuthProvider:Mg,GithubAuthProvider:lC,GoogleAuthProvider:cC,OAuthProvider:Er,SAMLAuthProvider:Mh,PhoneAuthProvider:Tn,PhoneMultiFactorGenerator:Co,RecaptchaVerifier:iD,TwitterAuthProvider:f0,Auth:Ec,AuthCredential:Ru,Error:K.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},73:()=>{const Ii=":";Error;const ye=function(Q,...H){if(ye.translate){const Ee=ye.translate(Q,H);Q=Ee[0],H=Ee[1]}let ce=kt(Q[0],Q.raw[0]);for(let Ee=1;Ee<Q.length;Ee++)ce+=H[Ee-1]+kt(Q[Ee],Q.raw[Ee]);return ce},je=":";function kt(Q,H){return H.charAt(0)===je?Q.substring(function nr(Q,H){for(let ce=1,Ee=1;ce<Q.length;ce++,Ee++)if("\\"===H[Ee])Ee++;else if(Q[ce]===Ii)return ce;throw new Error(`Unterminated $localize metadata block in "${H}".`)}(Q,H)+1):Q}globalThis.$localize=ye},467:(Ii,_e,N)=>{function I(oe,K,S,At,pt,jt,gt){try{var ue=oe[jt](gt),re=ue.value}catch(We){return void S(We)}ue.done?K(re):Promise.resolve(re).then(At,pt)}function Z(oe){return function(){var K=this,S=arguments;return new Promise(function(At,pt){var jt=oe.apply(K,S);function gt(re){I(jt,At,pt,gt,ue,"next",re)}function ue(re){I(jt,At,pt,gt,ue,"throw",re)}gt(void 0)})}}N.d(_e,{A:()=>Z})},635:(Ii,_e,N)=>{function K(te,se){var fe={};for(var ge in te)Object.prototype.hasOwnProperty.call(te,ge)&&se.indexOf(ge)<0&&(fe[ge]=te[ge]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ge=Object.getOwnPropertySymbols(te);Oe<ge.length;Oe++)se.indexOf(ge[Oe])<0&&Object.prototype.propertyIsEnumerable.call(te,ge[Oe])&&(fe[ge[Oe]]=te[ge[Oe]])}return fe}function We(te,se,fe,ge){return new(fe||(fe=Promise))(function(ye,je){function kt(ce){try{H(ge.next(ce))}catch(Ee){je(Ee)}}function Q(ce){try{H(ge.throw(ce))}catch(Ee){je(Ee)}}function H(ce){ce.done?ye(ce.value):function Oe(ye){return ye instanceof fe?ye:new fe(function(je){je(ye)})}(ce.value).then(kt,Q)}H((ge=ge.apply(te,se||[])).next())})}function pn(te){return this instanceof pn?(this.v=te,this):new pn(te)}function Zt(te,se,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ge=fe.apply(te,se||[]),ye=[];return Oe={},je("next"),je("throw"),je("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function je(Pe){ge[Pe]&&(Oe[Pe]=function(qe){return new Promise(function(En,St){ye.push([Pe,qe,En,St])>1||kt(Pe,qe)})})}function kt(Pe,qe){try{!function Q(Pe){Pe.value instanceof pn?Promise.resolve(Pe.value.v).then(H,ce):Ee(ye[0][2],Pe)}(ge[Pe](qe))}catch(En){Ee(ye[0][3],En)}}function H(Pe){kt("next",Pe)}function ce(Pe){kt("throw",Pe)}function Ee(Pe,qe){Pe(qe),ye.shift(),ye.length&&kt(ye[0][0],ye[0][1])}}function Ti(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,se=te[Symbol.asyncIterator];return se?se.call(te):(te=function Gt(te){var se="function"==typeof Symbol&&Symbol.iterator,fe=se&&te[se],ge=0;if(fe)return fe.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&ge>=te.length&&(te=void 0),{value:te&&te[ge++],done:!te}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),fe={},ge("next"),ge("throw"),ge("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ge(ye){fe[ye]=te[ye]&&function(je){return new Promise(function(kt,Q){!function Oe(ye,je,kt,Q){Promise.resolve(Q).then(function(H){ye({value:H,done:kt})},je)}(kt,Q,(je=te[ye](je)).done,je.value)})}}}N.d(_e,{AQ:()=>Zt,N3:()=>pn,Tt:()=>K,sH:()=>We,xN:()=>Ti}),"function"==typeof SuppressedError&&SuppressedError}},Ii=>{var _e=I=>Ii(Ii.s=I);_e(73),_e(510)}]);