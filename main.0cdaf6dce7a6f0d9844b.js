(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),c=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:u});c.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,c=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];c===this.normalizeInstanceIdentifier(d[0])&&f.resolve(u)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return u},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),c=n("NJ4a");class u extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends u{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),c=n("Lhse"),u=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[c.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[c.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new u(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const c=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class u extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),c=n("2fFW");let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),c=n("c2HN"),u=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),c=n("2QA8");class u extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XhEF:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="XhEF"},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return un}),n.d(e,"b",function(){return Ju}),n.d(e,"c",function(){return Qu}),n.d(e,"d",function(){return zu}),n.d(e,"e",function(){return Gu}),n.d(e,"f",function(){return zl}),n.d(e,"g",function(){return Dl}),n.d(e,"h",function(){return Bc}),n.d(e,"i",function(){return cl}),n.d(e,"j",function(){return hc}),n.d(e,"k",function(){return tl}),n.d(e,"l",function(){return gc}),n.d(e,"m",function(){return Tr}),n.d(e,"n",function(){return Su}),n.d(e,"o",function(){return Eo}),n.d(e,"p",function(){return kn}),n.d(e,"q",function(){return R}),n.d(e,"r",function(){return cn}),n.d(e,"s",function(){return Bo}),n.d(e,"t",function(){return Dc}),n.d(e,"u",function(){return Mc}),n.d(e,"v",function(){return Zu}),n.d(e,"w",function(){return Xc}),n.d(e,"x",function(){return Ml}),n.d(e,"y",function(){return Jc}),n.d(e,"z",function(){return kl}),n.d(e,"A",function(){return hl}),n.d(e,"B",function(){return Rn}),n.d(e,"C",function(){return Yu}),n.d(e,"D",function(){return $u}),n.d(e,"E",function(){return vc}),n.d(e,"F",function(){return yc}),n.d(e,"G",function(){return Rr}),n.d(e,"H",function(){return wc}),n.d(e,"I",function(){return br}),n.d(e,"J",function(){return Pn}),n.d(e,"K",function(){return Vl}),n.d(e,"L",function(){return Wc}),n.d(e,"M",function(){return vl}),n.d(e,"N",function(){return ln}),n.d(e,"O",function(){return Cc}),n.d(e,"P",function(){return _c}),n.d(e,"Q",function(){return tu}),n.d(e,"R",function(){return M}),n.d(e,"S",function(){return Rl}),n.d(e,"T",function(){return Il}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return Ol}),n.d(e,"W",function(){return ql}),n.d(e,"X",function(){return _l}),n.d(e,"Y",function(){return Xu}),n.d(e,"Z",function(){return Io}),n.d(e,"ab",function(){return aa}),n.d(e,"bb",function(){return yr}),n.d(e,"cb",function(){return Zn}),n.d(e,"db",function(){return Bn}),n.d(e,"eb",function(){return Hn}),n.d(e,"fb",function(){return Wn}),n.d(e,"gb",function(){return Gn}),n.d(e,"hb",function(){return zn}),n.d(e,"ib",function(){return Qn}),n.d(e,"jb",function(){return ra}),n.d(e,"kb",function(){return Bl}),n.d(e,"lb",function(){return ia}),n.d(e,"mb",function(){return oa}),n.d(e,"nb",function(){return qn}),n.d(e,"ob",function(){return B}),n.d(e,"pb",function(){return Jo}),n.d(e,"qb",function(){return ys}),n.d(e,"rb",function(){return gs}),n.d(e,"sb",function(){return ms}),n.d(e,"tb",function(){return na}),n.d(e,"ub",function(){return Ot}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Un}),n.d(e,"xb",function(){return Ho}),n.d(e,"yb",function(){return wt}),n.d(e,"zb",function(){return cc}),n.d(e,"Ab",function(){return Oi}),n.d(e,"Bb",function(){return ns}),n.d(e,"Cb",function(){return Ns}),n.d(e,"Db",function(){return Js}),n.d(e,"Eb",function(){return Ds}),n.d(e,"Fb",function(){return Lu}),n.d(e,"Gb",function(){return Z}),n.d(e,"Hb",function(){return st}),n.d(e,"Ib",function(){return _}),n.d(e,"Jb",function(){return C}),n.d(e,"Kb",function(){return rt}),n.d(e,"Lb",function(){return at}),n.d(e,"Mb",function(){return ss}),n.d(e,"Nb",function(){return hs}),n.d(e,"Ob",function(){return fs}),n.d(e,"Pb",function(){return ds}),n.d(e,"Qb",function(){return ls}),n.d(e,"Rb",function(){return us}),n.d(e,"Sb",function(){return ps}),n.d(e,"Tb",function(){return nn}),n.d(e,"Ub",function(){return Xs}),n.d(e,"Vb",function(){return Xa}),n.d(e,"Wb",function(){return tc}),n.d(e,"Xb",function(){return Za}),n.d(e,"Yb",function(){return On}),n.d(e,"Zb",function(){return on}),n.d(e,"ac",function(){return Hu}),n.d(e,"bc",function(){return vs}),n.d(e,"cc",function(){return Fu}),n.d(e,"dc",function(){return _s}),n.d(e,"ec",function(){return wu}),n.d(e,"fc",function(){return _u}),n.d(e,"gc",function(){return Ts}),n.d(e,"hc",function(){return Ss}),n.d(e,"ic",function(){return as}),n.d(e,"jc",function(){return Es}),n.d(e,"kc",function(){return Os}),n.d(e,"lc",function(){return gu}),n.d(e,"mc",function(){return mu}),n.d(e,"nc",function(){return yu}),n.d(e,"oc",function(){return Nu}),n.d(e,"pc",function(){return os}),n.d(e,"qc",function(){return Qt}),n.d(e,"rc",function(){return wr}),n.d(e,"sc",function(){return it}),n.d(e,"tc",function(){return js}),n.d(e,"uc",function(){return is}),n.d(e,"vc",function(){return qu}),n.d(e,"wc",function(){return Ws}),n.d(e,"xc",function(){return Ks}),n.d(e,"yc",function(){return $s}),n.d(e,"zc",function(){return Ys}),n.d(e,"Ac",function(){return Mu});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function c(t){for(let e in t)if(t[e]===c)return e;throw Error("Could not find renamed property on target object.")}function u(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=c({__forward_ref__:c});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return T(t,O)||T(t,x)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(k))?t[I]:null}const O=c({"\u0275prov":c}),I=c({"\u0275inj":c}),x=c({ngInjectableDef:c}),k=c({ngInjectorDef:c});var R=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let P;function A(t){const e=P;return P=t,e}function j(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function D(t){return{toString:t}.toString()}var N=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,B=L||U||F||V,q={},H=[],z=[],G=c({"\u0275cmp":c}),Q=c({"\u0275dir":c}),W=c({"\u0275pipe":c}),K=c({"\u0275mod":c}),$=c({"\u0275loc":c}),Y=c({"\u0275fac":c}),J=c({__NG_ELEMENT_ID__:c});let X=0;function Z(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ct(t)||function(t){return t[Q]||null}(t)}function et(t){return function(t){return t[W]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{nt[t.id]=t.type}),e}function it(t,e){return D(()=>{const n=ut(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function ot(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=Z;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[G]||null}function ut(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Ct}function Ct(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new bt(c&&c.currentValue,e,s===q),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let Et;function Ot(t){Et=t}function It(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function xt(t){return!!t.listen}wt.ngInherit=!0;const kt={createRenderer:(t,e)=>It()};function Rt(t){for(;Array.isArray(t);)t=t[0];return t}function Pt(t,e){return Rt(e[t])}function At(t,e){return Rt(e[t.index])}function jt(t,e){return t.data[e]}function Dt(t,e){return t[e]}function Nt(t,e){const n=e[t];return dt(n)?n:n[0]}function Mt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Bt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:pe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return qt.bindingsEnabled}function zt(){return qt.lFrame.lView}function Gt(){return qt.lFrame.tView}function Qt(t){qt.lFrame.contextLView=t}function Wt(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return qt.lFrame.currentTNode}function $t(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Yt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return qt.lFrame.isParent}function Xt(){qt.lFrame.isParent=!1}function Zt(){return qt.isInCheckNoChangesMode}function te(t){qt.isInCheckNoChangesMode=t}function ee(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ne(){return qt.lFrame.bindingIndex}function re(){return qt.lFrame.bindingIndex++}function ie(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oe(t){qt.lFrame.inI18n=t}function se(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ae(e)}function ae(t){qt.lFrame.currentDirectiveIndex=t}function ce(){return qt.lFrame.currentQueryIndex}function ue(t){qt.lFrame.currentQueryIndex=t}function le(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function he(t,e,n){if(n&R.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&R.Host||(r=le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=fe();return r.currentTNode=e,r.lView=t,!0}function de(t){const e=fe(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fe(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?pe(t):e}function pe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ge(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const me=ge;function ye(){const t=ge();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ve(){return qt.lFrame.selectedIndex}function be(t){qt.lFrame.selectedIndex=t}function we(){const t=qt.lFrame;return jt(t.tView,t.selectedIndex)}function _e(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ce(t,e,n){Ee(t,e,3,n)}function Se(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Te(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Oe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Oe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ie=-1;class xe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ke(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,s):e.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];Pe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Re(t){return 3===t||4===t||6===t}function Pe(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||je(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function je(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function De(t){return t!==Ie}function Ne(t){return 32767&t}function Me(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Le=!0;function Fe(t){const e=Le;return Le=t,e}let Ve=0;function Ue(t,e){const n=qe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Be(r.data,t),Be(e,null),Be(r.blueprint,null));const i=He(t,e),o=t.injectorIndex;if(De(i)){const t=Ne(i),n=Me(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Be(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function He(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ie;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ie}function ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Ve++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ge(t,e,n){if(n&R.Optional)return t;b(e,"NodeInjector")}function Qe(t,e,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const i=t[9],o=A(void 0);try{return i?i.get(e,r,n&R.Optional):j(e,r,n&R.Optional)}finally{A(o)}}return Ge(r,e,n)}function We(t,e,n,r=R.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:$e:e}(n);if("function"==typeof o){if(!he(e,t,r))return r&R.Host?Ge(i,n,r):Qe(e,n,r,i);try{const t=o();if(null!=t||r&R.Optional)return t;b(n)}finally{me()}}else if("number"==typeof o){let i=null,s=qe(t,e),a=Ie,c=r&R.Host?e[16][6]:null;for((-1===s||r&R.SkipSelf)&&(a=-1===s?He(t,e):e[s+8],a!==Ie&&tn(r,!1)?(i=e[1],s=Ne(a),e=Me(a,e)):s=-1);-1!==s;){const t=e[1];if(Ze(o,s,t.data)){const t=Ye(s,e,n,i,r,c);if(t!==Ke)return t}a=e[s+8],a!==Ie&&tn(r,e[1].data[s+8]===c)&&Ze(o,s,e)?(i=t,s=Ne(a),e=Me(a,e)):s=-1}}}return Qe(e,n,r,i)}const Ke={};function $e(){return new en(Wt(),zt())}function Ye(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=Je(a,s,n,null==r?gt(a)&&Le:r!=s&&0!=(3&a.type),i&R.Host&&o===a);return null!==c?Xe(e,s,c,a):Ke}function Je(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,u=o>>20,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=s[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=s[c];if(t&&yt(t)&&t.type===n)return c}return null}function Xe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof xe){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Fe(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?A(s.injectImpl):null;he(t,r,R.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==c&&A(c),Fe(a),s.resolving=!1,me()}}return i}function Ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function tn(t,e){return!(t&R.Self||t&R.Host&&e)}class en{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return We(this._tNode,this._lView,t,void 0,e)}}function nn(t){return D(()=>{const e=t.prototype.constructor,n=e[Y]||rn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||rn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function rn(t){return g(t)?()=>{const e=rn(p(t));return e&&e()}:vt(t)}function on(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Re(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const sn="__parameters__";function an(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(sn)?t[sn]:Object.defineProperty(t,sn,{value:[]})[sn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class cn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const un=new cn("AnalyzeForEntryComponents"),ln=Function;function hn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),hn(r,e)):e!==t&&e.push(r)}return e}function dn(t,e){t.forEach(t=>Array.isArray(t)?dn(t,e):e(t))}function fn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function mn(t,e,n){let r=vn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function yn(t,e){const n=vn(t,e);if(n>=0)return t[1|n]}function vn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const bn={},wn=/\n/gm,_n="__source",Cn=c({provide:String,useValue:c});let Sn;function Tn(t){const e=Sn;return Sn=t,e}function En(t,e=R.Default){if(void 0===Sn)throw new Error("inject() must be called from an injection context");return null===Sn?j(t,void 0,e):Sn.get(t,e&R.Optional?null:void 0,e)}function On(t,e=R.Default){return(P||En)(p(t),e)}function In(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=R.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(On(t,n))}else e.push(On(r))}return e}function xn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const kn=xn(an("Inject",t=>({token:t})),-1),Rn=xn(an("Optional"),8),Pn=xn(an("SkipSelf"),4);let An;function jn(t){var e;return(null===(e=function(){if(void 0===An&&(An=null,B.trustedTypes))try{An=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return An}())||void 0===e?void 0:e.createHTML(t))||t}class Dn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Nn extends Dn{getTypeName(){return"HTML"}}class Mn extends Dn{getTypeName(){return"Style"}}class Ln extends Dn{getTypeName(){return"Script"}}class Fn extends Dn{getTypeName(){return"URL"}}class Vn extends Dn{getTypeName(){return"ResourceURL"}}function Un(t){return t instanceof Dn?t.changingThisBreaksApplicationSecurity:t}function Bn(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof Dn&&t.getTypeName()||null}function Hn(t){return new Nn(t)}function zn(t){return new Mn(t)}function Gn(t){return new Ln(t)}function Qn(t){return new Fn(t)}function Wn(t){return new Vn(t)}function Kn(t){const e=new Yn(t);return function(){try{return!!(new window.DOMParser).parseFromString(jn(""),"text/html")}catch(t){return!1}}()?new $n(e):e}class $n{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(jn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Yn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=jn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=jn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match(Jn)||t.match(Xn)?t:"unsafe:"+t}function tr(t){return(t=String(t)).split(",").map(t=>Zn(t.trim())).join(", ")}function er(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function nr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const rr=er("area,br,col,hr,img,wbr"),ir=er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=er("rp,rt"),sr=nr(or,ir),ar=nr(rr,nr(ir,er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nr(or,er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sr),cr=er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ur=er("srcset"),lr=nr(cr,ur,er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hr=er("script,style,template");class dr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ar.hasOwnProperty(e))return this.sanitizedSomething=!0,!hr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!lr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;cr[i]&&(o=Zn(o)),ur[i]&&(o=tr(o)),this.buf.push(" ",e,'="',gr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ar.hasOwnProperty(e)&&!rr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(gr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pr=/([^\#-~ |!])/g;function gr(t){return t.replace(/&/g,"&amp;").replace(fr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(pr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mr;function yr(t,e){let n=null;try{mr=mr||Kn(t);let r=e?String(e):"";n=mr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=mr.getInertBodyElement(r)}while(r!==o);return jn((new dr).sanitizeChildren(vr(n)||n))}finally{if(n){const t=vr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function vr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var br=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function wr(t){const e=function(){const t=zt();return t&&t[12]}();return e?e.sanitize(br.URL,t)||"":Bn(t,"URL")?Un(t):Zn(y(t))}function _r(t){return t.ngDebugContext}function Cr(t){return t.ngOriginalError}function Sr(t,...e){t.error(...e)}class Tr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Sr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_r(t)?_r(t):this._findContext(Cr(t)):null}_findOriginalError(t){let e=Cr(t);for(;e&&Cr(e);)e=Cr(e);return e}}const Er=/^>|^->|<!--|-->|--!>|<!-$/g,Or=/(<|>)/;function Ir(t,e){t.__ngContext__=e}const xr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function kr(t){return t instanceof Function?t():t}var Rr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Pr;function Ar(t,e){return Pr(t,e)}function jr(t){const e=t[3];return ft(e)?e[3]:e}function Dr(t){return Mr(t[13])}function Nr(t){return Mr(t[4])}function Mr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Lr(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=Rt(r);0===t&&null!==n?null==i?$r(e,n,a):Kr(e,n,a,i||null,!0):1===t&&null!==n?Kr(e,n,a,i||null,!0):2===t?ai(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Rt(n)&&Lr(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];ui(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Fr(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}function Vr(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}function Ur(t,e){return t.createComment(function(t){return t.replace(Er,t=>t.replace(Or,"\u200b$1\u200b"))}(e))}function Br(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function qr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Bt(i,-1)),n.splice(r,1)}function Hr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&qr(o,r),e>0&&(t[n-1][4]=r[4]);const s=pn(t,ht+e);ui(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function zr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&ui(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Gr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Gr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Gr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Gr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof xe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Rt(e[t]),a=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&qr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Qr(t,e,n){return Wr(t,e.parent,n)}function Wr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return At(r,n)}function Kr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function $r(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function Yr(t,e,n,r,i){null!==r?Kr(t,e,n,r,i):$r(t,e,n)}function Jr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Xr(t,e,n){return ei(t,e,n)}function Zr(t,e,n){return 40&t.type?At(t,n):null}let ti,ei=Zr;function ni(t,e){ei=t,ti=e}function ri(t,e,n,r){const i=Qr(t,r,e),o=e[11],s=Xr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Yr(o,i,n[a],s,!1);else Yr(o,i,n,s,!1);void 0!==ti&&ti(o,r,e,n,i)}function ii(t,e){if(null!==e){const n=e.type;if(3&n)return At(e,t);if(4&n)return si(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ii(t,n);{const n=t[e.index];return ft(n)?si(-1,n):Rt(n)}}if(32&n)return Ar(e,t)()||Rt(t[e.index]);{const n=oi(t,e);return null!==n?Array.isArray(n)?n[0]:ii(jr(t[16]),n):ii(t,e.next)}}return null}function oi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function si(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ii(t,r)}return e[7]}function ai(t,e,n){const r=Jr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function ci(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===e&&(a&&Ir(Rt(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)ci(t,e,n.child,r,i,o,!1),Lr(e,t,i,a,o);else if(32&c){const s=Ar(n,r);let c;for(;c=s();)Lr(e,t,i,c,o);Lr(e,t,i,a,o)}else 16&c?li(t,e,r,n,i,o):Lr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ui(t,e,n,r,i,o){ci(n,r,t.firstChild,e,i,o,!1)}function li(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Lr(e,t,i,a[c],o);else ci(t,e,a,s[3],i,o,!0)}function hi(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function di(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function fi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const pi="ng-template";function gi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==fi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function mi(t){return 4===t.type&&t.value!==pi}function yi(t,e,n){return e===(4!==t.type||n?t.value:pi)}function vi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Re(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!yi(t,c,n)||""===c&&1===e.length){if(bi(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!gi(t.attrs,u,n)){if(bi(r))return!1;s=!0}continue}const l=wi(8&r?"class":c,i,mi(t),n);if(-1===l){if(bi(r))return!1;s=!0;continue}if(""!==u){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==fi(e,u,0)||2&r&&u!==t){if(bi(r))return!1;s=!0}}}}else{if(!s&&!bi(r)&&!bi(c))return!1;if(s&&bi(c))continue;s=!1,r=c|1&r}}return bi(r)||s}function bi(t){return 0==(1&t)}function wi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function _i(t,e,n=!1){for(let r=0;r<e.length;r++)if(vi(t,e[r],n))return!0;return!1}function Ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Si(t,e){return t?":not("+e.trim()+")":e}function Ti(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||bi(s)||(e+=Si(o,i),i=""),r=s,o=o||!bi(r);n++}return""!==i&&(e+=Si(o,i)),e}const Ei={};function Oi(t){Ii(Gt(),zt(),ve()+t,Zt())}function Ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ce(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Se(e,r,0,n)}be(n)}function xi(t,e){return t<<17|e<<2}function ki(t){return t>>17&32767}function Ri(t){return 2|t}function Pi(t){return(131068&t)>>2}function Ai(t,e){return-131069&t|e<<2}function ji(t){return 1|t}function Di(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ue(i),n.contentQueries(2,e[o],o)}}}function Ni(t,e,n,r,i,o,s,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Mi(t,e,n,r,i){let o=t.data[e];if(null===o)o=Li(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=$t();o.injectorIndex=null===t?-1:t.injectorIndex}return Yt(o,!0),o}function Li(t,e,n,r,i){const o=Kt(),s=Jt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Fi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vi(t,e,n){de(e);try{const r=t.viewQuery;null!==r&&yo(1,r,n);const i=t.template;null!==i&&qi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Di(t,e),t.staticViewQueries&&yo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ho(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ye()}}function Ui(t,e,n,r){const i=e[2];if(256==(256&i))return;de(e);const o=Zt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&qi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ce(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Se(e,n,0,null),Te(e,0)}if(function(t){for(let e=Dr(t);null!==e;e=Nr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Bt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Dr(t);null!==e;e=Nr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&Ui(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Di(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ce(e,n)}else{const n=t.contentHooks;null!==n&&Se(e,n,1),Te(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)be(~r);else{const i=r,o=n[++t],s=n[++t];se(o,i),s(2,e[i])}}}finally{be(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)uo(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&yo(2,c,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ce(e,n)}else{const n=t.viewHooks;null!==n&&Se(e,n,2),Te(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Bt(e[3],-1))}finally{ye()}}function Bi(t,e,n,r){const i=e[10],o=!Zt(),s=Lt(e);try{o&&!s&&i.begin&&i.begin(),s&&Vi(t,e,r),Ui(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function qi(t,e,n,r,i){const o=ve(),s=2&r;try{be(-1),s&&e.length>lt&&Ii(t,e,lt,Zt()),n(r,i)}finally{be(o)}}function Hi(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function zi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),Ir(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&io(e,n,r);const c=Xe(e,t,a,n);Ir(c,e),null!==s&&so(0,a-i,c,r,0,s),o&&(Nt(n.index,e)[8]=c)}}(t,e,n,At(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{be(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ae(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Zi(r,i)}}finally{be(-1),ae(s)}}(t,e,n))}function Gi(t,e,n=At){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Qi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Wi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Wi(t,e,n,r,i,o,s,a,c,u){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ei);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Ki(t,e,n,r){const i=bo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&wo(t).push(r,i.length-1))}function $i(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Yi(t,e,n,r,i,o,s,a){const c=At(e,n);let u,l=e.inputs;var h;!a&&null!=l&&(u=l[r])?(Co(t,n,u,r,i),gt(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(c,r,i):Pe(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Ji(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];_i(n,s.selectors,!1)&&(i||(i=[]),ze(Ue(n,e),t,s.type),yt(s)?(to(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,no(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,c=Fi(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=Ae(n.mergedAttrs,u.hostAttrs),ro(t,n,e,c,u),eo(c,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,u=null===i||mi(e)?null:ao(n,i);o.push(u),s=$i(n,c,s),a=$i(t.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function Xi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Zi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function to(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function eo(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function no(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ro(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new xe(o,yt(i),null);t.blueprint[r]=s,n[r]=s,Xi(t,e,0,r,Fi(t,n,i.hostVars,Ei),i)}function io(t,e,n){const r=At(e,t),i=Qi(n),o=t[10],s=fo(t,Ni(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function oo(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function so(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ao(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function co(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function uo(t,e){const n=Nt(e,t);if(Ft(n)){const t=n[1];80&n[2]?Ui(t,n,t.template,n[8]):n[5]>0&&lo(n)}}function lo(t){for(let n=Dr(t);null!==n;n=Nr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ui(t,e,t.template,e[8])}else e[5]>0&&lo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Nt(e[n],t);Ft(r)&&r[5]>0&&lo(r)}}function ho(t,e){const n=Nt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Vi(r,n,n[8])}function fo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function po(t){for(;t;){t[2]|=64;const e=jr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function go(t,e,n){const r=e[10];r.begin&&r.begin();try{Ui(t,e,t.template,n)}catch(i){throw _o(e,i),i}finally{r.end&&r.end()}}function mo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Mt(n),i=r[1];Bi(i,r,i.template,n)}}(t[8])}function yo(t,e,n){ue(0),e(t,n)}const vo=(()=>Promise.resolve(null))();function bo(t){return t[7]||(t[7]=[])}function wo(t){return t.cleanup||(t.cleanup=[])}function _o(t,e){const n=t[9],r=n?n.get(Tr,null):null;r&&r.handleError(e)}function Co(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=e[s],u=t.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function So(t,e,n){const r=Pt(e,t);Vr(t[11],r,n)}function To(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Eo=new cn("INJECTOR",-1);class Oo{get(t,e=bn){if(e===bn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Io=new cn("Set Injector scope."),xo={},ko={},Ro=[];let Po;function Ao(){return void 0===Po&&(Po=new Oo),Po}function jo(t,e=null,n=null,r){return new Do(t,n,e||Ao(),r)}class Do{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&dn(e,n=>this.processProvider(n,t,e)),dn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Eo,Lo(void 0,this));const o=this.records.get(Io);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=bn,n=R.Default){this.assertNotDestroyed();const r=Tn(this);try{if(!(n&R.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof cn)&&S(t);e=n&&this.injectableDefInScope(n)?Lo(No(t),xo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&R.Self?Ao():this.parent).get(t,e=n&R.Optional&&e===bn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[_n]&&i.unshift(e[_n]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Tn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{dn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];dn(r,t=>this.processProvider(t,n,r||Ro))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,Lo(a,xo));const c=r.providers;if(null!=c&&!s){const e=t;dn(c,t=>this.processProvider(t,e,c))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Vo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Fo(t)?Lo(void 0,t.useValue):Lo(Mo(t),xo)}(t);if(Vo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Lo(void 0,xo,!0),e.factory=()=>In(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===xo&&(e.value=ko,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function No(t){const e=S(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof cn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=gn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Mo(t,e,n){let r;if(Vo(t)){const e=p(t);return vt(e)||No(e)}if(Fo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...In(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>On(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||No(e);r=()=>new e(...In(t.deps))}var i;return r}function Lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fo(t){return null!==t&&"object"==typeof t&&Cn in t}function Vo(t){return"function"==typeof t}const Uo=function(t,e,n){return function(t,e=null,n=null,r){const i=jo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Bo=(()=>{class t{static create(t,e){return Array.isArray(t)?Uo(t,e,""):Uo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=bn,t.NULL=new Oo,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>On(Eo)}),t.__NG_ELEMENT_ID__=-1,t})();function qo(t,e){_e(Mt(t)[1],Wt())}function Ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=zo(t.inputs),e.declaredInputs=zo(t.declaredInputs),e.outputs=zo(t.outputs);const n=i.hostBindings;n&&Wo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Go(t,o),s&&Qo(t,s),u(t.inputs,i.inputs),u(t.declaredInputs,i.declaredInputs),u(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function zo(t){return t===q?{}:t===z?[]:t}function Go(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Qo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Wo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ko=null;function $o(){if(!Ko){const t=B.Symbol;if(t&&t.iterator)Ko=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ko=n)}}}return Ko}class Yo{constructor(t){this.wrapped=t}static wrap(t){return new Yo(t)}static unwrap(t){return Yo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Yo}}function Jo(t){return!!Xo(t)&&(Array.isArray(t)||!(t instanceof Map)&&$o()in t)}function Xo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Zo(t,e,n){return t[e]=n}function ts(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function es(t,e,n,r){const i=ts(t,e,n);return ts(t,e+1,r)||i}function ns(t,e,n,r){const i=zt();return ts(i,re(),e)&&(Gt(),function(t,e,n,r,i,o){const s=At(t,e);oo(e[11],s,o,t.value,n,r,i)}(we(),i,t,e,n,r)),ns}function rs(t,e,n,r){return ts(t,re(),n)?e+y(n)+r:Ei}function is(t,e,n,r,i,o,s,a){const c=zt(),u=Gt(),l=t+lt,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,c){const u=e.consts,l=Mi(e,t,4,s||null,Vt(u,a));Ji(e,n,l,Vt(u,c)),_e(e,l);const h=l.tViews=Wi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,o,s):u.data[l];Yt(h,!1);const d=c[11].createComment("");ri(u,c,d,h),Ir(d,c),fo(c,c[l]=co(d,c,d,h)),mt(h)&&zi(u,c,h),null!=s&&Gi(c,h,a)}function os(t){return Dt(qt.lFrame.contextLView,lt+t)}function ss(t,e=R.Default){const n=zt();return null===n?On(t,e):We(Wt(),n,p(t),e)}function as(t,e,n){const r=zt();return ts(r,re(),e)&&Yi(Gt(),we(),r,t,e,r[11],n,!1),as}function cs(t,e,n,r,i){const o=i?"class":"style";Co(t,n,e.inputs[o],o,r)}function us(t,e,n,r){const i=zt(),o=Gt(),s=lt+t,a=i[11],c=i[s]=Br(a,e,qt.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,c=Mi(e,t,2,i,Vt(a,o));return Ji(e,n,c,Vt(a,s)),null!==c.attrs&&To(c,c.attrs,!1),null!==c.mergedAttrs&&To(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,n,r):o.data[s];Yt(u,!0);const l=u.mergedAttrs;null!==l&&ke(a,c,l);const h=u.classes;null!==h&&di(a,c,h);const d=u.styles;null!==d&&hi(a,c,d),64!=(64&u.flags)&&ri(o,i,c,u),0===qt.lFrame.elementDepthCount&&Ir(c,i),qt.lFrame.elementDepthCount++,mt(u)&&(zi(o,i,u),Hi(o,u,i)),null!==r&&Gi(i,u)}function ls(){let t=Wt();Jt()?Xt():(t=t.parent,Yt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(_e(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&cs(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&cs(n,e,zt(),e.stylesWithoutHost,!1)}function hs(t,e,n,r){us(t,e,n,r),ls()}function ds(t,e,n){const r=zt(),i=Gt(),o=t+lt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=Mi(e,t,8,"ng-container",s);return null!==s&&To(a,s,!0),Ji(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Yt(s,!0);const a=r[o]=r[11].createComment("");ri(i,r,a,s),Ir(a,r),mt(s)&&(zi(i,r,s),Hi(i,s,r)),null!=n&&Gi(r,s)}function fs(){let t=Wt();const e=Gt();Jt()?Xt():(t=t.parent,Yt(t,!1)),e.firstCreatePass&&(_e(e,t),pt(t)&&e.queries.elementEnd(t))}function ps(){return zt()}function gs(t){return!!t&&"function"==typeof t.then}function ms(t){return!!t&&"function"==typeof t.subscribe}const ys=ms;function vs(t,e,n=!1,r){const i=zt(),o=Gt(),s=Wt();return function(t,e,n,r,i,o,s=!1,a){const c=mt(r),u=t.firstCreatePass&&wo(t),l=bo(e);let h=!0;if(3&r.type){const d=At(r,e),f=a?a(d):q,p=f.target||d,g=l.length,m=a?t=>a(Rt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&c&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ws(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),u&&u.push(i,m,g,g+1)}}else o=ws(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),u&&u.push(i,m,g,s)}else o=ws(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),vs}function bs(t,e,n,r){try{return!1!==n(r)}catch(i){return _o(t,i),!1}}function ws(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&po(s);let a=bs(e,0,r,o),c=n.__ngNextListenerFn__;for(;c;)a=bs(e,0,c,o)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function _s(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function Cs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?_i(t,o,!0):Ci(r,o))return i}else n=i}return n}function Ss(t){const e=zt()[16][6];if(!e.projection){const n=e.projection=gn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Cs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ts(t,e=0,n){const r=zt(),i=Gt(),o=Mi(i,lt+t,16,null,n||null);null===o.projection&&(o.projection=e),Xt(),64!=(64&o.flags)&&function(t,e,n){li(e[11],0,e,n,Qr(t,n,e),Xr(n.parent||e[6],n,e))}(i,r,o)}function Es(t,e,n){return Os(t,"",e,"",n),Es}function Os(t,e,n,r,i){const o=zt(),s=rs(o,e,n,r);return s!==Ei&&Yi(Gt(),we(),o,t,s,o[11],i,!1),Os}function Is(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ki(o):Pi(o),c=!1;for(;0!==a&&(!1===c||s);){const n=t[a+1];xs(t[a],e)&&(c=!0,t[a+1]=r?ji(n):Ri(n)),a=r?ki(n):Pi(n)}c&&(t[n+1]=r?Ri(o):ji(o))}function xs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&vn(t,e)>=0}const ks={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rs(t){return t.substring(ks.key,ks.keyEnd)}function Ps(t,e){const n=ks.textEnd;return n===e?-1:(e=ks.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ks.key=e,n),As(t,e,n))}function As(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function js(t,e,n){return Ls(t,e,n,!1),js}function Ds(t,e){return Ls(t,e,null,!0),Ds}function Ns(t){Fs(mn,Ms,t,!0)}function Ms(t,e){for(let n=function(t){return function(t){ks.key=0,ks.keyEnd=0,ks.value=0,ks.valueEnd=0,ks.textEnd=t.length}(t),Ps(t,As(t,0,ks.textEnd))}(e);n>=0;n=Ps(e,n))mn(t,Rs(e),!0)}function Ls(t,e,n,r){const i=zt(),o=Gt(),s=ie(2);o.firstUpdatePass&&Us(o,t,s,r),e!==Ei&&ts(i,s,e)&&Hs(o,o.data[ve()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Un(t)))),t}(e,n),r,s)}function Fs(t,e,n,r){const i=Gt(),o=ie(2);i.firstUpdatePass&&Us(i,null,o,r);const s=zt();if(n!==Ei&&ts(s,o,n)){const a=i.data[ve()];if(Qs(a,r)&&!Vs(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),cs(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Ei&&(i=H);let c=0,u=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0;let p,g=null;l===h?(c+=2,u+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(c+=2,g=l):(u+=2,g=h,p=f),null!==g&&Hs(t,e,n,r,g,p,s,a),l=c<i.length?i[c]:null,h=u<o.length?o[u]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Un(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Vs(t,e){return e>=t.expandoStartIndex}function Us(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ve()],s=Vs(t,n);Qs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=qs(n=Bs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Bs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Pi(r))return t[ki(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Bs(null,t,e,n[1],r),n=qs(n,e.attrs,r),function(t,e,n,r){t[ki(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=qs(r,t[o].hostAttrs,n);return qs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ki(s),c=Pi(s);t[r]=n;let u,l=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||vn(t,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const e=ki(t[a+1]);t[r+1]=xi(e,a),0!==e&&(t[e+1]=Ai(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=xi(a,0),0!==a&&(t[a+1]=Ai(t[a+1],r)),a=r;else t[r+1]=xi(c,0),0===a?a=r:t[c+1]=Ai(t[c+1],r),c=r;l&&(t[r+1]=Ri(t[r+1])),Is(t,u,r,!0),Is(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&vn(o,e)>=0&&(n[r+1]=ji(n[r+1]))}(e,u,t,r,o),s=xi(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Bs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=qs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Hs(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1];Gs(1==(1&u)?zs(c,e,n,i,Pi(u),s):void 0)||(Gs(o)||2==(2&u)&&(o=zs(c,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Rr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Rr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Pt(ve(),n),i,o))}function zs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),c=o?e[1]:e,u=null===c;let l=n[i+1];l===Ei&&(l=u?H:void 0);let h=u?yn(l,r):c===r?l:void 0;if(o&&!Gs(h)&&(h=yn(e,r)),Gs(h)&&(a=h,s))return a;const d=t[i+1];i=s?ki(d):Pi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=yn(t,r))}return a}function Gs(t){return void 0!==t}function Qs(t,e){return 0!=(t.flags&(e?16:32))}function Ws(t,e=""){const n=zt(),r=Gt(),i=t+lt,o=r.firstCreatePass?Mi(r,i,1,e,null):r.data[i],s=n[i]=Fr(n[11],e);ri(r,n,s,o),Yt(o,!1)}function Ks(t){return $s("",t,""),Ks}function $s(t,e,n){const r=zt(),i=rs(r,t,e,n);return i!==Ei&&So(r,ve(),i),$s}function Ys(t,e,n,r,i){const o=zt(),s=function(t,e,n,r,i,o){const s=es(t,ne(),n,i);return ie(2),s?e+y(n)+r+y(i)+o:Ei}(o,t,e,n,r,i);return s!==Ei&&So(o,ve(),s),Ys}function Js(t,e,n,r,i,o,s,a,c){Fs(mn,Ms,function(t,e,n,r,i,o,s,a,c,u){const l=function(t,e,n,r,i,o){const s=es(t,e,n,r);return es(t,e+2,i,o)||s}(t,ne(),n,i,s,c);return ie(4),l?e+y(n)+r+y(i)+o+y(s)+a+y(c)+u:Ei}(zt(),t,e,n,r,i,o,s,a,c),!0)}function Xs(t,e,n){const r=zt();return ts(r,re(),e)&&Yi(Gt(),we(),r,t,e,r[11],n,!0),Xs}const Zs=void 0;var ta=["en",[["a","p"],["AM","PM"],Zs],[["AM","PM"],Zs,Zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zs,"{1} 'at' {0}",Zs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ea={};function na(t,e,n){"string"!=typeof e&&(n=e,e=t[aa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ea[e]=t,n&&(ea[e][aa.ExtraData]=n)}function ra(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=sa(e);if(n)return n;const r=e.split("-")[0];if(n=sa(r),n)return n;if("en"===r)return ta;throw new Error(`Missing locale data for the locale "${t}".`)}function ia(t){return ra(t)[aa.CurrencyCode]||null}function oa(t){return ra(t)[aa.PluralCase]}function sa(t){return t in ea||(ea[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),ea[t]}var aa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ca=["zero","one","two","few","many"],ua="en-US",la={marker:"element"},ha={marker:"ICU"};var da=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let fa=ua;function pa(t){var e;null==(e=t)&&w("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(fa=t.toLowerCase().replace(/_/g,"-"))}function ga(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Zr(t,0,n):Rt(n[i])}function ma(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Kr(t,s,n[o[e]],a,!1)}}function ya(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];va(r)||ba(r,e)&&null===wa(r)&&_a(r,e.index)}}function va(t){return!(64&t.type)}function ba(t,e){return va(e)||t.index>e.index}function wa(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function _a(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(ni(ga,ma),t.insertBeforeIndex=e)}function Ca(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Sa(t,e,n){const r=Li(t,n,64,null,null);return ya(e,r),r}function Ta(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Ea=0,Oa=0;function Ia(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const c=e[a];if("string"==typeof c){const t=e[++a];null===n[t]&&(n[t]=Fr(i,c))}else if("number"==typeof c)switch(1&c){case 0:const u=c>>>17;let l,h;if(null===s&&(s=u,o=Jr(i,r)),u===s?(l=r,h=o):(l=null,h=Rt(n[u])),null!==h){const e=(131070&c)>>>1;Kr(i,h,n[e],l,!1);const r=Ca(t,e);if(null!==r&&"object"==typeof r){const e=Ta(r,n);null!==e&&Ia(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];oo(i,Pt(c>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case ha:const t=e[++a],r=e[++a];null===n[r]&&Ir(n[r]=Ur(i,t),n);break;case la:const o=e[++a],s=e[++a];null===n[s]&&Ir(n[s]=Br(i,o,null),n)}}}function xa(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=y(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],c=n[++s],u=t.data[a];"string"==typeof u?oo(e[11],e[a],null,u,o,i,c):Yi(t,u,e,o,i,e[11],c,!1);break;case 0:const l=e[a];null!==l&&Vr(e[11],l,i);break;case 2:Ra(t,Ca(t,a),e,i);break;case 3:ka(t,Ca(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=Ca(t,i>>>2);e[n.currentCaseLViewIndex]<0&&ka(t,n,r,e)}}o+=a}}function ka(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Ea;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),xa(t,r,e.update[i],n,o)}}function Ra(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=oa(e)(parseInt(t,10)),r=ca[n];return void 0!==r?r:"other"}(e,fa);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Ta(e,n)!==i&&(Pa(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ia(t,e.create[i],n,r)}}function Pa(t,e,n){let r=Ta(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Pt(r,n);null!==t&&ai(n[11],t)}else Pa(t,Ca(t,~r),n)}}}const Aa=/\ufffd(\d+):?\d*\ufffd/gi,ja=/\ufffd(\d+)\ufffd/,Da=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Na=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Ma=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,La=/\uE500/g;function Fa(t,e,n,r,i,o,s){const a=Fi(t,r,1,null);let c=a<<da.SHIFT,u=$t();e===u&&(u=null),null===u&&(c|=da.APPEND_EAGERLY),s&&(c|=da.COMMENT,void 0===Pr&&(Pr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Ta(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(c,null===o?"":o);const l=Li(t,a,s?32:1,null===o?"":o,null);ya(n,l);const h=l.index;return Yt(l,!1),null!==u&&e!==u&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(ni(ga,ma),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(e))}(u,h),l}function Va(t,e,n,r,i,o,s){const a=s.match(Aa),c=Fa(t,e,n,o,r,a?null:s,!1);a&&Ua(i,s,c.index)}function Ua(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,c=e.split(Aa);let u=0;for(let l=0;l<c.length;l++){const e=c[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),u|=Ba(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=u,t[s]=t.length-a,u}function Ba(t){return 1<<Math.min(t,31)}function qa(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Na.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function Ha(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Fi(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Ba(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const c=i.values;for(let u=0;u<c.length;u++){const o=c[u],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=Qa(t,a,e,n,r,i.cases[u],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function za(t){const e=[],n=[];let r=1,i=0;const o=Ga(t=t.replace(Da,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Ga(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Ga(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Da.test(n)?r.push(za(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function Qa(t,e,n,r,i,o,s,a){const c=[],u=[],l=[];e.cases.push(o),e.create.push(c),e.remove.push(u),e.update.push(l);const h=Kn(It()).getInertBodyElement(s),d=vr(h)||h;return d?Wa(t,e,n,r,c,u,l,d,i,a,0):0}function Wa(t,e,n,r,i,o,s,a,c,u,l){let h=0,d=a.firstChild;for(;d;){const a=Fi(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(ar.hasOwnProperty(p)){Ya(i,la,p,c,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(Aa)?lr.hasOwnProperty(n)&&(cr[n]?Ua(s,e.value,a,e.name,Zn):ur[n]?Ua(s,e.value,a,e.name,tr):Ua(s,e.value,a,e.name)):Ja(i,a,e)}h=Wa(t,e,n,r,i,o,s,d,a,u,l+1)|h,Ka(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(Aa);Ya(i,null,m?"":g,c,a),Ka(o,a,l),m&&(h=Ua(s,g,a)|h);break;case Node.COMMENT_NODE:const y=ja.exec(d.textContent||"");if(y){const e=u[parseInt(y[1],10)];Ya(i,ha,"",c,a),Ha(t,n,r,c,e,a),$a(o,a,l)}}d=d.nextSibling}return h}function Ka(t,e,n){0===n&&t.push(e)}function $a(t,e,n){0===n&&(t.push(~e),t.push(e))}function Ya(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function Ja(t,e,n){t.push(e<<1|1,n.name,n.value)}function Xa(t,e,n){(function(t,e,n=-1){const r=Gt(),i=zt(),o=lt+t,s=Vt(r.consts,e),a=$t();r.firstCreatePass&&function(t,e,n,r,i,o){const s=$t(),a=[],c=[],u=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return qa(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return qa(t.substring(n,r))}}(i,o),h.replace(La," ")).split(Ma);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=Ga(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Va(t,s,u[0],a,c,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Ha(t,n,c,e,r,Fa(t,s,u[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),lt+Number.parseInt(r.substring(e?2:1)));if(e)u.shift(),Yt($t(),!1);else{const e=Sa(t,u[0],n);u.unshift([]),Yt(e,!0)}}}t.data[r]={create:a,update:c}}(r,null===a?0:a.index,i,o,s,n);const c=r.data[o],u=Wr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],c=(s&da.COMMENT)===da.COMMENT,u=(s&da.APPEND_EAGERLY)===da.APPEND_EAGERLY,l=s>>>da.SHIFT;let h=t[l];null===h&&(h=t[l]=c?i.createComment(a):Fr(i,a)),u&&null!==n&&Kr(i,n,h,r,!1)}}(i,c.create,u,a&&8&a.type?i[a.index]:null),oe(!0)})(t,e,n),oe(!1)}function Za(t){return ts(zt(),re(),t)&&(Ea|=1<<Math.min(Oa,31)),Oa++,Za}function tc(t){!function(t,e,n){if(Oa>0){const r=t.data[n];xa(t,e,Array.isArray(r)?r:r.update,ne()-Oa-1,Ea)}Ea=0,Oa=0}(Gt(),zt(),t+lt)}function ec(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ec(t[o],e,n,r,i);else{const o=Gt(),s=zt();let a=Vo(t)?t:p(t.provide),c=Mo(t);const u=Wt(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Vo(t)||!t.multi){const r=new xe(c,i,ss),f=ic(a,e,i?l:l+d,h);-1===f?(ze(Ue(u,s),o,a),nc(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ic(a,e,l+d,h),p=ic(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){ze(Ue(u,s),o,a);const l=function(t,e,n,r,i){const o=new xe(t,n,ss);return o.multi=[],o.index=e,o.componentProviders=0,rc(o,i,r&&!n),o}(i?sc:oc,n.length,i,r,c);!i&&m&&(n[p].providerFactory=l),nc(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),s.push(l)}else nc(o,t,f>-1?f:p,rc(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function nc(t,e,n,r){const i=Vo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function rc(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ic(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oc(t,e,n,r){return ac(this.multi,[])}function sc(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Xe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ac(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ac(i,o);return o}function ac(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function cc(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=yt(t);ec(n,r.data,r.blueprint,i,!0),ec(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class uc{}class lc{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let hc=(()=>{class t{}return t.NULL=new lc,t})();function dc(...t){}function fc(t,e){return new gc(At(t,e))}const pc=function(){return fc(Wt(),zt())};let gc=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=pc,t})();function mc(t){return t instanceof gc?t.nativeElement:t}class yc{}let vc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>bc(),t})();const bc=function(){const t=zt(),e=Nt(Wt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let wc=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class _c{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Cc=new _c("11.2.10");class Sc{constructor(){}supports(t){return Jo(t)}create(t){return new Ec(t)}}const Tc=(t,e)=>e;class Ec{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Tc}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<kc(n,r,i)?e:n,s=kc(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Jo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[$o()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Oc(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new xc),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Oc{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ic{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class xc{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ic,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kc(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Rc{constructor(){}supports(t){return t instanceof Map||Xo(t)}create(){return new Pc}}class Pc{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Xo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ac(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ac{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jc(){return new Dc([new Sc])}let Dc=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||jc()),deps:[[t,new Pn,new Rn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:jc}),t})();function Nc(){return new Mc([new Rc])}let Mc=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Nc()),deps:[[t,new Pn,new Rn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Nc}),t})();function Lc(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Rt(o)),ft(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Lc(e[1],e,n,r)}const s=n.type;if(8&s)Lc(t,e,n.child,r);else if(32&s){const t=Ar(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=oi(e,n);if(Array.isArray(t))r.push(...t);else{const n=jr(e[16]);Lc(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Fc{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Lc(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Hr(t,n),pn(e,n))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}onDestroy(t){Ki(this._lView[1],this._lView,null,t)}markForCheck(){po(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){go(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){te(!0);try{go(t,e,n)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ui(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Vc extends Fc{constructor(t){super(t),this._view=t}detectChanges(){mo(this._view)}checkNoChanges(){!function(t){te(!0);try{mo(t)}finally{te(!1)}}(this._view)}get context(){return null}}const Uc=qc;let Bc=(()=>{class t{}return t.__NG_ELEMENT_ID__=Uc,t.__ChangeDetectorRef__=!0,t})();function qc(t=!1){return function(t,e,n){if(!n&&gt(t)){const n=Nt(t.index,e);return new Fc(n,n)}return 47&t.type?new Fc(e[16],e):null}(Wt(),zt(),t)}const Hc=[new Rc],zc=new Dc([new Sc]),Gc=new Mc(Hc),Qc=function(){return Yc(Wt(),zt())};let Wc=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qc,t})();const Kc=Wc,$c=class extends Kc{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ni(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Vi(e,n,t),new Fc(n)}};function Yc(t,e){return 4&t.type?new $c(e,t,fc(t,e)):null}class Jc{}class Xc{}const Zc=function(){return ou(Wt(),zt())};let tu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zc,t})();const eu=tu,nu=class extends eu{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new en(this._hostTNode,this._hostLView)}get parentInjector(){const t=He(this._hostTNode,this._hostLView);if(De(t)){const e=Me(t,this._hostLView),n=Ne(t);return new en(e[1].data[n+8],e)}return new en(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ru(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Jc,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new nu(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],fn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=si(i,o),a=n[11],c=Jr(a,o[7]);return null!==c&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ui(t,r,n,1,i,o)}(r,o[6],a,n,c,s),t.attachToViewContainerRef(),fn(iu(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ru(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Hr(this._lContainer,e);n&&(pn(iu(this._lContainer),e),zr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Hr(this._lContainer,e);return n&&null!=pn(iu(this._lContainer),e)?new Fc(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ru(t){return t[8]}function iu(t){return t[8]||(t[8]=[])}function ou(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=Rt(r);else{const n=e[11];i=n.createComment("");const r=At(t,e);Kr(n,Jr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=co(r,e,i,t),fo(e,n)}return new nu(n,t,e)}const su={};class au extends hc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new lu(e,this.ngModule)}}function cu(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const uu=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xr});class lu extends uc{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ti).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return cu(this.componentDef.inputs)}get outputs(){return cu(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,su,i);return o!==su||r===su?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(yc,kt),s=i.get(wc,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Br(o.createRenderer(null,this.componentDef),c,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:xr,clean:vo,playerHandler:null,flags:0},d=Wi(0,null,null,1,0,null,null,null,null,null),f=Ni(null,d,h,l,null,null,o,a,s,i);let p,g;de(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Mi(s,20,2,"#host",null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(To(a,c,!0),null!==t&&(ke(i,t,c),null!==a.classes&&di(i,t,a.classes),null!==a.styles&&hi(i,t,a.styles)));const u=r.createRenderer(t,e),l=Ni(n,Qi(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(ze(Ue(a,n),s,e.type),to(s,a),no(a,n.length,1)),fo(n,l),n[20]=l}(u,this.componentDef,f,o,a);if(u)if(n)ke(a,u,["ng-version",Cc.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!bi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ke(a,u,t),e&&e.length>0&&di(a,u,e.join(" "))}if(g=jt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ro(t,r,e,Fi(t,e,1,null),n));const i=Xe(e,t,r.directiveStart,r);Ir(i,e);const o=At(r,e);return o&&Ir(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(be(a.index),Xi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Zi(e,s)),s}(t,this.componentDef,f,h,[qo]),Vi(d,f,null)}finally{ye()}return new hu(this.componentType,p,fc(g,f),f,g)}}class hu extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Vc(r),this.componentType=t}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const du=new Map;class fu extends Jc{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new au(this);const n=ut(t),r=t[$]||null;r&&pa(r),this._bootstrapComponents=kr(n.bootstrap),this._r3Injector=jo(t,e,[{provide:Jc,useValue:this},{provide:hc,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Bo.THROW_IF_NOT_FOUND,n=R.Default){return t===Bo||t===Jc||t===Eo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class pu extends Xc{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,du.get(i),n),du.set(i,n));const o=kr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new fu(this.moduleType,t)}}function gu(t,e,n,r){return bu(zt(),ee(),t,e,n,r)}function mu(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return es(t,a,i,o)?Zo(t,a+2,s?r.call(s,i,o):r(i,o)):vu(t,a+2)}(zt(),ee(),t,e,n,r,i)}function yu(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const c=e+n;return function(t,e,n,r,i){const o=es(t,e,n,r);return ts(t,e+2,i)||o}(t,c,i,o,s)?Zo(t,c+3,a?r.call(a,i,o,s):r(i,o,s)):vu(t,c+3)}(zt(),ee(),t,e,n,r,i,o)}function vu(t,e){const n=t[e];return n===Ei?void 0:n}function bu(t,e,n,r,i,o){const s=e+n;return ts(t,s,i)?Zo(t,s+1,o?r.call(o,i):r(i)):vu(t,s+1)}function wu(t,e){const n=Gt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=vt(r.type)),s=A(ss);try{const t=Fe(!1),e=o();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,zt(),i,e),e}finally{A(s)}}function _u(t,e,n){const r=t+lt,i=zt(),o=Dt(i,r);return function(t,e){return Yo.isWrapped(e)&&(e=Yo.unwrap(e),t[ne()]=Ei),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?bu(i,ee(),e,o.transform,n,o):o.transform(n))}function Cu(t){return e=>{setTimeout(t,void 0,e)}}const Su=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,c=e||(()=>null),u=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),c=null===(o=e.error)||void 0===o?void 0:o.bind(e),u=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(c=Cu(c),a&&(a=Cu(a)),u&&(u=Cu(u)));const l=super.subscribe({next:a,error:c,complete:u});return t instanceof i.a&&t.add(l),l}};function Tu(){return this._results[$o()]()}class Eu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=$o(),n=Eu.prototype;n[e]||(n[e]=Tu)}get changes(){return this._changes||(this._changes=new Su)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=hn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ou{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ou(this.queryList)}setDirty(){this.queryList.setDirty()}}class Iu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Iu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Bu(t,e).matches&&this.queries[e].setDirty()}}class xu{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ku{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ku(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ru{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ru(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Pu(e,i)),this.matchTNodeWithReadOption(t,e,Je(e,t,i,!1,!1))}else n===Wc?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Je(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===gc||r===tu||r===Wc&&4&e.type)this.addMatch(e.index,-2);else{const n=Je(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Pu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Au(t,e,n,r){return-1===n?function(t,e){return 11&t.type?fc(t,e):4&t.type?Yc(t,e):null}(e,t):-2===n?function(t,e,n){return n===gc?fc(e,t):n===Wc?Yc(e,t):n===tu?ou(e,t):void 0}(t,e,r):Xe(t,t[1],n,e)}function ju(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Au(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Du(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=ju(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&Du(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Du(n[1],n,i,r)}}}}}return r}function Nu(t){const e=zt(),n=Gt(),r=ce();ue(r+1);const i=Bu(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Du(n,e,r,[]):ju(n,e,i,r);t.reset(o,mc),t.notifyOnChanges()}return!0}return!1}function Mu(t,e,n){const r=Gt();r.firstCreatePass&&(Uu(r,new xu(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Vu(r,zt(),e)}function Lu(t,e,n,r){const i=Gt();if(i.firstCreatePass){const o=Wt();Uu(i,new xu(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Vu(i,zt(),n)}function Fu(){return t=zt(),e=ce(),t[19].queries[e].queryList;var t,e}function Vu(t,e,n){const r=new Eu(4==(4&n));Ki(t,e,r,r.destroy),null===e[19]&&(e[19]=new Iu),e[19].queries.push(new Ou(r))}function Uu(t,e,n){null===t.queries&&(t.queries=new ku),t.queries.track(new Ru(e,n))}function Bu(t,e){return t.queries.getByIndex(e)}function qu(t,e){return Yc(t,e)}function Hu(t=R.Default){const e=qc(!0);if(null!=e||t&R.Optional)return e;b("ChangeDetectorRef")}const zu=new cn("Application Initializer");let Gu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=dc,this.reject=dc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();gs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(On(zu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Qu=new cn("AppId"),Wu={provide:Qu,useFactory:function(){return`${Ku()}${Ku()}${Ku()}`},deps:[]};function Ku(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $u=new cn("Platform Initializer"),Yu=new cn("Platform ID"),Ju=new cn("appBootstrapListener");let Xu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Zu=new cn("LocaleId"),tl=new cn("DefaultCurrencyCode");class el{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const nl=function(t){return new pu(t)},rl=nl,il=function(t){return Promise.resolve(nl(t))},ol=function(t){const e=nl(t),n=kr(ut(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new lu(n)),t},[]);return new el(e,n)},sl=ol,al=function(t){return Promise.resolve(ol(t))};let cl=(()=>{class t{constructor(){this.compileModuleSync=rl,this.compileModuleAsync=il,this.compileModuleAndAllComponentsSync=sl,this.compileModuleAndAllComponentsAsync=al}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ul=(()=>Promise.resolve(0))();function ll(t){"undefined"==typeof Zone?ul.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class hl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Su(!1),this.onMicrotaskEmpty=new Su(!1),this.onStable=new Su(!1),this.onError=new Su(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pl(t),fl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return gl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ml(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return gl(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),ml(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,pl(t),fl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,dl,dc,dc);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const dl={};function fl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function gl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ml(t){t._nesting--,fl(t)}class yl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Su,this.onMicrotaskEmpty=new Su,this.onStable=new Su,this.onError=new Su}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let vl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hl.assertNotInAngularZone(),ll(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ll(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(On(hl))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),bl=(()=>{class t{constructor(){this._applications=new Map,Sl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Sl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class wl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function _l(t){Sl=t}let Cl,Sl=new wl,Tl=!0,El=!1;function Ol(){return El=!0,Tl}function Il(){if(El)throw new Error("Cannot enable prod mode after platform setup.");Tl=!1}const xl=new cn("AllowMultipleToken");class kl{constructor(t,e){this.name=t,this.token=e}}function Rl(t,e,n=[]){const r=`Platform: ${e}`,i=new cn(r);return(e=[])=>{let o=Pl();if(!o||o.injector.get(xl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Io,useValue:"platform"});!function(t){if(Cl&&!Cl.destroyed&&!Cl.injector.get(xl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Cl=t.get(Al);const e=t.get($u,null);e&&e.forEach(t=>t())}(Bo.create({providers:t,name:r}))}return function(t){const e=Pl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pl(){return Cl&&!Cl.destroyed?Cl:null}let Al=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new yl:("zone.js"===t?void 0:t)||new hl({enableLongStackTrace:Ol(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:hl,useValue:n}];return n.run(()=>{const e=Bo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Tr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Nl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return gs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Gu);return t.runInitializers(),t.donePromise.then(()=>(pa(i.injector.get(Zu,ua)||ua),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=jl({},e);return function(t,e,n){const r=new pu(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Dl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(On(Bo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function jl(t,e){return Array.isArray(e)?e.reduce(jl,t):Object.assign(Object.assign({},t),e)}let Dl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),u=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{hl.assertNotInAngularZone(),ll(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{hl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,u.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof uc?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Jc),i=n.create(Bo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(vl,null),a=s&&i.injector.get(bl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Nl(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Nl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ju,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(On(hl),On(Bo),On(Tr),On(hc),On(Gu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Nl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ml{}class Ll{}const Fl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Fl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ul(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ul(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(On(cl),On(Ll,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ul(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Bl=function(t){return null},ql=Rl(null,"core",[{provide:Yu,useValue:"unknown"},{provide:Al,deps:[Bo]},{provide:bl,deps:[]},{provide:Xu,deps:[]}]),Hl=[{provide:Dl,useClass:Dl,deps:[hl,Bo,Tr,hc,Gu]},{provide:uu,deps:[hl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Gu,useClass:Gu,deps:[[new Rn,zu]]},{provide:cl,useClass:cl,deps:[]},Wu,{provide:Dc,useFactory:function(){return zc},deps:[]},{provide:Mc,useFactory:function(){return Gc},deps:[]},{provide:Zu,useFactory:function(t){return pa(t=t||"undefined"!=typeof $localize&&$localize.locale||ua),t},deps:[[new kn(Zu),new Rn,new Pn]]},{provide:tl,useValue:"USD"}];let zl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(On(Dl))},t.\u0275mod=rt({type:t}),t.\u0275inj=C({providers:Hl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},oLy0:function(t,e,n){parcelRequire=function(e,r,i,o){var s,a="function"==typeof parcelRequire&&parcelRequire;function c(t,i){if(!r[t]){if(!e[t]){var o="function"==typeof parcelRequire&&parcelRequire;if(!i&&o)return o(t,!0);if(a)return a(t,!0);if("string"==typeof t)return n("XhEF")(t);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}l.resolve=function(n){return e[t][1][n]||n},l.cache={};var u=r[t]=new c.Module(t);e[t][0].call(u.exports,l,u,u.exports,this)}return r[t].exports;function l(t){return c(l.resolve(t))}}c.isParcelRequire=!0,c.Module=function(t){this.id=t,this.bundle=c,this.exports={}},c.modules=e,c.cache=r,c.parent=a,c.register=function(t,n){e[t]=[function(t,e){e.exports=n},{}]};for(var u=0;u<i.length;u++)try{c(i[u])}catch(e){s||(s=e)}if(i.length){var l=c(i[i.length-1]);t.exports=l}if(parcelRequire=c,s)throw s;return c}({EgBh:[function(t,e,n){var r={};r.useBlobBuilder=function(){try{return new Blob([]),!1}catch(r){return!0}}(),r.useArrayBufferView=!r.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(r){return!0}}(),e.exports.binaryFeatures=r;var i=e.exports.BlobBuilder;function o(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(i=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),o.prototype.append=function(t){"number"==typeof t?this._pieces.push(t):(this.flush(),this._parts.push(t))},o.prototype.flush=function(){if(this._pieces.length>0){var t=new Uint8Array(this._pieces);r.useArrayBufferView||(t=t.buffer),this._parts.push(t),this._pieces=[]}},o.prototype.getBuffer=function(){if(this.flush(),r.useBlobBuilder){for(var t=new i,e=0,n=this._parts.length;e<n;e++)t.append(this._parts[e]);return t.getBlob()}return new Blob(this._parts)},e.exports.BufferBuilder=o},{}],kdPp:[function(t,e,n){var r=t("./bufferbuilder").BufferBuilder,i=t("./bufferbuilder").binaryFeatures;function o(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function s(){this.bufferBuilder=new r}function a(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}e.exports={unpack:function(t){return new o(t).unpack()},pack:function(t){var e=new s;return e.pack(t),e.getBuffer()}},o.prototype.unpack=function(){var t,e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},o.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},o.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},o.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},o.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},o.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256},o.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536},o.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},o.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},o.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},o.prototype.unpack_string=function(t){for(var e,n,r=this.read(t),i=0,o="";i<t;)(e=r[i])<128?(o+=String.fromCharCode(e),i++):(192^e)<32?(n=(192^e)<<6|63&r[i+1],o+=String.fromCharCode(n),i+=2):(n=(15&e)<<12|(63&r[i+1])<<6|63&r[i+2],o+=String.fromCharCode(n),i+=3);return this.index+=t,o},o.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e},o.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e},o.prototype.unpack_float=function(){var t=this.unpack_uint32();return(0==t>>31?1:-1)*(8388607&t|8388608)*Math.pow(2,(t>>23&255)-127-23)},o.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=(t>>20&2047)-1023;return(0==t>>31?1:-1)*((1048575&t|1048576)*Math.pow(2,n-20)+e*Math.pow(2,n-52))},o.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},s.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},s.prototype.pack=function(t){var e=typeof t;if("string"===e)this.pack_string(t);else if("number"===e)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"===e)!0===t?this.bufferBuilder.append(195):!1===t&&this.bufferBuilder.append(194);else if("undefined"===e)this.bufferBuilder.append(192);else{if("object"!==e)throw new Error('Type "'+e+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)this.pack_bin(i.useArrayBufferView?new Uint8Array(t):t);else if("BYTES_PER_ELEMENT"in t)this.pack_bin(i.useArrayBufferView?new Uint8Array(t.buffer):t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},s.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},s.prototype.pack_string=function(t){var e=function(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,a).length}(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},s.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var n=0;n<e;n++)this.pack(t[n])},s.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(255&t);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&t<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&t<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},s.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),s=e<<31|n+1023<<20|i/o&1048575,a=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},s.prototype.pack_object=function(t){var e=Object.keys(t).length;if(e<=15)this.pack_uint8(128+e);else if(e<=65535)this.bufferBuilder.append(222),this.pack_uint16(e);else{if(!(e<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(e)}for(var n in t)t.hasOwnProperty(n)&&(this.pack(n),this.pack(t[n]))},s.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},s.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},s.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},s.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},{"./bufferbuilder":"EgBh"}],iSxC:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.extractVersion=s,n.wrapPeerConnectionEvent=function(t,e,n){if(t.RTCPeerConnection){var r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(t,r){if(t!==e)return i.apply(this,arguments);var o=function(t){var e=n(t);e&&(r.handleEvent?r.handleEvent(e):r(e))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(r,o),i.apply(this,[t,o])};var o=r.removeEventListener;r.removeEventListener=function(t,n){if(t!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(n))return o.apply(this,arguments);var r=this._eventMap[e].get(n);return this._eventMap[e].delete(n),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[t,r])},Object.defineProperty(r,"on"+e,{get:function(){return this["_on"+e]},set:function(t){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),t&&this.addEventListener(e,this["_on"+e]=t)},enumerable:!0,configurable:!0})}},n.disableLog=function(t){return"boolean"!=typeof t?new Error("Argument type: "+r(t)+". Please use a boolean."):(i=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(t){return"boolean"!=typeof t?new Error("Argument type: "+r(t)+". Please use a boolean."):(o=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(t,e){o&&console.warn(t+" is deprecated, please use "+e+" instead.")},n.detectBrowser=function(t){var e={browser:null,version:null};if(void 0===t||!t.navigator)return e.browser="Not a browser.",e;var{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=s(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===t.isSecureContext&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=s(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=s(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=s(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype}return e},n.compactObject=function t(e){return a(e)?Object.keys(e).reduce(function(n,r){var i=a(e[r]),o=i?t(e[r]):e[r],s=i&&!Object.keys(o).length;return void 0===o||s?n:Object.assign(n,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},r,o))},{}):e},n.walkStats=c,n.filterStats=function(t,e,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===e)return i;var o=[];return t.forEach(function(t){"track"===t.type&&t.trackIdentifier===e.id&&o.push(t)}),o.forEach(function(e){t.forEach(function(n){n.type===r&&n.trackId===e.id&&c(t,n,i)})}),i};var i=!0,o=!0;function s(t,e,n){var r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function a(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t,e,n){e&&!n.has(e.id)&&(n.set(e.id,e),Object.keys(e).forEach(function(r){r.endsWith("Id")?c(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(function(e){c(t,t.get(e),n)})}))}},{}],s6SN:[function(t,e,n){"use strict";function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(t,e){var n=t&&t.navigator;if(n.mediaDevices){var r=function(t){if("object"!==i(t)||t.mandatory||t.optional)return t;var e={};return Object.keys(t).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i(t[n])?t[n]:{ideal:t[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==r.ideal){e.optional=e.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",n)]=r.ideal,e.optional.push(s),(s={})[o("max",n)]=r.ideal,e.optional.push(s)):(s[o("",n)]=r.ideal,e.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(e.mandatory=e.mandatory||{},e.mandatory[o("",n)]=r.exact):["min","max"].forEach(function(t){void 0!==r[t]&&(e.mandatory=e.mandatory||{},e.mandatory[o(t,n)]=r[t])})}}),t.advanced&&(e.optional=(e.optional||[]).concat(t.advanced)),e},s=function(t,s){if(e.version>=61)return s(t);if((t=JSON.parse(JSON.stringify(t)))&&"object"===i(t.audio)){var a=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])};a((t=JSON.parse(JSON.stringify(t))).audio,"autoGainControl","googAutoGainControl"),a(t.audio,"noiseSuppression","googNoiseSuppression"),t.audio=r(t.audio)}if(t&&"object"===i(t.video)){var c=t.video.facingMode;c=c&&("object"===i(c)?c:{ideal:c});var u,l=e.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)&&(delete t.video.facingMode,"environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u))return n.mediaDevices.enumerateDevices().then(function(e){var n=(e=e.filter(function(t){return"videoinput"===t.kind})).find(function(t){return u.some(function(e){return t.label.toLowerCase().includes(e)})});return!n&&e.length&&u.includes("back")&&(n=e[e.length-1]),n&&(t.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),t.video=r(t.video),o("chrome: "+JSON.stringify(t)),s(t)});t.video=r(t.video)}return o("chrome: "+JSON.stringify(t)),s(t)},a=function(t){return e.version>=64?t:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[t.name]||t.name,message:t.message,constraint:t.constraint||t.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=(function(t,e,r){s(t,function(t){n.webkitGetUserMedia(t,e,function(t){r&&r(a(t))})})}).bind(n),n.mediaDevices.getUserMedia){var c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return s(t,function(t){return c(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return e},function(t){return Promise.reject(a(t))})})}}}};var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(t("../utils.js")).log},{"../utils.js":"iSxC"}],VHa8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&("function"==typeof e?t.navigator.mediaDevices.getDisplayMedia=function(n){return e(n).then(function(e){var r=n.video&&n.video.width,i=n.video&&n.video.height;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:n.video&&n.video.frameRate||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),t.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],uI5X:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimMediaStream=function(t){t.MediaStream=t.MediaStream||t.webkitMediaStream},n.shimOnTrack=function(t){if("object"!==c(t)||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)r.wrapPeerConnectionEvent(t,"track",function(t){return t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(r){var i;i=t.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(t){return t.track&&t.track.id===r.track.id}):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[e.stream],n.dispatchEvent(o)}),e.stream.getTracks().forEach(function(r){var i;i=t.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(t){return t.track&&t.track.id===r.id}):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[e.stream],n.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}},n.shimGetSendersWithDtmf=function(t){if("object"===c(t)&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){var e=function(t,e){return{track:e,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===e.kind?t.createDTMFSender(e):null),this._dtmf},_pc:t}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,r){var i=n.apply(this,arguments);return i||(i=e(this,t),this._senders.push(i)),i};var r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){r.apply(this,arguments);var e=this._senders.indexOf(t);-1!==e&&this._senders.splice(e,1)}}var i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._senders=this._senders||[],i.apply(this,[t]),t.getTracks().forEach(function(t){n._senders.push(e(n,t))})};var o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;this._senders=this._senders||[],o.apply(this,[t]),t.getTracks().forEach(function(t){var n=e._senders.find(function(e){return e.track===t});n&&e._senders.splice(e._senders.indexOf(n),1)})}}else if("object"===c(t)&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){var s=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=s.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},n.shimGetStats=function(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var t=this,[n,r,i]=arguments;if(arguments.length>0&&"function"==typeof n)return e.apply(this,arguments);if(0===e.length&&(0===arguments.length||"function"!=typeof n))return e.apply(this,[]);var o=function(t){var e={};return t.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),e[n.id]=n}),e},s=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))};return arguments.length>=2?e.apply(this,[function(t){r(s(o(t)))},n]):new Promise(function(n,r){e.apply(t,[function(t){n(s(o(t)))},r])}).then(r,i)}}},n.shimSenderReceiverGetStats=function(t){if("object"===c(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver){if(!("getStats"in t.RTCRtpSender.prototype)){var e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){var t=this,n=e.apply(this,[]);return n.forEach(function(e){return e._pc=t}),n});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return r.filterStats(e,t.track,!0)})}}if(!("getStats"in t.RTCRtpReceiver.prototype)){var i=t.RTCPeerConnection.prototype.getReceivers;i&&(t.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=i.apply(this,[]);return e.forEach(function(e){return e._pc=t}),e}),r.wrapPeerConnectionEvent(t,"track",function(t){return t.receiver._pc=t.srcElement,t}),t.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return r.filterStats(e,t.track,!1)})}}if("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype){var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){var e,n,r,i=arguments[0];return this.getSenders().forEach(function(t){t.track===i&&(e?r=!0:e=t)}),this.getReceivers().forEach(function(t){return t.track===i&&(n?r=!0:n=t),t.track===i}),r||e&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=u,n.shimAddTrackRemoveTrack=function(t,e){if(t.RTCPeerConnection){if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return u(t);var n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})};var r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[e.id]){var i=new t.MediaStream(e.getTracks());this._streams[e.id]=i,this._reverseStreams[i.id]=e,e=i}r.apply(this,[e])};var i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[t.id]||t]),delete this._reverseStreams[this._streams[t.id]?this._streams[t.id].id:t.id],delete this._streams[t.id]},t.RTCPeerConnection.prototype.addTrack=function(e,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(t){return t===e}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(e),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var s=new t.MediaStream([e]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find(function(t){return t.track===e})},["createOffer","createAnswer"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e],r=a({},e,function(){var t=this,e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=c(t,n);e[0].apply(null,[r])},function(t){e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(function(e){return c(t,e)})});t.RTCPeerConnection.prototype[e]=r[e]});var o=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(t=this,n=(e=arguments[0]).sdp,Object.keys(t._reverseStreams||[]).forEach(function(e){var r=t._reverseStreams[e],i=t._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:e.type,sdp:n})),o.apply(this,arguments)):o.apply(this,arguments);var t,e,n};var s=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var t=s.get.apply(this);return""===t.type?t:c(this,t)}}),t.RTCPeerConnection.prototype.removeTrack=function(t){var e,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(t._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(function(r){n._streams[r].getTracks().find(function(e){return t.track===e})&&(e=n._streams[r])}),e&&(1===e.getTracks().length?this.removeStream(this._reverseStreams[e.id]):e.removeTrack(t.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(t,e){var n=e.sdp;return Object.keys(t._reverseStreams||[]).forEach(function(e){var r=t._reverseStreams[e];n=n.replace(new RegExp(t._streams[r.id].id,"g"),r.id)}),new RTCSessionDescription({type:e.type,sdp:n})}},n.shimPeerConnection=function(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e],r=a({},e,function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});t.RTCPeerConnection.prototype[e]=r[e]})},n.fixNegotiationNeeded=function(t,e){r.wrapPeerConnectionEvent(t,"negotiationneeded",function(t){var n=t.target;if(!(e.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return t})},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}});var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("../utils.js")),i=t("./getusermedia"),o=t("./getdisplaymedia");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,n){if(!n)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=e.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var e=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},t.getTracks().forEach(function(t){if(e.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")});var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter(function(t){return-1===r.indexOf(t)});this._shimmedLocalStreams[t.id]=[t].concat(i)};var r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[t.id],r.apply(this,arguments)};var i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},t&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var r=e._shimmedLocalStreams[n].indexOf(t);-1!==r&&e._shimmedLocalStreams[n].splice(r,1),1===e._shimmedLocalStreams[n].length&&delete e._shimmedLocalStreams[n]}),i.apply(this,arguments)}}},{"../utils.js":"iSxC","./getusermedia":"s6SN","./getdisplaymedia":"VHa8"}],NZ1C:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(t,e){var n=!1;return(t=JSON.parse(JSON.stringify(t))).filter(function(t){if(t&&(t.urls||t.url)){var e=t.urls||t.url;t.url&&!t.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"==typeof e;return i&&(e=[e]),e=e.filter(function(t){if(0===t.indexOf("stun:"))return!1;var e=t.startsWith("turn")&&!t.startsWith("turn:[")&&t.includes("transport=udp");return e&&!n?(n=!0,!0):e&&!n}),delete t.url,t.urls=i?e[0]:e,!!e.length}})};var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(t("../utils"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}},{"../utils":"iSxC"}],YHvh:[function(t,e,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},r.splitSections=function(t){return t.split("\nm=").map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},r.getDescription=function(t){var e=r.splitSections(t);return e&&e[0]},r.getMediaSections=function(t){var e=r.splitSections(t);return e.shift(),e},r.matchPrefix=function(t,e){return r.splitLines(t).filter(function(t){return 0===t.indexOf(e)})},r.parseCandidate=function(t){for(var e,n={foundation:(e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},r=8;r<e.length;r+=2)switch(e[r]){case"raddr":n.relatedAddress=e[r+1];break;case"rport":n.relatedPort=parseInt(e[r+1],10);break;case"tcptype":n.tcpType=e[r+1];break;case"ufrag":n.ufrag=e[r+1],n.usernameFragment=e[r+1];break;default:n[e[r]]=e[r+1]}return n},r.writeCandidate=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.address||t.ip),e.push(t.port);var n=t.type;return e.push("typ"),e.push(n),"host"!==n&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")},r.parseIceOptions=function(t){return t.substr(14).split(" ")},r.parseRtpMap=function(t){var e=t.substr(9).split(" "),n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.channels=3===e.length?parseInt(e[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(t){var e=t.payloadType;void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType);var n=t.channels||t.numChannels||1;return"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},r.parseFmtp=function(t){for(var e,n={},r=t.substr(t.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(e=r[i].trim().split("="))[0].trim()]=e[1];return n},r.writeFmtp=function(t){var e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var r=[];Object.keys(t.parameters).forEach(function(e){r.push(t.parameters[e]?e+"="+t.parameters[e]:e)}),e+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return e},r.parseRtcpFb=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(t){var e="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(t){e+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"}),e},r.parseSsrcMedia=function(t){var e=t.indexOf(" "),n={ssrc:parseInt(t.substr(7,e-7),10)},r=t.indexOf(":",e);return r>-1?(n.attribute=t.substr(e+1,r-e-1),n.value=t.substr(r+1)):n.attribute=t.substr(e+1),n},r.parseSsrcGroup=function(t){var e=t.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(t){return parseInt(t,10)})}},r.getMid=function(t){var e=r.matchPrefix(t,"a=mid:")[0];if(e)return e.substr(6)},r.parseFingerprint=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(t,e){return{role:"auto",fingerprints:r.matchPrefix(t+e,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(t,e){var n="a=setup:"+e+"\r\n";return t.fingerprints.forEach(function(t){n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),n},r.parseCryptoLine=function(t){var e=t.substr(9).split(" ");return{tag:parseInt(e[0],10),cryptoSuite:e[1],keyParams:e[2],sessionParams:e.slice(3)}},r.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+("object"==typeof t.keyParams?r.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(t){if(0!==t.indexOf("inline:"))return null;var e=t.substr(7).split("|");return{keyMethod:"inline",keySalt:e[0],lifeTime:e[1],mkiValue:e[2]?e[2].split(":")[0]:void 0,mkiLength:e[2]?e[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},r.getCryptoParameters=function(t,e){return r.matchPrefix(t+e,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(t,e){var n=r.matchPrefix(t+e,"a=ice-ufrag:")[0],i=r.matchPrefix(t+e,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},r.parseRtpParameters=function(t){for(var e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(t)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(t,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),e.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(t,"a=extmap:").forEach(function(t){e.headerExtensions.push(r.parseExtmap(t))}),e},r.writeRtpDescription=function(t,e){var n="";n+="m="+t+" ",n+=e.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=e.codecs.map(function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach(function(t){n+=r.writeRtpMap(t),n+=r.writeFmtp(t),n+=r.writeRtcpFb(t)});var i=0;return e.codecs.forEach(function(t){t.maxptime>i&&(i=t.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",e.headerExtensions&&e.headerExtensions.forEach(function(t){n+=r.writeExtmap(t)}),n},r.parseRtpEncodingParameters=function(t){var e,n=[],i=r.parseRtpParameters(t),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(t,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute}),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(t,"a=ssrc-group:FID").map(function(t){return t.substr(17).split(" ").map(function(t){return parseInt(t,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(e=u[0][1]),i.codecs.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(t.parameters.apt,10)};c&&e&&(r.rtx={ssrc:e}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(t,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(t){t.maxBitrate=l})),n},r.parseRtcpParameters=function(t){var e={},n=r.matchPrefix(t,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute})[0];n&&(e.cname=n.value,e.ssrc=n.ssrc);var i=r.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=i.length>0,e.compound=0===i.length;var o=r.matchPrefix(t,"a=rtcp-mux");return e.mux=o.length>0,e},r.parseMsid=function(t){var e,n=r.matchPrefix(t,"a=msid:");if(1===n.length)return{stream:(e=n[0].substr(7).split(" "))[0],track:e[1]};var i=r.matchPrefix(t,"a=ssrc:").map(function(t){return r.parseSsrcMedia(t)}).filter(function(t){return"msid"===t.attribute});return i.length>0?{stream:(e=i[0].value.split(" "))[0],track:e[1]}:void 0},r.parseSctpDescription=function(t){var e,n=r.parseMLine(t),i=r.matchPrefix(t,"a=max-message-size:");i.length>0&&(e=parseInt(i[0].substr(19),10)),isNaN(e)&&(e=65536);var o=r.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:e};if(r.matchPrefix(t,"a=sctpmap:").length>0){var s=r.matchPrefix(t,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:e}}},r.writeSctpDescription=function(t,e){var n=[];return n="DTLS/SCTP"!==t.protocol?["m="+t.kind+" 9 "+t.protocol+" "+e.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+e.port+"\r\n"]:["m="+t.kind+" 9 "+t.protocol+" "+e.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+e.port+" "+e.protocol+" 65535\r\n"],void 0!==e.maxMessageSize&&n.push("a=max-message-size:"+e.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(t,e,n){var i=void 0!==e?e:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(t||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(t,e,n,i){var o=r.writeRtpDescription(t.kind,e);if(o+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+t.mid+"\r\n",o+=t.direction?"a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?"a=sendrecv\r\n":t.rtpSender?"a=sendonly\r\n":t.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",t.rtpSender){var s="msid:"+i.id+" "+t.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+s,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(t,e){for(var n=r.splitLines(t),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return e?r.getDirection(e):"sendrecv"},r.getKind=function(t){return r.splitLines(t)[0].split(" ")[0].substr(2)},r.isRejected=function(t){return"0"===t.split(" ",2)[1]},r.parseMLine=function(t){var e=r.splitLines(t)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},r.parseOLine=function(t){var e=r.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},r.isValidSDP=function(t){if("string"!=typeof t||0===t.length)return!1;for(var e=r.splitLines(t),n=0;n<e.length;n++)if(e[n].length<2||"="!==e[n].charAt(1))return!1;return!0},"object"==typeof e&&(e.exports=r)},{}],NJ2u:[function(t,e,n){"use strict";var r=t("sdp");function i(t,e,n,i,o){var s=r.writeRtpDescription(t.kind,e);if(s+=r.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+t.mid+"\r\n",s+=t.rtpSender&&t.rtpReceiver?"a=sendrecv\r\n":t.rtpSender?"a=sendonly\r\n":t.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",t.rtpSender){var a=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(t,e){t=parseInt(t,10);for(var n=0;n<e.length;n++)if(e[n].payloadType===t||e[n].preferredPayloadType===t)return e[n]},i=function(t,e,n,i){var o=r(t.parameters.apt,n),s=r(e.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return t.codecs.forEach(function(r){for(var o=0;o<e.codecs.length;o++){var s=e.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,t.codecs,e.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(t){for(var e=0;e<r.rtcpFeedback.length;e++)if(r.rtcpFeedback[e].type===t.type&&r.rtcpFeedback[e].parameter===t.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(t){for(var r=0;r<e.headerExtensions.length;r++){var i=e.headerExtensions[r];if(t.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function s(t,e,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)}function a(t,e){var n=t.getRemoteCandidates().find(function(t){return e.foundation===t.foundation&&e.ip===t.ip&&e.port===t.port&&e.priority===t.priority&&e.protocol===t.protocol&&e.type===t.type});return n||t.addRemoteCandidate(e),!n}function c(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}e.exports=function(t,e){function n(e,n){n.addTrack(e),n.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:e}))}function u(e,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,t.setTimeout(function(){e._dispatchEvent("track",o)})}var l=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){i[t]=o[t].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(t,e){var n=!1;return(t=JSON.parse(JSON.stringify(t))).filter(function(t){if(t&&(t.urls||t.url)){var r=t.urls||t.url;t.url&&!t.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(t){return 0!==t.indexOf("turn:")||-1===t.indexOf("transport=udp")||-1!==t.indexOf("turn:[")||n?0===t.indexOf("stun:")&&e>=14393&&-1===t.indexOf("?transport=udp"):(n=!0,!0)}),delete t.url,t.urls=i?r[0]:r,!!r.length}})}(n.iceServers||[],e),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(t,e){this._isClosed||(this.dispatchEvent(e),"function"==typeof this["on"+t]&&this["on"+t](e))},l.prototype._emitGatheringStateChange=function(){var t=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",t)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(t,e){var n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:t,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();n.iceTransport=r.iceTransport,n.dtlsTransport=r.dtlsTransport}return e||this.transceivers.push(n),n},l.prototype.addTrack=function(e,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(t){return t.track===e}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==e.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=e,r.stream=n,r.rtpSender=new t.RTCRtpSender(e,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(t){var n=this;if(e>=15025)t.getTracks().forEach(function(e){n.addTrack(e,t)});else{var r=t.clone();t.getTracks().forEach(function(t,e){var n=r.getTracks()[e];t.addEventListener("enabled",function(t){n.enabled=t.enabled})}),r.getTracks().forEach(function(t){n.addTrack(t,r)})}},l.prototype.removeTrack=function(e){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(t){return t.rtpSender===e});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(t){return t.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(t){var e=this;t.getTracks().forEach(function(t){var n=e.getSenders().find(function(e){return e.track===t});n&&e.removeTrack(n)})},l.prototype.getSenders=function(){return this.transceivers.filter(function(t){return!!t.rtpSender}).map(function(t){return t.rtpSender})},l.prototype.getReceivers=function(){return this.transceivers.filter(function(t){return!!t.rtpReceiver}).map(function(t){return t.rtpReceiver})},l.prototype._createIceGatherer=function(e,n){var r=this;if(n&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var n=!t.candidate||0===Object.keys(t.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[e].bufferedCandidateEvents&&r.transceivers[e].bufferedCandidateEvents.push(t)},i.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),i},l.prototype._gather=function(e,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(t){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:n};var a=t.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(i._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+l.join("");var h=i.transceivers.every(function(t){return t.iceGatherer&&"completed"===t.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),h&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},t.setTimeout(function(){s.forEach(function(t){o.onlocalcandidate(t)})},0)}},l.prototype._createIceAndDtlsTransports=function(){var e=this,n=new t.RTCIceTransport(null);n.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new t.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(t){var e=this.transceivers[t].iceGatherer;e&&(delete e.onlocalcandidate,delete this.transceivers[t].iceGatherer);var n=this.transceivers[t].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[t].iceTransport);var r=this.transceivers[t].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[t].dtlsTransport)},l.prototype._transceive=function(t,n,i){var s=o(t.localCapabilities,t.remoteCapabilities);n&&t.rtpSender&&(s.encodings=t.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(s.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(s)),i&&t.rtpReceiver&&s.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&e<15019&&t.recvEncodingParameters.forEach(function(t){delete t.rtx}),s.encodings=t.recvEncodingParameters.length?t.recvEncodingParameters:[{}],s.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(s.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(s.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(t){var e,n,i=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(c("TypeError",'Unsupported type "'+t.type+'"'));if(!s("setLocalDescription",t.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+t.type+" in state "+i.signalingState));if("offer"===t.type)e=r.splitSections(t.sdp),n=e.shift(),e.forEach(function(t,e){var n=r.parseRtpParameters(t);i.transceivers[e].localCapabilities=n}),i.transceivers.forEach(function(t,e){i._gather(t.mid,e)});else if("answer"===t.type){e=r.splitSections(i._remoteDescription.sdp),n=e.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;e.forEach(function(t,e){var s=i.transceivers[e],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,h=s.localCapabilities,d=s.remoteCapabilities;if(!(r.isRejected(t)&&0===r.matchPrefix(t,"a=bundle-only").length||s.rejected)){var f=r.getIceParameters(t,n),p=r.getDtlsParameters(t,n);a&&(p.role="server"),i.usingBundle&&0!==e||(i._gather(s.mid,e),"new"===u.state&&u.start(c,f,a?"controlling":"controlled"),"new"===l.state&&l.start(p));var g=o(h,d);i._transceive(s,g.codecs.length>0,!1)}})}return i._localDescription={type:t.type,sdp:t.sdp},i._updateSignalingState("offer"===t.type?"have-local-offer":"stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var h={};l.remoteStreams.forEach(function(t){h[t.id]=t});var d=[],f=r.splitSections(i.sdp),p=f.shift(),g=r.matchPrefix(p,"a=ice-lite").length>0,m=r.matchPrefix(p,"a=group:BUNDLE ").length>0;l.usingBundle=m;var y=r.matchPrefix(p,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,f.forEach(function(s,c){var u=r.splitLines(s),f=r.getKind(s),y=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,v=u[0].substr(2).split(" ")[2],b=r.getDirection(s,p),w=r.parseMsid(s),_=r.getMid(s)||r.generateIdentifier();if(y||"application"===f&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))l.transceivers[c]={mid:_,kind:f,protocol:v,rejected:!0};else{var C,S,T,E,O,I,x,k,R;!y&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(f,!0));var P,A,j=r.parseRtpParameters(s);y||(P=r.getIceParameters(s,p),(A=r.getDtlsParameters(s,p)).role="client"),x=r.parseRtpEncodingParameters(s);var D=r.parseRtcpParameters(s),N=r.matchPrefix(s,"a=end-of-candidates",p).length>0,M=r.matchPrefix(s,"a=candidate:").map(function(t){return r.parseCandidate(t)}).filter(function(t){return 1===t.component});if(("offer"===i.type||"answer"===i.type)&&!y&&m&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||y)"answer"!==i.type||y||(S=(C=l.transceivers[c]).iceGatherer,T=C.iceTransport,E=C.dtlsTransport,O=C.rtpReceiver,I=C.sendEncodingParameters,k=C.localCapabilities,l.transceivers[c].recvEncodingParameters=x,l.transceivers[c].remoteCapabilities=j,l.transceivers[c].rtcpParameters=D,M.length&&"new"===T.state&&(!g&&!N||m&&0!==c?M.forEach(function(t){a(C.iceTransport,t)}):T.setRemoteCandidates(M)),m&&0!==c||("new"===T.state&&T.start(S,P,"controlling"),"new"===E.state&&E.start(A)),!o(C.localCapabilities,C.remoteCapabilities).codecs.filter(function(t){return"rtx"===t.name.toLowerCase()}).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,l._transceive(C,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!O||"sendrecv"!==b&&"sendonly"!==b?delete C.rtpReceiver:(R=O.track,w?(h[w.stream]||(h[w.stream]=new t.MediaStream),n(R,h[w.stream]),d.push([R,O,h[w.stream]])):(h.default||(h.default=new t.MediaStream),n(R,h.default),d.push([R,O,h.default]))));else{(C=l.transceivers[c]||l._createTransceiver(f)).mid=_,C.iceGatherer||(C.iceGatherer=l._createIceGatherer(c,m)),M.length&&"new"===C.iceTransport.state&&(!N||m&&0!==c?M.forEach(function(t){a(C.iceTransport,t)}):C.iceTransport.setRemoteCandidates(M)),k=t.RTCRtpReceiver.getCapabilities(f),e<15019&&(k.codecs=k.codecs.filter(function(t){return"rtx"!==t.name})),I=C.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,F=!1;"sendrecv"===b||"sendonly"===b?(F=!C.rtpReceiver,O=C.rtpReceiver||new t.RTCRtpReceiver(C.dtlsTransport,f),F&&(R=O.track,w&&"-"===w.stream||(w?(h[w.stream]||(h[w.stream]=new t.MediaStream,Object.defineProperty(h[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(R,"id",{get:function(){return w.track}}),L=h[w.stream]):(h.default||(h.default=new t.MediaStream),L=h.default)),L&&(n(R,L),C.associatedRemoteMediaStreams.push(L)),d.push([R,O,L]))):C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(e){var n,r,i=e.getTracks().find(function(t){return t.id===C.rtpReceiver.track.id});i&&((r=e).removeTrack(n=i),r.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:n})))}),C.associatedRemoteMediaStreams=[]),C.localCapabilities=k,C.remoteCapabilities=j,C.rtpReceiver=O,C.rtcpParameters=D,C.sendEncodingParameters=I,C.recvEncodingParameters=x,l._transceive(l.transceivers[c],!1,F)}}}),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},l._updateSignalingState("offer"===i.type?"have-remote-offer":"stable"),Object.keys(h).forEach(function(e){var n=h[e];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,t.setTimeout(function(){l._dispatchEvent("addstream",r)})}d.forEach(function(t){n.id===t[2].id&&u(l,t[0],t[1],[n])})}}),d.forEach(function(t){t[2]||u(l,t[0],t[1],[])}),t.setTimeout(function(){l&&l.transceivers&&l.transceivers.forEach(function(t){t.iceTransport&&"new"===t.iceTransport.state&&t.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),t.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach(function(t){t.iceTransport&&t.iceTransport.stop(),t.dtlsTransport&&t.dtlsTransport.stop(),t.rtpSender&&t.rtpSender.stop(),t.rtpReceiver&&t.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",e)},l.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,t.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},l.prototype._updateIceConnectionState=function(){var t,e={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(t){t.iceTransport&&!t.rejected&&e[t.iceTransport.state]++}),t="new",e.failed>0?t="failed":e.checking>0?t="checking":e.disconnected>0?t="disconnected":e.new>0?t="new":e.connected>0?t="connected":e.completed>0&&(t="completed"),t!==this.iceConnectionState){this.iceConnectionState=t;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var t,e={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(t){t.iceTransport&&t.dtlsTransport&&!t.rejected&&(e[t.iceTransport.state]++,e[t.dtlsTransport.state]++)}),e.connected+=e.completed,t="new",e.failed>0?t="failed":e.connecting>0?t="connecting":e.disconnected>0?t="disconnected":e.new>0?t="new":e.connected>0&&(t="connected"),t!==this.connectionState){this.connectionState=t;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(t){return"audio"===t.kind}).length,s=n.transceivers.filter(function(t){return"video"===t.kind}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach(function(t){"audio"===t.kind?--o<0&&(t.wantReceive=!1):"video"===t.kind&&--s<0&&(t.wantReceive=!1)});o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=t.RTCRtpSender.getCapabilities(a);e<15019&&(u.codecs=u.codecs.filter(function(t){return"rtx"!==t.name})),u.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),u.headerExtensions.forEach(function(t){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})});var l=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&e>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new t.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=l}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(t,e){u+=i(t,t.localCapabilities,"offer",t.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!t.iceGatherer||"new"===n.iceGatheringState||0!==e&&n.usingBundle||(t.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,u+="a="+r.writeCandidate(t)+"\r\n"}),"completed"===t.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var l=new t.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(t,r){if(!(r+1>a)){if(t.rejected)return"application"===t.kind?s+="DTLS/SCTP"===t.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+t.protocol+" webrtc-datachannel\r\n":"audio"===t.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===t.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+t.mid+"\r\n");var c;t.stream&&("audio"===t.kind?c=t.stream.getAudioTracks()[0]:"video"===t.kind&&(c=t.stream.getVideoTracks()[0]),c&&e>=15019&&"video"===t.kind&&!t.sendEncodingParameters[0].rtx&&(t.sendEncodingParameters[0].rtx={ssrc:t.sendEncodingParameters[0].ssrc+1}));var u=o(t.localCapabilities,t.remoteCapabilities);!u.codecs.filter(function(t){return"rtx"===t.name.toLowerCase()}).length&&t.sendEncodingParameters[0].rtx&&delete t.sendEncodingParameters[0].rtx,s+=i(t,u,"answer",t.stream,n._dtlsRole),t.rtcpParameters&&t.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}});var u=new t.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(t){var e,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var s=t.sdpMLineIndex;if(t.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===t.sdpMid){s=u;break}var l=n.transceivers[s];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var h=Object.keys(t.candidate).length>0?r.parseCandidate(t.candidate):{};if("tcp"===h.protocol&&(0===h.port||9===h.port))return i();if(h.component&&1!==h.component)return i();if((0===s||s>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,h))return o(c("OperationError","Can not add ICE candidate"));var d=t.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(e=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(h.type?d:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+e.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(e=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+e.join(""),!n.usingBundle));f++);i()})},l.prototype.getStats=function(e){if(e&&e instanceof t.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(t){t.rtpSender&&t.rtpSender.track===e?n=t.rtpSender:t.rtpReceiver&&t.rtpReceiver.track===e&&(n=t.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&r.push(t[e].getStats())})}),Promise.all(r).then(function(t){var e=new Map;return t.forEach(function(t){t.forEach(function(t){e.set(t.id,t)})}),e})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var n=t[e];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(t){var e=new Map;return Object.keys(t).forEach(function(n){t[n].type=function(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}(t[n]),e.set(n,t[n])}),e})}}});var h=["createOffer","createAnswer"];return h.forEach(function(t){var e=l.prototype[t];l.prototype[t]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?e.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):e.apply(this,arguments)}}),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(t){var e=l.prototype[t];l.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?e.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):e.apply(this,arguments)}}),["getStats"].forEach(function(t){var e=l.prototype[t];l.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]?e.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)}):e.apply(this,arguments)}}),l}},{sdp:"YHvh"}],YdKx:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(t){var e=t&&t.navigator,n=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(t){return n(t).catch(function(t){return Promise.reject(function(t){return{name:{PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}}}(t))})}}},{}],P3bV:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}},{}],XRic:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimPeerConnection=function(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(t){return t}),t.RTCSessionDescription||(t.RTCSessionDescription=function(t){return t}),e.version<15025)){var n=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set:function(t){n.set.call(this,t);var e=new Event("enabled");e.enabled=t,this.dispatchEvent(e)}})}!t.RTCRtpSender||"dtmf"in t.RTCRtpSender.prototype||Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new t.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);var s=(0,o.default)(t,e.version);t.RTCPeerConnection=function(t){return t&&t.iceServers&&(t.iceServers=(0,i.filterIceServers)(t.iceServers,e.version),r.log("ICE servers after filtering:",t.iceServers)),new s(t)},t.RTCPeerConnection.prototype=s.prototype},n.shimReplaceTrack=function(t){!t.RTCRtpSender||"replaceTrack"in t.RTCRtpSender.prototype||(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}});var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("../utils")),i=t("./filtericeservers"),o=function(t){return t&&t.__esModule?t:{default:t}}(t("rtcpeerconnection-shim")),s=t("./getusermedia"),a=t("./getdisplaymedia");function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}},{"../utils":"iSxC","./filtericeservers":"NZ1C","rtcpeerconnection-shim":"NJ2u","./getusermedia":"YdKx","./getdisplaymedia":"P3bV"}],GzSv:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(t,e){var n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(t,e,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(e,i)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(t){return"object"===o(t)&&"object"===o(t.audio)&&(t=JSON.parse(JSON.stringify(t)),s(t.audio,"autoGainControl","mozAutoGainControl"),s(t.audio,"noiseSuppression","mozNoiseSuppression")),a(t)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var t=c.apply(this,arguments);return s(t,"mozAutoGainControl","autoGainControl"),s(t,"mozNoiseSuppression","noiseSuppression"),t}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(t){return"audio"===this.kind&&"object"===o(t)&&(t=JSON.parse(JSON.stringify(t)),s(t,"autoGainControl","mozAutoGainControl"),s(t,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[t])}}}};var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(t("../utils"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{"../utils":"iSxC"}],UuGU:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}},{}],Fzdr:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimOnTrack=function(t){"object"===a(t)&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(t,e){if("object"===a(t)&&(t.RTCPeerConnection||t.mozRTCPeerConnection)){!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e],r=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)});t.RTCPeerConnection.prototype[e]=r[e]});var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){var[t,i,o]=arguments;return r.apply(this,[t||null]).then(function(t){if(e.version<53&&!i)try{t.forEach(function(t){t.type=n[t.type]||t.type})}catch(r){if("TypeError"!==r.name)throw r;t.forEach(function(e,r){t.set(r,Object.assign({},e,{type:n[e.type]||e.type}))})}return t}).then(i,o)}}},n.shimSenderGetStats=function(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&(!t.RTCRtpSender||!("getStats"in t.RTCRtpSender.prototype))){var e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){var t=this,n=e.apply(this,[]);return n.forEach(function(e){return e._pc=t}),n});var n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){var t=n.apply(this,arguments);return t._pc=this,t}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(t){if("object"===a(t)&&t.RTCPeerConnection&&t.RTCRtpSender&&(!t.RTCRtpSender||!("getStats"in t.RTCRtpReceiver.prototype))){var e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){var t=this,n=e.apply(this,[]);return n.forEach(function(e){return e._pc=t}),n}),r.wrapPeerConnectionEvent(t,"track",function(t){return t.receiver._pc=t.srcElement,t}),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&t.getTracks().includes(n.track)&&e.removeTrack(n)})})},n.shimRTCDataChannel=function(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)},n.shimAddTransceiver=function(t){if("object"===a(t)&&t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var t=arguments[1],n=t&&"sendEncodings"in t;n&&t.sendEncodings.forEach(function(t){if("rid"in t&&!/^[a-z0-9]{0,16}$/i.test(t.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in t&&!(parseFloat(t.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in t&&!(parseFloat(t.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var r=e.apply(this,arguments);if(n){var{sender:i}=r,o=i.getParameters();"encodings"in o&&(1!==o.encodings.length||0!==Object.keys(o.encodings[0]).length)||(o.encodings=t.sendEncodings,i.sendEncodings=t.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then(function(){delete i.sendEncodings}).catch(function(){delete i.sendEncodings})))}return r})}},n.shimGetParameters=function(t){if("object"===a(t)&&t.RTCRtpSender){var e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){var t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}},n.shimCreateOffer=function(t){if("object"===a(t)&&t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){var t=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return e.apply(n,t)}).finally(function(){n.setParametersPromises=[]}):e.apply(this,arguments)}}},n.shimCreateAnswer=function(t){if("object"===a(t)&&t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){var t=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return e.apply(n,t)}).finally(function(){n.setParametersPromises=[]}):e.apply(this,arguments)}}},Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}}),Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}});var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("../utils")),i=t("./getusermedia"),o=t("./getdisplaymedia");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{"../utils":"iSxC","./getusermedia":"GzSv","./getdisplaymedia":"UuGU"}],t1lL:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimLocalStreamsAPI=function(t){if("object"===o(t)&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(t){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(function(r){return e.call(n,r,t)}),t.getVideoTracks().forEach(function(r){return e.call(n,r,t)})},t.RTCPeerConnection.prototype.addTrack=function(t){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach(function(t){n._localStreams?n._localStreams.includes(t)||n._localStreams.push(t):n._localStreams=[t]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(t);if(-1!==n){this._localStreams.splice(n,1);var r=t.getTracks();this.getSenders().forEach(function(t){r.includes(t.track)&&e.removeTrack(t)})}})}},n.shimRemoteStreamsAPI=function(t){if("object"===o(t)&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(t){var e=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!e._remoteStreams.includes(t)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})})}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(e)>=0)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}})}),e.apply(t,arguments)}}},n.shimCallbacksAPI=function(t){if("object"===o(t)&&t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(t,e){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return e?(i.then(t,e),Promise.resolve()):i},e.createAnswer=function(t,e){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return e?(i.then(t,e),Promise.resolve()):i};var c=function(t,e,n){var r=i.apply(this,[t]);return n?(r.then(e,n),Promise.resolve()):r};e.setLocalDescription=c,e.setRemoteDescription=c=function(t,e,n){var r=s.apply(this,[t]);return n?(r.then(e,n),Promise.resolve()):r},e.addIceCandidate=c=function(t,e,n){var r=a.apply(this,[t]);return n?(r.then(e,n),Promise.resolve()):r}}},n.shimGetUserMedia=function(t){var e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){var n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=function(t){return r(s(t))}}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(t,n,r){e.mediaDevices.getUserMedia(t).then(n,r)}).bind(e))},n.shimConstraints=s,n.shimRTCIceServerUrls=function(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection;t.RTCPeerConnection=function(t,n){if(t&&t.iceServers){for(var i=[],o=0;o<t.iceServers.length;o++){var s=t.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,i.push(s)):i.push(t.iceServers[o])}t.iceServers=i}return new e(t,n)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})}},n.shimTrackEventTransceiver=function(t){"object"===o(t)&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(t){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(t){if(t){void 0!==t.offerToReceiveAudio&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);var n=this.getTransceivers().find(function(t){return"audio"===t.receiver.track.kind});!1===t.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==t.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==t.offerToReceiveVideo&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);var r=this.getTransceivers().find(function(t){return"video"===t.receiver.track.kind});!1===t.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==t.offerToReceiveVideo||r||this.addTransceiver("video")}return e.apply(this,arguments)}},n.shimAudioContext=function(t){"object"!==o(t)||t.AudioContext||(t.AudioContext=t.webkitAudioContext)};var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(t("../utils"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return t&&void 0!==t.video?Object.assign({},t,{video:r.compactObject(t.video)}):t}},{"../utils":"iSxC"}],GOQK:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimRTCIceCandidate=function(t){if(t.RTCIceCandidate&&(!t.RTCIceCandidate||!("foundation"in t.RTCIceCandidate.prototype))){var e=t.RTCIceCandidate;t.RTCIceCandidate=function(t){if("object"===s(t)&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new e(t),i=r.default.parseCandidate(t.candidate),o=Object.assign(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(t)},t.RTCIceCandidate.prototype=e.prototype,i.wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e})}},n.shimMaxMessageSize=function(t,e){if(t.RTCPeerConnection){"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){var{sdpSemantics:t}=this.getConfiguration();"plan-b"===t&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(t){if(!t||!t.sdp)return!1;var e=r.default.splitSections(t.sdp);return e.shift(),e.some(function(t){var e=r.default.parseMLine(t);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")})}(arguments[0])){var i,o=function(t){var e=t.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;var n=parseInt(e[1],10);return n!=n?-1:n}(arguments[0]),s=(u=o,l=65536,"firefox"===e.browser&&(l=e.version<57?-1===u?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),l),a=function(t,n){var i=65536;"firefox"===e.browser&&57===e.version&&(i=65535);var o=r.default.matchPrefix(t.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===e.browser&&-1!==n&&(i=2147483637),i}(arguments[0],o);i=0===s&&0===a?Number.POSITIVE_INFINITY:0===s||0===a?Math.max(s,a):Math.min(s,a);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return i}}),this._sctp=c}var u,l;return n.apply(this,arguments)}}},n.shimSendThrowTypeError=function(t){if(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype){var e=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){var t=e.apply(this,arguments);return n(t,this),t},i.wrapPeerConnectionEvent(t,"datachannel",function(t){return n(t.channel,t.target),t})}function n(t,e){var n=t.send;t.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===t.readyState&&e.sctp&&i>e.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)");return n.apply(t,arguments)}}},n.shimConnectionState=function(t){if(t.RTCPeerConnection&&!("connectionState"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(t){var n=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(t){var e=t.target;if(e._lastConnectionState!==e.connectionState){e._lastConnectionState=e.connectionState;var n=new Event("connectionstatechange",t);e.dispatchEvent(n)}return t},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}},n.removeExtmapAllowMixed=function(t,e){if(t.RTCPeerConnection&&!("chrome"===e.browser&&e.version>=71||"safari"===e.browser&&e.version>=605)){var n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(e){if(e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")){var r=e.sdp.split("\n").filter(function(t){return"a=extmap-allow-mixed"!==t.trim()}).join("\n");t.RTCSessionDescription&&e instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:e.type,sdp:r}):e.sdp=r}return n.apply(this,arguments)}}},n.shimAddIceCandidateNullOrEmpty=function(t,e){if(t.RTCPeerConnection&&t.RTCPeerConnection.prototype){var n=t.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}};var r=function(t){return t&&t.__esModule?t:{default:t}}(t("sdp")),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=r?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(t("./utils"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}},{sdp:"YHvh","./utils":"iSxC"}],KtlG:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var{window:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=r.log,u=r.detectBrowser(t),l={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(u.browser){case"chrome":if(!i||!i.shimPeerConnection||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),l;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),l;n("adapter.js shimming chrome."),l.browserShim=i,c.shimAddIceCandidateNullOrEmpty(t,u),i.shimGetUserMedia(t,u),i.shimMediaStream(t,u),i.shimPeerConnection(t,u),i.shimOnTrack(t,u),i.shimAddTrackRemoveTrack(t,u),i.shimGetSendersWithDtmf(t,u),i.shimGetStats(t,u),i.shimSenderReceiverGetStats(t,u),i.fixNegotiationNeeded(t,u),c.shimRTCIceCandidate(t,u),c.shimConnectionState(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u),c.removeExtmapAllowMixed(t,u);break;case"firefox":if(!s||!s.shimPeerConnection||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),l;n("adapter.js shimming firefox."),l.browserShim=s,c.shimAddIceCandidateNullOrEmpty(t,u),s.shimGetUserMedia(t,u),s.shimPeerConnection(t,u),s.shimOnTrack(t,u),s.shimRemoveStream(t,u),s.shimSenderGetStats(t,u),s.shimReceiverGetStats(t,u),s.shimRTCDataChannel(t,u),s.shimAddTransceiver(t,u),s.shimGetParameters(t,u),s.shimCreateOffer(t,u),s.shimCreateAnswer(t,u),c.shimRTCIceCandidate(t,u),c.shimConnectionState(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u);break;case"edge":if(!o||!o.shimPeerConnection||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),l;n("adapter.js shimming edge."),l.browserShim=o,o.shimGetUserMedia(t,u),o.shimGetDisplayMedia(t,u),o.shimPeerConnection(t,u),o.shimReplaceTrack(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u);break;case"safari":if(!a||!e.shimSafari)return n("Safari shim is not included in this adapter release."),l;n("adapter.js shimming safari."),l.browserShim=a,c.shimAddIceCandidateNullOrEmpty(t,u),a.shimRTCIceServerUrls(t,u),a.shimCreateOfferLegacy(t,u),a.shimCallbacksAPI(t,u),a.shimLocalStreamsAPI(t,u),a.shimRemoteStreamsAPI(t,u),a.shimTrackEventTransceiver(t,u),a.shimGetUserMedia(t,u),a.shimAudioContext(t,u),c.shimRTCIceCandidate(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u),c.removeExtmapAllowMixed(t,u);break;default:n("Unsupported browser!")}return l};var r=l(t("./utils")),i=l(t("./chrome/chrome_shim")),o=l(t("./edge/edge_shim")),s=l(t("./firefox/firefox_shim")),a=l(t("./safari/safari_shim")),c=l(t("./common_shim"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}},{"./utils":"iSxC","./chrome/chrome_shim":"uI5X","./edge/edge_shim":"XRic","./firefox/firefox_shim":"Fzdr","./safari/safari_shim":"t1lL","./common_shim":"GOQK"}],tI1X:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(0,t("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});n.default=r},{"./adapter_factory.js":"KtlG"}],sXtV:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.webRTCAdapter=void 0;var i=r(t("webrtc-adapter"));n.webRTCAdapter=i.default},{"webrtc-adapter":"tI1X"}],I31f:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Supports=void 0;var r=t("./adapter");n.Supports=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return"undefined"!=typeof RTCPeerConnection},t.prototype.isBrowserSupported=function(){var t=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(t)&&("chrome"===t?e>=this.minChromeVersion:"firefox"===t?e>=this.minFirefoxVersion:"safari"===t&&!this.isIOS&&e>=this.minSafariVersion)},t.prototype.getBrowser=function(){return r.webRTCAdapter.browserDetails.browser},t.prototype.getVersion=function(){return r.webRTCAdapter.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var t,e=this.getBrowser(),n=r.webRTCAdapter.browserDetails.version||0;if("chrome"===e&&n<72)return!1;if("firefox"===e&&n>=59)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var i=!1;try{(t=new RTCPeerConnection).addTransceiver("audio"),i=!0}catch(o){}finally{t&&t.close()}return i},t.prototype.toString=function(){return"Supports: \n    browser:"+this.getBrowser()+" \n    version:"+this.getVersion()+" \n    isIOS:"+this.isIOS+" \n    isWebRTCSupported:"+this.isWebRTCSupported()+" \n    isBrowserSupported:"+this.isBrowserSupported()+" \n    isUnifiedPlanSupported:"+this.isUnifiedPlanSupported()},t}())},{"./adapter":"sXtV"}],BHXf:[function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(n,"__esModule",{value:!0}),n.util=void 0;var s=o(t("peerjs-js-binarypack")),a=t("./supports"),c={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:0.peerjs.com:3478",username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};n.util=new(function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=c,this.browser=a.Supports.getBrowser(),this.browserVersion=a.Supports.getVersion(),this.supports=function(){var t,e={browser:a.Supports.isBrowserSupported(),webRTC:a.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;try{t=new RTCPeerConnection(c),e.audioVideo=!0;var n=void 0;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!n.ordered;try{n.binaryType="blob",e.binaryBlob=!a.Supports.isIOS}catch(s){}}catch(s){}finally{n&&n.close()}}catch(s){}finally{t&&t.close()}return e}(),this.pack=s.pack,this.unpack=s.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},t.prototype.chunk=function(t){for(var e=[],r=t.size,i=Math.ceil(r/n.util.chunkedMTU),o=0,s=0;s<r;){var a=Math.min(r,s+n.util.chunkedMTU),c=t.slice(s,a);e.push({__peerData:this._dataCount,n:o,data:c,total:i}),s=a,o++}return this._dataCount++,e},t.prototype.blobToArrayBuffer=function(t,e){var n=new FileReader;return n.onload=function(t){t.target&&e(t.target.result)},n.readAsArrayBuffer(t),n},t.prototype.binaryStringToArrayBuffer=function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=255&t.charCodeAt(n);return e.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).substr(2)},t.prototype.isSecure=function(){return"https:"===location.protocol},t}())},{"peerjs-js-binarypack":"kdPp","./supports":"I31f"}],JJlS:[function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=this._events[i?i+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,o=new Array(r);n<r;n++)o[n]=e[n].fn;return o},u.prototype.listenerCount=function(t){var e=this._events[i?i+t:t];return e?e.fn?1:e.length:0},u.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,o),!0;case 6:return l.fn.call(l.context,e,n,r,o,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return c(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||c(this,o);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:c(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?this._events[e=i?i+t:t]&&c(this,e):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,void 0!==e&&(e.exports=u)},{}],WOs9:[function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0;var o,s="PeerJS: ";!function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"}(o=n.LogLevel||(n.LogLevel={}));var a=function(){function t(){this._logLevel=o.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logLevel>=o.All&&this._print.apply(this,i([o.All],r(t)))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logLevel>=o.Warnings&&this._print.apply(this,i([o.Warnings],r(t)))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logLevel>=o.Errors&&this._print.apply(this,i([o.Errors],r(t)))},t.prototype.setLogFunction=function(t){this._print=t},t.prototype._print=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var a=i([s],r(e));for(var c in a)a[c]instanceof Error&&(a[c]="("+a[c].name+") "+a[c].message);t>=o.All?console.log.apply(console,i([],r(a))):t>=o.Warnings?console.warn.apply(console,i(["WARNING"],r(a))):t>=o.Errors&&console.error.apply(console,i(["ERROR"],r(a)))},t}();n.default=new a},{}],ZRYf:[function(t,e,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.ServerMessageType=n.SocketEventType=n.SerializationType=n.PeerErrorType=n.PeerEventType=n.ConnectionType=n.ConnectionEventType=void 0,(r=n.ConnectionEventType||(n.ConnectionEventType={})).Open="open",r.Stream="stream",r.Data="data",r.Close="close",r.Error="error",r.IceStateChanged="iceStateChanged",function(t){t.Data="data",t.Media="media"}(n.ConnectionType||(n.ConnectionType={})),function(t){t.Open="open",t.Close="close",t.Connection="connection",t.Call="call",t.Disconnected="disconnected",t.Error="error"}(n.PeerEventType||(n.PeerEventType={})),function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"}(n.PeerErrorType||(n.PeerErrorType={})),function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"}(n.SerializationType||(n.SerializationType={})),function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"}(n.SocketEventType||(n.SocketEventType={})),function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"}(n.ServerMessageType||(n.ServerMessageType={}))},{}],wJlv:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Socket=void 0;var c=t("eventemitter3"),u=a(t("./logger")),l=t("./enums"),h=function(t){function e(e,n,r,i,o,s){void 0===s&&(s=5e3);var a=t.call(this)||this;return a.pingInterval=s,a._disconnected=!0,a._messagesQueue=[],a._baseUrl=(e?"wss://":"ws://")+n+":"+r+i+"peerjs?key="+o,a}return r(e,t),e.prototype.start=function(t,e){var n=this;this._id=t,!this._socket&&this._disconnected&&(this._socket=new WebSocket(this._baseUrl+"&id="+t+"&token="+e),this._disconnected=!1,this._socket.onmessage=function(t){var e;try{e=JSON.parse(t.data),u.default.log("Server message received:",e)}catch(s){return void u.default.log("Invalid server message",t.data)}n.emit(l.SocketEventType.Message,e)},this._socket.onclose=function(t){n._disconnected||(u.default.log("Socket closed.",t),n._cleanup(),n._disconnected=!0,n.emit(l.SocketEventType.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),u.default.log("Socket open"),n._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var t=this;this._wsPingTimer=setTimeout(function(){t._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(this._wsOpen()){var t=JSON.stringify({type:l.ServerMessageType.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}else u.default.log("Cannot send heartbeat, because socket closed")},e.prototype._wsOpen=function(){return!!this._socket&&1===this._socket.readyState},e.prototype._sendQueuedMessages=function(){var t,e,n=o([],i(this._messagesQueue));this._messagesQueue=[];try{for(var r=s(n),a=r.next();!a.done;a=r.next())this.send(a.value)}catch(c){t={error:c}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.send=function(t){if(!this._disconnected)if(this._id)if(t.type){if(this._wsOpen()){var e=JSON.stringify(t);this._socket.send(e)}}else this.emit(l.SocketEventType.Error,"Invalid message");else this._messagesQueue.push(t)},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(c.EventEmitter);n.Socket=h},{eventemitter3:"JJlS","./logger":"WOs9","./enums":"ZRYf"}],HCdX:[function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Negotiator=void 0;var a=t("./util"),c=s(t("./logger")),u=t("./enums"),l=function(){function t(t){this.connection=t}return t.prototype.startConnection=function(t){var e=this._startPeerConnection();if(this.connection.peerConnection=e,this.connection.type===u.ConnectionType.Media&&t._stream&&this._addTracksToConnection(t._stream,e),t.originator){if(this.connection.type===u.ConnectionType.Data){var n=this.connection,r=e.createDataChannel(n.label,{ordered:!!t.reliable});n.initialize(r)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},t.prototype._startPeerConnection=function(){c.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},t.prototype._setupListeners=function(t){var e=this,n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,o=this.connection.provider;c.default.log("Listening for ICE candidates."),t.onicecandidate=function(t){t.candidate&&t.candidate.candidate&&(c.default.log("Received ICE candidates for "+n+":",t.candidate),o.socket.send({type:u.ServerMessageType.Candidate,payload:{candidate:t.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":c.default.log("iceConnectionState is failed, closing connections to "+n),e.connection.emit(u.ConnectionEventType.Error,new Error("Negotiation of connection to "+n+" failed.")),e.connection.close();break;case"closed":c.default.log("iceConnectionState is closed, closing connections to "+n),e.connection.emit(u.ConnectionEventType.Error,new Error("Connection to "+n+" closed.")),e.connection.close();break;case"disconnected":c.default.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=a.util.noop}e.connection.emit(u.ConnectionEventType.IceStateChanged,t.iceConnectionState)},c.default.log("Listening for data channel"),t.ondatachannel=function(t){c.default.log("Received data channel");var e=t.channel;o.getConnection(n,r).initialize(e)},c.default.log("Listening for remote stream"),t.ontrack=function(t){c.default.log("Received remote stream");var i=t.streams[0],s=o.getConnection(n,r);s.type===u.ConnectionType.Media&&e._addStreamToMediaConnection(i,s)}},t.prototype.cleanup=function(){c.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var e=!1;if(this.connection.type===u.ConnectionType.Data){var n=this.connection.dataChannel;n&&(e=!!n.readyState&&"closed"!==n.readyState)}("closed"!==t.signalingState||e)&&t.close()}},t.prototype._makeOffer=function(){return i(this,void 0,Promise,function(){var t,e,n,i,s,l,h;return o(this,function(o){switch(o.label){case 0:t=this.connection.peerConnection,e=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:n=o.sent(),c.default.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return o.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),i={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:a.util.browser},this.connection.type===u.ConnectionType.Data&&(s=this.connection,i=r(r({},i),{label:s.label,reliable:s.reliable,serialization:s.serialization})),e.socket.send({type:u.ServerMessageType.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=(l=o.sent())&&(e.emitError(u.PeerErrorType.WebRTC,l),c.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return h=o.sent(),e.emitError(u.PeerErrorType.WebRTC,h),c.default.log("Failed to createOffer, ",h),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return i(this,void 0,Promise,function(){var t,e,n,r,i;return o(this,function(o){switch(o.label){case 0:t=this.connection.peerConnection,e=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:n=o.sent(),c.default.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,t.setLocalDescription(n)];case 4:return o.sent(),c.default.log("Set localDescription:",n,"for:"+this.connection.peer),e.socket.send({type:u.ServerMessageType.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,browser:a.util.browser},dst:this.connection.peer}),[3,6];case 5:return r=o.sent(),e.emitError(u.PeerErrorType.WebRTC,r),c.default.log("Failed to setLocalDescription, ",r),[3,6];case 6:return[3,8];case 7:return i=o.sent(),e.emitError(u.PeerErrorType.WebRTC,i),c.default.log("Failed to create answer, ",i),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(t,e){return i(this,void 0,Promise,function(){var n,r,i,s;return o(this,function(o){switch(o.label){case 0:e=new RTCSessionDescription(e),n=this.connection.peerConnection,r=this.connection.provider,c.default.log("Setting remote description",e),i=this,o.label=1;case 1:return o.trys.push([1,5,,6]),[4,n.setRemoteDescription(e)];case 2:return o.sent(),c.default.log("Set remoteDescription:"+t+" for:"+this.connection.peer),"OFFER"!==t?[3,4]:[4,i._makeAnswer()];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:return s=o.sent(),r.emitError(u.PeerErrorType.WebRTC,s),c.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(t){return i(this,void 0,Promise,function(){var e,n,r,i,s,a;return o(this,function(o){switch(o.label){case 0:c.default.log("handleCandidate:",t),e=t.candidate,n=t.sdpMLineIndex,r=t.sdpMid,i=this.connection.peerConnection,s=this.connection.provider,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.addIceCandidate(new RTCIceCandidate({sdpMid:r,sdpMLineIndex:n,candidate:e}))];case 2:return o.sent(),c.default.log("Added ICE candidate for:"+this.connection.peer),[3,4];case 3:return a=o.sent(),s.emitError(u.PeerErrorType.WebRTC,a),c.default.log("Failed to handleCandidate, ",a),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(t,e){if(c.default.log("add tracks from stream "+t.id+" to peer connection"),!e.addTrack)return c.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(n){e.addTrack(n,t)})},t.prototype._addStreamToMediaConnection=function(t,e){c.default.log("add stream "+t.id+" to media connection "+e.connectionId),e.addStream(t)},t}();n.Negotiator=l},{"./util":"BHXf","./logger":"WOs9","./enums":"ZRYf"}],tQFK:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.BaseConnection=void 0;var i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.peer=e,i.provider=n,i.options=r,i._open=!1,i.metadata=r.metadata,i}return r(e,t),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(t("eventemitter3").EventEmitter);n.BaseConnection=i},{eventemitter3:"JJlS"}],dbHP:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.MediaConnection=void 0;var a=t("./util"),c=s(t("./logger")),u=t("./negotiator"),l=t("./enums"),h=function(t){function e(n,r,i){var o=t.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||e.ID_PREFIX+a.util.randomToken(),o._negotiator=new u.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return l.ConnectionType.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(e){c.default.log("Receiving stream",e),this._remoteStream=e,t.prototype.emit.call(this,l.ConnectionEventType.Stream,e)},e.prototype.handleMessage=function(t){var e=t.type,n=t.payload;switch(t.type){case l.ServerMessageType.Answer:this._negotiator.handleSDP(e,n.sdp),this._open=!0;break;case l.ServerMessageType.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:c.default.warn("Unrecognized message type:"+e+" from peer:"+this.peer)}},e.prototype.answer=function(t,e){var n,r;if(void 0===e&&(e={}),this._localStream)c.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this._localStream=t,e&&e.sdpTransform&&(this.options.sdpTransform=e.sdpTransform),this._negotiator.startConnection(i(i({},this.options._payload),{_stream:t}));var s=this.provider._getMessages(this.connectionId);try{for(var a=o(s),u=a.next();!u.done;u=a.next())this.handleMessage(u.value)}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}this._open=!0}},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,l.ConnectionEventType.Close))},e.ID_PREFIX="mc_",e}(t("./baseconnection").BaseConnection);n.MediaConnection=h},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK"}],GGp6:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.EncodingQueue=void 0;var o=t("eventemitter3"),s=i(t("./logger")),a=function(t){function e(){var e=t.call(this)||this;return e.fileReader=new FileReader,e._queue=[],e._processing=!1,e.fileReader.onload=function(t){e._processing=!1,t.target&&e.emit("done",t.target.result),e.doNextTask()},e.fileReader.onerror=function(t){s.default.error("EncodingQueue error:",t),e._processing=!1,e.destroy(),e.emit("error",t)},e}return r(e,t),Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(t){this.queue.push(t),this.processing||this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){0!==this.size&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(o.EventEmitter);n.EncodingQueue=a},{eventemitter3:"JJlS","./logger":"WOs9"}],GBTQ:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.DataConnection=void 0;var s=t("./util"),a=o(t("./logger")),c=t("./negotiator"),u=t("./enums"),l=t("./baseconnection"),h=t("./encodingQueue"),d=function(t){function e(n,r,i){var o=t.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new h.EncodingQueue,o.connectionId=o.options.connectionId||e.ID_PREFIX+s.util.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||u.SerializationType.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(t){o._bufferedSend(t)}),o._encodingQueue.on("error",function(){a.default.error("DC#"+o.connectionId+": Error occured in encoding from blob to arraybuffer, close DC"),o.close()}),o._negotiator=new c.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return u.ConnectionType.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){this._dc=t,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var t=this;s.util.supports.binaryBlob&&!s.util.supports.reliable||(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){a.default.log("DC#"+t.connectionId+" dc connection success"),t._open=!0,t.emit(u.ConnectionEventType.Open)},this.dataChannel.onmessage=function(e){a.default.log("DC#"+t.connectionId+" dc onmessage:",e.data),t._handleDataMessage(e)},this.dataChannel.onclose=function(){a.default.log("DC#"+t.connectionId+" dc closed for:",t.peer),t.close()}},e.prototype._handleDataMessage=function(e){var n=this,r=e.data,i=r.constructor,o=r;if(this.serialization===u.SerializationType.Binary||this.serialization===u.SerializationType.BinaryUTF8){if(i===Blob)return void s.util.blobToArrayBuffer(r,function(t){var e=s.util.unpack(t);n.emit(u.ConnectionEventType.Data,e)});if(i===ArrayBuffer)o=s.util.unpack(r);else if(i===String){var a=s.util.binaryStringToArrayBuffer(r);o=s.util.unpack(a)}}else this.serialization===u.SerializationType.JSON&&(o=this.parse(r));o.__peerData?this._handleChunk(o):t.prototype.emit.call(this,u.ConnectionEventType.Data,o)},e.prototype._handleChunk=function(t){var e=t.__peerData,n=this._chunkedData[e]||{data:[],count:0,total:t.total};if(n.data[t.n]=t.data,n.count++,this._chunkedData[e]=n,n.total===n.count){delete this._chunkedData[e];var r=new Blob(n.data);this._handleDataMessage({data:r})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,u.ConnectionEventType.Close))},e.prototype.send=function(e,n){if(this.open)if(this.serialization===u.SerializationType.JSON)this._bufferedSend(this.stringify(e));else if(this.serialization===u.SerializationType.Binary||this.serialization===u.SerializationType.BinaryUTF8){var r=s.util.pack(e);if(!n&&r.size>s.util.chunkedMTU)return void this._sendChunks(r);s.util.supports.binaryBlob?this._bufferedSend(r):this._encodingQueue.enque(r)}else this._bufferedSend(e);else t.prototype.emit.call(this,u.ConnectionEventType.Error,new Error("Connection is not open. You should listen for the `open` event before sending messages."))},e.prototype._bufferedSend=function(t){!this._buffering&&this._trySend(t)||(this._buffer.push(t),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(t){return a.default.error("DC#:"+this.connectionId+" Error when sending:",t),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())},e.prototype._sendChunks=function(t){var e,n,r=s.util.chunk(t);a.default.log("DC#"+this.connectionId+" Try to send "+r.length+" chunks...");try{for(var o=i(r),c=o.next();!c.done;c=o.next())this.send(c.value,!0)}catch(u){e={error:u}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case u.ServerMessageType.Answer:this._negotiator.handleSDP(t.type,e.sdp);break;case u.ServerMessageType.Candidate:this._negotiator.handleCandidate(e.candidate);break;default:a.default.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(l.BaseConnection);n.DataConnection=d},{"./util":"BHXf","./logger":"WOs9","./negotiator":"HCdX","./enums":"ZRYf","./baseconnection":"tQFK","./encodingQueue":"GGp6"}],in7L:[function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.API=void 0;var s=t("./util"),a=o(t("./logger")),c=function(){function t(t){this._options=t}return t.prototype._buildUrl=function(t){return(this._options.secure?"https://":"http://")+this._options.host+":"+this._options.port+this._options.path+this._options.key+"/"+t+"?ts="+(new Date).getTime()+Math.random()},t.prototype.retrieveId=function(){return r(this,void 0,Promise,function(){var t,e,n,r;return i(this,function(i){switch(i.label){case 0:t=this._buildUrl("id"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(e=i.sent()).status)throw new Error("Error. Status:"+e.status);return[2,e.text()];case 3:throw n=i.sent(),a.default.error("Error retrieving ID",n),r="","/"===this._options.path&&this._options.host!==s.util.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 4:return[2]}})})},t.prototype.listAllPeers=function(){return r(this,void 0,Promise,function(){var t,e,n;return i(this,function(r){switch(r.label){case 0:t=this._buildUrl("peers"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch(t)];case 2:if(200!==(e=r.sent()).status){if(401===e.status)throw new Error("It doesn't look like you have permission to list peers IDs. "+(this._options.host===s.util.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature."));throw new Error("Error. Status:"+e.status)}return[2,e.json()];case 3:throw n=r.sent(),a.default.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n);case 4:return[2]}})})},t}();n.API=c},{"./util":"BHXf","./logger":"WOs9"}],Hxpd:[function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Peer=void 0;var c=t("eventemitter3"),u=t("./util"),l=a(t("./logger")),h=t("./socket"),d=t("./mediaconnection"),f=t("./dataconnection"),p=t("./enums"),g=t("./api"),m=function(t){function e(n,r){var o,s=t.call(this)||this;return s._id=null,s._lastServerId=null,s._destroyed=!1,s._disconnected=!1,s._open=!1,s._connections=new Map,s._lostMessages=new Map,n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=i({debug:0,host:u.util.CLOUD_HOST,port:u.util.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:u.util.randomToken(),config:u.util.defaultConfig},r),s._options=r,"/"===s._options.host&&(s._options.host=window.location.hostname),s._options.path&&("/"!==s._options.path[0]&&(s._options.path="/"+s._options.path),"/"!==s._options.path[s._options.path.length-1]&&(s._options.path+="/")),void 0===s._options.secure&&s._options.host!==u.util.CLOUD_HOST?s._options.secure=u.util.isSecure():s._options.host==u.util.CLOUD_HOST&&(s._options.secure=!0),s._options.logFunction&&l.default.setLogFunction(s._options.logFunction),l.default.logLevel=s._options.debug||0,s._api=new g.API(r),s._socket=s._createServerConnection(),u.util.supports.audioVideo||u.util.supports.data?o&&!u.util.validateId(o)?(s._delayedAbort(p.PeerErrorType.InvalidID,'ID "'+o+'" is invalid'),s):(o?s._initialize(o):s._api.retrieveId().then(function(t){return s._initialize(t)}).catch(function(t){return s._abort(p.PeerErrorType.ServerError,t)}),s):(s._delayedAbort(p.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC"),s)}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var t,e,n=Object.create(null);try{for(var r=o(this._connections),i=r.next();!i.done;i=r.next()){var a=s(i.value,2);n[a[0]]=a[1]}}catch(f){t={error:f}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var t=this,e=new h.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(p.SocketEventType.Message,function(e){t._handleMessage(e)}),e.on(p.SocketEventType.Error,function(e){t._abort(p.PeerErrorType.SocketError,e)}),e.on(p.SocketEventType.Disconnected,function(){t.disconnected||(t.emitError(p.PeerErrorType.Network,"Lost connection to server."),t.disconnect())}),e.on(p.SocketEventType.Close,function(){t.disconnected||t._abort(p.PeerErrorType.SocketClosed,"Underlying socket is already closed.")}),e},e.prototype._initialize=function(t){this._id=t,this.socket.start(t,this._options.token)},e.prototype._handleMessage=function(t){var e,n,r=t.type,i=t.payload,s=t.src;switch(r){case p.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit(p.PeerEventType.Open,this.id);break;case p.ServerMessageType.Error:this._abort(p.PeerErrorType.ServerError,i.msg);break;case p.ServerMessageType.IdTaken:this._abort(p.PeerErrorType.UnavailableID,'ID "'+this.id+'" is taken');break;case p.ServerMessageType.InvalidKey:this._abort(p.PeerErrorType.InvalidKey,'API KEY "'+this._options.key+'" is invalid');break;case p.ServerMessageType.Leave:l.default.log("Received leave message from "+s),this._cleanupPeer(s),this._connections.delete(s);break;case p.ServerMessageType.Expire:this.emitError(p.PeerErrorType.PeerUnavailable,"Could not connect to peer "+s);break;case p.ServerMessageType.Offer:var a=i.connectionId;if((g=this.getConnection(s,a))&&(g.close(),l.default.warn("Offer received for existing Connection ID:"+a)),i.type===p.ConnectionType.Media)g=new d.MediaConnection(s,this,{connectionId:a,_payload:i,metadata:i.metadata}),this._addConnection(s,g),this.emit(p.PeerEventType.Call,g);else{if(i.type!==p.ConnectionType.Data)return void l.default.warn("Received malformed connection type:"+i.type);g=new f.DataConnection(s,this,{connectionId:a,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(s,g),this.emit(p.PeerEventType.Connection,g)}var c=this._getMessages(a);try{for(var u=o(c),h=u.next();!h.done;h=u.next())g.handleMessage(h.value)}catch(m){e={error:m}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}break;default:if(!i)return void l.default.warn("You received a malformed message from "+s+" of type "+r);var g;(g=this.getConnection(s,a=i.connectionId))&&g.peerConnection?g.handleMessage(t):a?this._storeMessage(a,t):l.default.warn("You received an unrecognized message:",t)}},e.prototype._storeMessage=function(t,e){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(e)},e.prototype._getMessages=function(t){var e=this._lostMessages.get(t);return e?(this._lostMessages.delete(t),e):[]},e.prototype.connect=function(t,e){if(void 0===e&&(e={}),this.disconnected)return l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(p.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");var n=new f.DataConnection(t,this,e);return this._addConnection(t,n),n},e.prototype.call=function(t,e,n){if(void 0===n&&(n={}),this.disconnected)return l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(p.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(e){n._stream=e;var r=new d.MediaConnection(t,this,n);return this._addConnection(t,r),r}l.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},e.prototype._addConnection=function(t,e){l.default.log("add connection "+e.type+":"+e.connectionId+" to peerId:"+t),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(e)},e.prototype._removeConnection=function(t){var e=this._connections.get(t.peer);if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}this._lostMessages.delete(t.connectionId)},e.prototype.getConnection=function(t,e){var n,r,i=this._connections.get(t);if(!i)return null;try{for(var s=o(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.connectionId===e)return c}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return null},e.prototype._delayedAbort=function(t,e){var n=this;setTimeout(function(){n._abort(t,e)},0)},e.prototype._abort=function(t,e){l.default.error("Aborting!"),this.emitError(t,e),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(t,e){var n;l.default.error("Error:",e),(n="string"==typeof e?new Error(e):e).type=t,this.emit(p.PeerEventType.Error,n)},e.prototype.destroy=function(){this.destroyed||(l.default.log("Destroy peer with ID:"+this.id),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit(p.PeerEventType.Close))},e.prototype._cleanup=function(){var t,e;try{for(var n=o(this._connections.keys()),r=n.next();!r.done;r=n.next()){var i=r.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(u){t={error:u}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(t){var e,n,r=this._connections.get(t);if(r)try{for(var i=o(r),s=i.next();!s.done;s=i.next())s.value.close()}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var t=this.id;l.default.log("Disconnect peer with ID:"+t),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit(p.PeerEventType.Disconnected,t)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)l.default.log("Attempting reconnection to server with ID "+this._lastServerId),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");l.default.error("In a hurry? We're still trying to make the initial connection!")}},e.prototype.listAllPeers=function(t){var e=this;void 0===t&&(t=function(t){}),this._api.listAllPeers().then(function(e){return t(e)}).catch(function(t){return e._abort(p.PeerErrorType.ServerError,t)})},e.DEFAULT_KEY="peerjs",e}(c.EventEmitter);n.Peer=m},{eventemitter3:"JJlS","./util":"BHXf","./logger":"WOs9","./socket":"wJlv","./mediaconnection":"dbHP","./dataconnection":"GBTQ","./enums":"ZRYf","./api":"in7L"}],iTK6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.peerjs=void 0;var r=t("./util"),i=t("./peer");n.peerjs={Peer:i.Peer,util:r.util},n.default=i.Peer,window.peerjs=n.peerjs,window.Peer=i.Peer},{"./util":"BHXf","./peer":"Hxpd"}]},{},["iTK6"])},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new c(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class c{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=u[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return T}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return l}),n.d(e,"j",function(){return h}),n.d(e,"k",function(){return f}),n.d(e,"l",function(){return p}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return u}),n.d(e,"o",function(){return d}),n.d(e,"p",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function u(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function d(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function f(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",c=new m(i,a,r);return c},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new C(t,e);return n.subscribe.bind(n)}var C=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function T(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return c});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),c=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof s?c(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return O}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),c=n("fXoL"),u=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new c.r("angularfire2.app.options"),b=new c.r("angularfire2.app.nameOrConfig"),w=new c.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=u.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>u.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(c.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(c){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:_,deps:[v,c.A,[new c.B,b]]};let O=(()=>{class t{constructor(t){u.a.registerVersion("angularfire",w.full,t.toString()),u.a.registerVersion("angular",c.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(c.Yb(c.C))},t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const c={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var u=n("3N8a");class l extends u.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=c.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(c.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),c=n("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",u),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new c.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var c=new t(n,o,r);return e[a]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),c=e.match(/\s|\//);if(s||c){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&c&&u.push("and"),c&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:c.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(c.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var u=0,h=Object.keys(e);u<h.length;u++)e[h[u]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.i)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.n)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Yb)(l)}const u=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Yb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Yb)(s).location;return new b(Object(r.Yb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(m),r.Yb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Ib)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new _(Object(r.Yb)(m),Object(r.Yb)(a))}function S(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const E=r.mb;class O{}let I=(()=>{class t extends O{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(E(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new R(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q),r.Mb(r.L),r.Mb(r.t))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class R{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new A,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){j("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){j("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.Q),r.Mb(r.L))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class A{constructor(){this.$implicit=null,this.ngIf=null}}function j(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[{provide:O,useClass:I}]}),t})();function N(t){return"server"===t}let M=(()=>{class t{}return t.\u0275prov=Object(r.Ib)({token:t,providedIn:"root",factory:()=>new L(Object(r.Yb)(s),window)}),t})();class L{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class V extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new V,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=B||(B=document.querySelector("base"),B)?B.getAttribute("href"):null;return null==e?null:(n=e,U||(U=document.createElement("a")),U.setAttribute("href",n),"/"===U.pathname.charAt(0)?U.pathname:"/"+U.pathname);var n}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let U,B=null;const q=new r.r("TRANSITION_ID"),H=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[q,s,r.s],multi:!0}];class z{static init(){Object(r.X)(new z)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const G=new r.r("EventManagerPlugins");let Q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(G),r.Yb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class W{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let K=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),$=(()=>{class t extends K{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function X(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?X(t,i,n):(i=i.replace(J,t),n.push(i))}return n}function Z(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let tt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new et(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new nt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new rt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=X(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Q),r.Yb($),r.Yb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class et{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Z(n)):this.eventManager.addEventListener(t,e,Z(n))}}class nt extends et{constructor(t,e,n,r){super(t),this.component=n;const i=X(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(J,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class rt extends et{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=X(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let it=(()=>{class t extends W{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const ot=["alt","control","meta","shift"],st={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},at={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ut=(()=>{class t extends W{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ot.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&at.hasOwnProperty(e)&&(e=at[e]))}return st[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ot.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const lt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){V.makeCurrent(),z.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],ht=Object(r.S)(r.W,"browser",lt),dt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:G,useClass:it,multi:!0,deps:[s,r.A,r.C]},{provide:G,useClass:ut,multi:!0,deps:[s]},[],{provide:tt,useClass:tt,deps:[Q,$,r.c]},{provide:r.F,useExisting:tt},{provide:K,useExisting:$},{provide:$,useClass:$,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:Q,useClass:Q,deps:[G,r.A]},[]];let ft=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:q,useExisting:r.c},H]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(t,12))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:dt,imports:[D,r.f]}),t})();"undefined"!=typeof window&&window;var pt=n("Cfvw"),gt=n("HDdC"),mt=n("DH7j"),yt=n("lJxs"),vt=n("XoHu");function bt(t,e){return new gt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const c=Object(pt.a)(t[a]);let u=!1;n.add(c.subscribe({next:t=>{u||(u=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&u||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class wt{}const _t=new r.r("NgValueAccessor"),Ct={provide:_t,useExisting:Object(r.U)(()=>Tt),multi:!0},St=new r.r("CompositionEventMode");let Tt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l),r.Mb(St,8))},t.\u0275dir=r.Hb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Ct])]}),t})();function Et(t){return null==t||0===t.length}const Ot=new r.r("NgValidators"),It=new r.r("NgAsyncValidators"),xt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function kt(t){return null!=t}function Rt(t){const e=Object(r.rb)(t)?Object(pt.a)(t):t;return Object(r.qb)(e),e}function Pt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function At(t,e){return e.map(e=>e(t))}function jt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Dt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(kt);return 0==e.length?null:function(t){return Pt(At(t,e))}}(jt(t)):null}function Nt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(kt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(mt.a)(e))return bt(e,null);if(Object(vt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return bt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return bt(t=1===t.length&&Object(mt.a)(t[0])?t[0]:t,null).pipe(Object(yt.a)(t=>e(...t)))}return bt(t,null)}(At(t,e).map(Rt)).pipe(Object(yt.a)(Pt))}}(jt(t)):null}function Mt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Lt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Dt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t}),t})(),Ft=(()=>{class t extends Lt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Vt(e||t)},t.\u0275dir=r.Hb({type:t,features:[r.xb]}),t})();const Vt=r.Tb(Ft);class Ut extends Lt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bt{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let qt=(()=>{class t extends Bt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ut,2))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),Ht=(()=>{class t extends Bt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ft,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function zt(t,e){Qt(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Wt(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Wt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Gt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Qt(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Mt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(Mt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Gt(e._rawValidators,n),Gt(e._rawAsyncValidators,n)}}function Wt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Kt(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const $t="VALID",Yt="INVALID",Jt="PENDING",Xt="DISABLED";function Zt(t){return(re(t)?t.validators:t)||null}function te(t){return Array.isArray(t)?Dt(t):t||null}function ee(t,e){return(re(e)?e.asyncValidators:t)||null}function ne(t){return Array.isArray(t)?Nt(t):t||null}function re(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ie{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=te(this._rawValidators),this._composedAsyncValidatorFn=ne(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===$t}get invalid(){return this.status===Yt}get pending(){return this.status==Jt}get disabled(){return this.status===Xt}get enabled(){return this.status!==Xt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=te(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ne(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Jt,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Xt,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=$t,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==$t&&this.status!==Jt||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xt:$t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Jt,this._hasOwnPendingAsyncValidator=!0;const e=Rt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof se?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof ae&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Xt:this.errors?Yt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jt)?Jt:this._anyControlsHaveStatus(Yt)?Yt:$t}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){re(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class oe extends ie{constructor(t=null,e,n){super(Zt(e),ee(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Kt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Kt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class se extends ie{constructor(t,e,n){super(Zt(e),ee(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof oe?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class ae extends ie{constructor(t,e,n){super(Zt(e),ee(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof oe?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const ce={provide:Ft,useExisting:Object(r.U)(()=>le)},ue=(()=>Promise.resolve(null))();let le=(()=>{class t extends Ft{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new se({},Dt(t),Nt(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ue.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),zt(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ue.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Kt(this._directives,t)})}addFormGroup(t){ue.then(()=>{const e=this._findContainer(t.path),n=new se({});(function(t,e){Qt(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ue.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){ue.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ot,10),r.Mb(It,10))},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.bc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([ce]),r.xb]}),t})();const he={provide:Ut,useExisting:Object(r.U)(()=>fe)},de=(()=>Promise.resolve(null))();let fe=(()=>{class t extends Ut{constructor(t,e,n,i){super(),this.control=new oe,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Tt?n=t:Object.getPrototypeOf(t.constructor)===wt?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){de.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;de.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ft,9),r.Mb(Ot,10),r.Mb(It,10),r.Mb(_t,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([he]),r.xb,r.yb]}),t})(),pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const ge={provide:_t,useExisting:Object(r.U)(()=>me),multi:!0};let me=(()=>{class t extends wt{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([ge]),r.xb]}),t})(),ye=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();const ve={provide:Ot,useExisting:Object(r.U)(()=>be),multi:!0};let be=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return Et(t.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([ve])]}),t})();const we={provide:Ot,useExisting:Object(r.U)(()=>_e),multi:!0};let _e=(()=>{class t{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?function(t){return Et(t.value)||xt.test(t.value)?null:{email:!0}}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[r.zb([we])]}),t})(),Ce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[ye]]}),t})(),Se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[Ce]}),t})();var Te=n("LRne"),Ee=n("XNiG"),Oe=n("9ppp");class Ie extends Ee.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Oe.a;return this._value}next(t){super.next(this._value=t)}}var xe=n("z+Ro"),ke=n("7o/Q");class Re extends ke.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Pe extends ke.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ae=n("SeVD");function je(t,e,n,r,i=new Pe(t,n,r)){if(!i.closed)return e instanceof gt.a?e.subscribe(i):Object(Ae.a)(e)(i)}var De=n("yCtX");const Ne={};class Me{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Le(t,this.resultSelector))}}class Le extends Re{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ne),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(je(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ne?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Fe=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Ve=n("bHdf");function Ue(...t){return Object(Ve.a)(1)(Object(Te.a)(...t))}var Be=n("EY2u");function qe(t){return new gt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(pt.a)(n):Object(Be.b)()).subscribe(e)})}var He=n("EQ5u"),ze=n("zx2A");function Ge(t,e){return"function"==typeof e?n=>n.pipe(Ge((n,r)=>Object(pt.a)(t(n,r)).pipe(Object(yt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Qe(t))}class Qe{constructor(t){this.project=t}call(t,e){return e.subscribe(new We(t,this.project))}}class We extends ze.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ze.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(ze.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ke=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function $e(t){return e=>0===t?Object(Be.b)():e.lift(new Ye(t))}class Ye{constructor(t){if(this.total=t,this.total<0)throw new Ke}call(t,e){return e.subscribe(new Je(t,this.total))}}class Je extends ke.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Xe(...t){const e=t[t.length-1];return Object(xe.a)(e)?(t.pop(),n=>Ue(t,n,e)):e=>Ue(t,e)}function Ze(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new tn(t,e,n))}}class tn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new en(t,this.accumulator,this.seed,this.hasSeed))}}class en extends ke.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function nn(t,e){return function(n){return n.lift(new rn(t,e))}}class rn{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new on(t,this.predicate,this.thisArg))}}class on extends ke.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function sn(t){return function(e){const n=new an(t),r=e.lift(n);return n.caught=r}}class an{constructor(t){this.selector=t}call(t,e){return e.subscribe(new cn(t,this.selector,this.caught))}}class cn extends ze.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ze.a(this);this.add(r);const i=Object(ze.c)(n,r);i!==r&&this.add(i)}}}var un=n("5+tZ");function ln(t,e){return Object(un.a)(t,e,1)}function hn(t){return function(e){return 0===t?Object(Be.b)():e.lift(new dn(t))}}class dn{constructor(t){if(this.total=t,this.total<0)throw new Ke}call(t,e){return e.subscribe(new fn(t,this.total))}}class fn extends ke.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function pn(t=yn){return e=>e.lift(new gn(t))}class gn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new mn(t,this.errorFactory))}}class mn extends ke.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Ub){t=Ub}this.destination.error(t)}}}function yn(){return new Fe}function vn(t=null){return e=>e.lift(new bn(t))}class bn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new wn(t,this.defaultValue))}}class wn extends ke.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var _n=n("SpAZ");function Cn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?nn((e,n)=>t(e,n,r)):_n.a,$e(1),n?vn(e):pn(()=>new Fe))}var Sn=n("vkgz"),Tn=n("x+ZX"),En=n("quSY");class On{constructor(t){this.callback=t}call(t,e){return e.subscribe(new In(t,this.callback))}}class In extends ke.a{constructor(t,e){super(t),this.add(new En.a(e))}}class xn{constructor(t,e){this.id=t,this.url=e}}class kn extends xn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rn extends xn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pn extends xn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class An extends xn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jn extends xn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn extends xn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nn extends xn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mn extends xn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ln extends xn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Un{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gn="primary";class Qn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Wn(t){return new Qn(t)}function Kn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function $n(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Yn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Jn(t[i],e[i]))return!1;return!0}function Jn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Xn(t){return Array.prototype.concat.apply([],t)}function Zn(t){return t.length>0?t[t.length-1]:null}function tr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function er(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(pt.a)(Promise.resolve(t)):Object(Te.a)(t)}function nr(t,e,n){return n?function(t,e){return Yn(t,e)}(t.queryParams,e.queryParams)&&rr(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Jn(t[n],e[n]))}(t.queryParams,e.queryParams)&&ir(t.root,e.root)}function rr(t,e){if(!ur(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!rr(t.children[n],e.children[n]))return!1}return!0}function ir(t,e){return or(t,e,e.segments)}function or(t,e,n){if(t.segments.length>n.length)return!!ur(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!ur(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ir(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!ur(t.segments,r)&&!!t.children.primary&&or(t.children.primary,e,i)}}class sr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wn(this.queryParams)),this._queryParamMap}toString(){return dr.serialize(this)}}class ar{constructor(t,e){this.segments=t,this.children=e,this.parent=null,tr(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fr(this)}}class cr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Wn(this.parameters)),this._parameterMap}toString(){return wr(this)}}function ur(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class lr{}class hr{parse(t){const e=new Er(t);return new sr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${pr(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${mr(e)}=${mr(t)}`).join("&"):`${mr(e)}=${mr(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const dr=new hr;function fr(t){return t.segments.map(t=>wr(t)).join("/")}function pr(t,e){if(!t.hasChildren())return fr(t);if(e){const e=t.children.primary?pr(t.children.primary,!1):"",n=[];return tr(t.children,(t,e)=>{e!==Gn&&n.push(`${e}:${pr(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return tr(t.children,(t,r)=>{r===Gn&&(n=n.concat(e(t,r)))}),tr(t.children,(t,r)=>{r!==Gn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Gn?[pr(t.children.primary,!1)]:[`${n}:${pr(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${fr(t)}/${e[0]}`:`${fr(t)}/(${e.join("//")})`}}function gr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(t){return gr(t).replace(/%3B/gi,";")}function yr(t){return gr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vr(t){return decodeURIComponent(t)}function br(t){return vr(t.replace(/\+/g,"%20"))}function wr(t){return`${yr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${yr(t)}=${yr(e[t])}`).join("")}`;var e}const _r=/^[^\/()?;=#]+/;function Cr(t){const e=t.match(_r);return e?e[0]:""}const Sr=/^[^=?&#]+/,Tr=/^[^?&#]+/;class Er{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ar([],{}):new ar([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ar(t,e)),n}parseSegment(){const t=Cr(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new cr(vr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Cr(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Cr(this.remaining);t&&(n=t,this.capture(n))}t[vr(e)]=vr(n)}parseQueryParam(t){const e=function(t){const e=t.match(Sr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Tr);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=br(e),i=br(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Cr(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Gn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new ar([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Or{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ir(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ir(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=xr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return xr(t,this._root).map(t=>t.value)}}function Ir(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ir(t,n);if(e)return e}return null}function xr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=xr(t,n);if(r.length)return r.unshift(e),r}return[]}class kr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Rr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Pr extends Or{constructor(t,e){super(t),this.snapshot=e,Lr(this,t)}toString(){return this.snapshot.toString()}}function Ar(t,e){const n=function(t,e){const n=new Nr([],{},{},"",{},Gn,e,null,t.root,-1,{});return new Mr("",new kr(n,[]))}(t,e),r=new Ie([new cr("",{})]),i=new Ie({}),o=new Ie({}),s=new Ie({}),a=new Ie(""),c=new jr(r,i,s,a,o,Gn,e,n.root);return c.snapshot=n.root,new Pr(new kr(c,[]),n)}class jr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(yt.a)(t=>Wn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(yt.a)(t=>Wn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Nr{constructor(t,e,n,r,i,o,s,a,c,u,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mr extends Or{constructor(t,e){super(e),this.url=t,Lr(this,e)}toString(){return Fr(this._root)}}function Lr(t,e){e.value._routerState=t,e.children.forEach(e=>Lr(t,e))}function Fr(t){const e=t.children.length>0?` { ${t.children.map(Fr).join(", ")} } `:"";return`${t.value}${e}`}function Vr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Yn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Yn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ur(t,e){return Yn(t.params,e.params)&&function(t,e){return ur(t,e)&&t.every((t,n)=>Yn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Ur(t.parent,e.parent))}function Br(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Br(t,e,r);return Br(t,e)})}(t,e,n);return new kr(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return qr(e,t),t}{const n=new jr(new Ie((r=e.value).url),new Ie(r.params),new Ie(r.queryParams),new Ie(r.fragment),new Ie(r.data),r.outlet,r.component,r),i=e.children.map(e=>Br(t,e));return new kr(n,i)}}var r}function qr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)qr(t.children[n],e.children[n])}function Hr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function zr(t){return"object"==typeof t&&null!=t&&t.outlets}function Gr(t,e,n,r,i){let o={};return r&&tr(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new sr(n.root===t?e:Qr(n.root,t,e),o,i)}function Qr(t,e,n){const r={};return tr(t.children,(t,i)=>{r[i]=t===e?n:Qr(t,e,n)}),new ar(t.segments,r)}class Wr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Hr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(zr);if(r&&r!==Zn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function $r(t,e,n){if(t||(t=new ar([],{})),0===t.segments.length&&t.hasChildren())return Yr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(zr(s))break;const a=`${s}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!ti(a,c,e))return o;r+=2}else{if(!ti(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ar(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ar(t.segments.slice(r.pathIndex),t.children),Yr(e,0,i)}return r.match&&0===i.length?new ar(t.segments,{}):r.match&&!t.hasChildren()?Jr(t,e,n):r.match?Yr(t,0,i):Jr(t,e,n)}function Yr(t,e,n){if(0===n.length)return new ar(t.segments,{});{const r=function(t){return zr(t[0])?t[0].outlets:{[Gn]:t}}(n),i={};return tr(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=$r(t.children[r],e,n))}),tr(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ar(t.segments,i)}}function Jr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(zr(o)){const t=Xr(o.outlets);return new ar(r,t)}if(0===i&&Hr(n[0])){r.push(new cr(t.segments[e].path,Zr(n[0]))),i++;continue}const s=zr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Hr(a)?(r.push(new cr(s,Zr(a))),i+=2):(r.push(new cr(s,{})),i++)}return new ar(r,{})}function Xr(t){const e={};return tr(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Jr(new ar([],{}),0,t))}),e}function Zr(t){const e={};return tr(t,(t,n)=>e[n]=`${t}`),e}function ti(t,e,n){return t==n.path&&Yn(e,n.parameters)}class ei{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Vr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Rr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),tr(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Rr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Rr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Hn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Bn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Vr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ni(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ni(t){Vr(t.value),t.children.forEach(ni)}class ri{constructor(t,e){this.routes=t,this.module=e}}function ii(t){return"function"==typeof t}function oi(t){return t instanceof sr}const si=Symbol("INITIAL_VALUE");function ai(){return Ge(t=>function(...t){let e,n;return Object(xe.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(mt.a)(t[0])&&(t=t[0]),Object(De.a)(t,n).lift(new Me(e))}(t.map(t=>t.pipe($e(1),Xe(si)))).pipe(Ze((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==si)return t;if(r===si&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||oi(r))return r}return t},t)},si),nn(t=>t!==si),Object(yt.a)(t=>oi(t)?t:!0===t),$e(1)))}let ci=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:function(){return[eo]},encapsulation:2}),t})();function ui(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];li(r,hi(e,r))}}function li(t,e){t.children&&ui(t.children,e)}function hi(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function di(t){const e=t.children&&t.children.map(di),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Gn&&(n.component=ci),n}function fi(t){return t.outlet||Gn}function pi(t,e){const n=t.filter(t=>fi(t)===e);return n.push(...t.filter(t=>fi(t)!==e)),n}const gi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function mi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},gi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$n)(n,t,e);if(!i)return Object.assign({},gi);const o={};tr(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function yi(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>vi(t,e,n)&&fi(n)!==Gn)}(t,n,r)){const i=new ar(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&fi(o)!==Gn){const n=new ar([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[fi(o)]=n}return i}(t,e,r,new ar(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>vi(t,e,n))}(t,n,r)){const o=new ar(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(vi(t,n,a)&&!i[fi(a)]){const n=new ar([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[fi(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new ar(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function vi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function bi(t,e,n,r){return!!(fi(t)===r||r!==Gn&&vi(e,n,t))&&("**"===t.path||mi(e,t,n).matched)}function wi(t,e,n){return 0===e.length&&!t.children[n]}class _i{constructor(t){this.segmentGroup=t||null}}class Ci{constructor(t){this.urlTree=t}}function Si(t){return new gt.a(e=>e.error(new _i(t)))}function Ti(t){return new gt.a(e=>e.error(new Ci(t)))}function Ei(t){return new gt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Oi{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=yi(this.urlTree.root,[],[],this.config).segmentGroup,e=new ar(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Gn).pipe(Object(yt.a)(t=>this.createUrlTree(Ii(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sn(t=>{if(t instanceof Ci)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof _i)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Gn).pipe(Object(yt.a)(e=>this.createUrlTree(Ii(e),t.queryParams,t.fragment))).pipe(sn(t=>{if(t instanceof _i)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ar([],{[Gn]:t}):t;return new sr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(yt.a)(t=>new ar([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(pt.a)(r).pipe(ln(r=>{const i=n.children[r],o=pi(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(yt.a)(t=>({segment:t,outlet:r})))}),Ze((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?nn((e,n)=>t(e,n,r)):_n.a,hn(1),n?vn(e):pn(()=>new Fe))}())}expandSegment(t,e,n,r,i,o){return Object(pt.a)(n).pipe(ln(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(sn(t=>{if(t instanceof _i)return Object(Te.a)(null);throw t}))),Cn(t=>!!t),sn((t,n)=>{if(t instanceof Fe||"EmptyError"===t.name){if(wi(e,r,i))return Object(Te.a)(new ar([],{}));throw new _i(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return bi(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Si(e):Si(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ti(i):this.lineralizeSegments(n,i).pipe(Object(un.a)(n=>{const i=new ar(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=mi(e,r,i);if(!s)return Si(e);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?Ti(l):this.lineralizeSegments(r,l).pipe(Object(un.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Te.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(yt.a)(t=>(n._loadedConfig=t,new ar(r,{})))):Object(Te.a)(new ar(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=mi(e,n,r);if(!o)return Si(e);const c=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(un.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:u}=yi(e,s,c,o),l=new ar(a.segments,a.children);if(0===u.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(yt.a)(t=>new ar(s,t)));if(0===o.length&&0===u.length)return Object(Te.a)(new ar(s,{}));const h=fi(n)===i;return this.expandSegment(r,l,o,u,h?Gn:i,!0).pipe(Object(yt.a)(t=>new ar(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Te.a)(new ri(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Te.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(un.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(yt.a)(t=>(e._loadedConfig=t,t))):function(t){return new gt.a(e=>e.error(Kn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Te.a)(new ri([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Te.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ii(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ii(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return er(o)});return Object(Te.a)(i).pipe(ai(),Object(Sn.a)(t=>{if(!oi(t))return;const e=Kn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(yt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Te.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Ei(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new sr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return tr(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return tr(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new ar(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ii(t){const e={};for(const n of Object.keys(t.children)){const r=Ii(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ar(t.segments.concat(e.segments),e.children)}return t}(new ar(t.segments,e))}class xi{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ki{constructor(t,e){this.component=t,this.route=e}}function Ri(t,e,n){const r=t._root;return Ai(r,e?e._root:null,n,[r.value])}function Pi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ai(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Rr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ur(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ur(t.url,e.url)||!Yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ur(t,e)||!Yn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ur(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new xi(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ai(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ki(a.outlet.component,s))}else s&&ji(e,a,i),i.canActivateChecks.push(new xi(r)),Ai(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),tr(o,(t,e)=>ji(t,n.getContext(e),i)),i}function ji(t,e,n){const r=Rr(t),i=t.value;tr(r,(t,r)=>{ji(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ki(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Di{}function Ni(t){return new gt.a(e=>e.error(t))}class Mi{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=yi(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Gn);if(null===e)return null;const n=new Nr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new kr(n,e),i=new Mr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Dr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=pi(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Li(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Gn?-1:e.value.outlet===Gn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return wi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!bi(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Zn(n).parameters:{};i=new Nr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ui(t),fi(t),t.component,t,Fi(e),Vi(e)+n.length,Bi(t))}else{const r=mi(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Nr(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ui(t),fi(t),t.component,t,Fi(e),Vi(e)+o.length,Bi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=yi(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const t=this.processChildren(a,c);return null===t?null:[new kr(i,t)]}if(0===a.length&&0===u.length)return[new kr(i,[])];const l=fi(t)===r,h=this.processSegment(a,c,u,l?Gn:r);return null===h?null:[new kr(i,h)]}}function Li(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Fi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Vi(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ui(t){return t.data||{}}function Bi(t){return t.resolve||{}}function qi(t){return Ge(e=>{const n=t(e);return n?Object(pt.a)(n).pipe(Object(yt.a)(()=>e)):Object(Te.a)(e)})}class Hi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const zi=new r.r("ROUTES");class Gi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(yt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ri(Xn(i.injector.get(zi,void 0,r.q.Self|r.q.Optional)).map(di),i)}),sn(t=>{throw e._loader$=void 0,t}));return e._loader$=new He.a(n,()=>new Ee.a).pipe(Object(Tn.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(pt.a)(this.loader.load(t)):er(t()).pipe(Object(un.a)(t=>t instanceof r.w?Object(Te.a)(t):Object(pt.a)(this.compiler.compileModuleAsync(t))))}}class Qi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wi,this.attachRef=null}}class Wi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Qi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Ki{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function $i(t){throw t}function Yi(t,e,n){return e.parse("/")}function Ji(t,e){return Object(Te.a)(null)}let Xi=(()=>{class t{constructor(t,e,n,i,o,s,a,c){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Ee.a,this.errorHandler=$i,this.malformedUriErrorHandler=Yi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ji,afterPreactivation:Ji},this.urlHandlingStrategy=new Ki,this.routeReuseStrategy=new Hi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const u=o.get(r.A);this.isNgZoneEnabled=u instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new sr(new ar([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Gi(s,a,t=>this.triggerEvent(new Fn(t)),t=>this.triggerEvent(new Vn(t))),this.routerState=Ar(this.currentUrlTree,this.rootComponentType),this.transitions=new Ie({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(nn(t=>0!==t.id),Object(yt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ge(t=>{let n=!1,r=!1;return Object(Te.a)(t).pipe(Object(Sn.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ge(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Te.a)(t).pipe(Ge(t=>{const n=this.transitions.getValue();return e.next(new kn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Be.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Ge(t=>function(t,e,n,r,i){return new Oi(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(yt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Sn.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(un.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Mi(t,e,n,r,i,o).recognize();return null===s?Ni(new Di):Object(Te.a)(s)}catch(Ub){return Ni(Ub)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(yt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Sn.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new jn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new kn(n,this.serializeUrl(r),i,o);e.next(a);const c=Ar(r,this.rootComponentType).snapshot;return Object(Te.a)(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Be.a}),qi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Sn.a)(t=>{const e=new Dn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(yt.a)(t=>Object.assign(Object.assign({},t),{guards:Ri(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(un.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Te.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(pt.a)(t).pipe(Object(un.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Te.a)(!0);const s=o.map(o=>{const s=Pi(o,e,i);let a;if(function(t){return t&&ii(t.canDeactivate)}(s))a=er(s.canDeactivate(t,e,n,r));else{if(!ii(s))throw new Error("Invalid CanDeactivate guard");a=er(s(t,e,n,r))}return a.pipe(Cn())});return Object(Te.a)(s).pipe(ai())}(t.component,t.route,n,e,r)),Cn(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(un.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(pt.a)(e).pipe(ln(e=>Ue(function(t,e){return null!==t&&e&&e(new Un(t)),Object(Te.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new qn(t)),Object(Te.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>qe(()=>{const i=e.guards.map(i=>{const o=Pi(i,e.node,n);let s;if(function(t){return t&&ii(t.canActivateChild)}(o))s=er(o.canActivateChild(r,t));else{if(!ii(o))throw new Error("Invalid CanActivateChild guard");s=er(o(r,t))}return s.pipe(Cn())});return Object(Te.a)(i).pipe(ai())}));return Object(Te.a)(i).pipe(ai())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Te.a)(!0);const i=r.map(r=>qe(()=>{const i=Pi(r,e,n);let o;if(function(t){return t&&ii(t.canActivate)}(i))o=er(i.canActivate(e,t));else{if(!ii(i))throw new Error("Invalid CanActivate guard");o=er(i(e,t))}return o.pipe(Cn())}));return Object(Te.a)(i).pipe(ai())}(t,e.route,n))),Cn(t=>!0!==t,!0))}(r,o,t,e):Object(Te.a)(n)),Object(yt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Sn.a)(t=>{if(oi(t.guardsResult)){const e=Kn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Nn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),nn(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Pn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),qi(t=>{if(t.guards.canActivateChecks.length)return Object(Te.a)(t).pipe(Object(Sn.a)(t=>{const e=new Mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ge(t=>{let n=!1;return Object(Te.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(un.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Te.a)(t);let o=0;return Object(pt.a)(n).pipe(ln(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Te.a)({});const o={};return Object(pt.a)(i).pipe(Object(un.a)(i=>function(t,e,n,r){const i=Pi(t,e,r);return er(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Sn.a)(t=>{o[i]=t}))),hn(1),Object(un.a)(()=>Object.keys(o).length===i.length?Object(Te.a)(o):Be.a))}(t._resolve,t,e,r).pipe(Object(yt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Dr(t,n).resolve),null)))}(t.route,e,r,i)),Object(Sn.a)(()=>o++),hn(1),Object(un.a)(e=>o===n.length?Object(Te.a)(t):Be.a))})),Object(Sn.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Pn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Sn.a)(t=>{const e=new Ln(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),qi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(yt.a)(t=>{const e=function(t,e,n){const r=Br(t,e._root,n?n._root:void 0);return new Pr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Sn.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(yt.a)(t=>(new ei(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Sn.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Pn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new On(i))),sn(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=oi(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Pn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new An(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ph){t.reject(ph)}}var i;return Be.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ui(t),this.config=t.map(di),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return Gr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Wr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return tr(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Wr(n,e,r)}(n);if(o.toRoot())return Gr(e.root,new ar([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Kr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Kr(t,t===e.root,0)}const r=Hr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Kr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Yr(s.segmentGroup,s.index,o.commands):$r(s.segmentGroup,s.index,o.commands);return Gr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){const n=oi(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Ub){e=this.malformedUriErrorHandler(Ub,this.urlSerializer,t)}return e}isActive(t,e){if(oi(t))return nr(this.currentUrlTree,t,e);const n=this.parseUrl(t);return nr(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Rn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let c,u,l;i?(c=i.resolve,u=i.reject,l=i.promise):l=new Promise((t,e)=>{c=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.N),r.Yb(lr),r.Yb(Wi),r.Yb(_),r.Yb(r.s),r.Yb(r.x),r.Yb(r.i),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Zi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Ee.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:to(this.skipLocationChange),replaceUrl:to(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:to(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Xi),r.Mb(jr),r.Zb("tabindex"),r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.bc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function to(t){return""===t||!!t}let eo=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Gn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new no(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Wi),r.Mb(r.Q),r.Mb(r.j),r.Zb("name"),r.Mb(r.h))},t.\u0275dir=r.Hb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class no{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===jr?this.route:t===Wi?this.childContexts:this.parent.get(t,e)}}class ro{}class io{preload(t,e){return Object(Te.a)(null)}}let oo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Gi(e,n,e=>t.triggerEvent(new Fn(e)),e=>t.triggerEvent(new Vn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(nn(t=>t instanceof Rn),ln(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(pt.a)(n).pipe(Object(Ve.a)(),Object(yt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(Te.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(un.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Xi),r.Yb(r.x),r.Yb(r.i),r.Yb(r.s),r.Yb(ro))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),so=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new zn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Xi),r.Yb(M),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const ao=new r.r("ROUTER_CONFIGURATION"),co=new r.r("ROUTER_FORROOT_GUARD"),uo=[_,{provide:lr,useClass:hr},{provide:Xi,useFactory:function(t,e,n,r,i,s,a,c={},u,l){const h=new Xi(null,t,e,n,r,i,s,Xn(a));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(c,h),c.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[lr,Wi,_,r.s,r.x,r.i,zi,ao,[class{},new r.B],[class{},new r.B]]},Wi,{provide:jr,useFactory:function(t){return t.routerState.root},deps:[Xi]},{provide:r.x,useClass:r.K},oo,io,class{preload(t,e){return e().pipe(sn(()=>Object(Te.a)(null)))}},{provide:ao,useValue:{enableTracing:!1}}];function lo(){return new r.z("Router",Xi)}let ho=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[uo,mo(e),{provide:co,useFactory:go,deps:[[Xi,new r.B,new r.J]]},{provide:ao,useValue:n||{}},{provide:m,useFactory:po,deps:[a,[new r.p(v),new r.B],ao]},{provide:so,useFactory:fo,deps:[Xi,M,ao]},{provide:ro,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:io},{provide:r.z,multi:!0,useFactory:lo},[yo,{provide:r.d,multi:!0,useFactory:vo,deps:[yo]},{provide:wo,useFactory:bo,deps:[yo]},{provide:r.b,multi:!0,useExisting:wo}]]}}static forChild(e){return{ngModule:t,providers:[mo(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(co,8),r.Yb(Xi,8))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();function fo(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new so(t,e,n)}function po(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function go(t){return"guarded"}function mo(t){return[{provide:r.a,multi:!0,useValue:t},{provide:zi,multi:!0,useValue:t}]}let yo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Ee.a}appInitializer(){return this.injector.get(u,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Xi),r=this.injector.get(ao);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Te.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ao),n=this.injector.get(oo),i=this.injector.get(so),o=this.injector.get(Xi),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function vo(t){return t.appInitializer.bind(t)}function bo(t){return t.bootstrapListener.bind(t)}const wo=new r.r("Router Initializer");var _o=n("Jgta"),Co=n("D0XW");function So(){return t=>t.lift(new To)}class To{call(t,e){return e.subscribe(new Eo(t))}}class Eo extends ke.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class Oo{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Io(t,this.compare,this.keySelector))}}class Io extends ke.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var xo=n("pxpQ"),ko=n("spgP"),Ro=n("zIRd"),Po=n("qOnz"),Ao=n("q/0M"),jo=function(t,e){return(jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Do(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var No,Mo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lo=Lo||{},Fo=Mo||self;function Vo(){}function Uo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Bo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var qo="closure_uid_"+(1e9*Math.random()>>>0),Ho=0;function zo(t,e,n){return t.call.apply(t.bind,arguments)}function Go(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Qo(t,e,n){return(Qo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zo:Go).apply(null,arguments)}function Wo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ko(){return Date.now()}function $o(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Yo(){this.j=this.j,this.i=this.i}Yo.prototype.j=!1,Yo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,qo)&&t[qo]||(t[qo]=++Ho)}(this)},Yo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Jo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Xo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Zo(t){return Array.prototype.concat.apply([],arguments)}function ts(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function es(t){return/^[\s\xa0]*$/.test(t)}var ns,rs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function is(t,e){return-1!=t.indexOf(e)}function os(t,e){return t<e?-1:t>e?1:0}t:{var ss=Fo.navigator;if(ss){var as=ss.userAgent;if(as){ns=as;break t}}ns=""}function cs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function us(t){var e={};for(var n in t)e[n]=t[n];return e}var ls="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ls.length;o++)n=ls[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ds(t){return ds[" "](t),t}ds[" "]=Vo;var fs,ps,gs=is(ns,"Opera"),ms=is(ns,"Trident")||is(ns,"MSIE"),ys=is(ns,"Edge"),vs=ys||ms,bs=is(ns,"Gecko")&&!(is(ns.toLowerCase(),"webkit")&&!is(ns,"Edge"))&&!(is(ns,"Trident")||is(ns,"MSIE"))&&!is(ns,"Edge"),ws=is(ns.toLowerCase(),"webkit")&&!is(ns,"Edge");function _s(){var t=Fo.document;return t?t.documentMode:void 0}t:{var Cs="",Ss=(ps=ns,bs?/rv:([^\);]+)(\)|;)/.exec(ps):ys?/Edge\/([\d\.]+)/.exec(ps):ms?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ps):ws?/WebKit\/(\S+)/.exec(ps):gs?/(?:Version)[ \/]?(\S+)/.exec(ps):void 0);if(Ss&&(Cs=Ss?Ss[1]:""),ms){var Ts=_s();if(null!=Ts&&Ts>parseFloat(Cs)){fs=String(Ts);break t}}fs=Cs}var Es={};function Os(t){return function(t,e){var n=Es;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=rs(String(fs)).split("."),r=rs(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=os(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||os(0==s[2].length,0==a[2].length)||os(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Is=Fo.document&&ms&&(_s()||parseInt(fs,10))||void 0,xs=!ms||9<=Number(Is),ks=ms&&!Os("9"),Rs=function(){if(!Fo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Fo.addEventListener("test",Vo,e),Fo.removeEventListener("test",Vo,e)}catch(n){}return t}();function Ps(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function As(t,e){if(Ps.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(bs){t:{try{ds(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:js[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ps.prototype.b=function(){this.defaultPrevented=!0},$o(As,Ps);var js={2:"touch",3:"pen",4:"mouse"};As.prototype.b=function(){As.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ks)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ds="closure_listenable_"+(1e6*Math.random()|0),Ns=0;function Ms(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ns,this.Y=this.Z=!1}function Ls(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Fs(t){this.src=t,this.a={},this.b=0}function Vs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Jo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ls(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Us(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Fs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Us(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ms(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Bs="closure_lm_"+(1e6*Math.random()|0),qs={};function Hs(t,e,n,r,i){if(r&&r.once)return Gs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Hs(t,e[o],n,r,i);return null}return n=Zs(n),t&&t[Ds]?t.va(e,n,Bo(r)?!!r.capture:!!r,i):zs(t,e,n,!1,r,i)}function zs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Bo(i)?!!i.capture:!!i;if(s&&!xs)return null;var a=Js(t);if(a||(t[Bs]=a=new Fs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ys,e=xs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Rs||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ks(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Gs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Gs(t,e[o],n,r,i);return null}return n=Zs(n),t&&t[Ds]?t.wa(e,n,Bo(r)?!!r.capture:!!r,i):zs(t,e,n,!0,r,i)}function Qs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Qs(t,e[o],n,r,i);else r=Bo(r)?!!r.capture:!!r,n=Zs(n),t&&t[Ds]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Us(o=t.a[e],n,r,i))&&(Ls(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Js(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Us(e,n,r,i)),(n=-1<t?e[t]:null)&&Ws(n))}function Ws(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ds])Vs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ks(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Js(e))?(Vs(n,t),0==n.b&&(n.src=null,e[Bs]=null)):Ls(t)}}}function Ks(t){return t in qs?qs[t]:qs[t]="on"+t}function $s(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ws(t),n.call(r,e)}function Ys(t,e){if(t.Y)return!0;if(!xs){if(!e)t:{e=["window","event"];for(var n=Fo,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return $s(t,e=new As(e,this))}return $s(t,new As(e,this))}function Js(t){return(t=t[Bs])instanceof Fs?t:null}var Xs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zs(t){return"function"==typeof t?t:(t[Xs]||(t[Xs]=function(e){return t.handleEvent(e)}),t[Xs])}function ta(){Yo.call(this),this.c=new Fs(this),this.J=this,this.C=null}function ea(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ps(e,t);else if(e instanceof Ps)e.target=e.target||t;else{var i=e;hs(e=new Ps(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=na(s,r,!0,e)&&i}if(i=na(s=e.a=t,r,!0,e)&&i,i=na(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=na(s=e.a=n[o],r,!1,e)&&i}function na(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,c=s.ca||s.src;s.Z&&Vs(t.c,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}$o(ta,Yo),ta.prototype[Ds]=!0,(No=ta.prototype).addEventListener=function(t,e,n,r){Hs(this,t,e,n,r)},No.removeEventListener=function(t,e,n,r){Qs(this,t,e,n,r)},No.G=function(){if(ta.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ls(n[r]);delete e.a[t],e.b--}}this.C=null},No.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},No.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ra=Fo.JSON.stringify;function ia(){this.b=this.a=null}var oa,sa=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ca},function(t){t.reset()});function aa(){var t=da,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ca(){this.next=this.b=this.a=null}function ua(t){Fo.setTimeout(function(){throw t},0)}function la(t,e){oa||function(){var t=Fo.Promise.resolve(void 0);oa=function(){t.then(fa)}}(),ha||(oa(),ha=!0),da.add(t,e)}ia.prototype.add=function(t,e){var n=sa.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ca.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ca.prototype.reset=function(){this.next=this.b=this.a=null};var ha=!1,da=new ia;function fa(){for(var t;t=aa();){try{t.a.call(t.b)}catch(n){ua(n)}var e=sa;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ha=!1}function pa(t,e){ta.call(this),this.b=t||1,this.a=e||Fo,this.f=Qo(this.Za,this),this.g=Ko()}function ga(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ma(t,e,n){if("function"==typeof t)n&&(t=Qo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Fo.setTimeout(t,e||0)}function ya(t){t.a=ma(function(){t.a=null,t.c&&(t.c=!1,ya(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}$o(pa,ta),(No=pa.prototype).aa=!1,No.M=null,No.Za=function(){if(this.aa){var t=Ko()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ea(this,"tick"),this.aa&&(ga(this),this.start()))}},No.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ko())},No.G=function(){pa.X.G.call(this),ga(this),delete this.a};var va=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}jo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ya(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Fo.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Yo);function ba(t){Yo.call(this),this.b=t,this.a={}}$o(ba,Yo);var wa=[];function _a(t,e,n,r){Array.isArray(n)||(n&&(wa[0]=n.toString()),n=wa);for(var i=0;i<n.length;i++){var o=Hs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ca(t){cs(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ws(t)},t),t.a={}}function Sa(){this.a=!0}function Ta(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ra(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ba.prototype.G=function(){ba.X.G.call(this),Ca(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sa.prototype.info=function(){};var Ea={},Oa=null;function Ia(){return Oa=Oa||new ta}function xa(t){Ps.call(this,Ea.Fa,t)}function ka(t){var e=Ia();ea(e,new xa(e,t))}function Ra(t,e){Ps.call(this,Ea.STAT_EVENT,t),this.stat=e}function Pa(t){var e=Ia();ea(e,new Ra(e,t))}function Aa(t){Ps.call(this,Ea.Ga,t)}function ja(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Fo.setTimeout(function(){t()},e)}Ea.Fa="serverreachability",$o(xa,Ps),Ea.STAT_EVENT="statevent",$o(Ra,Ps),Ea.Ga="timingevent",$o(Aa,Ps);var Da={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Na={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ma(){}function La(){}Ma.prototype.a=null;var Fa,Va={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ua(){Ps.call(this,"d")}function Ba(){Ps.call(this,"c")}function qa(){}function Ha(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ba(this),this.P=za,this.R=new pa(t=vs?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}$o(Ua,Ps),$o(Ba,Ps),$o(qa,Ma),Fa=new qa;var za=45e3,Ga={},Qa={};function Wa(t,e,n){t.H=1,t.i=gc(uc(e)),t.j=n,t.I=!0,Ka(t,null)}function Ka(t,e){t.u=Ko(),Ja(t),t.l=uc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),xc(n.b,"t",r),t.D=0,t.a=Cu(t.g,t.g.C?e:null),0<t.O&&(t.F=new va(Qo(t.Ca,t,t.a),t.O)),_a(t.J,t.a,"readystatechange",t.Xa),e=t.B?us(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ka(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function $a(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ya(t,n);if(i==Qa){4==e&&(t.h=4,Pa(14),r=!1),Ta(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ga){t.h=4,Pa(15),Ta(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ta(t.c,t.f,i,null),nc(t,i)}4==e&&0==n.length&&(t.h=1,Pa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),pu(e),e.F=!0,Pa(11))):(Ta(t.c,t.f,n,"[Invalid Chunked Response]"),ec(t),tc(t))}function Ya(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Qa:(n=Number(e.substring(n,r)),isNaN(n)?Ga:(r+=1)+n>e.length?Qa:(e=e.substr(r,n),t.D=r+n,e))}function Ja(t){t.T=Ko()+t.P,Xa(t,t.P)}function Xa(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ja(Qo(t.Va,t),e)}function Za(t){t.o&&(Fo.clearTimeout(t.o),t.o=null)}function tc(t){0==t.g.v||t.A||yu(t.g,t)}function ec(t){Za(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ga(t.R),Ca(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function nc(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Nc(n.b,t)))if(n.I=t.N,!t.C&&Nc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(ob){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;mu(n),ou(n)}fu(n),Pa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ja(Qo(n.Sa,n),6e3));if(1>=Dc(n.b)&&n.ea){try{n.ea()}catch(ob){}n.ea=void 0}}else bu(n,11)}else if((t.C||n.a==t)&&mu(n),!es(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var c=1.5*a;n.D=c,n.c.info("backChannelRequestTimeoutMs_="+c)}c=n;var u=t.a;if(u){var l=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=c.b;!h.a&&(is(l,"spdy")||is(l,"quic")||is(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Mc(h,h.b),h.b=null))}if(c.A){var d=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(c.na=d,pc(c.B,c.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ko()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((c=n).la=_u(c,c.C?c.ga:null,c.fa),f.C){Lc(c.b,f);var p=f,g=c.D;g&&p.setTimeout(g),p.o&&(Za(p),Ja(p)),c.a=f}else du(c);0<n.g.length&&cu(n)}else"stop"!=i[0]&&"close"!=i[0]||bu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?bu(n,7):iu(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ka(4)}catch(ob){}}function rc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Uo(t)||"string"==typeof t)Xo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Uo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Uo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ic(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ic)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function oc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];sc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)sc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function sc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(No=Ha.prototype).setTimeout=function(t){this.P=t},No.Xa=function(t){t=t.target;var e=this.F;e&&3==tu(t)?e.f():this.Ca(t)},No.Ca=function(t){try{if(t==this.a)t:{var e=tu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!vs&&!this.a.$())){this.A||4!=e||7==n||ka(8==n||0>=r?3:2),Za(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!es(s)){var c=s;break e}}c=null}if(!c){this.b=!1,this.h=3,Pa(12),ec(this),tc(this);break t}Ta(this.c,this.f,c,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,nc(this,c)}this.I?($a(this,e,o),vs&&this.b&&3==e&&(_a(this.J,this.R,"tick",this.Wa),this.R.start())):(Ta(this.c,this.f,o,null),nc(this,o)),4==e&&ec(this),this.b&&!this.A&&(4==e?yu(this.g,this):(this.b=!1,Ja(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Pa(12)):(this.h=0,Pa(13)),ec(this),tc(this)}}}catch(u){}},No.Wa=function(){if(this.a){var t=tu(this.a),e=this.a.$();this.D<e.length&&(Za(this),$a(this,t,e),this.b&&4!=t&&Ja(this))}},No.cancel=function(){this.A=!0,ec(this)},No.Va=function(){this.o=null;var t=Ko();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ka(3),Pa(17)),ec(this),this.h=2,tc(this)):Xa(this,this.T-t)},(No=ic.prototype).K=function(){oc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},No.L=function(){return oc(this),this.a.concat()},No.get=function(t,e){return sc(this.b,t)?this.b[t]:e},No.set=function(t,e){sc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},No.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ac=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cc(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof cc){this.a=void 0!==e?e:t.a,lc(this,t.f),this.j=t.j,hc(this,t.c),dc(this,t.h),this.g=t.g,e=t.b;var n=new Tc;n.c=e.c,e.a&&(n.a=new ic(e.a),n.b=e.b),fc(this,n),this.i=t.i}else t&&(n=String(t).match(ac))?(this.a=!!e,lc(this,n[1]||"",!0),this.j=mc(n[2]||""),hc(this,n[3]||"",!0),dc(this,n[4]),this.g=mc(n[5]||"",!0),fc(this,n[6]||"",!0),this.i=mc(n[7]||"")):(this.a=!!e,this.b=new Tc(null,this.a))}function uc(t){return new cc(t)}function lc(t,e,n){t.f=n?mc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function hc(t,e,n){t.c=n?mc(e,!0):e}function dc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function fc(t,e,n){e instanceof Tc?(t.b=e,function(t,e){e&&!t.f&&(Ec(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Oc(this,e),xc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=yc(e,Cc)),t.b=new Tc(e,t.a))}function pc(t,e,n){t.b.set(e,n)}function gc(t){return pc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ko()).toString(36)),t}function mc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,vc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}cc.prototype.toString=function(){var t=[],e=this.f;e&&t.push(yc(e,bc,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(yc(e,bc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(yc(n,"/"==n.charAt(0)?_c:wc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",yc(n,Sc)),t.join("")};var bc=/[#\/\?@]/g,wc=/[#\?:]/g,_c=/[#\?]/g,Cc=/[#\?@]/g,Sc=/#/g;function Tc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ec(t){t.a||(t.a=new ic,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Oc(t,e){Ec(t),e=kc(t,e),sc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,sc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&oc(t)))}function Ic(t,e){return Ec(t),e=kc(t,e),sc(t.a.b,e)}function xc(t,e,n){Oc(t,e),0<n.length&&(t.c=null,t.a.set(kc(t,e),ts(n)),t.b+=n.length)}function kc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(No=Tc.prototype).add=function(t,e){Ec(this),this.c=null,t=kc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},No.forEach=function(t,e){Ec(this),this.a.forEach(function(n,r){Xo(n,function(n){t.call(e,n,r,this)},this)},this)},No.L=function(){Ec(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},No.K=function(t){Ec(this);var e=[];if("string"==typeof t)Ic(this,t)&&(e=Zo(e,this.a.get(kc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Zo(e,t[n])}return e},No.set=function(t,e){return Ec(this),this.c=null,Ic(this,t=kc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},No.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},No.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Rc=function(){return function(t,e){this.b=t,this.a=e}}();function Pc(t){this.g=t||Ac,t=Fo.PerformanceNavigationTiming?0<(t=Fo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Fo.ia&&Fo.ia.ya&&Fo.ia.ya()&&Fo.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ac=10;function jc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Dc(t){return t.b?1:t.a?t.a.size:0}function Nc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Mc(t,e){t.a?t.a.add(e):t.b=e}function Lc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Fc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Do(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ts(t.c)}function Vc(){}function Uc(){this.a=new Vc}function Bc(t,e,n){var r=n||"";try{rc(t,function(t,n){var i=t;Bo(t)&&(i=ra(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Ub){throw e.push(r+"type="+encodeURIComponent("_badmap")),Ub}}function qc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Pc.prototype.cancel=function(){var t,e;if(this.c=Fc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Do(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Vc.prototype.stringify=function(t){return Fo.JSON.stringify(t,void 0)},Vc.prototype.parse=function(t){return Fo.JSON.parse(t,void 0)};var Hc=Fo.JSON.parse;function zc(t){ta.call(this),this.headers=new ic,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Gc,this.D=this.F=!1}$o(zc,ta);var Gc="",Qc=/^https?$/i,Wc=["POST","PUT"];function Kc(t){return"content-type"==t.toLowerCase()}function $c(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Yc(t),Xc(t)}function Yc(t){t.u||(t.u=!0,ea(t,"complete"),ea(t,"error"))}function Jc(t){if(t.b&&void 0!==Lo&&(!t.s[1]||4!=tu(t)||2!=t.W()))if(t.l&&4==tu(t))ma(t.za,0,t);else if(ea(t,"readystatechange"),4==tu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ac)[1]||null;if(!o&&Fo.self&&Fo.self.location){var s=Fo.self.location.protocol;o=s.substr(0,s.length-1)}i=!Qc.test(o?o.toLowerCase():"")}e=i}if(e)ea(t,"complete"),ea(t,"success");else{t.h=6;try{var a=2<tu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Yc(t)}}finally{Xc(t)}}}function Xc(t,e){if(t.a){Zc(t);var n=t.a,r=t.s[0]?Vo:null;t.a=null,t.s=null,e||ea(t,"ready");try{n.onreadystatechange=r}catch(Ub){}}}function Zc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Fo.clearTimeout(t.m),t.m=null)}function tu(t){return t.a?t.a.readyState:0}function eu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return cs(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):pc(t,e,n))}function nu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ru(t){this.pa=0,this.g=[],this.c=new Sa,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=nu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=nu("baseRetryDelayMs",5e3,t),this.Ra=nu("retryDelaySeedMs",1e4,t),this.Ma=nu("forwardChannelMaxRetries",2,t),this.ma=nu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Pc(t&&t.concurrentRequestLimit),this.ka=new Uc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function iu(t){if(su(t),3==t.v){var e=t.R++,n=uc(t.B);pc(n,"SID",t.J),pc(n,"RID",e),pc(n,"TYPE","terminate"),lu(t,n),(e=new Ha(t,t.c,e,void 0)).H=2,e.i=gc(uc(n)),n=!1,Fo.navigator&&Fo.navigator.sendBeacon&&(n=Fo.navigator.sendBeacon(e.i.toString(),"")),!n&&Fo.Image&&((new Image).src=e.i,n=!0),n||(e.a=Cu(e.g,null),e.a.ba(e.i)),e.u=Ko(),Ja(e)}wu(t)}function ou(t){t.a&&(pu(t),t.a.cancel(),t.a=null)}function su(t){ou(t),t.j&&(Fo.clearTimeout(t.j),t.j=null),mu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Fo.clearTimeout(t.h),t.h=null)}function au(t,e){t.g.push(new Rc(t.Oa++,e)),3==t.v&&cu(t)}function cu(t){jc(t.b)||t.h||(t.h=!0,la(t.Ba,t),t.u=0)}function uu(t,e){var n;n=e?e.f:t.R++;var r=uc(t.B);pc(r,"SID",t.J),pc(r,"RID",n),pc(r,"AID",t.P),lu(t,r),t.i&&t.l&&eu(r,t.i,t.l),n=new Ha(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=hu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Mc(t.b,n),Wa(n,r,e)}function lu(t,e){t.f&&rc({},function(t,n){pc(e,n,t)})}function hu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qo(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),a=!1;else try{Bc(l,s,"req"+u+"_")}catch(tl){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function du(t){t.a||t.j||(t.T=1,la(t.Aa,t),t.o=0)}function fu(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ja(Qo(t.Aa,t),vu(t,t.o)),t.o++,0))}function pu(t){null!=t.s&&(Fo.clearTimeout(t.s),t.s=null)}function gu(t){t.a=new Ha(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=uc(t.la);pc(e,"RID","rpc"),pc(e,"SID",t.J),pc(e,"CI",t.H?"0":"1"),pc(e,"AID",t.P),lu(t,e),pc(e,"TYPE","xmlhttp"),t.i&&t.l&&eu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=gc(uc(e)),n.j=null,n.I=!0,Ka(n,t)}function mu(t){null!=t.m&&(Fo.clearTimeout(t.m),t.m=null)}function yu(t,e){var n=null;if(t.a==e){mu(t),pu(t),t.a=null;var r=2}else{if(!Nc(t.b,e))return;n=e.s,Lc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ko()-e.u;var i=t.u;ea(r=Ia(),new Aa(r,n,e,i)),cu(t)}else du(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Dc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ja(Qo(t.Ba,t,e),vu(t,t.u)),t.u++,0)))}(t,e)||2==r&&fu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:bu(t,5);break;case 4:bu(t,10);break;case 3:bu(t,6);break;default:bu(t,2)}}function vu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function bu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Qo(t.Ya,t);n||(n=new cc("//www.google.com/images/cleardot.gif"),Fo.location&&"http"==Fo.location.protocol||lc(n,"https"),gc(n)),function(t,e){var n=new Sa;if(Fo.Image){var r=new Image;r.onload=Wo(qc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wo(qc,n,r,"TestLoadImage: error",!1,e),r.onabort=Wo(qc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wo(qc,n,r,"TestLoadImage: timeout",!1,e),Fo.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Pa(2);t.v=0,t.f&&t.f.ra(e),wu(t),su(t)}function wu(t){t.v=0,t.I=-1,t.f&&(0==Fc(t.b).length&&0==t.g.length||(t.b.c.length=0,ts(t.g),t.g.length=0),t.f.qa())}function _u(t,e,n){var r=function(t){return t instanceof cc?uc(t):new cc(t,void 0)}(n);if(""!=r.c)e&&hc(r,e+"."+r.c),dc(r,r.h);else{var i=Fo.location;r=function(t,e,n,r){var i=new cc(null,void 0);return t&&lc(i,t),e&&hc(i,e),n&&dc(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&cs(t.V,function(t,e){pc(r,e,t)}),n=t.na,(e=t.A)&&n&&pc(r,e,n),pc(r,"VER",t.ha),lu(t,r),r}function Cu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zc(t.Na)).F=t.C,e}function Su(){}function Tu(){if(ms&&!(10<=Number(Is)))throw Error("Environmental error: no available transport.")}function Eu(t,e){ta.call(this),this.a=new ru(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!es(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!es(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new xu(this)}function Ou(t){Ua.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Iu(){Ba.call(this),this.status=1}function xu(t){this.a=t}(No=zc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Fa),this.a.onreadystatechange=Qo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void $c(this,o)}t=n||"";var i=new ic(this.headers);r&&rc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Kc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Fo.FormData&&t instanceof Fo.FormData,!(0<=Jo(Wc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Zc(this),0<this.o&&((this.D=function(t){return ms&&Os(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Qo(this.xa,this)):this.m=ma(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){$c(this,o)}},No.xa=function(){void 0!==Lo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ea(this,"timeout"),this.abort(8))},No.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ea(this,"complete"),ea(this,"abort"),Xc(this))},No.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Xc(this,!0)),zc.X.G.call(this)},No.za=function(){this.j||(this.A||this.l||this.g?Jc(this):this.Ua())},No.Ua=function(){Jc(this)},No.W=function(){try{return 2<tu(this)?this.a.status:-1}catch(ps){return-1}},No.$=function(){try{return this.a?this.a.responseText:""}catch(ps){return""}},No.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Hc(e)}},No.ua=function(){return this.h},No.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(No=ru.prototype).ha=8,No.v=1,No.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ha(this,this.c,t,void 0),r=this.l;if(this.O&&(r?hs(r=us(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=hu(this,n,e),pc(i=uc(this.B),"RID",t),pc(i,"CVER",22),this.A&&pc(i,"X-HTTP-Session-Id",this.A),lu(this,i),this.i&&r&&eu(i,this.i,r),Mc(this.b,n),this.Ia&&pc(i,"TYPE","init"),this.da?(pc(i,"$req",e),pc(i,"SID","null"),n.U=!0,Wa(n,i,null)):Wa(n,i,e),this.v=2}}else 3==this.v&&(t?uu(this,t):0==this.g.length||jc(this.b)||uu(this))},No.Aa=function(){if(this.j=null,gu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ja(Qo(this.Ta,this),t)}},No.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Pa(10),ou(this),gu(this))},No.Sa=function(){null!=this.m&&(this.m=null,ou(this),fu(this),Pa(19))},No.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Pa(2)):(this.c.info("Failed to ping google.com"),Pa(1))},(No=Su.prototype).ta=function(){},No.sa=function(){},No.ra=function(){},No.qa=function(){},No.Ja=function(){},Tu.prototype.a=function(t,e){return new Eu(t,e)},$o(Eu,ta),Eu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Pa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=_u(t,null,t.fa),cu(t)},Eu.prototype.close=function(){iu(this.a)},Eu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,au(this.a,e)}else this.l?((e={}).__data__=ra(t),au(this.a,e)):au(this.a,t)},Eu.prototype.G=function(){this.a.f=null,delete this.f,iu(this.a),delete this.a,Eu.X.G.call(this)},$o(Ou,Ua),$o(Iu,Ba),$o(xu,Su),xu.prototype.ta=function(){ea(this.a,"a")},xu.prototype.sa=function(t){ea(this.a,new Ou(t))},xu.prototype.ra=function(t){ea(this.a,new Iu(t))},xu.prototype.qa=function(){ea(this.a,"b")},Tu.prototype.createWebChannel=Tu.prototype.a,Eu.prototype.send=Eu.prototype.h,Eu.prototype.open=Eu.prototype.g,Eu.prototype.close=Eu.prototype.close,Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,Na.COMPLETE="complete",La.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",ta.prototype.listen=ta.prototype.va,zc.prototype.listenOnce=zc.prototype.wa,zc.prototype.getLastError=zc.prototype.Qa,zc.prototype.getLastErrorCode=zc.prototype.ua,zc.prototype.getStatus=zc.prototype.W,zc.prototype.getResponseJson=zc.prototype.Pa,zc.prototype.getResponseText=zc.prototype.$,zc.prototype.send=zc.prototype.ba;var ku=Da,Ru=Na,Pu=Ea,Au=La,ju=zc,Du=n("mrSG"),Nu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Nu.o=-1;var Mu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Du.c)(e,t),e}(Error),Fu=new Ao.b("@firebase/firestore");function Vu(){return Fu.logLevel}function Uu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fu.logLevel<=Ao.a.DEBUG){var r=e.map(Hu);Fu.debug.apply(Fu,Object(Du.f)(["Firestore (8.4.0): "+t],r))}}function Bu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fu.logLevel<=Ao.a.ERROR){var r=e.map(Hu);Fu.error.apply(Fu,Object(Du.f)(["Firestore (8.4.0): "+t],r))}}function qu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fu.logLevel<=Ao.a.WARN){var r=e.map(Hu);Fu.warn.apply(Fu,Object(Du.f)(["Firestore (8.4.0): "+t],r))}}function Hu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Ub){return t}}function zu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.0) INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function Gu(t,e){t||zu()}function Qu(t,e){return t}function Wu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ku=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Wu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function $u(t,e){return t<e?-1:t>e?1:0}function Yu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ju(t){return t+"\0"}var Xu=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lu(Mu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?$u(this.nanoseconds,t.nanoseconds):$u(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Zu=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xu(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function tl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function el(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var rl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&zu(),void 0===n?n=t.length-e:n>t.length-e&&zu(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(rl),ol=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ol.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Lu(Mu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Lu(Mu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Lu(Mu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(rl),al=function(){function t(t){this.fields=t,t.sort(sl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Yu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),cl=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return $u(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();cl.EMPTY_BYTE_STRING=new cl("");var ul=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(t){if(Gu(!!t),"string"==typeof t){var e=0,n=ul.exec(t);if(Gu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:hl(t.seconds),nanos:hl(t.nanos)}}function hl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function dl(t){return"string"==typeof t?cl.fromBase64String(t):cl.fromUint8Array(t)}function fl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pl(t){var e=t.mapValue.fields.__previous_value__;return fl(e)?pl(e):e}function gl(t){var e=ll(t.mapValue.fields.__local_write_time__.timestampValue);return new Xu(e.seconds,e.nanos)}function ml(t){return null==t}function yl(t){return 0===t&&1/t==-1/0}function vl(t){return"number"==typeof t&&Number.isInteger(t)&&!yl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(il.fromString(e))},t.fromName=function(e){return new t(il.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===il.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return il.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new il(e.slice()))},t}();function wl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fl(t)?4:10:zu()}function _l(t,e){var n=wl(t);if(n!==wl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ll(t.timestampValue),r=ll(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return dl(t.bytesValue).isEqual(dl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return hl(t.geoPointValue.latitude)===hl(e.geoPointValue.latitude)&&hl(t.geoPointValue.longitude)===hl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return hl(t.integerValue)===hl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=hl(t.doubleValue),r=hl(e.doubleValue);return n===r?yl(n)===yl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Yu(t.arrayValue.values||[],e.arrayValue.values||[],_l);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(tl(n)!==tl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_l(n[i],r[i])))return!1;return!0}(t,e);default:return zu()}}function Cl(t,e){return void 0!==(t.values||[]).find(function(t){return _l(t,e)})}function Sl(t,e){var n=wl(t),r=wl(e);if(n!==r)return $u(n,r);switch(n){case 0:return 0;case 1:return $u(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=hl(t.integerValue||t.doubleValue),r=hl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Tl(t.timestampValue,e.timestampValue);case 4:return Tl(gl(t),gl(e));case 5:return $u(t.stringValue,e.stringValue);case 6:return function(t,e){var n=dl(t),r=dl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=$u(n[i],r[i]);if(0!==o)return o}return $u(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=$u(hl(t.latitude),hl(e.latitude));return 0!==n?n:$u(hl(t.longitude),hl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Sl(n[i],r[i]);if(o)return o}return $u(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=$u(r[s],o[s]);if(0!==a)return a;var c=Sl(n[r[s]],i[o[s]]);if(0!==c)return c}return $u(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zu()}}function Tl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $u(t,e);var n=ll(t),r=ll(e),i=$u(n.seconds,r.seconds);return 0!==i?i:$u(n.nanos,r.nanos)}function El(t){return Ol(t)}function Ol(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ll(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?dl(t.bytesValue).toBase64():"referenceValue"in t?bl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ol(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ol(t.fields[o])}return e+"}"}(t.mapValue):zu();var e}function Il(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function xl(t){return!!t&&"integerValue"in t}function kl(t){return!!t&&"arrayValue"in t}function Rl(t){return!!t&&"nullValue"in t}function Pl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Al(t){return!!t&&"mapValue"in t}var jl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(sl.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return _l(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===wl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Al(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(sl.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Al(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Dl(t){var e=[];return el(t.fields||{},function(t,n){var r=new sl([t]);if(Al(n)){var i=Dl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new al(e)}var Nl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Zu.min(),jl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,jl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,jl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=jl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=jl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ml=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Ll(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ml(t,e,n,r,i,o,s)}function Fl(t){var e=Qu(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+El(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Jl(e.startAt)),e.endAt&&(n+="|ub:",n+=Jl(e.endAt)),e.h=n}return e.h}function Vl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Zl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!_l(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eh(t.startAt,e.startAt)&&eh(t.endAt,e.endAt)}function Ul(t){return bl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Bl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Du.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ql(t,n,r):"array-contains"===n?new Ql(t,r):"in"===n?new Wl(t,r):"not-in"===n?new Kl(t,r):"array-contains-any"===n?new $l(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Hl(t,n):new zl(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Sl(e,this.value)):null!==e&&wl(this.value)===wl(e)&&this.m(Sl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zu()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ql=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bl.fromName(r.referenceValue),i}return Object(Du.c)(e,t),e.prototype.matches=function(t){var e=bl.comparator(t.key,this.key);return this.m(e)},e}(Bl),Hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Gl(0,n),r}return Object(Du.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bl),zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Gl(0,n),r}return Object(Du.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Bl);function Gl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return bl.fromName(t.referenceValue)})}var Ql=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Du.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return kl(e)&&Cl(e.arrayValue,this.value)},e}(Bl),Wl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Du.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Cl(this.value.arrayValue,e)},e}(Bl),Kl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Du.c)(e,t),e.prototype.matches=function(t){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Cl(this.value.arrayValue,e)},e}(Bl),$l=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Du.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!kl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Cl(e.value.arrayValue,t)})},e}(Bl),Yl=function(t,e){this.position=t,this.before=e};function Jl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return El(t)}).join(",")}var Xl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Zl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function th(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?bl.comparator(bl.fromName(s.referenceValue),n.key):Sl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function eh(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!_l(t.position[n],e.position[n]))return!1;return!0}var nh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function rh(t,e,n,r,i,o,s,a){return new nh(t,e,n,r,i,o,s,a)}function ih(t){return new nh(t)}function oh(t){return!ml(t.limit)&&"F"===t.limitType}function sh(t){return!ml(t.limit)&&"L"===t.limitType}function ah(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ch(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function uh(t){return null!==t.collectionGroup}function lh(t){var e=Qu(t);if(null===e.p){e.p=[];var n=ch(e),r=ah(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Xl(n)),e.p.push(new Xl(sl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Xl(sl.keyField(),c))}}}return e.p}function hh(t){var e=Qu(t);if(!e.T)if("F"===e.limitType)e.T=Ll(e.path,e.collectionGroup,lh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=lh(e);r<i.length;r++){var o=i[r];n.push(new Xl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Yl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Yl(e.startAt.position,!e.startAt.before):null;e.T=Ll(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function dh(t,e,n){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fh(t,e){return Vl(hh(t),hh(e))&&t.limitType===e.limitType}function ph(t){return Fl(hh(t))+"|lt:"+t.limitType}function gh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+El(e.value);var e}).join(", ")+"]"),ml(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Jl(t.startAt)),t.endAt&&(e+=", endAt: "+Jl(t.endAt)),"Target("+e+")"}(hh(t))+"; limitType="+t.limitType+")"}function mh(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!th(t.startAt,lh(t),e)||t.endAt&&th(t.endAt,lh(t),e))}(t,e)}function yh(t){return function(e,n){for(var r=!1,i=0,o=lh(t);i<o.length;i++){var s=o[i],a=vh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function vh(t,e,n){var r=t.field.isKeyField()?bl.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Sl(r,i):zu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zu()}}function bh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(e)?"-0":e}}function wh(t){return{integerValue:""+t}}function _h(t,e){return vl(e)?wh(e):bh(t,e)}var Ch=function(){this._=void 0};function Sh(t,e,n){return t instanceof Oh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ih?xh(t,e):t instanceof kh?Rh(t,e):function(t,e){var n=Eh(t,e),r=Ah(n)+Ah(t.A);return xl(n)&&xl(t.A)?wh(r):bh(t.R,r)}(t,e)}function Th(t,e,n){return t instanceof Ih?xh(t,e):t instanceof kh?Rh(t,e):n}function Eh(t,e){return t instanceof Ph?xl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Oh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e}(Ch),Ih=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Du.c)(e,t),e}(Ch);function xh(t,e){for(var n=jh(e),r=function(t){n.some(function(e){return _l(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var kh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Du.c)(e,t),e}(Ch);function Rh(t,e){for(var n=jh(e),r=function(t){n=n.filter(function(e){return!_l(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ph=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Du.c)(e,t),e}(Ch);function Ah(t){return hl(t.integerValue||t.doubleValue)}function jh(t){return kl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Dh=function(t,e){this.field=t,this.transform=e},Nh=function(t,e){this.version=t,this.transformResults=e},Mh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Lh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Fh=function(){};function Vh(t,e,n){t instanceof zh?function(t,e,n){var r=t.value.clone(),i=Wh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Gh?function(t,e,n){if(Lh(t.precondition,e)){var r=Wh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Qh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Uh(t,e,n){t instanceof zh?function(t,e,n){if(Lh(t.precondition,e)){var r=t.value.clone(),i=Kh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Hh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Gh?function(t,e,n){if(Lh(t.precondition,e)){var r=Kh(t.fieldTransforms,n,e),i=e.data;i.setAll(Qh(t)),i.setAll(r),e.convertToFoundDocument(Hh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Lh(t.precondition,e)&&e.convertToNoDocument(Zu.min())}(t,e)}function Bh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Eh(o.transform,s||null);null!=a&&(null==n&&(n=jl.empty()),n.set(o.field,a))}return n||null}function qh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Yu(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ih&&e instanceof Ih||t instanceof kh&&e instanceof kh?Yu(t.elements,e.elements,_l):t instanceof Ph&&e instanceof Ph?_l(t.A,e.A):t instanceof Oh&&e instanceof Oh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Hh(t){return t.isFoundDocument()?t.version:Zu.min()}var zh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Du.c)(e,t),e}(Fh),Gh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Du.c)(e,t),e}(Fh);function Qh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Wh(t,e,n){var r=new Map;Gu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Th(s,a,n[i]))}return r}function Kh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,c=n.data.field(s.field);r.set(s.field,Sh(a,c,e))}return r}var $h,Yh,Jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Du.c)(e,t),e}(Fh),Xh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Du.c)(e,t),e}(Fh),Zh=function(t){this.count=t};function td(t){switch(t){case Mu.OK:return zu();case Mu.CANCELLED:case Mu.UNKNOWN:case Mu.DEADLINE_EXCEEDED:case Mu.RESOURCE_EXHAUSTED:case Mu.INTERNAL:case Mu.UNAVAILABLE:case Mu.UNAUTHENTICATED:return!1;case Mu.INVALID_ARGUMENT:case Mu.NOT_FOUND:case Mu.ALREADY_EXISTS:case Mu.PERMISSION_DENIED:case Mu.FAILED_PRECONDITION:case Mu.ABORTED:case Mu.OUT_OF_RANGE:case Mu.UNIMPLEMENTED:case Mu.DATA_LOSS:return!0;default:return zu()}}function ed(t){if(void 0===t)return Bu("GRPC error has no .code"),Mu.UNKNOWN;switch(t){case $h.OK:return Mu.OK;case $h.CANCELLED:return Mu.CANCELLED;case $h.UNKNOWN:return Mu.UNKNOWN;case $h.DEADLINE_EXCEEDED:return Mu.DEADLINE_EXCEEDED;case $h.RESOURCE_EXHAUSTED:return Mu.RESOURCE_EXHAUSTED;case $h.INTERNAL:return Mu.INTERNAL;case $h.UNAVAILABLE:return Mu.UNAVAILABLE;case $h.UNAUTHENTICATED:return Mu.UNAUTHENTICATED;case $h.INVALID_ARGUMENT:return Mu.INVALID_ARGUMENT;case $h.NOT_FOUND:return Mu.NOT_FOUND;case $h.ALREADY_EXISTS:return Mu.ALREADY_EXISTS;case $h.PERMISSION_DENIED:return Mu.PERMISSION_DENIED;case $h.FAILED_PRECONDITION:return Mu.FAILED_PRECONDITION;case $h.ABORTED:return Mu.ABORTED;case $h.OUT_OF_RANGE:return Mu.OUT_OF_RANGE;case $h.UNIMPLEMENTED:return Mu.UNIMPLEMENTED;case $h.DATA_LOSS:return Mu.DATA_LOSS;default:return zu()}}(Yh=$h||($h={}))[Yh.OK=0]="OK",Yh[Yh.CANCELLED=1]="CANCELLED",Yh[Yh.UNKNOWN=2]="UNKNOWN",Yh[Yh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yh[Yh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yh[Yh.NOT_FOUND=5]="NOT_FOUND",Yh[Yh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yh[Yh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yh[Yh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yh[Yh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yh[Yh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yh[Yh.ABORTED=10]="ABORTED",Yh[Yh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yh[Yh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yh[Yh.INTERNAL=13]="INTERNAL",Yh[Yh.UNAVAILABLE=14]="UNAVAILABLE",Yh[Yh.DATA_LOSS=15]="DATA_LOSS";var nd=function(){function t(t,e){this.comparator=t,this.root=e||id.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,id.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new rd(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new rd(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new rd(this.root,t,this.comparator,!0)},t}(),rd=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),id=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw zu();if(this.right.isRed())throw zu();var t=this.left.check();if(t!==this.right.check())throw zu();return t+(this.isRed()?0:1)},t}();id.EMPTY=null,id.RED=!0,id.BLACK=!1,id.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw zu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw zu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new id(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var od=function(){function t(t){this.comparator=t,this.data=new nd(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new sd(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new sd(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),sd=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ad=new nd(bl.comparator);function cd(){return ad}var ud=new nd(bl.comparator);function ld(){return ud}var hd=new nd(bl.comparator);function dd(){return hd}var fd=new od(bl.comparator);function pd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=fd,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var gd=new od($u);function md(){return gd}var yd=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Zu.min(),r,md(),cd(),pd())},t}(),vd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(cl.EMPTY_BYTE_STRING,n,pd(),pd(),pd())},t}(),bd=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},wd=function(t,e){this.targetId=t,this.V=e},_d=function(t,e,n,r){void 0===n&&(n=cl.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Cd=function(){function t(){this.S=0,this.D=Ed(),this.C=cl.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=pd(),e=pd(),n=pd();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zu()}}),new vd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ed()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Sd=function(){function t(t){this.W=t,this.G=new Map,this.H=cd(),this.J=Td(),this.Y=new od($u)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:zu()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ul(i))if(0===n){var o=new bl(i.path);this.tt(e,o,Nl.newNoDocument(o,Zu.min()))}else Gu(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Ul(o.target)){var s=new bl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Nl.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=pd();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new yd(t,n,this.Y,this.H,r);return this.H=cd(),this.J=Td(),this.Y=new od($u),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Cd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new od($u),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Uu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Cd),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Td(){return new nd(bl.comparator)}function Ed(){return new nd(bl.comparator)}var Od={asc:"ASCENDING",desc:"DESCENDING"},Id={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xd=function(t,e){this.databaseId=t,this.I=e};function kd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rd(t,e){return t.I?e.toBase64():e.toUint8Array()}function Pd(t,e){return kd(t,e.toTimestamp())}function Ad(t){return Gu(!!t),Zu.fromTimestamp(function(t){var e=ll(t);return new Xu(e.seconds,e.nanos)}(t))}function jd(t,e){return function(t){return new il(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Dd(t){var e=il.fromString(t);return Gu(of(e)),e}function Nd(t,e){return jd(t.databaseId,e.path)}function Md(t,e){var n=Dd(e);if(n.get(1)!==t.databaseId.projectId)throw new Lu(Mu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Lu(Mu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bl(Ud(n))}function Ld(t,e){return jd(t.databaseId,e)}function Fd(t){var e=Dd(t);return 4===e.length?il.emptyPath():Ud(e)}function Vd(t){return new il(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ud(t){return Gu(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Bd(t,e,n){return{name:Nd(t,e),fields:n.toProto().mapValue.fields}}function qd(t,e,n){var r=Md(t,e.name),i=Ad(e.updateTime),o=new jl({mapValue:{fields:e.fields}}),s=Nl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Hd(t,e){var n;if(e instanceof zh)n={update:Bd(t,e.key,e.value)};else if(e instanceof Jh)n={delete:Nd(t,e.key)};else if(e instanceof Gh)n={update:Bd(t,e.key,e.data),updateMask:rf(e.fieldMask)};else{if(!(e instanceof Xh))return zu();n={verify:Nd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Oh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ih)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ph)return{fieldPath:e.field.canonicalString(),increment:n.A};throw zu()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Pd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zu()}(t,e.precondition)),n}function zd(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Mh.updateTime(Ad(t.updateTime)):void 0!==t.exists?Mh.exists(t.exists):Mh.none()}(e.currentDocument):Mh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Gu("REQUEST_TIME"===e.setToServerValue),n=new Oh):"appendMissingElements"in e?n=new Ih(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new kh(e.removeAllFromArray.values||[]):"increment"in e?n=new Ph(t,e.increment):zu();var r=sl.fromServerFormat(e.fieldPath);return new Dh(r,n)}(t,e)}):[];if(e.update){var i=Md(t,e.update.name),o=new jl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new al((t.fieldPaths||[]).map(function(t){return sl.fromServerFormat(t)}))}(e.updateMask);return new Gh(i,o,s,n,r)}return new zh(i,o,n,r)}if(e.delete){var a=Md(t,e.delete);return new Jh(a,n)}if(e.verify){var c=Md(t,e.verify);return new Xh(c,n)}return zu()}function Gd(t,e){return{documents:[Ld(t,e.path)]}}function Qd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ld(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ld(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Pl(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NAN"}};if(Rl(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Pl(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NOT_NAN"}};if(Rl(t.value))return{unaryFilter:{field:Zd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zd(t.field),op:Xd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Zd(t.field),direction:Jd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ml(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=$d(e.startAt)),e.endAt&&(n.structuredQuery.endAt=$d(e.endAt)),n}function Wd(t){var e=Fd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Gu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Kd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Xl(tf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var c=null;n.limit&&(c=function(t){var e;return ml(e="object"==typeof t?t.value:t)?null:e}(n.limit));var u=null;n.startAt&&(u=Yd(n.startAt));var l=null;return n.endAt&&(l=Yd(n.endAt)),rh(e,i,a,s,c,"F",u,l)}function Kd(t){return t?void 0!==t.unaryFilter?[nf(t)]:void 0!==t.fieldFilter?[ef(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Kd(t)}).reduce(function(t,e){return t.concat(e)}):zu():[]}function $d(t){return{before:t.before,values:t.position}}function Yd(t){return new Yl(t.values||[],!!t.before)}function Jd(t){return Od[t]}function Xd(t){return Id[t]}function Zd(t){return{fieldPath:t.canonicalString()}}function tf(t){return sl.fromServerFormat(t.fieldPath)}function ef(t){return Bl.create(tf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zu()}}(t.fieldFilter.op),t.fieldFilter.value)}function nf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=tf(t.unaryFilter.field);return Bl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=tf(t.unaryFilter.field);return Bl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tf(t.unaryFilter.field);return Bl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tf(t.unaryFilter.field);return Bl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zu()}}function rf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function of(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function sf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=cf(e)),e=af(t.get(n),e);return cf(e)}function af(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function cf(t){return t+"\x01\x01"}function uf(t){var e=t.length;if(Gu(e>=2),2===e)return Gu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),il.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&zu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),c=void 0;0===i.length?c=a:(c=i+=a,i=""),r.push(c);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:zu()}o=s+2}return new il(r)}var lf=function(t,e){this.seconds=t,this.nanoseconds=e},hf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};hf.store="owner",hf.key="owner";var df=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};df.store="mutationQueues",df.keyPath="userId";var ff=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ff.store="mutations",ff.keyPath="batchId",ff.userMutationsIndex="userMutationsIndex",ff.userMutationsKeyPath=["userId","batchId"];var pf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,sf(e)]},t.key=function(t,e,n){return[t,sf(e),n]},t}();pf.store="documentMutations",pf.PLACEHOLDER=new pf;var gf=function(t,e){this.path=t,this.readTime=e},mf=function(t,e){this.path=t,this.version=e},yf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};yf.store="remoteDocuments",yf.readTimeIndex="readTimeIndex",yf.readTimeIndexPath="readTime",yf.collectionReadTimeIndex="collectionReadTimeIndex",yf.collectionReadTimeIndexPath=["parentPath","readTime"];var vf=function(t){this.byteSize=t};vf.store="remoteDocumentGlobal",vf.key="remoteDocumentGlobalKey";var bf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bf.store="targets",bf.keyPath="targetId",bf.queryTargetsIndexName="queryTargetsIndex",bf.queryTargetsKeyPath=["canonicalId","targetId"];var wf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wf.store="targetDocuments",wf.keyPath=["targetId","path"],wf.documentTargetsIndex="documentTargetsIndex",wf.documentTargetsKeyPath=["path","targetId"];var _f=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};_f.key="targetGlobalKey",_f.store="targetGlobal";var Cf=function(t,e){this.collectionId=t,this.parent=e};Cf.store="collectionParents",Cf.keyPath=["collectionId","parent"];var Sf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Sf.store="clientMetadata",Sf.keyPath="clientId";var Tf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Tf.store="bundles",Tf.keyPath="bundleId";var Ef=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ef.store="namedQueries",Ef.keyPath="name";var Of=Object(Du.f)(Object(Du.f)([],Object(Du.f)(Object(Du.f)([],Object(Du.f)(Object(Du.f)([],Object(Du.f)(Object(Du.f)([],[df.store,ff.store,pf.store,yf.store,bf.store,hf.store,_f.store,wf.store]),[Sf.store])),[vf.store])),[Cf.store])),[Tf.store,Ef.store]),If="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),kf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Rf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&zu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Pf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new kf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Df(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Vf(e.target.error);n.ft.reject(new Df(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Df(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Uu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Mf(e)},t}(),Af=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Po.h)())&&Bu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Uu("SimpleDb","Removing database:",t),Lf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Po.h)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n=this;return Object(Du.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Uu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Df(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Lu(Mu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Df(t,n))},i.onupgradeneeded=function(t){Uu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Uu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Du.b)(this,void 0,void 0,function(){var i,o,s,a,c;return Object(Du.d)(this,function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,u,l;return Object(Du.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Pf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Rf.reject(t)}).toPromise(),c={},s.catch(function(){}),[4,e.dt];case 3:return[2,(c.value=(h.sent(),s),c)];case 4:return Uu("SimpleDb","Transaction failed with error:",(u=h.sent()).message,"Retrying:",l="FirebaseError"!==u.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}})},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=u.sent()))return[2,c.value];u.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),jf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Lf(this.Pt.delete())},t}(),Df=function(t){function e(e,n){var r=this;return(r=t.call(this,Mu.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Du.c)(e,t),e}(Lu);function Nf(t){return"IndexedDbTransactionError"===t.name}var Mf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Uu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Uu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Lf(n)},t.prototype.add=function(t){return Uu("SimpleDb","ADD",this.store.name,t,t),Lf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Lf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Uu("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Uu("SimpleDb","DELETE",this.store.name,t),Lf(this.store.delete(t))},t.prototype.count=function(){return Uu("SimpleDb","COUNT",this.store.name),Lf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Uu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Rf(function(n,r){e.onerror=function(t){var e=Vf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Rf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new jf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Rf){var a=s.catch(function(t){return o.done(),Rf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Rf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Lf(t){return new Rf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Vf(t.target.error);n(e)}})}var Ff=!1;function Vf(t){var e=Af._t(Object(Po.h)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Lu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ff||(Ff=!0,setTimeout(function(){throw r},0)),r}}return t}var Uf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Du.c)(e,t),e}(xf);function Bf(t,e){var n=Qu(t);return Af.It(n.Mt,e)}var qf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Vh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Uh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Uh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Zu.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},pd())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Yu(this.mutations,t.mutations,function(t,e){return qh(t,e)})&&Yu(this.baseMutations,t.baseMutations,function(t,e){return qh(t,e)})},t}(),Hf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Gu(e.mutations.length===r.length);for(var i=dd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),zf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Zu.min()),void 0===o&&(o=Zu.min()),void 0===s&&(s=cl.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Gf=function(t){this.Lt=t};function Qf(t,e){if(e.document)return qd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bl.fromSegments(e.noDocument.path),r=Jf(e.noDocument.readTime),i=Nl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=bl.fromSegments(e.unknownDocument.path);return r=Jf(e.unknownDocument.version),Nl.newUnknownDocument(o,r)}return zu()}function Wf(t,e,n){var r=Kf(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Nd(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:kd(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new yf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),c=Yf(e.version);return s=e.hasCommittedMutations,new yf(null,new gf(a,c),null,s,r,i)}if(e.isUnknownDocument()){var u=e.key.path.toArray(),l=Yf(e.version);return new yf(new mf(u,l),null,null,!0,r,i)}return zu()}function Kf(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $f(t){var e=new Xu(t[0],t[1]);return Zu.fromTimestamp(e)}function Yf(t){var e=t.toTimestamp();return new lf(e.seconds,e.nanoseconds)}function Jf(t){var e=new Xu(t.seconds,t.nanoseconds);return Zu.fromTimestamp(e)}function Xf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return zd(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return zd(t.Lt,e)}),o=Xu.fromMillis(e.localWriteTimeMs);return new qf(e.batchId,o,n,i)}function Zf(t){var e,n,r=Jf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Jf(t.lastLimboFreeSnapshotVersion):Zu.min();return void 0!==t.query.documents?(Gu(1===(n=t.query).documents.length),e=hh(ih(Fd(n.documents[0])))):e=function(t){return hh(Wd(t))}(t.query),new zf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cl.fromBase64String(t.resumeToken))}function tp(t,e){var n,r=Yf(e.snapshotVersion),i=Yf(e.lastLimboFreeSnapshotVersion);n=Ul(e.target)?Gd(t.Lt,e.target):Qd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new bf(e.targetId,Fl(e.target),r,o,e.sequenceNumber,i,n)}function ep(t){var e=Wd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?dh(e,e.limit,"L"):e}var np=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return rp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Jf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return rp(t).put({bundleId:(n=e).id,createTime:Yf(Ad(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ip(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ep(e.bundledQuery),readTime:Jf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return ip(t).put(function(t){return{name:t.name,readTime:Yf(Ad(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function rp(t){return Bf(t,Tf.store)}function ip(t){return Bf(t,Ef.store)}var op=function(){function t(){this.Bt=new sp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Rf.resolve()},t.prototype.getCollectionParents=function(t,e){return Rf.resolve(this.Bt.getEntries(e))},t}(),sp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new od(il.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new od(il.comparator)).toArray()},t}(),ap=function(){function t(){this.qt=new sp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:sf(i)};return cp(t).put(o)}return Rf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ju(e),""],!1,!0);return cp(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(uf(o.parent))}return n})},t}();function cp(t){return Bf(t,Cf.store)}var up={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function hp(t,e,n){var r=t.store(ff.store),i=t.store(pf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(c.next(function(){Gu(1===a)}));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=pf.key(e,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return Rf.waitFor(o).next(function(){return u})}function dp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zu();e=t.noDocument}return JSON.stringify(e).length}lp.DEFAULT_COLLECTION_PERCENTILE=10,lp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lp.DEFAULT=new lp(41943040,lp.DEFAULT_COLLECTION_PERCENTILE,lp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lp.DISABLED=new lp(-1,0,0);var fp=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Gu(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gp(t).Ot({index:ff.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=mp(t),s=gp(t);return s.add({}).next(function(a){Gu("number"==typeof a);for(var c=new qf(a,e,n,r),u=function(t,e,n){var r=n.baseMutations.map(function(e){return Hd(t.Lt,e)}),i=n.mutations.map(function(e){return Hd(t.Lt,e)});return new ff(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,c),l=[],h=new od(function(t,e){return $u(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=pf.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(u)),l.push(o.put(g,pf.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=c.keys()}),Rf.waitFor(l).next(function(){return c})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return gp(t).get(e).next(function(t){return t?(Gu(t.userId===n.userId),Xf(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Rf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return gp(t).Ot({index:ff.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Gu(e.batchId>=r),o=Xf(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return gp(t).Ot({index:ff.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gp(t).Nt(ff.userMutationsIndex,n).next(function(t){return t.map(function(t){return Xf(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=pf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return mp(t).Ot({range:i},function(r,i,s){var a=r[0],c=r[2],u=uf(r[1]);if(a===n.userId&&e.path.isEqual(u))return gp(t).get(c).next(function(t){if(!t)throw zu();Gu(t.userId===n.userId),o.push(Xf(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od($u),i=[];return e.forEach(function(e){var o=pf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=mp(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],c=uf(t[1]);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()});i.push(a)}),Rf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=pf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new od($u);return mp(t).Ot({range:s},function(t,e,o){var s=t[0],c=t[2],u=uf(t[1]);s===n.userId&&r.isPrefixOf(u)?u.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(gp(t).get(e).next(function(t){if(null===t)throw zu();Gu(t.userId===n.userId),r.push(Xf(n.R,t))}))}),Rf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return hp(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Rf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Rf.resolve();var r=IDBKeyRange.lowerBound(pf.prefixForUser(e.userId)),i=[];return mp(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=uf(t[1]);i.push(o)}else r.done()}).next(function(){Gu(0===i.length)})})},t.prototype.containsKey=function(t,e){return pp(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return yp(t).get(this.userId).next(function(t){return t||new df(e.userId,-1,"")})},t}();function pp(t,e,n){var r=pf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return mp(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function gp(t){return Bf(t,ff.store)}function mp(t){return Bf(t,pf.store)}function yp(t){return Bf(t,df.store)}var vp=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new vp(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Zu.fromTimestamp(new Xu(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return wp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Gu(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return wp(t).Ot(function(s,a){var c=Zf(a);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.removeTargetData(t,c)))}).next(function(){return Rf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return wp(t).Ot(function(t,n){var r=Zf(n);e(r)})},t.prototype.Xt=function(t){return _p(t).get(_f.key).next(function(t){return Gu(null!==t),t})},t.prototype.Zt=function(t,e){return _p(t).put(_f.key,e)},t.prototype.te=function(t,e){return wp(t).put(tp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Fl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return wp(t).Ot({range:r,index:bf.queryTargetsIndexName},function(t,n,r){var o=Zf(n);Vl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Cp(t);return e.forEach(function(e){var s=sf(e.path);i.push(o.put(new wf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Rf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Cp(t);return Rf.forEach(e,function(e){var o=sf(e.path);return Rf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Cp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Cp(t),i=pd();return r.Ot({range:n,kt:!0},function(t,e,n){var r=uf(t[1]),o=new bl(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=sf(e.path),r=IDBKeyRange.bound([n],[Ju(n)],!1,!0),i=0;return Cp(t).Ot({index:wf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return wp(t).get(e).next(function(t){return t?Zf(t):null})},t}();function wp(t){return Bf(t,bf.store)}function _p(t){return Bf(t,_f.store)}function Cp(t){return Bf(t,wf.store)}function Sp(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){if(t.code!==Mu.FAILED_PRECONDITION||t.message!==If)throw t;return Uu("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Tp(t,e){var n=t[1],r=e[1],i=$u(t[0],e[0]);return 0===i?$u(n,r):i}var Ep=function(){function t(t){this.ne=t,this.buffer=new od(Tp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Tp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Op=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Uu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Du.b)(e,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Nf(e=n.sent())?(Uu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Sp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Ip=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Rf.resolve(Nu.o);var r=new Ep(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Uu("LruGarbageCollector","Garbage collection skipped; disabled"),Rf.resolve(up)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Uu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),up):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,c,u=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>u.params.maximumSequenceNumbersToCollect?(Uu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.maximumSequenceNumbersToCollect+" from "+e),r=u.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),u.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),u.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),u.removeOrphanedDocuments(t,n)}).next(function(t){return c=Date.now(),Vu()<=Ao.a.DEBUG&&Uu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-l)+"ms"),Rf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),xp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ip(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return kp(t,n)},t.prototype.removeReference=function(t,e,n){return kp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return kp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return yp(t).$t(function(r){return pp(t,r,e).next(function(t){return t&&(n=!0),Rf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var c=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Cp(t).delete([0,sf(s.path)])})});i.push(c)}}).next(function(){return Rf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return kp(t,e)},t.prototype.we=function(t,e){var n,r=Cp(t),i=Nu.o;return r.Ot({index:wf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Nu.o&&e(new bl(uf(n)),i),i=s,n=o):i=Nu.o}).next(function(){i!==Nu.o&&e(new bl(uf(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function kp(t,e){return Cp(t).put(function(t,e){return new wf(0,sf(t.path),e)}(e,t.currentSequenceNumber))}var Rp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){el(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return nl(this.inner)},t}(),Pp=function(){function t(){this.changes=new Rp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Zu.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Nl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Rf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Ap=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Np(t).put(Mp(e),n)},t.prototype.removeEntry=function(t,e){var n=Np(t),r=Mp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Np(t).get(Mp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Np(t).get(Mp(e)).next(function(t){return{document:n.ye(e,t),size:dp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=cd();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=cd(),i=new nd(bl.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,dp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Rf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Np(t).Ot({range:r},function(t,e,r){for(var s=bl.fromSegments(t);o&&bl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=cd(),o=e.path.length+1,s={};if(n.isEqual(Zu.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var c=e.path.toArray(),u=Kf(n);s.range=IDBKeyRange.lowerBound([c,u],!0),s.index=yf.collectionReadTimeIndex}return Np(t).Ot(s,function(t,n,s){if(t.length===o){var a=Qf(r.R,n);e.path.isPrefixOf(a.key.path)?mh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new jp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Dp(t).get(vf.key).next(function(t){return Gu(!!t),t})},t.prototype.me=function(t,e){return Dp(t).put(vf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Qf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Zu.min()))return n}return Nl.newInvalidDocument(t)},t}(),jp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Rp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Du.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new od(function(t,e){return $u(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var c=Wf(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var u=dp(c);r+=u-a,n.push(e.Ie.addEntry(t,o,c))}else if(r-=a,e.trackRemovals){var l=Wf(e.Ie.R,Nl.newNoDocument(o,Zu.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Rf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Pp);function Dp(t){return Bf(t,vf.store)}function Np(t){return Bf(t,yf.store)}function Mp(t){return t.path.toArray()}var Lp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Gu(n<r&&n>=0&&r<=11);var o=new Pf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(hf.store)}(t),function(t){t.createObjectStore(df.store,{keyPath:df.keyPath}),t.createObjectStore(ff.store,{keyPath:ff.keyPath,autoIncrement:!0}).createIndex(ff.userMutationsIndex,ff.userMutationsKeyPath,{unique:!0}),t.createObjectStore(pf.store)}(t),Fp(t),function(t){t.createObjectStore(yf.store)}(t));var s=Rf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(wf.store),t.deleteObjectStore(bf.store),t.deleteObjectStore(_f.store)}(t),Fp(t)),s=s.next(function(){return function(t){var e=t.store(_f.store),n=new _f(0,0,Zu.min().toTimestamp(),0);return e.put(_f.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(ff.store).Nt().next(function(n){t.deleteObjectStore(ff.store),t.createObjectStore(ff.store,{keyPath:ff.keyPath,autoIncrement:!0}).createIndex(ff.userMutationsIndex,ff.userMutationsKeyPath,{unique:!0});var r=e.store(ff.store),i=n.map(function(t){return r.put(t)});return Rf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Sf.store,{keyPath:Sf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(vf.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(yf.store);e.createIndex(yf.readTimeIndex,yf.readTimeIndexPath,{unique:!1}),e.createIndex(yf.collectionReadTimeIndex,yf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Tf.store,{keyPath:Tf.keyPath})}(t),function(t){t.createObjectStore(Ef.store,{keyPath:Ef.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(yf.store).Ot(function(t,n){e+=dp(n)}).next(function(){var n=new vf(e);return t.store(vf.store).put(vf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(df.store),r=t.store(ff.store);return n.Nt().next(function(n){return Rf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ff.userMutationsIndex,i).next(function(r){return Rf.forEach(r,function(r){Gu(r.userId===n.userId);var i=Xf(e.R,r);return hp(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(wf.store),n=t.store(yf.store);return t.store(_f.store).get(_f.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new il(n),s=function(t){return[0,sf(t)]}(o);r.push(e.get(s).next(function(n){return n?Rf.resolve():function(n){return e.put(new wf(0,sf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Rf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Cf.store,{keyPath:Cf.keyPath});var n=e.store(Cf.store),r=new sp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:sf(i)})}};return e.store(yf.store).Ot({kt:!0},function(t,e){var n=new il(t);return i(n.popLast())}).next(function(){return e.store(pf.store).Ot({kt:!0},function(t,e){var n=uf(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(bf.store);return n.Ot(function(t,r){var i=Zf(r),o=tp(e.R,i);return n.put(o)})},t}();function Fp(t){t.createObjectStore(wf.store,{keyPath:wf.keyPath}).createIndex(wf.documentTargetsIndex,wf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bf.store,{keyPath:bf.keyPath}).createIndex(bf.queryTargetsIndexName,bf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(_f.store)}var Vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Up=function(){function t(e,n,r,i,o,s,a,c,u,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=u,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Lu(Mu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xp(this,i),this.Le=n+"main",this.R=new Gf(c),this.Be=new Af(this.Le,11,new Lp(this.R)),this.qe=new bp(this.referenceDelegate,this.R),this.Ut=new ap,this.Ue=function(t,e){return new Ap(t,e)}(this.R,this.Ut),this.Qe=new np,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Bu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Lu(Mu.FAILED_PRECONDITION,Vp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Nu(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Du.b)(e,void 0,void 0,function(){return Object(Du.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Du.b)(e,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Du.b)(e,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return qp(e).put(new Sf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Nf(e))return Uu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Uu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Bp(t).get(hf.key).next(function(t){return Rf.resolve(e.tn(t))})},t.prototype.en=function(t){return qp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Du.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Bf(t,Sf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Rf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Rf.resolve(!0):Bp(t).get(hf.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Lu(Mu.FAILED_PRECONDITION,Vp);return!1}}return!(!e.networkEnabled||!e.inForeground)||qp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Uu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Du.b)(this,void 0,void 0,function(){var t=this;return Object(Du.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[hf.store,Sf.store],function(e){var n=new Uf(e,Nu.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return qp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return fp.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Uu("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Of,function(o){return r=new Uf(o,i.Ne?i.Ne.next():Nu.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Bu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Lu(Mu.FAILED_PRECONDITION,If);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Bp(t).get(hf.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Lu(Mu.FAILED_PRECONDITION,Vp)})},t.prototype.Ze=function(t){var e=new hf(this.clientId,this.allowTabSynchronization,Date.now());return Bp(t).put(hf.key,e)},t.yt=function(){return Af.yt()},t.prototype.Xe=function(t){var e=this,n=Bp(t);return n.get(hf.key).next(function(t){return e.tn(t)?(Uu("IndexedDbPersistence","Releasing primary lease."),n.delete(hf.key)):Rf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Bu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Uu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Bu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Bu("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Bp(t){return Bf(t,hf.store)}function qp(t){return Bf(t,Sf.store)}function Hp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var zp=function(t,e){this.progress=t,this.wn=e},Gp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):uh(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bl(e)).next(function(t){var e=ld();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ld();return this.Ut.getCollectionParents(t,i).next(function(s){return Rf.forEach(s,function(s){var a=function(t,e){return new nh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var c=a[s],u=c.key,l=r.get(u);null==l&&(l=Nl.newInvalidDocument(u),r=r.insert(u,l)),Uh(c,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(u))}})}).next(function(){return r.forEach(function(t,n){mh(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=pd(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var c=a[s];c instanceof Gh&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(u=u.insert(t,e))}),u})},t}(),Qp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=pd(),i=pd(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Wp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Zu.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(oh(e)||sh(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Vu()<=Ao.a.DEBUG&&Uu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new od(yh(t));return e.forEach(function(e,r){mh(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Vu()<=Ao.a.DEBUG&&Uu("QueryEngine","Using full collection scan to execute query:",gh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Zu.min())},t}(),Kp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new nd($u),this.kn=new Rp(function(t){return Fl(t)},Vl),this.On=Zu.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Gp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function $p(t,e,n,r){return new Kp(t,e,n,r)}function Yp(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Du.d)(this,function(s){switch(s.label){case 0:return n=Qu(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Gp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=pd(),a=0,c=o;a<c.length;a++){var u=c[a];n.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Jp(t,e){var n=Qu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Rf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Gu(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Xp(t){var e=Qu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Zp(t,e){var n=Qu(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var c=e.resumeToken;if(c.approximateByteSize()>0){var u=a.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,u),function(t,e,n){return Gu(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,e)&&s.push(n.qe.updateTargetData(t,u))}}});var a=cd();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(tg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Zu.min())){var c=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(c)}return Rf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function tg(t,e,n,r,i){var o=pd();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=cd();return n.forEach(function(n,s){var a=t.get(n),c=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Zu.min())?(e.removeEntry(n,c),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,c),o=o.insert(n,s)):Uu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function eg(t,e){var n=Qu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function ng(t,e){var n=Qu(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Rf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new zf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function rg(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:r=Qu(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Nf(s=a.sent()))throw s;return Uu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function ig(t,e,n){var r=Qu(t),i=Zu.min(),o=pd();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Qu(t),i=r.kn.get(n);return void 0!==i?Rf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,hh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Zu.min(),n?o:pd())}).next(function(t){return{documents:t,Bn:o}})})}function og(t,e){var n=Qu(t),r=Qu(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function sg(t){var e=Qu(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Qu(t),i=cd(),o=Kf(n),s=Np(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:yf.readTimeIndex,range:a},function(t,e){var n=Qf(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:$f(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function ag(t){return Object(Du.b)(this,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){return[2,(e=Qu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Np(t),n=Zu.min();return e.Ot({index:yf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=$f(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function cg(t,e,n,r){return Object(Du.b)(this,void 0,void 0,function(){var i,o,s,a,c,u,l,h,d,f;return Object(Du.d)(this,function(p){switch(p.label){case 0:for(i=Qu(t),o=pd(),s=cd(),a=dd(),c=0,u=n;c<u.length;c++)h=e.qn((l=u[c]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,ng(i,function(t){return hh(ih(il.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return tg(t,d,s,Zu.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function ug(t,e,n){return void 0===n&&(n=pd()),Object(Du.b)(this,void 0,void 0,function(){var r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return[4,ng(t,hh(ep(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Qu(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ad(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(cl.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var lg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Rf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ad(n.createTime)}),Rf.resolve()},t.prototype.getNamedQuery=function(t,e){return Rf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:ep(t.bundledQuery),readTime:Ad(t.readTime)}}(e)),Rf.resolve()},t}(),hg=function(){function t(){this.Wn=new od(dg.Gn),this.zn=new od(dg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new dg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new dg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new bl(new il([])),r=new dg(n,t),i=new dg(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bl(new il([])),n=new dg(e,t),r=new dg(e,t+1),i=pd();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new dg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),dg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bl.comparator(t.key,e.key)||$u(t.ns,e.ns)},t.Hn=function(t,e){return $u(t.ns,e.ns)||bl.comparator(t.key,e.key)},t}(),fg=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new od(dg.Gn)}return t.prototype.checkEmpty=function(t){return Rf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new qf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var c=a[s];this.rs=this.rs.add(new dg(c.key,i)),this.Ut.addToCollectionParentIndex(t,c.key.path.popLast())}return Rf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Rf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Rf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Rf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Rf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new dg(e,0),i=new dg(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Rf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od($u);return e.forEach(function(t){var e=new dg(t,0),i=new dg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Rf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bl.isDocumentKey(i)||(i=i.child(""));var o=new dg(new bl(i),0),s=new od($u);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Rf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Gu(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Rf.forEach(e.mutations,function(i){var o=new dg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new dg(e,0),r=this.rs.firstAfterOrEqual(n);return Rf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Rf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),pg=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new nd(bl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Rf.resolve(n?n.document.clone():Nl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=cd();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Nl.newInvalidDocument(t))}),Rf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=cd(),i=new bl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,c=a.document,u=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;u.compareTo(n)<=0||mh(e,c)&&(r=r.insert(c.key,c.clone()))}return Rf.resolve(r)},t.prototype.fs=function(t,e){return Rf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new gg(this)},t.prototype.getSize=function(t){return Rf.resolve(this.size)},t}(),gg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Du.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Rf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Pp),mg=function(){function t(t){this.persistence=t,this.ds=new Rp(function(t){return Fl(t)},Vl),this.lastRemoteSnapshotVersion=Zu.min(),this.highestTargetId=0,this.ws=0,this._s=new hg,this.targetCount=0,this.ys=vp.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Rf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Rf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Rf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Rf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Rf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new vp(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Rf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Rf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Rf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Rf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Rf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Rf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Rf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Rf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Rf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Rf.resolve(n)},t.prototype.containsKey=function(t,e){return Rf.resolve(this._s.containsKey(e))},t}(),yg=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Nu(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new mg(this),this.Ut=new op,this.Ue=function(t,e){return new pg(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Gf(e),this.Qe=new lg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new fg(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Uu("MemoryPersistence","Starting transaction:",t);var i=new vg(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Rf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),vg=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Du.c)(e,t),e}(xf),bg=function(){function t(t){this.persistence=t,this.As=new hg,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw zu()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Rf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Rf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Rf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rf.forEach(this.vs,function(r){var i=bl.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Rf.or([function(){return Rf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),wg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function _g(t,e){return"firestore_clients_"+t+"_"+e}function Cg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Sg(t,e){return"firestore_targets_"+t+"_"+e}wg.UNAUTHENTICATED=new wg(null),wg.GOOGLE_CREDENTIALS=new wg("google-credentials-uid"),wg.FIRST_PARTY=new wg("first-party-uid");var Tg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Lu(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Bu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Eg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Lu(i.error.code,i.error.message)),o?new t(e,i.state,r):(Bu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Og=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=md(),s=0;i&&s<r.activeTargetIds.length;++s)i=vl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Bu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ig=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Bu("SharedClientState","Failed to parse online state: "+e),null)},t}(),xg=function(){function t(){this.activeTargetIds=md()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),kg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new nd($u),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=_g(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new xg),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,c,u,l=this;return Object(Du.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(_g(this.persistenceKey,r)))&&(o=Og.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),c=0,u=this.Os;c<u.length;c++)this.Fs(u[c]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Sg(this.persistenceKey,t));if(n){var r=Eg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Sg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Uu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Uu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Uu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Uu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Bu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Du.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Du.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Nu.o;if(null!=t)try{var n=JSON.parse(t);Gu("number"==typeof n),e=n}catch(t){Bu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Nu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Tg(this.currentUser,t,e,n),i=Cg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Cg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Sg(this.persistenceKey,t),i=new Eg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Og.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Tg.Vs(new wg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Eg.Vs(r,e)},t.prototype.js=function(t){return Ig.Vs(t)},t.prototype.ii=function(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Uu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=md();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Rg=function(){function t(){this.li=new xg,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new xg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Pg=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ag=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Uu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Uu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),jg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Dg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ng=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Du.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new ju;s.listenOnce(Ru.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ku.NO_ERROR:var e=s.getResponseJson();Uu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ku.TIMEOUT:Uu("Connection",'RPC "'+t+'" timed out'),o(new Lu(Mu.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:var n=s.getStatus();if(Uu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Mu).indexOf(e)>=0?e:Mu.UNKNOWN}(r.status);o(new Lu(a,r.message))}else o(new Lu(Mu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Lu(Mu.UNAVAILABLE,"Connection failed."));break;default:zu()}}finally{Uu("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Tu,i=Ia(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Po.m)()||Object(Po.o)()||Object(Po.k)()||Object(Po.l)()||Object(Po.p)()||Object(Po.j)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Uu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),c=!1,u=!1,l=new Dg({Ei:function(t){u?Uu("Connection","Not sending because WebChannel is closed:",t):(c||(Uu("Connection","Opening WebChannel transport."),a.open(),c=!0),Uu("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Au.EventType.OPEN,function(){u||Uu("Connection","WebChannel transport opened.")}),h(a,Au.EventType.CLOSE,function(){u||(u=!0,Uu("Connection","WebChannel transport closed"),l.Vi())}),h(a,Au.EventType.ERROR,function(t){u||(u=!0,qu("Connection","WebChannel transport errored:",t),l.Vi(new Lu(Mu.UNAVAILABLE,"The operation could not be completed")))}),h(a,Au.EventType.MESSAGE,function(t){var e;if(!u){var n=t.data[0];Gu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Uu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=$h[t];if(void 0!==e)return ed(e)}(i),s=r.message;void 0===o&&(o=Mu.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),u=!0,l.Vi(new Lu(o,s)),a.close()}else Uu("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Pu.STAT_EVENT,function(t){10===t.stat?Uu("Connection","Detected buffering proxy"):11===t.stat&&Uu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Uu("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Uu("RestConnection","Received: ",t),t},function(e){throw qu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.0",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+jg[t]},t}());function Mg(){return"undefined"!=typeof window?window:null}function Lg(){return"undefined"!=typeof document?document:null}function Fg(t){return new xd(t,!0)}var Vg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Uu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ug=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Vg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Mu.RESOURCE_EXHAUSTED?(Bu(e.toString()),Bu("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Mu.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Lu(Mu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Du.b)(t,void 0,void 0,function(){return Object(Du.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Uu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Uu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Bg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Du.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Gu(void 0===e||"string"==typeof e),cl.fromBase64String(e||"")):(Gu(void 0===e||e instanceof Uint8Array),cl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Mu.UNKNOWN:ed(t.code);return new Lu(e,t.message||"")}(a);n=new _d(r,i,o,s||null)}else if("documentChange"in e){i=Md(t,(r=e.documentChange).document.name),o=Ad(r.document.updateTime);var a=new jl({mapValue:{fields:r.document.fields}}),c=(s=Nl.newFoundDocument(i,o,a),r.targetIds||[]);n=new bd(c,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Md(t,(r=e.documentDelete).document),o=r.readTime?Ad(r.readTime):Zu.min(),a=Nl.newNoDocument(i,o),n=new bd([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Md(t,(r=e.documentRemove).document),n=new bd([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return zu();var u=e.filter;i=new Zh(r=u.count||0),n=new wd(o=u.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Zu.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Zu.min():e.readTime?Ad(e.readTime):Zu.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Vd(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ul(r)?{documents:Gd(t,r)}:{query:Qd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Rd(t,e.resumeToken):e.snapshotVersion.compareTo(Zu.min())>0&&(n.readTime=kd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zu()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Vd(this.R),e.removeTarget=t,this.cr(e)},e}(Ug),qg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Du.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Gu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Gu(void 0!==e),t.map(function(t){return function(t,e){var n=Ad(t.updateTime?t.updateTime:e);return n.isEqual(Zu.min())&&(n=Ad(e)),new Nh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ad(t.commitTime);return this.listener.Tr(n,e)}return Gu(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Vd(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Hd(e.R,t)})};this.cr(n)},e}(Ug),Hg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Du.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Lu(Mu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw t.code===Mu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw t.code===Mu.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Rr=!1},e}(function(){}),zg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Bu(e),this.Vr=!1):Uu("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Gg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Du.b)(o,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return tm(this)?(Uu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Du.b)(this,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return(e=Qu(t)).$r.add(4),[4,Wg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Qg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new zg(n,r)};function Qg(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n;return Object(Du.d)(this,function(r){switch(r.label){case 0:if(!tm(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Wg(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n;return Object(Du.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Kg(t,e){var n=Qu(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Zg(n)?Xg(n):gm(n).er()&&Yg(n,e))}function $g(t,e){var n=Qu(t),r=gm(n);n.Or.delete(e),r.er()&&Jg(n,e),0===n.Or.size&&(r.er()?r.ir():tm(n)&&n.Br.set("Unknown"))}function Yg(t,e){t.qr.U(e.targetId),gm(t).mr(e)}function Jg(t,e){t.qr.U(e),gm(t).yr(e)}function Xg(t){t.qr=new Sd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),gm(t).start(),t.Br.Sr()}function Zg(t){return tm(t)&&!gm(t).tr()&&t.Or.size>0}function tm(t){return 0===Qu(t).$r.size}function em(t){t.qr=void 0}function nm(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){return t.Or.forEach(function(e,n){Yg(t,e)}),[2]})})}function rm(t,e){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(n){return em(t),Zg(t)?(t.Br.Nr(e),Xg(t)):t.Br.set("Unknown"),[2]})})}function im(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o;return Object(Du.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof _d&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Du.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Uu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,om(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof bd?t.qr.X(e):e instanceof wd?t.qr.rt(e):t.qr.et(e),n.isEqual(Zu.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Xp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(cl.EMPTY_BYTE_STRING,n.snapshotVersion)),Jg(t,e);var r=new zf(n.target,e,1,n.sequenceNumber);Yg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Uu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,om(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function om(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r=this;return Object(Du.d)(this,function(i){switch(i.label){case 0:if(!Nf(e))throw e;return t.$r.add(1),[4,Wg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Xp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Du.b)(r,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return Uu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Qg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function sm(t,e){return e().catch(function(n){return om(t,n,e)})}function am(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Du.d)(this,function(s){switch(s.label){case 0:e=Qu(t),n=mm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return tm(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,eg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=mm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,om(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return cm(e)&&um(e),[2]}})})}function cm(t){return tm(t)&&!mm(t).tr()&&t.kr.length>0}function um(t){mm(t).start()}function lm(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){return mm(t).Ar(),[2]})})}function hm(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n,r;return Object(Du.d)(this,function(i){for(e=mm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function dm(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Hf.from(r,e,n),[4,sm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,am(t)];case 2:return o.sent(),[2]}})})}function fm(t,e){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(n){switch(n.label){case 0:return e&&mm(t).pr?[4,function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r;return Object(Du.d)(this,function(i){switch(i.label){case 0:return td(r=e.code)&&r!==Mu.ABORTED?(n=t.kr.shift(),mm(t).sr(),[4,sm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,am(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cm(t)&&um(t),[2]}})})}function pm(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n;return Object(Du.d)(this,function(r){switch(r.label){case 0:return n=Qu(t),e?(n.$r.delete(2),[4,Qg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Wg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function gm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Qu(t);return r.br(),new Bg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:nm.bind(null,t),Ri:rm.bind(null,t),_r:im.bind(null,t)}),t.Mr.push(function(n){return Object(Du.b)(e,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Zg(t)?Xg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),em(t),e.label=3;case 3:return[2]}})})})),t.Ur}function mm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Qu(t);return r.br(),new qg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:lm.bind(null,t),Ri:fm.bind(null,t),Ir:hm.bind(null,t),Tr:dm.bind(null,t)}),t.Mr.push(function(n){return Object(Du.b)(e,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,am(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Uu("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var ym=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lu(Mu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function vm(t,e){if(Bu("AsyncQueue",e+": "+t),Nf(t))return new Lu(Mu.UNAVAILABLE,e+": "+t);throw t}var bm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bl.comparator(e.key,n.key)}:function(t,e){return bl.comparator(t.key,e.key)},this.keyedMap=ld(),this.sortedSet=new nd(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),wm=function(){function t(){this.Kr=new nd(bl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):zu():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),_m=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,bm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Cm=function(){this.Wr=void 0,this.listeners=[]},Sm=function(){this.queries=new Rp(function(t){return ph(t)},fh),this.onlineState="Unknown",this.Gr=new Set};function Tm(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return Object(Du.d)(this,function(u){switch(u.label){case 0:if(n=Qu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Cm),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=u.sent(),[3,4];case 3:return a=u.sent(),c=vm(a,"Initialization of query '"+gh(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&xm(n),[2]}})})}function Em(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Du.d)(this,function(a){return n=Qu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Om(t,e){for(var n=Qu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var c=0,u=a.listeners;c<u.length;c++)u[c].Hr(s)&&(r=!0);a.Wr=s}}r&&xm(n)}function Im(t,e,n){var r=Qu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function xm(t){t.Gr.forEach(function(t){t.next()})}var km=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new _m(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=_m.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Rm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Pm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Md(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?qd(this.R,t.document,!1):Nl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ad(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Pm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,c=o.metadata.queries;a<c.length;a++){var u=c[a],l=(e.get(u)||pd()).add(s);e.set(u,l)}}return e},t.prototype.complete=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return[4,cg(this.localStore,new Pm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,ug(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new zp(Object.assign({},this.progress),t))]}})})}}();var Am=function(t){this.key=t},jm=function(t){this.key=t},Dm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=pd(),this.mutatedKeys=pd(),this.lo=yh(t),this.fo=new bm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new wm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=oh(this.query)&&i.size===this.query.limit?i.last():null,u=sh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=mh(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(c&&n.lo(h,c)>0||u&&n.lo(h,u)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(c||u)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),oh(this.query)||sh(this.query))for(;s.size>this.query.limit;){var l=oh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zu()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,c=a!==this.ao;return this.ao=a,0!==o.length||c?{snapshot:new _m(this.query,t.fo,i,o,t.mutatedKeys,0===a,c,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=pd(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new jm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Am(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=pd();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return _m.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Nm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Mm=function(t){this.key=t,this.bo=!1},Lm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Rp(function(t){return ph(t)},fh),this.Vo=new Map,this.So=new Set,this.Do=new nd(bl.comparator),this.Co=new Map,this.No=new hg,this.xo={},this.Fo=new Map,this.ko=vp.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Fm(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:return n=fy(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,ng(n.localStore,hh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Vm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Kg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Vm(t,e,n,r){return Object(Du.b)(this,void 0,void 0,function(){var i,o,s,a,c,u;return Object(Du.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Du.b)(this,void 0,void 0,function(){var i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ig(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Xm(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,ig(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Dm(e,i.Bn),s=o._o(i.documents),a=vd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,a),Xm(t,n,c.To),u=new Nm(e,n,o),[2,(t.Po.set(e,u),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}})})}function Um(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return n=Qu(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!fh(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,rg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),$g(n.remoteStore,r.targetId),Ym(n,r.targetId)}).catch(Sp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ym(n,r.targetId),[4,rg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Bm(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:r=py(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Qu(t),i=Xu.now(),o=e.reduce(function(t,e){return t.add(e.key)},pd());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,c=e;a<c.length;a++){var u=c[a],l=Bh(u,n.get(u.key));null!=l&&s.push(new Gh(u.key,l,Dl(l.toProto().mapValue),Mh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new nd($u)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ey(r,i.changes)];case 3:return a.sent(),[4,am(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=vm(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function qm(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r;return Object(Du.d)(this,function(i){switch(i.label){case 0:n=Qu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Zp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Gu(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Gu(r.bo):t.removedDocuments.size>0&&(Gu(r.bo),r.bo=!1))}),[4,ey(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Sp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Hm(t,e,n){var r=Qu(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Qu(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&xm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zm(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o,s,a,c;return Object(Du.d)(this,function(u){switch(u.label){case 0:return(r=Qu(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new nd(bl.comparator)).insert(o,Nl.newNoDocument(o,Zu.min())),a=pd().add(o),c=new yd(Zu.min(),new Map,new od($u),s,a),[4,qm(r,c)]):[3,2];case 1:return u.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ty(r),[3,4];case 2:return[4,rg(r.localStore,e,!1).then(function(){return Ym(r,e,n)}).catch(Sp)];case 3:u.sent(),u.label=4;case 4:return[2]}})})}function Gm(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:n=Qu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Jp(n.localStore,e)];case 2:return i=o.sent(),$m(n,r,null),Km(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ey(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Qm(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:r=Qu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Qu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Gu(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),$m(r,e,n),Km(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ey(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Sp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Wm(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:tm((n=Qu(t)).remoteStore)||Uu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Qu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=vm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Km(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function $m(t,e,n){var r=Qu(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ym(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Jm(t,e)})}function Jm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&($g(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ty(t))}function Xm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Am?(t.No.addReference(o.key,e),Zm(t,o)):o instanceof jm?(Uu("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Jm(t,o.key)):zu()}}function Zm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Uu("SyncEngine","New document in limbo: "+n),t.So.add(r),ty(t))}function ty(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bl(il.fromString(e)),r=t.ko.next();t.Co.set(r,new Mm(n)),t.Do=t.Do.insert(n,r),Kg(t.remoteStore,new zf(hh(ih(n.path)),r,2,Nu.o))}}function ey(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:return r=Qu(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Qp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c,u;return Object(Du.d)(this,function(l){switch(l.label){case 0:n=Qu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Rf.forEach(e,function(e){return Rf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Rf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Nf(r=l.sent()))throw r;return Uu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(c=n.Fn.get(a),u=c.withLastLimboFreeSnapshotVersion(c.snapshotVersion),n.Fn=n.Fn.insert(a,u));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function ny(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r;return Object(Du.d)(this,function(i){switch(i.label){case 0:return(n=Qu(t)).currentUser.isEqual(e)?[3,3]:(Uu("SyncEngine","User change. New user:",e.toKey()),[4,Yp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Lu(Mu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ey(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ry(t,e){var n=Qu(t),r=n.Co.get(e);if(r&&r.bo)return pd().add(r.key);var i=pd(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var c=n.Po.get(a[s]);i=i.unionWith(c.view.wo)}return i}function iy(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return[4,ig((n=Qu(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Xm(n,e.targetId,i.To),i)]}})})}function oy(t){return Object(Du.b)(this,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){return[2,sg((e=Qu(t)).localStore).then(function(t){return ey(e,t)})]})})}function sy(t,e,n,r){return Object(Du.b)(this,void 0,void 0,function(){var i,o;return Object(Du.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Qu(t),r=Qu(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Rf.resolve(null)})})}((i=Qu(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,am(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?($m(i,e,r||null),Km(i,e),function(t,e){Qu(Qu(t)._n).Gt(e)}(i.localStore,e)):zu(),s.label=4;case 4:return[4,ey(i,o)];case 5:return s.sent(),[3,7];case 6:Uu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function ay(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c;return Object(Du.d)(this,function(u){switch(u.label){case 0:return fy(n=Qu(t)),py(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,cy(n,r.toArray())]);case 1:return i=u.sent(),n.Oo=!0,[4,pm(n.remoteStore,!0)];case 2:for(u.sent(),o=0,s=i;o<s.length;o++)Kg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],c=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):c=c.then(function(){return Ym(n,e),rg(n.localStore,e,!0)}),$g(n.remoteStore,e)}),[4,c]);case 4:return u.sent(),[4,cy(n,a)];case 5:return u.sent(),function(t){var e=Qu(t);e.Co.forEach(function(t,n){$g(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new nd(bl.comparator)}(n),n.Oo=!1,[4,pm(n.remoteStore,!1)];case 6:u.sent(),u.label=7;case 7:return[2]}})})}function cy(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,c,u,l,h,d,f,p;return Object(Du.d)(this,function(g){switch(g.label){case 0:n=Qu(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(c=void 0,(u=n.Vo.get(a=s[o]))&&0!==u.length?[4,ng(n.localStore,hh(u[0]))]:[3,7]):[3,13];case 2:c=g.sent(),l=0,h=u,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,iy(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,og(n.localStore,a)];case 8:return p=g.sent(),[4,ng(n.localStore,p)];case 9:return c=g.sent(),[4,Vm(n,uy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(c),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function uy(t){return rh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ly(t){var e=Qu(t);return Qu(Qu(e.localStore).persistence).fn()}function hy(t,e,n,r){return Object(Du.b)(this,void 0,void 0,function(){var i,o,s;return Object(Du.d)(this,function(a){switch(a.label){case 0:return(i=Qu(t)).Oo?(Uu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,sg(i.localStore)];case 3:return o=a.sent(),s=yd.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ey(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,rg(i.localStore,e,!0)];case 6:return a.sent(),Ym(i,e,r),[3,8];case 7:zu(),a.label=8;case 8:return[2]}})})}function dy(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o,s,a,c,u,l,h;return Object(Du.d)(this,function(d){switch(d.label){case 0:if(!(r=fy(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Uu("SyncEngine","Adding an already active target "+s),[3,5]):[4,og(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,ng(r.localStore,a)];case 3:return c=d.sent(),[4,Vm(r,uy(a),c.targetId,!1)];case 4:d.sent(),Kg(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:u=function(t){return Object(Du.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,rg(r.localStore,t,!1).then(function(){$g(r.remoteStore,t),Ym(r,t)}).catch(Sp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,u(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function fy(t){var e=Qu(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ry.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zm.bind(null,e),e.vo._r=Om.bind(null,e.eventManager),e.vo.Mo=Im.bind(null,e.eventManager),e}function py(t){var e=Qu(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qm.bind(null,e),e}var gy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return this.R=Fg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return $p(this.persistence,new Wp,t.initialUser,this.R)},t.prototype.qo=function(t){return new yg(bg.bs,this.R)},t.prototype.Bo=function(t){return new Rg},t.prototype.terminate=function(){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),my=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Du.c)(e,t),e.prototype.initialize=function(e){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,ag(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,py(this.Ko.syncEngine)];case 4:return n.sent(),[4,am(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return $p(this.persistence,new Wp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Op(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Hp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lp.withCacheSize(this.cacheSizeBytes):lp.DEFAULT;return new Up(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Mg(),Lg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Rg},e}(gy),yy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Du.c)(e,t),e.prototype.initialize=function(e){return Object(Du.b)(this,void 0,void 0,function(){var n,r=this;return Object(Du.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof kg?(this.sharedClientState.syncEngine={ui:sy.bind(null,n),ai:hy.bind(null,n),hi:dy.bind(null,n),fn:ly.bind(null,n),ci:oy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Du.b)(r,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return[4,ay(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Mg();if(!kg.yt(e))throw new Lu(Mu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Hp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new kg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(my),vy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n=this;return Object(Du.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Hm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ny.bind(null,this.syncEngine),[4,pm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Sm},t.prototype.createDatastore=function(t){var e=Fg(t.databaseInfo.databaseId),n=new Ng(t.databaseInfo);return function(t,e,n){return new Hg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Hm(s.syncEngine,t,0)},o=Ag.yt()?new Ag:new Pg,new Gg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Lm(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Du.b)(this,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return e=Qu(t),Uu("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Wg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),by=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),wy=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new kf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Du.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Rm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Du.b)(this,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n=this;return Object(Du.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Lu(Mu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Du.d)(this,function(c){switch(c.label){case 0:return n=Qu(t),r=Vd(n.R)+"/documents",i={documents:e.map(function(t){return Nd(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=c.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Gu(!!e.found);var n=Md(t,e.found.name),r=Ad(e.found.updateTime),i=new jl({mapValue:{fields:e.found.fields}});return Nl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Gu(!!e.missing),Gu(!!e.readTime);var n=Md(t,e.missing),r=Ad(e.readTime);return Nl.newNoDocument(n,r)}(t,e):zu()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Gu(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Jh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e=this;return Object(Du.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=bl.fromPath(n);e.mutations.push(new Xh(r,e.precondition(r)))}),[4,function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return n=Qu(t),r=Vd(n.R)+"/documents",i={writes:e.map(function(t){return Hd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw zu();e=Zu.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Lu(Mu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Mh.updateTime(e):Mh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Zu.min()))throw new Lu(Mu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mh.updateTime(e)}return Mh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),_y=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Vg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Du.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Du.d)(this,function(r){return t=new wy(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ml(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!td(e)}return!1},t}(),Cy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=wg.UNAUTHENTICATED,this.clientId=Ku.u(),this.credentialListener=function(){},this.receivedInitialUser=new kf,this.credentials.setChangeListener(function(t){Uu("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Lu(Mu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new kf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Du.b)(t,void 0,void 0,function(){var t,n;return Object(Du.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=vm(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Sy(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Du.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Uu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Du.b)(i,void 0,void 0,function(){return Object(Du.d)(this,function(t){switch(t.label){case 0:return[4,Yp(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Ty(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r;return Object(Du.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ey(t)];case 1:return n=i.sent(),Uu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Du.b)(this,void 0,void 0,function(){var n,r;return Object(Du.d)(this,function(i){switch(i.label){case 0:return(n=Qu(t)).asyncQueue.verifyOperationInProgress(),Uu("RemoteStore","RemoteStore received new credentials"),r=tm(n),n.$r.add(3),[4,Wg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Qg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Ey(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Uu("FirestoreClient","Using default OfflineComponentProvider"),[4,Sy(t,new gy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Oy(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Uu("FirestoreClient","Using default OnlineComponentProvider"),[4,Ty(t,new vy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Iy(t){return Ey(t).then(function(t){return t.persistence})}function xy(t){return Ey(t).then(function(t){return t.localStore})}function ky(t){return Oy(t).then(function(t){return t.remoteStore})}function Ry(t){return Oy(t).then(function(t){return t.syncEngine})}function Py(t){return Object(Du.b)(this,void 0,void 0,function(){var e,n;return Object(Du.d)(this,function(r){switch(r.label){case 0:return[4,Oy(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Fm.bind(null,e.syncEngine),n.onUnlisten=Um.bind(null,e.syncEngine),n)]}})})}function Ay(t,e,n){var r=this;void 0===n&&(n={});var i=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(r,void 0,void 0,function(){var r;return Object(Du.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new by({next:function(o){e.enqueueAndForget(function(){return Em(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Lu(Mu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Lu(Mu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new km(ih(n.path),o,{includeMetadataChanges:!0,so:!0});return Tm(t,s)},[4,Py(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function jy(t,e,n){var r=this;void 0===n&&(n={});var i=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(r,void 0,void 0,function(){var r;return Object(Du.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new by({next:function(n){e.enqueueAndForget(function(){return Em(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Lu(Mu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new km(n,o,{includeMetadataChanges:!0,so:!0});return Tm(t,s)},[4,Py(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Dy=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Ny=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),My=new Map,Ly=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Fy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(wg.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Vy=function(){function t(t){var e=this;this.oc=null,this.currentUser=wg.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Uu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Gu("string"==typeof n.accessToken),new Ly(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Gu(null===t||"string"==typeof t),new wg(t)},t}(),Uy=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=wg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),By=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Uy(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(wg.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function qy(t,e,n){if(!n)throw new Lu(Mu.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hy(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zy(t,e,n,r){if(!0===e&&!0===r)throw new Lu(Mu.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Gy(t){if(!bl.isDocumentKey(t))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Qy(t){if(bl.isDocumentKey(t))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Wy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":zu()}function Ky(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Lu(Mu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Wy(t);throw new Lu(Mu.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function $y(t,e){if(e<=0)throw new Lu(Mu.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Yy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Lu(Mu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lu(Mu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,zy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Jy=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Yy({}),this._settingsFrozen=!1,t instanceof Ny?(this._databaseId=t,this._credentials=new Fy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Lu(Mu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ny(t.options.projectId)}(t),this._credentials=new Vy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Fy;switch(t.type){case"gapi":var e=t.client;return Gu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new By(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Lu(Mu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=My.get(this))&&(Uu("ComponentProvider","Removing Datastore"),My.delete(this),t.terminate()),Promise.resolve();var t},t}(),Xy=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tv(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Zy=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),tv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ih(r))||this)._path=r,i.type="collection",i}return Object(Du.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Xy(this.firestore,null,new bl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Zy);function ev(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Po.g)(t),qy("collection","path",e),t instanceof Jy)return Qy(n=il.fromString.apply(il,Object(Du.f)([e],r))),new tv(t,null,n);if(!(t instanceof Xy||t instanceof tv))throw new Lu(Mu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Qy(n=il.fromString.apply(il,Object(Du.f)([t.path],r)).child(il.fromString(e))),new tv(t.firestore,null,n)}function nv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Po.g)(t),1===arguments.length&&(e=Ku.u()),qy("doc","path",e),t instanceof Jy)return Gy(n=il.fromString.apply(il,Object(Du.f)([e],r))),new Xy(t,null,new bl(n));if(!(t instanceof Xy||t instanceof tv))throw new Lu(Mu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gy(n=t._path.child(il.fromString.apply(il,Object(Du.f)([e],r)))),new Xy(t.firestore,t instanceof tv?t._converter:null,new bl(n))}function rv(t,e){return t=Object(Po.g)(t),e=Object(Po.g)(e),(t instanceof Xy||t instanceof tv)&&(e instanceof Xy||e instanceof tv)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function iv(t,e){return t=Object(Po.g)(t),e=Object(Po.g)(e),t instanceof Zy&&e instanceof Zy&&t.firestore===e.firestore&&fh(t._query,e._query)&&t._converter===e._converter}var ov=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Vg(this,"async_queue_retry"),this.Ec=function(){var e=Lg();e&&Uu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Lg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Lg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Du.b)(this,void 0,void 0,function(){var t,e=this;return Object(Du.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Nf(t=n.sent()))throw t;return Uu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Bu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=ym.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&zu()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Du.b)(this,void 0,void 0,function(){var t;return Object(Du.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function sv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new kf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var av=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new ov,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Du.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||uv(this),this._firestoreClient.terminate()},e}(Jy);function cv(t){return t._firestoreClient||uv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Dy(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Cy(t._credentials,t._queue,r)}function lv(t,e,n){var r=this,i=new kf;return t.asyncQueue.enqueue(function(){return Object(Du.b)(r,void 0,void 0,function(){var r;return Object(Du.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Sy(t,n)];case 1:return o.sent(),[4,Ty(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Mu.FAILED_PRECONDITION||t.code===Mu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function hv(t){if(t._initialized||t._terminated)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),fv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(cl.fromBase64String(e))}catch(e){throw new Lu(Mu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(cl.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),pv=function(t){this._methodName=t},gv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Lu(Mu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Lu(Mu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return $u(this._lat,t._lat)||$u(this._long,t._long)},t}(),mv=/^__.*__$/,yv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Gh(t,this.data,this.fieldMask,e,this.fieldTransforms):new zh(t,this.data,e,this.fieldTransforms)},t}(),vv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Gh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function bv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zu()}}var wv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Uv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(bv(this.Dc)&&mv.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),_v=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Fg(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new wv({Dc:t,methodName:e,Lc:n,path:sl.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Cv(t){var e=t._freezeSettings(),n=Fg(t._databaseId);return new _v(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Mv("Data must be an object, but it was:",s,r);var a,c,u=Dv(r,s);if(o.merge)a=new al(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Lv(e,d[h],n);if(!s.contains(f))throw new Lu(Mu.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Bv(l,f)||l.push(f)}a=new al(l),c=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,c=s.fieldTransforms;return new yv(new jl(u),a,c)}var Tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(pv);function Ev(t,e,n){return new wv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype._toFieldTransform=function(t){return new Dh(t.path,new Oh)},e.prototype.isEqual=function(t){return t instanceof e},e}(pv),Iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Du.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ev(this,t,!0),n=this.qc.map(function(t){return jv(t,e)}),r=new Ih(n);return new Dh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pv),xv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Du.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ev(this,t,!0),n=this.qc.map(function(t){return jv(t,e)}),r=new kh(n);return new Dh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(pv),kv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Du.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ph(t.R,_h(t.R,this.Uc));return new Dh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(pv);function Rv(t,e,n,r){var i=t.Bc(1,e,n);Mv("Data must be an object, but it was:",i,r);var o=[],s=jl.empty();el(r,function(t,r){var a=Vv(e,t,n);r=Object(Po.g)(r);var c=i.kc(a);if(r instanceof Tv)o.push(a);else{var u=jv(r,c);null!=u&&(o.push(a),s.set(a,u))}});var a=new al(o);return new vv(s,a,i.fieldTransforms)}function Pv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Lv(e,r,n)],c=[i];if(o.length%2!=0)throw new Lu(Mu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var u=0;u<o.length;u+=2)a.push(Lv(e,o[u])),c.push(o[u+1]);for(var l=[],h=jl.empty(),d=a.length-1;d>=0;--d)if(!Bv(l,a[d])){var f=a[d],p=c[d];p=Object(Po.g)(p);var g=s.kc(f);if(p instanceof Tv)l.push(f);else{var m=jv(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new al(l);return new vv(h,y,s.fieldTransforms)}function Av(t,e,n,r){return void 0===r&&(r=!1),jv(n,t.Bc(r?4:3,e))}function jv(t,e){if(Nv(t=Object(Po.g)(t)))return Mv("Unsupported field value:",e,t),Dv(t,e);if(t instanceof pv)return function(t,e){if(!bv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=jv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Po.g)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _h(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xu.fromDate(t);return{timestampValue:kd(e.R,n)}}if(t instanceof Xu)return n=new Xu(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:kd(e.R,n)};if(t instanceof gv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fv)return{bytesValue:Rd(e.R,t._byteString)};if(t instanceof Xy){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:jd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Wy(t))}(t,e)}function Dv(t,e){var n={};return nl(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(t,function(t,r){var i=jv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Nv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xu||t instanceof gv||t instanceof fv||t instanceof Xy||t instanceof pv)}function Mv(t,e,n){if(!Nv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Wy(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Lv(t,e,n){if((e=Object(Po.g)(e))instanceof dv)return e._internalPath;if("string"==typeof e)return Vv(t,e);throw Uv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Fv=new RegExp("[~\\*/\\[\\]]");function Vv(t,e,n){if(e.search(Fv)>=0)throw Uv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dv.bind.apply(dv,Object(Du.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Uv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Uv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var c="";return(o||s)&&(c+=" (found",o&&(c+=" in field "+r),s&&(c+=" in document "+i),c+=")"),new Lu(Mu.INVALID_ARGUMENT,(a+=". ")+t+c)}function Bv(t,e){return t.some(function(t){return t.isEqual(e)})}var qv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Xy(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(zv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(qv);function zv(t,e){return"string"==typeof e?Vv(t,e):e instanceof dv?e._internalPath:e._delegate._internalPath}var Gv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Qv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Du.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Wv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(zv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(qv),Wv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Qv),Kv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Gv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Wv(n._firestore,n._userDataWriter,r.key,r,new Gv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lu(Mu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Wv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Wv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Gv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:$v(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function $v(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zu()}}function Yv(t,e){return t instanceof Qv&&e instanceof Qv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Kv&&e instanceof Kv&&t._firestore===e._firestore&&iv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Jv(t){if(sh(t)&&0===t.explicitOrderBy.length)throw new Lu(Mu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xv=function(){};function Zv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var tb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Du.c)(e,t),e.prototype._apply=function(t){var e=Cv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ab(s,o);for(var c=[],u=0,l=s;u<l.length;u++)c.push(sb(r,t,l[u]));a={arrayValue:{values:c}}}else a=sb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ab(s,o),a=Av(n,"where",s,"in"===o||"not-in"===o);var h=Bl.create(i,o,a);return function(t,e){if(e.g()){var n=ch(t);if(null!==n&&!n.isEqual(e.field))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ah(t);null!==r&&cb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Lu(Mu.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Zy(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Xv),eb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Du.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xl(e,n);return function(t,e){if(null===ah(t)){var n=ch(t);null!==n&&cb(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Zy(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new nh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Xv),nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Du.c)(e,t),e.prototype._apply=function(t){return new Zy(t.firestore,t._converter,dh(t._query,this.Gc,this.zc))},e}(Xv),rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Du.c)(e,t),e.prototype._apply=function(t){var e=ob(t,this.type,this.Hc,this.Jc);return new Zy(t.firestore,t._converter,function(t,e){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Xv),ib=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Du.c)(e,t),e.prototype._apply=function(t){var e=ob(t,this.type,this.Hc,this.Jc);return new Zy(t.firestore,t._converter,function(t,e){return new nh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Xv);function ob(t,e,n,r){if(n[0]=Object(Po.g)(n[0]),n[0]instanceof qv)return function(t,e,n,r,i){if(!r)throw new Lu(Mu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=lh(t);s<a.length;s++){var c=a[s];if(c.field.isKeyField())o.push(Il(e,r.key));else{var u=r.data.field(c.field);if(fl(u))throw new Lu(Mu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var l=c.field.canonicalString();throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(u)}}return new Yl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Cv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Lu(Mu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],c=0;c<i.length;c++){var u=i[c];if(s[c].field.isKeyField()){if("string"!=typeof u)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof u);if(!uh(t)&&-1!==u.indexOf("/"))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+u+"' contains a slash.");var l=t.path.child(il.fromString(u));if(!bl.isDocumentKey(l))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bl(l);a.push(Il(e,h))}else{var d=Av(n,r,u);a.push(d)}}return new Yl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function sb(t,e,n){if("string"==typeof(n=Object(Po.g)(n))){if(""===n)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!uh(e)&&-1!==n.indexOf("/"))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(il.fromString(n));if(!bl.isDocumentKey(r))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Il(t,new bl(r))}if(n instanceof Xy)return Il(t,n._key);throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Wy(n)+".")}function ab(t,e){if(!Array.isArray(t)||0===t.length)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function cb(t,e,n){if(!n.isEqual(e))throw new Lu(Mu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ub=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),wl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(dl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zu()}},t.prototype.convertObject=function(t,e){var n=this,r={};return el(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new gv(hl(t.latitude),hl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=pl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(gl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ll(t);return new Xu(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=il.fromString(t);Gu(of(n));var r=new Ny(n.get(1),n.get(3)),i=new bl(n.popFirst(5));return r.isEqual(e)||Bu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function lb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var hb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Du.c)(e,t),e.prototype.convertBytes=function(t){return new fv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xy(this.firestore,null,e)},e}(ub),db=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Cv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=fb(t,this._firestore),i=lb(r._converter,e,n),o=Sv(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Mh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=fb(t,this._firestore);return o="string"==typeof(e=Object(Po.g)(e))||e instanceof dv?Pv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Rv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Mh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=fb(t,this._firestore);return this._mutations=this._mutations.concat(new Jh(e._key,Mh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Lu(Mu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function fb(t,e){if((t=Object(Po.g)(t)).firestore!==e)throw new Lu(Mu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Du.c)(e,t),e.prototype.convertBytes=function(t){return new fv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xy(this.firestore,null,e)},e}(ub);function gb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ky(t,Xy);var o=Ky(t.firestore,av),s=Cv(o);return yb(o,[("string"==typeof(e=Object(Po.g)(e))||e instanceof dv?Pv(s,"updateDoc",t._key,e,n,r):Rv(s,"updateDoc",t._key,e)).toMutation(t._key,Mh.exists(!0))])}function mb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Po.g)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||sv(i[a])||(s=i[a],a++);var c,u,l,h={includeMetadataChanges:s.includeMetadataChanges};if(sv(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Xy)u=Ky(t.firestore,av),l=ih(t._key.path),c={next:function(e){i[a]&&i[a](vb(u,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Ky(t,Zy);u=Ky(f.firestore,av),l=f._query;var p=new pb(u);c={next:function(t){i[a]&&i[a](new Kv(u,p,f,t))},error:i[a+1],complete:i[a+2]},Jv(t._query)}return function(t,e,n,r){var i=this,o=new by(r),s=new km(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(i,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return e=Tm,[4,Py(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(i,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return e=Em,[4,Py(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(cv(u),l,h,c)}function yb(t,e){return function(t,e){var n=this,r=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(n,void 0,void 0,function(){var n;return Object(Du.d)(this,function(i){switch(i.label){case 0:return n=Bm,[4,Ry(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(cv(t),e)}function vb(t,e,n){var r=n.docs.get(e._key),i=new pb(t);return new Qv(t,i,e._key,r,new Gv(n.hasPendingWrites,n.fromCache),e._converter)}var bb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Du.c)(e,t),e.prototype.get=function(e){var n=this,r=fb(e,this._firestore),i=new pb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Qv(n._firestore,i,r._key,t._document,new Gv(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Cv(t)}return t.prototype.get=function(t){var e=this,n=fb(t,this._firestore),r=new hb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return zu();var i=t[0];if(i.isFoundDocument())return new qv(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new qv(e._firestore,r,n._key,null,n._converter);throw zu()})},t.prototype.set=function(t,e,n){var r=fb(t,this._firestore),i=lb(r._converter,e,n),o=Sv(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=fb(t,this._firestore);return o="string"==typeof(e=Object(Po.g)(e))||e instanceof dv?Pv(this._dataReader,"Transaction.update",s._key,e,n,r):Rv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=fb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function wb(){if("undefined"==typeof Uint8Array)throw new Lu(Mu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function _b(){if("undefined"==typeof atob)throw new Lu(Mu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Cb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return _b(),new t(fv.fromBase64String(e))},t.fromUint8Array=function(e){return wb(),new t(fv.fromUint8Array(e))},t.prototype.toBase64=function(){return _b(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return wb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Sb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){hv(t=Ky(t,av));var n=cv(t),r=t._freezeSettings(),i=new vy;return lv(n,i,new my(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){hv(t=Ky(t,av));var e=cv(t),n=t._freezeSettings(),r=new vy;return lv(e,r,new yy(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Lu(Mu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new kf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Du.b)(e,void 0,void 0,function(){var e;return Object(Du.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Du.b)(this,void 0,void 0,function(){return Object(Du.d)(this,function(e){switch(e.label){case 0:return Af.yt()?[4,Af.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Hp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Tb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ny||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Ky(t,Jy))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&qu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Du.b)(e,void 0,void 0,function(){var e,n;return Object(Du.d)(this,function(r){switch(r.label){case 0:return[4,Iy(t)];case 1:return e=r.sent(),[4,ky(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Qu(t);return e.$r.delete(0),Qg(e)}(n))]}})})})}(cv(Ky(this._delegate,av)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Du.b)(e,void 0,void 0,function(){var e,n;return Object(Du.d)(this,function(r){switch(r.label){case 0:return[4,Iy(t)];case 1:return e=r.sent(),[4,ky(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Du.b)(this,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return(e=Qu(t)).$r.add(0),[4,Wg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(cv(Ky(this._delegate,av)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zy("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(e,void 0,void 0,function(){var e;return Object(Du.d)(this,function(r){switch(r.label){case 0:return e=Wm,[4,Ry(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(cv(Ky(this._delegate,av)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new by(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(n,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Qu(t).Gr.add(e),e.next()},[4,Py(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(n,void 0,void 0,function(){var e;return Object(Du.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Qu(t).Gr.delete(e)},[4,Py(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(cv(t=Ky(t,av)),sv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Lu(Mu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Fb(this,ev(this._delegate,t))}catch(t){throw Rb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new kb(this,nv(this._delegate,t))}catch(t){throw Rb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Nb(this,function(t,e){if(t=Ky(t,Jy),qy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Zy(t,null,function(t){return new nh(il.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Rb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(n,void 0,void 0,function(){var n;return Object(Du.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Oy(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new _y(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(cv(t),function(n){return e(new bb(t,n))})}(this._delegate,function(n){return t(new Ob(e,n))})},t.prototype.batch=function(){var t=this;return cv(this._delegate),new Ib(new db(this._delegate,function(e){return yb(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Lu(Mu.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Lu(Mu.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Du.c)(e,t),e.prototype.convertBytes=function(t){return new Cb(new fv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return kb.Zc(e,this.firestore,null)},e}(ub),Ob=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Eb(t)}return t.prototype.get=function(t){var e=this,n=Vb(t);return this._delegate.get(n).then(function(t){return new jb(e._firestore,new Qv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Vb(t);return n?(Hy("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Vb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Du.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Vb(t);return this._delegate.delete(e),this},t}(),Ib=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Vb(t);return n?(Hy("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Vb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Du.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Vb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),xb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Wv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Db(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Eb(e),n),i.set(n,o)),o},t}();xb.eu=new WeakMap;var kb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Eb(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Lu(Mu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Xy(n._delegate,r,new bl(e)))},t.Zc=function(e,n,r){return new t(n,new Xy(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Fb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Fb(this.firestore,ev(this._delegate,t))}catch(t){throw Rb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Po.g)(t))instanceof Xy&&rv(this._delegate,t)},t.prototype.set=function(t,e){e=Hy("DocumentReference.set",e);try{return function(t,e,n){t=Ky(t,Xy);var r=Ky(t.firestore,av),i=lb(t._converter,e,n);return yb(r,[Sv(Cv(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Mh.none())])}(this._delegate,t,e)}catch(t){throw Rb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?gb(this._delegate,t):gb.apply(void 0,Object(Du.f)([this._delegate,t,e],n))}catch(t){throw Rb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return yb(Ky((t=this._delegate).firestore,av),[new Jh(t._key,Mh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pb(e),i=Ab(e,function(e){return new jb(t.firestore,new Qv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return mb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ky(t,Xy);var e=Ky(t.firestore,av),n=cv(e),r=new pb(e);return function(t,e){var n=this,r=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(n,void 0,void 0,function(){var n;return Object(Du.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i;return Object(Du.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Qu(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Lu(Mu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=vm(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,xy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Qv(e,r,t._key,n,new Gv(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ky(t,Xy);var e=Ky(t.firestore,av);return Ay(cv(e),t._key,{source:"server"}).then(function(n){return vb(e,t,n)})}(this._delegate):function(t){t=Ky(t,Xy);var e=Ky(t.firestore,av);return Ay(cv(e),t._key).then(function(n){return vb(e,t,n)})}(this._delegate)).then(function(t){return new jb(e.firestore,new Qv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xb.tu(this.firestore,e):null))},t}();function Rb(t,e,n){return t.message=t.message.replace(e,n),t}function Pb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sv(r))return r}return{}}function Ab(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sv(t[0])?t[0]:sv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new kb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Yv(this._delegate,t._delegate)},t}(),Db=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Du.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(jb),Nb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Eb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Zv(this._delegate,function(t,e,n){var r=e,i=zv("where",t);return new tb(i,r,n)}(e,n,r)))}catch(e){throw Rb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Zv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=zv("orderBy",t);return new eb(r,n)}(e,n)))}catch(e){throw Rb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Zv(this._delegate,function(t){return $y("limit",t),new nb("limit",t,"F")}(e)))}catch(e){throw Rb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Zv(this._delegate,function(t){return $y("limitToLast",t),new nb("limitToLast",t,"L")}(e)))}catch(e){throw Rb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Rb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rb("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Rb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ib("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Rb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ib("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Rb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return iv(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ky(t,Zy);var e=Ky(t.firestore,av),n=cv(e),r=new pb(e);return function(t,e){var n=this,r=new kf;return t.asyncQueue.enqueueAndForget(function(){return Object(Du.b)(n,void 0,void 0,function(){var n;return Object(Du.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Du.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Du.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,ig(t,e,!0)];case 1:return a=c.sent(),r=new Dm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=c.sent(),a=vm(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,xy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Kv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ky(t,Zy);var e=Ky(t.firestore,av),n=cv(e),r=new pb(e);return jy(n,t._query,{source:"server"}).then(function(n){return new Kv(e,r,t,n)})}(this._delegate):function(t){t=Ky(t,Zy);var e=Ky(t.firestore,av),n=cv(e),r=new pb(e);return Jv(t._query),jy(n,t._query).then(function(n){return new Kv(e,r,t,n)})}(this._delegate)).then(function(t){return new Lb(e.firestore,new Kv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Pb(e),i=Ab(e,function(e){return new Lb(t.firestore,new Kv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return mb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xb.tu(this.firestore,e):null))},t}(),Mb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Db(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Lb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Nb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Db(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Mb(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Db(n._firestore,r))})},t.prototype.isEqual=function(t){return Yv(this._delegate,t._delegate)},t}(),Fb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Du.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new kb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new kb(this.firestore,void 0===t?nv(this._delegate):nv(this._delegate,t))}catch(t){throw Rb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ky(t.firestore,av),r=nv(t),i=lb(t._converter,e);return yb(n,[Sv(Cv(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Mh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new kb(e.firestore,t)})},e.prototype.isEqual=function(t){return rv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xb.tu(this.firestore,t):null))},e}(Nb);function Vb(t){return Ky(t,Xy)}var Ub,Bb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dv.bind.apply(dv,Object(Du.f)([void 0],t)))}return t.documentId=function(){return new t(sl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Po.g)(t))instanceof dv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),qb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Ov("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Tv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Iv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new kv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Hb=n("/6Yf"),zb={Firestore:Tb,GeoPoint:gv,Timestamp:Xu,Blob:Cb,Transaction:Ob,WriteBatch:Ib,DocumentReference:kb,DocumentSnapshot:jb,Query:Nb,QueryDocumentSnapshot:Db,QuerySnapshot:Lb,CollectionReference:Fb,FieldPath:Bb,FieldValue:qb,setLogLevel:function(t){Fu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Hb.a("firestore",function(t){return function(t,e){return new Tb(t,new av(t,e),new Sb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},zb)))})(Ub=Ro.a),Ub.registerVersion("@firebase/firestore","2.2.4");var Gb=n("VRyK"),Qb=n("qgXg"),Wb=n("Ylt2");class Kb extends Ee.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new $b(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Oe.a;if(this.isStopped||this.hasError?o=En.a.EMPTY:(this.observers.push(t),o=new Wb.a(this,t)),r&&t.add(t=new xo.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Qb.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class $b{constructor(t,e){this.time=t,this.value=e}}function Yb(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,c=!1;return function(u){let l;s++,!i||a?(a=!1,i=new Kb(t,e,r),l=i.subscribe(this),o=u.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){c=!0,o=void 0,i.complete()}}),c&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!c&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Jb(t,e){return e?Ge(()=>t,e):Ge(()=>t)}var Xb=n("tf+s");const Zb=new r.r("angularfire2.auth.use-emulator"),tw=new r.r("angularfire2.auth.settings"),ew=new r.r("angularfire2.auth.tenant-id"),nw=new r.r("angularfire2.auth.langugage-code"),rw=new r.r("angularfire2.auth.use-device-language"),iw=new r.r("angularfire.auth.persistence");let ow=(()=>{class t{constructor(t,e,r,i,o,s,a,c,u,l){const h=new ko.d(i),d=Object(ko.h)(h),f=new Ee.a,p=Object(Te.a)(void 0).pipe(Object(xo.b)(h.outsideAngular),Ge(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(yt.a)(()=>Object(ko.g)(t,i,e)),Object(yt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ko.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=c,u&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,c,u,n,l])})),Yb({bufferSize:1,refCount:!1}));if(N(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Te.a)(null);else{p.pipe(Cn()).subscribe();const t=p.pipe(Ge(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Yb({bufferSize:1,refCount:!1})),e=t=>new gt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Ge(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Ge(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Jb(n),Object(Xb.a)(h.outsideAngular),Object(xo.b)(h.insideAngular)),this.user=t.pipe(Jb(r),Object(Xb.a)(h.outsideAngular),Object(xo.b)(h.insideAngular)),this.idToken=this.user.pipe(Ge(t=>t?Object(pt.a)(t.getIdToken()):Object(Te.a)(null))),this.idTokenResult=this.user.pipe(Ge(t=>t?Object(pt.a)(t.getIdTokenResult()):Object(Te.a)(null))),this.credential=Object(Gb.a)(t,f,this.authState.pipe(nn(t=>!t))).pipe(Object(yt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Xb.a)(h.outsideAngular),Object(xo.b)(h.insideAngular))}return Object(ko.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(ko.c),r.Yb(ko.b,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Zb,8),r.Yb(tw,8),r.Yb(ew,8),r.Yb(nw,8),r.Yb(rw,8),r.Yb(iw,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(ko.c),Object(r.Yb)(ko.b,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Zb,8),Object(r.Yb)(tw,8),Object(r.Yb)(ew,8),Object(r.Yb)(nw,8),Object(r.Yb)(rw,8),Object(r.Yb)(iw,8))},token:t,providedIn:"any"}),t})();Object(ko.e)(ow,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let sw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[ow]}),t})();function aw(t,e){return function(t,e=Co.b){return new gt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function cw(t,e){return aw(t,e).pipe(Object(yt.a)(t=>({payload:t,type:"query"})))}function uw(t,e){return cw(t,e).pipe(Xe(void 0),So(),Object(yt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function lw(t,e,n){return uw(t,n).pipe(Ze((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return hw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return hw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Oo(void 0,void 0)),Object(yt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function hw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function dw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class fw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=uw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(yt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Xe(void 0),So(),nn(([t,e])=>e.length>0||!t),Object(yt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ze((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=dw(t);return lw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return cw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(pt.a)(this.query.get(t)).pipe(Object(xo.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new pw(this.ref.doc(t),this.afs)}}class pw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=ww(n,e);return new fw(r,i,this.afs)}snapshotChanges(){return aw(this.ref,this.afs.schedulers.outsideAngular).pipe(Xe(void 0),So(),Object(yt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(yt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(pt.a)(this.ref.get(t)).pipe(Object(xo.b)(this.afs.schedulers.insideAngular))}}class gw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?uw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),nn(t=>t.length>0),this.afs.keepUnstableUntilFirst):uw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ze((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=dw(t);return lw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return cw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(yt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(pt.a)(this.query.get(t)).pipe(Object(xo.b)(this.afs.schedulers.insideAngular))}}const mw=new r.r("angularfire2.enableFirestorePersistence"),yw=new r.r("angularfire2.firestore.persistenceSettings"),vw=new r.r("angularfire2.firestore.settings"),bw=new r.r("angularfire2.firestore.use-emulator");function ww(t,e=(t=>t)){return{query:e(t),ref:t}}let _w=(()=>{class t{constructor(t,e,n,r,i,o,s,a,c){this.schedulers=new ko.d(o),this.keepUnstableUntilFirst=Object(ko.h)(this.schedulers);const u=Object(ko.g)(t,o,e);!_o.a.auth&&c&&Object(ko.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ko.f)(`${u.name}.firestore`,"AngularFirestore",u,()=>{const t=o.runOutsideAngular(()=>u.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!N(i)){const e=()=>{try{return Object(pt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Ub){return"undefined"!=typeof console&&console.warn(Ub),Object(Te.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Te.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=ww(n,e),o=this.schedulers.ngZone.run(()=>r);return new fw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new gw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new pw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(ko.c),r.Yb(ko.b,8),r.Yb(mw,8),r.Yb(vw,8),r.Yb(r.C),r.Yb(r.A),r.Yb(yw,8),r.Yb(bw,8),r.Yb(Zb,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(ko.c),Object(r.Yb)(ko.b,8),Object(r.Yb)(mw,8),Object(r.Yb)(vw,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(yw,8),Object(r.Yb)(bw,8),Object(r.Yb)(Zb,8))},token:t,providedIn:"any"}),t})(),Cw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:mw,useValue:!0},{provide:yw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[_w]}),t})(),Sw=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.afAuth=e,this.router=n,this.route=r}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{t.user&&t.user.emailVerified?(this.SetUserData(t.user),this.router.navigate(["dashboard"])):this.router.navigate(["verify-email-address"])}).catch(t=>{window.alert(t.message)})}SignUp(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.SendVerificationMail(t.user),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SendVerificationMail(t){return t.sendEmailVerification().then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){let t=localStorage.getItem("user");return t&&(t=JSON.parse(t),this.userData=t),!(!t||!1===t.emailVerified)}GoogleAuth(){return this.AuthLogin(new _o.a.auth.GoogleAuthProvider)}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(t=>{this.SetUserData(t.user),this.router.navigate(["dashboard"])}).catch(t=>{window.alert(t)})}SetUserData(t){localStorage.setItem("user",JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName?t.displayName:t.email,photoURL:t.photoURL,emailVerified:t.emailVerified}))}SignOut(){this.afAuth.signOut().then(()=>{this.userData=null,localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}getValidationMessage(t){t.validationMessage=null,t&&t.errors&&t.dirty&&((t.errors.pattern||t.errors.email)&&(t.errors.validationMessage=`Invalid ${t.name}`),t.errors.required&&(t.errors.validationMessage="required"))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(_w),r.Yb(ow),r.Yb(Xi),r.Yb(jr))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tw=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}ngOnInit(){this.loginForm={email:"",password:""},this.backToPreviousPage()}backToPreviousPage(){const{redirect:t}=window.history.state;this.router.navigateByUrl(t||"/dashboard")}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Sw),r.Mb(Xi))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-sign-in"]],decls:35,vars:5,consts:[["name","userLoginForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],["userLoginForm","ngForm"],[1,"login-logo","mb-2"],[1,"fas","fa-video","mr-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","mr-1"],[1,"form-group","text-center"],["routerLink","/forgot-password",1,"link"],[1,"form-group","text-center","mb-0"],["routerLink","/register-user",1,"link"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"form",0,1),r.Rb(2,"h4",2),r.Nb(3,"i",3),r.wc(4," VideoWebRTC "),r.Qb(),r.Rb(5,"div",4),r.Rb(6,"h5"),r.wc(7,"Sign In"),r.Qb(),r.Rb(8,"div",5),r.Rb(9,"input",6,7),r.bc("ngModelChange",function(t){return e.loginForm.email=t})("ngModelChange",function(){r.qc(t);const n=r.pc(10);return e.authService.getValidationMessage(n)}),r.Qb(),r.Rb(11,"div",8),r.wc(12),r.Qb(),r.Qb(),r.Rb(13,"div",5),r.Rb(14,"input",9,10),r.bc("ngModelChange",function(t){return e.loginForm.password=t})("ngModelChange",function(){r.qc(t);const n=r.pc(15);return e.authService.getValidationMessage(n)}),r.Qb(),r.Rb(16,"div",8),r.wc(17),r.Qb(),r.Qb(),r.Rb(18,"div",5),r.Rb(19,"button",11),r.bc("click",function(){return e.authService.SignIn(e.loginForm.email,e.loginForm.password)}),r.wc(20," Sign In "),r.Qb(),r.Qb(),r.Rb(21,"div",5),r.Rb(22,"div",12),r.Rb(23,"span"),r.wc(24,"OR"),r.Qb(),r.Qb(),r.Qb(),r.Rb(25,"div",5),r.Rb(26,"button",13),r.bc("click",function(){return e.authService.GoogleAuth()}),r.Nb(27,"i",14),r.wc(28," Log in with Google "),r.Qb(),r.Qb(),r.Rb(29,"div",15),r.Rb(30,"span",16),r.wc(31,"Forgot Password?"),r.Qb(),r.Qb(),r.Rb(32,"div",17),r.Rb(33,"span",18),r.wc(34,"Don't have an account ? Sign Up"),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.pc(1),n=r.pc(10),i=r.pc(15);r.Ab(9),r.ic("ngModel",e.loginForm.email),r.Ab(3),r.xc(n.errors&&n.errors.validationMessage),r.Ab(2),r.ic("ngModel",e.loginForm.password),r.Ab(3),r.xc(i.errors&&i.errors.validationMessage),r.Ab(2),r.ic("disabled",t.invalid)}},directives:[pe,Ht,le,Tt,be,_e,qt,fe,Zi],styles:[""]}),t})(),Ew=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){this.registerForm={email:"",password:""}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Sw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-sign-up"]],decls:32,vars:5,consts:[["name","userSignupForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],["userSignupForm","ngForm"],[1,"login-logo","mb-2"],[1,"fas","fa-video","mr-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","mr-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"form",0,1),r.Rb(2,"h4",2),r.Nb(3,"i",3),r.wc(4," VideoWebRTC "),r.Qb(),r.Rb(5,"div",4),r.Rb(6,"h5"),r.wc(7,"Sign Up"),r.Qb(),r.Rb(8,"div",5),r.Rb(9,"input",6,7),r.bc("ngModelChange",function(t){return e.registerForm.email=t})("ngModelChange",function(){r.qc(t);const n=r.pc(10);return e.authService.getValidationMessage(n)}),r.Qb(),r.Rb(11,"div",8),r.wc(12),r.Qb(),r.Qb(),r.Rb(13,"div",5),r.Rb(14,"input",9,10),r.bc("ngModelChange",function(t){return e.registerForm.password=t})("ngModelChange",function(){r.qc(t);const n=r.pc(15);return e.authService.getValidationMessage(n)}),r.Qb(),r.Rb(16,"div",8),r.wc(17),r.Qb(),r.Qb(),r.Rb(18,"div",5),r.Rb(19,"button",11),r.bc("click",function(){return e.authService.SignUp(e.registerForm.email,e.registerForm.password)}),r.wc(20," Sign Up "),r.Qb(),r.Qb(),r.Rb(21,"div",5),r.Rb(22,"div",12),r.Rb(23,"span"),r.wc(24,"OR"),r.Qb(),r.Qb(),r.Qb(),r.Rb(25,"div",5),r.Rb(26,"button",13),r.bc("click",function(){return e.authService.GoogleAuth()}),r.Nb(27,"i",14),r.wc(28," Continue with Google "),r.Qb(),r.Qb(),r.Rb(29,"div",15),r.Rb(30,"span",16),r.wc(31,"Already have an account ? Sign In"),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.pc(1),n=r.pc(10),i=r.pc(15);r.Ab(9),r.ic("ngModel",e.registerForm.email),r.Ab(3),r.xc(n.errors&&n.errors.validationMessage),r.Ab(2),r.ic("ngModel",e.registerForm.password),r.Ab(3),r.xc(i.errors&&i.errors.validationMessage),r.Ab(2),r.ic("disabled",t.invalid)}},directives:[pe,Ht,le,Tt,be,_e,qt,fe,Zi],styles:[""]}),t})();var Ow=n("oLy0"),Iw=n.n(Ow),xw={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},kw=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Rw=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Pw=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Aw="undefined"!=typeof window&&void 0!==window.document?window.document:{},jw="fullscreenEnabled"in Aw&&Object.keys(xw)||kw[0]in Aw&&kw||Rw[0]in Aw&&Rw||Pw[0]in Aw&&Pw||[],Dw={requestFullscreen:function(t){return t[jw[xw.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[jw[xw.requestFullscreen]]},get exitFullscreen(){return Aw[jw[xw.exitFullscreen]].bind(Aw)},get fullscreenPseudoClass(){return":"+jw[xw.fullscreen]},addEventListener:function(t,e,n){return Aw.addEventListener(jw[xw[t]],e,n)},removeEventListener:function(t,e,n){return Aw.removeEventListener(jw[xw[t]],e,n)},get fullscreenEnabled(){return Boolean(Aw[jw[xw.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return Aw[jw[xw.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return Aw[("on"+jw[xw.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return Aw[("on"+jw[xw.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return Aw[("on"+jw[xw.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return Aw[("on"+jw[xw.fullscreenerror]).toLowerCase()]=t}},Nw=n("n6bG");function Mw(t,e,n,r){return Object(Nw.a)(n)&&(r=n,n=void 0),r?Mw(t,e,n).pipe(Object(yt.a)(t=>Object(mt.a)(t)?r(...t):r(t))):new gt.a(r=>{Lw(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Lw(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)Lw(t[o],e,n,r,i)}r.add(o)}var Fw=n("Y7HM");function Vw(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class Uw{call(t,e){return e.subscribe(new Bw(t))}}class Bw extends Re{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=je(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function qw(t){return e=>e.lift(new Hw(t))}n("KqfI"),n("Lhse");class Hw{constructor(t){this.notifier=t}call(t,e){const n=new zw(t),r=Object(ze.c)(this.notifier,new ze.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class zw extends ze.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}n("WMd4"),n("w1tV"),"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const Gw={animation:!0,transitionTimerDelayMs:5};let Qw=(()=>{class t{constructor(){this.animation=Gw.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Ww=()=>{},{transitionTimerDelayMs:Kw}=Gw,$w=new Map,Yw=(t,e,n)=>{let{direction:r,maxHeight:i}=n;const{classList:o}=t;function s(){o.add("collapse"),"show"===r?o.add("show"):o.remove("show")}if(e)return i||(i=function(t){if("undefined"==typeof navigator)return"0px";const{classList:e}=t,n=e.contains("show");n||e.add("show"),t.style.height="";const r=t.getBoundingClientRect().height+"px";return n||e.remove("show"),r}(t),n.maxHeight=i,t.style.height="show"!==r?i:"0px",o.remove("collapse"),o.remove("collapsing"),o.remove("show"),function(t){(t||document.body).getBoundingClientRect()}(t),o.add("collapsing")),t.style.height="show"===r?i:"0px",()=>{s(),o.remove("collapsing"),t.style.height=""};s()};let Jw=(()=>{class t{constructor(t){this._ngbConfig=t}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Qw))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Qw))},token:t,providedIn:"root"}),t})(),Xw=(()=>{class t{constructor(t,e,n){this._element=t,this._zone=n,this.collapsed=!1,this.ngbCollapseChange=new r.n,this.shown=new r.n,this.hidden=new r.n,this.animation=e.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:t}){t.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(t=this.collapsed){this.collapsed=!t,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(t,e){return((t,e,n,r)=>{let i=r.context||{};const o=$w.get(e);if(o)switch(r.runningTransition){case"continue":return Be.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),$w.delete(e)}const s=n(e,r.animation,i)||Ww;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(Te.a)(void 0).pipe(function(t){return e=>new gt.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new Ee.a,c=new Ee.a,u=a.pipe(function(...t){return e=>Ue(e,Object(Te.a)(...t))}(!0));$w.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=Mw(e,"transitionend").pipe(qw(u),nn(({target:t})=>t===e));(function(...t){if(1===t.length){if(!Object(mt.a)(t[0]))return t[0];t=t[0]}return Object(De.a)(t,void 0).lift(new Uw)})(function(t=0,e,n){let r=-1;return Object(Fw.a)(e)?r=Number(e)<1?1:Number(e):Object(xe.a)(e)&&(n=e),Object(xe.a)(n)||(n=Co.a),new gt.a(e=>{const i=Object(Fw.a)(t)?t:+t-n.now();return n.schedule(Vw,i,{index:0,period:r,subscriber:e})})}(l+Kw).pipe(qw(u)),n,c).pipe(qw(u)).subscribe(()=>{$w.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()})(this._zone,this._element.nativeElement,Yw,{animation:e,runningTransition:"stop",context:{direction:t?"hide":"show"}})}_runTransitionWithEvents(t,e){this._runTransition(t,e).subscribe(()=>{t?this.hidden.emit():this.shown.emit()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(Jw),r.Mb(r.A))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbCollapse",""]],inputs:{collapsed:["ngbCollapse","collapsed"],animation:"animation"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[r.yb]}),t})(),Zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)),["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", "),new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),c=parseFloat(a.marginTop),u=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=s.top-(e.offsetHeight+c+u);break;case"bottom":d=s.top+s.height;break;case"left":f=s.left-(e.offsetWidth+l+h);break;case"right":f=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":f=s.left;break;case"right":f=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25),new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});const t_=["localVideoStream"],e_=["remoteVideoStream"],n_=["fullScreen"];function r_(t,e){if(1&t&&(r.Rb(0,"form",51),r.Nb(1,"img",52),r.Rb(2,"span"),r.wc(3),r.Qb(),r.Qb()),2&t){const t=e.ngIf;r.Ab(1),r.jc("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",r.rc),r.Ab(2),r.xc(t.displayName)}}function i_(t,e){if(1&t&&(r.Rb(0,"div",53),r.wc(1),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.yc(" ",t.errorMessage," ")}}function o_(t,e){if(1&t&&(r.Rb(0,"div",54),r.wc(1),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.yc(" ",t.infoMessage," ")}}function s_(t,e){if(1&t){const t=r.Sb();r.Rb(0,"button",55),r.bc("click",function(){return r.qc(t),r.dc().answerCall()}),r.Nb(1,"i",56),r.wc(2," Answer "),r.Qb()}}function a_(t,e){if(1&t&&(r.Rb(0,"div",57),r.wc(1),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.yc("Call Connected to ",null!=t.callerNumber&&t.callerNumber.length?t.callerNumber:t.connectedCallNumber,"")}}function c_(t,e){if(1&t){const t=r.Sb();r.Rb(0,"input",58),r.bc("ngModelChange",function(e){return r.qc(t),r.dc().chatMessage=e})("keydown.enter",function(){r.qc(t);const e=r.dc();return e.sendMessage(e.chatMessage,e.authService.userData)}),r.Qb()}if(2&t){const t=r.dc();r.ic("ngModel",t.chatMessage)}}function u_(t,e){if(1&t&&(r.Rb(0,"div",61),r.Rb(1,"div",62),r.Rb(2,"span",63),r.Nb(3,"i",64),r.wc(4),r.Qb(),r.Rb(5,"span"),r.wc(6),r.Qb(),r.Qb(),r.Qb()),2&t){const t=e.$implicit,n=e.index,i=r.dc(2);r.Cb(t.class),r.Eb("mb-2",n!==i.chatMessages.length-1),r.Ab(4),r.zc("",t.user," (",t.number,") "),r.Ab(2),r.yc(" ",t.text," ")}}function l_(t,e){if(1&t&&(r.Rb(0,"div",59),r.uc(1,u_,7,7,"div",60),r.Qb()),2&t){const t=r.dc();r.Ab(1),r.ic("ngForOf",t.chatMessages)}}let h_=(()=>{class t{constructor(t,e,n){this.authService=t,this.afAuth=e,this.router=n,this.showSidebar=!0,this.isCollapsed=!0,this.chatMessage="",this.chatMessages=[],this.callerNumber="",this.callConnected=!1,this.errorMessage="",this.infoMessage=""}ngOnInit(){this.hasFullscreenSupport=Dw.fullscreenEnabled,this.hasFullscreenSupport&&Dw.addEventListener("fullscreenchange",()=>{this.isFullscreen=!!Dw.fullscreenElement}),this.generateNumber(),this.checkincomingCall(),this.loadSounds()}loadSounds(){this.callingAudio=new Audio,this.callingAudio.src="../../../assets/audio/calling.mp3",this.callingAudio.load(),this.callingAudio.addEventListener("ended",()=>{this.callingAudio.currentTime=0,this.callingAudio.play()},!1),this.messageAudio=new Audio,this.messageAudio.src="../../../assets/audio/message.mp3",this.messageAudio.load()}checkincomingCall(){this.peer.on("connection",t=>{this.receivingDataConnection=t,t.on("data",t=>{t.class="received-message",this.chatMessages.unshift(t),this.messageAudio.play()}),t.on("close",()=>{this.hangUpAfterEvent("Call Disconnected by User",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Incoming Connection Error",!0)})}),this.peer.on("disconnected",()=>{this.hangUpAfterEvent("Peer Disconnected",!1)}),this.peer.on("error",()=>{this.hangUpAfterEvent("Number is Incorrect",!0)}),this.peer.on("call",t=>{this.receivingMediaConnection=t,this.incomingCall=!0,this.callingAudio.play()})}generateNumber(){this.myNumber=Math.floor(9e4*Math.random())+1e4;const t=this.myNumber.toString();this.peer=new Iw.a(t,{secure:!0,config:{iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10}})}callButton(t){const e=t.toString();this.errorMessage="",this.infoMessage="",this.activeDataConnection=this.peer.connect(e),this.activeDataConnection.on("data",t=>{t.class="received-message",this.chatMessages.unshift(t),this.messageAudio.play()}),this.activeDataConnection.on("open",()=>{this.connectedCallNumber=t,this.callConnected=!0}),this.activeDataConnection.on("close",()=>{this.hangUpAfterEvent("User Call Ended",!1)}),this.activeDataConnection.on("error",()=>{this.hangUpAfterEvent("Peer Connection Error",!0)}),navigator.getUserMedia({video:!0,audio:!0},t=>{this.myCallStream=t,this.localVideoStream.nativeElement.srcObject=t,this.activeMediaConnection=this.peer.call(e,t),this.activeMediaConnection.on("stream",t=>{this.remoteVideoStream.nativeElement.srcObject=t}),this.activeMediaConnection.on("close",()=>{this.hangUpAfterEvent("Active Call Closed",!1)}),this.activeMediaConnection.on("error",()=>{this.hangUpAfterEvent("Active Call Error",!0)})},t=>{this.hangUpAfterEvent("Failed to get local stream",!0)})}answerCall(){navigator.getUserMedia({video:!0,audio:!0},t=>{this.myCallStream=t,this.callerNumber=this.receivingMediaConnection.peer,this.localVideoStream.nativeElement.srcObject=t,this.receivingMediaConnection.answer(t),this.receivingMediaConnection.on("stream",t=>{this.callingAudio.pause(),this.incomingCall=!1,this.callConnected=!0,this.remoteVideoStream.nativeElement.srcObject=t}),this.receivingMediaConnection.on("close",()=>{this.hangUpAfterEvent("Receiving Call Closed",!1)}),this.receivingMediaConnection.on("error",()=>{this.incomingCall=!1,this.hangUpAfterEvent("Receiving Call Error",!0)})},t=>{this.hangUpAfterEvent("Failed to get Remote Stream",!0)})}hangUp(){this.activeDataConnection&&this.activeDataConnection.close(),this.activeMediaConnection&&this.activeMediaConnection.close(),this.receivingDataConnection&&this.receivingDataConnection.close(),this.receivingMediaConnection&&this.receivingMediaConnection.close(),this.myCallStream.getTracks().forEach(t=>{t.stop()}),this.localVideoStream.nativeElement.srcObject=null,this.remoteVideoStream.nativeElement.srcObject=null,this.incomingCall=!1,this.callConnected=!1}sendMessage(t,e){var n;if((null==t?void 0:t.length)&&(null===(n=null==e?void 0:e.displayName)||void 0===n?void 0:n.length)){const n={text:t,user:e.displayName,number:this.myNumber,class:"sent-message"};this.chatMessages.unshift(n),this.messageAudio.play(),this.chatMessage="",this.callConnected&&this.activeDataConnection&&this.activeDataConnection.send(n),this.callConnected&&this.receivingDataConnection&&this.receivingDataConnection.send(n)}}hangUpAfterEvent(t,e){this.hangUp(),e?(this.errorMessage=t,this.errorTimeout&&clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout(()=>{this.errorMessage=""},5e3)):(this.infoMessage=t,this.infoTimeout&&clearTimeout(this.errorTimeout),this.infoTimeout=setTimeout(()=>{this.infoMessage=""},5e3))}signOut(){this.hangUp(),setTimeout(()=>{this.authService.SignOut()},1e3)}openFullscreen(){if(this.hasFullscreenSupport){const t=this.fullScreen.nativeElement;this.isFullscreen?Dw.exitFullscreen(t):Dw.requestFullscreen(t)}else this.errorMessage="Full Screen Not Supported. Please Try Disabling Adblocker or Other Extensions",this.errorTimeout&&clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout(()=>{this.errorMessage=""},5e3)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Sw),r.Mb(ow),r.Mb(Xi))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-dashboard"]],viewQuery:function(t,e){if(1&t&&(r.Ac(t_,3),r.Ac(e_,3),r.Ac(n_,3)),2&t){let t;r.oc(t=r.cc())&&(e.localVideoStream=t.first),r.oc(t=r.cc())&&(e.remoteVideoStream=t.first),r.oc(t=r.cc())&&(e.fullScreen=t.first)}},decls:61,vars:13,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fa","fa-sign-out","mr-2"],["class","user-logo form-inline my-2 my-lg-0",4,"ngIf"],[1,"container"],[1,"title-number","justify-content-center","align-items-center","col-12","py-4","px-0"],[1,"alert","alert-success","text-align-center","m-0"],[1,"mb-0"],[1,"number"],["class","alert alert-danger m-0 mt-2",4,"ngIf"],["class","alert alert-info m-0 mt-2",4,"ngIf"],[1,"main-body","d-flex","flex-wrap"],[1,"main","col-xl-8","pl-xl-0","pr-xl-3","col-lg-8","pl-lg-0","pr-lg-3","col-12","p-0","pb-3","border-right"],[1,"alert","alert-primary","d-flex","align-items-center"],[1,"far","fa-video","mr-2"],[1,"dialer","d-flex"],[1,"input-group","mr-2"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"far","fa-phone-office"],["type","number","placeholder","Call Number","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","mr-2",3,"disabled","click"],[1,"far","fa-phone","mr-1"],["type","button",1,"btn","btn-danger","mr-2",3,"disabled","click"],[1,"far","fa-phone-slash","mr-1"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"videos","mt-3",3,"hidden"],["fullScreen",""],[1,"local-video"],["autoplay","","playsinline","",1,"rounded"],["remoteVideoStream",""],[1,"remote-video"],["localVideoStream",""],[1,"actions"],[1,"btn","btn-primary","rounded-circle","mr-3",3,"click"],[1,"far","fa-expand"],[1,"btn","btn-danger","rounded-circle",3,"click"],[1,"far","fa-phone-slash"],[1,"chat","col-xl-4","pl-xl-3","pr-xl-0","col-lg-4","pl-lg-3","pr-lg-0","col-12","p-0","pb-3"],[1,"far","fa-comment-alt","mr-2"],["class","text-success ml-2",4,"ngIf"],[1,"form-group"],["type","text","class","form-control","placeholder","Write Message","required","",3,"ngModel","ngModelChange","keydown.enter",4,"ngIf"],["class","messages form-control",4,"ngIf"],[1,"user-logo","form-inline","my-2","my-lg-0"],[1,"img","rounded-circle","mr-2",3,"src"],[1,"alert","alert-danger","m-0","mt-2"],[1,"alert","alert-info","m-0","mt-2"],["type","button",1,"btn","btn-success",3,"click"],[1,"far","fa-phone-volume","mr-1"],[1,"text-success","ml-2"],["type","text","placeholder","Write Message","required","",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],[1,"messages","form-control"],["class","message",3,"mb-2","class",4,"ngFor","ngForOf"],[1,"message"],[1,"message-body"],[1,"user"],[1,"fa","fa-user","mr-2"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"nav",0),r.Rb(1,"a",1),r.wc(2,"VideoWebRTC"),r.Qb(),r.Rb(3,"button",2),r.bc("click",function(){return r.qc(t),r.pc(6).toggle()}),r.Nb(4,"span",3),r.Qb(),r.Rb(5,"div",4,5),r.bc("ngbCollapseChange",function(t){return e.isCollapsed=t}),r.Rb(7,"ul",6),r.Rb(8,"li",7),r.Rb(9,"a",8),r.bc("click",function(){return e.signOut()}),r.Nb(10,"i",9),r.wc(11," Sign Out "),r.Qb(),r.Qb(),r.Qb(),r.uc(12,r_,4,2,"form",10),r.Qb(),r.Qb(),r.Rb(13,"div",11),r.Rb(14,"div",12),r.Rb(15,"div",13),r.Rb(16,"h4",14),r.Rb(17,"span",15),r.wc(18),r.Qb(),r.wc(19," is your phone number"),r.Qb(),r.Qb(),r.uc(20,i_,2,1,"div",16),r.uc(21,o_,2,1,"div",17),r.Qb(),r.Rb(22,"div",18),r.Rb(23,"div",19),r.Rb(24,"h5",20),r.Nb(25,"i",21),r.wc(26," Video "),r.Qb(),r.Rb(27,"div",22),r.Rb(28,"div",23),r.Rb(29,"div",24),r.Rb(30,"div",25),r.Nb(31,"i",26),r.Qb(),r.Qb(),r.Rb(32,"input",27),r.bc("ngModelChange",function(t){return e.callNumber=t}),r.Qb(),r.Qb(),r.Rb(33,"button",28),r.bc("click",function(){return e.callButton(e.callNumber)}),r.Nb(34,"i",29),r.wc(35," Call "),r.Qb(),r.Rb(36,"button",30),r.bc("click",function(){return e.hangUp()}),r.Nb(37,"i",31),r.wc(38," Hangup "),r.Qb(),r.uc(39,s_,3,0,"button",32),r.Qb(),r.Rb(40,"div",33,34),r.Rb(42,"div",35),r.Nb(43,"video",36,37),r.Qb(),r.Rb(45,"div",38),r.Nb(46,"video",36,39),r.Qb(),r.Rb(48,"div",40),r.Rb(49,"div",41),r.bc("click",function(){return e.openFullscreen()}),r.Nb(50,"i",42),r.Qb(),r.Rb(51,"div",43),r.bc("click",function(){return e.hangUp()}),r.Nb(52,"i",44),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(53,"div",45),r.Rb(54,"h5",20),r.Nb(55,"i",46),r.wc(56," Chat "),r.uc(57,a_,2,1,"div",47),r.Qb(),r.Rb(58,"div",48),r.uc(59,c_,1,1,"input",49),r.Qb(),r.uc(60,l_,2,1,"div",50),r.Qb(),r.Qb(),r.Qb()}2&t&&(r.Ab(5),r.ic("ngbCollapse",e.isCollapsed),r.Ab(7),r.ic("ngIf",e.authService.userData),r.Ab(6),r.xc(e.myNumber),r.Ab(2),r.ic("ngIf",null==e.errorMessage?null:e.errorMessage.length),r.Ab(1),r.ic("ngIf",null==e.infoMessage?null:e.infoMessage.length),r.Ab(11),r.ic("ngModel",e.callNumber),r.Ab(1),r.ic("disabled",!e.callNumber||e.callConnected||e.callNumber===e.myNumber),r.Ab(3),r.ic("disabled",!e.callConnected),r.Ab(3),r.ic("ngIf",e.incomingCall),r.Ab(1),r.ic("hidden",!e.callConnected),r.Ab(17),r.ic("ngIf",e.callConnected),r.Ab(2),r.ic("ngIf",e.callConnected),r.Ab(1),r.ic("ngIf",e.chatMessages.length))},directives:[Xw,P,me,Tt,be,qt,fe,pe,Ht,le,k],styles:[".nav-link[_ngcontent-%COMP%]{cursor:pointer}.user-logo[_ngcontent-%COMP%]{display:flex;color:var(--white);align-items:center}.user-logo[_ngcontent-%COMP%]   img.img[_ngcontent-%COMP%]{width:40px;height:40px}.title-number[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--danger);text-decoration:underline}.messages[_ngcontent-%COMP%]{height:calc(100vh - 155px);overflow-y:auto;padding:.5rem}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;width:100%}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:3px 10px;border-radius:6px;background:#d4e9ff;border:1px solid #027bfe}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-weight:500;color:var(--blue)}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]{justify-content:flex-end;text-align:right}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background:#ffe6e8;border:1px solid #ed858c}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:var(--red)}.dialer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:50%}.videos[_ngcontent-%COMP%]{position:relative}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]{width:100%;height:100%}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;border:4px solid var(--green)}.videos[_ngcontent-%COMP%]   .remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;width:25%;max-height:25%;border:4px solid var(--yellow);right:20px;bottom:25px}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;bottom:25px;width:100%}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:38px;height:38px}@media (max-width:1023px){.main[_ngcontent-%COMP%]{border-right:0!important}}"]}),t})(),d_=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){this.resetPasswordForm={email:""}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Sw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-forgot-password"]],decls:23,vars:3,consts:[["name","userResetPasswordForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],["userResetPasswordForm","ngForm"],[1,"login-logo","mb-2"],[1,"fas","fa-video","mr-2"],[1,"login-block"],[1,"text-center"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"validation-message"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(t,e){if(1&t){const t=r.Sb();r.Rb(0,"form",0,1),r.Rb(2,"h4",2),r.Nb(3,"i",3),r.wc(4," VideoWebRTC "),r.Qb(),r.Rb(5,"div",4),r.Rb(6,"h5"),r.wc(7,"Reset Password"),r.Qb(),r.Rb(8,"p",5),r.wc(9,"Please enter your email address to "),r.Nb(10,"br"),r.wc(11," request a password reset"),r.Qb(),r.Rb(12,"div",6),r.Rb(13,"input",7,8),r.bc("ngModelChange",function(t){return e.resetPasswordForm.email=t})("ngModelChange",function(){r.qc(t);const n=r.pc(14);return e.authService.getValidationMessage(n)}),r.Qb(),r.Rb(15,"div",9),r.wc(16),r.Qb(),r.Qb(),r.Rb(17,"div",6),r.Rb(18,"button",10),r.bc("click",function(){return e.authService.ForgotPassword(e.resetPasswordForm.email)}),r.wc(19," Reset Password "),r.Qb(),r.Qb(),r.Rb(20,"div",11),r.Rb(21,"span",12),r.wc(22,"Go Back to ? Sign In"),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.pc(1),n=r.pc(14);r.Ab(13),r.ic("ngModel",e.resetPasswordForm.email),r.Ab(3),r.xc(n.errors&&n.errors.validationMessage),r.Ab(2),r.ic("disabled",t.invalid)}},directives:[pe,Ht,le,Tt,be,_e,qt,fe,Zi],styles:[""]}),t})();function f_(t,e){if(1&t&&(r.Rb(0,"div",5),r.Rb(1,"p",10),r.wc(2,"We have sent a confirmation email to "),r.Rb(3,"strong"),r.wc(4),r.Qb(),r.wc(5,"."),r.Qb(),r.Rb(6,"p",10),r.wc(7,"Please check your email and click on the link to verfiy your email address."),r.Qb(),r.Qb()),2&t){const t=e.ngIf;r.Ab(4),r.xc(t.email)}}let p_=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Sw))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-verify-email"]],decls:15,vars:2,consts:[["novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","mr-2"],[1,"login-block"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-redo-alt","mr-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"],[1,"text-center"]],template:function(t,e){1&t&&(r.Rb(0,"form",0),r.Rb(1,"h4",1),r.Nb(2,"i",2),r.wc(3," VideoWebRTC "),r.Qb(),r.Rb(4,"div",3),r.Rb(5,"h5"),r.wc(6,"Thank You for Registering"),r.Qb(),r.uc(7,f_,8,1,"div",4),r.Rb(8,"div",5),r.Rb(9,"button",6),r.bc("click",function(){return e.authService.SendVerificationMail(e.authService.userData)}),r.Nb(10,"i",7),r.wc(11," Resend Verification Email "),r.Qb(),r.Qb(),r.Rb(12,"div",8),r.Rb(13,"span",9),r.wc(14,"Go Back to ? Sign In"),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(7),r.ic("ngIf",e.authService.userData),r.Ab(2),r.ic("disabled",!e.authService.userData))},directives:[pe,Ht,le,P,Zi],styles:[""]}),t})();const g_=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:Tw},{path:"register-user",component:Ew},{path:"dashboard",component:h_,canActivate:[(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return!!this.authService.isLoggedIn||(this.router.navigate(["sign-in"],{state:{redirect:this.router.url}}),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Sw),r.Yb(Xi))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]},{path:"forgot-password",component:d_},{path:"verify-email-address",component:p_}];let m_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[ho.forRoot(g_)],ho]}),t})(),y_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:[eo],styles:[""]}),t})();const v_={apiKey:"AIzaSyCIHKjcCgDNcTKRhujdEcOsODVjsURkgF8",authDomain:"webrtc-720e4.firebaseapp.com",projectId:"webrtc-720e4",storageBucket:"webrtc-720e4.appspot.com",messagingSenderId:"837219898574",appId:"1:837219898574:web:318a8d9ff02d67dabf2c9f",measurementId:"G-6TXG2ZM2S6"};let b_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t,bootstrap:[y_]}),t.\u0275inj=r.Jb({providers:[Sw],imports:[[ft,m_,ko.a.initializeApp(v_),sw,Cw,Se,Zw]]}),t})();Object(r.T)(),ht().bootstrapModule(b_).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return c});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function c(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);