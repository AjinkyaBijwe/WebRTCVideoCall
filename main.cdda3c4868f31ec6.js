"use strict";(self.webpackChunkvideoWebRTC=self.webpackChunkvideoWebRTC||[]).push([[792],{401:(us,be,k)=>{k.d(be,{Am:()=>_n,Bd:()=>Ee,FA:()=>Kt,Fy:()=>ls,I9:()=>hi,Im:()=>ks,Ku:()=>sn,Ll:()=>kn,T9:()=>Mn,Uj:()=>Ct,XA:()=>gn,ZQ:()=>mt,bD:()=>mo,c1:()=>wr,cY:()=>mn,eX:()=>ve,g:()=>ze,gR:()=>Cn,hp:()=>va,jZ:()=>cr,lT:()=>$a,lV:()=>Uo,mS:()=>nn,nr:()=>ae,p7:()=>Pn,sr:()=>ds,tD:()=>Ps,u:()=>pe,zW:()=>_e,zw:()=>Je});const K=function(V){const O=[];let $=0;for(let ye=0;ye<V.length;ye++){let q=V.charCodeAt(ye);q<128?O[$++]=q:q<2048?(O[$++]=q>>6|192,O[$++]=63&q|128):55296==(64512&q)&&ye+1<V.length&&56320==(64512&V.charCodeAt(ye+1))?(q=65536+((1023&q)<<10)+(1023&V.charCodeAt(++ye)),O[$++]=q>>18|240,O[$++]=q>>12&63|128,O[$++]=q>>6&63|128,O[$++]=63&q|128):(O[$++]=q>>12|224,O[$++]=q>>6&63|128,O[$++]=63&q|128)}return O},Bt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,O){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=O?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let q=0;q<V.length;q+=3){const et=V[q],nt=q+1<V.length,nr=nt?V[q+1]:0,jt=q+2<V.length,bt=jt?V[q+2]:0;let Fs=(15&nr)<<2|bt>>6,wa=63&bt;jt||(wa=64,nt||(Fs=64)),ye.push($[et>>2],$[(3&et)<<4|nr>>4],$[Fs],$[wa])}return ye.join("")},encodeString(V,O){return this.HAS_NATIVE_SUPPORT&&!O?btoa(V):this.encodeByteArray(K(V),O)},decodeString(V,O){return this.HAS_NATIVE_SUPPORT&&!O?atob(V):function(V){const O=[];let $=0,ye=0;for(;$<V.length;){const q=V[$++];if(q<128)O[ye++]=String.fromCharCode(q);else if(q>191&&q<224){const et=V[$++];O[ye++]=String.fromCharCode((31&q)<<6|63&et)}else if(q>239&&q<365){const jt=((7&q)<<18|(63&V[$++])<<12|(63&V[$++])<<6|63&V[$++])-65536;O[ye++]=String.fromCharCode(55296+(jt>>10)),O[ye++]=String.fromCharCode(56320+(1023&jt))}else{const et=V[$++],nt=V[$++];O[ye++]=String.fromCharCode((15&q)<<12|(63&et)<<6|63&nt)}}return O.join("")}(this.decodeStringToByteArray(V,O))},decodeStringToByteArray(V,O){this.init_();const $=O?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let q=0;q<V.length;){const et=$[V.charAt(q++)],nr=q<V.length?$[V.charAt(q)]:0;++q;const bt=q<V.length?$[V.charAt(q)]:64;++q;const je=q<V.length?$[V.charAt(q)]:64;if(++q,null==et||null==nr||null==bt||null==je)throw new Tt;ye.push(et<<2|nr>>4),64!==bt&&(ye.push(nr<<4&240|bt>>2),64!==je&&ye.push(bt<<6&192|je))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class Tt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ct=function(V){return function(V){const O=K(V);return Bt.encodeByteArray(O,!0)}(V).replace(/\./g,"")},pe=function(V){try{return Bt.decodeString(V,!0)}catch(O){console.error("base64Decode failed: ",O)}return null};function Je(V,O){if(!(O instanceof Object))return O;switch(O.constructor){case Date:return new Date(O.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return O}for(const $ in O)!O.hasOwnProperty($)||!Ht($)||(V[$]=Je(V[$],O[$]));return V}function Ht(V){return"__proto__"!==V}function nn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ft=()=>{try{return nn().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const O=V&&pe(V[1]);return O&&JSON.parse(O)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},Mn=()=>{var V;return null===(V=Ft())||void 0===V?void 0:V.config},gn=V=>{var O;return null===(O=Ft())||void 0===O?void 0:O[`_${V}`]};class mn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((O,$)=>{this.resolve=O,this.reject=$})}wrapCallback(O){return($,ye)=>{$?this.reject($):this.resolve(ye),"function"==typeof O&&(this.promise.catch(()=>{}),1===O.length?O($):O($,ye))}}}function ls(V,O){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=O||"demo-project",q=V.iat||0,et=V.sub||V.user_id;if(!et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:q,exp:q+3600,auth_time:q,sub:et,user_id:et,firebase:{sign_in_provider:"custom",identities:{}}},V);return[Ct(JSON.stringify({alg:"none",type:"JWT"})),Ct(JSON.stringify(nt)),""].join(".")}function mt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function cr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function kn(){var V;const O=null===(V=Ft())||void 0===V?void 0:V.forceEnvironment;if("node"===O)return!0;if("browser"===O)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return typeof window<"u"||Pn()}function Pn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function wr(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function ds(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Uo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $a(){const V=mt();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function ae(){return!kn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _e(){try{return"object"==typeof indexedDB}catch{return!1}}function ve(){return new Promise((V,O)=>{try{let $=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(ye);q.onsuccess=()=>{q.result.close(),$||self.indexedDB.deleteDatabase(ye),V(!0)},q.onupgradeneeded=()=>{$=!1},q.onerror=()=>{var et;O((null===(et=q.error)||void 0===et?void 0:et.message)||"")}}catch($){O($)}})}class ze extends Error{constructor(O,$,ye){super($),this.code=O,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(O,$,ye){this.service=O,this.serviceName=$,this.errors=ye}create(O,...$){const ye=$[0]||{},q=`${this.service}/${O}`,et=this.errors[O],nt=et?function Q(V,O){return V.replace(G,($,ye)=>{const q=O[ye];return null!=q?String(q):`<${ye}?>`})}(et,ye):"Error";return new ze(q,`${this.serviceName}: ${nt} (${q}).`,ye)}}const G=/\{\$([^}]+)}/g;function Cn(V,O){return Object.prototype.hasOwnProperty.call(V,O)}function ks(V){for(const O in V)if(Object.prototype.hasOwnProperty.call(V,O))return!1;return!0}function mo(V,O){if(V===O)return!0;const $=Object.keys(V),ye=Object.keys(O);for(const q of $){if(!ye.includes(q))return!1;const et=V[q],nt=O[q];if(Nr(et)&&Nr(nt)){if(!mo(et,nt))return!1}else if(et!==nt)return!1}for(const q of ye)if(!$.includes(q))return!1;return!0}function Nr(V){return null!==V&&"object"==typeof V}function _n(V){const O=[];for(const[$,ye]of Object.entries(V))Array.isArray(ye)?ye.forEach(q=>{O.push(encodeURIComponent($)+"="+encodeURIComponent(q))}):O.push(encodeURIComponent($)+"="+encodeURIComponent(ye));return O.length?"&"+O.join("&"):""}function hi(V){const O={};return V.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[q,et]=ye.split("=");O[decodeURIComponent(q)]=decodeURIComponent(et)}}),O}function va(V){const O=V.indexOf("?");if(!O)return"";const $=V.indexOf("#",O);return V.substring(O,$>0?$:void 0)}function Ps(V,O){const $=new Os(V,O);return $.subscribe.bind($)}class Os{constructor(O,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{O(this)}).catch(ye=>{this.error(ye)})}next(O){this.forEachObserver($=>{$.next(O)})}error(O){this.forEachObserver($=>{$.error(O)}),this.close(O)}complete(){this.forEachObserver(O=>{O.complete()}),this.close()}subscribe(O,$,ye){let q;if(void 0===O&&void 0===$&&void 0===ye)throw new Error("Missing Observer.");q=function uu(V,O){if("object"!=typeof V||null===V)return!1;for(const $ of O)if($ in V&&"function"==typeof V[$])return!0;return!1}(O,["next","error","complete"])?O:{next:O,error:$,complete:ye},void 0===q.next&&(q.next=pi),void 0===q.error&&(q.error=pi),void 0===q.complete&&(q.complete=pi);const et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),et}unsubscribeOne(O){void 0===this.observers||void 0===this.observers[O]||(delete this.observers[O],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(O){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,O)}sendOne(O,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[O])try{$(this.observers[O])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(O){this.finalized||(this.finalized=!0,void 0!==O&&(this.finalError=O),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pi(){}function sn(V){return V&&V._delegate?V._delegate:V}},318:(us,be,k)=>{var w={};k.r(w),k.d(w,{fixNegotiationNeeded:()=>HJ,shimAddTrackRemoveTrack:()=>$J,shimAddTrackRemoveTrackWithNative:()=>jJ,shimGetSendersWithDtmf:()=>BJ,shimGetUserMedia:()=>FJ,shimMediaStream:()=>LJ,shimOnTrack:()=>VJ,shimPeerConnection:()=>H2,shimSenderReceiverGetStats:()=>UJ});var Z={};k.r(Z),k.d(Z,{shimAddTransceiver:()=>YJ,shimCreateAnswer:()=>ZJ,shimCreateOffer:()=>XJ,shimGetDisplayMedia:()=>dRe,shimGetParameters:()=>JJ,shimGetUserMedia:()=>GJ,shimOnTrack:()=>qJ,shimPeerConnection:()=>G2,shimRTCDataChannel:()=>QJ,shimReceiverGetStats:()=>WJ,shimRemoveStream:()=>KJ,shimSenderGetStats:()=>zJ});var ue={};k.r(ue),k.d(ue,{shimAudioContext:()=>cX,shimCallbacksAPI:()=>nX,shimConstraints:()=>iX,shimCreateOfferLegacy:()=>aX,shimGetUserMedia:()=>rX,shimLocalStreamsAPI:()=>eX,shimRTCIceServerUrls:()=>sX,shimRemoteStreamsAPI:()=>tX,shimTrackEventTransceiver:()=>oX});var K={};k.r(K),k.d(K,{removeExtmapAllowMixed:()=>W2,shimAddIceCandidateNullOrEmpty:()=>yS,shimConnectionState:()=>z2,shimMaxMessageSize:()=>mS,shimParameterlessSetLocalDescription:()=>vS,shimRTCIceCandidate:()=>gS,shimRTCIceCandidateRelayProtocol:()=>q2,shimSendThrowTypeError:()=>_S});var D=k(467);let Tt=null,Ct=1;const pe=Symbol("SIGNAL");function se(n){const e=Tt;return Tt=n,e}function Ft(n){if((!Ee(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Ct)){if(!n.producerMustRecompute(n)&&!ls(n))return n.dirty=!1,void(n.lastCleanEpoch=Ct);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ct}}function ls(n){Pn(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ft(t),r!==t.version))return!0}return!1}function kn(n,e){if(function wr(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Pn(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)kn(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Pn(i),i.producerIndexOfThis[r]=e}}function Ee(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pn(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let ae=null;function Ye(n){return"function"==typeof n}function Cn(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ms=Cn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ks(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class tr{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ye(r))try{r()}catch(s){e=s instanceof Ms?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{ya(s)}catch(o){e=e??[],o instanceof Ms?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ms(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ya(e);else{if(e instanceof tr){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ks(t,e)}remove(e){const{_finalizers:t}=this;t&&ks(t,e),e instanceof tr&&e._removeParent(this)}}tr.EMPTY=(()=>{const n=new tr;return n.closed=!0,n})();const mo=tr.EMPTY;function Nr(n){return n instanceof tr||n&&"closed"in n&&Ye(n.remove)&&Ye(n.add)&&Ye(n.unsubscribe)}function ya(n){Ye(n)?n():n.unsubscribe()}const _n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},hi={setTimeout(n,e,...t){const{delegate:r}=hi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=hi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function va(n){hi.setTimeout(()=>{const{onUnhandledError:e}=_n;if(!e)throw n;e(n)})}function fi(){}const Ps=uu("C",void 0,void 0);function uu(n,e,t){return{kind:n,value:e,error:t}}let pi=null;function ba(n){if(_n.useDeprecatedSynchronousErrorHandling){const e=!pi;if(e&&(pi={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=pi;if(pi=null,t)throw r}}else n()}class mc extends tr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nr(e)&&e.add(this)):this.destination=Cl}static create(e,t,r){return new zr(e,t,r)}next(e){this.isStopped?Ga(function sh(n){return uu("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ga(function Os(n){return uu("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ga(Ps,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _o=Function.prototype.bind;function _c(n,e){return _o.call(n,e)}class Rp{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ea(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ea(r)}else Ea(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ea(t)}}}class zr extends mc{constructor(e,t,r){let i;if(super(),Ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&_n.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_c(e.next,s),error:e.error&&_c(e.error,s),complete:e.complete&&_c(e.complete,s)}):i=e}this.destination=new Rp(i)}}function Ea(n){_n.useDeprecatedSynchronousErrorHandling?function Ia(n){_n.useDeprecatedSynchronousErrorHandling&&pi&&(pi.errorThrown=!0,pi.error=n)}(n):va(n)}function Ga(n,e){const{onStoppedNotification:t}=_n;t&&hi.setTimeout(()=>t(n,e))}const Cl={closed:!0,next:fi,error:function Ha(n){throw n},complete:fi},qa="function"==typeof Symbol&&Symbol.observable||"@@observable";function yo(n){return n}function lu(n){return 0===n.length?yo:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let sn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function $(n){return n&&n instanceof mc||function O(n){return n&&Ye(n.next)&&Ye(n.error)&&Ye(n.complete)}(n)&&Nr(n)}(t)?t:new zr(t,r,i);return ba(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=V(r))((i,s)=>{const o=new zr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[qa](){return this}pipe(...t){return lu(t)(this)}toPromise(t){return new(t=V(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function V(n){var e;return null!==(e=n??_n.Promise)&&void 0!==e?e:Promise}const ye=Cn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let q=(()=>{class n extends sn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new et(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ye}next(t){ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?mo:(this.currentObservers=null,s.push(t),new tr(()=>{this.currentObservers=null,ks(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new sn;return t.source=this,t}}return n.create=(e,t)=>new et(e,t),n})();class et extends q{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:mo}}class nt extends q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function nr(n){return Ye(n?.lift)}function jt(n){return e=>{if(nr(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(n,e,t,r,i){return new gi(n,e,t,r,i)}class gi extends mc{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function je(n,e){return jt((t,r)=>{let i=0;t.subscribe(bt(r,s=>{r.next(n.call(e,s,i++))}))})}const wa="https://g.co/ng/security#xss";class we extends Error{constructor(e,t){super(function za(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function te(n){return{toString:n}.toString()}const me="__parameters__";function xt(n,e,t){return te(()=>{const r=function Rt(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,u,l){const f=c.hasOwnProperty(me)?c[me]:Object.defineProperty(c,me,{value:[]})[me];for(;f.length<=l;)f.push(null);return(f[l]=f[l]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const pt=globalThis;function yn(n){for(let e in n)if(n[e]===yn)return e;throw Error("Could not find renamed property on target object.")}function ch(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Wr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function uh(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bR=yn({__forward_ref__:yn});function An(n){return n.__forward_ref__=An,n.toString=function(){return Wr(this())},n}function It(n){return Np(n)?n():n}function Np(n){return"function"==typeof n&&n.hasOwnProperty(bR)&&n.__forward_ref__===An}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function un(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dl(n){return Mp(n,Pp)||Mp(n,tw)}function Mp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Al(n){return n&&(n.hasOwnProperty(dh)||n.hasOwnProperty(hy))?n[dh]:null}const Pp=yn({\u0275prov:yn}),dh=yn({\u0275inj:yn}),tw=yn({ngInjectableDef:yn}),hy=yn({ngInjectorDef:yn});class Pe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ke({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _y(n){return n&&!!n.\u0275providers}const Vs=yn({\u0275cmp:yn}),yy=yn({\u0275dir:yn}),fh=yn({\u0275pipe:yn}),iw=yn({\u0275mod:yn}),$o=yn({\u0275fac:yn}),ph=yn({__NG_ELEMENT_ID__:yn}),Lp=yn({__NG_ENV_ID__:yn});function Nt(n){return"string"==typeof n?n:null==n?"":String(n)}function ow(n,e){throw new we(-201,!1)}var Qt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Qt||{});let Ho;function fu(){return Ho}function Kr(n){const e=Ho;return Ho=n,e}function vy(n,e,t){const r=Dl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Qt.Optional?null:void 0!==e?e:void ow()}const mh={},vc="__NG_DI_FLAG__",Vp="ngTempTokenPath",aw=/\n/gm,Up="__source";let Di;function bc(n){const e=Di;return Di=n,e}function by(n,e=Qt.Default){if(void 0===Di)throw new we(-203,!1);return null===Di?vy(n,void 0,e):Di.get(n,e&Qt.Optional?null:void 0,e)}function Oe(n,e=Qt.Default){return(fu()||by)(It(n),e)}function j(n,e=Qt.Default){return Oe(n,jp(e))}function jp(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _h(n){const e=[];for(let t=0;t<n.length;t++){const r=It(n[t]);if(Array.isArray(r)){if(0===r.length)throw new we(900,!1);let i,s=Qt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=Ey(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(Oe(i,s))}else e.push(Oe(r))}return e}function pu(n,e){return n[vc]=e,n.prototype[vc]=e,n}function Ey(n){return n[vc]}const gu=pu(xt("Optional"),8),Sl=pu(xt("SkipSelf"),4);function Wa(n,e){return n.hasOwnProperty($o)?n[$o]:null}function mu(n,e){n.forEach(t=>Array.isArray(t)?mu(t,e):e(t))}function Gp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function hs(n,e,t){let r=Ic(n,e);return r>=0?n[1|r]=t:(r=~r,function xl(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Nl(n,e){const t=Ic(n,e);if(t>=0)return n[1|t]}function Ic(n,e){return function mw(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Io={},ln=[],Ka=new Pe(""),_w=new Pe("",-1),yh=new Pe("");class vh{get(e,t=mh){if(t===mh){const r=new Error(`NullInjectorError: No provider for ${Wr(e)}!`);throw r.name="NullInjectorError",r}return t}}var Ml=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ml||{}),Go=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Go||{}),vn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(vn||{});function RR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function bh(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];vw(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function yw(n){return 3===n||4===n||6===n}function vw(n){return 64===n.charCodeAt(0)}function _u(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||bw(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function bw(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Iw="ng-template";function Cy(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==RR(e[i+1].toLowerCase(),t,0))return!0}else if(Dy(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function Dy(n){return 4===n.type&&n.value!==Iw}function Ay(n,e,t){return e===(4!==n.type||t?n.value:Iw)}function xR(n,e,t){let r=4;const i=n.attrs,s=null!==i?function Sy(n){for(let e=0;e<n.length;e++)if(yw(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Ay(n,c,t)||""===c&&1===e.length){if(Xs(r))return!1;o=!0}}else if(8&r){if(null===i||!Cy(n,i,c,t)){if(Xs(r))return!1;o=!0}}else{const u=e[++a],l=NR(c,i,Dy(n),t);if(-1===l){if(Xs(r))return!1;o=!0;continue}if(""!==u){let f;if(f=l>s?"":i[l+1].toLowerCase(),2&r&&u!==f){if(Xs(r))return!1;o=!0}}}}else{if(!o&&!Xs(r)&&!Xs(c))return!1;if(o&&Xs(c))continue;o=!1,r=c|1&r}}return Xs(r)||o}function Xs(n){return!(1&n)}function NR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function kR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function zp(n,e,t=!1){for(let r=0;r<e.length;r++)if(xR(n,e[r],t))return!0;return!1}function Ry(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Ew(n,e){return n?":not("+e.trim()+")":e}function xy(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Xs(o)&&(e+=Ew(s,i),i=""),r=o,s=s||!Xs(r);t++}return""!==i&&(e+=Ew(s,i)),e}function Vr(n){return te(()=>{const e=LR(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ml.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Go.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""};Wp(t);const r=n.dependencies;return t.directiveDefs=Kp(r,!1),t.pipeDefs=Kp(r,!0),t.id=function j$(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function Ny(n){return Yt(n)||Qr(n)}function FR(n){return null!==n}function Xt(n){return te(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function My(n,e){if(null==n)return Io;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=vn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==vn.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Ge(n){return te(()=>{const e=LR(n);return Wp(e),e})}function Yt(n){return n[Vs]||null}function Qr(n){return n[yy]||null}function Ai(n){return n[fh]||null}function fs(n,e){const t=n[iw]||null;if(!t&&!0===e)throw new Error(`Type ${Wr(n)} does not have '\u0275mod' property.`);return t}function LR(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Io,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:My(n.inputs,e),outputs:My(n.outputs),debugInfo:null}}function Wp(n){n.features?.forEach(e=>e(n))}function Kp(n,e){if(!n)return null;const t=e?Ai:Ny;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(FR)}function $$(...n){return{\u0275providers:ww(0,n),\u0275fromNgModule:!0}}function ww(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return mu(e,o=>{const a=o;Py(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&BR(i,s),t}function BR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Qa(i,s=>{e(s,r)})}}function Py(n,e,t,r){if(!(n=It(n)))return!1;let i=null,s=Al(n);const o=!s&&Yt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Al(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)Py(u,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{mu(s.imports,l=>{Py(l,e,t,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&BR(u,e)}if(!a){const u=Wa(i)||(()=>new i);e({provide:i,useFactory:u,deps:ln},i),e({provide:yh,useValue:i,multi:!0},i),e({provide:Ka,useValue:()=>Oe(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const u=n;Qa(c,l=>{e(l,u)})}}}return i!==n&&void 0!==n.providers}function Qa(n,e){for(let t of n)_y(t)&&(t=t.\u0275providers),Array.isArray(t)?Qa(t,e):e(t)}const Oy=yn({provide:String,useValue:yn});function Fy(n){return null!==n&&"object"==typeof n&&Oy in n}function kl(n){return"function"==typeof n}const Ly=new Pe(""),Pl={},Vy={};let By;function vu(){return void 0===By&&(By=new vh),By}class Si{}class Ol extends Si{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jy(e,o=>this.processProvider(o)),this.records.set(_w,Zs(void 0,this)),i.has("environment")&&this.records.set(Si,Zs(void 0,this));const s=this.records.get(Ly);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yh,ln,Qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=se(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=bc(this),r=Kr(void 0);try{return e()}finally{bc(t),Kr(r)}}get(e,t=mh,r=Qt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Lp))return e[Lp](this);r=jp(r);const s=bc(this),o=Kr(void 0);try{if(!(r&Qt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function Ih(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pe}(e)&&Dl(e);c=u&&this.injectableDefInScope(u)?Zs(Uy(e),Pl):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Qt.Self?vu():this.parent).get(e,t=r&Qt.Optional&&t===mh?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Vp]=a[Vp]||[]).unshift(Wr(e)),s)throw a;return function $p(n,e,t,r){const i=n[Vp];throw e[Up]&&i.unshift(e[Up]),n.message=function wy(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Wr(e);if(Array.isArray(e))i=e.map(Wr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Wr(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(aw,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Vp]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Kr(o),bc(s)}}resolveInjectorInitializers(){const e=se(null),t=bc(this),r=Kr(void 0);try{const s=this.get(Ka,ln,Qt.Self);for(const o of s)o()}finally{bc(t),Kr(r),se(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Wr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(e){let t=kl(e=It(e))?e:It(e&&e.provide);const r=function Qp(n){return Fy(n)?Zs(void 0,n.useValue):Zs(jR(n),Pl)}(e);if(!kl(e)&&!0===e.multi){let i=this.records.get(t);i||(i=Zs(void 0,Pl,!0),i.factory=()=>_h(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=se(null);try{return t.value===Pl&&(t.value=Vy,t.value=t.factory()),"object"==typeof t.value&&t.value&&function HR(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=It(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Uy(n){const e=Dl(n),t=null!==e?e.factory:Wa(n);if(null!==t)return t;if(n instanceof Pe)throw new we(204,!1);if(n instanceof Function)return function H$(n){if(n.length>0)throw new we(204,!1);const t=function kp(n){return n&&(n[Pp]||n[tw])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new we(204,!1)}function jR(n,e,t){let r;if(kl(n)){const i=It(n);return Wa(i)||Uy(i)}if(Fy(n))r=()=>It(n.useValue);else if(function Dw(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(..._h(n.deps||[]));else if(function Cw(n){return!(!n||!n.useExisting)}(n))r=()=>Oe(It(n.useExisting));else{const i=It(n&&(n.useClass||n.provide));if(!function $R(n){return!!n.deps}(n))return Wa(i)||Uy(i);r=()=>new i(..._h(n.deps))}return r}function Zs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jy(n,e){for(const t of n)Array.isArray(t)?jy(t,e):t&&_y(t)?jy(t.\u0275providers,e):e(t)}function Un(n,e){n instanceof Ol&&n.assertNotDestroyed();const r=bc(n),i=Kr(void 0);try{return e()}finally{bc(r),Kr(i)}}function Aw(){return void 0!==fu()||null!=function uw(){return Di}()}const Wn=0,Me=1,ht=2,Mr=3,Ta=4,kr=5,eo=6,Ll=7,Kn=8,Br=9,qo=10,yt=11,Th=12,xw=13,Vl=14,rr=15,Ch=16,Bl=17,Ya=18,Dh=19,qy=20,wc=21,Xp=22,Iu=23,At=25,zy=1,Ca=7,jl=9,gr=10;var $l=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}($l||{});function mi(n){return Array.isArray(n)&&"object"==typeof n[zy]}function zi(n){return Array.isArray(n)&&!0===n[zy]}function Ah(n){return!!(4&n.flags)}function zo(n){return n.componentOffset>-1}function Da(n){return!(1&~n.flags)}function to(n){return!!n.template}function Wy(n){return!!(512&n[ht])}class XR{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function tg(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function _i(){return Bw}function Bw(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZR),Yy}function Yy(){const n=ng(this),e=n?.current;if(e){const t=n.previous;if(t===Io)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ZR(n,e,t,r,i){const s=this.declaredInputs[r],o=ng(n)||function ex(n,e){return n[Uw]=e}(n,{previous:Io,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new XR(u&&u.currentValue,t,c===Io),tg(n,e,i,t)}_i.ngInherit=!0;const Uw="__ngSimpleChanges__";function ng(n){return n[Uw]||null}const Eo=function(n,e,t){};let jw=!1;function On(n){for(;Array.isArray(n);)n=n[Wn];return n}function Hl(n,e){return On(e[n])}function Ri(n,e){return On(e[n.index])}function xh(n,e){return n.data[e]}function ps(n,e){const t=e[n];return mi(t)?t:t[Wn]}function Zy(n){return!(128&~n[ht])}function Aa(n,e){return null==e?null:n[e]}function Nh(n){n[Bl]=0}function ix(n){1024&n[ht]||(n[ht]|=1024,Zy(n)&&Mh(n))}function ev(n){return!!(9216&n[ht]||n[Iu]?.dirty)}function tv(n){n[qo].changeDetectionScheduler?.notify(1),ev(n)?Mh(n):64&n[ht]&&(function $w(){return jw}()?(n[ht]|=1024,Mh(n)):n[qo].changeDetectionScheduler?.notify())}function Mh(n){n[qo].changeDetectionScheduler?.notify();let e=wu(n);for(;null!==e&&!(8192&e[ht])&&(e[ht]|=8192,Zy(e));)e=wu(e)}function sg(n,e){if(!(256&~n[ht]))throw new we(911,!1);null===n[wc]&&(n[wc]=[]),n[wc].push(e)}function wu(n){const e=n[Mr];return zi(e)?e[Mr]:e}const wt={lFrame:Jw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function rv(){return wt.bindingsEnabled}function ql(){return null!==wt.skipHydrationRootTNode}function fe(){return wt.lFrame.lView}function Zt(){return wt.lFrame.tView}function Lt(n){return wt.lFrame.contextLView=n,n[Kn]}function Gt(n){return wt.lFrame.contextLView=null,n}function Sn(){let n=sv();for(;null!==n&&64===n.type;)n=n.parent;return n}function sv(){return wt.lFrame.currentTNode}function Sa(n,e){const t=wt.lFrame;t.currentTNode=n,t.isParent=e}function zw(){return wt.lFrame.isParent}function kh(){wt.lFrame.isParent=!1}function Wo(){return wt.lFrame.bindingIndex++}function Xa(n){const e=wt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fx(n,e){const t=wt.lFrame;t.bindingIndex=t.bindingRootIndex=n,uv(e)}function uv(n){wt.lFrame.currentDirectiveIndex=n}function lv(){return wt.lFrame.currentQueryIndex}function og(n){wt.lFrame.currentQueryIndex=n}function dv(n){const e=n[Me];return 2===e.type?e.declTNode:1===e.type?n[kr]:null}function Qw(n,e,t){if(t&Qt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Qt.Host||(i=dv(s),null===i||(s=s[Vl],10&i.type))););if(null===i)return!1;e=i,n=s}const r=wt.lFrame=Yw();return r.currentTNode=e,r.lView=n,!0}function Ph(n){const e=Yw(),t=n[Me];wt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Yw(){const n=wt.lFrame,e=null===n?null:n.child;return null===e?Jw(n):e}function Jw(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ag(){const n=wt.lFrame;return wt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xw=ag;function hv(){const n=ag();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ki(){return wt.lFrame.selectedIndex}function Cu(n){wt.lFrame.selectedIndex=n}function Qn(){const n=wt.lFrame;return xh(n.tView,n.selectedIndex)}let tT=!0;function Du(){return tT}function wo(n){tT=n}function cg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),null!=l&&(n.destroyHooks??=[]).push(t,l)}}function Au(n,e,t){nT(n,e,3,t)}function ug(n,e,t,r){(3&n[ht])===t&&nT(n,e,t,r)}function gv(n,e){let t=n[ht];(3&t)===e&&(t&=16383,t+=1,n[ht]=t)}function nT(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Bl]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Bl]+=65536),(a<s||-1==s)&&(_x(n,t,e,c),n[Bl]=(4294901760&n[Bl])+c+2),c++}function mv(n,e){Eo(4,n,e);const t=se(null);try{e.call(n)}finally{se(t),Eo(5,n,e)}}function _x(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ht]>>14<n[Bl]>>16&&(3&n[ht])===e&&(n[ht]+=16384,mv(a,s)):mv(a,s)}const zl=-1;class Oh{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function _v(n){return n!==zl}function Wl(n){return 32767&n}function Ru(n,e){let t=function yv(n){return n>>16}(n),r=e;for(;t>0;)r=r[Vl],t--;return r}let lg=!0;function dg(n){const e=lg;return lg=n,e}const sT=255,Us=5;let Fh=0;const Ko={};function Kl(n,e){const t=oT(n,e);if(-1!==t)return t;const r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,Lh(r.data,n),Lh(e,null),Lh(r.blueprint,null));const i=Vh(n,e),s=n.injectorIndex;if(_v(i)){const o=Wl(i),a=Ru(i,e),c=a[Me].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Lh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function oT(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Vh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=hT(i),null===r)return zl;if(t++,i=i[Vl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return zl}function vv(n,e,t){!function Ix(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ph)&&(r=t[ph]),null==r&&(r=t[ph]=Fh++);const i=r&sT;e.data[n+(i>>Us)]|=1<<i}(n,e,t)}function bv(n,e,t){if(t&Qt.Optional||void 0!==n)return n;ow()}function aT(n,e,t,r){if(t&Qt.Optional&&void 0===r&&(r=null),!(t&(Qt.Self|Qt.Host))){const i=n[Br],s=Kr(void 0);try{return i?i.get(e,r,t&Qt.Optional):vy(e,r,t&Qt.Optional)}finally{Kr(s)}}return bv(r,0,t)}function cT(n,e,t,r=Qt.Default,i){if(null!==n){if(2048&e[ht]&&!(r&Qt.Self)){const o=function wx(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ht]&&!(512&o[ht]);){const a=uT(s,o,t,r|Qt.Self,Ko);if(a!==Ko)return a;let c=s.parent;if(!c){const u=o[qy];if(u){const l=u.get(t,Ko,r);if(l!==Ko)return l}c=hT(o),o=o[Vl]}s=c}return i}(n,e,t,r,Ko);if(o!==Ko)return o}const s=uT(n,e,t,r,Ko);if(s!==Ko)return s}return aT(e,t,r,i)}function uT(n,e,t,r,i){const s=function Iv(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ph)?n[ph]:void 0;return"number"==typeof e?e>=0?e&sT:Ex:e}(t);if("function"==typeof s){if(!Qw(e,n,r))return r&Qt.Host?bv(i,0,r):aT(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Qt.Optional)return o;ow()}finally{Xw()}}else if("number"==typeof s){let o=null,a=oT(n,e),c=zl,u=r&Qt.Host?e[rr][kr]:null;for((-1===a||r&Qt.SkipSelf)&&(c=-1===a?Vh(n,e):e[a+8],c!==zl&&Ra(r,!1)?(o=e[Me],a=Wl(c),e=Ru(c,e)):a=-1);-1!==a;){const l=e[Me];if(dT(s,a,l.data)){const f=lT(a,e,t,o,r,u);if(f!==Ko)return f}c=e[a+8],c!==zl&&Ra(r,e[Me].data[a+8]===u)&&dT(s,a,e)?(o=l,a=Wl(c),e=Ru(c,e)):a=-1}}return i}function lT(n,e,t,r,i,s){const o=e[Me],a=o.data[n+8],l=xi(a,o,t,null==r?zo(a)&&lg:r!=o&&!!(3&a.type),i&Qt.Host&&s===a);return null!==l?ec(e,o,l,a):Ko}function xi(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,l=s>>20,_=i?a+l:n.directiveEnd;for(let y=r?a:a+l;y<_;y++){const I=o[y];if(y<c&&t===I||y>=c&&I.type===t)return y}if(i){const y=o[c];if(y&&to(y)&&y.type===t)return c}return null}function ec(n,e,t,r){let i=n[t];const s=e.data;if(function yx(n){return n instanceof Oh}(i)){const o=i;o.resolving&&function DR(n,e){throw e&&e.join(" > "),new we(-200,n)}(function wn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Nt(n)}(s[t]));const a=dg(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Kr(o.injectImpl):null;Qw(n,r,Qt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function mx(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Bw(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==u&&Kr(u),dg(a),o.resolving=!1,Xw()}}return i}function dT(n,e,t){return!!(t[e+(n>>Us)]&1<<n)}function Ra(n,e){return!(n&Qt.Self||n&Qt.Host&&e)}class Ur{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return cT(this._tNode,this._lView,e,jp(r),t)}}function Ex(){return new Ur(Sn(),fe())}function jn(n){return te(()=>{const e=n.prototype.constructor,t=e[$o]||Ev(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[$o]||Ev(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ev(n){return Np(n)?()=>{const e=Ev(It(n));return e&&e()}:Wa(n)}function hT(n){const e=n[Me],t=e.type;return 2===t?e.declTNode:1===t?n[kr]:null}function tc(n){return function Tc(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(yw(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Sn(),n)}function Bh(n,e=null,t=null,r){const i=wv(n,e,t,r);return i.resolveInjectorInitializers(),i}function wv(n,e=null,t=null,r,i=new Set){const s=[t||ln,$$(n)];return r=r||("object"==typeof n?void 0:Wr(n)),new Ol(s,e||vu(),r||null,i)}let Pr=(()=>{class n{static{this.THROW_IF_NOT_FOUND=mh}static{this.NULL=new vh}static create(t,r){if(Array.isArray(t))return Bh({name:""},r,t,"");{const i=t.name??"";return Bh({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=ke({token:n,providedIn:"any",factory:()=>Oe(_w)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function hg(n){return n.ngOriginalError}class Qo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&hg(e);for(;t&&hg(t);)t=hg(t);return t||null}}const fg=new Pe("",{providedIn:"root",factory:()=>j(Qo).handleError.bind(void 0)});let Yo=(()=>{class n{static{this.__NG_ELEMENT_ID__=Cv}static{this.__NG_ENV_ID__=t=>t}}return n})();class Cx extends Yo{constructor(e){super(),this._lView=e}onDestroy(e){return sg(this._lView,e),()=>function nv(n,e){if(null===n[wc])return;const t=n[wc].indexOf(e);-1!==t&&n[wc].splice(t,1)}(this._lView,e)}}function Cv(){return new Cx(fe())}function qse(){return pg(Sn(),fe())}function pg(n,e){return new $n(Ri(n,e))}let $n=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=qse}}return n})();function eH(n){return n instanceof $n?n.nativeElement:n}function Dx(n){return e=>{setTimeout(n,void 0,e)}}const vt=class zse extends q{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Aw()&&(this.destroyRef=j(Yo,{optional:!0})??void 0)}emit(e){const t=se(null);try{super.next(e)}finally{se(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Dx(s),i&&(i=Dx(i)),o&&(o=Dx(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof tr&&e.add(a),a}};function Wse(){return this._results[Symbol.iterator]()}class Ax{get changes(){return this._changes??=new vt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Ax.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Wse)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function qi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function hw(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function gT(n){return!(128&~n.flags)}const Sx=new Map;let Qse=0;const xx="__ngContext__";function js(n,e){mi(e)?(n[xx]=e[Dh],function Jse(n){Sx.set(n[Dh],n)}(e)):n[xx]=e}function lH(n){return hH(n[Th])}function dH(n){return hH(n[Ta])}function hH(n){for(;null!==n&&!zi(n);)n=n[Ta];return n}let Nx;const yT=new Pe("",{providedIn:"root",factory:()=>goe}),goe="ng",bH=new Pe(""),Cc=new Pe("",{providedIn:"platform",factory:()=>"unknown"}),IH=new Pe("",{providedIn:"root",factory:()=>function Ql(){if(void 0!==Nx)return Nx;if(typeof document<"u")return document;throw new we(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let EH=()=>null;function Bx(n,e,t=!1){return EH(n,e,t)}const AH=new Pe("",{providedIn:"root",factory:()=>!1});let DT;function NH(n){return function Gx(){if(void 0===DT&&(DT=null,pt.trustedTypes))try{DT=pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return DT}()?.createScriptURL(n)||n}class MH{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wa})`}}function Yl(n){return n instanceof MH?n.changingThisBreaksApplicationSecurity:n}function Mv(n,e){const t=function Poe(n){return n instanceof MH&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${wa})`)}return t===e}const Voe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var yg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(yg||{});function Qx(n){const e=Pv();return e?e.sanitize(yg.URL,n)||"":Mv(n,"URL")?Yl(n):function qx(n){return(n=String(n)).match(Voe)?n:"unsafe:"+n}(Nt(n))}function jH(n){const e=Pv();if(e)return NH(e.sanitize(yg.RESOURCE_URL,n)||"");if(Mv(n,"ResourceURL"))return NH(Yl(n));throw new we(904,!1)}function Pv(){const n=fe();return n&&n[qo].sanitizer}function Jo(n){return n instanceof Function?n():n}var Jl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Jl||{});let Zx;function eN(n,e){return Zx(n,e)}function bg(n,e,t,r,i){if(null!=r){let s,o=!1;zi(r)?s=r:mi(r)&&(o=!0,r=r[Wn]);const a=On(r);0===n&&null!==t?null==i?e3(e,t,a):Uh(e,t,a,i||null,!0):1===n&&null!==t?Uh(e,t,a,i||null,!0):2===n?function Lv(n,e,t){const r=MT(n,e);r&&function Iae(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Tae(n,e,t,r,i){const s=t[Ca];s!==On(t)&&bg(e,n,r,s,i);for(let a=gr;a<t.length;a++){const c=t[a];PT(c[Me],c,n,e,r,s)}}(e,n,s,t,i)}}function xT(n,e,t){return n.createElement(e,t)}function JH(n,e){e[qo].changeDetectionScheduler?.notify(1),PT(n,e,e[yt],2,null,null)}function XH(n,e){const t=n[jl],r=t.indexOf(e);t.splice(r,1)}function Ov(n,e){if(n.length<=gr)return;const t=gr+e,r=n[t];if(r){const i=r[Ch];null!==i&&i!==n&&XH(i,r),e>0&&(n[t-1][Ta]=r[Ta]);const s=qp(n,gr+e);!function pae(n,e){JH(n,e),e[Wn]=null,e[kr]=null}(r[Me],r);const o=s[Ya];null!==o&&o.detachView(s[Me]),r[Mr]=null,r[Ta]=null,r[ht]&=-129}return r}function NT(n,e){if(!(256&e[ht])){const t=e[yt];t.destroyNode&&PT(n,e,t,3,null,null),function mae(n){let e=n[Th];if(!e)return rN(n[Me],n);for(;e;){let t=null;if(mi(e))t=e[Th];else{const r=e[gr];r&&(t=r)}if(!t){for(;e&&!e[Ta]&&e!==n;)mi(e)&&rN(e[Me],e),e=e[Mr];null===e&&(e=n),mi(e)&&rN(e[Me],e),t=e&&e[Ta]}e=t}}(e)}}function rN(n,e){if(256&e[ht])return;const t=se(null);try{e[ht]&=-129,e[ht]|=256,e[Iu]&&function mt(n){if(Pn(n),Ee(n))for(let e=0;e<n.producerNode.length;e++)kn(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[Iu]),function bae(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Oh)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];Eo(4,a,c);try{c.call(a)}finally{Eo(5,a,c)}}else{Eo(4,i,s);try{s.call(i)}finally{Eo(5,i,s)}}}}}(n,e),function vae(n,e){const t=n.cleanup,r=e[Ll];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Ll]=null);const i=e[wc];if(null!==i){e[wc]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Me].type&&e[yt].destroy();const r=e[Ch];if(null!==r&&zi(e[Mr])){r!==e[Mr]&&XH(r,e);const i=e[Ya];null!==i&&i.detachView(n)}!function Xse(n){Sx.delete(n[Dh])}(e)}finally{se(t)}}function iN(n,e,t){return function ZH(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Wn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Go.None||s===Go.Emulated)return null}return Ri(r,t)}}(n,e.parent,t)}function Uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function e3(n,e,t){n.appendChild(e,t)}function t3(n,e,t,r,i){null!==r?Uh(n,e,t,r,i):e3(n,e,t)}function MT(n,e){return n.parentNode(e)}function n3(n,e,t){return i3(n,e,t)}let sN,i3=function r3(n,e,t){return 40&n.type?Ri(n,t):null};function kT(n,e,t,r){const i=iN(n,r,e),s=e[yt],a=n3(r.parent||e[kr],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)t3(s,i,t[c],a,!1);else t3(s,i,t,a,!1);void 0!==sN&&sN(s,r,e,t,i)}function Fv(n,e){if(null!==e){const t=e.type;if(3&t)return Ri(e,n);if(4&t)return oN(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Fv(n,r);{const i=n[e.index];return zi(i)?oN(-1,i):On(i)}}if(32&t)return eN(e,n)()||On(n[e.index]);{const r=o3(n,e);return null!==r?Array.isArray(r)?r[0]:Fv(wu(n[rr]),r):Fv(n,e.next)}}return null}function o3(n,e){return null!==e?n[rr][kr].projection[e.projection]:null}function oN(n,e){const t=gr+n+1;if(t<e.length){const r=e[t],i=r[Me].firstChild;if(null!==i)return Fv(r,i)}return e[Ca]}function aN(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&js(On(a),r),t.flags|=2),32&~t.flags)if(8&c)aN(n,e,t.child,r,i,s,!1),bg(e,n,i,a,s);else if(32&c){const u=eN(t,r);let l;for(;l=u();)bg(e,n,i,l,s);bg(e,n,i,a,s)}else 16&c?c3(n,e,r,t,i,s):bg(e,n,i,a,s);t=o?t.projectionNext:t.next}}function PT(n,e,t,r,i,s){aN(t,r,n.firstChild,e,i,s,!1)}function c3(n,e,t,r,i,s){const o=t[rr],c=o[kr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)bg(e,n,i,c[u],s);else{let u=c;const l=o[Mr];gT(r)&&(u.flags|=128),aN(n,e,u,l,i,s,!0)}}function u3(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function l3(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&bh(n,e,r),null!==i&&u3(n,e,i),null!==s&&function Dae(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Vt={};function Fe(n=1){d3(Zt(),fe(),Ki()+n,!1)}function d3(n,e,t,r){if(!r)if(3&~e[ht]){const s=n.preOrderHooks;null!==s&&ug(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Au(e,s,t)}Cu(t)}function Ae(n,e=Qt.Default){const t=fe();return null===t?Oe(n,e):cT(Sn(),t,It(n),e)}function f3(n,e,t,r,i,s){const o=se(null);try{let a=null;i&vn.SignalBased&&(a=e[r][pe]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&vn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):tg(e,a,r,s)}finally{se(o)}}function OT(n,e,t,r,i,s,o,a,c,u,l){const f=e.blueprint.slice();return f[Wn]=i,f[ht]=204|r,(null!==u||n&&2048&n[ht])&&(f[ht]|=2048),Nh(f),f[Mr]=f[Vl]=n,f[Kn]=t,f[qo]=o||n&&n[qo],f[yt]=a||n&&n[yt],f[Br]=c||n&&n[Br]||null,f[kr]=s,f[Dh]=function Yse(){return Qse++}(),f[eo]=l,f[qy]=u,f[rr]=2==e.type?n[rr]:f,f}function Ig(n,e,t,r,i){let s=n.data[e];if(null===s)s=function cN(n,e,t,r,i){const s=sv(),o=zw(),c=n.data[e]=function Pae(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return ql()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function hx(){return wt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Tu(){const n=wt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Sa(s,!0),s}function Vv(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function p3(n,e,t,r,i){const s=Ki(),o=2&r;try{Cu(-1),o&&e.length>At&&d3(n,e,At,!1),Eo(o?2:0,i),t(r,i)}finally{Cu(s),Eo(o?3:1,i)}}function uN(n,e,t){if(Ah(e)){const r=se(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{se(r)}}}function lN(n,e,t){rv()&&(function jae(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;zo(t)&&function Kae(n,e,t){const r=Ri(e,n),i=g3(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=FT(n,OT(n,i,null,o,r,e,null,n[qo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Kl(t,e),js(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],u=ec(e,n,a,t);js(u,e),null!==o&&Qae(0,a-i,u,c,0,o),to(c)&&(ps(t.index,e)[Kn]=ec(e,n,a,t))}}(n,e,t,Ri(t,e)),!(64&~t.flags)&&b3(n,e,t))}function dN(n,e,t=Ri){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function g3(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=hN(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hN(n,e,t,r,i,s,o,a,c,u,l){const f=At+r,_=f+i,y=function Sae(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Vt);return t}(f,_),I="function"==typeof u?u():u;return y[Me]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:l}}let m3=()=>null;function _3(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,c=vn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(null!==i){if(!i.hasOwnProperty(s))continue;u=i[s]}0===n?y3(r,t,u,a,c):y3(r,t,u,a)}return r}function y3(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function Co(n,e,t,r,i,s,o,a){const c=Ri(e,t);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(_N(n,t,l,r,i),zo(e)&&function Lae(n,e){const t=ps(e,n);16&t[ht]||(t[ht]|=64)}(t,e.index)):3&e.type&&(r=function Fae(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function fN(n,e,t,r){if(rv()){const i=null===r?null:{"":-1},s=function Hae(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(zp(e,o.selectors,!1))if(r||(r=[]),to(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),pN(n,e,a.length)}else r.unshift(o),pN(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&v3(n,e,t,o,i,a),i&&function Gae(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new we(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=_u(t.mergedAttrs,t.attrs)}function v3(n,e,t,r,i,s){for(let u=0;u<r.length;u++)vv(Kl(t,e),n,r[u].type);!function zae(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Vv(n,e,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];t.mergedAttrs=_u(t.mergedAttrs,l.hostAttrs),Wae(n,t,e,c,l),qae(c,l,i),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const f=l.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function Oae(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<i;l++){const f=s[l],_=t?t.get(f):null,I=_?_.outputs:null;c=_3(0,f.inputs,l,c,_?_.inputs:null),u=_3(1,f.outputs,l,u,I);const T=null===c||null===o||Dy(e)?null:Yae(c,l,o);a.push(T)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,s)}function b3(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function J$(){return wt.lFrame.currentDirectiveIndex}();try{Cu(s);for(let a=r;a<i;a++){const c=n.data[a],u=e[a];uv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&$ae(c,u)}}finally{Cu(-1),uv(o)}}function $ae(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function pN(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qae(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;to(e)&&(t[""]=n)}}function Wae(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Wa(i.type)),o=new Oh(s,to(i),Ae);n.blueprint[r]=o,t[r]=o,function Bae(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Uae(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Vv(n,t,i.hostVars,Vt),i)}function Dc(n,e,t,r,i,s){const o=Ri(n,e);!function gN(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Nt(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[yt],o,s,n.value,t,r,i)}function Qae(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)f3(r,t,o[a++],o[a++],o[a++],o[a++])}function Yae(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function I3(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function E3(n,e){const t=n.contentQueries;if(null!==t){const r=se(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];og(t[i]),a.contentQueries(2,e[o],o)}}}finally{se(r)}}}function FT(n,e){return n[Th]?n[xw][Ta]=e:n[Th]=e,n[xw]=e,e}function mN(n,e,t){og(0);const r=se(null);try{e(n,t)}finally{se(r)}}function w3(n){return n[Ll]||(n[Ll]=[])}function T3(n){return n.cleanup||(n.cleanup=[])}function LT(n,e){const t=n[Br],r=t?t.get(Qo,null):null;r&&r.handleError(e)}function _N(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=t[s++];f3(n.data[o],e[o],r,a,c,i)}}function Mu(n,e,t){const r=Hl(e,n);!function YH(n,e,t){n.setValue(e,t)}(n[yt],r,t)}function Jae(n,e){const t=ps(e,n),r=t[Me];!function Xae(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Wn];null!==i&&null===t[eo]&&(t[eo]=Bx(i,t[Br])),yN(r,t,t[Kn])}function yN(n,e,t){Ph(e);try{const r=n.viewQuery;null!==r&&mN(1,r,t);const i=n.template;null!==i&&p3(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ya]?.finishViewCreation(n),n.staticContentQueries&&E3(n,e),n.staticViewQueries&&mN(2,n.viewQuery,t);const s=n.components;null!==s&&function Zae(n,e){for(let t=0;t<e.length;t++)Jae(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ht]&=-5,hv()}}function Bv(n,e,t,r){const i=se(null);try{const s=e.tView,c=OT(n,s,t,4096&n[ht]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[Ch]=n[e.index];const l=n[Ya];return null!==l&&(c[Ya]=l.createEmbeddedView(s)),yN(s,c,t),c}finally{se(i)}}function Eg(n,e){return!e||null===e.firstChild||gT(n)}function Uv(n,e,t,r=!0){const i=e[Me];if(function _ae(n,e,t,r){const i=gr+r,s=t.length;r>0&&(t[i-1][Ta]=e),r<s-gr?(e[Ta]=t[i],Gp(t,gr+r,e)):(t.push(e),e[Ta]=null),e[Mr]=t;const o=e[Ch];null!==o&&t!==o&&function yae(n,e){const t=n[jl];e[rr]!==e[Mr][Mr][rr]&&(n[ht]|=$l.HasTransplantedViews),null===t?n[jl]=[e]:t.push(e)}(o,e);const a=e[Ya];null!==a&&a.insertView(n),tv(e),e[ht]|=128}(i,e,n,t),r){const o=oN(t,n),a=e[yt],c=MT(a,n[Ca]);null!==c&&function gae(n,e,t,r,i,s){r[Wn]=i,r[kr]=e,PT(n,r,t,1,i,s)}(i,n[kr],a,e,c,o)}const s=e[eo];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function jv(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(On(s)),zi(s)&&A3(s,r);const o=t.type;if(8&o)jv(n,e,t.child,r);else if(32&o){const a=eN(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=o3(e,t);if(Array.isArray(a))r.push(...a);else{const c=wu(e[rr]);jv(c[Me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function A3(n,e){for(let t=gr;t<n.length;t++){const r=n[t],i=r[Me].firstChild;null!==i&&jv(r[Me],r,i,e)}n[Ca]!==n[Wn]&&e.push(n[Ca])}let S3=[];const rce={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Mh(n.lView)},consumerOnSignalRead(){this.lView[Iu]=this}},R3=100;function VT(n,e=!0,t=0){const r=n[qo],i=r.rendererFactory;i.begin?.();try{!function ice(n,e){bN(n,e);let t=0;for(;ev(n);){if(t===R3)throw new we(103,!1);t++,bN(n,1)}}(n,t)}catch(o){throw e&&LT(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function sce(n,e,t,r){const i=e[ht];if(!(256&~i))return;e[qo].inlineEffectRunner?.flush(),Ph(e);let o=null,a=null;(function oce(n){return 2!==n.type})(n)&&(a=function ece(n){return n[Iu]??function tce(n){const e=S3.pop()??Object.create(rce);return e.lView=n,e}(n)}(e),o=function gn(n){return n&&(n.nextProducerIndex=0),se(n)}(a));try{Nh(e),function Kw(n){return wt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&p3(n,e,t,2,r);const c=!(3&~i);if(c){const f=n.preOrderCheckHooks;null!==f&&Au(e,f,null)}else{const f=n.preOrderHooks;null!==f&&ug(e,f,0,null),gv(e,0)}if(function ace(n){for(let e=lH(n);null!==e;e=dH(e)){if(!(e[ht]&$l.HasTransplantedViews))continue;const t=e[jl];for(let r=0;r<t.length;r++){ix(t[r])}}}(e),x3(e,0),null!==n.contentQueries&&E3(n,e),c){const f=n.contentCheckHooks;null!==f&&Au(e,f)}else{const f=n.contentHooks;null!==f&&ug(e,f,1),gv(e,1)}!function Aae(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Cu(~i);else{const s=i,o=t[++r],a=t[++r];fx(o,s),a(2,e[s])}}}finally{Cu(-1)}}(n,e);const u=n.components;null!==u&&M3(e,u,0);const l=n.viewQuery;if(null!==l&&mN(2,l,r),c){const f=n.viewCheckHooks;null!==f&&Au(e,f)}else{const f=n.viewHooks;null!==f&&ug(e,f,2),gv(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Xp]){for(const f of e[Xp])f();e[Xp]=null}e[ht]&=-73}catch(c){throw Mh(e),c}finally{null!==a&&(function mn(n,e){if(se(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ee(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)kn(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,o),function nce(n){n.lView[Iu]!==n&&(n.lView=null,S3.push(n))}(a)),hv()}}function x3(n,e){for(let t=lH(n);null!==t;t=dH(t))for(let r=gr;r<t.length;r++)N3(t[r],e)}function cce(n,e,t){N3(ps(e,n),t)}function N3(n,e){Zy(n)&&bN(n,e)}function bN(n,e){const r=n[Me],i=n[ht],s=n[Iu];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!ls(s)),s&&(s.dirty=!1),n[ht]&=-9217,o)sce(r,n,r.template,n[Kn]);else if(8192&i){x3(n,1);const a=r.components;null!==a&&M3(n,a,1)}}function M3(n,e,t){for(let r=0;r<e.length;r++)cce(n,e[r],t)}function $v(n){for(n[qo].changeDetectionScheduler?.notify();n;){n[ht]|=64;const e=wu(n);if(Wy(n)&&!e)return n;n=e}return null}class Hv{get rootNodes(){const e=this._lView,t=e[Me];return jv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(e){this._lView[Kn]=e}get destroyed(){return!(256&~this._lView[ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Mr];if(zi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Ov(e,r),qp(t,r))}this._attachedToViewContainer=!1}NT(this._lView[Me],this._lView)}onDestroy(e){sg(this._lView,e)}markForCheck(){$v(this._cdRefInjectingView||this._lView)}detach(){this._lView[ht]&=-129}reattach(){tv(this._lView),this._lView[ht]|=128}detectChanges(){this._lView[ht]|=1024,VT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,JH(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=e,tv(this._lView)}}let Jr=(()=>{class n{static{this.__NG_ELEMENT_ID__=dce}}return n})();const uce=Jr,lce=class extends uce{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=Bv(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Hv(i)}};function dce(){return BT(Sn(),fe())}function BT(n,e){return 4&n.type?new lce(e,n,pg(n,e)):null}let V3=()=>null;function wg(n,e){return V3(n,e)}class DN{}class Oce{}class B3{}class Lce{resolveComponentFactory(e){throw function Fce(n){const e=Error(`No component factory found for ${Wr(n)}.`);return e.ngComponent=n,e}(e)}}let GT=(()=>{class n{static{this.NULL=new Lce}}return n})();class j3{}let ku=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Vce(){const n=fe(),t=ps(Sn().index,n);return(mi(t)?t:n)[yt]}()}}return n})(),Bce=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}}return n})();const AN={},$3=new Set;function Ac(n){$3.has(n)||($3.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function H3(...n){}class qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Uce(){const n="function"==typeof pt.requestAnimationFrame;let e=pt[n?"requestAnimationFrame":"setTimeout"],t=pt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Hce(n){const e=()=>{!function $ce(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(pt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,RN(n),n.isCheckStableRunning=!0,SN(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),RN(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Gce(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return G3(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),q3(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return G3(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),q3(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,RN(n),SN(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qt.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(qt.isInAngularZone())throw new we(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,jce,H3,H3);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const jce={};function SN(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function RN(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function G3(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function q3(n){n._nesting--,SN(n)}class z3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vt,this.onMicrotaskEmpty=new vt,this.onStable=new vt,this.onError=new vt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}var jh=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(jh||{});const W3={destroy(){}};function NN(n,e){!e&&function bu(n){if(!Aw())throw new we(-203,!1)}();const t=e?.injector??j(Pr);if(!function nc(n){return"browser"===(n??j(Pr)).get(Cc)}(t))return W3;Ac("NgAfterNextRender");const r=t.get(Kv),i=r.handler??=new Q3,s=e?.phase??jh.MixedReadWrite,o=()=>{i.unregister(c),a()},a=t.get(Yo).onDestroy(o),c=Un(t,()=>new K3(s,()=>{o(),n()}));return i.register(c),{destroy:o}}class K3{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=j(qt),this.errorHandler=j(Qo,{optional:!0}),j(DN,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class Q3{constructor(){this.executingCallbacks=!1,this.buckets={[jh.EarlyRead]:new Set,[jh.Write]:new Set,[jh.MixedReadWrite]:new Set,[jh.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Kv=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();function zT(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=uh(i,a):2==s&&(r=uh(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class X3 extends GT{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Yt(e);return new Jv(t,this.ngModule)}}function Z3(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}class WT{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=jp(r);const i=this.injector.get(e,AN,r);return i!==AN||t===AN?i:this.parentInjector.get(e,t,r)}}class Jv extends B3{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=Z3(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Z3(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function PR(n){return n.map(xy).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=se(null);try{let o=(i=i||this.ngModule)instanceof Si?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new WT(e,o):e,c=a.get(j3,null);if(null===c)throw new we(407,!1);const u=a.get(Bce,null),_={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:a.get(Kv,null),changeDetectionScheduler:a.get(DN,null)},y=c.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function Rae(n,e,t,r){const s=r.get(AH,!1)||t===Go.ShadowDom,o=n.selectRootElement(e,s);return function xae(n){m3(n)}(o),o}(y,r,this.componentDef.encapsulation,a):xT(y,I,function Qce(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I));let A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let x=null;null!==T&&(x=Bx(T,a,!0));const N=hN(0,null,null,1,0,null,null,null,null,null,null),B=OT(null,N,null,A,null,null,_,y,a,null,x);let ee,ie;Ph(B);try{const de=this.componentDef;let M,R=null;de.findHostDirectiveDefs?(M=[],R=new Map,de.findHostDirectiveDefs(de,M,R),M.push(de)):M=[de];const F=function Jce(n,e){const t=n[Me],r=At;return n[r]=e,Ig(t,r,2,"#host",null)}(B,T),U=function Xce(n,e,t,r,i,s,o){const a=i[Me];!function Zce(n,e,t,r){for(const i of n)e.mergedAttrs=_u(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(zT(e,e.mergedAttrs,!0),null!==t&&l3(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=Bx(e,i[Br]));const u=s.rendererFactory.createRenderer(e,t);let l=16;t.signals?l=4096:t.onPush&&(l=64);const f=OT(i,g3(t),null,l,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&pN(a,n,r.length-1),FT(i,f),i[n.index]=f}(F,T,de,M,B,_,y);ie=xh(N,At),T&&function tue(n,e,t,r){if(r)bh(n,t,["ng-version","17.3.12"]);else{const{attrs:i,classes:s}=function OR(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Xs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&bh(n,t,i),s&&s.length>0&&u3(n,t,s.join(" "))}}(y,de,T,r),void 0!==t&&function nue(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(ie,this.ngContentSelectors,t),ee=function eue(n,e,t,r,i,s){const o=Sn(),a=i[Me],c=Ri(o,i);v3(a,i,o,t,null,r);for(let l=0;l<t.length;l++)js(ec(i,a,o.directiveStart+l,o),i);b3(a,i,o),c&&js(c,i);const u=ec(i,a,o.directiveStart+o.componentOffset,o);if(n[Kn]=i[Kn]=u,null!==s)for(const l of s)l(u,e);return uN(a,o,i),u}(U,de,M,R,B,[rue]),yN(N,B,null)}finally{hv()}return new Yce(this.componentType,ee,pg(ie,B),B,ie)}finally{se(s)}}}class Yce extends Oce{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Hv(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;_N(s[Me],s,i,e,t),this.previousInputValues.set(e,t),$v(ps(this._tNode.index,s))}}get injector(){return new Ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function rue(){const n=Sn();cg(fe()[Me],n)}let Xo=(()=>{class n{static{this.__NG_ELEMENT_ID__=iue}}return n})();function iue(){return nG(Sn(),fe())}const sue=Xo,eG=class extends sue{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return pg(this._hostTNode,this._hostLView)}get injector(){return new Ur(this._hostTNode,this._hostLView)}get parentInjector(){const e=Vh(this._hostTNode,this._hostLView);if(_v(e)){const t=Ru(e,this._hostLView),r=Wl(e);return new Ur(t[Me].data[r+8],t)}return new Ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=tG(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-gr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=wg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Eg(this._hostTNode,o)),a}createComponent(e,t,r,i,s){const o=e&&!function Ec(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}const c=o?e:new Jv(Yt(e)),u=r||this.parentInjector;if(!s&&null==c.ngModule){const T=(o?u:this.parentInjector).get(Si,null);T&&(s=T)}const l=Yt(c.componentType??{}),f=wg(this._lContainer,l?.id??null),y=c.create(u,i,f?.firstChild??null,s);return this.insertImpl(y.hostView,a,Eg(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function Hw(n){return zi(n[Mr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[Mr],u=new eG(c,c[kr],c[Mr]);u.detach(u.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Uv(o,i,s,r),e.attachToViewContainerRef(),Gp(PN(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=tG(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ov(this._lContainer,t);r&&(qp(PN(this._lContainer),t),NT(r[Me],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ov(this._lContainer,t);return r&&null!=qp(PN(this._lContainer),t)?new Hv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function tG(n){return n[8]}function PN(n){return n[8]||(n[8]=[])}function nG(n,e){let t;const r=e[n.index];return zi(r)?t=r:(t=I3(r,e,null,n),e[n.index]=t,FT(e,t)),rG(t,e,n,r),new eG(t,n,e)}let rG=function sG(n,e,t,r){if(n[Ca])return;let i;i=8&t.type?On(r):function oue(n,e){const t=n[yt],r=t.createComment(""),i=Ri(e,n);return Uh(t,MT(t,i),r,function Eae(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ca]=i},ON=()=>!1;class FN{constructor(e){this.queryList=e,this.matches=null}clone(){return new FN(this.queryList)}setDirty(){this.queryList.setDirty()}}class LN{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new LN(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==$N(e,t).matches&&this.queries[t].setDirty()}}class oG{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function pue(n){return n.split(",").map(e=>e.trim())}(e):e}}class VN{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new VN(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class BN{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new BN(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,lue(t,s)),this.matchTNodeWithReadOption(e,t,xi(t,e,s,!1,!1))}else r===Jr?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xi(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===$n||i===Xo||i===Jr&&4&t.type)this.addMatch(t.index,-2);else{const s=xi(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function lue(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function hue(n,e,t,r){return-1===t?function due(n,e){return 11&n.type?pg(n,e):4&n.type?BT(n,e):null}(e,n):-2===t?function fue(n,e,t){return t===$n?pg(e,n):t===Jr?BT(e,n):t===Xo?nG(e,n):void 0}(n,e,r):ec(n,n[Me],t,e)}function aG(n,e,t,r){const i=e[Ya].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const u=o[c];a.push(u<0?null:hue(e,s[u],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function UN(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=aG(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const u=s[a+1],l=e[-c];for(let f=gr;f<l.length;f++){const _=l[f];_[Ch]===_[Mr]&&UN(_[Me],_,u,r)}if(null!==l[jl]){const f=l[jl];for(let _=0;_<f.length;_++){const y=f[_];UN(y[Me],y,u,r)}}}}}return r}function cG(n,e,t){const r=new Ax(!(4&~t));return function kae(n,e,t,r){const i=w3(e);i.push(t),n.firstCreatePass&&T3(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Ya]??=new LN).queries.push(new FN(r))-1}function dG(n,e,t){null===n.queries&&(n.queries=new VN),n.queries.track(new BN(e,t))}function $N(n,e){return n.queries.getByIndex(e)}function hG(n,e){const t=n[Me],r=$N(t,e);return r.crossesNgTemplate?UN(t,n,e,[]):aG(t,n,r,e)}function gG(n){return function fG(n){return"function"==typeof n&&void 0!==n[pe]}(n)&&"function"==typeof n.set}function Rn(n){let e=function DG(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(to(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new we(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=QT(n.inputs),o.inputTransforms=QT(n.inputTransforms),o.declaredInputs=QT(n.declaredInputs),o.outputs=QT(n.outputs);const a=i.hostBindings;a&&xue(n,a);const c=i.viewQuery,u=i.contentQueries;if(c&&Sue(n,c),u&&Rue(n,u),Due(n,i),ch(n.outputs,i.outputs),to(i)&&i.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Rn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Aue(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_u(i.hostAttrs,t=_u(t,i.hostAttrs))}}(r)}function Due(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function QT(n){return n===Io?{}:n===ln?[]:n}function Sue(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Rue(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function xue(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function xG(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class $h{}class NG{}class qN extends $h{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new X3(this);const i=fs(e);this._bootstrapComponents=Jo(i.bootstrap),this._r3Injector=wv(e,t,[{provide:$h,useValue:this},{provide:GT,useValue:this.componentFactoryResolver},...r],Wr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zN extends NG{constructor(e){super(),this.moduleType=e}create(e){return new qN(this.moduleType,e,[])}}class MG extends $h{constructor(e){super(),this.componentFactoryResolver=new X3(this),this.instance=null;const t=new Ol([...e.providers,{provide:$h,useValue:this},{provide:GT,useValue:this.componentFactoryResolver}],e.parent||vu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function YT(n,e,t=null){return new MG({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Cg=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XT(n){return!!function WN(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Xr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function $t(n,e,t,r,i,s,o,a){const c=fe(),u=Zt(),l=n+At,f=u.firstCreatePass?function $ue(n,e,t,r,i,s,o,a,c){const u=e.consts,l=Ig(e,n,4,o||null,Aa(u,a));fN(e,t,l,Aa(u,c)),cg(e,l);const f=l.tView=hN(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,l),f.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,t,r,i,s,o):u.data[l];Sa(f,!1);const _=kG(u,c,f,n);Du()&&kT(u,c,_,f),js(_,c);const y=I3(_,c,_,f);return c[l]=y,FT(c,y),function iG(n,e,t){return ON(n,e,t)}(y,f,c),Da(f)&&lN(u,c,f),null!=o&&dN(c,f,a),$t}let kG=function PG(n,e,t,r){return wo(!0),e[yt].createComment("")};function Yn(n,e,t,r){const i=fe();return Xr(i,Wo(),e)&&(Zt(),Dc(Qn(),i,n,e,t,r)),Yn}function Pg(n,e,t,r,i,s){const a=function Hh(n,e,t,r){const i=Xr(n,e,t);return Xr(n,e+1,r)||i}(n,function Ja(){return wt.lFrame.bindingIndex}(),t,i);return Xa(2),a?e+Nt(t)+r+Nt(i)+s:Vt}function sC(n,e){return n<<17|e<<2}function td(n){return n>>17&32767}function rM(n){return 2|n}function qh(n){return(131068&n)>>2}function iM(n,e){return-131069&n|e<<2}function sM(n){return 1|n}function d4(n,e,t,r){const i=n[t+1],s=null===e;let o=r?td(i):qh(i),a=!1;for(;0!==o&&(!1===a||s);){const u=n[o+1];Sle(n[o],e)&&(a=!0,n[o+1]=r?sM(u):rM(u)),o=r?td(u):qh(u)}a&&(n[t+1]=r?rM(i):sM(i))}function Sle(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ic(n,e)>=0}const Ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function h4(n){return n.substring(Ni.key,Ni.keyEnd)}function f4(n,e){const t=Ni.textEnd;return t===e?-1:(e=Ni.keyEnd=function Mle(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ni.key=e,t),jg(n,e,t))}function jg(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Mt(n,e,t){const r=fe();return Xr(r,Wo(),e)&&Co(Zt(),Qn(),r,n,e,r[yt],t,!1),Mt}function oM(n,e,t,r,i){const o=i?"class":"style";_N(n,t,e.inputs[o],o,r)}function dn(n,e){return function rc(n,e,t,r){const i=fe(),s=Zt(),o=Xa(2);s.firstUpdatePass&&b4(s,n,o,r),e!==Vt&&Xr(i,o,e)&&E4(s,s.data[Ki()],i,i[yt],n,i[o+1]=function Hle(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Wr(Yl(n)))),n}(e,t),r,o)}(n,e,null,!0),dn}function xc(n){!function ic(n,e,t,r){const i=Zt(),s=Xa(2);i.firstUpdatePass&&b4(i,null,s,r);const o=fe();if(t!==Vt&&Xr(o,s,t)){const a=i.data[Ki()];if(T4(a,r)&&!v4(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=uh(c,t||"")),oM(i,a,o,t,r)}else!function $le(n,e,t,r,i,s,o,a){i===Vt&&(i=ln);let c=0,u=0,l=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;null!==l||null!==f;){const _=c<i.length?i[c+1]:void 0,y=u<s.length?s[u+1]:void 0;let T,I=null;l===f?(c+=2,u+=2,_!==y&&(I=f,T=y)):null===f||null!==l&&l<f?(c+=2,I=l):(u+=2,I=f,T=y),null!==I&&E4(n,e,t,r,I,T,o,a),l=c<i.length?i[c]:null,f=u<s.length?s[u]:null}}(i,a,o,o[yt],o[s+1],o[s+1]=function Ule(n,e,t){if(null==t||""===t)return ln;const r=[],i=Yl(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(jle,Nc,n,!0)}function Nc(n,e){for(let t=function xle(n){return function g4(n){Ni.key=0,Ni.keyEnd=0,Ni.value=0,Ni.valueEnd=0,Ni.textEnd=n.length}(n),f4(n,jg(n,0,Ni.textEnd))}(e);t>=0;t=f4(e,t))hs(n,h4(e),!0)}function v4(n,e){return e>=n.expandoStartIndex}function b4(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Ki()],o=v4(n,t);T4(s,r)&&null===e&&!o&&(e=!1),e=function Fle(n,e,t,r){const i=function Za(n){const e=wt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=s0(t=aM(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=aM(i,n,e,t,r),null===s){let c=function Lle(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==qh(r))return n[td(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=aM(null,n,e,c[1],r),c=s0(c,e.attrs,r),function Vle(n,e,t,r){n[td(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function Ble(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=s0(r,n[s].hostAttrs,t);return s0(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function Dle(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=td(o),c=qh(o);n[r]=t;let l,u=!1;if(Array.isArray(t)?(l=t[1],(null===l||Ic(t,l)>0)&&(u=!0)):l=t,i)if(0!==c){const _=td(n[a+1]);n[r+1]=sC(_,a),0!==_&&(n[_+1]=iM(n[_+1],r)),n[a+1]=function Tle(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=sC(a,0),0!==a&&(n[a+1]=iM(n[a+1],r)),a=r;else n[r+1]=sC(c,0),0===a?a=r:n[c+1]=iM(n[c+1],r),c=r;u&&(n[r+1]=rM(n[r+1])),d4(n,l,r,!0),d4(n,l,r,!1),function Ale(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ic(s,e)>=0&&(t[r+1]=sM(t[r+1]))}(e,l,n,r,s),o=sC(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function aM(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=s0(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function s0(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),hs(n,o,!!t||e[++s]))}return void 0===n?null:n}function jle(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&hs(n,r,t)}function E4(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1],l=function Cle(n){return!(1&~n)}(u)?w4(c,e,t,i,qh(u),o):void 0;oC(l)||(oC(s)||function wle(n){return!(2&~n)}(u)&&(s=w4(c,null,t,i,a,o)),function Cae(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Jl.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Jl.Important),n.setStyle(t,r,i,s))}}(r,o,Hl(Ki(),t),i,s))}function w4(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],u=Array.isArray(c),l=u?c[1]:c,f=null===l;let _=t[i+1];_===Vt&&(_=f?ln:void 0);let y=f?Nl(_,r):l===r?_:void 0;if(u&&!oC(y)&&(y=Nl(c,r)),oC(y)&&(a=y,o))return a;const I=n[i+1];i=o?td(I):qh(I)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Nl(c,r))}return a}function oC(n){return void 0!==n}function T4(n,e){return!!(n.flags&(e?8:16))}function Mi(n,e,t){Ac("NgControlFlow");const r=fe(),i=Wo(),s=function lM(n,e){return n[e]}(r,At+n);if(Xr(r,i,e)){const a=se(null);try{if(function vN(n,e){const t=Ov(n,e);return void 0!==t&&NT(t[Me],t),t}(s,0),-1!==e){const c=function dM(n,e){return xh(n,e)}(r[Me],At+e),u=wg(s,c.tView.ssrId);Uv(s,Bv(r,c,t,{dehydratedView:u}),0,Eg(c,u))}}finally{se(a)}}else{const a=function D3(n,e){const t=gr+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[Kn]=t)}}function Se(n,e,t,r){const i=fe(),s=Zt(),o=At+n,a=i[yt],c=s.firstCreatePass?function cde(n,e,t,r,i,s){const o=e.consts,c=Ig(e,n,2,r,Aa(o,i));return fN(e,t,c,Aa(o,s)),null!==c.attrs&&zT(c,c.attrs,!1),null!==c.mergedAttrs&&zT(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],u=S4(s,i,c,a,e,n);i[o]=u;const l=Da(c);return Sa(c,!0),l3(a,u,c),!function e0(n){return!(32&~n.flags)}(c)&&Du()&&kT(s,i,u,c),0===function sx(){return wt.lFrame.elementDepthCount}()&&js(u,i),function ox(){wt.lFrame.elementDepthCount++}(),l&&(lN(s,i,c),uN(s,c,i)),null!==r&&dN(i,c),Se}function De(){let n=Sn();zw()?kh():(n=n.parent,Sa(n,!1));const e=n;(function cx(n){return wt.skipHydrationRootTNode===n})(e)&&function iv(){wt.skipHydrationRootTNode=null}(),function ax(){wt.lFrame.elementDepthCount--}();const t=Zt();return t.firstCreatePass&&(cg(t,n),Ah(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function rT(n){return!!(8&n.flags)}(e)&&oM(t,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function bx(n){return!!(16&n.flags)}(e)&&oM(t,e,fe(),e.stylesWithoutHost,!1),De}function hn(n,e,t,r){return Se(n,e,t,r),De(),hn}let S4=(n,e,t,r,i,s)=>(wo(!0),xT(r,i,function eT(){return wt.lFrame.currentNamespace}()));function ki(){return fe()}const Hg="en-US";let P4=Hg;function _t(n,e,t,r){const i=fe(),s=Zt(),o=Sn();return mM(s,i,i[yt],o,n,e,r),_t}function mM(n,e,t,r,i,s,o){const a=Da(r),u=n.firstCreatePass&&T3(n),l=e[Kn],f=w3(e);let _=!0;if(3&r.type||o){const T=Ri(r,e),A=o?o(T):T,x=f.length,N=o?ee=>o(On(ee[r.index])):r.index;let B=null;if(!o&&a&&(B=function dhe(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Ll],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,_=!1;else{s=cq(r,e,l,s,!1);const ee=t.listen(A,i,s);f.push(s,ee),u&&u.push(i,N,x,x+1)}}else s=cq(r,e,l,s,!1);const y=r.outputs;let I;if(_&&null!==y&&(I=y[i])){const T=I.length;if(T)for(let A=0;A<T;A+=2){const ie=e[I[A]][I[A+1]].subscribe(s),de=f.length;f.push(s,ie),u&&u.push(i,r.index,de,-(de+1))}}}function aq(n,e,t,r){const i=se(null);try{return Eo(6,e,t),!1!==t(r)}catch(s){return LT(n,s),!1}finally{Eo(7,e,t),se(i)}}function cq(n,e,t,r,i){return function s(o){if(o===Function)return r;$v(n.componentOffset>-1?ps(n.index,e):e);let c=aq(e,t,r,o),u=s.__ngNextListenerFn__;for(;u;)c=aq(e,t,u,o)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function lt(n=1){return function fv(n){return(wt.lFrame.contextLView=function Gw(n,e){for(;n>0;)e=e[Vl],n--;return e}(n,wt.lFrame.contextLView))[Kn]}(n)}function hhe(n,e){let t=null;const r=function MR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?zp(n,s,!0):Ry(r,s))return i}else t=i}return t}function _M(n){const e=fe()[rr][kr];if(!e.projection){const r=e.projection=function Rl(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?hhe(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function yM(n,e=0,t){const r=fe(),i=Zt(),s=Ig(i,At+n,16,null,t||null);null===s.projection&&(s.projection=e),kh(),(!r[eo]||ql())&&32&~s.flags&&function wae(n,e,t){c3(e[yt],0,e,t,iN(n,t,e),n3(t.parent||e[kr],t,e))}(i,r,s)}function yi(n,e,t,r){!function lG(n,e,t,r){const i=Zt();if(i.firstCreatePass){const s=Sn();dG(i,new oG(e,t,r),s.index),function gue(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return cG(i,fe(),t)}(n,e,t,r)}function Oc(n,e,t){!function uG(n,e,t){const r=Zt();return r.firstCreatePass&&(dG(r,new oG(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),cG(r,fe(),e)}(n,e,t)}function Hn(n){const e=fe(),t=Zt(),r=lv();og(r+1);const i=$N(t,r);if(n.dirty&&function rx(n){return!(4&~n[ht])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=hG(e,r);n.reset(s,eH),n.notifyOnChanges()}return!0}return!1}function Gn(){return function jN(n,e){return n[Ya].queries[e].queryList}(fe(),lv())}function Or(n){return function Gl(n,e){return n[e]}(function Ww(){return wt.lFrame.contextLView}(),At+n)}function at(n,e=""){const t=fe(),r=Zt(),i=n+At,s=r.firstCreatePass?Ig(r,i,1,e,null):r.data[i],o=Aq(r,t,s,e,n);t[i]=o,Du()&&kT(r,t,o,s),Sa(s,!1)}let Aq=(n,e,t,r,i)=>(wo(!0),function tN(n,e){return n.createText(e)}(e[yt],r));function Qi(n){return Fc("",n,""),Qi}function Fc(n,e,t){const r=fe(),i=function kg(n,e,t,r){return Xr(n,Wo(),t)?e+Nt(t)+r:Vt}(r,n,e,t);return i!==Vt&&Mu(r,Ki(),i),Fc}function bM(n,e,t,r,i){const s=fe(),o=Pg(s,n,e,t,r,i);return o!==Vt&&Mu(s,Ki(),o),bM}function Pu(n,e,t){gG(e)&&(e=e());const r=fe();return Xr(r,Wo(),e)&&Co(Zt(),Qn(),r,n,e,r[yt],t,!1),Pu}function nd(n,e){const t=gG(n);return t&&n.set(e),t}function Ou(n,e){const t=fe(),r=Zt(),i=Sn();return mM(r,t,t[yt],i,n,e),Ou}function IM(n,e,t,r,i){if(n=It(n),Array.isArray(n))for(let s=0;s<n.length;s++)IM(n[s],e,t,r,i);else{const s=Zt(),o=fe(),a=Sn();let c=kl(n)?n:It(n.provide);const u=jR(n),l=1048575&a.providerIndexes,f=a.directiveStart,_=a.providerIndexes>>20;if(kl(n)||!n.multi){const y=new Oh(u,i,Ae),I=wM(c,e,i?l:l+_,f);-1===I?(vv(Kl(a,o),s,c),EM(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[I]=y,o[I]=y)}else{const y=wM(c,e,l+_,f),I=wM(c,e,l,l+_),A=I>=0&&t[I];if(i&&!A||!i&&!(y>=0&&t[y])){vv(Kl(a,o),s,c);const x=function Nhe(n,e,t,r,i){const s=new Oh(n,t,Ae);return s.multi=[],s.index=e,s.componentProviders=0,Oq(s,i,r&&!t),s}(i?xhe:Rhe,t.length,i,r,u);!i&&A&&(t[I].providerFactory=x),EM(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(x),o.push(x)}else EM(s,n,y>-1?y:I,Oq(t[i?I:y],u,!i&&r));!i&&r&&A&&t[I].componentProviders++}}}function EM(n,e,t,r){const i=kl(e),s=function UR(n){return!!n.useClass}(e);if(i||s){const c=(s?It(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=u.indexOf(t);-1===l?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function Oq(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wM(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Rhe(n,e,t,r){return TM(this.multi,[])}function xhe(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ec(t,t[Me],this.providerFactory.index,r);s=a.slice(0,o),TM(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],TM(i,s);return s}function TM(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ir(n,e=[]){return t=>{t.providersResolver=(r,i)=>function She(n,e,t){const r=Zt();if(r.firstCreatePass){const i=to(n);IM(t,r.data,r.blueprint,i,!0),IM(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let Mhe=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=ww(0,t.type),i=r.length>0?YT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(Oe(Si))})}}return n})();function Pa(n){Ac("NgStandalone"),n.getStandaloneInjector=e=>e.get(Mhe).getOrCreateStandaloneInjector(n)}function sc(n,e){return BT(n,e)}class zg{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const mfe=new zg("17.3.12");let rz=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const cz=new Pe(""),gC=new Pe("");let kM,NM=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,kM||(function $fe(n){kM=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(Oe(qt),Oe(MM),Oe(gC))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),MM=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return kM?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function y0(n){return!!n&&"function"==typeof n.then}function uz(n){return!!n&&"function"==typeof n.subscribe}const PM=new Pe("");let OM=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(PM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(y0(s))t.push(s);else if(uz(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const FM=new Pe("");function hz(n,e){return Array.isArray(e)?e.reduce(hz,n):{...n,...e}}let Fu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(fg),this.afterRenderEffectManager=j(Kv),this.externalTestViews=new Set,this.beforeRender=new q,this.afterTick=new q,this.componentTypes=[],this.components=[],this.isStable=j(Cg).hasPendingTasks.pipe(je(t=>!t)),this._injector=j(Si)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof B3;if(!this._injector.get(OM).done)throw!i&&function yu(n){const e=Yt(n)||Qr(n)||Ai(n);return null!==e&&e.standalone}(t),new we(405,!1);let o;o=i?t:this._injector.get(GT).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Hfe(n){return n.isBoundToModule}(o)?void 0:this._injector.get($h),u=o.create(Pr.NULL,[],r||o.selector,a),l=u.location.nativeElement,f=u.injector.get(cz,null);return f?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),mC(this.components,u),f?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new we(101,!1);const r=se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,se(r)}}detectChangesInAttachedViews(t){let r=0;const i=this.afterRenderEffectManager;for(;;){if(r===R3)throw new we(103,!1);if(t){const s=0===r;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)qfe(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>LM(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>LM(s))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;mC(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(FM,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>mC(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new we(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function qfe(n,e,t){!e&&!LM(n)||function zfe(n,e,t){let r;t?(r=0,n[ht]|=1024):r=64&n[ht]?0:1,VT(n,e,r)}(n,t,e)}function LM(n){return ev(n)}class Wfe{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let fz=(()=>{class n{compileModuleSync(t){return new zN(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Jo(fs(t).declarations).reduce((o,a)=>{const c=Yt(a);return c&&o.push(new Jv(c)),o},[]);return new Wfe(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yfe=(()=>{class n{constructor(){this.zone=j(qt),this.applicationRef=j(Fu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jfe(){const n=j(qt),e=j(Qo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Zfe=(()=>{class n{constructor(){this.subscription=new tr,this.initialized=!1,this.zone=j(qt),this.pendingTasks=j(Cg)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Lc=new Pe("",{providedIn:"root",factory:()=>j(Lc,Qt.Optional|Qt.SkipSelf)||function epe(){return typeof $localize<"u"&&$localize.locale||Hg}()}),VM=new Pe("");let _z=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function qce(n="zone.js",e){return"noop"===n?new z3:"zone.js"===n?new qt(e):n}(r?.ngZone,function mz(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Fue(n,e,t){return new qN(n,e,t)}(t.moduleType,this.injector,function gz(n){return[{provide:qt,useFactory:n},{provide:Ka,multi:!0,useFactory:()=>{const e=j(Yfe,{optional:!0});return()=>e.initialize()}},{provide:Ka,multi:!0,useFactory:()=>{const e=j(Zfe);return()=>{e.initialize()}}},{provide:fg,useFactory:Jfe}]}(()=>i)),o=s.injector.get(Qo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{mC(this._modules,s),a.unsubscribe()})}),function dz(n,e,t){try{const r=t();return y0(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(OM);return a.runInitializers(),a.donePromise.then(()=>(function O4(n){"string"==typeof n&&(P4=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Lc,Hg)||Hg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=hz({},r);return function Qfe(n,e,t){const r=new zN(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Fu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new we(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(VM,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Oe(Pr))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),rd=null;const yz=new Pe("");function vz(n,e,t=[]){const r=`Platform: ${e}`,i=new Pe(r);return(s=[])=>{let o=BM();if(!o||o.injector.get(yz,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function rpe(n){if(rd&&!rd.get(yz,!1))throw new we(400,!1);(function lz(){!function ve(n){ae=n}(()=>{throw new we(600,!1)})})(),rd=n;const e=n.get(_z);(function Iz(n){n.get(bH,null)?.forEach(t=>t())})(n)}(function bz(n=[],e){return Pr.create({name:e,providers:[{provide:Ly,useValue:"platform"},{provide:VM,useValue:new Set([()=>rd=null])},...n]})}(a,r))}return function ipe(n){const e=BM();if(!e)throw new we(401,!1);return e}()}}function BM(){return rd?.get(_z)??null}let oc=(()=>{class n{static{this.__NG_ELEMENT_ID__=ope}}return n})();function ope(n){return function ape(n,e,t){if(zo(n)&&!t){const r=ps(n.index,e);return new Hv(r,r)}return 47&n.type?new Hv(e[rr],e):null}(Sn(),fe(),!(16&~n))}class Az{constructor(){}supports(e){return XT(e)}create(e){return new hpe(e)}}const dpe=(n,e)=>e;class hpe{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dpe}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<Rz(r,i,s)?t:r,a=Rz(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,l=c-i;if(u!=l){for(let _=0;_<u;_++){const y=_<s.length?s[_]:s[_]=0,I=y+_;l<=I&&I<u&&(s[_]=y+1)}s[o.previousIndex]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!XT(e))throw new we(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function Uue(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new fpe(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Sz),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sz),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class fpe{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ppe{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Sz{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new ppe,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rz(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Nz(){return new GM([new Az])}let GM=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:Nz})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Nz()),deps:[[n,new Sl,new gu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new we(901,!1)}}return n})();const vpe=vz(null,"core",[]);let bpe=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(Oe(Fu))}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})();function Kg(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function WM(n,e){const t=Yt(n),r=e.elementInjector||vu();return new Jv(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector)}let t8=null;function id(){return t8}class rge{}const Oi=new Pe("");let KM=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>j(sge),providedIn:"platform"})}}return n})();const ige=new Pe("");let sge=(()=>{class n extends KM{constructor(){super(),this._doc=j(Oi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return id().getBaseHref(this._doc)}onPopState(t){const r=id().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=id().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function QM(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function n8(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Lu(n){return n&&"?"!==n[0]?"?"+n:n}let Kh=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>j(i8),providedIn:"root"})}}return n})();const r8=new Pe("");let i8=(()=>{class n extends Kh{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Oi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return QM(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Lu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Lu(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Lu(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Oe(KM),Oe(r8,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oge=(()=>{class n extends Kh{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=QM(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Lu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Lu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Oe(KM),Oe(r8,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),I0=(()=>{class n{constructor(t){this._subject=new vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function uge(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(n8(s8(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Lu(r))}normalize(t){return n.stripTrailingSlash(function cge(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,s8(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Lu(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Lu(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Lu}static{this.joinWithSlash=QM}static{this.stripTrailingSlash=n8}static{this.\u0275fac=function(r){return new(r||n)(Oe(Kh))}}static{this.\u0275prov=ke({token:n,factory:()=>function age(){return new I0(Oe(Kh))}(),providedIn:"root"})}}return n})();function s8(n){return n.replace(/\/index.html$/,"")}class Wge{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ak=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Wge(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),y8(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{y8(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ae(Xo),Ae(Jr),Ae(GM))}}static{this.\u0275dir=Ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function y8(n,e){n.context.$implicit=e.item}let LC=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Kge,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){v8("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){v8("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ae(Xo),Ae(Jr))}}static{this.\u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Kge{constructor(){this.$implicit=null,this.ngIf=null}}function v8(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Wr(e)}'.`)}let Yg=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static{this.\u0275fac=function(r){return new(r||n)(Ae(Xo))}}static{this.\u0275dir=Ge({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_i]})}}return n})(),E8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})();const w8="browser";function VC(n){return"server"===n}let Dme=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>function Cme(n){return n===w8}(j(Cc))?new Ame(j(Oi),window):new Rme})}}return n})();class Ame{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Sme(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class Rme{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class i_e extends rge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fk extends i_e{static makeCurrent(){!function nge(n){t8??=n}(new fk)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function s_e(){return C0=C0||document.querySelector("base"),C0?C0.getAttribute("href"):null}();return null==t?null:function o_e(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){C0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Gge(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let C0=null,c_e=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const pk=new Pe("");let M8=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new we(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(Oe(pk),Oe(qt))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class k8{constructor(e){this._doc=e}}const gk="ng-app-id";let P8=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=VC(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${gk}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(gk),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(gk,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Oe(Oi),Oe(yT),Oe(IH,8),Oe(Cc))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const mk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_k=/%COMP%/g,h_e=new Pe("",{providedIn:"root",factory:()=>!0});function F8(n,e){return e.map(t=>t.replace(_k,n))}let L8=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=VC(a),this.defaultRenderer=new yk(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Go.ShadowDom&&(r={...r,encapsulation:Go.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof B8?i.applyToHost(t):i instanceof vk&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Go.Emulated:s=new B8(c,u,r,this.appId,l,o,a,f);break;case Go.ShadowDom:return new m_e(c,u,t,r,o,a,this.nonce,f);default:s=new vk(c,u,r,l,o,a,f)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Oe(M8),Oe(P8),Oe(yT),Oe(h_e),Oe(Oi),Oe(Cc),Oe(qt),Oe(IH))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class yk{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(mk[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(V8(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(V8(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new we(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=mk[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mk[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Jl.DashCase|Jl.Important)?e.style.setProperty(t,r,i&Jl.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Jl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=id().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function V8(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class m_e extends yk{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=F8(i.id,i.styles);for(const l of u){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=l,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class vk extends yk{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?F8(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class B8 extends vk{constructor(e,t,r,i,s,o,a,c){const u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=function f_e(n){return"_ngcontent-%COMP%".replace(_k,n)}(u),this.hostAttr=function p_e(n){return"_nghost-%COMP%".replace(_k,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let __e=(()=>{class n extends k8{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(Oe(Oi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const U8=["alt","control","meta","shift"],y_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v_e={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let b_e=(()=>{class n extends k8{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>id().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),U8.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=y_e[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),U8.forEach(o=>{o!==i&&(0,v_e[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(Oe(Oi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const $8=[{provide:Cc,useValue:w8},{provide:bH,useValue:function I_e(){fk.makeCurrent()},multi:!0},{provide:Oi,useFactory:function w_e(){return function poe(n){Nx=n}(document),document},deps:[]}],T_e=vz(vpe,"browser",$8),C_e=new Pe(""),H8=[{provide:gC,useClass:class a_e{addToWindow(e){pt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new we(5103,!1);return s},pt.getAllAngularTestabilities=()=>e.getAllTestabilities(),pt.getAllAngularRootElements=()=>e.getAllRootElements(),pt.frameworkStabilizers||(pt.frameworkStabilizers=[]),pt.frameworkStabilizers.push(r=>{const i=pt.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?id().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:cz,useClass:NM,deps:[qt,MM,gC]},{provide:NM,useClass:NM,deps:[qt,MM,gC]}],G8=[{provide:Ly,useValue:"root"},{provide:Qo,useFactory:function E_e(){return new Qo},deps:[]},{provide:pk,useClass:__e,multi:!0,deps:[Oi,qt,Cc]},{provide:pk,useClass:b_e,multi:!0,deps:[Oi]},L8,P8,M8,{provide:j3,useExisting:L8},{provide:class xme{},useClass:c_e,deps:[]},[]];let D_e=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:yT,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Oe(C_e,12))}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({providers:[...G8,...H8],imports:[E8,bpe]})}}return n})(),A_e=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(Oe(Oi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Uu=k(635);const bk=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function K8(n){return Ye(n?.then)}function Q8(n){return Ye(n[qa])}function Y8(n){return Symbol.asyncIterator&&Ye(n?.[Symbol.asyncIterator])}function J8(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const X8=function N_e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Z8(n){return Ye(n?.[X8])}function eW(n){return(0,Uu.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Uu.N3)(t.read());if(i)return yield(0,Uu.N3)(void 0);yield yield(0,Uu.N3)(r)}}finally{t.releaseLock()}})}function tW(n){return Ye(n?.getReader)}function Fi(n){if(n instanceof sn)return n;if(null!=n){if(Q8(n))return function M_e(n){return new sn(e=>{const t=n[qa]();if(Ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(bk(n))return function k_e(n){return new sn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(K8(n))return function P_e(n){return new sn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,va)})}(n);if(Y8(n))return nW(n);if(Z8(n))return function O_e(n){return new sn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(tW(n))return function F_e(n){return nW(eW(n))}(n)}throw J8(n)}function nW(n){return new sn(e=>{(function L_e(n,e){var t,r,i,s;return(0,Uu.sH)(this,void 0,void 0,function*(){try{for(t=(0,Uu.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ju(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Qh(n,e=0){return jt((t,r)=>{t.subscribe(bt(r,i=>ju(r,n,()=>r.next(i),e),()=>ju(r,n,()=>r.complete(),e),i=>ju(r,n,()=>r.error(i),e)))})}function Jg(n,e=0){return jt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rW(n,e){if(!n)throw new Error("Iterable cannot be null");return new sn(t=>{ju(t,e,()=>{const r=n[Symbol.asyncIterator]();ju(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function hr(n,e){return e?function H_e(n,e){if(null!=n){if(Q8(n))return function V_e(n,e){return Fi(n).pipe(Jg(e),Qh(e))}(n,e);if(bk(n))return function U_e(n,e){return new sn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(K8(n))return function B_e(n,e){return Fi(n).pipe(Jg(e),Qh(e))}(n,e);if(Y8(n))return rW(n,e);if(Z8(n))return function j_e(n,e){return new sn(t=>{let r;return ju(t,e,()=>{r=n[X8](),ju(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Ye(r?.return)&&r.return()})}(n,e);if(tW(n))return function $_e(n,e){return rW(eW(n),e)}(n,e)}throw J8(n)}(n,e):Fi(n)}const{isArray:G_e}=Array,{getPrototypeOf:q_e,prototype:z_e,keys:W_e}=Object;function iW(n){if(1===n.length){const e=n[0];if(G_e(e))return{args:e,keys:null};if(function K_e(n){return n&&"object"==typeof n&&q_e(n)===z_e}(e)){const t=W_e(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sW(n){return n&&Ye(n.schedule)}function Ik(n){return n[n.length-1]}function $C(n){return Ye(Ik(n))?n.pop():void 0}function A0(n){return sW(Ik(n))?n.pop():void 0}const{isArray:Y_e}=Array;function Ek(n){return je(e=>function J_e(n,e){return Y_e(e)?n(...e):n(e)}(n,e))}function oW(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let aW=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(ku),Ae($n))}}static{this.\u0275dir=Ge({type:n})}}return n})(),Yh=(()=>{class n extends aW{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})()}static{this.\u0275dir=Ge({type:n,features:[Rn]})}}return n})();const La=new Pe(""),eye={provide:La,useExisting:An(()=>Jh),multi:!0},nye=new Pe("");let Jh=(()=>{class n extends aW{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function tye(){const n=id()?id().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(ku),Ae($n),Ae(nye,8))}}static{this.\u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&_t("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ir([eye]),Rn]})}}return n})();function sd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const gs=new Pe(""),od=new Pe(""),rye=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function hW(n){return sd(n.value)?{required:!0}:null}function pW(n){return sd(n.value)||rye.test(n.value)?null:{email:!0}}function HC(n){return null}function yW(n){return null!=n}function vW(n){return y0(n)?hr(n):n}function bW(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function IW(n,e){return e.map(t=>t(n))}function EW(n){return n.map(e=>function iye(n){return!n.validate}(e)?e:t=>e.validate(t))}function wk(n){return null!=n?function wW(n){if(!n)return null;const e=n.filter(yW);return 0==e.length?null:function(t){return bW(IW(t,e))}}(EW(n)):null}function Tk(n){return null!=n?function TW(n){if(!n)return null;const e=n.filter(yW);return 0==e.length?null:function(t){return function X_e(...n){const e=$C(n),{args:t,keys:r}=iW(n),i=new sn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,u=o;for(let l=0;l<o;l++){let f=!1;Fi(t[l]).subscribe(bt(s,_=>{f||(f=!0,u--),a[l]=_},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(r?oW(r,a):a),s.complete())}))}});return e?i.pipe(Ek(e)):i}(IW(t,e).map(vW)).pipe(je(bW))}}(EW(n)):null}function CW(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ck(n){return n?Array.isArray(n)?n:[n]:[]}function GC(n,e){return Array.isArray(n)?n.includes(e):n===e}function SW(n,e){const t=Ck(e);return Ck(n).forEach(i=>{GC(t,i)||t.push(i)}),t}function RW(n,e){return Ck(e).filter(t=>!GC(n,t))}class xW{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class io extends xW{get formDirective(){return null}get path(){return null}}class ad extends xW{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class NW{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let S0=(()=>{class n extends NW{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(ad,2))}}static{this.\u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&dn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rn]})}}return n})(),Xg=(()=>{class n extends NW{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(io,10))}}static{this.\u0275dir=Ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&dn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Rn]})}}return n})();const R0="VALID",zC="INVALID",Zg="PENDING",x0="DISABLED";function Sk(n){return(WC(n)?n.validators:n)||null}function Rk(n,e){return(WC(e)?e.asyncValidators:n)||null}function WC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class xk{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===R0}get invalid(){return this.status===zC}get pending(){return this.status==Zg}get disabled(){return this.status===x0}get enabled(){return this.status!==x0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SW(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SW(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(RW(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(RW(e,this._rawAsyncValidators))}hasValidator(e){return GC(this._rawValidators,e)}hasAsyncValidator(e){return GC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zg,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=x0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=R0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===R0||this.status===Zg)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?x0:R0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zg,this._hasOwnPendingAsyncValidator=!0;const t=vW(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?x0:this.errors?zC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zg)?Zg:this._anyControlsHaveStatus(zC)?zC:R0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){WC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cye(n){return Array.isArray(n)?wk(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uye(n){return Array.isArray(n)?Tk(n):n||null}(this._rawAsyncValidators)}}class Nk extends xk{constructor(e,t,r){super(Sk(t),Rk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function PW(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new we(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function kW(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new we(1e3,"");if(!r[t])throw new we(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const em=new Pe("CallSetDisabledState",{providedIn:"root",factory:()=>KC}),KC="always";function N0(n,e,t=KC){Mk(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hye(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&OW(n,e)})}(n,e),function pye(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fye(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&OW(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dye(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function JC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Mk(n,e){const t=function DW(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(CW(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function AW(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(CW(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();JC(e._rawValidators,i),JC(e._rawAsyncValidators,i)}function OW(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const vye={provide:io,useExisting:An(()=>cd)},M0=Promise.resolve();let cd=(()=>{class n extends io{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new vt,this.form=new Nk({},wk(t),Tk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){M0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),N0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){M0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){M0.then(()=>{const r=this._findContainer(t.path),i=new Nk({});(function FW(n,e){Mk(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){M0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){M0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function LW(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ae(gs,10),Ae(od,10),Ae(em,8))}}static{this.\u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&_t("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[vn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ir([vye]),Rn]})}}return n})();function VW(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function BW(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const UW=class extends xk{constructor(e=null,t,r){super(Sk(t),Rk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=BW(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){VW(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){VW(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){BW(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Eye={provide:ad,useExisting:An(()=>tm)},HW=Promise.resolve();let tm=(()=>{class n extends ad{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new UW,this._registered=!1,this.name="",this.update=new vt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ok(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Jh?t=s:function _ye(n){return Object.getPrototypeOf(n.constructor)===Yh}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Pk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){N0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HW.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Kg(r);HW.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function QC(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ae(io,9),Ae(gs,10),Ae(od,10),Ae(La,10),Ae(oc,8),Ae(em,8))}}static{this.\u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[vn.None,"disabled","isDisabled"],model:[vn.None,"ngModel","model"],options:[vn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ir([Eye]),Rn,_i]})}}return n})(),nm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const wye={provide:La,useExisting:An(()=>Fk),multi:!0};let Fk=(()=>{class n extends Yh{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})()}static{this.\u0275dir=Ge({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&_t("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[ir([wye]),Rn]})}}return n})(),Xh=(()=>{class n{constructor(){this._validator=HC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):HC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ge({type:n,features:[_i]})}}return n})();const Uye={provide:gs,useExisting:An(()=>Zh),multi:!0};let Zh=(()=>{class n extends Xh{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Kg,this.createValidator=t=>hW}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})()}static{this.\u0275dir=Ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Yn("required",i._enabled?"":null)},inputs:{required:"required"},features:[ir([Uye]),Rn]})}}return n})();const $ye={provide:gs,useExisting:An(()=>k0),multi:!0};let k0=(()=>{class n extends Xh{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=Kg,this.createValidator=t=>pW}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})()}static{this.\u0275dir=Ge({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[ir([$ye]),Rn]})}}return n})(),zye=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),Kye=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:em,useValue:t.callSetDisabledState??KC}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({imports:[zye]})}}return n})();function gt(...n){return hr(n,A0(n))}function $k(...n){const e=A0(n),t=$C(n),{args:r,keys:i}=iW(n);if(0===r.length)return hr([],e);const s=new sn(function Yye(n,e,t=yo){return r=>{o6(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)o6(e,()=>{const u=hr(n[c],e);let l=!1;u.subscribe(bt(r,f=>{s[c]=f,l||(l=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>oW(i,o):yo));return t?s.pipe(Ek(t)):s}function o6(n,e,t){n?ju(t,n,e):e()}const ZC=Cn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ji(n,e,t=1/0){return Ye(e)?Ji((r,i)=>je((s,o)=>e(r,s,i,o))(Fi(n(r,i))),t):("number"==typeof e&&(t=e),jt((r,i)=>function Jye(n,e,t,r,i,s,o,a){const c=[];let u=0,l=0,f=!1;const _=()=>{f&&!c.length&&!u&&e.complete()},y=T=>u<r?I(T):c.push(T),I=T=>{s&&e.next(T),u++;let A=!1;Fi(t(T,l++)).subscribe(bt(e,x=>{i?.(x),s?y(x):e.next(x)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;c.length&&u<r;){const x=c.shift();o?ju(e,o,()=>I(x)):I(x)}_()}catch(x){e.error(x)}}))};return n.subscribe(bt(e,y,()=>{f=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function rm(n=1/0){return Ji(yo,n)}function P0(...n){return function Xye(){return rm(1)}()(hr(n,A0(n)))}function a6(n){return new sn(e=>{Fi(n()).subscribe(e)})}function eD(n,e){const t=Ye(n)?n:()=>n,r=i=>i.error(t());return new sn(e?i=>e.schedule(r,0,i):r)}const ta=new sn(n=>n.complete());function Hk(){return jt((n,e)=>{let t=null;n._refCount++;const r=bt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class c6 extends sn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,nr(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tr;const t=this.getSubject();e.add(this.source.subscribe(bt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tr.EMPTY)}return e}refCount(){return Hk()(this)}}function Ii(n,e){return jt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(bt(r,c=>{i?.unsubscribe();let u=0;const l=s++;Fi(n(c,l)).subscribe(i=bt(r,f=>r.next(e?e(c,f,l,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Xi(n){return n<=0?()=>ta:jt((e,t)=>{let r=0;e.subscribe(bt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function O0(...n){const e=A0(n);return jt((t,r)=>{(e?P0(n,t,e):P0(n,t)).subscribe(r)})}function ti(n,e){return jt((t,r)=>{let i=0;t.subscribe(bt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function tD(n){return jt((e,t)=>{let r=!1;e.subscribe(bt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function u6(n=eve){return jt((e,t)=>{let r=!1;e.subscribe(bt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function eve(){return new ZC}function ud(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ti((i,s)=>n(i,s,r)):yo,Xi(1),t?tD(e):u6(()=>new ZC))}function F0(n,e){return Ye(e)?Ji(n,e,1):Ji(n,1)}function Zi(n,e,t){const r=Ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?jt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(bt(s,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),s.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):yo}function im(n){return jt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(bt(t,void 0,void 0,o=>{s=Fi(n(o,im(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function nD(n,e){return jt(function tve(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(bt(o,l=>{const f=u++;c=a?n(c,l,f):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Gk(n){return n<=0?()=>ta:jt((e,t)=>{let r=[];e.subscribe(bt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qk(n){return jt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ms(n){return jt((e,t)=>{Fi(n).subscribe(bt(t,()=>t.complete(),fi)),!t.closed&&e.subscribe(t)})}const Jt="primary",L0=Symbol("RouteTitle");class rve{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sm(n){return new rve(n)}function ive(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vc(n,e){const t=n?zk(n):void 0,r=e?zk(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!d6(n[i],e[i]))return!1;return!0}function zk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function d6(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function h6(n){return n.length>0?n[n.length-1]:null}function ld(n){return function Qye(n){return!!n&&(n instanceof sn||Ye(n.lift)&&Ye(n.subscribe))}(n)?n:y0(n)?hr(Promise.resolve(n)):gt(n)}const ove={exact:function g6(n,e,t){if(!ef(n.segments,e.segments)||!rD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!g6(n.children[r],e.children[r],t))return!1;return!0},subset:m6},f6={exact:function ave(n,e){return Vc(n,e)},subset:function cve(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>d6(n[t],e[t]))},ignored:()=>!0};function p6(n,e,t){return ove[t.paths](n.root,e.root,t.matrixParams)&&f6[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function m6(n,e,t){return _6(n,e,e.segments,t)}function _6(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ef(i,t)||e.hasChildren()||!rD(i,t,r))}if(n.segments.length===t.length){if(!ef(n.segments,t)||!rD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!m6(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ef(n.segments,i)&&rD(n.segments,i,r)&&n.children[Jt])&&_6(n.children[Jt],e,s,r)}}function rD(n,e,t){return e.every((r,i)=>f6[t](n[i].parameters,r.parameters))}class om{constructor(e=new Jn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sm(this.queryParams),this._queryParamMap}toString(){return dve.serialize(this)}}class Jn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iD(this)}}class V0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sm(this.parameters),this._parameterMap}toString(){return b6(this)}}function ef(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let am=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>new Wk,providedIn:"root"})}}return n})();class Wk{parse(e){const t=new Eve(e);return new om(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${B0(e.root,!0)}`,r=function pve(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${sD(t)}=${sD(i)}`).join("&"):`${sD(t)}=${sD(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hve(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dve=new Wk;function iD(n){return n.segments.map(e=>b6(e)).join("/")}function B0(n,e){if(!n.hasChildren())return iD(n);if(e){const t=n.children[Jt]?B0(n.children[Jt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Jt&&r.push(`${i}:${B0(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lve(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Jt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Jt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Jt?[B0(n.children[Jt],!1)]:[`${i}:${B0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${iD(n)}/${t[0]}`:`${iD(n)}/(${t.join("//")})`}}function y6(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sD(n){return y6(n).replace(/%3B/gi,";")}function Kk(n){return y6(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oD(n){return decodeURIComponent(n)}function v6(n){return oD(n.replace(/\+/g,"%20"))}function b6(n){return`${Kk(n.path)}${function fve(n){return Object.entries(n).map(([e,t])=>`;${Kk(e)}=${Kk(t)}`).join("")}(n.parameters)}`}const gve=/^[^\/()?;#]+/;function Qk(n){const e=n.match(gve);return e?e[0]:""}const mve=/^[^\/()?;=#]+/,yve=/^[^=?&#]+/,bve=/^[^&#]+/;class Eve{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jn([],{}):new Jn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new Jn(e,t)),r}parseSegment(){const e=Qk(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(e),new V0(oD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function _ve(n){const e=n.match(mve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qk(this.remaining);i&&(r=i,this.capture(r))}e[oD(t)]=oD(r)}parseQueryParam(e){const t=function vve(n){const e=n.match(yve);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Ive(n){const e=n.match(bve);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=v6(t),s=v6(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qk(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new we(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Jt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Jt]:new Jn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new we(4011,!1)}}function I6(n){return n.segments.length>0?new Jn([],{[Jt]:n}):n}function E6(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=E6(i);if(r===Jt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function wve(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new Jn(n.segments.concat(e.segments),e.children)}return n}(new Jn(n.segments,e))}function cm(n){return n instanceof om}function w6(n){let e;const i=I6(function t(s){const o={};for(const c of s.children){const u=t(c);o[c.outlet]=u}const a=new Jn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function T6(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Yk(i,i,i,t,r);const s=function Cve(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new D6(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new D6(t,e,r)}(e);if(s.toRoot())return Yk(i,i,new Jn([],{}),t,r);const o=function Dve(n,e,t){if(n.isAbsolute)return new cD(e,!0,0);if(!t)return new cD(e,!1,NaN);if(null===t.parent)return new cD(t,!0,0);const r=aD(n.commands[0])?0:1;return function Ave(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new we(4005,!1);i=r.segments.length}return new cD(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?j0(o.segmentGroup,o.index,s.commands):A6(o.segmentGroup,o.index,s.commands);return Yk(i,o.segmentGroup,a,t,r)}function aD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function U0(n){return"object"==typeof n&&null!=n&&n.outlets}function Yk(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),o=n===e?t:C6(n,e,t);const a=I6(E6(o));return new om(a,s,i)}function C6(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:C6(s,e,t)}),new Jn(n.segments,r)}class D6{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&aD(r[0]))throw new we(4003,!1);const i=r.find(U0);if(i&&i!==h6(r))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cD{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function A6(n,e,t){if(n??=new Jn([],{}),0===n.segments.length&&n.hasChildren())return j0(n,e,t);const r=function Rve(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(U0(a))break;const c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!R6(c,u,o))return s;r+=2}else{if(!R6(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Jn(n.segments.slice(0,r.pathIndex),{});return s.children[Jt]=new Jn(n.segments.slice(r.pathIndex),n.children),j0(s,0,i)}return r.match&&0===i.length?new Jn(n.segments,{}):r.match&&!n.hasChildren()?Jk(n,e,t):r.match?j0(n,0,i):Jk(n,e,t)}function j0(n,e,t){if(0===t.length)return new Jn(n.segments,{});{const r=function Sve(n){return U0(n[0])?n[0].outlets:{[Jt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Jt)&&n.children[Jt]&&1===n.numberOfChildren&&0===n.children[Jt].segments.length){const s=j0(n.children[Jt],e,t);return new Jn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=A6(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Jn(n.segments,i)}}function Jk(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(U0(s)){const c=xve(s.outlets);return new Jn(r,c)}if(0===i&&aD(t[0])){r.push(new V0(n.segments[e].path,S6(t[0]))),i++;continue}const o=U0(s)?s.outlets[Jt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&aD(a)?(r.push(new V0(o,S6(a))),i+=2):(r.push(new V0(o,{})),i++)}return new Jn(r,{})}function xve(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Jk(new Jn([],{}),0,r))}),e}function S6(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function R6(n,e,t){return n==t.path&&Vc(e,t.parameters)}const $0="imperative";var fn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(fn||{});class Bc{constructor(e,t){this.id=e,this.url=t}}class uD extends Bc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=fn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $u extends Bc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=fn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var na=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(na||{}),lD=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lD||{});class um extends Bc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=fn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lm extends Bc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=fn.NavigationSkipped}}class dD extends Bc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=fn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class x6 extends Bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=fn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nve extends Bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=fn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mve extends Bc{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=fn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kve extends Bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=fn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pve extends Bc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=fn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ove{constructor(e){this.route=e,this.type=fn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fve{constructor(e){this.route=e,this.type=fn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lve{constructor(e){this.snapshot=e,this.type=fn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vve{constructor(e){this.snapshot=e,this.type=fn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bve{constructor(e){this.snapshot=e,this.type=fn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uve{constructor(e){this.snapshot=e,this.type=fn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N6{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=fn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Xk{}class Zk{constructor(e){this.url=e}}class jve{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new H0,this.attachRef=null}}let H0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jve,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class M6{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tP(e,this._root).map(t=>t.value)}}function eP(n,e){if(n===e.value)return e;for(const t of e.children){const r=eP(n,t);if(r)return r}return null}function tP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tP(n,t);if(r.length)return r.unshift(e),r}return[]}class uc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function dm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class k6 extends M6{constructor(e,t){super(e),this.snapshot=t,iP(this,e)}toString(){return this.snapshot.toString()}}function P6(n){const e=function $ve(n){const s=new rP([],{},{},"",{},Jt,n,null,{});return new O6("",new uc(s,[]))}(n),t=new nt([new V0("",{})]),r=new nt({}),i=new nt({}),s=new nt({}),o=new nt(""),a=new tf(t,r,s,o,i,Jt,n,e.root);return a.snapshot=e.root,new k6(new uc(a,[]),e)}class tf{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(je(u=>u[L0]))??gt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(je(e=>sm(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(je(e=>sm(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nP(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&L6(i)&&(r.resolve[L0]=i.title),r}class rP{get title(){return this.data?.[L0]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sm(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class O6 extends M6{constructor(e,t){super(t),this.url=e,iP(this,t)}toString(){return F6(this._root)}}function iP(n,e){e.value._routerState=n,e.children.forEach(t=>iP(n,t))}function F6(n){const e=n.children.length>0?` { ${n.children.map(F6).join(", ")} } `:"";return`${n.value}${e}`}function sP(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vc(e.params,t.params)||n.paramsSubject.next(t.params),function sve(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Vc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oP(n,e){const t=Vc(n.params,e.params)&&function uve(n,e){return ef(n,e)&&n.every((t,r)=>Vc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||oP(n.parent,e.parent))}function L6(n){return"string"==typeof n.title||null===n.title}let aP=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Jt,this.activateEvents=new vt,this.deactivateEvents=new vt,this.attachEvents=new vt,this.detachEvents=new vt,this.parentContexts=j(H0),this.location=j(Xo),this.changeDetector=j(oc),this.environmentInjector=j(Si),this.inputBinder=j(hD,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new cP(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_i]})}}return n})();class cP{__ngOutletInjector(e){return new cP(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===tf?this.route:e===H0?this.childContexts:this.parent.get(e,t)}}const hD=new Pe("");let V6=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=$k([r.queryParams,r.params,r.data]).pipe(Ii(([s,o,a],c)=>(a={...s,...o,...a},0===c?gt(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function tge(n){const e=Yt(n);if(!e)return null;const t=new Jv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function G0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Gve(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return G0(n,r,i);return G0(n,r)})}(n,e,t);return new uc(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>G0(n,a)),o}}const r=function qve(n){return new tf(new nt(n.url),new nt(n.params),new nt(n.queryParams),new nt(n.fragment),new nt(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>G0(n,s));return new uc(r,i)}}const B6="ngNavigationCancelingError";function U6(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=cm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=j6(!1,na.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function j6(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[B6]=!0,t.cancellationCode=e,t}function $6(n){return!!n&&n[B6]}let H6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Pa],decls:1,vars:0,template:function(r,i){1&r&&hn(0,"router-outlet")},dependencies:[aP],encapsulation:2})}}return n})();function uP(n){const e=n.children&&n.children.map(uP),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=H6),t}function Uc(n){return n.outlet||Jt}function q0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Zve{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sP(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=dm(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=dm(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=dm(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=dm(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Uve(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Vve(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(sP(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),sP(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=q0(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class G6{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fD{constructor(e,t){this.component=e,this.route=t}}function e0e(n,e,t){const r=n._root;return z0(r,e?e._root:null,t,[r.value])}function hm(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function CR(n){return null!==Dl(n)}(n)?e.get(n):n:r}function z0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=dm(e);return n.children.forEach(o=>{(function n0e(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function r0e(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ef(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ef(n.url,e.url)||!Vc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oP(n,e)||!Vc(n.queryParams,e.queryParams);default:return!oP(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new G6(r)):(s.data=o.data,s._resolvedData=o._resolvedData),z0(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fD(a.outlet.component,o))}else o&&W0(e,a,i),i.canActivateChecks.push(new G6(r)),z0(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>W0(a,t.getContext(o),i)),i}function W0(n,e,t){const r=dm(n),i=n.value;Object.entries(r).forEach(([s,o])=>{W0(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new fD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function K0(n){return"function"==typeof n}function q6(n){return n instanceof ZC||"EmptyError"===n?.name}const pD=Symbol("INITIAL_VALUE");function fm(){return Ii(n=>$k(n.map(e=>e.pipe(Xi(1),O0(pD)))).pipe(je(e=>{for(const t of e)if(!0!==t){if(t===pD)return pD;if(!1===t||t instanceof om)return t}return!0}),ti(e=>e!==pD),Xi(1)))}function z6(n){return function oh(...n){return lu(n)}(Zi(e=>{if(cm(e))throw U6(0,e)}),je(e=>!0===e))}class lP{constructor(e){this.segmentGroup=e||null}}class dP extends Error{constructor(e){super(),this.urlTree=e}}function pm(n){return eD(new lP(n))}class E0e{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return gt(r);if(i.numberOfChildren>1||!i.children[Jt])return eD(new we(4e3,!1));i=i.children[Jt]}}applyRedirectCommands(e,t,r){const i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new dP(i);return i}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new om(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Jn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new we(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const hP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function w0e(n,e,t,r,i){const s=fP(n,e,t);return s.matched?(r=function Wve(n,e){return n.providers&&!n._injector&&(n._injector=YT(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function v0e(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?gt(i.map(o=>{const a=hm(o,n);return ld(function u0e(n){return n&&K0(n.canMatch)}(a)?a.canMatch(e,t):Un(n,()=>a(e,t)))})).pipe(fm(),z6()):gt(!0)}(r,e,t).pipe(je(o=>!0===o?s:{...hP}))):gt(s)}function fP(n,e,t){if("**"===e.path)return function T0e(n){return{matched:!0,parameters:n.length>0?h6(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...hP}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ive)(t,n,e);if(!i)return{...hP};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function W6(n,e,t,r){return t.length>0&&function A0e(n,e,t){return t.some(r=>gD(n,e,r)&&Uc(r)!==Jt)}(n,t,r)?{segmentGroup:new Jn(e,D0e(r,new Jn(t,n.children))),slicedSegments:[]}:0===t.length&&function S0e(n,e,t){return t.some(r=>gD(n,e,r))}(n,t,r)?{segmentGroup:new Jn(n.segments,C0e(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Jn(n.segments,n.children),slicedSegments:t}}function C0e(n,e,t,r){const i={};for(const s of t)if(gD(n,e,s)&&!r[Uc(s)]){const o=new Jn([],{});i[Uc(s)]=o}return{...r,...i}}function D0e(n,e){const t={};t[Jt]=e;for(const r of n)if(""===r.path&&Uc(r)!==Jt){const i=new Jn([],{});t[Uc(r)]=i}return t}function gD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class N0e{}class P0e{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new E0e(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new we(4002,`'${e.segmentGroup}'`)}recognize(){const e=W6(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(je(t=>{const r=new rP([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,{}),i=new uc(r,t),s=new O6("",i),o=function Tve(n,e,t=null,r=null){return T6(w6(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Jt).pipe(im(r=>{if(r instanceof dP)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lP?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,i=nP(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(je(s=>s instanceof uc?[s]:[]))}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return hr(i).pipe(F0(s=>{const o=r.children[s],a=function Jve(n,e){const t=n.filter(r=>Uc(r)===e);return t.push(...n.filter(r=>Uc(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),nD((s,o)=>(s.push(...o),s)),tD(null),function nve(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ti((i,s)=>n(i,s,r)):yo,Gk(1),t?tD(e):u6(()=>new ZC))}(),Ji(s=>{if(null===s)return pm(r);const o=K6(s);return function O0e(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),gt(o)}))}processSegment(e,t,r,i,s,o){return hr(t).pipe(F0(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(im(c=>{if(c instanceof lP)return gt(null);throw c}))),ud(a=>!!a),im(a=>{if(q6(a))return function x0e(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?gt(new N0e):pm(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function R0e(n,e,t,r){return!!(Uc(n)===r||r!==Jt&&gD(e,t,n))&&fP(e,n,t).matched}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):pm(i):pm(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=fP(t,i,s);if(!a)return pm(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,f).pipe(Ji(_=>this.processSegment(e,r,t,_.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){const o=w0e(t,r,i,e);return"**"===r.path&&(t.children={}),o.pipe(Ii(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Ii(({routes:c})=>{const u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:f,parameters:_}=a,y=new rP(l,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function L0e(n){return n.data||{}}(r),Uc(r),r.component??r._loadedComponent??null,r,function V0e(n){return n.resolve||{}}(r)),{segmentGroup:I,slicedSegments:T}=W6(t,l,f,c);if(0===T.length&&I.hasChildren())return this.processChildren(u,c,I).pipe(je(x=>null===x?null:new uc(y,x)));if(0===c.length&&0===T.length)return gt(new uc(y,[]));const A=Uc(r)===s;return this.processSegment(u,c,I,T,A?Jt:s,!0).pipe(je(x=>new uc(y,x instanceof uc?[x]:[])))})):pm(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function y0e(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?gt(!0):gt(i.map(o=>{const a=hm(o,n);return ld(function s0e(n){return n&&K0(n.canLoad)}(a)?a.canLoad(e,t):Un(n,()=>a(e,t)))})).pipe(fm(),z6())}(e,t,r).pipe(Ji(i=>i?this.configLoader.loadChildren(e,t).pipe(Zi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function I0e(n){return eD(j6(!1,na.GuardRejected))}())):gt({routes:[],injector:e})}}function F0e(n){const e=n.value.routeConfig;return e&&""===e.path}function K6(n){const e=[],t=new Set;for(const r of n){if(!F0e(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=K6(r.children);e.push(new uc(r.value,i))}return e.filter(r=>!t.has(r))}function U0e(n,e){return Ji(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return gt(t);const s=new Set(i.map(c=>c.route)),o=new Set;for(const c of s)if(!o.has(c))for(const u of Q6(c))o.add(u);let a=0;return hr(o).pipe(F0(c=>s.has(c)?function j0e(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!L6(i)&&(s[L0]=i.title),function $0e(n,e,t,r){const i=zk(n);if(0===i.length)return gt({});const s={};return hr(i).pipe(Ji(o=>function H0e(n,e,t,r){const i=q0(e)??r,s=hm(n,i);return ld(s.resolve?s.resolve(e,t):Un(i,()=>s(e,t)))}(n[o],e,t,r).pipe(ud(),Zi(a=>{s[o]=a}))),Gk(1),function l6(n){return je(()=>n)}(s),im(o=>q6(o)?ta:eD(o)))}(s,n,e,r).pipe(je(o=>(n._resolvedData=o,n.data=nP(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=nP(c,c.parent,n).resolve,gt(void 0))),Zi(()=>a++),Gk(1),Ji(c=>a===o.size?gt(t):ta))})}function Q6(n){const e=n.children.map(t=>Q6(t)).flat();return[n,...e]}function pP(n){return Ii(e=>{const t=n(e);return t?hr(t).pipe(je(()=>e)):gt(e)})}let Y6=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Jt);return r}getResolvedTitleForRoute(t){return t.data[L0]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>j(G0e),providedIn:"root"})}}return n})(),G0e=(()=>{class n extends Y6{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(Oe(A_e))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const gm=new Pe("",{providedIn:"root",factory:()=>({})}),mm=new Pe("");let gP=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(fz)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ld(t.loadComponent()).pipe(je(J6),Zi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),qk(()=>{this.componentLoaders.delete(t)})),i=new c6(r,()=>new q).pipe(Hk());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function q0e(n,e,t,r){return ld(n.loadChildren()).pipe(je(J6),Ji(i=>i instanceof NG||Array.isArray(i)?gt(i):hr(e.compileModuleAsync(i))),je(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(mm,[],{optional:!0,self:!0}).flat()),{routes:o.map(uP),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(qk(()=>{this.childrenLoaders.delete(r)})),o=new c6(s,()=>new q).pipe(Hk());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J6(n){return function z0e(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let mP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>j(W0e),providedIn:"root"})}}return n})(),W0e=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const X6=new Pe(""),Z6=new Pe("");function K0e(n,e,t){const r=n.get(Z6),i=n.get(Oi);return n.get(qt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s;const o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),function Q0e(n){return new Promise(e=>{NN(e,{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&Un(n,()=>c({transition:a,from:e,to:t})),o})}let mD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new q,this.transitionAbortSubject=new q,this.configLoader=j(gP),this.environmentInjector=j(Si),this.urlSerializer=j(am),this.rootContexts=j(H0),this.location=j(I0),this.inputBindingEnabled=null!==j(hD,{optional:!0}),this.titleStrategy=j(Y6),this.options=j(gm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(mP),this.createViewTransition=j(X6,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Fve(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Ove(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new nt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$0,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ti(s=>0!==s.id),je(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ii(s=>{let o=!1,a=!1;return gt(s).pipe(Ii(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",na.SupersededByNewNavigation),ta;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const f="";return this.events.next(new lm(c.id,this.urlSerializer.serialize(c.rawUrl),f,lD.IgnoredSameUrlNavigation)),c.resolve(null),ta}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return gt(c).pipe(Ii(f=>{const _=this.transitions?.getValue();return this.events.next(new uD(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),_!==this.transitions?.getValue()?ta:Promise.resolve(f)}),function B0e(n,e,t,r,i,s){return Ji(o=>function M0e(n,e,t,r,i,s,o="emptyOnly"){return new P0e(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(je(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Zi(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects};const _=new x6(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:f,extractedUrl:_,source:y,restoredState:I,extras:T}=c,A=new uD(f,this.urlSerializer.serialize(_),y,I);this.events.next(A);const x=P6(this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:x,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,gt(s)}{const f="";return this.events.next(new lm(c.id,this.urlSerializer.serialize(c.extractedUrl),f,lD.IgnoredByUrlHandlingStrategy)),c.resolve(null),ta}}),Zi(c=>{const u=new Nve(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),je(c=>(this.currentTransition=s={...c,guards:e0e(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function l0e(n,e){return Ji(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?gt({...t,guardsResult:!0}):function d0e(n,e,t,r){return hr(n).pipe(Ji(i=>function _0e(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?gt(s.map(a=>{const c=q0(e)??i,u=hm(a,c);return ld(function c0e(n){return n&&K0(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,r):Un(c,()=>u(n,e,t,r))).pipe(ud())})).pipe(fm()):gt(!0)}(i.component,i.route,t,e,r)),ud(i=>!0!==i,!0))}(o,r,i,n).pipe(Ji(a=>a&&function i0e(n){return"boolean"==typeof n}(a)?function h0e(n,e,t,r){return hr(e).pipe(F0(i=>P0(function p0e(n,e){return null!==n&&e&&e(new Lve(n)),gt(!0)}(i.route.parent,r),function f0e(n,e){return null!==n&&e&&e(new Bve(n)),gt(!0)}(i.route,r),function m0e(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function t0e(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>a6(()=>gt(o.guards.map(c=>{const u=q0(o.node)??t,l=hm(c,u);return ld(function a0e(n){return n&&K0(n.canActivateChild)}(l)?l.canActivateChild(r,n):Un(u,()=>l(r,n))).pipe(ud())})).pipe(fm())));return gt(s).pipe(fm())}(n,i.path,t),function g0e(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const i=r.map(s=>a6(()=>{const o=q0(e)??t,a=hm(s,o);return ld(function o0e(n){return n&&K0(n.canActivate)}(a)?a.canActivate(e,n):Un(o,()=>a(e,n))).pipe(ud())}));return gt(i).pipe(fm())}(n,i.route,t))),ud(i=>!0!==i,!0))}(r,s,n,e):gt(a)),je(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Zi(c=>{if(s.guardsResult=c.guardsResult,cm(c.guardsResult))throw U6(0,c.guardsResult);const u=new Mve(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),ti(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",na.GuardRejected),!1)),pP(c=>{if(c.guards.canActivateChecks.length)return gt(c).pipe(Zi(u=>{const l=new kve(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Ii(u=>{let l=!1;return gt(u).pipe(U0e(this.paramsInheritanceStrategy,this.environmentInjector),Zi({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",na.NoDataFromResolver)}}))}),Zi(u=>{const l=new Pve(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),pP(c=>{const u=l=>{const f=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(l.routeConfig).pipe(Zi(_=>{l.component=_}),je(()=>{})));for(const _ of l.children)f.push(...u(_));return f};return $k(u(c.targetSnapshot.root)).pipe(tD(null),Xi(1))}),pP(()=>this.afterPreactivation()),Ii(()=>{const{currentSnapshot:c,targetSnapshot:u}=s,l=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return l?hr(l).pipe(je(()=>s)):gt(s)}),je(c=>{const u=function Hve(n,e,t){const r=G0(n,e._root,t?t._root:void 0);return new k6(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:u},this.currentNavigation.targetRouterState=u,s}),Zi(()=>{this.events.next(new Xk)}),((n,e,t,r)=>je(i=>(new Zve(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xi(1),Zi({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $u(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),ms(this.transitionAbortSubject.pipe(Zi(c=>{throw c}))),qk(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",na.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),im(c=>{if(a=!0,$6(c))this.events.next(new um(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function zve(n){return $6(n)&&cm(n.url)}(c)?this.events.next(new Zk(c.url)):s.resolve(!1);else{this.events.next(new dD(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return ta}))}))}cancelNavigationTransition(t,r,i){const s=new um(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Y0e(n){return n!==$0}let J0e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>j(Z0e),providedIn:"root"})}}return n})();class X0e{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Z0e=(()=>{class n extends X0e{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),e5=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:()=>j(ebe),providedIn:"root"})}}return n})(),ebe=(()=>{class n extends e5{constructor(){super(...arguments),this.location=j(I0),this.urlSerializer=j(am),this.options=j(gm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(mP),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new om,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=P6(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof uD)this.stateMemento=this.createStateMemento();else if(t instanceof lm)this.rawUrlTree=r.initialUrl;else if(t instanceof x6){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Xk?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof um&&(t.code===na.GuardRejected||t.code===na.NoDataFromResolver)?this.restoreHistory(r):t instanceof dD?this.restoreHistory(r,!0):t instanceof $u&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=jn(n)))(i||n)}})()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Q0=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Q0||{});function t5(n,e){n.events.pipe(ti(t=>t instanceof $u||t instanceof um||t instanceof dD||t instanceof lm),je(t=>t instanceof $u||t instanceof lm?Q0.COMPLETE:t instanceof um&&(t.code===na.Redirect||t.code===na.SupersededByNewNavigation)?Q0.REDIRECTING:Q0.FAILED),ti(t=>t!==Q0.REDIRECTING),Xi(1)).subscribe(()=>{e()})}function tbe(n){throw n}const nbe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rbe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let so=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(rz),this.stateManager=j(e5),this.options=j(gm,{optional:!0})||{},this.pendingTasks=j(Cg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(mD),this.urlSerializer=j(am),this.location=j(I0),this.urlHandlingStrategy=j(mP),this._events=new q,this.errorHandler=this.options.errorHandler||tbe,this.navigated=!1,this.routeReuseStrategy=j(J0e),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(mm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(hD,{optional:!0}),this.eventsSubscription=new tr,this.isNgZoneEnabled=j(qt)instanceof qt&&qt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof um&&r.code!==na.Redirect&&r.code!==na.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof $u)this.navigated=!0;else if(r instanceof Zk){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Y0e(i.source)};this.scheduleNavigation(o,$0,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function sbe(n){return!(n instanceof Xk||n instanceof Zk)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uP),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o;let f,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{f=w6(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return T6(f,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=cm(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,$0,null,r)}navigate(t,r={skipLocationChange:!1}){return function ibe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new we(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...nbe}:!1===r?{...rbe}:r,cm(t))return p6(this.currentUrlTree,t,i);const s=this.parseUrl(t);return p6(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((f,_)=>{a=f,c=_});const l=this.pendingTasks.add();return t5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nf=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new q,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof $u&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function $H(n,e,t){return function Zoe(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?jH:Qx}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ae(so),Ae(tf),tc("tabindex"),Ae(ku),Ae($n),Ae(Kh))}}static{this.\u0275dir=Ge({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&_t("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Yn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[vn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Kg],skipLocationChange:[vn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Kg],replaceUrl:[vn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Kg],routerLink:"routerLink"},standalone:!0,features:[xG,_i]})}}return n})();class n5{}let cbe=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ti(t=>t instanceof $u),F0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=YT(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return hr(i).pipe(rm())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const s=i.pipe(Ji(o=>null===o?gt(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?hr([s,this.loader.loadComponent(r)]).pipe(rm()):s})}static{this.\u0275fac=function(r){return new(r||n)(Oe(so),Oe(fz),Oe(Si),Oe(n5),Oe(gP))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const _P=new Pe("");let r5=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=j(Si),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof uD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $u?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof lm&&t.code===lD.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof N6&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular((0,D.A)(function*(){yield new Promise(s=>{setTimeout(()=>{s()}),NN(()=>{s()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new N6(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function h3(){throw new Error("invalid")}()}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function jc(n,e){return{\u0275kind:n,\u0275providers:e}}function s5(){const n=j(Pr);return e=>{const t=n.get(Fu);if(e!==t.components[0])return;const r=n.get(so),i=n.get(o5);1===n.get(yP)&&r.initialNavigation(),n.get(a5,null,Qt.Optional)?.setUpPreloading(),n.get(_P,null,Qt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const o5=new Pe("",{factory:()=>new q}),yP=new Pe("",{providedIn:"root",factory:()=>1}),a5=new Pe("");function hbe(n){return jc(0,[{provide:a5,useExisting:cbe},{provide:n5,useExisting:n}])}function pbe(n){return jc(9,[{provide:X6,useValue:K0e},{provide:Z6,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const c5=new Pe("ROUTER_FORROOT_GUARD"),gbe=[I0,{provide:am,useClass:Wk},so,H0,{provide:tf,useFactory:function i5(n){return n.routerState.root},deps:[so]},gP,[]];let u5=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[gbe,[],{provide:mm,multi:!0,useValue:t},{provide:c5,useFactory:vbe,deps:[[so,new gu,new Sl]]},{provide:gm,useValue:r||{}},r?.useHash?{provide:Kh,useClass:oge}:{provide:Kh,useClass:i8},{provide:_P,useFactory:()=>{const n=j(Dme),e=j(qt),t=j(gm),r=j(mD),i=j(am);return t.scrollOffset&&n.setOffset(t.scrollOffset),new r5(i,r,n,e,t)}},r?.preloadingStrategy?hbe(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?bbe(r):[],r?.bindToComponentInputs?jc(8,[V6,{provide:hD,useExisting:V6}]).\u0275providers:[],r?.enableViewTransitions?pbe().\u0275providers:[],[{provide:l5,useFactory:s5},{provide:FM,multi:!0,useExisting:l5}]]}}static forChild(t){return{ngModule:n,providers:[{provide:mm,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(Oe(c5,8))}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})();function vbe(n){return"guarded"}function bbe(n){return["disabled"===n.initialNavigation?jc(3,[{provide:PM,multi:!0,useFactory:()=>{const e=j(so);return()=>{e.setUpLocationChangeListener()}}},{provide:yP,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?jc(2,[{provide:yP,useValue:0},{provide:PM,multi:!0,deps:[Pr],useFactory:e=>{const t=e.get(ige,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(so),s=e.get(o5);t5(i,()=>{r(!0)}),e.get(mD).afterPreactivation=()=>(r(!0),s.closed?gt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const l5=new Pe(""),d5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},bP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0;let _=(15&a)<<2|u>>6,y=63&u;c||(y=64,o||(_=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[_],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d5(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const c=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==u||null==f)throw Error();r.push(s<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==f&&r.push(u<<6&192|f))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_D=function(n){return function(n){const e=d5(n);return bP.encodeByteArray(e,!0)}(n).replace(/\./g,"")},yD=function(n){try{return bP.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ni(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vD(){try{return"object"==typeof indexedDB}catch{return!1}}function f5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const IP=()=>{try{return f5().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yD(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},p5=n=>{var e,t;return null===(t=null===(e=IP())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},Vbe=()=>{var n;return null===(n=IP())||void 0===n?void 0:n.config},g5=n=>{var e;return null===(e=IP())||void 0===e?void 0:e[`_${n}`]};class _m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}class Hu extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Hu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ym.prototype.create)}}class ym{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function jbe(n,e){return n.replace($be,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Hu(i,`${this.serviceName}: ${o} (${i}).`,r)}}const $be=/\{\$([^}]+)}/g;function ID(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(_5(s)&&_5(o)){if(!ID(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function _5(n){return null!==n&&"object"==typeof n}function Y0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function J0(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function X0(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class qbe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function zbe(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=EP),void 0===i.error&&(i.error=EP),void 0===i.complete&&(i.complete=EP);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EP(){}const Wbe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})};function Li(n){return n&&n._delegate?n._delegate:n}class Gu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rf="[DEFAULT]";class eIe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _m;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function nIe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rf})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,D.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=rf){return this.instances.has(e)}getOptions(e=rf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===rf?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=rf){return this.component?this.component.multipleInstances?e:rf:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class rIe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eIe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const TP=[];var xn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(xn||{});const y5={debug:xn.DEBUG,verbose:xn.VERBOSE,info:xn.INFO,warn:xn.WARN,error:xn.ERROR,silent:xn.SILENT},iIe=xn.INFO,sIe={[xn.DEBUG]:"log",[xn.VERBOSE]:"log",[xn.INFO]:"info",[xn.WARN]:"warn",[xn.ERROR]:"error"},oIe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=sIe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class ED{constructor(e){this.name=e,this._logLevel=iIe,this._logHandler=oIe,this._userLogHandler=null,TP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?y5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xn.DEBUG,...e),this._logHandler(this,xn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xn.VERBOSE,...e),this._logHandler(this,xn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xn.INFO,...e),this._logHandler(this,xn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xn.WARN,...e),this._logHandler(this,xn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xn.ERROR,...e),this._logHandler(this,xn.ERROR,...e)}}const aIe=(n,e)=>e.some(t=>n instanceof t);let v5,b5;const I5=new WeakMap,CP=new WeakMap,E5=new WeakMap,DP=new WeakMap,AP=new WeakMap;let SP={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return CP.get(n);if("objectStoreNames"===e)return n.objectStoreNames||E5.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return dd(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function pIe(n){return"function"==typeof n?function fIe(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function uIe(){return b5||(b5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(RP(this),e),dd(I5.get(this))}:function(...e){return dd(n.apply(RP(this),e))}:function(e,...t){const r=n.call(RP(this),e,...t);return E5.set(r,e.sort?e.sort():[e]),dd(r)}}(n):(n instanceof IDBTransaction&&function dIe(n){if(CP.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});CP.set(n,e)}(n),aIe(n,function cIe(){return v5||(v5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,SP):n)}function dd(n){if(n instanceof IDBRequest)return function lIe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(dd(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&I5.set(t,n)}).catch(()=>{}),AP.set(e,n),e}(n);if(DP.has(n))return DP.get(n);const e=pIe(n);return e!==n&&(DP.set(n,e),AP.set(e,n)),e}const RP=n=>AP.get(n),mIe=["get","getKey","getAll","getAllKeys","count"],_Ie=["put","add","delete","clear"],xP=new Map;function w5(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(xP.get(e))return xP.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=_Ie.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mIe.includes(t))return;const s=function(){var o=(0,D.A)(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]});return function(c){return o.apply(this,arguments)}}();return xP.set(e,s),s}!function hIe(n){SP=n(SP)}(n=>({...n,get:(e,t,r)=>w5(e,t)||n.get(e,t,r),has:(e,t)=>!!w5(e,t)||n.has(e,t)}));class yIe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function vIe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const NP="@firebase/app",sf=new ED("@firebase/app"),wD="[DEFAULT]",qIe={[NP]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},af=new Map,TD=new Map;function zIe(n,e){try{n.container.addComponent(e)}catch(t){sf.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hd(n){const e=n.name;if(TD.has(e))return sf.debug(`There were multiple attempts to register component ${e}.`),!1;TD.set(e,n);for(const t of af.values())zIe(t,n);return!0}function vm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const qu=new ym("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class KIe{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qu.create("app-deleted",{appName:this._name})}}const Z0="9.15.0";function C5(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:wD,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw qu.create("bad-app-name",{appName:String(i)});if(t||(t=Vbe()),!t)throw qu.create("no-options");const s=af.get(i);if(s){if(ID(t,s.options)&&ID(r,s.config))return s;throw qu.create("duplicate-app",{appName:i})}const o=new rIe(i);for(const c of TD.values())o.addComponent(c);const a=new KIe(t,r,o);return af.set(i,a),a}function MP(n=wD){const e=af.get(n);if(!e&&n===wD)return C5();if(!e)throw qu.create("no-app",{appName:n});return e}function zu(n,e,t){var r;let i=null!==(r=qIe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void sf.warn(a.join(" "))}hd(new Gu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const QIe="firebase-heartbeat-database",YIe=1,eb="firebase-heartbeat-store";let PP=null;function D5(){return PP||(PP=function gIe(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=dd(o);return r&&o.addEventListener("upgradeneeded",c=>{r(dd(o.result),c.oldVersion,c.newVersion,dd(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(QIe,YIe,{upgrade:(n,e)=>{0===e&&n.createObjectStore(eb)}}).catch(n=>{throw qu.create("idb-open",{originalErrorMessage:n.message})})),PP}function OP(){return(OP=(0,D.A)(function*(n){try{return(yield D5()).transaction(eb).objectStore(eb).get(S5(n))}catch(e){if(e instanceof Hu)sf.warn(e.message);else{const t=qu.create("idb-get",{originalErrorMessage:e?.message});sf.warn(t.message)}}})).apply(this,arguments)}function A5(n,e){return FP.apply(this,arguments)}function FP(){return(FP=(0,D.A)(function*(n,e){try{const r=(yield D5()).transaction(eb,"readwrite");return yield r.objectStore(eb).put(e,S5(n)),r.done}catch(t){if(t instanceof Hu)sf.warn(t.message);else{const r=qu.create("idb-set",{originalErrorMessage:t?.message});sf.warn(r.message)}}})).apply(this,arguments)}function S5(n){return`${n.name}!${n.options.appId}`}class eEe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nEe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,D.A)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R5();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,D.A)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=R5(),{heartbeatsToSend:r,unsentEntries:i}=function tEe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),x5(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),x5(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=_D(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function R5(){return(new Date).toISOString().substring(0,10)}class nEe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!vD()&&function kbe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,D.A)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function JIe(n){return OP.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,D.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return A5(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,D.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return A5(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function x5(n){return _D(JSON.stringify({version:2,heartbeats:n})).length}!function rEe(n){hd(new Gu("platform-logger",e=>new yIe(e),"PRIVATE")),hd(new Gu("heartbeat",e=>new eEe(e),"PRIVATE")),zu(NP,"0.9.0",n),zu(NP,"0.9.0","esm2017"),zu("fire-js","")}(""),zu("firebase","9.15.0","app");const LP=new Map,N5={activated:!1,tokenObservers:[]},oEe={initialized:!1,enabled:!1};function _s(n){return LP.get(n)||Object.assign({},N5)}function CD(){return oEe}const VP="https://content-firebaseappcheck.googleapis.com/v1",lEe="exchangeDebugToken",M5={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class hEe{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,D.A)(function*(){t.stop();try{t.pending=new _m,yield function fEe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new _m,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oo=new ym("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DD(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function k5(n){if(!_s(n).activated)throw oo.create("use-before-activation",{appName:n.name})}function BP(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=AD(t)+"d:"),r&&(o+=AD(r)+"h:"),o+=AD(i)+"m:"+AD(s)+"s",o}function AD(n){return 0===n?"00":n>=10?n.toString():"0"+n}function UP(n,e){return jP.apply(this,arguments)}function jP(){return(jP=(0,D.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const f=yield i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(f){throw oo.create("fetch-network-error",{originalErrorMessage:f?.message})}if(200!==o.status)throw oo.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(f){throw oo.create("fetch-parse-error",{originalErrorMessage:f?.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}const yEe="firebase-app-check-database",vEe=1,tb="firebase-app-check-store",P5="debug-token";let SD=null;function O5(){return SD||(SD=new Promise((n,e)=>{try{const t=indexedDB.open(yEe,vEe);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oo.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(tb,{keyPath:"compositeKey"})}}catch(t){e(oo.create("storage-open",{originalErrorMessage:t?.message}))}}),SD)}function F5(n,e){return $P.apply(this,arguments)}function $P(){return($P=(0,D.A)(function*(n,e){const r=(yield O5()).transaction(tb,"readwrite"),s=r.objectStore(tb).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(oo.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}function L5(n){return HP.apply(this,arguments)}function HP(){return(HP=(0,D.A)(function*(n){const t=(yield O5()).transaction(tb,"readonly"),i=t.objectStore(tb).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const c=a.target.result;s(c?c.value:void 0)},t.onerror=a=>{var c;o(oo.create("storage-get",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}function V5(n){return`${n.options.appId}-${n.name}`}const nb=new ED("@firebase/app-check");function GP(){return(GP=(0,D.A)(function*(n){if(vD()){let e;try{e=yield function bEe(n){return L5(V5(n))}(n)}catch(t){nb.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}})).apply(this,arguments)}function qP(n,e){return vD()?function IEe(n,e){return F5(V5(n),e)}(n,e).catch(t=>{nb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zP(){return(zP=(0,D.A)(function*(){let n;try{n=yield function wEe(){return L5(P5)}()}catch{}if(n)return n;{const e=Wbe();return function EEe(n){return F5(P5,n)}(e).catch(t=>nb.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}})).apply(this,arguments)}function B5(){return CD().enabled}function U5(){return WP.apply(this,arguments)}function WP(){return(WP=(0,D.A)(function*(){const n=CD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const AEe={error:"UNKNOWN_ERROR"};function SEe(n){return bP.encodeString(JSON.stringify(n),!1)}function RD(n){return KP.apply(this,arguments)}function KP(){return(KP=(0,D.A)(function*(n,e=!1){const t=n.app;k5(t);const r=_s(t);let s,i=r.token;if(i&&!bm(i)&&(r.token=void 0,i=void 0),!i){const c=yield r.cachedTokenPromise;c&&(bm(c)?i=c:yield qP(t,void 0))}if(!e&&i&&bm(i))return{token:i.token};let a,o=!1;if(B5()){r.exchangeTokenPromise||(r.exchangeTokenPromise=UP(function _Ee(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${VP}/projects/${t}/apps/${r}:${lEe}?key=${i}`,body:{debug_token:e}}}(t,yield U5()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const c=yield r.exchangeTokenPromise;return yield qP(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield _s(t).exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?nb.warn(c.message):nb.error(c),s=c}return i?s?a=bm(i)?{token:i.token,internalError:s}:H5(s):(a={token:i.token},r.token=i,yield qP(t,i)):a=H5(s),o&&$5(t,a),a})).apply(this,arguments)}function QP(n,e,t,r){const{app:i}=n,s=_s(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&bm(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),j5(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>j5(n))}function YP(n,e){const t=_s(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function j5(n){const{app:e}=n,t=_s(e);let r=t.tokenRefresher;r||(r=function REe(n){const{app:e}=n;return new hEe((0,D.A)(function*(){let r;if(r=_s(e).token?yield RD(n,!0):yield RD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=_s(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},M5.RETRIAL_MIN_WAIT,M5.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $5(n,e){const t=_s(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function bm(n){return n.expireTimeMillis-Date.now()>0}function H5(n){return{token:SEe(AEe),error:n}}class xEe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_s(this.app);for(const t of e)YP(this.app,t.next);return Promise.resolve()}}function LEe(n,e){const t=new _m;_s(n).reCAPTCHAState={initialized:t};const i=function G5(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=DD(!1);return s?xD(n,e,s,i,t):function UEe(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=DD(!1);if(!o)throw new Error("no recaptcha");xD(n,e,o,i,t)}),t.promise}function xD(n,e,t,r,i){t.ready(()=>{(function BEe(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible"}),s=_s(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function q5(n){return JP.apply(this,arguments)}function JP(){return(JP=(0,D.A)(function*(n){k5(n);const t=yield _s(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=_s(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})})).apply(this,arguments)}class XP{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,D.A)(function*(){var t,r;!function Q5(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw oo.create("throttled",{time:BP(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const i=yield q5(e._app).catch(o=>{throw oo.create("recaptcha-error")});let s;try{s=yield UP(function gEe(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${VP}/projects/${t}/apps/${r}:exchangeRecaptchaV3Token?key=${i}`,body:{recaptcha_v3_token:e}}}(e._app,i),e._heartbeatServiceProvider)}catch(o){throw null!==(t=o.code)&&void 0!==t&&t.includes("fetch-status-error")?(e._throttleData=function K5(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=function Xbe(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(r=o.customData)||void 0===r?void 0:r.httpStatus),e._throttleData),oo.create("throttled",{time:BP(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):o}return e._throttleData=null,s})()}initialize(e){this._app=e,this._heartbeatServiceProvider=vm(e,"heartbeat"),LEe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof XP&&this._siteKey===e._siteKey}}function $Ee(n=MP(),e){const t=vm(n=Li(n),"app-check");if(CD().initialized||function DEe(){const n=f5(),e=CD();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new _m;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function CEe(){return zP.apply(this,arguments)}())}(),B5()&&U5().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw oo.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function HEe(n,e,t){const r=function aEe(n,e){return LP.set(n,e),LP.get(n)}(n,Object.assign({},N5));r.activated=!0,r.provider=e,r.cachedTokenPromise=function TEe(n){return GP.apply(this,arguments)}(n).then(i=>(i&&bm(i)&&(r.token=i,$5(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),_s(n).isTokenAutoRefreshEnabled&&QP(r,"INTERNAL",()=>{}),r}function ZP(){return(ZP=(0,D.A)(function*(n,e){const t=yield RD(n,e);if(t.error)throw t.error;return{token:t.token}})).apply(this,arguments)}const Y5="app-check-internal";!function zEe(){hd(new Gu("app-check",n=>function NEe(n,e){return new xEe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Y5).initialize()})),hd(new Gu(Y5,n=>function MEe(n){return{getToken:e=>RD(n,e),addTokenListener:e=>QP(n,"INTERNAL",e),removeTokenListener:e=>YP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),zu("@firebase/app-check","0.6.0")}();const WEe=function J5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},X5=new ym("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Z5=new ED("@firebase/auth");function ND(n,...e){Z5.logLevel<=xn.ERROR&&Z5.error(`Auth (${Z0}): ${n}`,...e)}function Ao(n,...e){throw eO(n,...e)}function ra(n,...e){return eO(n,...e)}function e9(n,e,t){const r=Object.assign(Object.assign({},WEe()),{[e]:t});return new ym("auth","Firebase",r).create(e,{appName:n.name})}function eO(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return X5.create(n,...e)}function $e(n,e,...t){if(!n)throw eO(e,...t)}function $c(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ND(e),new Error(e)}function Wu(n,e){n||$c(e)}const t9=new Map;function Ku(n){Wu(n instanceof Function,"Expected a class definition");let e=t9.get(n);return e?(Wu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,t9.set(n,e),e)}function rb(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function n9(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function YEe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function tO(){return"http:"===n9()||"https:"===n9()}()||function Rbe(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class ib{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wu(t>e,"Short delay should be less than long delay!"),this.isMobile=function Abe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ni())}()||function xbe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return YEe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nO(n,e){Wu(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class r9{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $c("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $c("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $c("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XEe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ZEe=new ib(3e4,6e4);function Vi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function es(n,e,t,r){return rO.apply(this,arguments)}function rO(){return(rO=(0,D.A)(function*(n,e,t,r,i={}){return i9(n,i,(0,D.A)(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Y0(Object.assign({key:n.config.apiKey},o)).slice(1),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode),r9.fetch()(s9(n,n.config.apiHost,t,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function i9(n,e,t){return iO.apply(this,arguments)}function iO(){return(iO=(0,D.A)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},XEe),e);try{const i=new ewe(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw sb(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw sb(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===c)throw sb(n,"email-already-in-use",o);if("USER_DISABLED"===c)throw sb(n,"user-disabled",o);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw e9(n,l,u);Ao(n,l)}}catch(i){if(i instanceof Hu)throw i;Ao(n,"network-request-failed")}})).apply(this,arguments)}function Qu(n,e,t,r){return sO.apply(this,arguments)}function sO(){return(sO=(0,D.A)(function*(n,e,t,r,i={}){const s=yield es(n,e,t,r,i);return"mfaPendingCredential"in s&&Ao(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function s9(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?nO(n.config,i):`${n.config.apiScheme}://${i}`}class ewe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ra(this.auth,"network-request-failed")),ZEe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sb(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ra(n,e,r);return i.customData._tokenResponse=t,i}function oO(){return(oO=(0,D.A)(function*(n,e){return es(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function cO(){return(cO=(0,D.A)(function*(n,e){return es(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ob(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function uO(){return(uO=(0,D.A)(function*(n,e=!1){const t=Li(n),r=yield t.getIdToken(e),i=MD(r);$e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ob(lO(i.auth_time)),issuedAtTime:ob(lO(i.iat)),expirationTime:ob(lO(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function lO(n){return 1e3*Number(n)}function MD(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return ND("JWT malformed, contained fewer than 3 sections"),null;try{const i=yD(t);return i?JSON.parse(i):(ND("Failed to decode base64 JWT payload"),null)}catch(i){return ND("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Yu(n,e){return dO.apply(this,arguments)}function dO(){return(dO=(0,D.A)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Hu&&function owe({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class awe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,D.A)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,D.A)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class o9{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ob(this.lastLoginAt),this.creationTime=ob(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ab(n){return hO.apply(this,arguments)}function hO(){return hO=(0,D.A)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Yu(n,function rwe(n,e){return cO.apply(this,arguments)}(t,{idToken:r}));$e(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function lwe(n){return n.map(e=>{var{providerId:t}=e,r=(0,Uu.Tt)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function uwe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,o),l=!!n.isAnonymous&&!(n.email&&s.passwordHash||a?.length),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new o9(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(n,f)}),hO.apply(this,arguments)}function fO(){return(fO=(0,D.A)(function*(n){const e=Li(n);yield ab(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function pO(){return(pO=(0,D.A)(function*(n,e){const t=yield i9(n,{},(0,D.A)(function*(){const r=Y0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=s9(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",r9.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class cb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function swe(n){const e=MD(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,D.A)(function*(){return $e(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,D.A)(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function dwe(n,e){return pO.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new cb;return r&&($e("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&($e("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&($e("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cb,this.toJSON())}_performRefresh(){return $c("not implemented")}}function fd(n,e){$e("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class cf{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Uu.Tt)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new awe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new o9(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,D.A)(function*(){const r=yield Yu(t,t.stsTokenManager.getToken(t.auth,e));return $e(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function iwe(n){return uO.apply(this,arguments)}(this,e)}reload(){return function cwe(n){return fO.apply(this,arguments)}(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new cf(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,D.A)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ab(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,D.A)(function*(){const t=yield e.getIdToken();return yield Yu(e,function twe(n,e){return oO.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,l;const f=null!==(r=t.displayName)&&void 0!==r?r:void 0,_=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,I=null!==(o=t.photoURL)&&void 0!==o?o:void 0,T=null!==(a=t.tenantId)&&void 0!==a?a:void 0,A=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,x=null!==(u=t.createdAt)&&void 0!==u?u:void 0,N=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:B,emailVerified:ee,isAnonymous:ie,providerData:de,stsTokenManager:M}=t;$e(B&&M,e,"internal-error");const R=cb.fromJSON(this.name,M);$e("string"==typeof B,e,"internal-error"),fd(f,e.name),fd(_,e.name),$e("boolean"==typeof ee,e,"internal-error"),$e("boolean"==typeof ie,e,"internal-error"),fd(y,e.name),fd(I,e.name),fd(T,e.name),fd(A,e.name),fd(x,e.name),fd(N,e.name);const F=new cf({uid:B,auth:e,email:_,emailVerified:ee,displayName:f,isAnonymous:ie,photoURL:I,phoneNumber:y,tenantId:T,stsTokenManager:R,createdAt:x,lastLoginAt:N});return de&&Array.isArray(de)&&(F.providerData=de.map(U=>Object.assign({},U))),A&&(F._redirectEventId=A),F}static _fromIdTokenResponse(e,t,r=!1){return(0,D.A)(function*(){const i=new cb;i.updateFromServerResponse(t);const s=new cf({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ab(s),s})()}}const a9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(t,r){var i=this;return(0,D.A)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,D.A)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,D.A)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function kD(n,e,t){return`firebase:${n}:${e}:${t}`}class Em{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=kD(this.userKey,i.apiKey,s),this.fullPersistenceKey=kD("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,D.A)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?cf._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,D.A)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,D.A)(function*(){if(!t.length)return new Em(Ku(a9),e,r);const i=(yield Promise.all(t.map(function(){var u=(0,D.A)(function*(l){if(yield l._isAvailable())return l});return function(l){return u.apply(this,arguments)}}()))).filter(u=>u);let s=i[0]||Ku(a9);const o=kD(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const l=yield u._get(o);if(l){const f=cf._fromJSON(e,l);u!==s&&(a=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var u=(0,D.A)(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return u.apply(this,arguments)}}())),new Em(s,e,r)):new Em(s,e,r)})()}}function c9(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f9(e))return"Blackberry";if(p9(e))return"Webos";if(gO(e))return"Safari";if((e.includes("chrome/")||l9(e))&&!e.includes("edge/"))return"Chrome";if(h9(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function u9(n=ni()){return/firefox\//i.test(n)}function gO(n=ni()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l9(n=ni()){return/crios\//i.test(n)}function d9(n=ni()){return/iemobile/i.test(n)}function h9(n=ni()){return/android/i.test(n)}function f9(n=ni()){return/blackberry/i.test(n)}function p9(n=ni()){return/webos/i.test(n)}function PD(n=ni()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function g9(n=ni()){return PD(n)||h9(n)||p9(n)||f9(n)||/windows phone/i.test(n)||d9(n)}function m9(n,e=[]){let t;switch(n){case"Browser":t=c9(ni());break;case"Worker":t=`${c9(ni())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Z0}/${r}`}class gwe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,D.A)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class mwe{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _9(this),this.idTokenSubscription=new _9(this),this.beforeStateQueue=new gwe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X5,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Ku(t)),this._initializationPromise=this.queue((0,D.A)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Em.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,D.A)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,D.A)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,c=s?._redirectEventId,u=yield t.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(s=u.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return $e(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,D.A)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,D.A)(function*(){try{yield ab(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function JEe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,D.A)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,D.A)(function*(){const r=e?Li(e):null;return r&&$e(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,D.A)(function*(){if(!r._deleted)return e&&$e(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,D.A)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,D.A)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,D.A)(function*(){yield t.assertedPersistence.setPersistence(Ku(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ym("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,D.A)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,D.A)(function*(){if(!t.redirectPersistenceManager){const r=e&&Ku(e)||t._popupRedirectResolver;$e(r,t,"argument-error"),t.redirectPersistenceManager=yield Em.create(t,[Ku(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,D.A)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,D.A)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,D.A)(function*(){if(e===t.currentUser)return t.queue((0,D.A)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return $e(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,D.A)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,D.A)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function So(n){return Li(n)}class _9{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Gbe(n,e){const t=new qbe(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function y9(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function v9(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class ub{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $c("not implemented")}_getIdTokenResponse(e){return $c("not implemented")}_linkToIdToken(e,t){return $c("not implemented")}_getReauthenticationResolver(e){return $c("not implemented")}}function I9(n,e){return _O.apply(this,arguments)}function _O(){return(_O=(0,D.A)(function*(n,e){return es(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function vO(){return(vO=(0,D.A)(function*(n,e){return Qu(n,"POST","/v1/accounts:signInWithPassword",Vi(n,e))})).apply(this,arguments)}function OD(n,e){return bO.apply(this,arguments)}function bO(){return(bO=(0,D.A)(function*(n,e){return es(n,"POST","/v1/accounts:sendOobCode",Vi(n,e))})).apply(this,arguments)}function IO(){return(IO=(0,D.A)(function*(n,e){return OD(n,e)})).apply(this,arguments)}function EO(){return(EO=(0,D.A)(function*(n,e){return OD(n,e)})).apply(this,arguments)}function CO(){return(CO=(0,D.A)(function*(n,e){return Qu(n,"POST","/v1/accounts:signInWithEmailLink",Vi(n,e))})).apply(this,arguments)}function DO(){return(DO=(0,D.A)(function*(n,e){return Qu(n,"POST","/v1/accounts:signInWithEmailLink",Vi(n,e))})).apply(this,arguments)}class lb extends ub{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new lb(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new lb(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,D.A)(function*(){switch(t.signInMethod){case"password":return function Iwe(n,e){return vO.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function Dwe(n,e){return CO.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Ao(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,D.A)(function*(){switch(r.signInMethod){case"password":return I9(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function Awe(n,e){return DO.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:Ao(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ju(n,e){return AO.apply(this,arguments)}function AO(){return(AO=(0,D.A)(function*(n,e){return Qu(n,"POST","/v1/accounts:signInWithIdp",Vi(n,e))})).apply(this,arguments)}class wm extends ub{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ao("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=(0,Uu.Tt)(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new wm(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return Ju(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ju(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ju(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Y0(t)}return e}}class hb{constructor(e){var t,r,i,s,o,a;const c=J0(X0(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(r=c.oobCode)&&void 0!==r?r:null,f=function Pwe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);$e(u&&l&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=l,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function Owe(n){const e=J0(X0(n)).link,t=e?J0(X0(e)).deep_link_id:null,r=J0(X0(n)).deep_link_id;return(r?J0(X0(r)).link:null)||r||t||e||n}(e);try{return new hb(t)}catch{return null}}}let E9=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return lb._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=hb.parseLink(r);return $e(i,"argument-error"),lb._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Xu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class w9 extends Xu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let Fwe=(()=>{class n extends w9{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return wm._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();function kO(){return(kO=(0,D.A)(function*(n,e){return Qu(n,"POST","/v1/accounts:signUp",Vi(n,e))})).apply(this,arguments)}class Va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,D.A)(function*(){const s=yield cf._fromIdTokenResponse(e,r,i),o=C9(r);return new Va({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,D.A)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=C9(r);return new Va({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function C9(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class LD extends Hu{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,LD.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new LD(e,t,r,i)}}function D9(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?LD._fromErrorAndOperation(n,s,e,r):s})}function LO(){return(LO=(0,D.A)(function*(n,e,t=!1){const r=yield Yu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Va._forOperation(n,"link",r)})).apply(this,arguments)}function BO(){return(BO=(0,D.A)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield Yu(n,D9(r,i,e,n),t);$e(s.idToken,r,"internal-error");const o=MD(s.idToken);$e(o,r,"internal-error");const{sub:a}=o;return $e(n.uid===a,r,"user-mismatch"),Va._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&Ao(r,"user-mismatch"),s}})).apply(this,arguments)}function R9(n,e){return UO.apply(this,arguments)}function UO(){return(UO=(0,D.A)(function*(n,e,t=!1){const r="signIn",i=yield D9(n,r,e),s=yield Va._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}function jO(n,e){return $O.apply(this,arguments)}function $O(){return($O=(0,D.A)(function*(n,e){return R9(So(n),e)})).apply(this,arguments)}function UD(n,e,t){var r;$e((null===(r=t.url)||void 0===r?void 0:r.length)>0,n,"invalid-continue-uri"),$e(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&($e(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&($e(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function KO(){return KO=(0,D.A)(function*(n,e,t){const r=Li(n),i={requestType:"PASSWORD_RESET",email:e};t&&UD(r,i,t),yield function wwe(n,e){return EO.apply(this,arguments)}(r,i)}),KO.apply(this,arguments)}function ZO(){return(ZO=(0,D.A)(function*(n,e,t){const r=So(n),i=yield function T9(n,e){return kO.apply(this,arguments)}(r,{returnSecureToken:!0,email:e,password:t}),s=yield Va._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function iF(){return iF=(0,D.A)(function*(n,e){const t=Li(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&UD(t.auth,i,e);const{email:s}=yield function Ewe(n,e){return IO.apply(this,arguments)}(t.auth,i);s!==n.email&&(yield n.reload())}),iF.apply(this,arguments)}const jD="__sak";class M9{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jD,"1"),this.storage.removeItem(jD),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cTe=(()=>{class n extends M9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sTe(){const n=ni();return gO(n)||PD(n)}()&&function pwe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=g9(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function fwe(){return function Nbe(){const n=ni();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,D.A)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,D.A)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,D.A)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),k9=(()=>{class n extends M9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let lTe=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,D.A)(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,c=r.handlersMap[o];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const u=Array.from(c).map(function(){var f=(0,D.A)(function*(_){return _(i.origin,a)});return function(_){return f.apply(this,arguments)}}()),l=yield function uTe(n){return Promise.all(n.map(function(){var e=(0,D.A)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:l})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function $D(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class dTe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,D.A)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const l=$D("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(_){const y=_;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Bi(){return window}function fF(){return typeof Bi().WorkerGlobalScope<"u"&&"function"==typeof Bi().importScripts}function pF(){return(pF=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const P9="firebaseLocalStorageDb",HD="firebaseLocalStorage",O9="fbase_key";class pb{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function GD(n,e){return n.transaction([HD],e?"readwrite":"readonly").objectStore(HD)}function gF(){const n=indexedDB.open(P9,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(HD,{keyPath:O9})}catch(i){t(i)}}),n.addEventListener("success",(0,D.A)(function*(){const r=n.result;r.objectStoreNames.contains(HD)?e(r):(r.close(),yield function _Te(){const n=indexedDB.deleteDatabase(P9);return new pb(n).toPromise()}(),e(yield gF()))}))})}function F9(n,e,t){return mF.apply(this,arguments)}function mF(){return(mF=(0,D.A)(function*(n,e,t){const r=GD(n,!0).put({[O9]:e,value:t});return new pb(r).toPromise()})).apply(this,arguments)}function _F(){return(_F=(0,D.A)(function*(n,e){const t=GD(n,!1).get(e),r=yield new pb(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function L9(n,e){const t=GD(n,!0).delete(e);return new pb(t).toPromise()}const ITe=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,D.A)(function*(){return t.db||(t.db=yield gF()),t.db})()}_withRetries(t){var r=this;return(0,D.A)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,D.A)(function*(){return fF()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,D.A)(function*(){t.receiver=lTe._getInstance(function gTe(){return fF()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,D.A)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,D.A)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,D.A)(function*(){var r,i;if(t.activeServiceWorker=yield function fTe(){return pF.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new dTe(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,D.A)(function*(){if(r.sender&&r.activeServiceWorker&&function pTe(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const t=yield gF();return yield F9(t,jD,"1"),yield L9(t,jD),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,D.A)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,D.A)(function*(){return i._withPendingWrite((0,D.A)(function*(){return yield i._withRetries(s=>F9(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,D.A)(function*(){const i=yield r._withRetries(s=>function yTe(n,e){return _F.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,D.A)(function*(){return r._withPendingWrite((0,D.A)(function*(){return yield r._withRetries(i=>L9(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,D.A)(function*(){const r=yield t._withRetries(o=>{const a=GD(o,!1).getAll();return new pb(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function B9(n){return`__${n}${Math.floor(1e6*Math.random())}`}function lf(n,e){return e?Ku(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}B9("rcb"),new ib(3e4,6e4);class AF extends ub{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ju(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ju(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ju(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VTe(n){return R9(n.auth,new AF(n),n.bypassAuthState)}function BTe(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),function S9(n,e){return BO.apply(this,arguments)}(t,new AF(n),n.bypassAuthState)}function UTe(n){return SF.apply(this,arguments)}function SF(){return(SF=(0,D.A)(function*(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),function FO(n,e){return LO.apply(this,arguments)}(t,new AF(n),n.bypassAuthState)})).apply(this,arguments)}class j9{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,D.A)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,D.A)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:c}=e;if(a)return void t.reject(a);const u={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(c)(u))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VTe;case"linkViaPopup":case"linkViaRedirect":return UTe;case"reauthViaPopup":case"reauthViaRedirect":return BTe;default:Ao(this.auth,"internal-error")}}resolve(e){Wu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jTe=new ib(2e3,1e4);function RF(){return(RF=(0,D.A)(function*(n,e,t){const r=So(n);!function Im(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Ao(n,"argument-error"),e9(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(n,e,Xu);const i=lf(r,t);return new MF(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let MF=(()=>{class n extends j9{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return(0,D.A)(function*(){const r=yield t.execute();return $e(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return(0,D.A)(function*(){Wu(1===t.filter.length,"Popup operations only handle one event");const r=$D();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(ra(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(ra(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ra(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,jTe.get())};t()}}return n.currentPopupAction=null,n})();const HTe="pendingRedirect",gb=new Map;class GTe extends j9{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,D.A)(function*(){let r=gb.get(t.auth._key());if(!r){try{const s=(yield function qTe(n,e){return kF.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}gb.set(t.auth._key(),r)}return t.bypassAuthState||gb.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,D.A)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function kF(){return(kF=(0,D.A)(function*(n,e){const t=function H9(n){return kD(HTe,n.config.apiKey,n.name)}(e),r=function $9(n){return Ku(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function zTe(n,e){gb.set(n._key(),e)}function G9(n,e){return UF.apply(this,arguments)}function UF(){return(UF=(0,D.A)(function*(n,e,t=!1){const r=So(n),i=lf(r,e),o=yield new GTe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class JTe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function XTe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W9(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!W9(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ra(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(z9(e))}saveEventToCache(e){this.cachedEventUids.add(z9(e)),this.lastProcessedEventTime=Date.now()}}function z9(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function W9({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function $F(){return($F=(0,D.A)(function*(n,e={}){return es(n,"GET","/v1/projects",e)})).apply(this,arguments)}const eCe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tCe=/^https?/;function HF(){return HF=(0,D.A)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function ZTe(n){return $F.apply(this,arguments)}(n);for(const t of e)try{if(rCe(t))return}catch{}Ao(n,"unauthorized-domain")}),HF.apply(this,arguments)}function rCe(n){const e=rb(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!tCe.test(t))return!1;if(eCe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const iCe=new ib(3e4,6e4);function K9(){const n=Bi().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let zD=null;function oCe(n){return zD=zD||function sCe(n){return new Promise((e,t)=>{var r,i,s;function o(){K9(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K9(),t(ra(n,"network-request-failed"))},timeout:iCe.get()})}if(null!==(i=null===(r=Bi().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Bi().gapi)||void 0===s||!s.load){const a=B9("iframefcb");return Bi()[a]=()=>{gapi.load?o():t(ra(n,"network-request-failed"))},function V9(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ra("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function CTe(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>t(c))}o()}}).catch(e=>{throw zD=null,e})}(n),zD}const aCe=new ib(5e3,15e3),cCe="__/auth/iframe",uCe="emulator/auth/iframe",lCe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dCe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hCe(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?nO(e,uCe):`https://${n.config.authDomain}/${cCe}`,r={apiKey:e.apiKey,appName:n.name,v:Z0},i=dCe.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Y0(r).slice(1)}`}function GF(){return GF=(0,D.A)(function*(n){const e=yield oCe(n),t=Bi().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:hCe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lCe,dontclear:!0},r=>new Promise(function(){var i=(0,D.A)(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=ra(n,"network-request-failed"),c=Bi().setTimeout(()=>{o(a)},aCe.get());function u(){Bi().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),GF.apply(this,arguments)}const pCe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Q9{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y9(n,e,t,r,i,s){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Z0,eventId:i};if(e instanceof Xu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",function Hbe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,u]of Object.entries(s||{}))o[c]=u}if(e instanceof w9){const c=e.getScopes().filter(u=>""!==u);c.length>0&&(o.scopes=c.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];return`${function wCe({config:n}){return n.emulator?nO(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${Y0(a).slice(1)}`}const qF="webStorageSupport",CCe=class TCe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k9,this._completeRedirectFn=G9,this._overrideRedirectResult=zTe}_openPopup(e,t,r,i){var s=this;return(0,D.A)(function*(){var o;Wu(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=Y9(e,t,r,rb(),i);return function vCe(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},pCe),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ni().toLowerCase();t&&(a=l9(u)?"_blank":t),u9(u)&&(e=e||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((_,[y,I])=>`${_}${y}=${I},`,"");if(function hwe(n=ni()){var e;return PD(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function bCe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new Q9(null);const f=window.open(e||"",a,l);$e(f,n,"popup-blocked");try{f.focus()}catch{}return new Q9(f)}(e,a,$D())})()}_openRedirect(e,t,r,i){var s=this;return(0,D.A)(function*(){return yield s._originValidation(e),function hTe(n){Bi().location.href=n}(Y9(e,t,r,rb(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Wu(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,D.A)(function*(){const r=yield function fCe(n){return GF.apply(this,arguments)}(e),i=new JTe(e);return r.register("authEvent",s=>($e(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qF,{type:qF},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[qF];void 0!==o&&t(!!o),Ao(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function nCe(n){return HF.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return g9()||gO()||PD()}};var X9="@firebase/auth";class ACe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,D.A)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const NCe=g5("authIdTokenMaxAge")||300;let e7=null;const MCe=n=>function(){var e=(0,D.A)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>NCe)return;const s=r?.token;e7!==s&&(e7=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function kCe(n=MP()){const e=vm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function KEe(n,e){const t=vm(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(ID(t.getOptions(),e??{}))return i;Ao(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:CCe,persistence:[ITe,cTe,k9]}),r=g5("authTokenSyncURL");if(r){const s=MCe(r);(function tTe(n,e,t){Li(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function eTe(n,e,t,r){Li(n).onIdTokenChanged(e,t,r)}(t,o=>s(o))}const i=p5("auth");return i&&function _we(n,e,t){const r=So(n);$e(r._canInitEmulator,r,"emulator-config-failed"),$e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=y9(e),{host:o,port:a}=function ywe(n){const e=y9(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:v9(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:v9(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function vwe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function RCe(n){hd(new Gu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,c)=>{$e(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),$e(!o?.includes(":"),"argument-error",{appName:a.name});const u={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m9(n)},l=new mwe(a,c,u);return function QEe(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ku);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,t),l})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hd(new Gu("auth-internal",e=>{const t=So(e.getProvider("auth").getImmediate());return new ACe(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zu(X9,"0.21.0",function SCe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),zu(X9,"0.21.0","esm2017")}("Browser");var ut,PCe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zu={},zF=zF||{},Pt=PCe||self;function WD(){}function KD(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var WF="closure_uid_"+(1e9*Math.random()>>>0),FCe=0;function LCe(n,e,t){return n.call.apply(n.bind,arguments)}function VCe(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function $s(n,e,t){return($s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LCe:VCe).apply(null,arguments)}function QD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ys(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function pd(){this.s=this.s,this.o=this.o}pd.prototype.s=!1,pd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function OCe(n){Object.prototype.hasOwnProperty.call(n,WF)&&n[WF]||(n[WF]=++FCe)}(this)},pd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const t7=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function KF(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function n7(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(KD(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Hs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hs.prototype.h=function(){this.defaultPrevented=!0};var UCe=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",WD,e),Pt.removeEventListener("test",WD,e)}catch{}return n}();function YD(n){return/^[\s\xa0]*$/.test(n)}var r7=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function QF(n,e){return n<e?-1:n>e?1:0}function JD(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function Hc(n){return-1!=JD().indexOf(n)}function YF(n){return YF[" "](n),n}YF[" "]=WD;var XD,n,$Ce=Hc("Opera"),Cm=Hc("Trident")||Hc("MSIE"),i7=Hc("Edge"),JF=i7||Cm,s7=Hc("Gecko")&&!(-1!=JD().toLowerCase().indexOf("webkit")&&!Hc("Edge"))&&!(Hc("Trident")||Hc("MSIE"))&&!Hc("Edge"),HCe=-1!=JD().toLowerCase().indexOf("webkit")&&!Hc("Edge");function o7(){var n=Pt.document;return n?n.documentMode:void 0}e:{var XF="",ZF=(n=JD(),s7?/rv:([^\);]+)(\)|;)/.exec(n):i7?/Edge\/([\d\.]+)/.exec(n):Cm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):HCe?/WebKit\/(\S+)/.exec(n):$Ce?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ZF&&(XF=ZF?ZF[1]:""),Cm){var eL=o7();if(null!=eL&&eL>parseFloat(XF)){XD=String(eL);break e}}XD=XF}var GCe={};var zCe=Pt.document&&Cm&&(o7()||parseInt(XD,10))||void 0;function _b(n,e){if(Hs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(s7){e:{try{YF(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:WCe[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_b.X.h.call(this)}}ys(_b,Hs);var WCe={2:"touch",3:"pen",4:"mouse"};_b.prototype.h=function(){_b.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yb="closure_listenable_"+(1e6*Math.random()|0),KCe=0;function QCe(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++KCe,this.ba=this.ea=!1}function ZD(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function nL(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function c7(n){const e={};for(const t in n)e[t]=n[t];return e}const u7="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function l7(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<u7.length;s++)t=u7[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eA(n){this.src=n,this.g={},this.h=0}function rL(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=t7(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ZD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function iL(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}eA.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=iL(n,e,r,i);return-1<o?(e=n[o],t||(e.ea=!1)):((e=new QCe(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var sL="closure_lm_"+(1e6*Math.random()|0),oL={};function d7(n,e,t,r,i){if(r&&r.once)return f7(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)d7(n,e[s],t,r,i);return null}return t=lL(t),n&&n[yb]?n.N(e,t,mb(r)?!!r.capture:!!r,i):h7(n,e,t,!1,r,i)}function h7(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=mb(i)?!!i.capture:!!i,a=cL(n);if(a||(n[sL]=a=new eA(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function YCe(){const e=JCe;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)UCe||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(g7(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function f7(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)f7(n,e[s],t,r,i);return null}return t=lL(t),n&&n[yb]?n.O(e,t,mb(r)?!!r.capture:!!r,i):h7(n,e,t,!0,r,i)}function p7(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)p7(n,e[s],t,r,i);else r=mb(r)?!!r.capture:!!r,t=lL(t),n&&n[yb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=iL(s=n.g[e],t,r,i))&&(ZD(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=cL(n))&&(e=n.g[e.toString()],n=-1,e&&(n=iL(e,t,r,i)),(t=-1<n?e[n]:null)&&aL(t))}function aL(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[yb])rL(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(g7(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cL(e))?(rL(t,n),0==t.h&&(t.src=null,e[sL]=null)):ZD(n)}}}function g7(n){return n in oL?oL[n]:oL[n]="on"+n}function JCe(n,e){if(n.ba)n=!0;else{e=new _b(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&aL(n),n=t.call(r,e)}return n}function cL(n){return(n=n[sL])instanceof eA?n:null}var uL="__closure_events_fn_"+(1e9*Math.random()>>>0);function lL(n){return"function"==typeof n?n:(n[uL]||(n[uL]=function(e){return n.handleEvent(e)}),n[uL])}function ts(){pd.call(this),this.i=new eA(this),this.P=this,this.I=null}function vs(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hs(e,n);else if(e instanceof Hs)e.target=e.target||n;else{var i=e;l7(e=new Hs(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=tA(o,r,!0,e)&&i}if(i=tA(o=e.g=n,r,!0,e)&&i,i=tA(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=tA(o=e.g=t[s],r,!1,e)&&i}function tA(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==t){var a=o.listener,c=o.ha||o.src;o.ea&&rL(n.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}ys(ts,pd),ts.prototype[yb]=!0,ts.prototype.removeEventListener=function(n,e,t,r){p7(this,n,e,t,r)},ts.prototype.M=function(){if(ts.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ZD(t[r]);delete n.g[e],n.h--}}this.I=null},ts.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ts.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var dL=Pt.JSON.stringify;function XCe(){var n=y7;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hL,m7=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new eDe,n=>n.reset());class eDe{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tDe(n){Pt.setTimeout(()=>{throw n},0)}function _7(n,e){hL||function nDe(){var n=Pt.Promise.resolve(void 0);hL=function(){n.then(rDe)}}(),fL||(hL(),fL=!0),y7.add(n,e)}var fL=!1,y7=new class ZCe{constructor(){this.h=this.g=null}add(e,t){const r=m7.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function rDe(){for(var n;n=XCe();){try{n.h.call(n.g)}catch(t){tDe(t)}var e=m7;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fL=!1}function nA(n,e){ts.call(this),this.h=n||1,this.g=e||Pt,this.j=$s(this.lb,this),this.l=Date.now()}function pL(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function gL(n,e,t){if("function"==typeof n)t&&(n=$s(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$s(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function v7(n){n.g=gL(()=>{n.g=null,n.i&&(n.i=!1,v7(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ys(nA,ts),(ut=nA.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vs(this,"tick"),this.ca&&(pL(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){nA.X.M.call(this),pL(this),delete this.g};class iDe extends pd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:v7(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vb(n){pd.call(this),this.h=n,this.g={}}ys(vb,pd);var b7=[];function I7(n,e,t,r){Array.isArray(t)||(t&&(b7[0]=t.toString()),t=b7);for(var i=0;i<t.length;i++){var s=d7(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function E7(n){nL(n.g,function(e,t){this.g.hasOwnProperty(t)&&aL(e)},n),n.g={}}function rA(){this.g=!0}function Dm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cDe(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return dL(t)}catch{return e}}(n,t)+(r?" "+r:"")})}vb.prototype.M=function(){vb.X.M.call(this),E7(this)},vb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rA.prototype.Aa=function(){this.g=!1},rA.prototype.info=function(){};var df={},w7=null;function iA(){return w7=w7||new ts}function T7(n){Hs.call(this,df.Pa,n)}function bb(n){const e=iA();vs(e,new T7(e))}function C7(n,e){Hs.call(this,df.STAT_EVENT,n),this.stat=e}function ao(n){const e=iA();vs(e,new C7(e,n))}function D7(n,e){Hs.call(this,df.Qa,n),this.size=e}function Ib(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}df.Pa="serverreachability",ys(T7,Hs),df.STAT_EVENT="statevent",ys(C7,Hs),df.Qa="timingevent",ys(D7,Hs);var sA={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},A7={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function mL(){}function R7(){}mL.prototype.h=null;var vL,Eb={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _L(){Hs.call(this,"d")}function yL(){Hs.call(this,"c")}function oA(){}function wb(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new vb(this),this.O=uDe,this.T=new nA(n=JF?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new x7}function x7(){this.i=null,this.g="",this.h=!1}ys(_L,Hs),ys(yL,Hs),ys(oA,mL),oA.prototype.g=function(){return new XMLHttpRequest},oA.prototype.i=function(){return{}},vL=new oA;var uDe=45e3,bL={},aA={};function IL(n,e,t){n.K=1,n.v=dA(el(e)),n.s=t,n.P=!0,N7(n,null)}function N7(n,e){n.F=Date.now(),Tb(n),n.A=el(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),j7(t.i,"t",r),n.C=0,t=n.l.H,n.h=new x7,n.g=dK(n.l,t?e:null,!n.s),0<n.N&&(n.L=new iDe($s(n.La,n,n.g),n.N)),I7(n.S,n.g,"readystatechange",n.ib),e=n.H?c7(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),bb(),function sDe(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.U,n.s)}function M7(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function k7(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=lDe(n,t),i==aA){4==e&&(n.o=4,ao(14),r=!1),Dm(n.j,n.m,null,"[Incomplete Response]");break}if(i==bL){n.o=4,ao(15),Dm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dm(n.j,n.m,i,null),EL(n,i)}M7(n)&&i!=aA&&i!=bL&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ao(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),xL(e),e.K=!0,ao(11))):(Dm(n.j,n.m,t,"[Invalid Chunked Response]"),hf(n),Cb(n))}function lDe(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?aA:(t=Number(e.substring(t,r)),isNaN(t)?bL:(r+=1)+t>e.length?aA:(e=e.substr(r,t),n.C=r+t,e))}function Tb(n){n.V=Date.now()+n.O,P7(n,n.O)}function P7(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ib($s(n.gb,n),e)}function cA(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Cb(n){0==n.l.G||n.I||aK(n.l,n)}function hf(n){cA(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pL(n.T),E7(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function EL(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||wL(t.h,n)))if(!n.J&&wL(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;_A(t),gA(t)}RL(t),ao(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ib($s(t.cb,t),6e3));if(1>=G7(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else pf(t,11)}else if((n.J||t.g==n)&&_A(t),!YD(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(t.T=u[0],u=u[1],2==t.G)if("c"==u[0]){t.I=u[1],t.ka=u[2];const l=u[3];null!=l&&(t.ma=l,t.j.info("VER="+t.ma));const f=u[4];null!=f&&(t.Ca=f,t.j.info("SVER="+t.Ca));const _=u[5];null!=_&&"number"==typeof _&&0<_&&(t.J=r=1.5*_,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const y=n.g;if(y){const I=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var s=r.h;s.g||-1==I.indexOf("spdy")&&-1==I.indexOf("quic")&&-1==I.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(TL(s,s.h),s.h=null))}if(r.D){const T=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.za=T,Tr(r.F,r.D,T))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var o=n;if((r=t).sa=lK(r,r.H?r.ka:null,r.V),o.J){q7(r.h,o);var a=o,c=r.J;c&&a.setTimeout(c),a.B&&(cA(a),Tb(a)),r.g=o}else sK(r);0<t.i.length&&mA(t)}else"stop"!=u[0]&&"close"!=u[0]||pf(t,7);else 3==t.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?pf(t,7):SL(t):"noop"!=u[0]&&t.l&&t.l.wa(u),t.A=0)}bb()}catch{}}function O7(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(KD(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function hDe(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(KD(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function dDe(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(KD(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ut=wb.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==tl(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const l=tl(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>l)&&(3!=l||JF||this.g&&(this.h.h||this.g.fa()||Z7(this.g)))){this.I||4!=l||7==e||bb(),cA(this);var t=this.g.aa();this.Y=t;t:if(M7(this)){var r=Z7(this.g);n="";var i=r.length,s=4==tl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hf(this),Cb(this);var o="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==t,function oDe(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,l,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!YD(a)){var u=a;break t}}u=null}if(!(t=u)){this.i=!1,this.o=3,ao(12),hf(this),Cb(this);break e}Dm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,EL(this,t)}this.P?(k7(this,l,o),JF&&this.i&&3==l&&(I7(this.S,this.T,"tick",this.hb),this.T.start())):(Dm(this.j,this.m,o,null),EL(this,o)),4==l&&hf(this),this.i&&!this.I&&(4==l?aK(this.l,this):(this.i=!1,Tb(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,ao(12)):(this.o=0,ao(13)),hf(this),Cb(this)}}}catch{}},ut.hb=function(){if(this.g){var n=tl(this.g),e=this.g.fa();this.C<e.length&&(cA(this),k7(this,n,e),this.i&&4!=n&&Tb(this))}},ut.cancel=function(){this.I=!0,hf(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function aDe(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(bb(),ao(17)),hf(this),this.o=2,Cb(this)):P7(this,this.V-n)};var F7=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ff(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ff){this.h=void 0!==e?e:n.h,uA(this,n.j),this.s=n.s,this.g=n.g,lA(this,n.m),this.l=n.l,e=n.i;var t=new Sb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),L7(this,t),this.o=n.o}else n&&(t=String(n).match(F7))?(this.h=!!e,uA(this,t[1]||"",!0),this.s=Db(t[2]||""),this.g=Db(t[3]||"",!0),lA(this,t[4]),this.l=Db(t[5]||"",!0),L7(this,t[6]||"",!0),this.o=Db(t[7]||"")):(this.h=!!e,this.i=new Sb(null,this.h))}function el(n){return new ff(n)}function uA(n,e,t){n.j=t?Db(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lA(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function L7(n,e,t){e instanceof Sb?(n.i=e,function vDe(n,e){e&&!n.j&&(gd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(B7(this,r),j7(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ab(e,_De)),n.i=new Sb(e,n.h))}function Tr(n,e,t){n.i.set(e,t)}function dA(n){return Tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Db(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ab(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pDe),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pDe(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ff.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ab(e,V7,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ab(e,V7,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ab(t,"/"==t.charAt(0)?mDe:gDe,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ab(t,yDe)),n.join("")};var V7=/[#\/\?@]/g,gDe=/[#\?:]/g,mDe=/[#\?]/g,_De=/[#\?@]/g,yDe=/#/g;function Sb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gd(n){n.g||(n.g=new Map,n.h=0,n.i&&function fDe(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function B7(n,e){gd(n),e=Am(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function U7(n,e){return gd(n),e=Am(n,e),n.g.has(e)}function j7(n,e,t){B7(n,e),0<t.length&&(n.i=null,n.g.set(Am(n,e),KF(t)),n.h+=t.length)}function Am(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(ut=Sb.prototype).add=function(n,e){gd(this),this.i=null,n=Am(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){gd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ut.oa=function(){gd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ut.W=function(n){gd(this);let e=[];if("string"==typeof n)U7(this,n)&&(e=e.concat(this.g.get(Am(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return gd(this),this.i=null,U7(this,n=Am(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var bDe=class{constructor(n,e){this.h=n,this.g=e}};function $7(n){this.l=n||IDe,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ga&&Pt.g.Ga()&&Pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var IDe=10;function H7(n){return!!n.h||!!n.g&&n.g.size>=n.j}function G7(n){return n.h?1:n.g?n.g.size:0}function wL(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function TL(n,e){n.g?n.g.add(e):n.h=e}function q7(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function z7(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return KF(n.i)}function CL(){}function EDe(){this.g=new CL}function wDe(n,e,t){const r=t||"";try{O7(n,function(i,s){let o=i;mb(i)&&(o=dL(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function hA(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Rb(n){this.l=n.ac||null,this.j=n.jb||!1}function fA(n,e){ts.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=DL,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$7.prototype.cancel=function(){if(this.i=z7(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},CL.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},CL.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},ys(Rb,mL),Rb.prototype.g=function(){return new fA(this.l,this.j)},Rb.prototype.i=function(n){return function(){return n}}({}),ys(fA,ts);var DL=0;function W7(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function xb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nb(n)}function Nb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=fA.prototype).open=function(n,e){if(this.readyState!=DL)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nb(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xb(this)),this.readyState=DL},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nb(this)),this.g&&(this.readyState=3,Nb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;W7(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?xb(this):Nb(this),3==this.readyState&&W7(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,xb(this))},ut.Ua=function(n){this.g&&(this.response=n,xb(this))},ut.ga=function(){this.g&&xb(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(fA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var CDe=Pt.JSON.parse;function jr(n){ts.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=K7,this.K=this.L=!1}ys(jr,ts);var K7="",DDe=/^https?$/i,ADe=["POST","PUT"];function Q7(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Y7(n),pA(n)}function Y7(n){n.D||(n.D=!0,vs(n,"complete"),vs(n,"error"))}function J7(n){if(n.h&&typeof zF<"u"&&(!n.C[1]||4!=tl(n)||2!=n.aa()))if(n.v&&4==tl(n))gL(n.Ha,0,n);else if(vs(n,"readystatechange"),4==tl(n)){n.h=!1;try{const a=n.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.H).match(F7)[1]||null;if(!i&&Pt.self&&Pt.self.location){var s=Pt.self.location.protocol;i=s.substr(0,s.length-1)}r=!DDe.test(i?i.toLowerCase():"")}t=r}if(t)vs(n,"complete"),vs(n,"success");else{n.m=6;try{var o=2<tl(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.aa()+"]",Y7(n)}}finally{pA(n)}}}function pA(n,e){if(n.g){X7(n);const t=n.g,r=n.C[0]?WD:null;n.g=null,n.C=null,e||vs(n,"ready");try{t.onreadystatechange=r}catch{}}}function X7(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function tl(n){return n.g?n.g.readyState:0}function Z7(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case K7:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function eK(n){let e="";return nL(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function AL(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=eK(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tr(n,e,t))}function Mb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function tK(n){this.Ca=0,this.i=[],this.j=new rA,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Mb("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Mb("baseRetryDelayMs",5e3,n),this.bb=Mb("retryDelaySeedMs",1e4,n),this.$a=Mb("forwardChannelMaxRetries",2,n),this.ta=Mb("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new $7(n&&n.concurrentRequestLimit),this.Fa=new EDe,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function SL(n){if(nK(n),3==n.G){var e=n.U++,t=el(n.F);Tr(t,"SID",n.I),Tr(t,"RID",e),Tr(t,"TYPE","terminate"),kb(n,t),(e=new wb(n,n.j,e,void 0)).K=2,e.v=dA(el(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=dK(e.l,null),e.g.da(e.v)),e.F=Date.now(),Tb(e)}uK(n)}function gA(n){n.g&&(xL(n),n.g.cancel(),n.g=null)}function nK(n){gA(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),_A(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function mA(n){H7(n.h)||n.m||(n.m=!0,_7(n.Ja,n),n.C=0)}function rK(n,e){var t;t=e?e.m:n.U++;const r=el(n.F);Tr(r,"SID",n.I),Tr(r,"RID",t),Tr(r,"AID",n.T),kb(n,r),n.o&&n.s&&AL(r,n.o,n.s),t=new wb(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=iK(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),TL(n.h,t),IL(t,r,e)}function kb(n,e){n.ia&&nL(n.ia,function(t,r){Tr(e,r,t)}),n.l&&O7({},function(t,r){Tr(e,r,t)})}function iK(n,e,t){t=Math.min(n.i.length,t);var r=n.l?$s(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let u=i[c].h;const l=i[c].g;if(u-=s,0>u)s=Math.max(0,i[c].h-100),a=!1;else try{wDe(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function sK(n){n.g||n.u||(n.Z=1,_7(n.Ia,n),n.A=0)}function RL(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ib($s(n.Ia,n),cK(n,n.A)),n.A++,0))}function xL(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function oK(n){n.g=new wb(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=el(n.sa);Tr(e,"RID","rpc"),Tr(e,"SID",n.I),Tr(e,"CI",n.L?"0":"1"),Tr(e,"AID",n.T),Tr(e,"TYPE","xmlhttp"),kb(n,e),n.o&&n.s&&AL(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=dA(el(e)),t.s=null,t.P=!0,N7(t,n)}function _A(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function aK(n,e){var t=null;if(n.g==e){_A(n),xL(n),n.g=null;var r=2}else{if(!wL(n.h,e))return;t=e.D,q7(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;vs(r=iA(),new D7(r,t)),mA(n)}else sK(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function RDe(n,e){return!(G7(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ib($s(n.Ja,n,e),cK(n,n.C)),n.C++,0)))}(n,e)||2==r&&RL(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:pf(n,5);break;case 4:pf(n,10);break;case 3:pf(n,6);break;default:pf(n,2)}}function cK(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function pf(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=$s(n.kb,n);t||(t=new ff("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||uA(t,"https"),dA(t)),function TDe(n,e){const t=new rA;if(Pt.Image){const r=new Image;r.onload=QD(hA,t,r,"TestLoadImage: loaded",!0,e),r.onerror=QD(hA,t,r,"TestLoadImage: error",!1,e),r.onabort=QD(hA,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=QD(hA,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ao(2);n.G=0,n.l&&n.l.va(e),uK(n),nK(n)}function uK(n){if(n.G=0,n.la=[],n.l){const e=z7(n.h);(0!=e.length||0!=n.i.length)&&(n7(n.la,e),n7(n.la,n.i),n.h.i.length=0,KF(n.i),n.i.length=0),n.l.ua()}}function lK(n,e,t){var r=t instanceof ff?el(t):new ff(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),lA(r,r.m);else{var i=Pt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ff(null,void 0);r&&uA(s,r),e&&(s.g=e),i&&lA(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Tr(r,t,e),Tr(r,"VER",n.ma),kb(n,r),r}function dK(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jr(t&&n.Da&&!n.ra?new Rb({jb:!0}):n.ra)).Ka(n.H),e}function hK(){}function yA(){if(Cm&&!(10<=Number(zCe)))throw Error("Environmental error: no available transport.")}function ia(n,e){ts.call(this),this.g=new tK(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!YD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!YD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Sm(this)}function fK(n){_L.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function pK(){yL.call(this),this.status=1}function Sm(n){this.g=n}(ut=jr.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vL.g(),this.C=function S7(n){return n.h||(n.h=n.i())}(this.u?this.u:vL),this.g.onreadystatechange=$s(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void Q7(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Pt.FormData&&n instanceof Pt.FormData,!(0<=t7(ADe,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{X7(this),0<this.B&&((this.K=function SDe(n){return Cm&&function qCe(){return function jCe(n){var e=GCe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=r7(String(XD)).split("."),t=r7("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=QF(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||QF(0==i[2].length,0==s[2].length)||QF(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$s(this.qa,this)):this.A=gL(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Q7(this,s)}},ut.qa=function(){typeof zF<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vs(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vs(this,"complete"),vs(this,"abort"),pA(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pA(this,!0)),jr.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?J7(this):this.fb())},ut.fb=function(){J7(this)},ut.aa=function(){try{return 2<tl(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),CDe(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=tK.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new wb(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=c7(s),l7(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=iK(this,i,e),Tr(t=el(this.F),"RID",n),Tr(t,"CVER",22),this.D&&Tr(t,"X-HTTP-Session-Id",this.D),kb(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(eK(s)))+"&"+e:this.o&&AL(t,this.o,s)),TL(this.h,i),this.Ya&&Tr(t,"TYPE","init"),this.O?(Tr(t,"$req",e),Tr(t,"SID","null"),i.Z=!0,IL(i,t,null)):IL(i,t,e),this.G=2}}else 3==this.G&&(n?rK(this,n):0==this.i.length||H7(this.h)||rK(this))},ut.Ia=function(){if(this.u=null,oK(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ib($s(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ao(10),gA(this),oK(this))},ut.cb=function(){null!=this.v&&(this.v=null,gA(this),RL(this),ao(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ao(2)):(this.j.info("Failed to ping google.com"),ao(1))},(ut=hK.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},yA.prototype.g=function(n,e){return new ia(n,e)},ys(ia,ts),ia.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ao(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=lK(n,null,n.V),mA(n)},ia.prototype.close=function(){SL(this.g)},ia.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=dL(n),n=t);e.i.push(new bDe(e.ab++,n)),3==e.G&&mA(e)},ia.prototype.M=function(){this.g.l=null,delete this.j,SL(this.g),delete this.g,ia.X.M.call(this)},ys(fK,_L),ys(pK,yL),ys(Sm,hK),Sm.prototype.xa=function(){vs(this.g,"a")},Sm.prototype.wa=function(n){vs(this.g,new fK(n))},Sm.prototype.va=function(n){vs(this.g,new pK)},Sm.prototype.ua=function(){vs(this.g,"b")},yA.prototype.createWebChannel=yA.prototype.g,ia.prototype.send=ia.prototype.u,ia.prototype.open=ia.prototype.m,ia.prototype.close=ia.prototype.close,sA.NO_ERROR=0,sA.TIMEOUT=8,sA.HTTP_ERROR=6,A7.COMPLETE="complete",R7.EventType=Eb,Eb.OPEN="a",Eb.CLOSE="b",Eb.ERROR="c",Eb.MESSAGE="d",ts.prototype.listen=ts.prototype.N,jr.prototype.listenOnce=jr.prototype.O,jr.prototype.getLastError=jr.prototype.Oa,jr.prototype.getLastErrorCode=jr.prototype.Ea,jr.prototype.getStatus=jr.prototype.aa,jr.prototype.getResponseJson=jr.prototype.Sa,jr.prototype.getResponseText=jr.prototype.fa,jr.prototype.send=jr.prototype.da,jr.prototype.setWithCredentials=jr.prototype.Ka,Zu.createWebChannelTransport=function(){return new yA},Zu.getStatEventTarget=function(){return iA()},Zu.ErrorCode=sA,Zu.EventType=A7,Zu.Event=df,Zu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Zu.FetchXmlHttpFactory=Rb,Zu.WebChannel=R7,Zu.XhrIo=jr;const mK="@firebase/firestore";class ns{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");let Rm="9.15.0";const md=new ED("@firebase/firestore");function Ne(n,...e){if(md.logLevel<=xn.DEBUG){const t=e.map(kL);md.debug(`Firestore (${Rm}): ${n}`,...t)}}function ri(n,...e){if(md.logLevel<=xn.ERROR){const t=e.map(kL);md.error(`Firestore (${Rm}): ${n}`,...t)}}function kL(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Rm}) INTERNAL ASSERTION FAILED: `+n;throw ri(e),new Error(e)}function ct(n,e){n||it()}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Hu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _K{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FDe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ns.UNAUTHENTICATED))}shutdown(){}}class LDe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VDe{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ui,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,D.A)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ui)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new _K(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new ns(e)}}class BDe{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class UDe{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new BDe(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jDe{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,Ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.A=t.token,new yK(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $De(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vK{static R(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=$De(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}class Pb{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends Pb{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(bn.fromString(e))}static fromName(e){return new Ke(bn.fromString(e).popFirst(5))}static empty(){return new Ke(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new bn(e.slice()))}}function yd(n){return"IndexedDbTransactionError"===n.name}class YDe{constructor(e,t,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class _f{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _f("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _f&&e.projectId===this.projectId&&e.database===this.database}}class ji{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ji(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ji(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function $r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}ji.EMPTY_BYTE_STRING=new ji(""),new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);class Hr{constructor(e,t){this.comparator=e,this.root=t||bs.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bs.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new CA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new CA(this.root,e,this.comparator,!1)}getReverseIterator(){return new CA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new CA(this.root,e,this.comparator,!0)}}class CA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??bs.RED,this.left=i??bs.EMPTY,this.right=s??bs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new bs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}bs.EMPTY=null,bs.RED=!0,bs.BLACK=!1,bs.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new bs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xn{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WK(this.data.getIterator())}getIteratorFrom(e){return new WK(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xn(this.comparator);return t.data=e,t}}class WK{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}var Ei,In;(In=Ei||(Ei={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS",new Hr(Ke.comparator),new Hr(Ke.comparator),new Hr(Ke.comparator),new Xn(Ke.comparator),new Xn(Ot);class Rf{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le($r(e.integerValue));else if("doubleValue"in e){const r=$r(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),function Vb(n){return 0===n&&1/n==-1/0}(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(function vf(n){return"string"==typeof n?ji.fromBase64String(n):ji.fromUint8Array(n)}(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?function kK(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):it()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Ke.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}Rf.Ie=new Rf,new Uint8Array(0);class xo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function QA(){return typeof document<"u"?document:null}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class wV{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class $V{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new $V(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function XA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}const XY=new Map;class ZY{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function w1e(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dI{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZY({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZY(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new FDe;switch(t.type){case"gapi":return new UDe(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=XY.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),XY.delete(e),t.terminate())}(this),Promise.resolve()}}function T1e(n,e,t,r={}){var i;const s=(n=pn(n,dI))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&function xm(n,...e){if(md.logLevel<=xn.WARN){const t=e.map(kL);md.warn(`Firestore (${Rm}): ${n}`,...t)}}("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=ns.MOCK_USER;else{o=function Bbe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_D(JSON.stringify({alg:"none",type:"JWT"})),_D(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ns(c)}n._authCredentials=new LDe(new _K(o,a))}}class N1e{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ns.UNAUTHENTICATED,this.clientId=vK.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,D.A)(function*(a){Ne("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(Ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,D.A)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,D.A)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=function Jm(n,e){if(ri("AsyncQueue",`${e}: ${n}`),yd(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}class B1e{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new wV(this,"async_queue_retry"),this.Wc=()=>{const t=QA();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=QA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=QA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Ui;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,D.A)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!yd(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,ri("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=$V.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&it()}verifyOperationInProgress(){}Xc(){var e=this;return(0,D.A)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}class yr extends dI{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new B1e,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||function cJ(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new YDe(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new N1e(n._authCredentials,n._appCheckCredentials,n._queue,r)}(this),this._firestoreClient.terminate()}}new RegExp("[~\\*/\\[\\]]"),function(n,e=!0){Rm=Z0,hd(new Gu("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new yr(new VDe(t.getProvider("auth-internal")),new jDe(t.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(a.options.projectId,c)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),zu(mK,"3.8.0",n),zu(mK,"3.8.0","esm2017")}();const hS_firebase={apiKey:"AIzaSyCIHKjcCgDNcTKRhujdEcOsODVjsURkgF8",authDomain:"webrtc-720e4.firebaseapp.com",projectId:"webrtc-720e4",storageBucket:"webrtc-720e4.appspot.com",messagingSenderId:"837219898574",appId:"1:837219898574:web:318a8d9ff02d67dabf2c9f",measurementId:"G-6TXG2ZM2S6"};let U2=(()=>{class n{constructor(){this.toasts=[]}showAlert(t){this.toasts.push({...t})}hideAlert(t){this.toasts=this.toasts.filter(r=>r!==t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Nd=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.sharedService=i,this.userData={uid:null,email:null,displayName:null,photoURL:"./assets/dummy-user.png",emailVerified:!1},this.app=C5(hS_firebase),this.appCheck=$Ee(this.app,{provider:new XP("6LfLt9IjAAAAAMDLMl7xkkZtneFyCglcnQ7Sjj3D"),isTokenAutoRefreshEnabled:!0}),this.auth=kCe(this.app),this.firestore=function j1e(n,e){const r="string"==typeof n?n:e||"(default)",i=vm("object"==typeof n?n:MP(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(n=>{const e=p5("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();s&&T1e(i,...s)}return i}(this.app)}getToken(){var t=this;return(0,D.A)(function*(){let r;try{r=yield function GEe(n,e){return ZP.apply(this,arguments)}(t.appCheck)}catch{return}return r})()}checkToken(){var t=this;return new Promise(function(){var r=(0,D.A)(function*(i,s){i((yield t.getToken())||!0)});return function(i,s){return r.apply(this,arguments)}}())}signIn(t,r){this.checkToken().then(()=>function qwe(n,e,t){return jO(Li(n),E9.credential(e,t))}(this.auth,t,r).then(i=>{i.user&&i.user.emailVerified?(this.SetUserData(i.user),this.router.navigate(["dashboard"])):this.router.navigate(["verify-email-address"])}).catch(i=>{this.sharedService.showAlert({class:"error",title:i.message,iconClass:"fa-solid fa-phone"})})).catch(i=>{console.error(i)})}signUp(t,r){this.checkToken().then(()=>function Gwe(n,e,t){return ZO.apply(this,arguments)}(this.auth,t,r).then(i=>{this.sendVerificationMail(i.user),this.SetUserData(i.user)}).catch(i=>{this.sharedService.showAlert({class:"error",title:i.message,iconClass:"fa-solid fa-phone"})})).catch(i=>{console.error(i)})}sendVerificationMail(t){this.checkToken().then(()=>function Wwe(n,e){return iF.apply(this,arguments)}(t).then(()=>{this.router.navigate(["verify-email-address"])})).catch(r=>{console.error(r)})}forgotPassword(t){this.checkToken().then(()=>function $we(n,e,t){return KO.apply(this,arguments)}(this.auth,t).then(()=>{this.sharedService.showAlert({class:"info",title:"Password reset email sent, check your inbox.",iconClass:"fa-solid fa-phone"})}).catch(r=>{this.sharedService.showAlert({class:"error",title:r.message,iconClass:"fa-solid fa-phone"})})).catch(r=>{this.sharedService.showAlert({class:"error",title:r.message,iconClass:"fa-solid fa-phone"})})}get isLoggedIn(){let t=localStorage.getItem("WebRTCVideoCallUser");return t&&(t=JSON.parse(t),this.userData=t),!(!t||!1===t.emailVerified)}GoogleAuth(){this.checkToken().then(()=>this.AuthLogin(new Fwe)).catch(t=>{console.error(t)})}AuthLogin(t){return function $Te(n,e,t){return RF.apply(this,arguments)}(this.auth,t).then(r=>{this.SetUserData(r.user),this.router.navigate(["dashboard"])}).catch(r=>{this.sharedService.showAlert({class:"error",title:r.message,iconClass:"fa-solid fa-phone"})})}SetUserData(t){localStorage.setItem("WebRTCVideoCallUser",JSON.stringify({uid:t.uid,email:t.email,displayName:t.displayName?t.displayName:t.email,photoURL:t.photoURL,emailVerified:t.emailVerified}))}SignOut(){this.auth.signOut().then(()=>{this.userData=null,localStorage.removeItem("WebRTCVideoCallUser"),this.router.navigate(["sign-in"])})}getValidationMessage(t){t.validationMessage=null,t&&t.errors&&t.dirty&&((t.errors.pattern||t.errors.email)&&(t.errors.validationMessage=`Invalid ${t.name}`),t.errors.required&&(t.errors.validationMessage="required"))}static{this.\u0275fac=function(r){return new(r||n)(Oe(so),Oe(tf),Oe(U2))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tRe=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}ngOnInit(){this.loginForm={email:"",password:""},this.backToPreviousPage()}backToPreviousPage(){const{redirect:t}=window.history.state;this.router.navigateByUrl(t||"/dashboard")}static{this.\u0275fac=function(r){return new(r||n)(Ae(Nd),Ae(so))}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-sign-in"]],decls:35,vars:5,consts:[["userLoginForm","ngForm"],["email","ngModel"],["password","ngModel"],["name","userLoginForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","me-1"],[1,"form-group","text-center"],["routerLink","/forgot-password",1,"link"],[1,"form-group","text-center","mb-0"],["routerLink","/register-user",1,"link"]],template:function(r,i){if(1&r){const s=ki();Se(0,"form",3,0)(2,"h4",4),hn(3,"i",5),at(4," VideoWebRTC "),De(),Se(5,"div",6)(6,"h5"),at(7,"Sign In"),De(),Se(8,"div",7)(9,"input",8,1),Ou("ngModelChange",function(a){return Lt(s),nd(i.loginForm.email,a)||(i.loginForm.email=a),Gt(a)}),_t("ngModelChange",function(){Lt(s);const a=Or(10);return Gt(i.authService.getValidationMessage(a))}),De(),Se(11,"div",9),at(12),De()(),Se(13,"div",7)(14,"input",10,2),Ou("ngModelChange",function(a){return Lt(s),nd(i.loginForm.password,a)||(i.loginForm.password=a),Gt(a)}),_t("ngModelChange",function(){Lt(s);const a=Or(15);return Gt(i.authService.getValidationMessage(a))}),De(),Se(16,"div",9),at(17),De()(),Se(18,"div",7)(19,"button",11),_t("click",function(){return Lt(s),Gt(i.authService.signIn(i.loginForm.email,i.loginForm.password))}),at(20," Sign In "),De()(),Se(21,"div",7)(22,"div",12)(23,"span"),at(24,"OR"),De()()(),Se(25,"div",7)(26,"button",13),_t("click",function(){return Lt(s),Gt(i.authService.GoogleAuth())}),hn(27,"i",14),at(28," Log in with Google "),De()(),Se(29,"div",15)(30,"span",16),at(31,"Forgot Password?"),De()(),Se(32,"div",17)(33,"span",18),at(34,"Don't have an account ? Sign Up"),De()()()()}if(2&r){const s=Or(1),o=Or(10),a=Or(15);Fe(9),Pu("ngModel",i.loginForm.email),Fe(3),Qi(null==o||null==o.errors?null:o.errors.validationMessage),Fe(2),Pu("ngModel",i.loginForm.password),Fe(3),Qi(null==a||null==a.errors?null:a.errors.validationMessage),Fe(2),Mt("disabled",s.invalid)}},dependencies:[nf,nm,Jh,S0,Xg,Zh,k0,tm,cd]})}}return n})(),nRe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.registerForm={email:"",password:""}}static{this.\u0275fac=function(r){return new(r||n)(Ae(Nd))}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-sign-up"]],decls:32,vars:5,consts:[["userSignupForm","ngForm"],["email","ngModel"],["password","ngModel"],["name","userSignupForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"validation-message"],["type","password","placeholder","Password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"decorated"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fab","fa-google","me-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(r,i){if(1&r){const s=ki();Se(0,"form",3,0)(2,"h4",4),hn(3,"i",5),at(4," VideoWebRTC "),De(),Se(5,"div",6)(6,"h5"),at(7,"Sign Up"),De(),Se(8,"div",7)(9,"input",8,1),Ou("ngModelChange",function(a){return Lt(s),nd(i.registerForm.email,a)||(i.registerForm.email=a),Gt(a)}),_t("ngModelChange",function(){Lt(s);const a=Or(10);return Gt(i.authService.getValidationMessage(a))}),De(),Se(11,"div",9),at(12),De()(),Se(13,"div",7)(14,"input",10,2),Ou("ngModelChange",function(a){return Lt(s),nd(i.registerForm.password,a)||(i.registerForm.password=a),Gt(a)}),_t("ngModelChange",function(){Lt(s);const a=Or(15);return Gt(i.authService.getValidationMessage(a))}),De(),Se(16,"div",9),at(17),De()(),Se(18,"div",7)(19,"button",11),_t("click",function(){return Lt(s),Gt(i.authService.signUp(i.registerForm.email,i.registerForm.password))}),at(20," Sign Up "),De()(),Se(21,"div",7)(22,"div",12)(23,"span"),at(24,"OR"),De()()(),Se(25,"div",7)(26,"button",13),_t("click",function(){return Lt(s),Gt(i.authService.GoogleAuth())}),hn(27,"i",14),at(28," Continue with Google "),De()(),Se(29,"div",15)(30,"span",16),at(31,"Already have an account ? Sign In"),De()()()()}if(2&r){const s=Or(1),o=Or(10),a=Or(15);Fe(9),Pu("ngModel",i.registerForm.email),Fe(3),Qi(null==o||null==o.errors?null:o.errors.validationMessage),Fe(2),Pu("ngModel",i.registerForm.password),Fe(3),Qi(null==a||null==a.errors?null:a.errors.validationMessage),Fe(2),Mt("disabled",s.invalid)}},dependencies:[nf,nm,Jh,S0,Xg,Zh,k0,tm,cd]})}}return n})();class iRe{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return function sRe(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);t.set(s,r),r+=i.byteLength}return t}(e).buffer}}function AJ(n){return new oRe(n).unpack()}function SJ(n){const e=new aRe,t=e.pack(n);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class oRe{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let s,o,r=0,i="";for(;r<e;)s=t[r],s<160?(o=s,r++):(192^s)<32?(o=(31&s)<<6|63&t[r+1],r+=2):(224^s)<16?(o=(15&s)<<12|(63&t[r+1])<<6|63&t[r+2],r+=3):(o=(7&s)<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const t=new Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){const t={};for(let r=0;r<e;r++)t[this.unpack()]=this.unpack();return t}unpack_float(){const e=this.unpack_uint32();return(e>>31?-1:1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),i=(e>>20&2047)-1023;return(e>>31?-1:1)*((1048575&e|1048576)*2**(i-20)+this.unpack_uint32()*2**(i-52))}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class aRe{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"==typeof e)this.pack_string(e);else if("number"==typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else{if("object"!=typeof e)throw new Error(`Type "${typeof e}" not yet supported`);if(null===e)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e)this.pack_bin(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(t!=Object&&!t.toString().startsWith("class"))throw new Error(`Type "${t.toString()}" not yet supported`);{const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}}}}this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(t)}this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(r)}this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(t)}const r=i=>{if(i<t){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let t=0;e<0&&(t=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),s=Math.floor((e/2**r-1)*2**52),o=2**32,a=t<<31|r+1023<<20|s/o&1048575,c=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(e){const t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(r)}const i=s=>{if(s<t.length){const o=t[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const t=4294967295&e;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){const t=e/4294967296,r=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const t=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&r)>>>24),this._bufferBuilder.append((16711680&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}constructor(){this._bufferBuilder=new iRe,this._textEncoder=new TextEncoder}}let RJ=!0,xJ=!0;function pS(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function Vf(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=u=>{const l=t(u);l&&(a.handleEvent?a.handleEvent(l):a(l))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),0===this._eventMap[e].size&&delete this._eventMap[e],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function cRe(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(RJ=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function uRe(n){return"boolean"!=typeof n?new Error("Argument type: "+typeof n+". Please use a boolean."):(xJ=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function NJ(){if("object"==typeof window){if(RJ)return;typeof console<"u"&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function j2(n,e){xJ&&console.warn(n+" is deprecated, please use "+e+" instead.")}function MJ(n){return"[object Object]"===Object.prototype.toString.call(n)}function kJ(n){return MJ(n)?Object.keys(n).reduce(function(e,t){const r=MJ(n[t]),i=r?kJ(n[t]):n[t],s=r&&!Object.keys(i).length;return void 0===i||s?e:Object.assign(e,{[t]:i})},{}):n}function $2(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?$2(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(i=>{$2(n,n.get(i),t)})}))}function PJ(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(null===e)return i;const s=[];return n.forEach(o=>{"track"===o.type&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{n.forEach(a=>{a.type===r&&a.trackId===o.id&&$2(n,a,i)})}),i}const OJ=NJ;function FJ(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(a){if("object"!=typeof a||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(u=>{if("require"===u||"advanced"===u||"mediaSource"===u)return;const l="object"==typeof a[u]?a[u]:{ideal:a[u]};void 0!==l.exact&&"number"==typeof l.exact&&(l.min=l.max=l.exact);const f=function(_,y){return _?_+y.charAt(0).toUpperCase()+y.slice(1):"deviceId"===y?"sourceId":y};if(void 0!==l.ideal){c.optional=c.optional||[];let _={};"number"==typeof l.ideal?(_[f("min",u)]=l.ideal,c.optional.push(_),_={},_[f("max",u)]=l.ideal,c.optional.push(_)):(_[f("",u)]=l.ideal,c.optional.push(_))}void 0!==l.exact&&"number"!=typeof l.exact?(c.mandatory=c.mandatory||{},c.mandatory[f("",u)]=l.exact):["min","max"].forEach(_=>{void 0!==l[_]&&(c.mandatory=c.mandatory||{},c.mandatory[f(_,u)]=l[_])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if((a=JSON.parse(JSON.stringify(a)))&&"object"==typeof a.audio){const u=function(l,f,_){f in l&&!(_ in l)&&(l[_]=l[f],delete l[f])};u((a=JSON.parse(JSON.stringify(a))).audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&"object"==typeof a.video){let u=a.video.facingMode;u=u&&("object"==typeof u?u:{ideal:u});const l=e.version<66;if(u&&("user"===u.exact||"environment"===u.exact||"user"===u.ideal||"environment"===u.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l)){let f;if(delete a.video.facingMode,"environment"===u.exact||"environment"===u.ideal?f=["back","rear"]:("user"===u.exact||"user"===u.ideal)&&(f=["front"]),f)return t.mediaDevices.enumerateDevices().then(_=>{let y=(_=_.filter(I=>"videoinput"===I.kind)).find(I=>f.some(T=>I.label.toLowerCase().includes(T)));return!y&&_.length&&f.includes("back")&&(y=_[_.length-1]),y&&(a.video.deviceId=u.exact?{exact:y.deviceId}:{ideal:y.deviceId}),a.video=r(a.video),OJ("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return OJ("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(a,c,u){i(a,l=>{t.webkitGetUserMedia(l,c,f=>{u&&u(s(f))})})}.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(c){return i(c,u=>a(u).then(l=>{if(u.audio&&!l.getAudioTracks().length||u.video&&!l.getVideoTracks().length)throw l.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return l},l=>Promise.reject(s(l))))}}}function LJ(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function VJ(n){if("object"==typeof n&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;s=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):{track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;s=n.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(a=>a.track&&a.track.id===i.id):{track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Vf(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function BJ(n){if("object"==typeof n&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===s.kind?i.createDTMFSender(s):null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(a,c){let u=i.apply(this,arguments);return u||(u=e(this,a),this._senders.push(u)),u};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);-1!==c&&this._senders.splice(c,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if("object"==typeof n&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function UJ(n){if(!("object"==typeof n&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>PJ(o,s.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Vf(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>PJ(s,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype)||!("getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function jJ(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?-1===this._shimmedLocalStreams[a.id].indexOf(c)&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(f=>f.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const c=this.getSenders().filter(u=>-1===a.indexOf(u));this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);-1!==c&&this._shimmedLocalStreams[a].splice(c,1),1===this._shimmedLocalStreams[a].length&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function $J(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return jJ(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const l=t.apply(this);return this._reverseStreams=this._reverseStreams||{},l.map(f=>this._reverseStreams[f.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(y=>y.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[l.id]){const f=new n.MediaStream(l.getTracks());this._streams[l.id]=f,this._reverseStreams[f.id]=l,l=f}r.apply(this,[l])};const i=n.RTCPeerConnection.prototype.removeStream;function s(u,l){let f=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(_=>{const y=u._reverseStreams[_];f=f.replace(new RegExp(u._streams[y.id].id,"g"),y.id)}),new RTCSessionDescription({type:l.type,sdp:f})}n.RTCPeerConnection.prototype.removeStream=function(l){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[l.id]||l]),delete this._reverseStreams[this._streams[l.id]?this._streams[l.id].id:l.id],delete this._streams[l.id]},n.RTCPeerConnection.prototype.addTrack=function(l,f){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(1!==_.length||!_[0].getTracks().find(T=>T===l))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(T=>T.track===l))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const I=this._streams[f.id];if(I)I.addTrack(l),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const T=new n.MediaStream([l]);this._streams[f.id]=T,this._reverseStreams[T.id]=f,this.addStream(T)}return this.getSenders().find(T=>T.track===l)},["createOffer","createAnswer"].forEach(function(u){const l=n.RTCPeerConnection.prototype[u],f={[u](){const _=arguments;return arguments.length&&"function"==typeof arguments[0]?l.apply(this,[I=>{const T=s(this,I);_[0].apply(null,[T])},I=>{_[1]&&_[1].apply(null,I)},arguments[2]]):l.apply(this,arguments).then(I=>s(this,I))}};n.RTCPeerConnection.prototype[u]=f[u]});const a=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function o(u,l){let f=l.sdp;return Object.keys(u._reverseStreams||[]).forEach(_=>{const y=u._reverseStreams[_],I=u._streams[y.id];f=f.replace(new RegExp(y.id,"g"),I.id)}),new RTCSessionDescription({type:l.type,sdp:f})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const u=c.get.apply(this);return""===u.type?u:s(this,u)}}),n.RTCPeerConnection.prototype.removeTrack=function(l){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!l._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(l._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let _;this._streams=this._streams||{},Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(T=>l.track===T)&&(_=this._streams[y])}),_&&(1===_.getTracks().length?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(l.track),this.dispatchEvent(new Event("negotiationneeded")))}}function H2(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=i[t]})}function HJ(n,e){Vf(n,"negotiationneeded",t=>{const r=t.target;if(!(e.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return t})}function GJ(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(i,s,o){j2("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return"object"==typeof o&&"object"==typeof o.audio&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return"audio"===this.kind&&"object"==typeof a&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function dRe(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===r.video?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function qJ(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function G2(n,e){if("object"!=typeof n||!n.RTCPeerConnection&&!n.mozRTCPeerConnection)return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new("addIceCandidate"===i?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(u=>{u.type=t[u.type]||u.type})}catch(u){if("TypeError"!==u.name)throw u;c.forEach((l,f)=>{c.set(f,Object.assign({},l,{type:t[l.type]||l.type}))})}return c}).then(o,a)}}function zJ(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function WJ(n){if("object"!=typeof n||!n.RTCPeerConnection||!n.RTCRtpSender||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Vf(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function KJ(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){j2("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function QJ(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function YJ(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;void 0===r&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function JJ(n){if("object"!=typeof n||!n.RTCRtpSender)return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function XJ(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function ZJ(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function eX(n){if("object"==typeof n&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(-1===r)return;this._localStreams.splice(r,1);const i=t.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function tX(n){if("object"==typeof n&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function nX(n){if("object"!=typeof n||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,l){const _=t.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return l?(_.then(u,l),Promise.resolve()):_},e.createAnswer=function(u,l){const _=r.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return l?(_.then(u,l),Promise.resolve()):_};let a=function(c,u,l){const f=i.apply(this,[c]);return l?(f.then(u,l),Promise.resolve()):f};e.setLocalDescription=a,a=function(c,u,l){const f=s.apply(this,[c]);return l?(f.then(u,l),Promise.resolve()):f},e.setRemoteDescription=a,a=function(c,u,l){const f=o.apply(this,[c]);return l?(f.then(u,l),Promise.resolve()):f},e.addIceCandidate=a}function rX(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=i=>r(iX(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}.bind(e))}function iX(n){return n&&void 0!==n.video?Object.assign({},n,{video:kJ(n.video)}):n}function sX(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];void 0===a.urls&&a.url?(j2("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:()=>e.generateCertificate})}function oX(n){"object"==typeof n&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function aX(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>"audio"===o.receiver.track.kind);!1===r.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0===r.offerToReceiveAudio&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>"video"===o.receiver.track.kind);!1===r.offerToReceiveVideo&&s?"sendrecv"===s.direction?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":"recvonly"===s.direction&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):!0===r.offerToReceiveVideo&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function cX(n){"object"!=typeof n||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var uX=k(80),_I=k.n(uX);function gS(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if("object"==typeof r&&r.candidate&&0===r.candidate.indexOf("a=")&&((r=JSON.parse(JSON.stringify(r))).candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=_I().parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,Vf(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function q2(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||Vf(n,"icecandidate",e=>{if(e.candidate){const t=_I().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function mS(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===e.browser&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();"plan-b"===c&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(function(a){if(!a||!a.sdp)return!1;const c=_I().splitSections(a.sdp);return c.shift(),c.some(u=>{const l=_I().parseMLine(u);return l&&"application"===l.kind&&-1!==l.protocol.indexOf("SCTP")})}(arguments[0])){const c=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===c||c.length<2)return-1;const u=parseInt(c[1],10);return u!=u?-1:u}(arguments[0]),u=function(a){let c=65536;return"firefox"===e.browser&&(c=e.version<57?-1===a?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),c}(c),l=function(a,c){let u=65536;"firefox"===e.browser&&57===e.version&&(u=65535);const l=_I().matchPrefix(a.sdp,"a=max-message-size:");return l.length>0?u=parseInt(l[0].substring(19),10):"firefox"===e.browser&&-1!==c&&(u=2147483637),u}(arguments[0],c);let f;f=0===u&&0===l?Number.POSITIVE_INFINITY:0===u||0===l?Math.max(u,l):Math.min(u,l);const _={};Object.defineProperty(_,"maxMessageSize",{get:()=>f}),this._sctp=_}return o.apply(this,arguments)}}function _S(n){if(!n.RTCPeerConnection||!("createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0];if("open"===r.readyState&&i.sctp&&(a.length||a.size||a.byteLength)>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},Vf(n,"datachannel",r=>(e(r.channel,r.target),r))}function z2(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function W2(n,e){if(!n.RTCPeerConnection||"chrome"===e.browser&&e.version>=71||"safari"===e.browser&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&-1!==i.sdp.indexOf("\na=extmap-allow-mixed")){const s=i.sdp.split("\n").filter(o=>"a=extmap-allow-mixed"!==o.trim()).join("\n");n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return t.apply(this,arguments)}}function yS(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||0===t.length||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===e.browser&&e.version<78||"firefox"===e.browser&&e.version<68||"safari"===e.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function vS(n,e){if(!n.RTCPeerConnection||!n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||0===t.length||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if("object"!=typeof i||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer"}return i.sdp||"offer"!==i.type&&"answer"!==i.type?t.apply(this,[i]):("offer"===i.type?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const lX=function hRe({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=NJ,r=function lRe(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.userAgentData&&t.userAgentData.brands){const r=t.userAgentData.brands.find(i=>"Chromium"===i.brand);if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=pS(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===n.isSecureContext&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=pS(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!n.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return e.browser="Not a supported browser.",e;e.browser="safari",e.version=pS(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype}return e}(n),i={browserDetails:r,commonShim:K,extractVersion:pS,disableLog:cRe,disableWarnings:uRe,sdp:uX};switch(r.browser){case"chrome":if(!w||!H2||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(null===r.version)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=w,yS(n,r),vS(n),FJ(n,r),LJ(n),H2(n,r),VJ(n),$J(n,r),BJ(n),UJ(n),HJ(n,r),gS(n),q2(n),z2(n),mS(n,r),_S(n),W2(n,r);break;case"firefox":if(!Z||!G2||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=Z,yS(n,r),vS(n),GJ(n,r),G2(n,r),qJ(n),KJ(n),zJ(n),WJ(n),QJ(n),YJ(n),JJ(n),XJ(n),ZJ(n),gS(n),z2(n),mS(n,r),_S(n);break;case"safari":if(!ue||!e.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=ue,yS(n,r),vS(n),sX(n),aX(n),nX(n),eX(n),tX(n),oX(n),rX(n),cX(n),gS(n),q2(n),mS(n,r),_S(n),W2(n,r);break;default:t("Unsupported browser!")}return i}({window:typeof window>"u"?void 0:window});var Bf=4294967295;function dX(n,e,t){var r=Math.floor(t/4294967296),i=t;n.setUint32(e,r),n.setUint32(e+4,i)}function hX(n,e){return 4294967296*n.getInt32(e)+n.getUint32(e+4)}var K2,Q2,Y2,bS=(typeof process>"u"||"never"!==(null===(K2=null==process?void 0:process.env)||void 0===K2?void 0:K2.TEXT_ENCODING))&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function fX(n){for(var e=n.length,t=0,r=0;r<e;){var i=n.charCodeAt(r++);if(4294967168&i)if(4294965248&i){if(i>=55296&&i<=56319&&r<e){var s=n.charCodeAt(r);56320==(64512&s)&&(++r,i=((1023&i)<<10)+(1023&s)+65536)}t+=4294901760&i?4:3}else t+=2;else t++}return t}var yI=bS?new TextEncoder:void 0,mRe=bS?typeof process<"u"&&"force"!==(null===(Q2=null==process?void 0:process.env)||void 0===Q2?void 0:Q2.TEXT_ENCODING)?200:0:Bf,vRe=yI?.encodeInto?function yRe(n,e,t){yI.encodeInto(n,e.subarray(t))}:function _Re(n,e,t){e.set(yI.encode(n),t)};function pX(n,e,t){for(var r=e,i=r+t,s=[],o="";r<i;){var a=n[r++];if(128&a)if(192==(224&a)){var c=63&n[r++];s.push((31&a)<<6|c)}else if(224==(240&a)){c=63&n[r++];var u=63&n[r++];s.push((31&a)<<12|c<<6|u)}else if(240==(248&a)){var f=(7&a)<<18|(c=63&n[r++])<<12|(u=63&n[r++])<<6|63&n[r++];f>65535&&(s.push((f-=65536)>>>10&1023|55296),f=56320|1023&f),s.push(f)}else s.push(a);else s.push(a);s.length>=4096&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return s.length>0&&(o+=String.fromCharCode.apply(String,s)),o}var IRe=bS?new TextDecoder:null,ERe=bS?typeof process<"u"&&"force"!==(null===(Y2=null==process?void 0:process.env)||void 0===Y2?void 0:Y2.TEXT_DECODER)?200:0:Bf,IS=function(){return function n(e,t){this.type=e,this.data=t}}(),TRe=function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])})(e,t)};return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qc=function(n){function e(t){var r=n.call(this,t)||this,i=Object.create(e.prototype);return Object.setPrototypeOf(r,i),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:e.name}),r}return TRe(e,n),e}(Error),kRe={type:-1,encode:function xRe(n){if(n instanceof Date){var e=function RRe(n){var e=n.getTime(),t=Math.floor(e/1e3),r=1e6*(e-1e3*t),i=Math.floor(r/1e9);return{sec:t+i,nsec:r-1e9*i}}(n);return function SRe(n){var i,e=n.sec,t=n.nsec;if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){var r=new Uint8Array(4);return(i=new DataView(r.buffer)).setUint32(0,e),r}var s=e/4294967296,o=4294967295&e;return r=new Uint8Array(8),(i=new DataView(r.buffer)).setUint32(0,t<<2|3&s),i.setUint32(4,o),r}return r=new Uint8Array(12),(i=new DataView(r.buffer)).setUint32(0,t),dX(i,4,e),r}(e)}return null},decode:function MRe(n){var e=function NRe(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength);switch(n.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:var i=e.getUint32(0);return{sec:4294967296*(3&i)+e.getUint32(4),nsec:i>>>2};case 12:return{sec:hX(e,4),nsec:e.getUint32(0)};default:throw new Qc("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(n.length))}}(n);return new Date(1e3*e.sec+e.nsec/1e6)}},gX=function(){function n(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(kRe)}return n.prototype.register=function(e){var t=e.type,r=e.encode,i=e.decode;if(t>=0)this.encoders[t]=r,this.decoders[t]=i;else{var s=1+t;this.builtInEncoders[s]=r,this.builtInDecoders[s]=i}},n.prototype.tryToEncode=function(e,t){for(var r=0;r<this.builtInEncoders.length;r++)if(null!=(i=this.builtInEncoders[r])&&null!=(s=i(e,t)))return new IS(-1-r,s);for(r=0;r<this.encoders.length;r++){var i,s;if(null!=(i=this.encoders[r])&&null!=(s=i(e,t)))return new IS(r,s)}return e instanceof IS?e:null},n.prototype.decode=function(e,t,r){var i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new IS(t,e)},n.defaultCodec=new n,n}();function ES(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?new Uint8Array(n):Uint8Array.from(n)}function J2(n){return"".concat(n<0?"-":"","0x").concat(Math.abs(n).toString(16).padStart(2,"0"))}!function(){function n(e,t,r,i,s,o,a,c){void 0===e&&(e=gX.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=100),void 0===i&&(i=2048),void 0===s&&(s=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===c&&(c=!1),this.extensionCodec=e,this.context=t,this.maxDepth=r,this.initialBufferSize=i,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=c,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}n.prototype.reinitializeState=function(){this.pos=0},n.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},n.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},n.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},n.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},n.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r},n.prototype.encodeNil=function(){this.writeU8(192)},n.prototype.encodeBoolean=function(e){this.writeU8(!1===e?194:195)},n.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},n.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: ".concat(e," bytes in UTF-8"));this.writeU8(219),this.writeU32(e)}},n.prototype.encodeString=function(e){if(e.length>mRe){var i=fX(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),vRe(e,this.bytes,this.pos),this.pos+=i}else i=fX(e),this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),function gRe(n,e,t){for(var r=n.length,i=t,s=0;s<r;){var o=n.charCodeAt(s++);if(4294967168&o){if(4294965248&o){if(o>=55296&&o<=56319&&s<r){var a=n.charCodeAt(s);56320==(64512&a)&&(++s,o=((1023&o)<<10)+(1023&a)+65536)}4294901760&o?(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128):(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128)}else e[i++]=o>>6&31|192;e[i++]=63&o|128}else e[i++]=o}}(e,this.bytes,this.pos),this.pos+=i},n.prototype.encodeObject=function(e,t){var r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)));this.encodeMap(e,t)}},n.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: ".concat(t));this.writeU8(198),this.writeU32(t)}var r=ES(e);this.writeU8a(r)},n.prototype.encodeArray=function(e,t){var r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large array: ".concat(r));this.writeU8(221),this.writeU32(r)}for(var i=0,s=e;i<s.length;i++)this.doEncode(s[i],t+1)},n.prototype.countWithoutUndefined=function(e,t){for(var r=0,i=0,s=t;i<s.length;i++)void 0!==e[s[i]]&&r++;return r},n.prototype.encodeMap=function(e,t){var r=Object.keys(e);this.sortKeys&&r.sort();var i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: ".concat(i));this.writeU8(223),this.writeU32(i)}for(var s=0,o=r;s<o.length;s++){var a=o[s],c=e[a];this.ignoreUndefined&&void 0===c||(this.encodeString(a),this.doEncode(c,t+1))}},n.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: ".concat(t));this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},n.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},n.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},n.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},n.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},n.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},n.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},n.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},n.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},n.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},n.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function fRe(n,e,t){var i=t;n.setUint32(e,t/4294967296),n.setUint32(e+4,i)}(this.view,this.pos,e),this.pos+=8},n.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),dX(this.view,this.pos,e),this.pos+=8}}();var URe=function(){function n(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return n.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},n.prototype.find=function(e,t,r){e:for(var s=0,o=this.caches[r-1];s<o.length;s++){for(var a=o[s],c=a.bytes,u=0;u<r;u++)if(c[u]!==e[t+u])continue e;return a.str}return null},n.prototype.store=function(e,t){var r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)},n.prototype.decode=function(e,t,r){var i=this.find(e,t,r);if(null!=i)return this.hit++,i;this.miss++;var s=pX(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,s),s},n}(),X2=function(n,e){var r,i,s,o,t={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=2&u[0]?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(!(s=(s=t.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){t=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(6===u[0]&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},mX=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}},o_=function(n){return this instanceof o_?(this.v=n,this):new o_(n)},HRe=function(n){var e=typeof n;return"string"===e||"number"===e},Z2=new DataView(new ArrayBuffer(0)),GRe=new Uint8Array(Z2.buffer),eB=function(){try{Z2.getInt8(0)}catch(n){return n.constructor}throw new Error("never reached")}(),_X=new eB("Insufficient data"),qRe=new URe;function Uf(n,e,t,r){Object.defineProperty(n,e,{get:t,set:r,enumerable:!0,configurable:!0})}!function(){function n(e,t,r,i,s,o,a,c){void 0===e&&(e=gX.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=Bf),void 0===i&&(i=Bf),void 0===s&&(s=Bf),void 0===o&&(o=Bf),void 0===a&&(a=Bf),void 0===c&&(c=qRe),this.extensionCodec=e,this.context=t,this.maxStrLength=r,this.maxBinLength=i,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=Z2,this.bytes=GRe,this.headByte=-1,this.stack=[]}n.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},n.prototype.setBuffer=function(e){this.bytes=ES(e),this.view=function PRe(n){if(n instanceof ArrayBuffer)return new DataView(n);var e=ES(n);return new DataView(e.buffer,e.byteOffset,e.byteLength)}(this.bytes),this.pos=0},n.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),r=ES(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}else this.setBuffer(e)},n.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},n.prototype.createExtraByteError=function(e){var r=this.view;return new RangeError("Extra ".concat(r.byteLength-this.pos," of ").concat(r.byteLength," byte(s) found at buffer[").concat(e,"]"))},n.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},n.prototype.decodeMulti=function(e){return X2(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},n.prototype.decodeAsync=function(e){var t,r,i,s;return function(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(f){o(f)}}function c(l){try{u(r.throw(l))}catch(f){o(f)}}function u(l){l.done?s(l.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function(){var o,a,c,u,l,_,y;return X2(this,function(I){switch(I.label){case 0:o=!1,I.label=1;case 1:I.trys.push([1,6,7,12]),t=mX(e),I.label=2;case 2:return[4,t.next()];case 3:if((r=I.sent()).done)return[3,5];if(c=r.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{a=this.doDecodeSync(),o=!0}catch(T){if(!(T instanceof eB))throw T}this.totalPos+=this.pos,I.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return u=I.sent(),i={error:u},[3,12];case 7:return I.trys.push([7,,10,11]),r&&!r.done&&(s=t.return)?[4,s.call(t)]:[3,9];case 8:I.sent(),I.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw _=(l=this).pos,y=l.totalPos,new RangeError("Insufficient data in parsing ".concat(J2(l.headByte)," at ").concat(y," (").concat(_," in the current buffer)"))}})})},n.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},n.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},n.prototype.decodeMultiAsync=function(e,t){return function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(_){r[_]&&(i[_]=function(y){return new Promise(function(I,T){s.push([_,y,I,T])>1||a(_,y)})})}function a(_,y){try{!function c(_){_.value instanceof o_?Promise.resolve(_.value.v).then(u,l):f(s[0][2],_)}(r[_](y))}catch(I){f(s[0][3],I)}}function u(_){a("next",_)}function l(_){a("throw",_)}function f(_,y){_(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function(){var i,s,o,a,c,u,l,f,_;return X2(this,function(y){switch(y.label){case 0:i=t,s=-1,y.label=1;case 1:y.trys.push([1,13,14,19]),o=mX(e),y.label=2;case 2:return[4,o_(o.next())];case 3:if((a=y.sent()).done)return[3,12];if(c=a.value,t&&0===s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(c),i&&(s=this.readArraySize(),i=!1,this.complete()),y.label=4;case 4:y.trys.push([4,9,,10]),y.label=5;case 5:return[4,o_(this.doDecodeSync())];case 6:return[4,y.sent()];case 7:return y.sent(),0==--s?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((u=y.sent())instanceof eB))throw u;return[3,10];case 10:this.totalPos+=this.pos,y.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l=y.sent(),f={error:l},[3,19];case 14:return y.trys.push([14,,17,18]),a&&!a.done&&(_=o.return)?[4,o_(_.call(o))]:[3,16];case 15:y.sent(),y.label=16;case 16:return[3,18];case 17:if(f)throw f.error;return[7];case 18:return[7];case 19:return[2]}})})},n.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(r=e-128)){this.pushMapState(r),this.complete();continue e}t={}}else if(e<160){if(0!=(r=e-144)){this.pushArrayState(r),this.complete();continue e}t=[]}else t=this.decodeUtf8String(i=e-160,0);else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){var i=this.lookU8();t=this.decodeUtf8String(i,1)}else if(218===e)i=this.lookU16(),t=this.decodeUtf8String(i,2);else if(219===e)i=this.lookU32(),t=this.decodeUtf8String(i,4);else if(220===e){if(0!==(r=this.readU16())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(221===e){if(0!==(r=this.readU32())){this.pushArrayState(r),this.complete();continue e}t=[]}else if(222===e){if(0!==(r=this.readU16())){this.pushMapState(r),this.complete();continue e}t={}}else if(223===e){if(0!==(r=this.readU32())){this.pushMapState(r),this.complete();continue e}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e)r=this.lookU16(),t=this.decodeBinary(r,2);else if(198===e)r=this.lookU32(),t=this.decodeBinary(r,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)r=this.lookU8(),t=this.decodeExtension(r,1);else if(200===e)r=this.lookU16(),t=this.decodeExtension(r,2);else{if(201!==e)throw new Qc("Unrecognized type byte: ".concat(J2(e)));r=this.lookU32(),t=this.decodeExtension(r,4)}this.complete();for(var s=this.stack;s.length>0;){var o=s[s.length-1];if(0===o.type){if(o.array[o.position]=t,o.position++,o.position!==o.size)continue e;s.pop(),t=o.array}else{if(1===o.type){if(!HRe(t))throw new Qc("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new Qc("The key __proto__ is not allowed");o.key=t,o.type=2;continue e}if(o.map[o.key]=t,o.readCount++,o.readCount!==o.size){o.key=null,o.type=1;continue e}s.pop(),t=o.map}}return t}},n.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},n.prototype.complete=function(){this.headByte=-1},n.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new Qc("Unrecognized array type byte: ".concat(J2(e)))}},n.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new Qc("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},n.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new Qc("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},n.prototype.decodeUtf8String=function(e,t){var r;if(e>this.maxStrLength)throw new Qc("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw _X;var s,i=this.pos+t;return s=this.stateIsMapKey()&&null!==(r=this.keyDecoder)&&void 0!==r&&r.canBeCached(e)?this.keyDecoder.decode(this.bytes,i,e):e>ERe?function wRe(n,e,t){var r=n.subarray(e,e+t);return IRe.decode(r)}(this.bytes,i,e):pX(this.bytes,i,e),this.pos+=t+e,s},n.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},n.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new Qc("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw _X;var r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i},n.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new Qc("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)},n.prototype.lookU8=function(){return this.view.getUint8(this.pos)},n.prototype.lookU16=function(){return this.view.getUint16(this.pos)},n.prototype.lookU32=function(){return this.view.getUint32(this.pos)},n.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},n.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},n.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},n.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},n.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},n.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},n.prototype.readU64=function(){var e=function pRe(n,e){return 4294967296*n.getUint32(e)+n.getUint32(e+4)}(this.view,this.pos);return this.pos+=8,e},n.prototype.readI64=function(){var e=hX(this.view,this.pos);return this.pos+=8,e},n.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},n.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e}}();class vX{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),c=e.slice(o,a);t.push({__peerData:this._dataCount,n:s,data:c,total:i}),o=a,s++}return this._dataCount++,t}}}const nB=lX.default||lX,bI=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const n=this.getBrowser(),e=this.getVersion();return!!this.supportedBrowsers.includes(n)&&("chrome"===n?e>=this.minChromeVersion:"firefox"===n?e>=this.minFirefoxVersion:"safari"===n&&!this.isIOS&&e>=this.minSafariVersion)}getBrowser(){return nB.browserDetails.browser}getVersion(){return nB.browserDetails.version||0}isUnifiedPlanSupported(){const n=this.getBrowser(),e=nB.browserDetails.version||0;if("chrome"===n&&e<this.minChromeVersion)return!1;if("firefox"===n&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,r=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),r=!0}catch{}finally{t&&t.close()}return r}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"&&["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},nxe=n=>!n||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(n),bX=()=>Math.random().toString(36).slice(2),IX={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},No=new class rxe extends vX{noop(){}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(i){i.target&&t(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer}isSecure(){return"https:"===location.protocol}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=IX,this.browser=bI.getBrowser(),this.browserVersion=bI.getVersion(),this.pack=SJ,this.unpack=AJ,this.supports=function(){const t={browser:bI.isBrowserSupported(),webRTC:bI.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let r;try{let i;r=new RTCPeerConnection(IX),t.audioVideo=!0;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!i.ordered;try{i.binaryType="blob",t.binaryBlob=!bI.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return t}(),this.validateId=nxe,this.randomToken=bX}};var rB,st=new class oxe{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const r=["PeerJS: ",...t];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}},axe=Object.prototype.hasOwnProperty,lo="~";function II(){}function cxe(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function EX(n,e,t,r,i){if("function"!=typeof t)throw new TypeError("The listener must be a function");var s=new cxe(t,r||n,i),o=lo?lo+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function wS(n,e){0==--n._eventsCount?n._events=new II:delete n._events[e]}function Gs(){this._events=new II,this._eventsCount=0}Object.create&&(II.prototype=Object.create(null),(new II).__proto__||(lo=!1)),Gs.prototype.eventNames=function(){var t,r,e=[];if(0===this._eventsCount)return e;for(r in t=this._events)axe.call(t,r)&&e.push(lo?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},Gs.prototype.listeners=function(e){var r=this._events[lo?lo+e:e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},Gs.prototype.listenerCount=function(e){var r=this._events[lo?lo+e:e];return r?r.fn?1:r.length:0},Gs.prototype.emit=function(e,t,r,i,s,o){var a=lo?lo+e:e;if(!this._events[a])return!1;var l,f,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,s),!0;case 6:return c.fn.call(c.context,t,r,i,s,o),!0}for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];c.fn.apply(c.context,l)}else{var y,_=c.length;for(f=0;f<_;f++)switch(c[f].once&&this.removeListener(e,c[f].fn,void 0,!0),u){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,t);break;case 3:c[f].fn.call(c[f].context,t,r);break;case 4:c[f].fn.call(c[f].context,t,r,i);break;default:if(!l)for(y=1,l=new Array(u-1);y<u;y++)l[y-1]=arguments[y];c[f].fn.apply(c[f].context,l)}}return!0},Gs.prototype.on=function(e,t,r){return EX(this,e,t,r,!1)},Gs.prototype.once=function(e,t,r){return EX(this,e,t,r,!0)},Gs.prototype.removeListener=function(e,t,r,i){var s=lo?lo+e:e;if(!this._events[s])return this;if(!t)return wS(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!i||o.once)&&(!r||o.context===r)&&wS(this,s);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==t||i&&!o[a].once||r&&o[a].context!==r)&&c.push(o[a]);c.length?this._events[s]=1===c.length?c[0]:c:wS(this,s)}return this},Gs.prototype.removeAllListeners=function(e){var t;return e?this._events[t=lo?lo+e:e]&&wS(this,t):(this._events=new II,this._eventsCount=0),this},Gs.prototype.off=Gs.prototype.removeListener,Gs.prototype.addListener=Gs.prototype.on,Gs.prefixed=lo,Gs.EventEmitter=Gs,rB=Gs;var jf={};Uf(jf,"ConnectionType",()=>ol),Uf(jf,"PeerErrorType",()=>ai),Uf(jf,"BaseConnectionErrorType",()=>TS),Uf(jf,"DataConnectionErrorType",()=>CS),Uf(jf,"SerializationType",()=>EI),Uf(jf,"SocketEventType",()=>al),Uf(jf,"ServerMessageType",()=>ws);var iB,ol=function(n){return n.Data="data",n.Media="media",n}(ol||{}),ai=function(n){return n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc",n}(ai||{}),TS=function(n){return n.NegotiationFailed="negotiation-failed",n.ConnectionClosed="connection-closed",n}(TS||{}),CS=function(n){return n.NotOpenYet="not-open-yet",n.MessageToBig="message-too-big",n}(CS||{}),EI=function(n){return n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json",n.None="raw",n}(EI||{}),al=function(n){return n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close",n}(al||{}),ws=function(n){return n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE",n}(ws||{});iB=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xfcckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class uxe extends rB.EventEmitter{constructor(e,t,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[],this._baseUrl=(e?"wss://":"ws://")+t+":"+r+i+"peerjs?key="+s}start(e,t){this._id=e,this._socket||!this._disconnected||(this._socket=new WebSocket(`${this._baseUrl}&id=${e}&token=${t}&version=`+iB.version),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),st.log("Server message received:",s)}catch{return void st.log("Invalid server message",i.data)}this.emit(al.Message,s)},this._socket.onclose=i=>{this._disconnected||(st.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(al.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),st.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void st.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:ws.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(al.Error,"Invalid message");if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class wX{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===ol.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const r=this.connection,s=t.createDataChannel(r.label,{ordered:!!e.reliable});r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){st.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;st.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(st.log(`Received ICE candidates for ${t}:`,o.candidate),s.socket.send({type:ws.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":st.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(TS.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":st.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(TS.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":st.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},st.log("Listening for data channel"),e.ondatachannel=o=>{st.log("Received data channel");const a=o.channel;s.getConnection(t,r)._initializeDataChannel(a)},st.log("Listening for remote stream"),e.ontrack=o=>{st.log("Received remote stream");const a=o.streams[0],c=s.getConnection(t,r);c.type===ol.Media&&this._addStreamToMediaConnection(a,c)}}cleanup(){st.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&"closed"!==i.readyState),("closed"!==e.signalingState||r)&&e.close()}_makeOffer(){var e=this;return(0,D.A)(function*(){const t=e.connection.peerConnection,r=e.connection.provider;try{const i=yield t.createOffer(e.connection.options.constraints);st.log("Created offer."),e.connection.options.sdpTransform&&"function"==typeof e.connection.options.sdpTransform&&(i.sdp=e.connection.options.sdpTransform(i.sdp)||i.sdp);try{yield t.setLocalDescription(i),st.log("Set localDescription:",i,`for:${e.connection.peer}`);let s={sdp:i,type:e.connection.type,connectionId:e.connection.connectionId,metadata:e.connection.metadata};if(e.connection.type===ol.Data){const o=e.connection;s={...s,label:o.label,reliable:o.reliable,serialization:o.serialization}}r.socket.send({type:ws.Offer,payload:s,dst:e.connection.peer})}catch(s){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=s&&(r.emitError(ai.WebRTC,s),st.log("Failed to setLocalDescription, ",s))}}catch(i){r.emitError(ai.WebRTC,i),st.log("Failed to createOffer, ",i)}})()}_makeAnswer(){var e=this;return(0,D.A)(function*(){const t=e.connection.peerConnection,r=e.connection.provider;try{const i=yield t.createAnswer();st.log("Created answer."),e.connection.options.sdpTransform&&"function"==typeof e.connection.options.sdpTransform&&(i.sdp=e.connection.options.sdpTransform(i.sdp)||i.sdp);try{yield t.setLocalDescription(i),st.log("Set localDescription:",i,`for:${e.connection.peer}`),r.socket.send({type:ws.Answer,payload:{sdp:i,type:e.connection.type,connectionId:e.connection.connectionId},dst:e.connection.peer})}catch(s){r.emitError(ai.WebRTC,s),st.log("Failed to setLocalDescription, ",s)}}catch(i){r.emitError(ai.WebRTC,i),st.log("Failed to create answer, ",i)}})()}handleSDP(e,t){var r=this;return(0,D.A)(function*(){t=new RTCSessionDescription(t);const i=r.connection.peerConnection,s=r.connection.provider;st.log("Setting remote description",t);const o=r;try{yield i.setRemoteDescription(t),st.log(`Set remoteDescription:${e} for:${r.connection.peer}`),"OFFER"===e&&(yield o._makeAnswer())}catch(a){s.emitError(ai.WebRTC,a),st.log("Failed to setRemoteDescription, ",a)}})()}handleCandidate(e){var t=this;return(0,D.A)(function*(){st.log("handleCandidate:",e);try{yield t.connection.peerConnection.addIceCandidate(e),st.log(`Added ICE candidate for:${t.connection.peer}`)}catch(r){t.connection.provider.emitError(ai.WebRTC,r),st.log("Failed to handleCandidate, ",r)}})()}_addTracksToConnection(e,t){if(st.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return st.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){st.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class TX extends rB.EventEmitter{emitError(e,t){st.error("Error:",t),this.emit("error",new lxe(`${e}`,t))}}class lxe extends Error{constructor(e,t){"string"==typeof t?super(t):(super(),Object.assign(this,t)),this.type=e}}class CX extends TX{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}class DS extends CX{static#e=this.ID_PREFIX="mc_";get type(){return ol.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||DS.ID_PREFIX+No.randomToken(),this._negotiator=new wX(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{st.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{st.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){st.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case ws.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case ws.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:st.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void st.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class dxe{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${t}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",iB.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}retrieveId(){var e=this;return(0,D.A)(function*(){try{const t=yield e._buildRequest("id");if(200!==t.status)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){st.error("Error retrieving ID",t);let r="";throw"/"===e._options.path&&e._options.host!==No.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}})()}listAllPeers(){var e=this;return(0,D.A)(function*(){try{const t=yield e._buildRequest("peers");if(200!==t.status){if(401===t.status){let r="";throw r=e._options.host===No.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw st.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}})()}}class $f extends CX{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return ol.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||$f.ID_PREFIX+bX(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new wX(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{st.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{st.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{st.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e,t=!1){if(this.open)return this._send(e,t);this.emitError(CS.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}handleMessage(e){var t=this;return(0,D.A)(function*(){const r=e.payload;switch(e.type){case ws.Answer:yield t._negotiator.handleSDP(e.type,r.sdp);break;case ws.Candidate:yield t._negotiator.handleCandidate(r.candidate);break;default:st.warn("Unrecognized message type:",e.type,"from peer:",t.peer)}})()}}class sB extends $f{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>$f.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return st.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){this.open&&0!==this._buffer.length&&this._trySend(this._buffer[0])&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){e?.flush?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class oB extends sB{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new vX,this.serialization=EI.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=AJ(e),r=t.__peerData;if(r)return"close"===r.type?void this.close():void this._handleChunk(t);this.emit("data",t)}_handleChunk(e){const t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];const i=function txe(n){let e=0;for(const i of n)e+=i.byteLength;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.byteLength;return t}(r.data);this._handleDataMessage({data:i})}}_send(e,t){const r=SJ(e);if(r instanceof Promise)return this._send_blob(r);!t&&r.byteLength>this.chunker.chunkedMTU?this._sendChunks(r):this._bufferedSend(r)}_send_blob(e){var t=this;return(0,D.A)(function*(){const r=yield e;r.byteLength>t.chunker.chunkedMTU?t._sendChunks(r):t._bufferedSend(r)})()}_sendChunks(e){const t=this.chunker.chunk(e);st.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const r of t)this.send(r,!0)}}class hxe extends sB{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=EI.None}}class fxe extends sB{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),r=t.__peerData;r&&"close"===r.type?this.close():this.emit("data",t)}_send(e,t){const r=this.encoder.encode(this.stringify(e));r.byteLength>=No.chunkedMTU?this.emitError(CS.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=EI.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class AS extends TX{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){let r;super(),this._serializers={raw:hxe,json:fxe,binary:oB,"binary-utf8":oB,default:oB},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:No.CLOUD_HOST,port:No.CLOUD_PORT,path:"/",key:AS.DEFAULT_KEY,token:No.randomToken(),config:No.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==No.CLOUD_HOST?this._options.secure=No.isSecure():this._options.host==No.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&st.setLogFunction(this._options.logFunction),st.logLevel=this._options.debug||0,this._api=new dxe(t),this._socket=this._createServerConnection(),No.supports.audioVideo||No.supports.data?!r||No.validateId(r)?r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(ai.ServerError,i)):this._delayedAbort(ai.InvalidID,`ID "${r}" is invalid`):this._delayedAbort(ai.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new uxe(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(al.Message,t=>{this._handleMessage(t)}),e.on(al.Error,t=>{this._abort(ai.SocketError,t)}),e.on(al.Disconnected,()=>{this.disconnected||(this.emitError(ai.Network,"Lost connection to server."),this.disconnect())}),e.on(al.Close,()=>{this.disconnected||this._abort(ai.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,r=e.payload,i=e.src;switch(t){case ws.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ws.Error:this._abort(ai.ServerError,r.msg);break;case ws.IdTaken:this._abort(ai.UnavailableID,`ID "${this.id}" is taken`);break;case ws.InvalidKey:this._abort(ai.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ws.Leave:st.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case ws.Expire:this.emitError(ai.PeerUnavailable,`Could not connect to peer ${i}`);break;case ws.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),st.warn(`Offer received for existing Connection ID:${s}`)),r.type===ol.Media){const c=new DS(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=c,this._addConnection(i,o),this.emit("call",c)}else{if(r.type!==ol.Data)return void st.warn(`Received malformed connection type:${r.type}`);{const c=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=c,this._addConnection(i,o),this.emit("connection",c)}}const a=this._getMessages(s);for(const c of a)o.handleMessage(c);break}default:{if(!r)return void st.warn(`You received a malformed message from ${i} of type ${t}`);const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):st.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected)return st.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(ai.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected)return st.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(ai.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!t)return void st.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const i=new DS(e,this,{...r,_stream:t});return this._addConnection(e,i),i}_addConnection(e,t){st.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===t)return i;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){st.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(st.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const r of t)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;st.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)st.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);st.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(e=(t=>{})){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(ai.ServerError,t))}}var ca={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},AX=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],SX=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],RX=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Mo=typeof window<"u"&&typeof window.document<"u"?window.document:{},Ba="fullscreenEnabled"in Mo&&Object.keys(ca)||AX[0]in Mo&&AX||SX[0]in Mo&&SX||RX[0]in Mo&&RX||[],gxe={requestFullscreen:function(n){return n[Ba[ca.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[Ba[ca.requestFullscreen]]},get exitFullscreen(){return Mo[Ba[ca.exitFullscreen]].bind(Mo)},get fullscreenPseudoClass(){return":"+Ba[ca.fullscreen]},addEventListener:function(n,e,t){return Mo.addEventListener(Ba[ca[n]],e,t)},removeEventListener:function(n,e,t){return Mo.removeEventListener(Ba[ca[n]],e,t)},get fullscreenEnabled(){return!!Mo[Ba[ca.fullscreenEnabled]]},set fullscreenEnabled(n){},get fullscreenElement(){return Mo[Ba[ca.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return Mo[("on"+Ba[ca.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return Mo[("on"+Ba[ca.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return Mo[("on"+Ba[ca.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return Mo[("on"+Ba[ca.fullscreenerror]).toLowerCase()]=n}};const wI=gxe;k(324);var c_=k(156);(0,c_.registerVersion)("firebase","10.14.1","app");class yxe extends tr{constructor(e,t){super()}schedule(e,t=0){return this}}const SS={setInterval(n,e,...t){const{delegate:r}=SS;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=SS;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class xX extends yxe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return SS.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&SS.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ks(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const aB={now:()=>(aB.delegate||Date).now(),delegate:void 0};class TI{constructor(e,t=TI.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}TI.now=aB.now;class NX extends TI{constructor(e,t=TI.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Ixe=new class bxe extends NX{}(class vxe extends xX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),RS=new NX(xX),Exe=RS,xS=new zg("ANGULARFIRE2_VERSION");class MX{constructor(){return((n,e)=>{const t=(0,c_.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(Txe)}}const Txe="app-check";function u_(){}class kX{zone;delegate;constructor(e,t=Ixe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Cxe{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",u_,{},u_,u_)),t.pipe(Zi({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let PX=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new kX(Zone.current)),this.insideAngular=t.run(()=>new kX(Zone.current,RS)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Oe(qt))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ua(n){return function Axe(n){return function(t){return(t=t.lift(new Cxe(n.ngZone))).pipe(Jg(n.outsideAngular),Qh(n.insideAngular))}}(function l_(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var cl=k(574);cl.A.registerVersion("firebase","10.14.1","app-compat");const Nxe=["ngOnDestroy"];class OX{constructor(e){return e}}const NS=new Pe("angularfire2.app.options"),MS=new Pe("angularfire2.app.name");function cB(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=cl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>cl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Pxe("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new OX(o)}const Pxe=(n,...e)=>{},Oxe={provide:OX,useFactory:cB,deps:[NS,qt,[new gu,MS]]};let Fxe=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:NS,useValue:t},{provide:MS,useValue:r}]}}constructor(t){cl.A.registerVersion("angularfire",xS.full,"core"),cl.A.registerVersion("angularfire",xS.full,"app-compat"),cl.A.registerVersion("angular",mfe.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Oe(Cc))};static \u0275mod=Xt({type:n});static \u0275inj=un({providers:[Oxe]})}return n})();function FX(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Lxe(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(LX("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Vxe?" You may need to reload as Firebase is not HMR aware.":""}`),LX("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Vxe=typeof module<"u"&&!!module.hot,LX=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];class Bxe extends q{constructor(e=1/0,t=1/0,r=aB){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function uB(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new zr({next:()=>{r.unsubscribe(),n()}});return Fi(e(...t)).subscribe(r)}function BX(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,function Uxe(n={}){const{connector:e=(()=>new q),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,l=!1,f=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),o=c=void 0,l=f=!1},I=()=>{const T=o;y(),T?.unsubscribe()};return jt((T,A)=>{u++,!f&&!l&&_();const x=c=c??e();A.add(()=>{u--,0===u&&!f&&!l&&(a=uB(I,i))}),x.subscribe(A),!o&&u>0&&(o=new zr({next:N=>x.next(N),error:N=>{f=!0,_(),a=uB(y,t,N),x.error(N)},complete:()=>{l=!0,_(),a=uB(y,r),x.complete()}}),Fi(T).subscribe(o))})(s)}}({connector:()=>new Bxe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function UX(n,e){return Ye(e)?Ii(()=>n,e):Ii(()=>n)}const jX=new Pe("angularfire2.auth.use-emulator"),$X=new Pe("angularfire2.auth.settings"),HX=new Pe("angularfire2.auth.tenant-id"),GX=new Pe("angularfire2.auth.langugage-code"),qX=new Pe("angularfire2.auth.use-device-language"),zX=new Pe("angularfire.auth.persistence"),WX=(n,e,t,r,i,s,o,a)=>FX(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[u,l]of Object.entries(o))c.settings[u]=l;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let kS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,l,f,_,y){const I=new q,T=gt(void 0).pipe(Qh(o.outsideAngular),Ii(()=>s.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,324)))),je(()=>cB(t,s,r)),je(A=>WX(A,s,a,u,l,f,c,_)),BX({bufferSize:1,refCount:!1}));if(VC(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{T.pipe(ud()).subscribe();const A=T.pipe(Ii(B=>B.getRedirectResult().then(ee=>ee,()=>null)),ua,BX({bufferSize:1,refCount:!1})),x=T.pipe(Ii(B=>new sn(ee=>({unsubscribe:s.runOutsideAngular(()=>B.onAuthStateChanged(ie=>ee.next(ie),ie=>ee.error(ie),()=>ee.complete()))})))),N=T.pipe(Ii(B=>new sn(ee=>({unsubscribe:s.runOutsideAngular(()=>B.onIdTokenChanged(ie=>ee.next(ie),ie=>ee.error(ie),()=>ee.complete()))}))));this.authState=A.pipe(UX(x),Jg(o.outsideAngular),Qh(o.insideAngular)),this.user=A.pipe(UX(N),Jg(o.outsideAngular),Qh(o.insideAngular)),this.idToken=this.user.pipe(Ii(B=>B?hr(B.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(Ii(B=>B?hr(B.getIdTokenResult()):gt(null))),this.credential=function VX(...n){const e=A0(n),t=function Q_e(n,e){return"number"==typeof Ik(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Fi(r[0]):rm(t)(hr(r,e)):ta}(A,I,this.authState.pipe(ti(B=>!B))).pipe(je(B=>B?.user?B:null),Jg(o.outsideAngular),Qh(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Nxe.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(l=>{const f=l?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,f),f})})})}))(this,T,s,{spy:{apply:(A,x,N)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&N.then(B=>I.next(B))}}})}static \u0275fac=function(r){return new(r||n)(Oe(NS),Oe(MS,8),Oe(Cc),Oe(qt),Oe(PX),Oe(jX,8),Oe($X,8),Oe(HX,8),Oe(GX,8),Oe(qX,8),Oe(zX,8),Oe(MX,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),$xe=(()=>{class n{constructor(){cl.A.registerVersion("angularfire",xS.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xt({type:n});static \u0275inj=un({providers:[kS]})}return n})();const Hxe=["localVideoStream"],Gxe=["remoteVideoStream"],qxe=["fullScreen"];function zxe(n,e){if(1&n){const t=ki();Se(0,"button",45),_t("click",function(){return Lt(t),Gt(lt().answerCall())}),hn(1,"i",46),at(2," Answer "),De()}}function Wxe(n,e){if(1&n&&(Se(0,"h6",47),hn(1,"i",48),at(2," Call Connected to "),Se(3,"span",49),at(4),De()()),2&n){const t=lt();Fe(4),Fc(" ",t.callerNumber.length?t.callerNumber:t.connectedCallNumber," ")}}function Kxe(n,e){if(1&n){const t=ki();Se(0,"input",50),Ou("ngModelChange",function(i){Lt(t);const s=lt();return nd(s.chatMessage,i)||(s.chatMessage=i),Gt(i)}),_t("keydown.enter",function(){Lt(t);const i=lt();return Gt(i.sendMessage(i.chatMessage,i.authService.userData))}),De()}2&n&&Pu("ngModel",lt().chatMessage)}function Qxe(n,e){if(1&n&&(Se(0,"div",53)(1,"div",54)(2,"span",55),hn(3,"i",56),at(4),De(),Se(5,"span"),at(6),De()()()),2&n){const t=e.$implicit,r=e.index,i=lt(2);xc(t.class),dn("mb-2",r!==i.chatMessages.length-1),Fe(4),bM(" ",t.user," (",t.sentMessage?"You":t.number,") "),Fe(2),Fc(" ",t.text," ")}}function Yxe(n,e){if(1&n&&(Se(0,"div",51),$t(1,Qxe,7,7,"div",52),De()),2&n){const t=lt();Fe(),Mt("ngForOf",t.chatMessages)}}let Jxe=(()=>{class n{constructor(t,r,i,s){this.authService=t,this.afAuth=r,this.router=i,this.sharedService=s,this.showSidebar=!0,this.isCollapsed=!0,this.chatMessage="",this.chatMessages=[],this.callerNumber="",this.callConnected=!1,this.hasFullscreenSupport=!1,this.incomingCall=!1}ngOnInit(){this.initializeFullscreenSupport(),this.generateNumber(),this.checkIncomingCall(),this.loadSounds()}initializeFullscreenSupport(){this.hasFullscreenSupport=wI.fullscreenEnabled,this.hasFullscreenSupport&&wI.addEventListener("fullscreenchange",()=>{this.isFullscreen=!!wI.fullscreenElement})}loadSounds(){this.callingAudio=this.createAudio("./assets/audio/calling.mp3",!0),this.messageAudio=this.createAudio("./assets/audio/message.mp3",!1)}createAudio(t,r){const i=new Audio;return i.src=t,i.load(),r&&i.addEventListener("ended",()=>{i.currentTime=0,i.play()},!1),i}checkIncomingCall(){this.peer.on("connection",t=>{this.handleDataConnection(t)}),this.peer.on("disconnected",()=>{this.hangUpAfterEvent("Peer Disconnected",!1)}),this.peer.on("error",()=>{this.hangUpAfterEvent("Number is Incorrect",!0)}),this.peer.on("call",t=>{this.handleIncomingCall(t)})}handleDataConnection(t){this.receivingDataConnection=t,t.on("data",r=>{this.handleIncomingData(r)}),t.on("close",()=>{this.hangUpAfterEvent("Call Disconnected by User",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Incoming Connection Error",!0)})}handleIncomingData(t){t.class="received-message",t.sentMessage=!1,this.chatMessages.unshift(t),this.messageAudio.play()}handleIncomingCall(t){this.receivingMediaConnection=t,this.incomingCall=!0,this.callingAudio.play()}generateNumber(){this.myNumber=Math.floor(9e4*Math.random())+1e4,this.peer=new AS(this.myNumber.toString(),{secure:!0})}callButton(t){var r=this;return(0,D.A)(function*(){const i=t.toString();r.activeDataConnection=r.peer.connect(i),r.setupDataConnectionHandlers(r.activeDataConnection,t);try{const s=yield r.getUserMediaStream();s&&r.setupMediaConnection(i,s)}catch{r.hangUpAfterEvent("Failed to get local stream",!0)}})()}setupDataConnectionHandlers(t,r){t.on("data",i=>{this.handleIncomingData(i)}),t.on("open",()=>{this.connectedCallNumber=r,this.callConnected=!0}),t.on("close",()=>{this.hangUpAfterEvent("User Call Ended",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Peer Connection Error",!0)})}getUserMediaStream(){return(0,D.A)(function*(){return yield navigator.mediaDevices.getUserMedia({video:!0,audio:!0})})()}setupMediaConnection(t,r){this.myCallStream=r,this.localVideoStream.nativeElement.srcObject=r,this.activeMediaConnection=this.peer.call(t,r),this.setupMediaConnectionHandlers(this.activeMediaConnection)}setupMediaConnectionHandlers(t){t.on("stream",r=>{this.remoteVideoStream.nativeElement.srcObject=r}),t.on("close",()=>{this.hangUpAfterEvent("Active Call Closed",!1)}),t.on("error",()=>{this.hangUpAfterEvent("Active Call Error",!0)})}answerCall(){var t=this;return(0,D.A)(function*(){try{const r=yield t.getUserMediaStream();r&&t.setupAnswerCall(r)}catch{t.hangUpAfterEvent("Failed to get Remote Stream",!0)}})()}setupAnswerCall(t){this.myCallStream=t,this.callerNumber=this.receivingMediaConnection.peer,this.localVideoStream.nativeElement.srcObject=t,this.receivingMediaConnection.answer(t),this.setupMediaConnectionHandlers(this.receivingMediaConnection),this.receivingMediaConnection.on("stream",r=>{this.callingAudio.pause(),this.incomingCall=!1,this.callConnected=!0,this.remoteVideoStream.nativeElement.srcObject=r})}hangUp(){this.closeConnections(),this.stopLocalStream(),this.resetCallState()}closeConnections(){this.activeDataConnection?.close(),this.activeMediaConnection?.close(),this.receivingDataConnection?.close(),this.receivingMediaConnection?.close()}stopLocalStream(){this.myCallStream?.getTracks()?.forEach(t=>t?.stop())}resetCallState(){this.localVideoStream.nativeElement.srcObject=null,this.remoteVideoStream.nativeElement.srcObject=null,this.incomingCall=!1,this.callConnected=!1}sendMessage(t,r){if(t?.length&&r?.displayName?.length){const i=this.createMessage(t,r.displayName);this.chatMessages.unshift(i),this.messageAudio.play(),this.chatMessage="",this.sendMessageToConnections(i)}}createMessage(t,r){return{text:t,user:r,number:this.myNumber,class:"sent-message",sentMessage:!0}}sendMessageToConnections(t){this.callConnected&&(this.activeDataConnection?.send(t),this.receivingDataConnection?.send(t))}hangUpAfterEvent(t,r){setTimeout(()=>{this.hangUp()},500),this.sharedService.showAlert({class:r?"error":"info",title:t,iconClass:"fa-solid fa-phone"})}signOut(){this.hangUp(),setTimeout(()=>{this.authService.SignOut()},1e3)}openFullscreen(){if(this.hasFullscreenSupport){const t=this.fullScreen.nativeElement;this.isFullscreen?wI.exitFullscreen(t):wI.requestFullscreen(t)}else this.sharedService.showAlert({class:"error",title:"Full Screen Not Supported. Please Try Disabling Adblocker or Other Extensions",iconClass:"fa-solid fa-phone"})}static{this.\u0275fac=function(r){return new(r||n)(Ae(Nd),Ae(kS),Ae(so),Ae(U2))}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-dashboard"]],viewQuery:function(r,i){if(1&r&&(Oc(Hxe,7),Oc(Gxe,7),Oc(qxe,7)),2&r){let s;Hn(s=Gn())&&(i.localVideoStream=s.first),Hn(s=Gn())&&(i.remoteVideoStream=s.first),Hn(s=Gn())&&(i.fullScreen=s.first)}},decls:56,vars:11,consts:[["fullScreen",""],["remoteVideoStream",""],["localVideoStream",""],[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex","align-items-center"],[1,"nav-link","text-bg-dark","me-3",3,"click"],[1,"fa","fa-sign-out","me-2"],[1,"img","img-fluid","rounded-circle","me-2",2,"width","2rem",3,"src"],[1,"text-bg-dark"],[1,"container-xl"],[1,"title-number","justify-content-center","align-items-center","col-12","py-3","px-0"],[1,"alert","alert-success","text-align-center","m-0"],[1,"mb-0"],[1,"number"],[1,"main-body","row","d-flex","flex-wrap"],[1,"main","col","col-xl-8","pl-xl-0","pr-xl-3","col-lg-8","pl-lg-0","pr-lg-3","col-12","pb-3","border-end"],[1,"alert","alert-primary","d-flex","align-items-center"],[1,"fa-solid","fa-video","me-2"],[1,"dialer","d-flex"],[1,"input-group","me-2"],[1,"input-group-text"],[1,"fa-solid","fa-mobile-screen"],["type","number","placeholder","Call Number","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"fa-solid","fa-phone","me-1"],["type","button",1,"btn","btn-danger","me-2",3,"click","disabled"],[1,"fa-solid","fa-phone-slash","me-1"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],[1,"videos","mt-3",3,"hidden"],[1,"local-video"],["autoplay","","playsinline","",1,"rounded"],[1,"remote-video"],[1,"actions"],[1,"btn","btn-primary","rounded-circle","me-3",3,"click"],[1,"fa-solid","fa-expand"],[1,"btn","btn-danger","rounded-circle",3,"click"],[1,"fa-solid","fa-phone-slash"],[1,"chat","col","col-xl-4","pl-xl-3","pr-xl-0","col-lg-4","pl-lg-3","pr-lg-0","col-12","pb-3"],[1,"fa-solid","fa-comment-alt","me-2"],["class","alert alert-success",4,"ngIf"],[1,"form-group","mb-2"],["type","text","class","form-control","placeholder","Write Message","required","",3,"ngModel","ngModelChange","keydown.enter",4,"ngIf"],["class","messages form-control",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa-solid","fa-phone-volume","me-1"],[1,"alert","alert-success"],[1,"fa-solid","fa-user-alt","me-2"],[1,"text-danger"],["type","text","placeholder","Write Message","required","",1,"form-control",3,"ngModelChange","keydown.enter","ngModel"],[1,"messages","form-control"],["class","message",3,"mb-2","class",4,"ngFor","ngForOf"],[1,"message"],[1,"message-body"],[1,"user"],[1,"fa-solid","fa-user-alt","me-1"]],template:function(r,i){if(1&r){const s=ki();Se(0,"nav",3)(1,"div",4)(2,"a",5),at(3,"VideoWebRTC"),De(),Se(4,"form",6)(5,"a",7),_t("click",function(){return Lt(s),Gt(i.signOut())}),hn(6,"i",8),at(7," Sign Out "),De(),hn(8,"img",9),Se(9,"span",10),at(10),De()()()(),Se(11,"div",11)(12,"div",12)(13,"div",13)(14,"h4",14)(15,"span",15),at(16),De(),at(17," is your phone number "),De()()(),Se(18,"div",16)(19,"div",17)(20,"h5",18),hn(21,"i",19),at(22," Video "),De(),Se(23,"div",20)(24,"div",21)(25,"div",22),hn(26,"i",23),De(),Se(27,"input",24),Ou("ngModelChange",function(a){return Lt(s),nd(i.callNumber,a)||(i.callNumber=a),Gt(a)}),De()(),Se(28,"button",25),_t("click",function(){return Lt(s),Gt(i.callButton(i.callNumber))}),hn(29,"i",26),at(30," Call "),De(),Se(31,"button",27),_t("click",function(){return Lt(s),Gt(i.hangUp())}),hn(32,"i",28),at(33," Hangup "),De(),$t(34,zxe,3,0,"button",29),De(),Se(35,"div",30,0)(37,"div",31),hn(38,"video",32,1),De(),Se(40,"div",33),hn(41,"video",32,2),De(),Se(43,"div",34)(44,"div",35),_t("click",function(){return Lt(s),Gt(i.openFullscreen())}),hn(45,"i",36),De(),Se(46,"div",37),_t("click",function(){return Lt(s),Gt(i.hangUp())}),hn(47,"i",38),De()()()(),Se(48,"div",39)(49,"h5",18),hn(50,"i",40),at(51," Chat "),De(),$t(52,Wxe,5,1,"h6",41),Se(53,"div",42),$t(54,Kxe,1,1,"input",43),De(),$t(55,Yxe,2,1,"div",44),De()()()}2&r&&(Fe(8),Mt("src",i.authService.userData.photoURL,Qx),Fe(2),Qi(i.authService.userData.displayName),Fe(6),Fc(" ",i.myNumber," "),Fe(11),Pu("ngModel",i.callNumber),Fe(),Mt("disabled",!i.callNumber||i.callConnected||i.callNumber===i.myNumber),Fe(3),Mt("disabled",!i.callConnected),Fe(3),Mt("ngIf",i.incomingCall),Fe(),Mt("hidden",!i.callConnected),Fe(17),Mt("ngIf",i.callConnected),Fe(2),Mt("ngIf",i.callConnected),Fe(),Mt("ngIf",i.chatMessages.length))},dependencies:[ak,LC,nm,Jh,Fk,S0,Xg,Zh,tm,cd],styles:[".nav-link[_ngcontent-%COMP%]{cursor:pointer}.user-logo[_ngcontent-%COMP%]{display:flex;color:var(--bs-white);align-items:center}.user-logo[_ngcontent-%COMP%]   img.img[_ngcontent-%COMP%]{width:40px;height:40px}.title-number[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--bs-danger);text-decoration:underline}.messages[_ngcontent-%COMP%]{overflow-y:auto;padding:.5rem}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;width:100%}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:3px 10px;border-radius:6px;background:#d4e9ff;border:1px solid #027bfe}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-weight:500;color:var(--bs-blue)}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]{justify-content:flex-end;text-align:right}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{background:#ffe6e8;border:1px solid #ed858c}.messages[_ngcontent-%COMP%]   .message.received-message[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{color:var(--bs-red)}.dialer[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{width:50%}.videos[_ngcontent-%COMP%]{position:relative}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.55rem;display:flex}.videos[_ngcontent-%COMP%]   .local-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;border:2px solid var(--bs-green)}.videos[_ngcontent-%COMP%]   .remote-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;width:20%;max-height:20%;border:2px solid var(--bs-yellow);right:2rem;bottom:2rem}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{position:absolute;bottom:25px;display:flex;align-items:center;justify-content:center;width:100%}.videos[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:38px;height:38px;display:flex;align-items:center;justify-content:center}@media (max-width: 1023px){.main[_ngcontent-%COMP%]{border-right:0!important}}"]})}}return n})(),Xxe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.resetPasswordForm={email:""}}static{this.\u0275fac=function(r){return new(r||n)(Ae(Nd))}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-forgot-password"]],decls:23,vars:3,consts:[["userResetPasswordForm","ngForm"],["email","ngModel"],["name","userResetPasswordForm","novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],[1,"text-center"],[1,"form-group"],["type","text","placeholder","Email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],[1,"validation-message"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"]],template:function(r,i){if(1&r){const s=ki();Se(0,"form",2,0)(2,"h4",3),hn(3,"i",4),at(4," VideoWebRTC "),De(),Se(5,"div",5)(6,"h5"),at(7,"Reset Password"),De(),Se(8,"p",6),at(9,"Please enter your email address to "),hn(10,"br"),at(11," request a password reset"),De(),Se(12,"div",7)(13,"input",8,1),Ou("ngModelChange",function(a){return Lt(s),nd(i.resetPasswordForm.email,a)||(i.resetPasswordForm.email=a),Gt(a)}),_t("ngModelChange",function(){Lt(s);const a=Or(14);return Gt(i.authService.getValidationMessage(a))}),De(),Se(15,"div",9),at(16),De()(),Se(17,"div",7)(18,"button",10),_t("click",function(){return Lt(s),Gt(i.authService.forgotPassword(i.resetPasswordForm.email))}),at(19," Reset Password "),De()(),Se(20,"div",11)(21,"span",12),at(22,"Go Back to ? Sign In"),De()()()()}if(2&r){const s=Or(1),o=Or(14);Fe(13),Pu("ngModel",i.resetPasswordForm.email),Fe(3),Qi(null==o||null==o.errors?null:o.errors.validationMessage),Fe(2),Mt("disabled",s.invalid)}},dependencies:[nf,nm,Jh,S0,Xg,Zh,k0,tm,cd]})}}return n})();function Zxe(n,e){if(1&n&&(Se(0,"div",5)(1,"p",10),at(2,"We have sent a confirmation email to "),Se(3,"strong"),at(4),De(),at(5,"."),De(),Se(6,"p",10),at(7,"Please check your email and click on the link to verfiy your email address."),De()()),2&n){const t=e.ngIf;Fe(4),Qi(t.email)}}const eNe=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:tRe},{path:"register-user",component:nRe},{path:"dashboard",component:Jxe,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!!this.authService.isLoggedIn||(this.router.navigate(["sign-in"],{state:{redirect:this.router.url}}),!1)}static{this.\u0275fac=function(r){return new(r||n)(Oe(Nd),Oe(so))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()]},{path:"forgot-password",component:Xxe},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Ae(Nd))}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-verify-email"]],decls:15,vars:2,consts:[["novalidate","",1,"d-flex","justify-content-center","align-items-center","flex-column","login-form"],[1,"login-logo","mb-2"],[1,"fas","fa-video","me-2"],[1,"login-block"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-redo-alt","me-1"],[1,"form-group","text-center","mb-0"],["routerLink","/sign-in",1,"link"],[1,"text-center"]],template:function(r,i){1&r&&(Se(0,"form",0)(1,"h4",1),hn(2,"i",2),at(3," VideoWebRTC "),De(),Se(4,"div",3)(5,"h5"),at(6,"Thank You for Registering"),De(),$t(7,Zxe,8,1,"div",4),Se(8,"div",5)(9,"button",6),_t("click",function(){return i.authService.sendVerificationMail(i.authService.userData)}),hn(10,"i",7),at(11," Resend Verification Email "),De()(),Se(12,"div",8)(13,"span",9),at(14,"Go Back to ? Sign In"),De()()()()),2&r&&(Fe(7),Mt("ngIf",i.authService.userData),Fe(2),Mt("disabled",!i.authService.userData))},dependencies:[LC,nf,nm,Xg,cd]})}}return n})()}];let tNe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({imports:[u5.forRoot(eNe),u5]})}}return n})();const sNe=["addListener","removeListener"],oNe=["addEventListener","removeEventListener"],aNe=["on","off"];function Ts(n,e,t,r){if(Ye(t)&&(r=t,t=void 0),r)return Ts(n,e,t).pipe(Ek(r));const[i,s]=function lNe(n){return Ye(n.addEventListener)&&Ye(n.removeEventListener)}(n)?oNe.map(o=>a=>n[o](e,a,t)):function cNe(n){return Ye(n.addListener)&&Ye(n.removeListener)}(n)?sNe.map(KX(n,e)):function uNe(n){return Ye(n.on)&&Ye(n.off)}(n)?aNe.map(KX(n,e)):[];if(!i&&bk(n))return Ji(o=>Ts(o,e,t))(Fi(n));if(!i)throw new TypeError("Invalid event target");return new sn(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function KX(n,e){return t=>r=>n[t](e,r)}const{isArray:hNe}=Array;function YX(n){return 1===n.length&&hNe(n[0])?n[0]:n}function lB(...n){const e=$C(n),t=YX(n);return t.length?new sn(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let o=0;!r.closed&&o<t.length;o++)Fi(t[o]).subscribe(bt(r,a=>{if(i[o].push(a),i.every(c=>c.length)){const c=i.map(u=>u.shift());r.next(e?e(...c):c),i.some((u,l)=>!u.length&&s[l])&&r.complete()}},()=>{s[o]=!0,!i[o].length&&r.complete()}));return()=>{i=s=null}}):ta}function dB(...n){const e=$C(n);return jt((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Fi(n[c]).subscribe(bt(r,u=>{s[c]=u,!a&&!o[c]&&(o[c]=!0,(a=o.every(yo))&&(o=null))},fi));t.subscribe(bt(r,c=>{if(a){const u=[c,...s];r.next(e?e(...u):u)}}))})}function _Ne(n,e){return n===e}Math,Math,Math;const mZ=["*"],JMe=["dialog"];function Pke(n,e){if(1&n&&(Se(0,"strong",3),at(1),De()),2&n){const t=lt();Fe(),Qi(t.header)}}function Oke(n,e){}function Fke(n,e){if(1&n){const t=ki();Se(0,"div",1),$t(1,Oke,0,0,"ng-template",4),Se(2,"button",5),_t("click",function(){return Lt(t),Gt(lt().hide())}),De()()}if(2&n){const t=lt(),r=Or(1);Fe(),Mt("ngTemplateOutlet",t.contentHeaderTpl||r)}}const yZ={animation:!0,transitionTimerDelayMs:5};let NI=(()=>{class n{constructor(){this.animation=yZ.animation}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function g_(n){return"string"==typeof n}function zf(n){return null!=n}function m_(n){return(n||document.body).getBoundingClientRect()}const zke=()=>{},{transitionTimerDelayMs:Wke}=yZ,MI=new Map,Oo=(n,e,t,r)=>{let i=r.context||{};const s=MI.get(e);if(s)switch(r.runningTransition){case"continue":return ta;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),MI.delete(e)}const o=t(e,r.animation,i)||zke;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),gt(void 0).pipe(function qke(n){return e=>new sn(t=>e.subscribe({next:o=>n.run(()=>t.next(o)),error:o=>n.run(()=>t.error(o)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new q,c=new q,u=a.pipe(function pNe(...n){return e=>P0(e,gt(...n))}(!0));MI.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const l=function $ke(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const f=Ts(e,"transitionend").pipe(ms(u),ti(({target:y})=>y===e));(function JX(...n){return 1===(n=YX(n)).length?Fi(n[0]):new sn(function fNe(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push(Fi(n[r]).subscribe(bt(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))})(function QX(n=0,e,t=Exe){let r=-1;return null!=e&&(sW(e)?t=e:r=e),new sn(i=>{let s=function dNe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(l+Wke).pipe(ms(u)),f,c).pipe(ms(u)).subscribe(()=>{MI.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let CZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),DZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),RZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),xZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})();var sr=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(sr||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const LZ=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function VZ(n){const e=Array.from(n.querySelectorAll(LZ)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let eee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),nee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),YPe=(()=>{class n{constructor(){this._ngbConfig=j(NI),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class Jf{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let JPe=(()=>{class n{constructor(){this._document=j(Oi)}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:o}=i;if(t>0){const a=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${a+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=o),i.overflow=s}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XPe=(()=>{class n{constructor(){this._nativeElement=j($n).nativeElement,this._zone=j(qt)}ngOnInit(){this._zone.onStable.asObservable().pipe(Xi(1)).subscribe(()=>{Oo(this._zone,this._nativeElement,(t,r)=>{r&&m_(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Oo(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,i){2&r&&(xc("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),dn("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Pa],decls:0,vars:0,template:function(r,i){},encapsulation:2})}}return n})();class ree{update(e){}close(e){}dismiss(e){}}const ZPe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],eOe=["animation","backdropClass"];class tOe{_applyWindowOptions(e,t){ZPe.forEach(r=>{zf(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){eOe.forEach(r=>{zf(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ms(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ms(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new q,this._dismissed=new q,this._hidden=new q,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function vZ(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():gt(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lB(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var OB=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(OB||{});let nOe=(()=>{class n{constructor(){this._document=j(Oi),this._elRef=j($n),this._zone=j(qt),this._closed$=new q,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new vt,this.shown=new q,this.hidden=new q}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":g_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Xi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=lB(Oo(this._zone,t,()=>t.classList.remove("show"),r),Oo(this._zone,this._dialogEl.nativeElement,()=>{},r));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};lB(Oo(this._zone,this._elRef.nativeElement,(s,o)=>{o&&m_(s),s.classList.add("show")},t),Oo(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ts(t,"keydown").pipe(ms(this._closed$),ti(i=>i.which===sr.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(OB.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ts(this._dialogEl.nativeElement,"mousedown").pipe(ms(this._closed$),Zi(()=>r=!1),Ii(()=>Ts(t,"mouseup").pipe(ms(this._closed$),Xi(1))),ti(({target:i})=>t===i)).subscribe(()=>{r=!0}),Ts(t,"click").pipe(ms(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(OB.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=VZ(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Oo(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(r,i){if(1&r&&Oc(JMe,7),2&r){let s;Hn(s=Gn())&&(i._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,i){2&r&&(Yn("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),xc("modal d-block"+(i.windowClass?" "+i.windowClass:"")),dn("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Pa],ngContentSelectors:mZ,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,i){1&r&&(_M(),Se(0,"div",1,0)(2,"div",2),yM(3),De()()),2&r&&xc("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return n})(),rOe=(()=>{class n{constructor(){this._applicationRef=j(Fu),this._injector=j(Pr),this._environmentInjector=j(Si),this._document=j(Oi),this._scrollBar=j(JPe),this._activeWindowCmptHasChanged=new q,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new vt;const t=j(qt);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const r=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=Ts(e,"focusin").pipe(ms(t),je(s=>s.target));Ts(e,"keydown").pipe(ms(t),ti(s=>s.which===sr.Tab),dB(i)).subscribe(([s,o])=>{const[a,c]=VZ(e);(o===a||o===e)&&s.shiftKey&&(c.focus(),s.preventDefault()),o===c&&!s.shiftKey&&(a.focus(),s.preventDefault())}),r&&Ts(e,"click").pipe(ms(t),dB(i),je(s=>s[1])).subscribe(s=>s.focus())})})(t,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const s=i.container instanceof HTMLElement?i.container:zf(i.container)?this._document.querySelector(i.container):this._document.body;if(!s)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const o=new ree,a=(t=i.injector||t).get(Si,null)||this._environmentInjector,c=this._getContentRef(t,a,r,o,i);let u=!1!==i.backdrop?this._attachBackdrop(s):void 0,l=this._attachWindowComponent(s,c.nodes),f=new tOe(l,c,u,i.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(l),f.hidden.pipe(Xi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),o.close=_=>{f.close(_)},o.dismiss=_=>{f.dismiss(_)},o.update=_=>{f.update(_)},f.update(i),1===this._modalRefs.length&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),l.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=WM(XPe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=WM(nOe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,r,i,s,o){return i?i instanceof Jr?this._createFromTemplateRef(i,s):g_(i)?this._createFromString(i):this._createFromComponent(t,r,i,s,o):new Jf([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(o){r.close(o)},dismiss(o){r.dismiss(o)}});return this._applicationRef.attachView(s),new Jf([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Jf([[r]])}_createFromComponent(t,r,i,s,o){const c=WM(i,{environmentInjector:r,elementInjector:Pr.create({providers:[{provide:ree,useValue:s}],parent:t})}),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Jf([[u]],c.hostView,c)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iOe=(()=>{class n{constructor(){this._injector=j(Pr),this._modalStack=j(rOe),this._config=j(YPe)}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({providers:[iOe]})}}return n})(),aee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),gee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),mee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),_ee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),yee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),vee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),bee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),yOe=(()=>{class n{constructor(){this._ngbConfig=j(NI),this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const vOe=(n,e)=>{const{classList:t}=n;if(e)return t.add("fade"),m_(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},bOe=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let IOe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ge({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0})}}return n})(),EOe=(()=>{class n{constructor(t){this.ariaLive=t,this._config=j(yOe),this._zone=j(qt),this._element=j($n),this.animation=this._config.animation,this.delay=this._config.delay,this.autohide=this._config.autohide,this.contentHeaderTpl=null,this.shown=new vt,this.hidden=new vt,this.ariaLive??=this._config.ariaLive}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(Xi(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=Oo(this._zone,this._element.nativeElement,bOe,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=Oo(this._zone,this._element.nativeElement,vOe,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}static{this.\u0275fac=function(r){return new(r||n)(tc("aria-live"))}}static{this.\u0275cmp=Vr({type:n,selectors:[["ngb-toast"]],contentQueries:function(r,i,s){if(1&r&&yi(s,IOe,7,Jr),2&r){let o;Hn(o=Gn())&&(i.contentHeaderTpl=o.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(r,i){2&r&&(Yn("aria-live",i.ariaLive),dn("fade",i.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[_i,Pa],ngContentSelectors:mZ,decls:5,vars:1,consts:()=>{let t;return t=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[1,"toast-header"],[1,"toast-body"],[1,"me-auto"],[3,"ngTemplateOutlet"],["type","button","aria-label",t,1,"btn-close",3,"click"]]},template:function(r,i){1&r&&(_M(),$t(0,Pke,2,1,"ng-template",null,0,sc)(2,Fke,3,1,"div",1),Se(3,"div",2),yM(4),De()),2&r&&(Fe(2),Mi(2,i.contentHeaderTpl||i.header?2:-1))},dependencies:[Yg],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2})}}return n})(),VB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),Iee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})();new Pe("live announcer delay",{providedIn:"root",factory:()=>100});let Eee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})(),wee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({})}}return n})();const TOe=[CZ,DZ,RZ,xZ,eee,nee,iee,aee,wee,gee,mee,_ee,yee,vee,bee,VB,Iee,Eee];let COe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({imports:[TOe,CZ,DZ,RZ,xZ,eee,nee,iee,aee,wee,gee,mee,_ee,yee,vee,bee,VB,Iee,Eee]})}}return n})();function DOe(n,e){if(1&n&&(Se(0,"div",10),hn(1,"i"),De()),2&n){const t=lt().$implicit;Fe(),xc(null==t?null:t.iconClass)}}function AOe(n,e){if(1&n&&(Se(0,"div",11),at(1),De()),2&n){const t=lt().$implicit;Fe(),Fc(" ",t.body," ")}}function SOe(n,e){if(1&n){const t=ki();Se(0,"button",14),_t("click",function(){const i=Lt(t).$implicit,s=lt(2).$implicit;return Gt(null==i?null:i.handler(s))}),hn(1,"i"),at(2),De()}if(2&n){const t=e.$implicit;xc(null!=t&&t.class?null==t?null:t.class:"btn-secondary"),Mt("disabled",null==t?null:t.disabled),Fe(),xc(null==t?null:t.icon),Fe(),Fc(" ",null==t?null:t.text," ")}}function ROe(n,e){if(1&n&&(Se(0,"div",12),$t(1,SOe,3,6,"button",13),De()),2&n){const t=lt().$implicit;Fe(),Mt("ngForOf",t.buttons)}}function xOe(n,e){if(1&n){const t=ki();Se(0,"ngb-toast",1),_t("hidden",function(){const i=Lt(t).$implicit;return Gt(lt().sharedService.hideAlert(i))}),Se(1,"div",2)(2,"div",3),$t(3,DOe,2,2,"div",4),Se(4,"div",5),at(5),De(),Se(6,"div",6),_t("click",function(){const i=Lt(t).$implicit;return Gt(lt().sharedService.hideAlert(i))}),hn(7,"i",7),De()(),$t(8,AOe,2,1,"div",8),De(),$t(9,ROe,2,1,"div",9),De()}if(2&n){const t=e.$implicit;xc(null==t?null:t.class),Mt("autohide",!0)("delay",7e3),Fe(3),Mt("ngIf",null==t?null:t.iconClass),Fe(2),Qi(t.title),Fe(3),Mt("ngIf",t.body),Fe(),Mt("ngIf",null==t||null==t.buttons?null:t.buttons.length)}}let NOe=(()=>{class n{constructor(t){this.sharedService=t}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||n)(Ae(U2))}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-global-toast"]],hostAttrs:[1,"toast-container","position-fixed","top-0","end-0","p-4",2,"z-index","9999"],decls:1,vars:1,consts:[[3,"class","autohide","delay","hidden",4,"ngFor","ngForOf"],[3,"hidden","autohide","delay"],[1,"row","content"],[1,"row","title"],["class","row icon",4,"ngIf"],[1,"row","text"],[1,"row","close",3,"click"],[1,"fa-solid","fa-xmark"],["class","row body",4,"ngIf"],["class","row actions",4,"ngIf"],[1,"row","icon"],[1,"row","body"],[1,"row","actions"],["class","row btn btn-sm",3,"class","disabled","click",4,"ngFor","ngForOf"],[1,"row","btn","btn-sm",3,"click","disabled"]],template:function(r,i){1&r&&$t(0,xOe,10,8,"ngb-toast",0),2&r&&Mt("ngForOf",i.sharedService.toasts)},dependencies:[ak,LC,EOe]})}}return n})(),MOe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Vr({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&hn(0,"router-outlet")(1,"app-global-toast")},dependencies:[aP,NOe]})}}return n})();function BB(){return jt((n,e)=>{let t,r=!1;n.subscribe(bt(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Xf,Aee,Tee=k(779),Xc=k(398),Vn=k(401),Cee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dee={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(M,R,F){F||(F=0);var U=Array(16);if("string"==typeof R)for(var H=0;16>H;++H)U[H]=R.charCodeAt(F++)|R.charCodeAt(F++)<<8|R.charCodeAt(F++)<<16|R.charCodeAt(F++)<<24;else for(H=0;16>H;++H)U[H]=R[F++]|R[F++]<<8|R[F++]<<16|R[F++]<<24;var X=M.g[3],L=(R=M.g[0])+(X^(F=M.g[1])&((H=M.g[2])^X))+U[0]+3614090360&4294967295;L=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=(F=(H=(X=(R=F+(L<<7&4294967295|L>>>25))+((L=X+(H^R&(F^H))+U[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=H+(F^X&(R^F))+U[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^H&(X^R))+U[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=R+(X^F&(H^X))+U[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=X+(H^R&(F^H))+U[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=H+(F^X&(R^F))+U[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^H&(X^R))+U[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=R+(X^F&(H^X))+U[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=X+(H^R&(F^H))+U[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=H+(F^X&(R^F))+U[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^H&(X^R))+U[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=R+(X^F&(H^X))+U[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=X+(H^R&(F^H))+U[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=H+(F^X&(R^F))+U[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^H&(X^R))+U[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=R+(H^X&(F^H))+U[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=X+(F^H&(R^F))+U[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=H+(R^F&(X^R))+U[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=F+(X^R&(H^X))+U[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=R+(H^X&(F^H))+U[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=X+(F^H&(R^F))+U[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=H+(R^F&(X^R))+U[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=F+(X^R&(H^X))+U[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=R+(H^X&(F^H))+U[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=X+(F^H&(R^F))+U[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=H+(R^F&(X^R))+U[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=F+(X^R&(H^X))+U[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=R+(H^X&(F^H))+U[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=X+(F^H&(R^F))+U[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=H+(R^F&(X^R))+U[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=F+(X^R&(H^X))+U[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=R+(F^H^X)+U[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^F^H)+U[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=H+(X^R^F)+U[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=F+(H^X^R)+U[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^H^X)+U[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^F^H)+U[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=H+(X^R^F)+U[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=F+(H^X^R)+U[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^H^X)+U[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^F^H)+U[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=H+(X^R^F)+U[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=F+(H^X^R)+U[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^H^X)+U[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=X+(R^F^H)+U[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=H+(X^R^F)+U[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=F+(H^X^R)+U[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=R+(H^(F|~X))+U[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=X+(F^(R|~H))+U[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=H+(R^(X|~F))+U[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=F+(X^(H|~R))+U[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=R+(H^(F|~X))+U[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=X+(F^(R|~H))+U[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=H+(R^(X|~F))+U[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=F+(X^(H|~R))+U[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=R+(H^(F|~X))+U[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=X+(F^(R|~H))+U[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=H+(R^(X|~F))+U[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=F+(X^(H|~R))+U[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((X=(R=F+((L=R+(H^(F|~X))+U[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=X+(F^(R|~H))+U[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((H=X+((L=H+(R^(X|~F))+U[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~R))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(H+(L<<21&4294967295|L>>>11))&4294967295,M.g[2]=M.g[2]+H&4294967295,M.g[3]=M.g[3]+X&4294967295}function o(M,R){this.h=R;for(var F=[],U=!0,H=M.length-1;0<=H;H--){var X=0|M[H];U&&X==R||(F[H]=X,U=!1)}this.g=F}(function e(M,R){function F(){}F.prototype=R.prototype,M.D=R.prototype,M.prototype=new F,M.prototype.constructor=M,M.C=function(U,H,X){for(var L=Array(arguments.length-2),Rs=2;Rs<arguments.length;Rs++)L[Rs-2]=arguments[Rs];return R.prototype[H].apply(U,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(M,R){void 0===R&&(R=M.length);for(var F=R-this.blockSize,U=this.B,H=this.h,X=0;X<R;){if(0==H)for(;X<=F;)i(this,M,X),X+=this.blockSize;if("string"==typeof M){for(;X<R;)if(U[H++]=M.charCodeAt(X++),H==this.blockSize){i(this,U),H=0;break}}else for(;X<R;)if(U[H++]=M[X++],H==this.blockSize){i(this,U),H=0;break}}this.h=H,this.o+=R},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var F=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=255&F,F/=256;for(this.u(M),M=Array(16),R=F=0;4>R;++R)for(var U=0;32>U;U+=8)M[F++]=this.g[R]>>>U&255;return M};var a={};function c(M){return-128<=M&&128>M?function s(M,R){var F=a;return Object.prototype.hasOwnProperty.call(F,M)?F[M]:F[M]=R(M)}(M,function(R){return new o([0|R],0>R?-1:0)}):new o([0|M],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return f;if(0>M)return A(u(-M));for(var R=[],F=1,U=0;M>=F;U++)R[U]=M/F|0,F*=4294967296;return new o(R,0)}var f=c(0),_=c(1),y=c(16777216);function I(M){if(0!=M.h)return!1;for(var R=0;R<M.g.length;R++)if(0!=M.g[R])return!1;return!0}function T(M){return-1==M.h}function A(M){for(var R=M.g.length,F=[],U=0;U<R;U++)F[U]=~M.g[U];return new o(F,~M.h).add(_)}function x(M,R){return M.add(A(R))}function N(M,R){for(;(65535&M[R])!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function B(M,R){this.g=M,this.h=R}function ee(M,R){if(I(R))throw Error("division by zero");if(I(M))return new B(f,f);if(T(M))return R=ee(A(M),R),new B(A(R.g),A(R.h));if(T(R))return R=ee(M,A(R)),new B(A(R.g),R.h);if(30<M.g.length){if(T(M)||T(R))throw Error("slowDivide_ only works with positive integers.");for(var F=_,U=R;0>=U.l(M);)F=ie(F),U=ie(U);var H=de(F,1),X=de(U,1);for(U=de(U,2),F=de(F,2);!I(U);){var L=X.add(U);0>=L.l(M)&&(H=H.add(F),X=L),U=de(U,1),F=de(F,1)}return R=x(M,H.j(R)),new B(H,R)}for(H=f;0<=M.l(R);){for(F=Math.max(1,Math.floor(M.m()/R.m())),U=48>=(U=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,U-48),L=(X=u(F)).j(R);T(L)||0<L.l(M);)L=(X=u(F-=U)).j(R);I(X)&&(X=_),H=H.add(X),M=x(M,L)}return new B(H,M)}function ie(M){for(var R=M.g.length+1,F=[],U=0;U<R;U++)F[U]=M.i(U)<<1|M.i(U-1)>>>31;return new o(F,M.h)}function de(M,R){var F=R>>5;R%=32;for(var U=M.g.length-F,H=[],X=0;X<U;X++)H[X]=0<R?M.i(X+F)>>>R|M.i(X+F+1)<<32-R:M.i(X+F);return new o(H,M.h)}(n=o.prototype).m=function(){if(T(this))return-A(this).m();for(var M=0,R=1,F=0;F<this.g.length;F++){var U=this.i(F);M+=(0<=U?U:4294967296+U)*R,R*=4294967296}return M},n.toString=function(M){if(2>(M=M||10)||36<M)throw Error("radix out of range: "+M);if(I(this))return"0";if(T(this))return"-"+A(this).toString(M);for(var R=u(Math.pow(M,6)),F=this,U="";;){var H=ee(F,R).g,X=((0<(F=x(F,H.j(R))).g.length?F.g[0]:F.h)>>>0).toString(M);if(I(F=H))return X+U;for(;6>X.length;)X="0"+X;U=X+U}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h},n.l=function(M){return T(M=x(this,M))?-1:I(M)?0:1},n.abs=function(){return T(this)?A(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),F=[],U=0,H=0;H<=R;H++){var X=U+(65535&this.i(H))+(65535&M.i(H)),L=(X>>>16)+(this.i(H)>>>16)+(M.i(H)>>>16);U=L>>>16,F[H]=(L&=65535)<<16|(X&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(M){if(I(this)||I(M))return f;if(T(this))return T(M)?A(this).j(A(M)):A(A(this).j(M));if(T(M))return A(this.j(A(M)));if(0>this.l(y)&&0>M.l(y))return u(this.m()*M.m());for(var R=this.g.length+M.g.length,F=[],U=0;U<2*R;U++)F[U]=0;for(U=0;U<this.g.length;U++)for(var H=0;H<M.g.length;H++){var X=this.i(U)>>>16,L=65535&this.i(U),Rs=M.i(H)>>>16,ma=65535&M.i(H);F[2*U+2*H]+=L*ma,N(F,2*U+2*H),F[2*U+2*H+1]+=X*ma,N(F,2*U+2*H+1),F[2*U+2*H+1]+=L*Rs,N(F,2*U+2*H+1),F[2*U+2*H+2]+=X*Rs,N(F,2*U+2*H+2)}for(U=0;U<R;U++)F[U]=F[2*U+1]<<16|F[2*U];for(U=R;U<2*R;U++)F[U]=0;return new o(F,0)},n.A=function(M){return ee(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),F=[],U=0;U<R;U++)F[U]=this.i(U)&M.i(U);return new o(F,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),F=[],U=0;U<R;U++)F[U]=this.i(U)|M.i(U);return new o(F,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),F=[],U=0;U<R;U++)F[U]=this.i(U)^M.i(U);return new o(F,this.h^M.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Aee=Dee.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=function l(M,R){if(0==M.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==M.charAt(0))return A(l(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=u(Math.pow(R,8)),U=f,H=0;H<M.length;H+=8){var X=Math.min(8,M.length-H),L=parseInt(M.substring(H,H+X),R);8>X?(X=u(Math.pow(R,X)),U=U.j(X).add(u(L))):U=(U=U.j(F)).add(u(L))}return U},Xf=Dee.Integer=o}).apply(typeof Cee<"u"?Cee:typeof self<"u"?self:typeof window<"u"?window:{});var See,FI,Ree,JS,UB,xee,Nee,Mee,YS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dl={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,E){return p==Array.prototype||p==Object.prototype||(p[v]=E.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof YS&&YS];for(var v=0;v<p.length;++v){var E=p[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(p,v){if(v)e:{var E=r;p=p.split(".");for(var S=0;S<p.length-1;S++){var Y=p[S];if(!(Y in E))break e;E=E[Y]}(v=v(S=E[p=p[p.length-1]]))!=S&&null!=v&&e(E,p,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(p){return p||function(){return function s(p,v){p instanceof String&&(p+="");var E=0,S=!1,Y={next:function(){if(!S&&E<p.length){var le=E++;return{value:v(le,p[le]),done:!1}}return S=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}(this,function(v,E){return E})}});var o=o||{},a=this||self;function c(p){var v=typeof p;return"array"==(v="object"!=v?v:p?Array.isArray(p)?"array":v:"null")||"object"==v&&"number"==typeof p.length}function u(p){var v=typeof p;return"object"==v&&null!=p||"function"==v}function l(p,v,E){return p.call.apply(p.bind,arguments)}function f(p,v,E){if(!p)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,S),p.apply(v,Y)}}return function(){return p.apply(v,arguments)}}function _(p,v,E){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?l:f).apply(null,arguments)}function y(p,v){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),p.apply(this,S)}}function I(p,v){function E(){}E.prototype=v.prototype,p.aa=v.prototype,p.prototype=new E,p.prototype.constructor=p,p.Qb=function(S,Y,le){for(var qe=Array(arguments.length-2),ar=2;ar<arguments.length;ar++)qe[ar-2]=arguments[ar];return v.prototype[Y].apply(S,qe)}}function T(p){const v=p.length;if(0<v){const E=Array(v);for(let S=0;S<v;S++)E[S]=p[S];return E}return[]}function A(p,v){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(c(S)){const Y=p.length||0,le=S.length||0;p.length=Y+le;for(let qe=0;qe<le;qe++)p[Y+qe]=S[qe]}else p.push(S)}}function N(p){return/^[\s\xa0]*$/.test(p)}function B(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function ee(p){return ee[" "](p),p}ee[" "]=function(){};var ie=!(-1==B().indexOf("Gecko")||-1!=B().toLowerCase().indexOf("webkit")&&-1==B().indexOf("Edge")||-1!=B().indexOf("Trident")||-1!=B().indexOf("MSIE")||-1!=B().indexOf("Edge"));function de(p,v,E){for(const S in p)v.call(E,p[S],S,p)}function R(p){const v={};for(const E in p)v[E]=p[E];return v}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(p,v){let E,S;for(let Y=1;Y<arguments.length;Y++){for(E in S=arguments[Y],S)p[E]=S[E];for(let le=0;le<F.length;le++)E=F[le],Object.prototype.hasOwnProperty.call(S,E)&&(p[E]=S[E])}}function H(p){var v=1;p=p.split(":");const E=[];for(;0<v&&p.length;)E.push(p.shift()),v--;return p.length&&E.push(p.join(":")),E}function X(p){a.setTimeout(()=>{throw p},0)}function L(){var p=pc;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}var ma=new class x{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new po,p=>p.reset());class po{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let xs,ou=!1,pc=new class Rs{constructor(){this.h=this.g=null}add(v,E){const S=ma.get();S.set(v,E),this.h?this.h.next=S:this.g=S,this.h=S}},Ep=()=>{const p=a.Promise.resolve(void 0);xs=()=>{p.then(CE)}};var CE=()=>{for(var p;p=L();){try{p.h.call(p.g)}catch(E){X(E)}var v=ma;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}ou=!1};function Vo(){this.s=this.s,this.C=this.C}function li(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}Vo.prototype.s=!1,Vo.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},li.prototype.h=function(){this.defaultPrevented=!0};var Zd=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const E=()=>{};a.addEventListener("test",E,v),a.removeEventListener("test",E,v)}catch{}return p}();function Bo(p,v){if(li.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var E=this.type=p.type,S=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(ie){e:{try{ee(v.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(v=null)}}else"mouseover"==E?v=p.fromElement:"mouseout"==E&&(v=p.toElement);this.relatedTarget=v,S?(this.clientX=void 0!==S.clientX?S.clientX:S.pageX,this.clientY=void 0!==S.clientY?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:wp[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Bo.aa.h.call(this)}}I(Bo,li);var wp={2:"touch",3:"pen",4:"mouse"};Bo.prototype.h=function(){Bo.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var au="closure_listenable_"+(1e6*Math.random()|0),Il=0;function DE(p,v,E,S,Y){this.listener=p,this.proxy=null,this.src=v,this.type=E,this.capture=!!S,this.ha=Y,this.key=++Il,this.da=this.fa=!1}function ry(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function eh(p){this.src=p,this.g={},this.h=0}function AE(p,v){var E=v.type;if(E in p.g){var le,S=p.g[E],Y=Array.prototype.indexOf.call(S,v,void 0);(le=0<=Y)&&Array.prototype.splice.call(S,Y,1),le&&(ry(v),0==p.g[E].length&&(delete p.g[E],p.h--))}}function iy(p,v,E,S){for(var Y=0;Y<p.length;++Y){var le=p[Y];if(!le.da&&le.listener==v&&le.capture==!!E&&le.ha==S)return Y}return-1}eh.prototype.add=function(p,v,E,S,Y){var le=p.toString();(p=this.g[le])||(p=this.g[le]=[],this.h++);var qe=iy(p,v,S,Y);return-1<qe?(v=p[qe],E||(v.fa=!1)):((v=new DE(v,this.src,le,!!S,Y)).fa=E,p.push(v)),v};var SE="closure_lm_"+(1e6*Math.random()|0),RE={};function xE(p,v,E,S,Y){if(S&&S.once)return rR(p,v,E,S,Y);if(Array.isArray(v)){for(var le=0;le<v.length;le++)xE(p,v[le],E,S,Y);return null}return E=oy(E),p&&p[au]?p.K(v,E,u(S)?!!S.capture:!!S,Y):NE(p,v,E,!1,S,Y)}function NE(p,v,E,S,Y,le){if(!v)throw Error("Invalid event type");var qe=u(Y)?!!Y.capture:!!Y,ar=Tp(p);if(ar||(p[SE]=ar=new eh(p)),(E=ar.add(v,E,S,qe,le)).proxy)return E;if(S=function y$(){const v=iR;return function p(E){return v.call(p.src,p.listener,E)}}(),E.proxy=S,S.src=p,S.listener=E,p.addEventListener)Zd||(Y=qe),void 0===Y&&(Y=!1),p.addEventListener(v.toString(),S,Y);else if(p.attachEvent)p.attachEvent(ME(v.toString()),S);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(S)}return E}function rR(p,v,E,S,Y){if(Array.isArray(v)){for(var le=0;le<v.length;le++)rR(p,v[le],E,S,Y);return null}return E=oy(E),p&&p[au]?p.L(v,E,u(S)?!!S.capture:!!S,Y):NE(p,v,E,!0,S,Y)}function cu(p,v,E,S,Y){if(Array.isArray(v))for(var le=0;le<v.length;le++)cu(p,v[le],E,S,Y);else S=u(S)?!!S.capture:!!S,E=oy(E),p&&p[au]?(p=p.i,(v=String(v).toString())in p.g&&-1<(E=iy(le=p.g[v],E,S,Y))&&(ry(le[E]),Array.prototype.splice.call(le,E,1),0==le.length&&(delete p.g[v],p.h--))):p&&(p=Tp(p))&&(v=p.g[v.toString()],p=-1,v&&(p=iy(v,E,S,Y)),(E=-1<p?v[p]:null)&&th(E))}function th(p){if("number"!=typeof p&&p&&!p.da){var v=p.src;if(v&&v[au])AE(v.i,p);else{var E=p.type,S=p.proxy;v.removeEventListener?v.removeEventListener(E,S,p.capture):v.detachEvent?v.detachEvent(ME(E),S):v.addListener&&v.removeListener&&v.removeListener(S),(E=Tp(v))?(AE(E,p),0==E.h&&(E.src=null,v[SE]=null)):ry(p)}}}function ME(p){return p in RE?RE[p]:RE[p]="on"+p}function iR(p,v){if(p.da)p=!0;else{v=new Bo(v,this);var E=p.listener,S=p.ha||p.src;p.fa&&th(p),p=E.call(S,v)}return p}function Tp(p){return(p=p[SE])instanceof eh?p:null}var sy="__closure_events_fn_"+(1e9*Math.random()>>>0);function oy(p){return"function"==typeof p?p:(p[sy]||(p[sy]=function(v){return p.handleEvent(v)}),p[sy])}function Hi(){Vo.call(this),this.i=new eh(this),this.M=this,this.F=null}function cs(p,v){var E,S=p.F;if(S)for(E=[];S;S=S.F)E.push(S);if(p=p.M,S=v.type||v,"string"==typeof v)v=new li(v,p);else if(v instanceof li)v.target=v.target||p;else{var Y=v;U(v=new li(S,p),Y)}if(Y=!0,E)for(var le=E.length-1;0<=le;le--){var qe=v.g=E[le];Y=sR(qe,S,!0,v)&&Y}if(Y=sR(qe=v.g=p,S,!0,v)&&Y,Y=sR(qe,S,!1,v)&&Y,E)for(le=0;le<E.length;le++)Y=sR(qe=v.g=E[le],S,!1,v)&&Y}function sR(p,v,E,S){if(!(v=p.i.g[String(v)]))return!0;v=v.concat();for(var Y=!0,le=0;le<v.length;++le){var qe=v[le];if(qe&&!qe.da&&qe.capture==E){var ar=qe.listener,Ns=qe.ha||qe.src;qe.fa&&AE(p.i,qe),Y=!1!==ar.call(Ns,S)&&Y}}return Y&&!S.defaultPrevented}function Yie(p,v,E){if("function"==typeof p)E&&(p=_(p,E));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=_(p.handleEvent,p)}return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function Jie(p){p.g=Yie(()=>{p.g=null,p.i&&(p.i=!1,Jie(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}I(Hi,Vo),Hi.prototype[au]=!0,Hi.prototype.removeEventListener=function(p,v,E,S){cu(this,p,v,E,S)},Hi.prototype.N=function(){if(Hi.aa.N.call(this),this.i){var v,p=this.i;for(v in p.g){for(var E=p.g[v],S=0;S<E.length;S++)ry(E[S]);delete p.g[v],p.h--}}this.F=null},Hi.prototype.K=function(p,v,E,S){return this.i.add(String(p),v,!1,E,S)},Hi.prototype.L=function(p,v,E,S){return this.i.add(String(p),v,!0,E,S)};class BBe extends Vo{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Jie(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kE(p){Vo.call(this),this.h=p,this.g={}}I(kE,Vo);var Xie=[];function Zie(p){de(p.g,function(v,E){this.g.hasOwnProperty(E)&&th(v)},p),p.g={}}kE.prototype.N=function(){kE.aa.N.call(this),Zie(this)},kE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var v$=a.JSON.stringify,UBe=a.JSON.parse,jBe=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function b$(){}function tse(){}b$.prototype.h=null;var PE={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function I$(){li.call(this,"d")}function E$(){li.call(this,"c")}I(I$,li),I(E$,li);var Cp={},nse=null;function oR(){return nse=nse||new Hi}function rse(p){li.call(this,Cp.La,p)}function OE(p){const v=oR();cs(v,new rse(v))}function ise(p,v){li.call(this,Cp.STAT_EVENT,p),this.stat=v}function go(p){const v=oR();cs(v,new ise(v,p))}function sse(p,v){li.call(this,Cp.Ma,p),this.size=v}function FE(p,v){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function LE(){this.g=!0}function ay(p,v,E,S){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+function qBe(p,v){if(!p.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E)for(p=0;p<E.length;p++)if(Array.isArray(E[p])){var S=E[p];if(!(2>S.length)){var Y=S[1];if(Array.isArray(Y)&&!(1>Y.length)){var le=Y[0];if("noop"!=le&&"stop"!=le&&"close"!=le)for(var qe=1;qe<Y.length;qe++)Y[qe]=""}}}return v$(E)}catch{return v}}(p,E)+(S?" "+S:"")})}Cp.La="serverreachability",I(rse,li),Cp.STAT_EVENT="statevent",I(ise,li),Cp.Ma="timingevent",I(sse,li),LE.prototype.xa=function(){this.g=!1},LE.prototype.info=function(){};var w$,aR={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ose={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cR(){}function nh(p,v,E,S){this.j=p,this.i=v,this.l=E,this.R=S||1,this.U=new kE(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ase}function ase(){this.i=null,this.g="",this.h=!1}I(cR,b$),cR.prototype.g=function(){return new XMLHttpRequest},cR.prototype.i=function(){return{}},w$=new cR;var cse={},T$={};function C$(p,v,E){p.L=1,p.v=hR(El(v)),p.m=E,p.P=!0,use(p,null)}function use(p,v){p.F=Date.now(),uR(p),p.A=El(p.v);var E=p.A,S=p.R;Array.isArray(S)||(S=[String(S)]),wse(E.i,"t",S),p.C=0,E=p.j.J,p.h=new ase,p.g=jse(p.j,E?v:null,!p.m),0<p.O&&(p.M=new BBe(_(p.Y,p,p.g),p.O)),v=p.U,E=p.g,S=p.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Xie[0]=Y.toString()),Y=Xie);for(var le=0;le<Y.length;le++){var qe=xE(E,Y[le],S||v.handleEvent,!1,v.h||v);if(!qe)break;v.g[qe.key]=qe}v=p.H?R(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),OE(),function $Be(p,v,E,S,Y,le){p.info(function(){if(p.g)if(le)for(var qe="",ar=le.split("&"),Ns=0;Ns<ar.length;Ns++){var Nn=ar[Ns].split("=");if(1<Nn.length){var Qs=Nn[0];Nn=Nn[1];var Ys=Qs.split("_");qe=2<=Ys.length&&"type"==Ys[1]?qe+(Qs+"=")+Nn+"&":qe+(Qs+"=redacted&")}}else qe=null;else qe=le;return"XMLHTTP REQ ("+S+") [attempt "+Y+"]: "+v+"\n"+E+"\n"+qe})}(p.i,p.u,p.A,p.l,p.R,p.m)}function lse(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function zBe(p,v){var E=p.C,S=v.indexOf("\n",E);return-1==S?T$:(E=Number(v.substring(E,S)),isNaN(E)?cse:(S+=1)+E>v.length?T$:(v=v.slice(S,S+E),p.C=S+E,v))}function uR(p){p.S=Date.now()+p.I,dse(p,p.I)}function dse(p,v){if(null!=p.B)throw Error("WatchDog timer not null");p.B=FE(_(p.ba,p),v)}function D$(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function VE(p){0==p.j.G||p.J||Lse(p.j,p)}function Dp(p){D$(p);var v=p.M;v&&"function"==typeof v.ma&&v.ma(),p.M=null,Zie(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function A$(p,v){try{var E=p.j;if(0!=E.G&&(E.g==p||S$(E.h,p)))if(!p.K&&S$(E.h,p)&&3==E.G){try{var S=E.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&3==S.length){var Y=S;if(0==Y[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<p.F))break e;_R(E),gR(E)}M$(E),go(18)}}else E.za=Y[1],0<E.za-E.T&&37500>Y[2]&&E.F&&0==E.v&&!E.C&&(E.C=FE(_(E.Za,E),6e3));if(1>=pse(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Sp(E,11)}else if((p.K||E.g==p)&&_R(E),!N(v))for(Y=E.Da.g.parse(v),v=0;v<Y.length;v++){let Nn=Y[v];if(E.T=Nn[0],Nn=Nn[1],2==E.G)if("c"==Nn[0]){E.K=Nn[1],E.ia=Nn[2];const Qs=Nn[3];null!=Qs&&(E.la=Qs,E.j.info("VER="+E.la));const Ys=Nn[4];null!=Ys&&(E.Aa=Ys,E.j.info("SVER="+E.Aa));const ly=Nn[5];null!=ly&&"number"==typeof ly&&0<ly&&(E.L=S=1.5*ly,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const gc=p.g;if(gc){const vR=gc.g?gc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vR){var le=S.h;le.g||-1==vR.indexOf("spdy")&&-1==vR.indexOf("quic")&&-1==vR.indexOf("h2")||(le.j=le.l,le.g=new Set,le.h&&(R$(le,le.h),le.h=null))}if(S.D){const P$=gc.g?gc.g.getResponseHeader("X-HTTP-Session-Id"):null;P$&&(S.ya=P$,Er(S.I,S.D,P$))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-p.F,E.j.info("Handshake RTT: "+E.R+"ms"));var qe=p;if((S=E).qa=Use(S,S.J?S.ia:null,S.W),qe.K){gse(S.h,qe);var ar=qe,Ns=S.L;Ns&&(ar.I=Ns),ar.B&&(D$(ar),uR(ar)),S.g=qe}else Ose(S);0<E.i.length&&mR(E)}else"stop"!=Nn[0]&&"close"!=Nn[0]||Sp(E,7);else 3==E.G&&("stop"==Nn[0]||"close"==Nn[0]?"stop"==Nn[0]?Sp(E,7):N$(E):"noop"!=Nn[0]&&E.l&&E.l.ta(Nn),E.v=0)}OE()}catch{}}nh.prototype.ca=function(p){p=p.target;const v=this.M;v&&3==wl(p)?v.j():this.Y(p)},nh.prototype.Y=function(p){try{if(p==this.g)e:{const Ys=wl(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>Ys)&&(3!=Ys||this.g&&(this.h.h||this.g.oa()||xse(this.g)))){this.J||4!=Ys||7==v||OE(),D$(this);var E=this.g.Z();this.X=E;t:if(lse(this)){var S=xse(this.g);p="";var Y=S.length,le=4==wl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Dp(this),VE(this);var qe="";break t}this.h.i=new a.TextDecoder}for(v=0;v<Y;v++)this.h.h=!0,p+=this.h.i.decode(S[v],{stream:!(le&&v==Y-1)});S.length=0,this.h.g+=p,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=200==E,function HBe(p,v,E,S,Y,le,qe){p.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+Y+"]: "+v+"\n"+E+"\n"+le+" "+qe})}(this.i,this.u,this.A,this.l,this.R,Ys,E),this.o){if(this.T&&!this.K){t:{if(this.g){var ar,Ns=this.g;if((ar=Ns.g?Ns.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(ar)){var Nn=ar;break t}}Nn=null}if(!(E=Nn)){this.o=!1,this.s=3,go(12),Dp(this),VE(this);break e}ay(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,A$(this,E)}if(this.P){let gc;for(E=!0;!this.J&&this.C<qe.length;){if(gc=zBe(this,qe),gc==T$){4==Ys&&(this.s=4,go(14),E=!1),ay(this.i,this.l,null,"[Incomplete Response]");break}if(gc==cse){this.s=4,go(15),ay(this.i,this.l,qe,"[Invalid Chunk]"),E=!1;break}ay(this.i,this.l,gc,null),A$(this,gc)}if(lse(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ys||0!=qe.length||this.h.h||(this.s=1,go(16),E=!1),this.o=this.o&&E,E){if(0<qe.length&&!this.W){this.W=!0;var Qs=this.j;Qs.g==this&&Qs.ba&&!Qs.M&&(Qs.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),k$(Qs),Qs.M=!0,go(11))}}else ay(this.i,this.l,qe,"[Invalid Chunked Response]"),Dp(this),VE(this)}else ay(this.i,this.l,qe,null),A$(this,qe);4==Ys&&Dp(this),this.o&&!this.J&&(4==Ys?Lse(this.j,this):(this.o=!1,uR(this)))}else(function uUe(p){const v={};p=(p.g&&2<=wl(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let S=0;S<p.length;S++){if(N(p[S]))continue;var E=H(p[S]);const Y=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const le=v[Y]||[];v[Y]=le,le.push(E)}!function M(p,v){for(const E in p)v.call(void 0,p[E],E,p)}(v,function(S){return S.join(", ")})})(this.g),400==E&&0<qe.indexOf("Unknown SID")?(this.s=3,go(12)):(this.s=0,go(13)),Dp(this),VE(this)}}}catch{}},nh.prototype.cancel=function(){this.J=!0,Dp(this)},nh.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function GBe(p,v){p.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(OE(),go(17)),Dp(this),this.s=2,VE(this)):dse(this,this.S-p)};var WBe=class{constructor(p,v){this.g=p,this.map=v}};function hse(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fse(p){return!!p.h||!!p.g&&p.g.size>=p.j}function pse(p){return p.h?1:p.g?p.g.size:0}function S$(p,v){return p.h?p.h==v:!!p.g&&p.g.has(v)}function R$(p,v){p.g?p.g.add(v):p.h=v}function gse(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}function mse(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let v=p.i;for(const E of p.g.values())v=v.concat(E.D);return v}return T(p.i)}function _se(p,v){if(p.forEach&&"function"==typeof p.forEach)p.forEach(v,void 0);else if(c(p)||"string"==typeof p)Array.prototype.forEach.call(p,v,void 0);else for(var E=function QBe(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||"string"==typeof p){var v=[];p=p.length;for(var E=0;E<p;E++)v.push(E);return v}v=[],E=0;for(const S in p)v[E++]=S;return v}}}(p),S=function KBe(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(c(p)){for(var v=[],E=p.length,S=0;S<E;S++)v.push(p[S]);return v}for(S in v=[],E=0,p)v[E++]=p[S];return v}(p),Y=S.length,le=0;le<Y;le++)v.call(void 0,S[le],E&&E[le],p)}hse.prototype.cancel=function(){if(this.i=mse(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var yse=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ap(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ap){this.h=p.h,lR(this,p.j),this.o=p.o,this.g=p.g,dR(this,p.s),this.l=p.l;var v=p.i,E=new jE;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),vse(this,E),this.m=p.m}else p&&(v=String(p).match(yse))?(this.h=!1,lR(this,v[1]||"",!0),this.o=BE(v[2]||""),this.g=BE(v[3]||"",!0),dR(this,v[4]),this.l=BE(v[5]||"",!0),vse(this,v[6]||"",!0),this.m=BE(v[7]||"")):(this.h=!1,this.i=new jE(null,this.h))}function El(p){return new Ap(p)}function lR(p,v,E){p.j=E?BE(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function dR(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function vse(p,v,E){v instanceof jE?(p.i=v,function nUe(p,v){v&&!p.j&&(rh(p),p.i=null,p.g.forEach(function(E,S){var Y=S.toLowerCase();S!=Y&&(Ise(this,S),wse(this,Y,E))},p)),p.j=v}(p.i,p.h)):(E||(v=UE(v,eUe)),p.i=new jE(v,p.h))}function Er(p,v,E){p.i.set(v,E)}function hR(p){return Er(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function BE(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function UE(p,v,E){return"string"==typeof p?(p=encodeURI(p).replace(v,JBe),E&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function JBe(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Ap.prototype.toString=function(){var p=[],v=this.j;v&&p.push(UE(v,bse,!0),":");var E=this.g;return(E||"file"==v)&&(p.push("//"),(v=this.o)&&p.push(UE(v,bse,!0),"@"),p.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&p.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&p.push("/"),p.push(UE(E,"/"==E.charAt(0)?ZBe:XBe,!0))),(E=this.i.toString())&&p.push("?",E),(E=this.m)&&p.push("#",UE(E,tUe)),p.join("")};var bse=/[#\/\?@]/g,XBe=/[#\?:]/g,ZBe=/[#\?]/g,eUe=/[#\?@]/g,tUe=/#/g;function jE(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function rh(p){p.g||(p.g=new Map,p.h=0,p.i&&function YBe(p,v){if(p){p=p.split("&");for(var E=0;E<p.length;E++){var S=p[E].indexOf("="),Y=null;if(0<=S){var le=p[E].substring(0,S);Y=p[E].substring(S+1)}else le=p[E];v(le,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}(p.i,function(v,E){p.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}function Ise(p,v){rh(p),v=cy(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function Ese(p,v){return rh(p),v=cy(p,v),p.g.has(v)}function wse(p,v,E){Ise(p,v),0<E.length&&(p.i=null,p.g.set(cy(p,v),T(E)),p.h+=E.length)}function cy(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function ih(p,v,E,S,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),S(E)}catch{}}function sUe(){this.g=new jBe}function oUe(p,v,E){const S=E||"";try{_se(p,function(Y,le){let qe=Y;u(Y)&&(qe=v$(Y)),v.push(S+le+"="+encodeURIComponent(qe))})}catch(Y){throw v.push(S+"type="+encodeURIComponent("_badmap")),Y}}function $E(p){this.l=p.Ub||null,this.j=p.eb||!1}function fR(p,v){Hi.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Tse(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function HE(p){p.readyState=4,p.l=null,p.j=null,p.v=null,GE(p)}function GE(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Cse(p){let v="";return de(p,function(E,S){v+=S,v+=":",v+=E,v+="\r\n"}),v}function x$(p,v,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Cse(E),"string"==typeof p?null!=E&&encodeURIComponent(String(E)):Er(p,v,E))}function qr(p){Hi.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=jE.prototype).add=function(p,v){rh(this),this.i=null,p=cy(this,p);var E=this.g.get(p);return E||this.g.set(p,E=[]),E.push(v),this.h+=1,this},n.forEach=function(p,v){rh(this),this.g.forEach(function(E,S){E.forEach(function(Y){p.call(v,Y,S,this)},this)},this)},n.na=function(){rh(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let S=0;S<v.length;S++){const Y=p[S];for(let le=0;le<Y.length;le++)E.push(v[S])}return E},n.V=function(p){rh(this);let v=[];if("string"==typeof p)Ese(this,p)&&(v=v.concat(this.g.get(cy(this,p))));else{p=Array.from(this.g.values());for(let E=0;E<p.length;E++)v=v.concat(p[E])}return v},n.set=function(p,v){return rh(this),this.i=null,Ese(this,p=cy(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p&&0<(p=this.V(p)).length?String(p[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var S=v[E];const le=encodeURIComponent(String(S)),qe=this.V(S);for(S=0;S<qe.length;S++){var Y=le;""!==qe[S]&&(Y+="="+encodeURIComponent(String(qe[S]))),p.push(Y)}}return this.i=p.join("&")},I($E,b$),$E.prototype.g=function(){return new fR(this.l,this.j)},$E.prototype.i=function(p){return function(){return p}}({}),I(fR,Hi),(n=fR.prototype).open=function(p,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,GE(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,HE(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,GE(this)),this.g&&(this.readyState=3,GE(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tse(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?HE(this):GE(this),3==this.readyState&&Tse(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,HE(this))},n.Qa=function(p){this.g&&(this.response=p,HE(this))},n.ga=function(){this.g&&HE(this)},n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var E=v.next();!E.done;)p.push((E=E.value)[0]+": "+E[1]),E=v.next();return p.join("\r\n")},Object.defineProperty(fR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),I(qr,Hi);var aUe=/^https?$/i,cUe=["POST","PUT"];function Dse(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,Ase(p),pR(p)}function Ase(p){p.A||(p.A=!0,cs(p,"complete"),cs(p,"error"))}function Sse(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=wl(p)||2!=p.Z()))if(p.u&&4==wl(p))Yie(p.Ea,0,p);else if(cs(p,"readystatechange"),4==wl(p)){p.h=!1;try{const qe=p.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var S;if(S=0===qe){var Y=String(p.D).match(yse)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),S=!aUe.test(Y?Y.toLowerCase():"")}E=S}if(E)cs(p,"complete"),cs(p,"success");else{p.m=6;try{var le=2<wl(p)?p.g.statusText:""}catch{le=""}p.l=le+" ["+p.Z()+"]",Ase(p)}}finally{pR(p)}}}function pR(p,v){if(p.g){Rse(p);const E=p.g,S=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||cs(p,"ready");try{E.onreadystatechange=S}catch{}}}function Rse(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function wl(p){return p.g?p.g.readyState:0}function xse(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qE(p,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[p]||v}function Nse(p){this.Aa=0,this.i=[],this.j=new LE,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qE("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qE("baseRetryDelayMs",5e3,p),this.cb=qE("retryDelaySeedMs",1e4,p),this.Wa=qE("forwardChannelMaxRetries",2,p),this.wa=qE("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new hse(p&&p.concurrentRequestLimit),this.Da=new sUe,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function N$(p){if(Mse(p),3==p.G){var v=p.U++,E=El(p.I);if(Er(E,"SID",p.K),Er(E,"RID",v),Er(E,"TYPE","terminate"),zE(p,E),(v=new nh(p,p.j,v)).L=2,v.v=hR(El(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=v.v,E=!0),E||(v.g=jse(v.j,null),v.g.ea(v.v)),v.F=Date.now(),uR(v)}Bse(p)}function gR(p){p.g&&(k$(p),p.g.cancel(),p.g=null)}function Mse(p){gR(p),p.u&&(a.clearTimeout(p.u),p.u=null),_R(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function mR(p){if(!fse(p.h)&&!p.s){p.s=!0;var v=p.Ga;xs||Ep(),ou||(xs(),ou=!0),pc.add(v,p),p.B=0}}function kse(p,v){var E;E=v?v.l:p.U++;const S=El(p.I);Er(S,"SID",p.K),Er(S,"RID",E),Er(S,"AID",p.T),zE(p,S),p.m&&p.o&&x$(S,p.m,p.o),E=new nh(p,p.j,E,p.B+1),null===p.m&&(E.H=p.o),v&&(p.i=v.D.concat(p.i)),v=Pse(p,E,1e3),E.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),R$(p.h,E),C$(E,S,v)}function zE(p,v){p.H&&de(p.H,function(E,S){Er(v,S,E)}),p.l&&_se({},function(E,S){Er(v,S,E)})}function Pse(p,v,E){E=Math.min(p.i.length,E);var S=p.l?_(p.l.Na,p.l,p):null;e:{var Y=p.i;let le=-1;for(;;){const qe=["count="+E];-1==le?0<E?(le=Y[0].g,qe.push("ofs="+le)):le=0:qe.push("ofs="+le);let ar=!0;for(let Ns=0;Ns<E;Ns++){let Nn=Y[Ns].g;const Qs=Y[Ns].map;if(Nn-=le,0>Nn)le=Math.max(0,Y[Ns].g-100),ar=!1;else try{oUe(Qs,qe,"req"+Nn+"_")}catch{S&&S(Qs)}}if(ar){S=qe.join("&");break e}}}return p=p.i.splice(0,E),v.D=p,S}function Ose(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;xs||Ep(),ou||(xs(),ou=!0),pc.add(v,p),p.v=0}}function M$(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=FE(_(p.Fa,p),Vse(p,p.v)),p.v++,0))}function k$(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function Fse(p){p.g=new nh(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var v=El(p.qa);Er(v,"RID","rpc"),Er(v,"SID",p.K),Er(v,"AID",p.T),Er(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&Er(v,"TO",p.ja),Er(v,"TYPE","xmlhttp"),zE(p,v),p.m&&p.o&&x$(v,p.m,p.o),p.L&&(p.g.I=p.L);var E=p.g;p=p.ia,E.L=1,E.v=hR(El(v)),E.m=null,E.P=!0,use(E,p)}function _R(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function Lse(p,v){var E=null;if(p.g==v){_R(p),k$(p),p.g=null;var S=2}else{if(!S$(p.h,v))return;E=v.D,gse(p.h,v),S=1}if(0!=p.G)if(v.o)if(1==S){E=v.m?v.m.length:0,v=Date.now()-v.F;var Y=p.B;cs(S=oR(),new sse(S,E)),mR(p)}else Ose(p);else if(3==(Y=v.s)||0==Y&&0<v.X||!(1==S&&function lUe(p,v){return!(pse(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=v.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=FE(_(p.Ga,p,v),Vse(p,p.B)),p.B++,0)))}(p,v)||2==S&&M$(p)))switch(E&&0<E.length&&(v=p.h,v.i=v.i.concat(E)),Y){case 1:Sp(p,5);break;case 4:Sp(p,10);break;case 3:Sp(p,6);break;default:Sp(p,2)}}function Vse(p,v){let E=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(E*=2),E*v}function Sp(p,v){if(p.j.info("Error code "+v),2==v){var E=_(p.fb,p),S=p.Xa;const Y=!S;S=new Ap(S||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||lR(S,"https"),hR(S),Y?function rUe(p,v){const E=new LE;if(a.Image){const S=new Image;S.onload=y(ih,E,"TestLoadImage: loaded",!0,v,S),S.onerror=y(ih,E,"TestLoadImage: error",!1,v,S),S.onabort=y(ih,E,"TestLoadImage: abort",!1,v,S),S.ontimeout=y(ih,E,"TestLoadImage: timeout",!1,v,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=p}else v(!1)}(S.toString(),E):function iUe(p,v){new LE;const S=new AbortController,Y=setTimeout(()=>{S.abort(),ih(0,0,!1,v)},1e4);fetch(p,{signal:S.signal}).then(le=>{clearTimeout(Y),ih(0,0,!!le.ok,v)}).catch(()=>{clearTimeout(Y),ih(0,0,!1,v)})}(S.toString(),E)}else go(2);p.G=0,p.l&&p.l.sa(v),Bse(p),Mse(p)}function Bse(p){if(p.G=0,p.ka=[],p.l){const v=mse(p.h);(0!=v.length||0!=p.i.length)&&(A(p.ka,v),A(p.ka,p.i),p.h.i.length=0,T(p.i),p.i.length=0),p.l.ra()}}function Use(p,v,E){var S=E instanceof Ap?El(E):new Ap(E);if(""!=S.g)v&&(S.g=v+"."+S.g),dR(S,S.s);else{var Y=a.location;S=Y.protocol,v=v?v+"."+Y.hostname:Y.hostname,Y=+Y.port;var le=new Ap(null);S&&lR(le,S),v&&(le.g=v),Y&&dR(le,Y),E&&(le.l=E),S=le}return v=p.ya,(E=p.D)&&v&&Er(S,E,v),Er(S,"VER",p.la),zE(p,S),S}function jse(p,v,E){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new qr(p.Ca&&!p.pa?new $E({eb:E}):p.pa)).Ha(p.J),v}function $se(){}function yR(){}function _a(p,v){Hi.call(this),this.g=new Nse(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!N(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.D=v,null!==(p=this.h)&&v in p&&v in(p=this.h)&&delete p[v]),this.j=new uy(this)}function Hse(p){I$.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const E in v){p=E;break e}p=void 0}(this.i=p)&&(p=this.i,v=null!==v&&p in v?v[p]:void 0),this.data=v}else this.data=p}function Gse(){E$.call(this),this.status=1}function uy(p){this.g=p}(n=qr.prototype).Ha=function(p){this.J=p},n.ea=function(p,v,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():w$.g(),this.v=function ese(p){return p.h||(p.h=p.i())}(this.o?this.o:w$),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(le){return void Dse(this,le)}if(p=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var Y in S)E.set(Y,S[Y]);else{if("function"!=typeof S.keys||"function"!=typeof S.get)throw Error("Unknown input type for opt_headers: "+String(S));for(const le of S.keys())E.set(le,S.get(le))}S=Array.from(E.keys()).find(le=>"content-type"==le.toLowerCase()),Y=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cUe,v,void 0))||S||Y||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,qe]of E)this.g.setRequestHeader(le,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rse(this),this.u=!0,this.g.send(p),this.u=!1}catch(le){Dse(this,le)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,cs(this,"complete"),cs(this,"abort"),pR(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pR(this,!0)),qr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sse(this):this.bb())},n.bb=function(){Sse(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<wl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&0==v.indexOf(p)&&(v=v.substring(p.length)),UBe(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=Nse.prototype).la=8,n.G=1,n.connect=function(p,v,E,S){go(0),this.W=p,this.H=v||{},E&&void 0!==S&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=Use(this,null,this.W),mR(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Y=new nh(this,this.j,p);let le=this.o;if(this.S&&(le?(le=R(le),U(le,this.S)):le=this.S),null!==this.m||this.O||(Y.H=le,le=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){var S=this.i[E];if(void 0===(S="__data__"in S.map&&"string"==typeof(S=S.map.__data__)?S.length:void 0))break;if(4096<(v+=S)){v=E;break e}if(4096===v||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Pse(this,Y,v),Er(E=El(this.I),"RID",p),Er(E,"CVER",22),this.D&&Er(E,"X-HTTP-Session-Id",this.D),zE(this,E),le&&(this.O?v="headers="+encodeURIComponent(String(Cse(le)))+"&"+v:this.m&&x$(E,this.m,le)),R$(this.h,Y),this.Ua&&Er(E,"TYPE","init"),this.P?(Er(E,"$req",v),Er(E,"SID","null"),Y.T=!0,C$(Y,E,null)):C$(Y,E,v),this.G=2}}else 3==this.G&&(p?kse(this,p):0==this.i.length||fse(this.h)||kse(this))},n.Fa=function(){if(this.u=null,Fse(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=FE(_(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,go(10),gR(this),Fse(this))},n.Za=function(){null!=this.C&&(this.C=null,gR(this),M$(this),go(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),go(2)):(this.j.info("Failed to ping google.com"),go(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=$se.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},yR.prototype.g=function(p,v){return new _a(p,v)},I(_a,Hi),_a.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_a.prototype.close=function(){N$(this.g)},_a.prototype.o=function(p){var v=this.g;if("string"==typeof p){var E={};E.__data__=p,p=E}else this.u&&((E={}).__data__=v$(p),p=E);v.i.push(new WBe(v.Ya++,p)),3==v.G&&mR(v)},_a.prototype.N=function(){this.g.l=null,delete this.j,N$(this.g),delete this.g,_a.aa.N.call(this)},I(Hse,I$),I(Gse,E$),I(uy,$se),uy.prototype.ua=function(){cs(this.g,"a")},uy.prototype.ta=function(p){cs(this.g,new Hse(p))},uy.prototype.sa=function(p){cs(this.g,new Gse)},uy.prototype.ra=function(){cs(this.g,"b")},yR.prototype.createWebChannel=yR.prototype.g,_a.prototype.send=_a.prototype.o,_a.prototype.open=_a.prototype.m,_a.prototype.close=_a.prototype.close,Mee=dl.createWebChannelTransport=function(){return new yR},Nee=dl.getStatEventTarget=function(){return oR()},xee=dl.Event=Cp,UB=dl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},aR.NO_ERROR=0,aR.TIMEOUT=8,aR.HTTP_ERROR=6,JS=dl.ErrorCode=aR,ose.COMPLETE="complete",Ree=dl.EventType=ose,tse.EventType=PE,PE.OPEN="a",PE.CLOSE="b",PE.ERROR="c",PE.MESSAGE="d",Hi.prototype.listen=Hi.prototype.K,FI=dl.WebChannel=tse,dl.FetchXmlHttpFactory=$E,qr.prototype.listenOnce=qr.prototype.L,qr.prototype.getLastError=qr.prototype.Ka,qr.prototype.getLastErrorCode=qr.prototype.Ba,qr.prototype.getStatus=qr.prototype.Z,qr.prototype.getResponseJson=qr.prototype.Oa,qr.prototype.getResponseText=qr.prototype.oa,qr.prototype.send=qr.prototype.ea,qr.prototype.setWithCredentials=qr.prototype.Ha,See=dl.XhrIo=qr}).apply(typeof YS<"u"?YS:typeof self<"u"?self:typeof window<"u"?window:{});const kee="@firebase/firestore";class ss{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ss.UNAUTHENTICATED=new ss(null),ss.GOOGLE_CREDENTIALS=new ss("google-credentials-uid"),ss.FIRST_PARTY=new ss("first-party-uid"),ss.MOCK_USER=new ss("mock-user");let v_="10.14.0";const kd=new Xc.Vy("@firebase/firestore");function b_(){return kd.logLevel}function Re(n,...e){if(kd.logLevel<=Xc.$b.DEBUG){const t=e.map(jB);kd.debug(`Firestore (${v_}): ${n}`,...t)}}function ci(n,...e){if(kd.logLevel<=Xc.$b.ERROR){const t=e.map(jB);kd.error(`Firestore (${v_}): ${n}`,...t)}}function fa(n,...e){if(kd.logLevel<=Xc.$b.WARN){const t=e.map(jB);kd.warn(`Firestore (${v_}): ${n}`,...t)}}function jB(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${v_}) INTERNAL ASSERTION FAILED: `+n;throw ci(e),new Error(e)}function ot(n,e){n||rt()}function He(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Vn.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class os{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pee{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FOe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ss.UNAUTHENTICATED))}shutdown(){}}class LOe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VOe{constructor(e){this.t=e,this.currentUser=ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ot(void 0===this.o);let i=this.i;const s=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve();let o=new os;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new os,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable((0,D.A)(function*(){yield u.promise,yield s(r.currentUser)}))},c=u=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new os)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot("string"==typeof r.accessToken),new Pee(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(null===e||"string"==typeof e),new ss(e)}}class BOe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ss.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UOe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new BOe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ss.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oee{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jOe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ot(void 0===this.o);const r=s=>{null!=s.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot("string"==typeof t.token),this.R=t.token,new Oee(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $Oe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Fee{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=$Oe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function I_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Lee(n){return n+"\0"}class Ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Ar(0,0))}static max(){return new dt(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class LI{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===LI.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof LI?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends LI{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const HOe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends LI{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return HOe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Ce(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Ce(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ce(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(an.fromString(e))}static fromName(e){return new We(an.fromString(e).popFirst(5))}static empty(){return new We(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new an(e.slice()))}}class E_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function $B(n){return n.fields.find(e=>2===e.kind)}function Zf(n){return n.fields.filter(e=>2!==e.kind)}E_.UNKNOWN_ID=-1;class ep{constructor(e,t){this.fieldPath=e,this.kind=t}}class w_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new w_(0,pa.min())}}function Vee(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=dt.fromTimestamp(1e9===r?new Ar(t+1,0):new Ar(t,r));return new pa(i,We.empty(),e)}function Bee(n){return new pa(n.readTime,n.key,-1)}class pa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new pa(dt.min(),We.empty(),-1)}static max(){return new pa(dt.max(),We.empty(),-1)}}function HB(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const Uee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jee{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pd(n){return GB.apply(this,arguments)}function GB(){return GB=(0,D.A)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Uee)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),GB.apply(this,arguments)}class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,t){return new J((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class XS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new os,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new VI(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=qB(r.target.error);this.V.reject(new VI(e,i))}}static open(e,t,r,i){try{return new XS(t,e.transaction(i,r))}catch(s){throw new VI(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WOe(t)}}class Zc{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Zc.S((0,Vn.ZQ)())&&ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),tp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Vn.zW)())return!1;if(Zc.v())return!0;const e=(0,Vn.ZQ)(),t=Zc.S(e),r=0<t&&t<10,i=$ee(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,D.A)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new VI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Ce(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ce(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new VI(e,a))},s.onupgradeneeded=o=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,D.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=XS.open(s.db,e,o?"readonly":"readwrite",r),u=i(c).next(l=>(c.g(),l)).catch(l=>(c.abort(l),J.reject(l))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){const u=c,l="FirebaseError"!==u.name&&a<3;if(Re("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),s.close(),!l)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function $ee(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class zOe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return tp(this.B.delete())}}class VI extends Ce{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Od(n){return"IndexedDbTransactionError"===n.name}class WOe{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),tp(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),tp(this.store.add(e))}get(e){return tp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),tp(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),tp(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new J((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new J((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new J((r,i)=>{t.onerror=s=>{const o=qB(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new J((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new zOe(a),u=t(a.primaryKey,a.value,c);if(u instanceof J){const l=u.catch(f=>(c.done(),J.reject(f)));r.push(l)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>J.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function tp(n){return new J((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=qB(r.target.error);t(i)}})}let Hee=!1;function qB(n){const e=Zc.S((0,Vn.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hee||(Hee=!0,setTimeout(()=>{throw r},0)),r}}return n}class KOe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Re("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,D.A)(function*(){t.task=null;try{Re("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Od(r)?Re("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Pd(r)}yield t.X(6e4)}))}}class QOe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,D.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return J.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Re("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Re("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Bee(s);HB(o,r)>0&&(r=o)}),new pa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ga=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function BI(n){return null==n}function UI(n){return 0===n&&1/n==-1/0}function Gee(n){return"number"==typeof n&&Number.isInteger(n)&&!UI(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function qs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qee(e)),e=YOe(n.get(t),e);return qee(e)}function YOe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function qee(n){return n+"\x01\x01"}function eu(n){const e=n.length;if(ot(e>=2),2===e)return ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&rt(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:rt()}s=o+2}return new an(r)}const zee=["userId","batchId"];function ZS(n,e){return[n,qs(e)]}function Wee(n,e,t){return[n,qs(e),t]}const JOe={},XOe=["prefixPath","collectionGroup","readTime","documentId"],ZOe=["prefixPath","collectionGroup","documentId"],eFe=["collectionGroup","readTime","prefixPath","documentId"],tFe=["canonicalId","targetId"],nFe=["targetId","path"],rFe=["path","targetId"],iFe=["collectionId","parent"],sFe=["indexId","uid"],oFe=["uid","sequenceNumber"],aFe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cFe=["indexId","uid","orderedDocumentKey"],uFe=["userId","collectionPath","documentId"],lFe=["userId","collectionPath","largestBatchId"],dFe=["userId","collectionGroup","largestBatchId"],Kee=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hFe=[...Kee,"documentOverlays"],Qee=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yee=Qee,zB=[...Yee,"indexConfiguration","indexState","indexEntries"],fFe=zB,pFe=[...zB,"globals"];class WB extends jee{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function $i(n,e){const t=He(n);return Zc.F(t._e,e)}function Jee(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zee(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class fr{constructor(e,t){this.comparator=e,this.root=t||Ds.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new e1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new e1(this.root,e,this.comparator,!1)}getReverseIterator(){return new e1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new e1(this.root,e,this.comparator,!0)}}class e1{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ds{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ds.RED,this.left=i??Ds.EMPTY,this.right=s??Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ds(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1,Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ds(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ete(this.data.getIterator())}getIteratorFrom(e){return new ete(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class ete{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function T_(n){return n.hasNext()?n.getNext():void 0}class Fo{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Fo([])}unionWith(e){let t=new Zn(vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return I_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class tte extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tte("Invalid base64 string: "+s):s}}(e);return new Gr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const mFe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(ot(!!n),"string"==typeof n){let e=0;const t=mFe.exec(n);if(ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fl(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function t1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function n1(n){const e=n.mapValue.fields.__previous_value__;return t1(e)?n1(e):e}function jI(n){const e=hl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}class _Fe{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Ld{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ld("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ld&&e.projectId===this.projectId&&e.database===this.database}}const Vd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},r1={nullValue:"NULL_VALUE"};function Bd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?t1(n)?4:ote(n)?9007199254740991:a1(n)?10:11:rt()}function tu(n,e){if(n===e)return!0;const t=Bd(n);if(t!==Bd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jI(n).isEqual(jI(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=hl(i.timestampValue),a=hl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,fl(n.bytesValue).isEqual(fl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Sr(i.geoPointValue.latitude)===Sr(s.geoPointValue.latitude)&&Sr(i.geoPointValue.longitude)===Sr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Sr(i.integerValue)===Sr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Sr(i.doubleValue),a=Sr(s.doubleValue);return o===a?UI(o)===UI(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return I_(n.arrayValue.values||[],e.arrayValue.values||[],tu);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Jee(o)!==Jee(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!tu(o[c],a[c])))return!1;return!0}(n,e);default:return rt()}var s}function $I(n,e){return void 0!==(n.values||[]).find(t=>tu(t,e))}function Ud(n,e){if(n===e)return 0;const t=Bd(n),r=Bd(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Sr(s.integerValue||s.doubleValue),c=Sr(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return nte(n.timestampValue,e.timestampValue);case 4:return nte(jI(n),jI(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=fl(s),c=fl(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const l=kt(a[u],c[u]);if(0!==l)return l}return kt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=kt(Sr(s.latitude),Sr(o.latitude));return 0!==a?a:kt(Sr(s.longitude),Sr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return rte(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,l;const y=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,I=null===(c=(o.fields||{}).value)||void 0===c?void 0:c.arrayValue,T=kt((null===(u=y?.values)||void 0===u?void 0:u.length)||0,(null===(l=I?.values)||void 0===l?void 0:l.length)||0);return 0!==T?T:rte(y,I)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Vd.mapValue&&o===Vd.mapValue)return 0;if(s===Vd.mapValue)return 1;if(o===Vd.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let f=0;f<c.length&&f<l.length;++f){const _=kt(c[f],l[f]);if(0!==_)return _;const y=Ud(a[c[f]],u[l[f]]);if(0!==y)return y}return kt(c.length,l.length)}(n.mapValue,e.mapValue);default:throw rt()}}function nte(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=hl(n),r=hl(e),i=kt(t.seconds,r.seconds);return 0!==i?i:kt(t.nanos,r.nanos)}function rte(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Ud(t[i],r[i]);if(s)return s}return kt(t.length,r.length)}function C_(n){return KB(n)}function KB(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=hl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fl(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=KB(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${KB(t.fields[o])}`;return i+"}"}(n.mapValue):rt()}function np(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function QB(n){return!!n&&"integerValue"in n}function HI(n){return!!n&&"arrayValue"in n}function ite(n){return!!n&&"nullValue"in n}function ste(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function o1(n){return!!n&&"mapValue"in n}function a1(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function GI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=GI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=GI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ote(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const ate={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function yFe(n){return"nullValue"in n?r1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?np(Ld.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?a1(n)?ate:{mapValue:{}}:rt()}function vFe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?np(Ld.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ate:"mapValue"in n?a1(n)?{mapValue:{}}:Vd:rt()}function cte(n,e){const t=Ud(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ute(n,e){const t=Ud(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class As{constructor(e){this.value=e}static empty(){return new As({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!o1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=GI(t)}setAll(e){let t=vr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=GI(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());o1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];o1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fd(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new As(GI(this.value))}}function lte(n){const e=[];return Fd(n.fields,(t,r)=>{const i=new vr([t]);if(o1(r)){const s=lte(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Fo(e)}class br{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new br(e,0,dt.min(),dt.min(),dt.min(),As.empty(),0)}static newFoundDocument(e,t,r,i){return new br(e,1,t,dt.min(),r,i,0)}static newNoDocument(e,t){return new br(e,2,t,dt.min(),dt.min(),As.empty(),0)}static newUnknownDocument(e,t){return new br(e,3,t,dt.min(),dt.min(),As.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jd{constructor(e,t){this.position=e,this.inclusive=t}}function dte(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?We.comparator(We.fromName(o.referenceValue),t.key):Ud(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function hte(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tu(n.position[t],e.position[t]))return!1;return!0}class qI{constructor(e,t="asc"){this.field=e,this.dir=t}}function bFe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fte{}class cn extends fte{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new IFe(e,t,r):"array-contains"===t?new TFe(e,r):"in"===t?new vte(e,r):"not-in"===t?new CFe(e,r):"array-contains-any"===t?new DFe(e,r):new cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new EFe(e,r):new wFe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ud(t,this.value)):null!==t&&Bd(this.value)===Bd(t)&&this.matchesComparison(Ud(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends fte{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new zn(e,t)}matches(e){return D_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function D_(n){return"and"===n.op}function YB(n){return"or"===n.op}function JB(n){return pte(n)&&D_(n)}function pte(n){for(const e of n.filters)if(e instanceof zn)return!1;return!0}function XB(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+C_(n.value);if(JB(n))return n.filters.map(e=>XB(e)).join(",");{const e=n.filters.map(t=>XB(t)).join(",");return`${n.op}(${e})`}}function gte(n,e){return n instanceof cn?(r=n,(i=e)instanceof cn&&r.op===i.op&&r.field.isEqual(i.field)&&tu(r.value,i.value)):n instanceof zn?function(r,i){return i instanceof zn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&gte(o,i.filters[a]),!0)}(n,e):void rt();var r,i}function mte(n,e){const t=n.filters.concat(e);return zn.create(t,n.op)}function _te(n){return n instanceof cn?`${(t=n).field.canonicalString()} ${t.op} ${C_(t.value)}`:n instanceof zn?function(t){return t.op.toString()+" {"+t.getFilters().map(_te).join(" ,")+"}"}(n):"Filter";var t}class IFe extends cn{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class EFe extends cn{constructor(e,t){super(e,"in",t),this.keys=yte(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wFe extends cn{constructor(e,t){super(e,"not-in",t),this.keys=yte(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yte(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class TFe extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return HI(t)&&$I(t.arrayValue,this.value)}}class vte extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$I(this.value.arrayValue,t)}}class CFe extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if($I(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$I(this.value.arrayValue,t)}}class DFe extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!HI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$I(this.value.arrayValue,r))}}class AFe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ZB(n,e=null,t=[],r=[],i=null,s=null,o=null){return new AFe(n,e,t,r,i,s,o)}function rp(n){const e=He(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>XB(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),BI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>C_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>C_(r)).join(",")),e.ue=t}return e.ue}function zI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bFe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gte(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hte(n.startAt,e.startAt)&&hte(n.endAt,e.endAt)}function c1(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function u1(n,e){return n.filters.filter(t=>t instanceof cn&&t.field.isEqual(e))}function bte(n,e,t){let r=r1,i=!0;for(const s of u1(n,e)){let o=r1,a=!0;switch(s.op){case"<":case"<=":o=yFe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=r1}cte({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];cte({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function Ite(n,e,t){let r=Vd,i=!0;for(const s of u1(n,e)){let o=Vd,a=!0;switch(s.op){case">=":case">":o=vFe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Vd}ute({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];ute({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class pl{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function Ete(n,e,t,r,i,s,o,a){return new pl(n,e,t,r,i,s,o,a)}function A_(n){return new pl(n)}function wte(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function eU(n){return null!==n.collectionGroup}function S_(n){const e=He(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zn(vr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qI(s,r))}),t.has(vr.keyField().canonicalString())||e.ce.push(new qI(vr.keyField(),r))}return e.ce}function zs(n){const e=He(n);return e.le||(e.le=function Cte(n,e){if("F"===n.limitType)return ZB(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new qI(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new jd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new jd(n.startAt.position,n.startAt.inclusive):null;return ZB(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,S_(n))),e.le}function tU(n,e){const t=n.filters.concat([e]);return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function l1(n,e,t){return new pl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function WI(n,e){return zI(zs(n),zs(e))&&n.limitType===e.limitType}function Dte(n){return`${rp(zs(n))}|lt:${n.limitType}`}function R_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_te(i)).join(", ")}]`),BI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>C_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>C_(i)).join(",")),`Target(${r})`}(zs(n))}; limitType=${n.limitType})`}function KI(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):We.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of S_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const u=dte(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,S_(r),i)||r.endAt&&!function(o,a,c){const u=dte(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,S_(r),i)));var r,i}function Ate(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ste(n){return(e,t)=>{let r=!1;for(const i of S_(n)){const s=SFe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function SFe(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return null!==c&&null!==u?Ud(c,u):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}class gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fd(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Zee(this.inner)}size(){return this.innerSize}}const RFe=new fr(We.comparator);function Lo(){return RFe}const Rte=new fr(We.comparator);function QI(...n){let e=Rte;for(const t of n)e=e.insert(t.key,t);return e}function xte(n){let e=Rte;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nu(){return YI()}function Nte(){return YI()}function YI(){return new gl(n=>n.toString(),(n,e)=>n.isEqual(e))}const xFe=new fr(We.comparator),NFe=new Zn(We.comparator);function Wt(...n){let e=NFe;for(const t of n)e=e.add(t);return e}const MFe=new Zn(kt);function nU(){return MFe}function rU(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:UI(e)?"-0":e}}function Mte(n){return{integerValue:""+n}}function kte(n,e){return Gee(e)?Mte(e):rU(n,e)}class d1{constructor(){this._=void 0}}function kFe(n,e,t){return n instanceof x_?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&t1(s)&&(s=n1(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ip?Ote(n,e):n instanceof sp?Fte(n,e):function(i,s){const o=Pte(i,s),a=Lte(o)+Lte(i.Pe);return QB(o)&&QB(i.Pe)?Mte(a):rU(i.serializer,a)}(n,e)}function PFe(n,e,t){return n instanceof ip?Ote(n,e):n instanceof sp?Fte(n,e):t}function Pte(n,e){return n instanceof N_?QB(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class x_ extends d1{}class ip extends d1{constructor(e){super(),this.elements=e}}function Ote(n,e){const t=Vte(e);for(const r of n.elements)t.some(i=>tu(i,r))||t.push(r);return{arrayValue:{values:t}}}class sp extends d1{constructor(e){super(),this.elements=e}}function Fte(n,e){let t=Vte(e);for(const r of n.elements)t=t.filter(i=>!tu(i,r));return{arrayValue:{values:t}}}class N_ extends d1{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Lte(n){return Sr(n.integerValue||n.doubleValue)}function Vte(n){return HI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class JI{constructor(e,t){this.field=e,this.transform=t}}class FFe{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function h1(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class f1{}function Bte(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new k_(n.key,Rr.none()):new M_(n.key,n.data,Rr.none());{const t=n.data,r=As.empty();let i=new Zn(vr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new ml(n.key,r,new Fo(i.toArray()),Rr.none())}}function LFe(n,e,t){n instanceof M_?function(i,s,o){const a=i.value.clone(),c=$te(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ml?function(i,s,o){if(!h1(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$te(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(jte(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function XI(n,e,t,r){return n instanceof M_?function(s,o,a,c){if(!h1(s.precondition,o))return a;const u=s.value.clone(),l=Hte(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ml?function(s,o,a,c){if(!h1(s.precondition,o))return a;const u=Hte(s.fieldTransforms,c,o),l=o.data;return l.setAll(jte(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):(a=t,h1(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function VFe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Pte(r.transform,i||null);null!=s&&(null===t&&(t=As.empty()),t.set(r.field,s))}return t||null}function Ute(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&I_(r,i,(s,o)=>function OFe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ip&&i instanceof ip||r instanceof sp&&i instanceof sp?I_(r.elements,i.elements,tu):r instanceof N_&&i instanceof N_?tu(r.Pe,i.Pe):r instanceof x_&&i instanceof x_);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class M_ extends f1{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ml extends f1{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function jte(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $te(n,e,t){const r=new Map;ot(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,PFe(o,a,t[i]))}return r}function Hte(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,kFe(s,o,e))}return r}class k_ extends f1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iU extends f1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sU{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&LFe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=XI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=XI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Nte();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=Bte(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&I_(this.mutations,e.mutations,(t,r)=>Ute(t,r))&&I_(this.baseMutations,e.baseMutations,(t,r)=>Ute(t,r))}}class oU{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ot(e.mutations.length===r.length);let i=function(){return xFe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new oU(e,t,r,i)}}class aU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class BFe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ci,En;function qte(n){switch(n){default:return rt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function zte(n){if(void 0===n)return ci("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Ci.OK:return oe.OK;case Ci.CANCELLED:return oe.CANCELLED;case Ci.UNKNOWN:return oe.UNKNOWN;case Ci.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ci.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ci.INTERNAL:return oe.INTERNAL;case Ci.UNAVAILABLE:return oe.UNAVAILABLE;case Ci.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ci.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ci.NOT_FOUND:return oe.NOT_FOUND;case Ci.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ci.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ci.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ci.ABORTED:return oe.ABORTED;case Ci.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ci.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ci.DATA_LOSS:return oe.DATA_LOSS;default:return rt()}}(En=Ci||(Ci={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";function Wte(){return new TextEncoder}const UFe=new Xf([4294967295,4294967295],0);function Kte(n){const e=Wte().encode(n),t=new Aee;return t.update(e),new Uint8Array(t.digest())}function Qte(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xf([t,r],0),new Xf([i,s],0)]}class cU{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ZI(`Invalid padding: ${t}`);if(r<0)throw new ZI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ZI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ZI(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xf.fromNumber(r)));return 1===i.compare(UFe)&&(i=new Xf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Kte(e),[r,i]=Qte(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cU(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=Kte(e),[r,i]=Qte(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ZI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class eE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,tE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new eE(dt.min(),i,new fr(kt),Lo(),Wt())}}class tE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tE(r,t,Wt(),Wt(),Wt())}}class g1{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Yte{constructor(e,t){this.targetId=e,this.me=t}}class Jte{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Xte{constructor(){this.fe=0,this.ge=ene(),this.pe=Gr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wt(),t=Wt(),r=Wt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new tE(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=ene()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jFe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lo(),this.qe=Zte(),this.Qe=new fr(kt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(c1(s))if(0===r){const o=new We(s.path);this.Ue(t,o,br.newNoDocument(o,dt.min()))}else ot(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=fl(r).toUint8Array()}catch(c){if(c instanceof tte)return fa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new cU(o,i,s)}catch(c){return fa(c instanceof ZI?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&c1(a.target)){const c=new We(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,br.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Wt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new eE(e,t,this.Qe,this.ke,r);return this.ke=Lo(),this.qe=Zte(),this.Qe=new fr(kt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xte,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Zn(kt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xte),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Zte(){return new fr(We.comparator)}function ene(){return new fr(We.comparator)}const $Fe={asc:"ASCENDING",desc:"DESCENDING"},HFe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GFe={and:"AND",or:"OR"};class qFe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uU(n,e){return n.useProto3Json||BI(e)?e:{value:e}}function P_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tne(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zFe(n,e){return P_(n,e.toTimestamp())}function ui(n){return ot(!!n),dt.fromTimestamp(function(t){const r=hl(t);return new Ar(r.seconds,r.nanos)}(n))}function lU(n,e){return dU(n,e).canonicalString()}function dU(n,e){const t=(i=n,new an(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function nne(n){const e=an.fromString(n);return ot(fne(e)),e}function nE(n,e){return lU(n.databaseId,e.path)}function ru(n,e){const t=nne(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(sne(t))}function rne(n,e){return lU(n.databaseId,e)}function ine(n){const e=nne(n);return 4===e.length?an.emptyPath():sne(e)}function hU(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sne(n){return ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function one(n,e,t){return{name:nE(n,e),fields:t.value.mapValue.fields}}function ane(n,e,t){const r=ru(n,e.name),i=ui(e.updateTime),s=e.createTime?ui(e.createTime):dt.min(),o=new As({mapValue:{fields:e.fields}}),a=br.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function rE(n,e){let t;if(e instanceof M_)t={update:one(n,e.key,e.value)};else if(e instanceof k_)t={delete:nE(n,e.key)};else if(e instanceof ml)t={update:one(n,e.key,e.data),updateMask:eLe(e.fieldMask)};else{if(!(e instanceof iU))return rt();t={verify:nE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof x_)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ip)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof N_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:zFe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function fU(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Rr.updateTime(ui(s.updateTime)):void 0!==s.exists?Rr.exists(s.exists):Rr.none():Rr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(ot("REQUEST_TIME"===a.setToServerValue),c=new x_):"appendMissingElements"in a?c=new ip(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new sp(a.removeAllFromArray.values||[]):"increment"in a?c=new N_(o,a.increment):rt();const u=vr.fromServerFormat(a.fieldPath);return new JI(u,c)}(n,i)):[];var s;if(e.update){const i=ru(n,e.update.name),s=new As({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Fo((e.updateMask.fieldPaths||[]).map(l=>vr.fromServerFormat(l)));return new ml(i,s,o,t,r)}return new M_(i,s,t,r)}if(e.delete){const i=ru(n,e.delete);return new k_(i,t)}if(e.verify){const i=ru(n,e.verify);return new iU(i,t)}return rt()}function cne(n,e){return{documents:[rne(n,e.path)]}}function m1(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rne(n,i);const s=function(u){if(0!==u.length)return hne(zn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(0!==u.length)return u.map(l=>{return{field:$d((_=l).field),direction:JFe(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=uU(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i};var u}function lne(n){let e=ine(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ot(1===r);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=function(f){const _=dne(f);return _ instanceof zn&&JB(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new qI(O_((I=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let a=null;t.limit&&(a=function(f){let _;return _="object"==typeof f?f.value:f,BI(_)?null:_}(t.limit));let c=null;var f;t.startAt&&(c=new jd((f=t.startAt).values||[],!!f.before));let u=null;return t.endAt&&(u=function(f){return new jd(f.values||[],!f.before)}(t.endAt)),Ete(e,i,o,s,a,"F",c,u)}function dne(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=O_(t.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=O_(t.unaryFilter.field);return cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=O_(t.unaryFilter.field);return cn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=O_(t.unaryFilter.field);return cn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?cn.create(O_((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return zn.create(t.compositeFilter.filters.map(r=>dne(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt()}}(t.compositeFilter.op))}(n):rt();var t}function JFe(n){return $Fe[n]}function XFe(n){return HFe[n]}function ZFe(n){return GFe[n]}function $d(n){return{fieldPath:n.canonicalString()}}function O_(n){return vr.fromServerFormat(n.fieldPath)}function hne(n){return n instanceof cn?function(t){if("=="===t.op){if(ste(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NAN"}};if(ite(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ste(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NOT_NAN"}};if(ite(t.value))return{unaryFilter:{field:$d(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$d(t.field),op:XFe(t.op),value:t.value}}}(n):n instanceof zn?function(t){const r=t.getFilters().map(i=>hne(i));return 1===r.length?r[0]:{compositeFilter:{op:ZFe(t.op),filters:r}}}(n):rt()}function eLe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fne(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class _l{constructor(e,t,r,i,s=dt.min(),o=dt.min(),a=Gr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new _l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pne{constructor(e){this.ct=e}}function gne(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:nE(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:P_(s,o.version.toTimestamp()),createTime:P_(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:op(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:op(e.version)}}var s,o;return r}function _1(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function op(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ap(n){const e=new Ar(n.seconds,n.nanoseconds);return dt.fromTimestamp(e)}function cp(n,e){const t=(e.baseMutations||[]).map(s=>fU(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>fU(n.ct,s)),i=Ar.fromMillis(e.localWriteTimeMs);return new sU(e.batchId,i,t,r)}function iE(n){const e=ap(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ap(n.lastLimboFreeSnapshotVersion):dt.min();let r;return r=void 0!==n.query.documents?(ot(1===(s=n.query).documents.length),zs(A_(ine(s.documents[0])))):function(s){return zs(lne(s))}(n.query),new _l(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken));var s}function mne(n,e){const t=op(e.snapshotVersion),r=op(e.lastLimboFreeSnapshotVersion);let i;i=c1(e.target)?cne(n.ct,e.target):m1(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pU(n){const e=lne({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?l1(e,e.limit,"L"):e}function gU(n,e){return new aU(e.largestBatchId,fU(n.ct,e.overlayMutation))}function _ne(n,e){const t=e.path.lastSegment();return[n,qs(e.path.popLast()),t]}function yne(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:op(r.readTime),documentKey:qs(r.documentKey.path),largestBatchId:r.largestBatchId}}class nLe{getBundleMetadata(e,t){return vne(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:ap(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return vne(e).put({bundleId:(i=t).id,createTime:op(ui(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return bne(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:pU(s.bundledQuery),readTime:ap(s.readTime)};var s})}saveNamedQuery(e,t){return bne(e).put({name:(i=t).name,readTime:op(ui(i.readTime)),bundledQuery:i.bundledQuery});var i}}function vne(n){return $i(n,"bundles")}function bne(n){return $i(n,"namedQueries")}class y1{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new y1(e,t.uid||"")}getOverlay(e,t){return sE(e).get(_ne(this.userId,t)).next(r=>r?gU(this.serializer,r):null)}getOverlays(e,t){const r=nu();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new aU(t,o);i.push(this.ht(e,a))}),J.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(qs(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(sE(e).j("collectionPathOverlayIndex",a))}),J.waitFor(s)}getOverlaysForCollection(e,t,r){const i=nu(),s=qs(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return sE(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=gU(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=nu();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sE(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,l)=>{const f=gU(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):l.done()}).next(()=>s)}ht(e,t){return sE(e).put(function(i,s,o){const[a,c,u]=_ne(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rE(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function sE(n){return $i(n,"documentOverlays")}class rLe{Pt(e){return $i(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Gr.fromUint8Array(r):Gr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class up{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),UI(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=hl(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(fl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?ote(e)?this.dt(t,Number.MAX_SAFE_INTEGER):a1(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):rt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Sr(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),We.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function iLe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Ine(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=iLe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}up.vt=new up;class sLe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=Ine(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=Ine(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class oLe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class aLe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class oE{constructor(){this.jt=new sLe,this.Ht=new oLe(this.jt),this.Jt=new aLe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class lp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lp(this.indexId,this.documentKey,this.arrayValue,r)}}function Hd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ene(n.arrayValue,e.arrayValue),0!==t?t:(t=Ene(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function Ene(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class wne{constructor(e){this.Xt=new Zn((t,r)=>vr.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ot(e.collectionGroup===this.collectionId),this.nn)return!1;const t=$B(e);if(void 0!==t&&!this.sn(t))return!1;const r=Zf(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Zn(vr.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new ep(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ep(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ep(r.field,"asc"===r.dir?0:1)));return new E_(E_.UNKNOWN_ID,this.collectionId,t,w_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Tne(n){var e,t;if(ot(n instanceof cn||n instanceof zn),n instanceof cn){if(n instanceof vte){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>cn.create(n.field,"==",s)))||[];return zn.create(i,"or")}return n}const r=n.filters.map(i=>Tne(i));return zn.create(r,n.op)}function cLe(n){if(0===n.getFilters().length)return[];const e=yU(Tne(n));return ot(Cne(e)),mU(e)||_U(e)?[e]:e.getFilters()}function mU(n){return n instanceof cn}function _U(n){return n instanceof zn&&JB(n)}function Cne(n){return mU(n)||_U(n)||function(t){if(t instanceof zn&&YB(t)){for(const r of t.getFilters())if(!mU(r)&&!_U(r))return!1;return!0}return!1}(n)}function yU(n){if(ot(n instanceof cn||n instanceof zn),n instanceof cn)return n;if(1===n.filters.length)return yU(n.filters[0]);const e=n.filters.map(r=>yU(r));let t=zn.create(e,n.op);return t=v1(t),Cne(t)?t:(ot(t instanceof zn),ot(D_(t)),ot(t.filters.length>1),t.filters.reduce((r,i)=>vU(r,i)))}function vU(n,e){let t;return ot(n instanceof cn||n instanceof zn),ot(e instanceof cn||e instanceof zn),t=n instanceof cn?e instanceof cn?zn.create([n,e],"and"):Dne(n,e):e instanceof cn?Dne(e,n):function(i,s){if(ot(i.filters.length>0&&s.filters.length>0),D_(i)&&D_(s))return mte(i,s.getFilters());const o=YB(i)?i:s,a=YB(i)?s:i,c=o.filters.map(u=>vU(u,a));return zn.create(c,"or")}(n,e),v1(t)}function Dne(n,e){if(D_(e))return mte(e,n.getFilters());{const t=e.filters.map(r=>vU(n,r));return zn.create(t,"or")}}function v1(n){if(ot(n instanceof cn||n instanceof zn),n instanceof cn)return n;const e=n.getFilters();if(1===e.length)return v1(e[0]);if(pte(n))return n;const t=e.map(i=>v1(i)),r=[];return t.forEach(i=>{i instanceof cn?r.push(i):i instanceof zn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:zn.create(r,n.op)}class uLe{constructor(){this.un=new bU}addToCollectionParentIndex(e,t){return this.un.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(pa.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class bU{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zn(an.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(an.comparator)).toArray()}}const b1=new Uint8Array(0);class lLe{constructor(e,t){this.databaseId=t,this.cn=new bU,this.ln=new gl(r=>rp(r),(r,i)=>zI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:qs(i)};return Ane(e).put(s)}return J.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Lee(t),""],!1,!0);return Ane(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(eu(o.parent))}return r})}addFieldIndex(e,t){const r=aE(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=L_(e);return s.next(a=>{o.put(yne(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=aE(e),i=L_(e),s=F_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=aE(e),r=F_(e),i=L_(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return J.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new wne(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=F_(e);let i=!0;const s=new Map;return J.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Wt();const a=[];return J.forEach(s,(c,u)=>{var B;Re("IndexedDbIndexManager",`Using index ${B=c,`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`} to execute ${rp(t)}`);const l=function(B,ee){const ie=$B(ee);if(void 0===ie)return null;for(const de of u1(B,ie.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(u,c),f=function(B,ee){const ie=new Map;for(const de of Zf(ee))for(const M of u1(B,de.fieldPath))switch(M.op){case"==":case"in":ie.set(de.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return ie.set(de.fieldPath.canonicalString(),M.value),Array.from(ie.values())}return null}(u,c),_=function(B,ee){const ie=[];let de=!0;for(const M of Zf(ee)){const R=0===M.kind?bte(B,M.fieldPath,B.startAt):Ite(B,M.fieldPath,B.startAt);ie.push(R.value),de&&(de=R.inclusive)}return new jd(ie,de)}(u,c),y=function(B,ee){const ie=[];let de=!0;for(const M of Zf(ee)){const R=0===M.kind?Ite(B,M.fieldPath,B.endAt):bte(B,M.fieldPath,B.endAt);ie.push(R.value),de&&(de=R.inclusive)}return new jd(ie,de)}(u,c),I=this.In(c,u,_),T=this.In(c,u,y),A=this.Tn(c,u,f),x=this.En(c.indexId,l,I,_.inclusive,T,y.inclusive,A);return J.forEach(x,N=>r.G(N,t.limit).next(B=>{B.forEach(ee=>{const ie=We.fromSegments(ee.documentKey);o.has(ie)||(o=o.add(ie),a.push(ie))})}))}).next(()=>a)}return J.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:cLe(zn.create(e.filters,"and")).map(r=>ZB(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),u=c/(null!=t?t.length:1),l=[];for(let f=0;f<c;++f){const _=t?this.dn(t[f/u]):b1,y=this.An(e,_,r[f%u],i),I=this.Rn(e,_,s[f%u],o),T=a.map(A=>this.An(e,_,A,!0));l.push(...this.createRange(y,I,T))}return l}An(e,t,r,i){const s=new lp(e,We.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new lp(e,We.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new wne(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return J.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let u=new Zn(vr.comparator),l=!1;for(const f of c.filters)for(const _ of f.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?l=!0:u=u.add(_.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new oE;for(const i of Zf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);up.vt.It(s,o)}return r.zt()}dn(e){const t=new oE;return up.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new oE;return up.vt.It(np(this.databaseId,t),r.Yt(function(s){const o=Zf(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new oE);let s=0;for(const o of Zf(e)){const a=r[s++];for(const c of i)if(this.fn(t,o.fieldPath)&&HI(a))i=this.gn(i,o,a);else{const u=c.Yt(o.kind);up.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new oE;c.seed(a.zt()),up.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof cn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=aE(e),i=L_(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return J.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(l,f){const _=f?new w_(f.sequenceNumber,new pa(ap(f.readTime),new We(eu(f.documentKey)),f.largestBatchId)):w_.empty(),y=l.fields.map(([I,T])=>new ep(vr.fromServerFormat(I),T));return new E_(l.indexId,l.collectionGroup,y,_)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=aE(e),s=L_(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>J.forEach(a,c=>s.put(yne(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return J.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?J.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),J.forEach(a,c=>this.wn(e,i,c).next(u=>{const l=this.Sn(s,c);return u.isEqual(l)?J.resolve():this.bn(e,s,c,u,l)}))))})}Dn(e,t,r,i){return F_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return F_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=F_(e);let s=new Zn(Hd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new lp(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Zn(Hd);const i=this.Vn(t,e);if(null==i)return r;const s=$B(t);if(null!=s){const o=e.data.field(s.fieldPath);if(HI(o))for(const a of o.arrayValue.values||[])r=r.add(new lp(t.indexId,e.key,this.dn(a),i))}else r=r.add(new lp(t.indexId,e.key,b1,i));return r}bn(e,t,r,i,s){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,l,f,_){const y=c.getIterator(),I=u.getIterator();let T=T_(y),A=T_(I);for(;T||A;){let x=!1,N=!1;if(T&&A){const B=l(T,A);B<0?N=!0:B>0&&(x=!0)}else null!=T?N=!0:x=!0;x?(f(A),A=T_(I)):N?(_(T),T=T_(y)):(T=T_(y),A=T_(I))}}(i,s,Hd,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),J.waitFor(o)}yn(e){let t=1;return L_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Hd(o,a)).filter((o,a,c)=>!a||0!==Hd(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=Hd(o,e),c=Hd(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,b1,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,b1,[]]))}return s}Cn(e,t){return Hd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sne)}getMinOffset(e,t){return J.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||rt())).next(Sne)}}function Ane(n){return $i(n,"collectionParents")}function F_(n){return $i(n,"indexEntries")}function aE(n){return $i(n,"indexConfiguration")}function L_(n){return $i(n,"indexState")}function Sne(n){ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;HB(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new pa(e.readTime,e.documentKey,t)}const Rne={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xne(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(l,f,_)=>(a++,_.delete()));s.push(c.next(()=>{ot(1===a)}));const u=[];for(const l of t.mutations){const f=Wee(e,l.key.path,t.batchId);s.push(i.delete(f)),u.push(l.key)}return J.waitFor(s).next(()=>u)}function I1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class E1{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ot(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new E1(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gd(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=V_(e),o=Gd(e);return o.add({}).next(a=>{ot("number"==typeof a);const c=new sU(a,t,r,i),u=function(y,I,T){const A=T.baseMutations.map(N=>rE(y.ct,N)),x=T.mutations.map(N=>rE(y.ct,N));return{userId:I,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:A,mutations:x}}(this.serializer,this.userId,c),l=[];let f=new Zn((_,y)=>kt(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=Wee(this.userId,_.key.path,a);f=f.add(_.key.path.popLast()),l.push(o.put(u)),l.push(s.put(y,JOe))}return f.forEach(_=>{l.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),J.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return Gd(e).get(t).next(r=>r?(ot(r.userId===this.userId),cp(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?J.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Gd(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(ot(a.batchId>=r),s=cp(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gd(e).U("userMutationsIndex",t).next(r=>r.map(i=>cp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ZS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return V_(e).J({range:i},(o,a,c)=>{const[u,l,f]=o,_=eu(l);if(u===this.userId&&t.path.isEqual(_))return Gd(e).get(f).next(y=>{if(!y)throw rt();ot(y.userId===this.userId),s.push(cp(this.serializer,y))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(kt);const i=[];return t.forEach(s=>{const o=ZS(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=V_(e).J({range:a},(u,l,f)=>{const[_,y,I]=u,T=eu(y);_===this.userId&&s.path.isEqual(T)?r=r.add(I):f.done()});i.push(c)}),J.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ZS(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Zn(kt);return V_(e).J({range:o},(c,u,l)=>{const[f,_,y]=c,I=eu(_);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):l.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Gd(e).get(s).next(o=>{if(null===o)throw rt();ot(o.userId===this.userId),r.push(cp(this.serializer,o))}))}),J.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xne(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),J.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return J.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return V_(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=eu(s[1]);i.push(c)}else a.done()}).next(()=>{ot(0===i.length)})})}containsKey(e,t){return Nne(e,this.userId,t)}Nn(e){return Mne(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Nne(n,e,t){const r=ZS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return V_(n).J({range:s,H:!0},(a,c,u)=>{const[l,f,_]=a;l===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function Gd(n){return $i(n,"mutations")}function V_(n){return $i(n,"documentMutations")}function Mne(n){return $i(n,"mutationQueues")}class dp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new dp(0)}static kn(){return new dp(-1)}}class dLe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new dp(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>dt.fromTimestamp(new Ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>B_(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ot(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return B_(e).J((o,a)=>{const c=iE(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>J.waitFor(s)).next(()=>i)}forEachTarget(e,t){return B_(e).J((r,i)=>{const s=iE(i);t(s)})}qn(e){return kne(e).get("targetGlobalKey").next(t=>(ot(null!==t),t))}Qn(e,t){return kne(e).put("targetGlobalKey",t)}Kn(e,t){return B_(e).put(mne(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return B_(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const u=iE(a);zI(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=qd(e);return t.forEach(o=>{const a=qs(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),J.waitFor(i)}removeMatchingKeys(e,t,r){const i=qd(e);return J.forEach(t,s=>{const o=qs(s.path);return J.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=qd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qd(e);let s=Wt();return i.J({range:r,H:!0},(o,a,c)=>{const u=eu(o[1]),l=new We(u);s=s.add(l)}).next(()=>s)}containsKey(e,t){const r=qs(t.path),i=IDBKeyRange.bound([r],[Lee(r)],!1,!0);let s=0;return qd(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{0!==o&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return B_(e).get(t).next(r=>r?iE(r):null)}}function B_(n){return $i(n,"targets")}function kne(n){return $i(n,"targetGlobal")}function qd(n){return $i(n,"targetDocuments")}function Pne([n,e],[t,r]){const i=kt(n,t);return 0===i?kt(e,r):i}class hLe{constructor(e){this.Un=e,this.buffer=new Zn(Pne),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pne(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class One{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,D.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Od(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Pd(r)}yield t.Hn(3e5)}))}}class fLe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return J.resolve(ga.oe);const r=new hLe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Rne)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rne):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),b_()<=Xc.$b.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-l}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${f} documents in `+(u-c)+`ms\nTotal Duration: ${u-l}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}class pLe{constructor(e,t){this.db=e,this.garbageCollector=function Fne(n,e){return new fLe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return w1(e,r)}removeReference(e,t,r){return w1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return w1(e,t)}nr(e,t){return function(i,s){let o=!1;return Mne(i).Y(a=>Nne(i,a,s).next(c=>(c&&(o=!0),J.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const c=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,dt.min()),qd(e).delete([0,qs(o.path)])))});i.push(c)}}).next(()=>J.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return w1(e,t)}tr(e,t){const r=qd(e);let i,s=ga.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{0===o?(s!==ga.oe&&t(new We(eu(i)),s),s=u,i=c):s=ga.oe}).next(()=>{s!==ga.oe&&t(new We(eu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function w1(n,e){return qd(n).put((i=n.currentSequenceNumber,{targetId:0,path:qs(e.path),sequenceNumber:i}));var i}class Lne{constructor(){this.changes=new gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gLe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return hp(e).put(r)}removeEntry(e,t,r){return hp(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_1(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=br.newInvalidDocument(t);return hp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:br.newInvalidDocument(t)};return hp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},(i,s)=>{r={document:this.ir(t,s),size:I1(s)}}).next(()=>r)}getEntries(e,t){let r=Lo();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Lo(),i=new fr(We.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,I1(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return J.resolve();let i=new Zn(jne);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(cE(i.first()),cE(i.last())),o=i.getIterator();let a=o.getNext();return hp(e).J({index:"documentKeyIndex",range:s},(c,u,l)=>{const f=We.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&jne(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?l.$(cE(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),_1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hp(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let l=Lo();for(const f of u){const _=this.ir(We.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);_.isFoundDocument()&&(KI(t,_)||i.has(_.key))&&(l=l.insert(_.key,_))}return l})}getAllFromCollectionGroup(e,t,r,i){let s=Lo();const o=Une(t,r),a=Une(t,pa.max());return hp(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,l)=>{const f=this.ir(We.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new mLe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bne(e).get("remoteDocumentGlobalKey").next(t=>(ot(!!t),t))}rr(e,t){return Bne(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function tLe(n,e){let t;if(e.document)t=ane(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=ap(e.noDocument.readTime);t=br.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=We.fromSegments(e.unknownDocument.path),i=ap(e.unknownDocument.version);t=br.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Ar(i[0],i[1]);return dt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(dt.min()))return r}return br.newInvalidDocument(e)}}function Vne(n){return new gLe(n)}class mLe extends Lne{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new gl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Zn((s,o)=>kt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=gne(this.cr.serializer,o);i=i.add(s.path.popLast());const u=I1(c);r+=u-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=gne(this.cr.serializer,o.convertToNoDocument(dt.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),J.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Bne(n){return $i(n,"remoteDocumentGlobal")}function hp(n){return $i(n,"remoteDocumentsV14")}function cE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Une(n,e){const t=e.documentKey.path.toArray();return[n,_1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jne(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=kt(t[s],r[s]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class _Le{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $ne{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&XI(r.mutation,i,Fo.empty(),Ar.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=nu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=QI();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=nu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Lo();const o=YI(),a=YI();return t.forEach((c,u)=>{const l=r.get(u.key);i.has(u.key)&&(void 0===l||l.mutation instanceof ml)?s=s.insert(u.key,u):void 0!==l?(o.set(u.key,l.mutation.getFieldMask()),XI(l.mutation,u,l.mutation.getFieldMask(),Ar.now())):o.set(u.key,Fo.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),t.forEach((u,l)=>{var f;return a.set(u,new _Le(l,null!==(f=o.get(u))&&void 0!==f?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=YI();let i=new fr((o,a)=>o-a),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let l=r.get(c)||Fo.empty();l=a.applyToLocalView(u,l),r.set(c,l);const f=(i.get(a.batchId)||Wt()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,f=Nte();l.forEach(_=>{if(!s.has(_)){const y=Bte(t.get(_),r.get(_));null!==y&&f.set(_,y),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return J.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return We.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):eU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):J.resolve(nu());let a=-1,c=s;return o.next(u=>J.forEach(u,(l,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(l)?J.resolve():this.remoteDocumentCache.getEntry(e,l).next(_=>{c=c.insert(l,_)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Wt())).next(l=>({batchId:a,changes:xte(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=QI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=QI();return this.indexManager.getCollectionParents(e,s).next(a=>J.forEach(a,c=>{const u=(f=t,_=c.child(s),new pl(_,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,_;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((f,_)=>{o=o.insert(f,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{const l=u.getKey();null===o.get(l)&&(o=o.insert(l,br.newInvalidDocument(l)))});let a=QI();return o.forEach((c,u)=>{const l=s.get(c);void 0!==l&&XI(l.mutation,u,Fo.empty(),Ar.now()),KI(t,u)&&(a=a.insert(c,u))}),a})}}class yLe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return J.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:ui(i.createTime)}),J.resolve();var i}getNamedQuery(e,t){return J.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:pU(i.bundledQuery),readTime:ui(i.readTime)}),J.resolve();var i}}class vLe{constructor(){this.overlays=new fr(We.comparator),this.Ir=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nu();return J.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=nu(),s=t.length+1,o=new We(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new fr((u,l)=>u-l);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=s.get(u.largestBatchId);null===l&&(l=nu(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=nu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return J.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aU(t,r));let s=this.Ir.get(t);void 0===s&&(s=Wt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class bLe{constructor(){this.sessionToken=Gr.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}class IU{constructor(){this.Tr=new Zn(as.Er),this.dr=new Zn(as.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new as(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new as(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new We(new an([])),r=new as(t,e),i=new as(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new We(new an([])),r=new as(t,e),i=new as(t,e+1);let s=Wt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new as(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class as{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return We.comparator(e.key,t.key)||kt(e.wr,t.wr)}static Ar(e,t){return kt(e.wr,t.wr)||We.comparator(e.key,t.key)}}class ILe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Zn(as.Er)}checkEmpty(e){return J.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new sU(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new as(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,t){return J.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new as(t,0),i=new as(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(kt);return t.forEach(i=>{const s=new as(i,0),o=new as(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;We.isDocumentKey(s)||(s=s.child(""));const o=new as(new We(s),0);let a=new Zn(kt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},o),J.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ot(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return J.forEach(t.mutations,i=>{const s=new as(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new as(t,0),i=this.br.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return J.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ELe{constructor(e){this.Mr=e,this.docs=new fr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():br.newInvalidDocument(t))}getEntries(e,t){let r=Lo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():br.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Lo();const o=t.path,a=new We(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||HB(Bee(l),r)<=0||(i.has(l.key)||KI(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,t,r,i){rt()}Or(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wLe(this)}getSize(e){return J.resolve(this.size)}}class wLe extends Lne{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class TLe{constructor(e){this.persistence=e,this.Nr=new gl(t=>rp(t),zI),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new IU,this.targetCount=0,this.kr=dp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),J.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new dp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Kn(t),J.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.Br.containsKey(t))}}class EU{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ga(0),this.Kr=!1,this.Kr=!0,this.$r=new bLe,this.referenceDelegate=e(this),this.Ur=new TLe(this),this.indexManager=new uLe,this.remoteDocumentCache=new ELe(r=>this.referenceDelegate.Wr(r)),this.serializer=new pne(t),this.Gr=new yLe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vLe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new ILe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new CLe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class CLe extends jee{constructor(e){super(),this.currentSequenceNumber=e}}class T1{constructor(e){this.persistence=e,this.Jr=new IU,this.Yr=null}static Zr(e){return new T1(e)}get Xr(){if(this.Yr)return this.Yr;throw rt()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),J.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const i=We.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,dt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return J.or([()=>J.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class DLe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new XS("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zee,{unique:!0}),c.createObjectStore("documentMutations"),Hne(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=J.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Hne(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zee,{unique:!0});const f=u.store("mutations"),_=l.map(y=>f.put(y));return J.waitFor(_)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:uFe});u.createIndex("collectionPathOverlayIndex",lFe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",dFe,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:XOe});u.createIndex("documentKeyIndex",ZOe),u.createIndex("collectionGroupIndex",eFe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:sFe}).createIndex("sequenceNumberIndex",oFe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:aFe}).createIndex("documentKeyIndex",cFe,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=I1(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>J.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>J.forEach(a,c=>{ot(c.userId===s.userId);const u=cp(this.serializer,c);return xne(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new an(o),u=[0,qs(c)];s.push(t.get(u).next(l=>l?J.resolve():t.put({targetId:0,path:qs(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>J.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:iFe});const r=t.store("collectionParents"),i=new bU,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:qs(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new an(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const l=eu(a);return s(l.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=iE(i),o=mne(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(f=o,f.document?new We(an.fromString(f.document.name).popFirst(5)):f.noDocument?We.fromSegments(f.noDocument.path):f.unknownDocument?We.fromSegments(f.unknownDocument.path):rt()).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var f;i.push(a.put(u))}).next(()=>J.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=Vne(this.serializer),s=new EU(T1.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let l=null!==(u=a.get(c.userId))&&void 0!==u?u:Wt();cp(this.serializer,c).keys().forEach(f=>l=l.add(f)),a.set(c.userId,l)}),J.forEach(a,(c,u)=>{const l=new ss(u),f=y1.lt(this.serializer,l),_=s.getIndexManager(l),y=E1.lt(l,this.serializer,_,s.referenceDelegate);return new $ne(i,y,f,_).recalculateAndSaveOverlaysForDocumentKeys(new WB(t,ga.oe),c).next()})})}}function Hne(n){n.createObjectStore("targetDocuments",{keyPath:nFe}).createIndex("documentTargetsIndex",rFe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tFe,{unique:!0}),n.createObjectStore("targetGlobal")}const wU="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class TU{constructor(e,t,r,i,s,o,a,c,u,l,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=l,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!TU.D())throw new Ce(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pLe(this,i),this.Ai=t+"main",this.serializer=new pne(c),this.Ri=new Zc(this.Ai,this.hi,new DLe(this.serializer)),this.$r=new rLe,this.Ur=new dLe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vne(this.serializer),this.Gr=new nLe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===l&&ci("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,wU);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ga(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,D.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,D.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,D.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>D1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Od(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return uE(e).get("owner").next(t=>J.resolve(this.vi(t)))}Ci(e){return D1(e).delete(this.clientId)}Fi(){var e=this;return(0,D.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$i(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return J.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?J.resolve(!0):uE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,wU);return!1}}return!(!this.networkEnabled||!this.inForeground)||D1(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,D.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new WB(t,ga.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>D1(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return E1.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lLe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return y1.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(c=this.hi)?pFe:16===c?fFe:15===c?zB:14===c?Yee:13===c?Qee:12===c?hFe:11===c?Kee:void rt();var c;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new WB(a,this.Qr?this.Qr.next():ga.oe),"readwrite-primary"===t?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw ci(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ce(oe.FAILED_PRECONDITION,Uee);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return uE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(oe.FAILED_PRECONDITION,wU)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uE(e).put("owner",t)}static D(){return Zc.D()}bi(e){const t=uE(e);return t.get("owner").next(r=>this.vi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):J.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ci(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Vn.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ci("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ci("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uE(n){return $i(n,"owner")}function D1(n){return $i(n,"clientMetadata")}function CU(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class DU{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Wt(),i=Wt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DU(e,t.fromCache,r,i)}}class ALe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gne{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Vn.nr)()?8:$ee((0,Vn.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ALe;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(b_()<=Xc.$b.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",R_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(b_()<=Xc.$b.DEBUG&&Re("QueryEngine","Query:",R_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(b_()<=Xc.$b.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",R_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(t))):J.resolve())}Yi(e,t){if(wte(t))return J.resolve(null);let r=zs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=l1(t,null,"F"),r=zs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Wt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,l1(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return wte(t)||i.isEqual(dt.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?J.resolve(null):(b_()<=Xc.$b.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),R_(t)),this.rs(e,o,t,Vee(i,-1)).next(a=>a))})}ts(e,t){let r=new Zn(Ste(e));return t.forEach((i,s)=>{KI(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return b_()<=Xc.$b.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",R_(t)),this.Ji.getDocumentsMatchingQuery(e,t,pa.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class SLe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new fr(kt),this._s=new gl(s=>rp(s),zI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $ne(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function qne(n,e,t,r){return new SLe(n,e,t,r)}function zne(n,e){return AU.apply(this,arguments)}function AU(){return AU=(0,D.A)(function*(n,e){const t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Wt();for(const u of i){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}),AU.apply(this,arguments)}function Wne(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Kne(n,e,t){let r=Wt(),i=Wt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Lo();return t.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(dt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function NLe(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function U_(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new _l(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function j_(n,e,t){return SU.apply(this,arguments)}function SU(){return SU=(0,D.A)(function*(n,e,t){const r=He(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Od(o))throw o;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}),SU.apply(this,arguments)}function A1(n,e,t){const r=He(n);let i=dt.min(),s=Wt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){const f=He(c),_=f._s.get(l);return void 0!==_?J.resolve(f.os.get(_)):f.Ur.getTargetData(u,l)}(r,o,zs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:dt.min(),t?s:Wt())).next(a=>(Jne(r,Ate(e),a),{documents:a,Ts:s})))}function Qne(n,e){const t=He(n),r=He(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Yne(n,e){const t=He(n),r=t.us.get(e)||dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Vee(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Jne(t,e,i),i))}function Jne(n,e,t){let r=n.us.get(e)||dt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function RU(){return RU=(0,D.A)(function*(n,e,t,r){const i=He(n);let s=Wt(),o=Lo();for(const u of t){const l=e.Es(u.metadata.name);u.document&&(s=s.add(l));const f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),o=o.insert(l,f)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield U_(i,(l=r,zs(A_(an.fromString(`__bundle__/docs/${l}`)))));var l;return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Kne(u,a,o).next(l=>(a.apply(u),l)).next(l=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.Ps,l.Is)).next(()=>l.Ps)))}),RU.apply(this,arguments)}function kLe(n,e){return xU.apply(this,arguments)}function xU(){return xU=(0,D.A)(function*(n,e,t=Wt()){const r=yield U_(n,zs(pU(e.bundledQuery))),i=He(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ui(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Gr.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}),xU.apply(this,arguments)}function Xne(n,e){return`firestore_clients_${n}_${e}`}function Zne(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function NU(n,e){return`firestore_targets_${n}_${e}`}class S1{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Ce(i.error.code,i.error.message))),o?new S1(e,t,i.state,s):(ci("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ce(r.error.code,r.error.message))),s?new lE(e,r.state,i):(ci("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class R1{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=nU();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Gee(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new R1(e,s):(ci("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class MU{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new MU(t.clientId,t.onlineState):(ci("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kU{constructor(){this.activeTargetIds=nU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PU{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new fr(kt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Xne(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new kU),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,D.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(Xne(e.persistenceKey,i));if(s){const o=R1.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(NU(this.persistenceKey,e));if(i){const s=lE.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NU(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ci("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,D.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ga.oe;if(null!=o)try{const c=JSON.parse(o);ot("number"==typeof c),a=c}catch(c){ci("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ga.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new S1(this.currentUser,e,t,r),s=Zne(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=Zne(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=NU(this.persistenceKey,e),s=new lE(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return R1.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return S1.Rs(new ss(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return lE.Rs(i,t)}Ls(e){return MU.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,D.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nU();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ere{constructor(){this.so=new kU,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kU,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PLe{_o(e){}shutdown(){}}class tre{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let x1=null;function OU(){return null===x1?x1=268435456+Math.round(2147483648*Math.random()):x1++,"0x"+x1.toString(16)}const OLe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FLe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ks="WebChannelConnection";class LLe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=OU(),c=this.xo(t,r.toUriEncodedString());Re("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,c,u,i).then(l=>(Re("RestConnection",`Received RPC '${t}' ${a}: `,l),l),l=>{throw fa("RestConnection",`RPC '${t}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+v_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${OLe[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=OU();return new Promise((o,a)=>{const c=new See;c.setWithCredentials(!0),c.listenOnce(Ree.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case JS.NO_ERROR:const l=c.getResponseJson();Re(Ks,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case JS.TIMEOUT:Re(Ks,`RPC '${e}' ${s} timed out`),a(new Ce(oe.DEADLINE_EXCEEDED,"Request time out"));break;case JS.HTTP_ERROR:const f=c.getStatus();if(Re(Ks,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const I=function(A){const x=A.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(x)>=0?x:oe.UNKNOWN}(y.status);a(new Ce(I,y.message))}else a(new Ce(oe.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Ce(oe.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Re(Ks,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Re(Ks,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=OU(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mee(),a=Nee(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const l=s.join("");Re(Ks,`Creating RPC '${e}' stream ${i}: ${l}`,c);const f=o.createWebChannel(l,c);let _=!1,y=!1;const I=new FLe({Io:A=>{y?Re(Ks,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(Re(Ks,`Opening RPC '${e}' stream ${i} transport.`),f.open(),_=!0),Re(Ks,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),T=(A,x,N)=>{A.listen(x,B=>{try{N(B)}catch(ee){setTimeout(()=>{throw ee},0)}})};return T(f,FI.EventType.OPEN,()=>{y||(Re(Ks,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),T(f,FI.EventType.CLOSE,()=>{y||(y=!0,Re(Ks,`RPC '${e}' stream ${i} transport closed`),I.So())}),T(f,FI.EventType.ERROR,A=>{y||(y=!0,fa(Ks,`RPC '${e}' stream ${i} transport errored:`,A),I.So(new Ce(oe.UNAVAILABLE,"The operation could not be completed")))}),T(f,FI.EventType.MESSAGE,A=>{var x;if(!y){const N=A.data[0];ot(!!N);const ee=N.error||(null===(x=N[0])||void 0===x?void 0:x.error);if(ee){Re(Ks,`RPC '${e}' stream ${i} received error:`,ee);const ie=ee.status;let de=function(F){const U=Ci[F];if(void 0!==U)return zte(U)}(ie),M=ee.message;void 0===de&&(de=oe.INTERNAL,M="Unknown error status: "+ie+" with message "+ee.message),y=!0,I.So(new Ce(de,M)),f.close()}else Re(Ks,`RPC '${e}' stream ${i} received:`,N),I.bo(N)}}),T(a,xee.STAT_EVENT,A=>{A.stat===UB.PROXY?Re(Ks,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===UB.NOPROXY&&Re(Ks,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function nre(){return typeof window<"u"?window:null}function N1(){return typeof document<"u"?document:null}function dE(n){return new qFe(n,!0)}class FU{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class rre{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new FU(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,D.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,D.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,D.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Ce(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,D.A)(function*(){e.state=0,e.start()}))}I_(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VLe extends rre{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function KFe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:rt(),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(ot(void 0===l||"string"==typeof l),Gr.fromBase64String(l||"")):(ot(void 0===l||l instanceof Buffer||l instanceof Uint8Array),Gr.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=void 0===u.code?oe.UNKNOWN:zte(u.code);return new Ce(l,u.message||"")}(o);t=new Jte(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ru(n,r.document.name),s=ui(r.document.updateTime),o=r.document.createTime?ui(r.document.createTime):dt.min(),a=new As({mapValue:{fields:r.document.fields}}),c=br.newFoundDocument(i,s,o,a);t=new g1(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=ru(n,r.document),s=r.readTime?ui(r.readTime):dt.min(),o=br.newNoDocument(i,s);t=new g1([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ru(n,r.document);t=new g1([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return rt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new BFe(i,s);t=new Yte(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return dt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dt.min():o.readTime?ui(o.readTime):dt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=hU(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=c1(c)?{documents:cne(s,c)}:{query:m1(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tne(s,o.resumeToken);const u=uU(s,o.expectedCount);null!==u&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(dt.min())>0){a.readTime=P_(s,o.snapshotVersion.toTimestamp());const u=uU(s,o.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function YFe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=hU(this.serializer),t.removeTarget=e,this.a_(t)}}class BLe extends rre{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function QFe(n,e){return n&&n.length>0?(ot(void 0!==e),n.map(t=>function(i,s){let o=ui(i.updateTime?i.updateTime:s);return o.isEqual(dt.min())&&(o=ui(s)),new FFe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=hU(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rE(this.serializer,r))};this.a_(t)}}class ULe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,dU(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ce(oe.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,dU(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(oe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class jLe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ci(t),this.D_=!1):Re("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class $Le{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,D.A)(function*(){var c;zd(o)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,D.A)(function*(l){const f=He(l);f.L_.add(4),yield $_(f),f.q_.set("Unknown"),f.L_.delete(4),yield hE(f)}),function u(l){return c.apply(this,arguments)})(o))}))}),this.q_=new jLe(r,i)}}function hE(n){return LU.apply(this,arguments)}function LU(){return LU=(0,D.A)(function*(n){if(zd(n))for(const e of n.B_)yield e(!0)}),LU.apply(this,arguments)}function $_(n){return VU.apply(this,arguments)}function VU(){return VU=(0,D.A)(function*(n){for(const e of n.B_)yield e(!1)}),VU.apply(this,arguments)}function M1(n,e){const t=He(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),jU(t)?UU(t):q_(t).r_()&&BU(t,e))}function H_(n,e){const t=He(n),r=q_(t);t.N_.delete(e),r.r_()&&ire(t,e),0===t.N_.size&&(r.r_()?r.o_():zd(t)&&t.q_.set("Unknown"))}function BU(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}q_(n).A_(e)}function ire(n,e){n.Q_.xe(e),q_(n).R_(e)}function UU(n){n.Q_=new jFe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),q_(n).start(),n.q_.v_()}function jU(n){return zd(n)&&!q_(n).n_()&&n.N_.size>0}function zd(n){return 0===He(n).L_.size}function sre(n){n.Q_=void 0}function HLe(n){return $U.apply(this,arguments)}function $U(){return $U=(0,D.A)(function*(n){n.q_.set("Online")}),$U.apply(this,arguments)}function GLe(n){return HU.apply(this,arguments)}function HU(){return HU=(0,D.A)(function*(n){n.N_.forEach((e,t)=>{BU(n,e)})}),HU.apply(this,arguments)}function qLe(n,e){return GU.apply(this,arguments)}function GU(){return GU=(0,D.A)(function*(n,e){sre(n),jU(n)?(n.q_.M_(e),UU(n)):n.q_.set("Unknown")}),GU.apply(this,arguments)}function zLe(n,e,t){return qU.apply(this,arguments)}function qU(){return qU=(0,D.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof Jte&&2===e.state&&e.cause)try{yield(r=(0,D.A)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield k1(n,r)}else if(e instanceof g1?n.Q_.Ke(e):e instanceof Yte?n.Q_.He(e):n.Q_.We(e),!t.isEqual(dt.min()))try{const r=yield Wne(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=s.N_.get(u);l&&s.N_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const l=s.N_.get(c);if(!l)return;s.N_.set(c,l.withResumeToken(Gr.EMPTY_BYTE_STRING,l.snapshotVersion)),ire(s,c);const f=new _l(l.target,c,u,l.sequenceNumber);BU(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield k1(n,r)}var r}),qU.apply(this,arguments)}function k1(n,e,t){return zU.apply(this,arguments)}function zU(){return zU=(0,D.A)(function*(n,e,t){if(!Od(e))throw e;n.L_.add(1),yield $_(n),n.q_.set("Offline"),t||(t=()=>Wne(n.localStore)),n.asyncQueue.enqueueRetryable((0,D.A)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield hE(n)}))}),zU.apply(this,arguments)}function ore(n,e){return e().catch(t=>k1(n,t,e))}function G_(n){return WU.apply(this,arguments)}function WU(){return WU=(0,D.A)(function*(n){const e=He(n),t=Wd(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WLe(e);)try{const i=yield NLe(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,KLe(e,i)}catch(i){yield k1(e,i)}are(e)&&cre(e)}),WU.apply(this,arguments)}function WLe(n){return zd(n)&&n.O_.length<10}function KLe(n,e){n.O_.push(e);const t=Wd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function are(n){return zd(n)&&!Wd(n).n_()&&n.O_.length>0}function cre(n){Wd(n).start()}function QLe(n){return KU.apply(this,arguments)}function KU(){return KU=(0,D.A)(function*(n){Wd(n).p_()}),KU.apply(this,arguments)}function YLe(n){return QU.apply(this,arguments)}function QU(){return QU=(0,D.A)(function*(n){const e=Wd(n);for(const t of n.O_)e.m_(t.mutations)}),QU.apply(this,arguments)}function JLe(n,e,t){return YU.apply(this,arguments)}function YU(){return YU=(0,D.A)(function*(n,e,t){const r=n.O_.shift(),i=oU.from(r,e,t);yield ore(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield G_(n)}),YU.apply(this,arguments)}function XLe(n,e){return JU.apply(this,arguments)}function JU(){return JU=(0,D.A)(function*(n,e){var t;e&&Wd(n).V_&&(yield(t=(0,D.A)(function*(i,s){if(qte(a=s.code)&&a!==oe.ABORTED){const o=i.O_.shift();Wd(i).s_(),yield ore(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield G_(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),are(n)&&cre(n)}),JU.apply(this,arguments)}function ure(n,e){return XU.apply(this,arguments)}function XU(){return XU=(0,D.A)(function*(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=zd(t);t.L_.add(3),yield $_(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield hE(t)}),XU.apply(this,arguments)}function ZU(n,e){return ej.apply(this,arguments)}function ej(){return ej=(0,D.A)(function*(n,e){const t=He(n);e?(t.L_.delete(2),yield hE(t)):e||(t.L_.add(2),yield $_(t),t.q_.set("Unknown"))}),ej.apply(this,arguments)}function q_(n){return n.K_||(n.K_=function(t,r,i){const s=He(t);return s.w_(),new VLe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:HLe.bind(null,n),Ro:GLe.bind(null,n),mo:qLe.bind(null,n),d_:zLe.bind(null,n)}),n.B_.push(function(){var e=(0,D.A)(function*(t){t?(n.K_.s_(),jU(n)?UU(n):n.q_.set("Unknown")):(yield n.K_.stop(),sre(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Wd(n){return n.U_||(n.U_=function(t,r,i){const s=He(t);return s.w_(),new BLe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QLe.bind(null,n),mo:XLe.bind(null,n),f_:YLe.bind(null,n),g_:JLe.bind(null,n)}),n.B_.push(function(){var e=(0,D.A)(function*(t){t?(n.U_.s_(),yield G_(n)):(yield n.U_.stop(),n.O_.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class tj{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new tj(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(n,e){if(ci("AsyncQueue",`${e}: ${n}`),Od(n))return new Ce(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class W_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=QI(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new W_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof W_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new W_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lre{constructor(){this.W_=new fr(We.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):rt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class K_{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new K_(e,t,W_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&WI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ZLe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class eVe{constructor(){this.queries=dre(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=He(t),s=i.queries;i.queries=dre(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})}(this,new Ce(oe.ABORTED,"Firestore shutting down"))}}function dre(){return new gl(n=>Dte(n),WI)}function nj(n,e){return rj.apply(this,arguments)}function rj(){return rj=(0,D.A)(function*(n,e){const t=He(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new ZLe,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=z_(o,`Initialization of query '${R_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&oj(t)}),rj.apply(this,arguments)}function ij(n,e){return sj.apply(this,arguments)}function sj(){return sj=(0,D.A)(function*(n,e){const t=He(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}),sj.apply(this,arguments)}function tVe(n,e){const t=He(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&oj(t)}function nVe(n,e,t){const r=He(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function oj(n){n.Y_.forEach(e=>{e.next()})}var aj,hre;(hre=aj||(aj={})).ea="default",hre.Cache="cache";class cj{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new K_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=K_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==aj.Cache}}class rVe{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class fre{constructor(e){this.serializer=e}Es(e){return ru(this.serializer,e)}ds(e){return e.metadata.exists?ane(this.serializer,e.document,!1):br.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ui(e)}}class iVe{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pre(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=an.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new fre(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Wt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,D.A)(function*(){const t=yield function MLe(n,e,t,r){return RU.apply(this,arguments)}(e.localStore,new fre(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield kLe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function pre(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gre{constructor(e){this.key=e}}class mre{constructor(e){this.key=e}}class _re{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wt(),this.mutatedKeys=Wt(),this.Aa=Ste(e),this.Ra=new W_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new lre,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,f)=>{const _=i.get(l),y=KI(this.query,f)?f:null,I=!!_&&this.mutatedKeys.has(_.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;_&&y?_.data.isEqual(y.data)?I!==T&&(r.track({type:3,doc:y}),A=!0):this.ga(_,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.Aa(y,c)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),A=!0):_&&!y&&(r.track({type:1,doc:_}),A=!0,(c||u)&&(a=!0)),A&&(y?(o=o.add(y),s=T?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((l,f)=>function(y,I){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return T(y)-T(I)}(l.type,f.type)||this.Aa(l.doc,f.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],c=0===this.da.size&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,0!==o.length||u?{snapshot:new K_(this.query,e.Ra,s,o,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lre,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Wt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new mre(r))}),this.da.forEach(r=>{e.has(r)||t.push(new gre(r))}),t}ba(e){this.Ta=e.Ts,this.da=Wt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return K_.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class sVe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oVe{constructor(e){this.key=e,this.va=!1}}class aVe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new gl(a=>Dte(a),WI),this.Ma=new Map,this.xa=new Set,this.Oa=new fr(We.comparator),this.Na=new Map,this.La=new IU,this.Ba={},this.ka=new Map,this.qa=dp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function cVe(n,e){return uj.apply(this,arguments)}function uj(){return uj=(0,D.A)(function*(n,e,t=!0){const r=P1(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield yre(r,e,t,!0),i}),uj.apply(this,arguments)}function uVe(n,e){return lj.apply(this,arguments)}function lj(){return lj=(0,D.A)(function*(n,e){const t=P1(n);yield yre(t,e,!0,!1)}),lj.apply(this,arguments)}function yre(n,e,t,r){return dj.apply(this,arguments)}function dj(){return dj=(0,D.A)(function*(n,e,t,r){const i=yield U_(n.localStore,zs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield hj(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&M1(n.remoteStore,i),a}),dj.apply(this,arguments)}function hj(n,e,t,r,i){return fj.apply(this,arguments)}function fj(){return fj=(0,D.A)(function*(n,e,t,r,i){n.Ka=(f,_,y)=>{return(I=(0,D.A)(function*(A,x,N,B){let ee=x.view.ma(N);ee.ns&&(ee=yield A1(A.localStore,x.query,!1).then(({documents:R})=>x.view.ma(R,ee)));const ie=B&&B.targetChanges.get(x.targetId),de=B&&null!=B.targetMismatches.get(x.targetId),M=x.view.applyChanges(ee,A.isPrimaryClient,ie,de);return Tj(A,x.targetId,M.wa),M.snapshot}),function T(A,x,N,B){return I.apply(this,arguments)})(n,f,_,y);var I};const s=yield A1(n.localStore,e,!0),o=new _re(e,s.Ts),a=o.ma(s.documents),c=tE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),u=o.applyChanges(a,n.isPrimaryClient,c);Tj(n,t,u.wa);const l=new sVe(e,t,o);return n.Fa.set(e,l),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}),fj.apply(this,arguments)}function lVe(n,e,t){return pj.apply(this,arguments)}function pj(){return pj=(0,D.A)(function*(n,e,t){const r=He(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!WI(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield j_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&H_(r.remoteStore,i.targetId),Q_(r,i.targetId)}).catch(Pd))):(Q_(r,i.targetId),yield j_(r.localStore,i.targetId,!0))}),pj.apply(this,arguments)}function dVe(n,e){return gj.apply(this,arguments)}function gj(){return gj=(0,D.A)(function*(n,e){const t=He(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),H_(t.remoteStore,r.targetId))}),gj.apply(this,arguments)}function mj(){return mj=(0,D.A)(function*(n,e,t){const r=Oj(n);try{const i=yield function(o,a){const c=He(o),u=Ar.now(),l=a.reduce((y,I)=>y.add(I.key),Wt());let f,_;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Lo(),T=Wt();return c.cs.getEntries(y,l).next(A=>{I=A,I.forEach((x,N)=>{N.isValidDocument()||(T=T.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(A=>{f=A;const x=[];for(const N of a){const B=VFe(N,f.get(N.key).overlayedDocument);null!=B&&x.push(new ml(N.key,B,lte(B.value.mapValue),Rr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,x,a)}).next(A=>{_=A;const x=A.applyToLocalDocumentSet(f,T);return c.documentOverlayCache.saveOverlays(y,A.batchId,x)})}).then(()=>({batchId:_.batchId,changes:xte(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new fr(kt)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield yl(r,i.changes),yield G_(r.remoteStore)}catch(i){const s=z_(i,"Failed to persist write");t.reject(s)}}),mj.apply(this,arguments)}function vre(n,e){return _j.apply(this,arguments)}function _j(){return _j=(0,D.A)(function*(n,e){const t=He(n);try{const r=yield function xLe(n,e){const t=He(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((l,f)=>{const _=i.get(f);if(!_)return;a.push(t.Ur.removeMatchingKeys(s,l.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,l.addedDocuments,f)));let y=_.withSequenceNumber(s.currentSequenceNumber);var T,A,x;null!==e.targetMismatches.get(f)?y=y.withResumeToken(Gr.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):l.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(l.resumeToken,r)),i=i.insert(f,y),A=y,x=l,(0===(T=_).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,y))});let c=Lo(),u=Wt();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(Kne(s,o,e.documentUpdates).next(l=>{c=l.Ps,u=l.Is})),!r.isEqual(dt.min())){const l=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return J.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ot(o.va):i.removedDocuments.size>0&&(ot(o.va),o.va=!1))}),yield yl(t,r,e)}catch(r){yield Pd(r)}}),_j.apply(this,arguments)}function bre(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=He(o);c.onlineState=a;let u=!1;c.queries.forEach((l,f)=>{for(const _ of f.j_)_.Z_(a)&&(u=!0)}),u&&oj(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fVe(n,e,t){return yj.apply(this,arguments)}function yj(){return yj=(0,D.A)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new fr(We.comparator);o=o.insert(s,br.newNoDocument(s,dt.min()));const a=Wt().add(s),c=new eE(dt.min(),new Map,new fr(kt),o,a);yield vre(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cj(r)}else yield j_(r.localStore,e,!1).then(()=>Q_(r,e,t)).catch(Pd)}),yj.apply(this,arguments)}function pVe(n,e){return vj.apply(this,arguments)}function vj(){return vj=(0,D.A)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const i=yield function RLe(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){const f=u.batch,_=f.keys();let y=J.resolve();return _.forEach(I=>{y=y.next(()=>l.getEntry(c,I)).next(T=>{const A=u.docVersions.get(I);ot(null!==A),T.version.compareTo(A)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),l.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Wt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);wj(t,r,null),Ej(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yl(t,i)}catch(i){yield Pd(i)}}),vj.apply(this,arguments)}function gVe(n,e,t){return bj.apply(this,arguments)}function bj(){return bj=(0,D.A)(function*(n,e,t){const r=He(n);try{const i=yield function(o,a){const c=He(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ot(null!==f),l=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);wj(r,e,t),Ej(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yl(r,i)}catch(i){yield Pd(i)}}),bj.apply(this,arguments)}function Ij(){return Ij=(0,D.A)(function*(n,e){const t=He(n);zd(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=He(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=z_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Ij.apply(this,arguments)}function Ej(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function wj(n,e,t){const r=He(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Q_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Ire(n,r)})}function Ire(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(H_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Cj(n))}function Tj(n,e,t){for(const r of t)r instanceof gre?(n.La.addReference(r.key,e),_Ve(n,r)):r instanceof mre?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ire(n,r.key)):rt()}function _Ve(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.xa.add(r),Cj(n))}function Cj(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new We(an.fromString(e)),r=n.qa.next();n.Na.set(r,new oVe(t)),n.Oa=n.Oa.insert(t,r),M1(n.remoteStore,new _l(zs(A_(t.path)),r,"TargetPurposeLimboResolution",ga.oe))}}function yl(n,e,t){return Dj.apply(this,arguments)}function Dj(){return Dj=(0,D.A)(function*(n,e,t){const r=He(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:null===(l=t?.targetChanges.get(c.targetId))||void 0===l?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=DU.Wi(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,D.A)(function*(u,l){const f=He(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>J.forEach(l,y=>J.forEach(y.$i,I=>f.persistence.referenceDelegate.addReference(_,y.targetId,I)).next(()=>J.forEach(y.Ui,I=>f.persistence.referenceDelegate.removeReference(_,y.targetId,I)))))}catch(_){if(!Od(_))throw _;Re("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of l){const y=_.targetId;if(!_.fromCache){const I=f.os.get(y),A=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);f.os=f.os.insert(y,A)}}}),function c(u,l){return a.apply(this,arguments)})(r.localStore,s))}),Dj.apply(this,arguments)}function yVe(n,e){return Aj.apply(this,arguments)}function Aj(){return Aj=(0,D.A)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield zne(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(c=>{c.reject(new Ce(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yl(t,r.hs)}var s}),Aj.apply(this,arguments)}function vVe(n,e){const t=He(n),r=t.Na.get(e);if(r&&r.va)return Wt().add(r.key);{let i=Wt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function bVe(n,e){return Sj.apply(this,arguments)}function Sj(){return Sj=(0,D.A)(function*(n,e){const t=He(n),r=yield A1(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Tj(t,e.targetId,i.wa),i}),Sj.apply(this,arguments)}function IVe(n,e){return Rj.apply(this,arguments)}function Rj(){return Rj=(0,D.A)(function*(n,e){const t=He(n);return Yne(t.localStore,e).then(r=>yl(t,r))}),Rj.apply(this,arguments)}function EVe(n,e,t,r){return xj.apply(this,arguments)}function xj(){return xj=(0,D.A)(function*(n,e,t,r){const i=He(n),s=yield function(a,c){const u=He(a),l=He(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>l.Mn(f,c).next(_=>_?u.localDocuments.getDocuments(f,_):J.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield G_(i.remoteStore):"acknowledged"===t||"rejected"===t?(wj(i,e,r||null),Ej(i,e),c=e,He(He(i.localStore).mutationQueue).On(c)):rt(),yield yl(i,s)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),xj.apply(this,arguments)}function Nj(){return Nj=(0,D.A)(function*(n,e){const t=He(n);if(P1(t),Oj(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Ere(t,r.toArray());t.Qa=!0,yield ZU(t.remoteStore,!0);for(const s of i)M1(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Q_(t,o),j_(t.localStore,o,!0))),H_(t.remoteStore,o)}),yield i,yield Ere(t,r),function(o){const a=He(o);a.Na.forEach((c,u)=>{H_(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new fr(We.comparator)}(t),t.Qa=!1,yield ZU(t.remoteStore,!1)}}),Nj.apply(this,arguments)}function Ere(n,e,t){return Mj.apply(this,arguments)}function Mj(){return Mj=(0,D.A)(function*(n,e,t){const r=He(n),i=[],s=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&0!==c.length){a=yield U_(r.localStore,zs(c[0]));for(const u of c){const l=r.Fa.get(u),f=yield bVe(r,l);f.snapshot&&s.push(f.snapshot)}}else{const u=yield Qne(r.localStore,o);a=yield U_(r.localStore,u),yield hj(r,wre(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}),Mj.apply(this,arguments)}function wre(n){return Ete(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function TVe(n){return t=He(n).localStore,He(He(t).persistence).Qi();var t}function CVe(n,e,t,r){return kj.apply(this,arguments)}function kj(){return kj=(0,D.A)(function*(n,e,t,r){const i=He(n);if(i.Qa)return void Re("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Yne(i.localStore,Ate(s[0])),a=eE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Gr.EMPTY_BYTE_STRING);yield yl(i,o,a);break}case"rejected":yield j_(i.localStore,e,!0),Q_(i,e,r);break;default:rt()}}),kj.apply(this,arguments)}function DVe(n,e,t){return Pj.apply(this,arguments)}function Pj(){return Pj=(0,D.A)(function*(n,e,t){const r=P1(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Re("SyncEngine","Adding an already active target "+i);continue}const s=yield Qne(r.localStore,i),o=yield U_(r.localStore,s);yield hj(r,wre(s),o.targetId,!1,o.resumeToken),M1(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield j_(r.localStore,i,!1).then(()=>{H_(r.remoteStore,i),Q_(r,i)}).catch(Pd))}}),Pj.apply(this,arguments)}function P1(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vre.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vVe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fVe.bind(null,e),e.Ca.d_=tVe.bind(null,e.eventManager),e.Ca.$a=nVe.bind(null,e.eventManager),e}function Oj(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pVe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gVe.bind(null,e),e}let Y_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,D.A)(function*(){r.serializer=dE(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return qne(this.persistence,new Gne,t.initialUser,this.serializer)}Ga(t){return new EU(T1.Zr,this.serializer)}Wa(t){return new ere}terminate(){var t=this;return(0,D.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class Fj extends Y_{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,D.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield Oj(r.Ja.syncEngine),yield G_(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return qne(this.persistence,new Gne,e.initialUser,this.serializer)}ja(e,t){return new One(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new QOe(t,this.persistence);return new KOe(e.asyncQueue,r)}Ga(e){const t=CU(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new TU(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nre(),N1(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new ere}}class Tre extends Fj{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,D.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof PU&&(r.sharedClientState.syncEngine={no:EVe.bind(null,i),ro:CVe.bind(null,i),io:DVe.bind(null,i),Qi:TVe.bind(null,i),eo:IVe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,D.A)(function*(o){yield function wVe(n,e){return Nj.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=nre();if(!PU.D(t))throw new Ce(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=CU(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new PU(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let J_=(()=>{class n{initialize(t,r){var i=this;return(0,D.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>bre(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=yVe.bind(null,i.syncEngine),yield ZU(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new eVe}createDatastore(t){const r=dE(t.databaseInfo.databaseId),i=new LLe(t.databaseInfo);return new ULe(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>bre(this.syncEngine,r,0),c=tre.D()?new tre:new PLe,new $Le(i,s,o,a,c);var i,s,o,a,c}createSyncEngine(t,r){return function(s,o,a,c,u,l,f){const _=new aVe(s,o,a,c,u,l);return f&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,D.A)(function*(){var r,i,s;yield(s=(0,D.A)(function*(a){const c=He(a);Re("RemoteStore","RemoteStore shutting down."),c.L_.add(5),yield $_(c),c.k_.shutdown(),c.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function Cre(n,e=10240){let t=0;return{read:()=>(0,D.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,D.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class O1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class RVe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new os,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,D.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,D.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,D.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new rVe(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>123===e)}nu(){var e=this;return(0,D.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,D.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,D.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class xVe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,D.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ce(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,D.A)(function*(o,a){const c=He(o),u={documents:a.map(y=>nE(c.serializer,y))},l=yield c.Lo("BatchGetDocuments",c.serializer.databaseId,an.emptyPath(),u,a.length),f=new Map;l.forEach(y=>{const I=function WFe(n,e){return"found"in e?function(r,i){ot(!!i.found);const s=ru(r,i.found.name),o=ui(i.found.updateTime),a=i.found.createTime?ui(i.found.createTime):dt.min(),c=new As({mapValue:{fields:i.found.fields}});return br.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){ot(!!i.missing),ot(!!i.readTime);const s=ru(r,i.missing),o=ui(i.readTime);return br.newNoDocument(s,o)}(n,e):rt()}(c.serializer,y);f.set(I.key.toString(),I)});const _=[];return a.forEach(y=>{const I=f.get(y.toString());ot(!!I),_.push(I)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new k_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,D.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=We.fromPath(i);e.mutations.push(new iU(s,e.precondition(s)))}),yield(r=(0,D.A)(function*(s,o){const a=He(s),c={writes:o.map(u=>rE(a.serializer,u))};yield a.Mo("Commit",a.serializer.databaseId,an.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(dt.min())?Rr.exists(!1):Rr.updateTime(t):Rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(dt.min()))throw new Ce(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rr.updateTime(t)}return Rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class NVe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new FU(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,D.A)(function*(){const t=new xVe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!BI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!qte(t)}return!1}}class MVe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ss.UNAUTHENTICATED,this.clientId=Fee.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,D.A)(function*(c){Re("FirestoreClient","Received user=",c.uid),yield o.authCredentialListener(c),o.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Re("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,D.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=z_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Lj(n,e){return Vj.apply(this,arguments)}function Vj(){return Vj=(0,D.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,D.A)(function*(s){r.isEqual(s)||(yield zne(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Vj.apply(this,arguments)}function Dre(n,e){return Bj.apply(this,arguments)}function Bj(){return Bj=(0,D.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Uj(n);Re("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ure(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ure(e.remoteStore,i)),n._onlineComponents=e}),Bj.apply(this,arguments)}function Uj(n){return jj.apply(this,arguments)}function jj(){return jj=(0,D.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lj(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===oe.FAILED_PRECONDITION||i.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;fa("Error using user provided cache. Falling back to memory cache: "+e),yield Lj(n,new Y_)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),yield Lj(n,new Y_);var i;return n._offlineComponents}),jj.apply(this,arguments)}function F1(n){return $j.apply(this,arguments)}function $j(){return $j=(0,D.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dre(n,n._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),yield Dre(n,new J_))),n._onlineComponents}),$j.apply(this,arguments)}function Are(n){return Uj(n).then(e=>e.persistence)}function X_(n){return Uj(n).then(e=>e.localStore)}function Sre(n){return F1(n).then(e=>e.remoteStore)}function Hj(n){return F1(n).then(e=>e.syncEngine)}function Z_(n){return Gj.apply(this,arguments)}function Gj(){return Gj=(0,D.A)(function*(n){const e=yield F1(n),t=e.eventManager;return t.onListen=cVe.bind(null,e.syncEngine),t.onUnlisten=lVe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uVe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dVe.bind(null,e.syncEngine),t}),Gj.apply(this,arguments)}function xre(n,e,t={}){const r=new os;return n.asyncQueue.enqueueAndForget((0,D.A)(function*(){return function(s,o,a,c,u){const l=new O1({next:_=>{l.Za(),o.enqueueAndForget(()=>ij(s,f));const y=_.docs.has(a);!y&&_.fromCache?u.reject(new Ce(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&c&&"server"===c.source?u.reject(new Ce(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),f=new cj(A_(a.path),l,{includeMetadataChanges:!0,_a:!0});return nj(s,f)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}function Nre(n,e,t={}){const r=new os;return n.asyncQueue.enqueueAndForget((0,D.A)(function*(){return function(s,o,a,c,u){const l=new O1({next:_=>{l.Za(),o.enqueueAndForget(()=>ij(s,f)),_.fromCache&&"server"===c.source?u.reject(new Ce(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),f=new cj(a,l,{includeMetadataChanges:!0,_a:!0});return nj(s,f)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}function Mre(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const kre=new Map;function qj(n,e,t){if(!t)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Pre(n,e,t,r){if(!0===e&&!0===r)throw new Ce(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ore(n){if(!We.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fre(n){if(We.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function L1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":rt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=L1(n);throw new Ce(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Lre(n,e){if(e<=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Vre{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Mre(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ce(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vre({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vre(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new FOe;switch(r.type){case"firstParty":return new UOe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,D.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=kre.get(t);r&&(Re("ComponentProvider","Removing Datastore"),kre.delete(t),r.terminate())}(this),Promise.resolve()}}class Ss{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}}class iu extends Ss{constructor(e,t,r){super(e,t,A_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new We(e))}withConverter(e){return new iu(this.firestore,e,this._path)}}function Ure(n,e,...t){if(n=(0,Vn.Ku)(n),qj("collection","path",e),n instanceof fE){const r=an.fromString(e,...t);return Fre(r),new iu(n,null,r)}{if(!(n instanceof Ir||n instanceof iu))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return Fre(r),new iu(n.firestore,null,r)}}function V1(n,e,...t){if(n=(0,Vn.Ku)(n),1===arguments.length&&(e=Fee.newId()),qj("doc","path",e),n instanceof fE){const r=an.fromString(e,...t);return Ore(r),new Ir(n,null,new We(r))}{if(!(n instanceof Ir||n instanceof iu))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return Ore(r),new Ir(n.firestore,n instanceof iu?n.converter:null,new We(r))}}function jre(n,e){return n=(0,Vn.Ku)(n),e=(0,Vn.Ku)(e),(n instanceof Ir||n instanceof iu)&&(e instanceof Ir||e instanceof iu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zj(n,e){return n=(0,Vn.Ku)(n),e=(0,Vn.Ku)(e),n instanceof Ss&&e instanceof Ss&&n.firestore===e.firestore&&WI(n._query,e._query)&&n.converter===e.converter}class $re{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new FU(this,"async_queue_retry"),this.Vu=()=>{const r=N1();r&&Re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=N1();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=N1();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new os;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,D.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Od(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,ci("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=tj.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&rt()}verifyOperationInProgress(){}wu(){var e=this;return(0,D.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Wj(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class qVe{constructor(){this._progressObserver={},this._taskCompletionResolver=new os,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends fE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $re,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,D.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new $re(t),e._firestoreClient=void 0,yield t}})()}}function xr(n){if(n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Hre(n),n._firestoreClient}function Hre(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _Fe(n._databaseId,c,n._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Mre(l.experimentalLongPollingOptions),l.useFetchStreams));var c,l;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new MVe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function Kj(){return Kj=(0,D.A)(function*(n){fa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Gre(n,J_.provider,{build:t=>new Tre(t,e.cacheSizeBytes)})}),Kj.apply(this,arguments)}function Gre(n,e,t){if((n=tn(n,or))._firestoreClient||n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ce(oe.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Hre(n)}class su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new su(Gr.fromBase64String(e))}catch(t){throw new Ce(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new su(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fp{constructor(e){this._methodName=e}}class B1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}class U1{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const n2e=/^__.*__$/;class r2e{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ml(e,this.data,this.fieldMask,t,this.fieldTransforms):new M_(e,this.data,t,this.fieldTransforms)}}class qre{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ml(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zre(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class j1{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new j1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return G1(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(zre(this.Cu)&&n2e.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class i2e{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dE(e)}Qu(e,t,r,i=!1){return new j1({Cu:e,methodName:t,qu:r,path:vr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pp(n){const e=n._freezeSettings(),t=dE(n._databaseId);return new i2e(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $1(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);t$("Data must be an object, but it was:",o,r);const a=Qre(r,o);let c,u;if(s.merge)c=new Fo(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const f of s.mergeFields){const _=mE(e,f,t);if(!o.contains(_))throw new Ce(oe.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Jre(l,_)||l.push(_)}c=new Fo(l),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new r2e(new As(a),c,u)}class gE extends fp{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gE}}function Wre(n,e,t){return new j1({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Qj extends fp{_toFieldTransform(e){return new JI(e.path,new x_)}isEqual(e){return e instanceof Qj}}class Yj extends fp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Wre(this,e,!0),r=this.Ku.map(s=>gp(s,t)),i=new ip(r);return new JI(e.path,i)}isEqual(e){return e instanceof Yj&&(0,Vn.bD)(this.Ku,e.Ku)}}class Jj extends fp{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Wre(this,e,!0),r=this.Ku.map(s=>gp(s,t)),i=new sp(r);return new JI(e.path,i)}isEqual(e){return e instanceof Jj&&(0,Vn.bD)(this.Ku,e.Ku)}}class Xj extends fp{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new N_(e.serializer,kte(e.serializer,this.$u));return new JI(e.path,t)}isEqual(e){return e instanceof Xj&&this.$u===e.$u}}function Zj(n,e,t,r){const i=n.Qu(1,e,t);t$("Data must be an object, but it was:",i,r);const s=[],o=As.empty();Fd(r,(c,u)=>{const l=H1(e,c,t);u=(0,Vn.Ku)(u);const f=i.Nu(l);if(u instanceof gE)s.push(l);else{const _=gp(u,f);null!=_&&(s.push(l),o.set(l,_))}});const a=new Fo(s);return new qre(o,a,i.fieldTransforms)}function e$(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[mE(e,r,t)],c=[i];if(s.length%2!=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(mE(e,s[_])),c.push(s[_+1]);const u=[],l=As.empty();for(let _=a.length-1;_>=0;--_)if(!Jre(u,a[_])){const y=a[_];let I=c[_];I=(0,Vn.Ku)(I);const T=o.Nu(y);if(I instanceof gE)u.push(y);else{const A=gp(I,T);null!=A&&(u.push(y),l.set(y,A))}}const f=new Fo(u);return new qre(l,f,o.fieldTransforms)}function Kre(n,e,t,r=!1){return gp(t,n.Qu(r?4:3,e))}function gp(n,e){if(Yre(n=(0,Vn.Ku)(n)))return t$("Unsupported field value:",e,n),Qre(n,e);if(n instanceof fp)return function(r,i){if(!zre(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=gp(a,i.Lu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Vn.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return kte(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Ar.fromDate(r);return{timestampValue:P_(i.serializer,s)}}if(r instanceof Ar){const s=new Ar(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:P_(i.serializer,s)}}if(r instanceof B1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof su)return{bytesValue:tne(i.serializer,r._byteString)};if(r instanceof Ir){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lU(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof U1)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if("number"!=typeof c)throw a.Bu("VectorValues must only contain numeric values.");return rU(a.serializer,c)})}}}}};var a;throw i.Bu(`Unsupported field value: ${L1(r)}`)}(n,e)}function Qre(n,e){const t={};return Zee(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fd(n,(r,i)=>{const s=gp(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Yre(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof B1||n instanceof su||n instanceof Ir||n instanceof fp||n instanceof U1)}function t$(n,e,t){if(!Yre(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=L1(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function mE(n,e,t){if((e=(0,Vn.Ku)(e))instanceof vl)return e._internalPath;if("string"==typeof e)return H1(n,e);throw G1("Field path arguments must be of type string or ",n,!1,void 0,t)}const s2e=new RegExp("[~\\*/\\[\\]]");function H1(n,e,t){if(e.search(s2e)>=0)throw G1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vl(...e.split("."))._internalPath}catch{throw G1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function G1(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Ce(oe.INVALID_ARGUMENT,a+n+c)}function Jre(n,e){return n.some(t=>t.isEqual(e))}class _E{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new o2e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(q1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class o2e extends _E{data(){return super.data()}}function q1(n,e){return"string"==typeof e?H1(n,e):e instanceof vl?e._internalPath:e._delegate._internalPath}function Xre(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n${}class yE extends n${}function Kd(n,e,...t){let r=[];e instanceof n$&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof ey).length,a=s.filter(c=>c instanceof vE).length;if(o>1||o>0&&a>0)throw new Ce(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class vE extends yE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vE(e,t,r)}_apply(e){const t=this._parse(e);return nie(e._query,t),new Ss(e.firestore,e.converter,tU(e._query,t))}_parse(e){const t=pp(e.firestore);return function(s,o,a,c,u,l,f){let _;if(u.isKeyField()){if("array-contains"===l||"array-contains-any"===l)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if("in"===l||"not-in"===l){tie(f,l);const y=[];for(const I of f)y.push(eie(c,s,I));_={arrayValue:{values:y}}}else _=eie(c,s,f)}else"in"!==l&&"not-in"!==l&&"array-contains-any"!==l||tie(f,l),_=Kre(a,"where",f,"in"===l||"not-in"===l);return cn.create(u,l,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ey extends n${constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ey(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)nie(o,c),o=tU(o,c)}(e._query,t),new Ss(e.firestore,e.converter,tU(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class r$ extends yE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new r$(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qI(s,o)}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new pl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class z1 extends yE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new z1(e,t,r)}_apply(e){return new Ss(e.firestore,e.converter,l1(e._query,this._limit,this._limitType))}}class W1 extends yE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new W1(e,t,r)}_apply(e){const t=Zre(e,this.type,this._docOrFields,this._inclusive);return new Ss(e.firestore,e.converter,(s=t,new pl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class K1 extends yE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new K1(e,t,r)}_apply(e){const t=Zre(e,this.type,this._docOrFields,this._inclusive);return new Ss(e.firestore,e.converter,(s=t,new pl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function Zre(n,e,t,r){if(t[0]=(0,Vn.Ku)(t[0]),t[0]instanceof _E)return function(s,o,a,c,u){if(!c)throw new Ce(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const l=[];for(const f of S_(s))if(f.field.isKeyField())l.push(np(o,c.key));else{const _=c.data.field(f.field);if(t1(_))throw new Ce(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=f.field.canonicalString();throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}l.push(_)}return new jd(l,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=pp(n.firestore);return function(o,a,c,u,l,f){const _=o.explicitOrderBy;if(l.length>_.length)throw new Ce(oe.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<l.length;I++){const T=l[I];if(_[I].field.isKeyField()){if("string"!=typeof T)throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!eU(o)&&-1!==T.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);const A=o.path.child(an.fromString(T));if(!We.isDocumentKey(A))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const x=new We(A);y.push(np(a,x))}else{const A=Kre(c,u,T);y.push(A)}}return new jd(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function eie(n,e,t){if("string"==typeof(t=(0,Vn.Ku)(t))){if(""===t)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eU(e)&&-1!==t.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!We.isDocumentKey(r))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return np(n,new We(r))}if(t instanceof Ir)return np(n,t._key);throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${L1(t)}.`)}function tie(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nie(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ce(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class i${convertValue(e,t="none"){switch(Bd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Sr(o.doubleValue));return new U1(s)}convertGeoPoint(e){return new B1(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=n1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jI(e));default:return null}}convertTimestamp(e){const t=hl(e);return new Ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);ot(fne(r));const i=new Ld(r.get(1),r.get(3)),s=new We(r.popFirst(5));return i.isEqual(t)||ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Q1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class g2e extends i${constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}class mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bl extends _E{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(q1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bE extends bl{data(e={}){return super.data(e)}}class Qd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bE(this._firestore,this._userDataWriter,r.key,r,new mp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new bE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new bE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mp(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return 0!==a.type&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:_2e(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _2e(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function iie(n,e){return n instanceof bl&&e instanceof bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qd&&e instanceof Qd&&n._firestore===e._firestore&&zj(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Yd extends i${constructor(e){super(),this.firestore=e}convertBytes(e){return new su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function sie(n,e,t){n=tn(n,Ir);const r=tn(n.firestore,or),i=Q1(n.converter,e,t);return ty(r,[$1(pp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rr.none())])}function oie(n,e,t,...r){n=tn(n,Ir);const i=tn(n.firestore,or),s=pp(i);let o;return o="string"==typeof(e=(0,Vn.Ku)(e))||e instanceof vl?e$(s,"updateDoc",n._key,e,t,r):Zj(s,"updateDoc",n._key,e),ty(i,[o.toMutation(n._key,Rr.exists(!0))])}function aie(n,...e){var t,r,i;n=(0,Vn.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||Wj(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wj(e[o])){const f=e[o];e[o]=null===(t=f.next)||void 0===t?void 0:t.bind(f),e[o+1]=null===(r=f.error)||void 0===r?void 0:r.bind(f),e[o+2]=null===(i=f.complete)||void 0===i?void 0:i.bind(f)}let c,u,l;if(n instanceof Ir)u=tn(n.firestore,or),l=A_(n._key.path),c={next:f=>{e[o]&&e[o](s$(u,n,f))},error:e[o+1],complete:e[o+2]};else{const f=tn(n,Ss);u=tn(f.firestore,or),l=f._query;const _=new Yd(u);c={next:y=>{e[o]&&e[o](new Qd(u,_,f,y))},error:e[o+1],complete:e[o+2]},Xre(n._query)}return function(_,y,I,T){const A=new O1(T),x=new cj(y,A,I);return _.asyncQueue.enqueueAndForget((0,D.A)(function*(){return nj(yield Z_(_),x)})),()=>{A.Za(),_.asyncQueue.enqueueAndForget((0,D.A)(function*(){return ij(yield Z_(_),x)}))}}(xr(u),l,a,c)}function ty(n,e){return function(r,i){const s=new os;return r.asyncQueue.enqueueAndForget((0,D.A)(function*(){return function hVe(n,e,t){return mj.apply(this,arguments)}(yield Hj(r),i,s)})),s.promise}(xr(n),e)}function s$(n,e,t){const r=t.docs.get(e._key),i=new Yd(n);return new bl(n,i,e._key,r,new mp(t.hasPendingWrites,t.fromCache),e.converter)}const O2e={maxAttempts:5};class cie{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pp(e)}set(e,t,r){this._verifyNotCommitted();const i=Jd(e,this._firestore),s=Q1(i.converter,t,r),o=$1(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Rr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Jd(e,this._firestore);let o;return o="string"==typeof(t=(0,Vn.Ku)(t))||t instanceof vl?e$(this._dataReader,"WriteBatch.update",s._key,t,r,i):Zj(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jd(e,this._firestore);return this._mutations=this._mutations.concat(new k_(t._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jd(n,e){if((n=(0,Vn.Ku)(n)).firestore!==e)throw new Ce(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class F2e extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=pp(t)}get(t){const r=Jd(t,this._firestore),i=new g2e(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return rt();const o=s[0];if(o.isFoundDocument())return new _E(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new _E(this._firestore,i,r._key,null,r.converter);throw rt()})}set(t,r,i){const s=Jd(t,this._firestore),o=Q1(s.converter,r,i),a=$1(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Jd(t,this._firestore);let a;return a="string"==typeof(r=(0,Vn.Ku)(r))||r instanceof vl?e$(this._dataReader,"Transaction.update",o._key,r,i,s):Zj(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Jd(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jd(e,this._firestore),r=new Yd(this._firestore);return super.get(e).then(i=>new bl(this._firestore,r,t._key,i._document,new mp(!1,!1),t.converter))}}function a$(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hie(){if(typeof Uint8Array>"u")throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function fie(){if(!function gFe(){return typeof atob<"u"}())throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){v_=c_.SDK_VERSION,(0,c_._registerComponent)(new Tee.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new or(new VOe(r.getProvider("auth-internal")),new jOe(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ce(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,c_.registerVersion)(kee,"4.7.3",e),(0,c_.registerVersion)(kee,"4.7.3","esm2017")}();class IE{constructor(e){this._delegate=e}static fromBase64String(e){return fie(),new IE(su.fromBase64String(e))}static fromUint8Array(e){return hie(),new IE(su.fromUint8Array(e))}toBase64(){return fie(),this._delegate.toBase64()}toUint8Array(){return hie(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function c$(n){return function z2e(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class W2e{enableIndexedDbPersistence(e,t){return function WVe(n,e){fa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Gre(n,J_.provider,{build:r=>new Fj(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KVe(n){return Kj.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function QVe(n){if(n._initialized&&!n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new os;return n._queue.enqueueAndForgetEvenWhileRestricted((0,D.A)(function*(){try{yield(t=(0,D.A)(function*(i){if(!Zc.D())return Promise.resolve();const s=i+"main";yield Zc.delete(s)}),function r(i){return t.apply(this,arguments)})(CU(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pie{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ld||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Bre(n,e,t,r={}){var i;const s=(n=tn(n,fE))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=ss.MOCK_USER;else{a=(0,Vn.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ce(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ss(u)}n._authCredentials=new LOe(new Pee(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function JVe(n){return function kVe(n){return n.asyncQueue.enqueue((0,D.A)(function*(){const e=yield Are(n),t=yield Sre(n);return e.setNetworkEnabled(!0),function(i){const s=He(i);return s.L_.delete(0),hE(s)}(t)}))}(xr(n=tn(n,or)))}(this._delegate)}disableNetwork(){return function XVe(n){return function PVe(n){return n.asyncQueue.enqueue((0,D.A)(function*(){const e=yield Are(n),t=yield Sre(n);return e.setNetworkEnabled(!1),(r=(0,D.A)(function*(s){const o=He(s);o.L_.add(0),yield $_(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(xr(n=tn(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Pre("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YVe(n){return function(t){const r=new os;return t.asyncQueue.enqueueAndForget((0,D.A)(function*(){return function mVe(n,e){return Ij.apply(this,arguments)}(yield Hj(t),r)})),r.promise}(xr(n=tn(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function D2e(n,e){return function VVe(n,e){const t=new O1(e);return n.asyncQueue.enqueueAndForget((0,D.A)(function*(){return i=yield Z_(n),s=t,He(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,D.A)(function*(){return i=yield Z_(n),s=t,void He(i).Y_.delete(s);var i,s}))}}(xr(n=tn(n,or)),Wj(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,Ure(this._delegate,e))}catch(t){throw ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new ja(this,V1(this._delegate,e))}catch(t){throw ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fo(this,function GVe(n,e){if(n=tn(n,fE),qj("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ss(n,null,(r=e,new pl(an.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function L2e(n,e,t){n=tn(n,or);const r=Object.assign(Object.assign({},O2e),t);return function(s){if(s.maxAttempts<1)throw new Ce(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new os;return s.asyncQueue.enqueueAndForget((0,D.A)(function*(){const u=yield function Rre(n){return F1(n).then(e=>e.datastore)}(s);new NVe(s.asyncQueue,u,a,o,c).au()})),c.promise}(xr(n),i=>e(new F2e(n,i)),r)}(this._delegate,t=>e(new gie(this,t)))}batch(){return xr(this._delegate),new mie(new cie(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function ZVe(n,e){const t=xr(n=tn(n,or)),r=new qVe;return function BVe(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?Wte().encode(o):o,l=function(l,f){if(l instanceof Uint8Array)return Cre(l,f);if(l instanceof ArrayBuffer)return Cre(new Uint8Array(l),f);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new RVe(l,a);var l}(t,dE(e));n.asyncQueue.enqueueAndForget((0,D.A)(function*(){!function AVe(n,e,t){const r=He(n);var i;(i=(0,D.A)(function*(o,a,c){try{const u=yield a.getMetadata();if(yield function(I,T){const A=He(I),x=ui(T.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",N=>A.Gr.getBundleMetadata(N,T.id)).then(N=>!!N&&N.createTime.compareTo(x)>=0)}(o.localStore,u))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(I=u).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);c._updateProgress(pre(u));const l=new iVe(u,o.localStore,a.serializer);let f=yield a.Ua();for(;f;){const y=yield l.la(f);y&&c._updateProgress(y),f=yield a.Ua()}const _=yield l.complete();return yield yl(o,_.Ia,void 0),yield function(I,T){const A=He(I);return A.persistence.runTransaction("Save bundle","readwrite",x=>A.Gr.saveBundleMetadata(x,T))}(o.localStore,u),c._completeWith(_.progress),Promise.resolve(_.Pa)}catch(u){return fa("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}var I}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Hj(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function e2e(n,e){return function UVe(n,e){return n.asyncQueue.enqueue((0,D.A)(function*(){return function(r,i){const s=He(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield X_(n),e)}))}(xr(n=tn(n,or)),e).then(t=>t?new Ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fo(this,t):null)}}class J1 extends i${constructor(e){super(),this.firestore=e}convertBytes(e){return new IE(new su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ja.forKey(t,this.firestore,null)}}class gie{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new J1(e)}get(e){const t=yp(e);return this._delegate.get(t).then(r=>new EE(this._firestore,new bl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=yp(e);return r?(a$("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=yp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}}class mie{constructor(e){this._delegate=e}set(e,t,r){const i=yp(e);return r?(a$("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=yp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new bE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_p.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new _p(e,new J1(e),t),i.set(t,s)),s}}_p.INSTANCES=new WeakMap;class ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new J1(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ja(t,new Ir(t._delegate,r,new We(e)))}static forKey(e,t,r){return new ja(t,new Ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,Ure(this._delegate,e))}catch(t){throw ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vn.Ku)(e))instanceof Ir&&jre(this._delegate,e)}set(e,t){t=a$("DocumentReference.set",t);try{return t?sie(this._delegate,e,t):sie(this._delegate,e)}catch(r){throw ho(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?oie(this._delegate,e):oie(this._delegate,e,t,...r)}catch(i){throw ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function T2e(n){return ty(tn(n.firestore,or),[new k_(n._key,Rr.none())])}(this._delegate)}onSnapshot(...e){const t=_ie(e),r=yie(e,i=>new EE(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return aie(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function v2e(n){n=tn(n,Ir);const e=tn(n.firestore,or),t=xr(e),r=new Yd(e);return function OVe(n,e){const t=new os;return n.asyncQueue.enqueueAndForget((0,D.A)(function*(){return(r=(0,D.A)(function*(s,o,a){try{const c=yield function(l,f){const _=He(l);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,f))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Ce(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=z_(c,`Failed to get document '${o} from cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield X_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new bl(e,r,n._key,i,new mp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function b2e(n){n=tn(n,Ir);const e=tn(n.firestore,or);return xre(xr(e),n._key,{source:"server"}).then(t=>s$(e,n,t))}(this._delegate):function y2e(n){n=tn(n,Ir);const e=tn(n.firestore,or);return xre(xr(e),n._key).then(t=>s$(e,n,t))}(this._delegate),t.then(r=>new EE(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ja(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}function ho(n,e,t){return n.message=n.message.replace(e,t),n}function _ie(n){for(const e of n)if("object"==typeof e&&!c$(e))return e;return{}}function yie(n,e){var t,r;let i;return i=c$(n[0])?n[0]:c$(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class EE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iie(this._delegate,e._delegate)}}class wE extends EE{data(e){const t=this._delegate.data(e);return this._delegate._converter||function OOe(n,e){n||rt()}(void 0!==t),t}}class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new J1(e)}where(e,t,r){try{return new fo(this.firestore,Kd(this._delegate,function a2e(n,e,t){const r=e,i=q1("where",n);return vE._create(i,r,t)}(e,t,r)))}catch(i){throw ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fo(this.firestore,Kd(this._delegate,function c2e(n,e="asc"){const t=e,r=q1("orderBy",n);return r$._create(r,t)}(e,t)))}catch(r){throw ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fo(this.firestore,Kd(this._delegate,function u2e(n){return Lre("limit",n),z1._create("limit",n,"F")}(e)))}catch(t){throw ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fo(this.firestore,Kd(this._delegate,function l2e(n){return Lre("limitToLast",n),z1._create("limitToLast",n,"L")}(e)))}catch(t){throw ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fo(this.firestore,Kd(this._delegate,function d2e(...n){return W1._create("startAt",n,!0)}(...e)))}catch(t){throw ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fo(this.firestore,Kd(this._delegate,function h2e(...n){return W1._create("startAfter",n,!1)}(...e)))}catch(t){throw ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fo(this.firestore,Kd(this._delegate,function f2e(...n){return K1._create("endBefore",n,!1)}(...e)))}catch(t){throw ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fo(this.firestore,Kd(this._delegate,function p2e(...n){return K1._create("endAt",n,!0)}(...e)))}catch(t){throw ho(t,"endAt()","Query.endAt()")}}isEqual(e){return zj(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function E2e(n){n=tn(n,Ss);const e=tn(n.firestore,or),t=xr(e),r=new Yd(e);return function FVe(n,e){const t=new os;return n.asyncQueue.enqueueAndForget((0,D.A)(function*(){return(r=(0,D.A)(function*(s,o,a){try{const c=yield A1(s,o,!0),u=new _re(o,c.Ts),l=u.ma(c.documents),f=u.applyChanges(l,!1);a.resolve(f.snapshot)}catch(c){const u=z_(c,`Failed to execute query '${o} against cache`);a.reject(u)}}),function i(s,o,a){return r.apply(this,arguments)})(yield X_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Qd(e,r,n,i))}(this._delegate):"server"===e?.source?function w2e(n){n=tn(n,Ss);const e=tn(n.firestore,or),t=xr(e),r=new Yd(e);return Nre(t,n._query,{source:"server"}).then(i=>new Qd(e,r,n,i))}(this._delegate):function I2e(n){n=tn(n,Ss);const e=tn(n.firestore,or),t=xr(e),r=new Yd(e);return Xre(n._query),Nre(t,n._query).then(i=>new Qd(e,r,n,i))}(this._delegate),t.then(r=>new u$(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=_ie(e),r=yie(e,i=>new u$(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return aie(this._delegate,t,r)}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}class Q2e{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new wE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class u${constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Q2e(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new wE(this._firestore,r))})}isEqual(e){return iie(this._delegate,e._delegate)}}class ny extends fo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ja(this.firestore,e):null}doc(e){try{return new ja(this.firestore,void 0===e?V1(this._delegate):V1(this._delegate,e))}catch(t){throw ho(t,"doc()","CollectionReference.doc()")}}add(e){return function C2e(n,e){const t=tn(n.firestore,or),r=V1(n),i=Q1(n.converter,e);return ty(t,[$1(pp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ja(this.firestore,t))}isEqual(e){return jre(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}function yp(n){return tn(n,Ir)}class l${constructor(...e){this._delegate=new vl(...e)}static documentId(){return new l$(vr.keyField().canonicalString())}isEqual(e){return(e=(0,Vn.Ku)(e))instanceof vl&&this._delegate._internalPath.isEqual(e._internalPath)}}class vp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function B2e(){return new Qj("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vp(e)}static delete(){const e=function V2e(){return new gE("deleteField")}();return e._methodName="FieldValue.delete",new vp(e)}static arrayUnion(...e){const t=function U2e(...n){return new Yj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new vp(t)}static arrayRemove(...e){const t=function j2e(...n){return new Jj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new vp(t)}static increment(e){const t=function $2e(n){return new Xj("increment",n)}(e);return t._methodName="FieldValue.increment",new vp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Y2e={Firestore:pie,GeoPoint:B1,Timestamp:Ar,Blob:IE,Transaction:gie,WriteBatch:mie,DocumentReference:ja,DocumentSnapshot:EE,Query:fo,QueryDocumentSnapshot:wE,QuerySnapshot:u$,CollectionReference:ny,FieldPath:l$,FieldValue:vp,setLogLevel:function K2e(n){!function POe(n){kd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vie(n,e){return function Z2e(n,e=RS){return new sn(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function d$(n,e){return vie(n,e).pipe(je(t=>({payload:t,type:"query"})))}!function X2e(n){(function J2e(n,e){n.INTERNAL.registerComponent(new Tee.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Y2e)))})(n,(e,t)=>new pie(e,t,new W2e)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(cl.A);class bie{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Die(r,t);return new wie(i,s,this.afs)}snapshotChanges(){return function eBe(n,e){return vie(n,e).pipe(O0(void 0),BB(),je(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ua)}valueChanges(e={}){return this.snapshotChanges().pipe(je(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return hr(this.ref.get(e)).pipe(ua)}}function X1(n,e){return d$(n,e).pipe(O0(void 0),BB(),je(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const u=s.find(f=>f.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function Iie(n,e,t){return X1(n,t).pipe(nD((r,i)=>function tBe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function nBe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return h$(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return h$(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return h$(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function ZX(n,e=yo){return n=n??_Ne,jt((t,r)=>{let i,s=!0;t.subscribe(bt(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}(),je(r=>r.map(i=>({type:i.type,payload:i}))))}function h$(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Eie(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wie{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=X1(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(je(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(O0(void 0),BB(),ti(([r,i])=>i.length>0||!r),je(([,r])=>r),ua)}auditTrail(e){return this.stateChanges(e).pipe(nD((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Eie(e);return Iie(this.query,t,this.afs.schedulers.outsideAngular).pipe(ua)}valueChanges(e={}){return d$(this.query,this.afs.schedulers.outsideAngular).pipe(je(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),ua)}get(e){return hr(this.query.get(e)).pipe(ua)}add(e){return this.ref.add(e)}doc(e){return new bie(this.ref.doc(e),this.afs)}}class rBe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?X1(this.query,this.afs.schedulers.outsideAngular).pipe(je(t=>t.filter(r=>e.indexOf(r.type)>-1)),ti(t=>t.length>0),ua):X1(this.query,this.afs.schedulers.outsideAngular).pipe(ua)}auditTrail(e){return this.stateChanges(e).pipe(nD((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Eie(e);return Iie(this.query,t,this.afs.schedulers.outsideAngular).pipe(ua)}valueChanges(e={}){return d$(this.query,this.afs.schedulers.outsideAngular).pipe(je(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),ua)}get(e){return hr(this.query.get(e)).pipe(ua)}}const Tie=new Pe("angularfire2.enableFirestorePersistence"),Cie=new Pe("angularfire2.firestore.persistenceSettings"),iBe=new Pe("angularfire2.firestore.settings"),sBe=new Pe("angularfire2.firestore.use-emulator");function Die(n,e=(t=>t)){return{query:e(n),ref:n}}let oBe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,l,f,_,y,I,T,A,x,N){this.schedulers=c;const B=cB(t,a,r),ee=l;f&&WX(B,a,_,I,T,A,y,x),[this.firestore,this.persistenceEnabled$]=FX(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{const ie=a.runOutsideAngular(()=>B.firestore());if(s&&ie.settings(s),ee&&ie.useEmulator(...ee),i&&!VC(o)){const de=()=>{try{return hr(ie.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(M){return typeof console<"u"&&console.warn(M),gt(!1)}};return[ie,a.runOutsideAngular(de)]}return[ie,gt(!1)]},[s,ee,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Die(i,r),a=this.schedulers.ngZone.run(()=>s);return new wie(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new rBe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new bie(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Oe(NS),Oe(MS,8),Oe(Tie,8),Oe(iBe,8),Oe(Cc),Oe(qt),Oe(PX),Oe(Cie,8),Oe(sBe,8),Oe(kS,8),Oe(jX,8),Oe($X,8),Oe(HX,8),Oe(GX,8),Oe(qX,8),Oe(zX,8),Oe(MX,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),aBe=(()=>{class n{constructor(){cl.A.registerVersion("angularfire",xS.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Tie,useValue:!0},{provide:Cie,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xt({type:n});static \u0275inj=un({providers:[oBe]})}return n})(),cBe=(()=>{class n{constructor(t){this.authService=t}intercept(t,r){return hr(this.authService.getToken()).pipe(Xi(1),Ii(i=>(i&&(t=t.clone({setHeaders:{"X-Firebase-AppCheck":i?.token}})),r.handle(t))))}static{this.\u0275fac=function(r){return new(r||n)(Oe(Nd))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const Fie=new Pe("");let LBe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n})}static{this.\u0275inj=un({imports:[E8,VB]})}}return n})(),VBe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Xt({type:n,bootstrap:[MOe]})}static{this.\u0275inj=un({providers:[Nd,{provide:Fie,useClass:cBe,multi:!0}],imports:[D_e,tNe,Fxe.initializeApp(hS_firebase),$xe,aBe,Kye,LBe,COe]})}}return n})();T_e().bootstrapModule(VBe).catch(n=>console.error(n))},80:us=>{const be={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};be.localCName=be.generateIdentifier(),be.splitLines=function(k){return k.trim().split("\n").map(w=>w.trim())},be.splitSections=function(k){return k.split("\nm=").map((Z,ue)=>(ue>0?"m="+Z:Z).trim()+"\r\n")},be.getDescription=function(k){const w=be.splitSections(k);return w&&w[0]},be.getMediaSections=function(k){const w=be.splitSections(k);return w.shift(),w},be.matchPrefix=function(k,w){return be.splitLines(k).filter(Z=>0===Z.indexOf(w))},be.parseCandidate=function(k){let w;w=0===k.indexOf("a=candidate:")?k.substring(12).split(" "):k.substring(10).split(" ");const Z={foundation:w[0],component:{1:"rtp",2:"rtcp"}[w[1]]||w[1],protocol:w[2].toLowerCase(),priority:parseInt(w[3],10),ip:w[4],address:w[4],port:parseInt(w[5],10),type:w[7]};for(let ue=8;ue<w.length;ue+=2)switch(w[ue]){case"raddr":Z.relatedAddress=w[ue+1];break;case"rport":Z.relatedPort=parseInt(w[ue+1],10);break;case"tcptype":Z.tcpType=w[ue+1];break;case"ufrag":Z.ufrag=w[ue+1],Z.usernameFragment=w[ue+1];break;default:void 0===Z[w[ue]]&&(Z[w[ue]]=w[ue+1])}return Z},be.writeCandidate=function(k){const w=[];w.push(k.foundation);const Z=k.component;w.push("rtp"===Z?1:"rtcp"===Z?2:Z),w.push(k.protocol.toUpperCase()),w.push(k.priority),w.push(k.address||k.ip),w.push(k.port);const ue=k.type;return w.push("typ"),w.push(ue),"host"!==ue&&k.relatedAddress&&k.relatedPort&&(w.push("raddr"),w.push(k.relatedAddress),w.push("rport"),w.push(k.relatedPort)),k.tcpType&&"tcp"===k.protocol.toLowerCase()&&(w.push("tcptype"),w.push(k.tcpType)),(k.usernameFragment||k.ufrag)&&(w.push("ufrag"),w.push(k.usernameFragment||k.ufrag)),"candidate:"+w.join(" ")},be.parseIceOptions=function(k){return k.substring(14).split(" ")},be.parseRtpMap=function(k){let w=k.substring(9).split(" ");const Z={payloadType:parseInt(w.shift(),10)};return w=w[0].split("/"),Z.name=w[0],Z.clockRate=parseInt(w[1],10),Z.channels=3===w.length?parseInt(w[2],10):1,Z.numChannels=Z.channels,Z},be.writeRtpMap=function(k){let w=k.payloadType;void 0!==k.preferredPayloadType&&(w=k.preferredPayloadType);const Z=k.channels||k.numChannels||1;return"a=rtpmap:"+w+" "+k.name+"/"+k.clockRate+(1!==Z?"/"+Z:"")+"\r\n"},be.parseExtmap=function(k){const w=k.substring(9).split(" ");return{id:parseInt(w[0],10),direction:w[0].indexOf("/")>0?w[0].split("/")[1]:"sendrecv",uri:w[1],attributes:w.slice(2).join(" ")}},be.writeExtmap=function(k){return"a=extmap:"+(k.id||k.preferredId)+(k.direction&&"sendrecv"!==k.direction?"/"+k.direction:"")+" "+k.uri+(k.attributes?" "+k.attributes:"")+"\r\n"},be.parseFmtp=function(k){const w={};let Z;const ue=k.substring(k.indexOf(" ")+1).split(";");for(let K=0;K<ue.length;K++)Z=ue[K].trim().split("="),w[Z[0].trim()]=Z[1];return w},be.writeFmtp=function(k){let w="",Z=k.payloadType;if(void 0!==k.preferredPayloadType&&(Z=k.preferredPayloadType),k.parameters&&Object.keys(k.parameters).length){const ue=[];Object.keys(k.parameters).forEach(K=>{ue.push(void 0!==k.parameters[K]?K+"="+k.parameters[K]:K)}),w+="a=fmtp:"+Z+" "+ue.join(";")+"\r\n"}return w},be.parseRtcpFb=function(k){const w=k.substring(k.indexOf(" ")+1).split(" ");return{type:w.shift(),parameter:w.join(" ")}},be.writeRtcpFb=function(k){let w="",Z=k.payloadType;return void 0!==k.preferredPayloadType&&(Z=k.preferredPayloadType),k.rtcpFeedback&&k.rtcpFeedback.length&&k.rtcpFeedback.forEach(ue=>{w+="a=rtcp-fb:"+Z+" "+ue.type+(ue.parameter&&ue.parameter.length?" "+ue.parameter:"")+"\r\n"}),w},be.parseSsrcMedia=function(k){const w=k.indexOf(" "),Z={ssrc:parseInt(k.substring(7,w),10)},ue=k.indexOf(":",w);return ue>-1?(Z.attribute=k.substring(w+1,ue),Z.value=k.substring(ue+1)):Z.attribute=k.substring(w+1),Z},be.parseSsrcGroup=function(k){const w=k.substring(13).split(" ");return{semantics:w.shift(),ssrcs:w.map(Z=>parseInt(Z,10))}},be.getMid=function(k){const w=be.matchPrefix(k,"a=mid:")[0];if(w)return w.substring(6)},be.parseFingerprint=function(k){const w=k.substring(14).split(" ");return{algorithm:w[0].toLowerCase(),value:w[1].toUpperCase()}},be.getDtlsParameters=function(k,w){return{role:"auto",fingerprints:be.matchPrefix(k+w,"a=fingerprint:").map(be.parseFingerprint)}},be.writeDtlsParameters=function(k,w){let Z="a=setup:"+w+"\r\n";return k.fingerprints.forEach(ue=>{Z+="a=fingerprint:"+ue.algorithm+" "+ue.value+"\r\n"}),Z},be.parseCryptoLine=function(k){const w=k.substring(9).split(" ");return{tag:parseInt(w[0],10),cryptoSuite:w[1],keyParams:w[2],sessionParams:w.slice(3)}},be.writeCryptoLine=function(k){return"a=crypto:"+k.tag+" "+k.cryptoSuite+" "+("object"==typeof k.keyParams?be.writeCryptoKeyParams(k.keyParams):k.keyParams)+(k.sessionParams?" "+k.sessionParams.join(" "):"")+"\r\n"},be.parseCryptoKeyParams=function(k){if(0!==k.indexOf("inline:"))return null;const w=k.substring(7).split("|");return{keyMethod:"inline",keySalt:w[0],lifeTime:w[1],mkiValue:w[2]?w[2].split(":")[0]:void 0,mkiLength:w[2]?w[2].split(":")[1]:void 0}},be.writeCryptoKeyParams=function(k){return k.keyMethod+":"+k.keySalt+(k.lifeTime?"|"+k.lifeTime:"")+(k.mkiValue&&k.mkiLength?"|"+k.mkiValue+":"+k.mkiLength:"")},be.getCryptoParameters=function(k,w){return be.matchPrefix(k+w,"a=crypto:").map(be.parseCryptoLine)},be.getIceParameters=function(k,w){const Z=be.matchPrefix(k+w,"a=ice-ufrag:")[0],ue=be.matchPrefix(k+w,"a=ice-pwd:")[0];return Z&&ue?{usernameFragment:Z.substring(12),password:ue.substring(10)}:null},be.writeIceParameters=function(k){let w="a=ice-ufrag:"+k.usernameFragment+"\r\na=ice-pwd:"+k.password+"\r\n";return k.iceLite&&(w+="a=ice-lite\r\n"),w},be.parseRtpParameters=function(k){const w={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ue=be.splitLines(k)[0].split(" ");w.profile=ue[2];for(let D=3;D<ue.length;D++){const Bt=ue[D],Tt=be.matchPrefix(k,"a=rtpmap:"+Bt+" ")[0];if(Tt){const en=be.parseRtpMap(Tt),Ct=be.matchPrefix(k,"a=fmtp:"+Bt+" ");switch(en.parameters=Ct.length?be.parseFmtp(Ct[0]):{},en.rtcpFeedback=be.matchPrefix(k,"a=rtcp-fb:"+Bt+" ").map(be.parseRtcpFb),w.codecs.push(en),en.name.toUpperCase()){case"RED":case"ULPFEC":w.fecMechanisms.push(en.name.toUpperCase())}}}be.matchPrefix(k,"a=extmap:").forEach(D=>{w.headerExtensions.push(be.parseExtmap(D))});const K=be.matchPrefix(k,"a=rtcp-fb:* ").map(be.parseRtcpFb);return w.codecs.forEach(D=>{K.forEach(Bt=>{D.rtcpFeedback.find(en=>en.type===Bt.type&&en.parameter===Bt.parameter)||D.rtcpFeedback.push(Bt)})}),w},be.writeRtpDescription=function(k,w){let Z="";Z+="m="+k+" ",Z+=w.codecs.length>0?"9":"0",Z+=" "+(w.profile||"UDP/TLS/RTP/SAVPF")+" ",Z+=w.codecs.map(K=>void 0!==K.preferredPayloadType?K.preferredPayloadType:K.payloadType).join(" ")+"\r\n",Z+="c=IN IP4 0.0.0.0\r\n",Z+="a=rtcp:9 IN IP4 0.0.0.0\r\n",w.codecs.forEach(K=>{Z+=be.writeRtpMap(K),Z+=be.writeFmtp(K),Z+=be.writeRtcpFb(K)});let ue=0;return w.codecs.forEach(K=>{K.maxptime>ue&&(ue=K.maxptime)}),ue>0&&(Z+="a=maxptime:"+ue+"\r\n"),w.headerExtensions&&w.headerExtensions.forEach(K=>{Z+=be.writeExtmap(K)}),Z},be.parseRtpEncodingParameters=function(k){const w=[],Z=be.parseRtpParameters(k),ue=-1!==Z.fecMechanisms.indexOf("RED"),K=-1!==Z.fecMechanisms.indexOf("ULPFEC"),D=be.matchPrefix(k,"a=ssrc:").map(pe=>be.parseSsrcMedia(pe)).filter(pe=>"cname"===pe.attribute),Bt=D.length>0&&D[0].ssrc;let Tt;const en=be.matchPrefix(k,"a=ssrc-group:FID").map(pe=>pe.substring(17).split(" ").map(Je=>parseInt(Je,10)));en.length>0&&en[0].length>1&&en[0][0]===Bt&&(Tt=en[0][1]),Z.codecs.forEach(pe=>{if("RTX"===pe.name.toUpperCase()&&pe.parameters.apt){let se={ssrc:Bt,codecPayloadType:parseInt(pe.parameters.apt,10)};Bt&&Tt&&(se.rtx={ssrc:Tt}),w.push(se),ue&&(se=JSON.parse(JSON.stringify(se)),se.fec={ssrc:Bt,mechanism:K?"red+ulpfec":"red"},w.push(se))}}),0===w.length&&Bt&&w.push({ssrc:Bt});let Ct=be.matchPrefix(k,"b=");return Ct.length&&(Ct=0===Ct[0].indexOf("b=TIAS:")?parseInt(Ct[0].substring(7),10):0===Ct[0].indexOf("b=AS:")?1e3*parseInt(Ct[0].substring(5),10)*.95-16e3:void 0,w.forEach(pe=>{pe.maxBitrate=Ct})),w},be.parseRtcpParameters=function(k){const w={},Z=be.matchPrefix(k,"a=ssrc:").map(D=>be.parseSsrcMedia(D)).filter(D=>"cname"===D.attribute)[0];Z&&(w.cname=Z.value,w.ssrc=Z.ssrc);const ue=be.matchPrefix(k,"a=rtcp-rsize");w.reducedSize=ue.length>0,w.compound=0===ue.length;const K=be.matchPrefix(k,"a=rtcp-mux");return w.mux=K.length>0,w},be.writeRtcpParameters=function(k){let w="";return k.reducedSize&&(w+="a=rtcp-rsize\r\n"),k.mux&&(w+="a=rtcp-mux\r\n"),void 0!==k.ssrc&&k.cname&&(w+="a=ssrc:"+k.ssrc+" cname:"+k.cname+"\r\n"),w},be.parseMsid=function(k){let w;const Z=be.matchPrefix(k,"a=msid:");if(1===Z.length)return w=Z[0].substring(7).split(" "),{stream:w[0],track:w[1]};const ue=be.matchPrefix(k,"a=ssrc:").map(K=>be.parseSsrcMedia(K)).filter(K=>"msid"===K.attribute);return ue.length>0?(w=ue[0].value.split(" "),{stream:w[0],track:w[1]}):void 0},be.parseSctpDescription=function(k){const w=be.parseMLine(k),Z=be.matchPrefix(k,"a=max-message-size:");let ue;Z.length>0&&(ue=parseInt(Z[0].substring(19),10)),isNaN(ue)&&(ue=65536);const K=be.matchPrefix(k,"a=sctp-port:");if(K.length>0)return{port:parseInt(K[0].substring(12),10),protocol:w.fmt,maxMessageSize:ue};const D=be.matchPrefix(k,"a=sctpmap:");if(D.length>0){const Bt=D[0].substring(10).split(" ");return{port:parseInt(Bt[0],10),protocol:Bt[1],maxMessageSize:ue}}},be.writeSctpDescription=function(k,w){let Z=[];return Z="DTLS/SCTP"!==k.protocol?["m="+k.kind+" 9 "+k.protocol+" "+w.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+w.port+"\r\n"]:["m="+k.kind+" 9 "+k.protocol+" "+w.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+w.port+" "+w.protocol+" 65535\r\n"],void 0!==w.maxMessageSize&&Z.push("a=max-message-size:"+w.maxMessageSize+"\r\n"),Z.join("")},be.generateSessionId=function(){return Math.random().toString().substr(2,22)},be.writeSessionBoilerplate=function(k,w,Z){let ue;const K=void 0!==w?w:2;return ue=k||be.generateSessionId(),"v=0\r\no="+(Z||"thisisadapterortc")+" "+ue+" "+K+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},be.getDirection=function(k,w){const Z=be.splitLines(k);for(let ue=0;ue<Z.length;ue++)switch(Z[ue]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return Z[ue].substring(2)}return w?be.getDirection(w):"sendrecv"},be.getKind=function(k){return be.splitLines(k)[0].split(" ")[0].substring(2)},be.isRejected=function(k){return"0"===k.split(" ",2)[1]},be.parseMLine=function(k){const Z=be.splitLines(k)[0].substring(2).split(" ");return{kind:Z[0],port:parseInt(Z[1],10),protocol:Z[2],fmt:Z.slice(3).join(" ")}},be.parseOLine=function(k){const Z=be.matchPrefix(k,"o=")[0].substring(2).split(" ");return{username:Z[0],sessionId:Z[1],sessionVersion:parseInt(Z[2],10),netType:Z[3],addressType:Z[4],address:Z[5]}},be.isValidSDP=function(k){if("string"!=typeof k||0===k.length)return!1;const w=be.splitLines(k);for(let Z=0;Z<w.length;Z++)if(w[Z].length<2||"="!==w[Z].charAt(1))return!1;return!0},us.exports=be},574:(us,be,k)=>{k.d(be,{A:()=>Lr});var w=k(401),Z=k(779),ue=k(156),K=k(398);class D{constructor(St,Ft){this._delegate=St,this.firebase=Ft,(0,ue._addComponent)(St,new Z.uA("app-compat",()=>this,"PUBLIC")),this.container=St.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(St){this._delegate.automaticDataCollectionEnabled=St}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(St=>{this._delegate.checkDestroyed(),St()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ue.deleteApp)(this._delegate)))}_getService(St,Ft=ue._DEFAULT_ENTRY_NAME){var er;this._delegate.checkDestroyed();const di=this._delegate.container.getProvider(St);return!di.isInitialized()&&"EXPLICIT"===(null===(er=di.getComponent())||void 0===er?void 0:er.instantiationMode)&&di.initialize(),di.getImmediate({identifier:Ft})}_removeServiceInstance(St,Ft=ue._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(St).clearInstance(Ft)}_addComponent(St){(0,ue._addComponent)(this._delegate,St)}_addOrOverwriteComponent(St){(0,ue._addOrOverwriteComponent)(this._delegate,St)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Tt=new w.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Ct(){const rn=function en(rn){const St={},Ft={__esModule:!0,initializeApp:function Mn(mt,cr={}){const kn=ue.initializeApp(mt,cr);if((0,w.gR)(St,kn.name))return St[kn.name];const Ee=new rn(kn,Ft);return St[kn.name]=Ee,Ee},app:di,registerVersion:ue.registerVersion,setLogLevel:ue.setLogLevel,onLog:ue.onLog,apps:null,SDK_VERSION:ue.SDK_VERSION,INTERNAL:{registerComponent:function mn(mt){const cr=mt.name,kn=cr.replace("-compat","");if(ue._registerComponent(mt)&&"PUBLIC"===mt.type){const Ee=(Pn=di())=>{if("function"!=typeof Pn[kn])throw Tt.create("invalid-app-argument",{appName:cr});return Pn[kn]()};void 0!==mt.serviceProps&&(0,w.zw)(Ee,mt.serviceProps),Ft[kn]=Ee,rn.prototype[kn]=function(...Pn){return this._getService.bind(this,cr).apply(this,mt.multipleInstances?Pn:[])}}return"PUBLIC"===mt.type?Ft[kn]:null},removeApp:function er(mt){delete St[mt]},useAsService:function ls(mt,cr){return"serverAuth"===cr?null:cr},modularAPIs:ue}};function di(mt){if(!(0,w.gR)(St,mt=mt||ue._DEFAULT_ENTRY_NAME))throw Tt.create("no-app",{appName:mt});return St[mt]}return Ft.default=Ft,Object.defineProperty(Ft,"apps",{get:function gn(){return Object.keys(St).map(mt=>St[mt])}}),di.App=rn,Ft}(D);return rn.INTERNAL=Object.assign(Object.assign({},rn.INTERNAL),{createFirebaseNamespace:Ct,extendNamespace:function St(Ft){(0,w.zw)(rn,Ft)},createSubscribe:w.tD,ErrorFactory:w.FA,deepExtend:w.zw}),rn}(),se=new K.Vy("@firebase/app-compat");try{const rn=(0,w.mS)();if(void 0!==rn.firebase){se.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const St=rn.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&se.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Lr=pe;!function nn(rn){(0,ue.registerVersion)("@firebase/app-compat","0.2.43",rn)}()},156:(us,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>K.g,SDK_VERSION:()=>Ga,_DEFAULT_ENTRY_NAME:()=>hi,_addComponent:()=>sh,_addOrOverwriteComponent:()=>uu,_apps:()=>fi,_clearComponents:()=>_c,_components:()=>Os,_getProvider:()=>ba,_isFirebaseApp:()=>mc,_isFirebaseServerApp:()=>_o,_registerComponent:()=>pi,_removeServiceInstance:()=>Ia,_serverApps:()=>Ps,deleteApp:()=>lu,getApp:()=>yo,getApps:()=>oh,initializeApp:()=>Cl,initializeServerApp:()=>qa,onLog:()=>O,registerVersion:()=>V,setLogLevel:()=>$});var w=k(467),Z=k(779),ue=k(398),K=k(401);const D=(te,W)=>W.some(me=>te instanceof me);let Bt,Tt;const pe=new WeakMap,se=new WeakMap,Je=new WeakMap,Ht=new WeakMap,nn=new WeakMap;let St={get(te,W,me){if(te instanceof IDBTransaction){if("done"===W)return se.get(te);if("objectStoreNames"===W)return te.objectStoreNames||Je.get(te);if("store"===W)return me.objectStoreNames[1]?void 0:me.objectStore(me.objectStoreNames[0])}return Mn(te[W])},set:(te,W,me)=>(te[W]=me,!0),has:(te,W)=>te instanceof IDBTransaction&&("done"===W||"store"===W)||W in te};function di(te){return"function"==typeof te?function er(te){return te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ct(){return Tt||(Tt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(te)?function(...W){return te.apply(gn(this),W),Mn(pe.get(this))}:function(...W){return Mn(te.apply(gn(this),W))}:function(W,...me){const Ue=te.call(gn(this),W,...me);return Je.set(Ue,W.sort?W.sort():[W]),Mn(Ue)}}(te):(te instanceof IDBTransaction&&function rn(te){if(se.has(te))return;const W=new Promise((me,Ue)=>{const Dt=()=>{te.removeEventListener("complete",Rt),te.removeEventListener("error",xt),te.removeEventListener("abort",xt)},Rt=()=>{me(),Dt()},xt=()=>{Ue(te.error||new DOMException("AbortError","AbortError")),Dt()};te.addEventListener("complete",Rt),te.addEventListener("error",xt),te.addEventListener("abort",xt)});se.set(te,W)}(te),D(te,function en(){return Bt||(Bt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(te,St):te)}function Mn(te){if(te instanceof IDBRequest)return function Lr(te){const W=new Promise((me,Ue)=>{const Dt=()=>{te.removeEventListener("success",Rt),te.removeEventListener("error",xt)},Rt=()=>{me(Mn(te.result)),Dt()},xt=()=>{Ue(te.error),Dt()};te.addEventListener("success",Rt),te.addEventListener("error",xt)});return W.then(me=>{me instanceof IDBCursor&&pe.set(me,te)}).catch(()=>{}),nn.set(W,te),W}(te);if(Ht.has(te))return Ht.get(te);const W=di(te);return W!==te&&(Ht.set(te,W),nn.set(W,te)),W}const gn=te=>nn.get(te),mt=["get","getKey","getAll","getAllKeys","count"],cr=["put","add","delete","clear"],kn=new Map;function Ee(te,W){if(!(te instanceof IDBDatabase)||W in te||"string"!=typeof W)return;if(kn.get(W))return kn.get(W);const me=W.replace(/FromIndex$/,""),Ue=W!==me,Dt=cr.includes(me);if(!(me in(Ue?IDBIndex:IDBObjectStore).prototype)||!Dt&&!mt.includes(me))return;const Rt=function(){var xt=(0,w.A)(function*(pr,...pt){const vo=this.transaction(pr,Dt?"readwrite":"readonly");let Dn=vo.store;return Ue&&(Dn=Dn.index(pt.shift())),(yield Promise.all([Dn[me](...pt),Dt&&vo.done]))[0]});return function(pt){return xt.apply(this,arguments)}}();return kn.set(W,Rt),Rt}!function Ft(te){St=te(St)}(te=>({...te,get:(W,me,Ue)=>Ee(W,me)||te.get(W,me,Ue),has:(W,me)=>!!Ee(W,me)||te.has(W,me)}));class Pn{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(me=>{if(function wr(te){const W=te.getComponent();return"VERSION"===W?.type}(me)){const Ue=me.getImmediate();return`${Ue.library}/${Ue.version}`}return null}).filter(me=>me).join(" ")}}const ds="@firebase/app",Uo="0.10.13",Gi=new ue.Vy("@firebase/app"),hi="[DEFAULT]",va={[ds]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},fi=new Map,Ps=new Map,Os=new Map;function sh(te,W){try{te.container.addComponent(W)}catch(me){Gi.debug(`Component ${W.name} failed to register with FirebaseApp ${te.name}`,me)}}function uu(te,W){te.container.addOrOverwriteComponent(W)}function pi(te){const W=te.name;if(Os.has(W))return Gi.debug(`There were multiple attempts to register component ${W}.`),!1;Os.set(W,te);for(const me of fi.values())sh(me,te);for(const me of Ps.values())sh(me,te);return!0}function ba(te,W){const me=te.container.getProvider("heartbeat").getImmediate({optional:!0});return me&&me.triggerHeartbeat(),te.container.getProvider(W)}function Ia(te,W,me=hi){ba(te,W).clearInstance(me)}function mc(te){return void 0!==te.options}function _o(te){return void 0!==te.settings}function _c(){Os.clear()}const zr=new K.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ea{constructor(W,me,Ue){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},me),this._name=me.name,this._automaticDataCollectionEnabled=me.automaticDataCollectionEnabled,this._container=Ue,this.container.addComponent(new Z.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}class Ha extends Ea{constructor(W,me,Ue,Dt){const Rt=void 0!==me.automaticDataCollectionEnabled&&me.automaticDataCollectionEnabled,xt={name:Ue,automaticDataCollectionEnabled:Rt};super(void 0!==W.apiKey?W:W.options,xt,Dt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Rt},me),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,me.releaseOnDeref=void 0,V(ds,Uo,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(W){this.isDeleted||(this._refCount++,void 0!==W&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(W,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){lu(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw zr.create("server-app-deleted")}}const Ga="10.14.1";function Cl(te,W={}){let me=te;"object"!=typeof W&&(W={name:W});const Ue=Object.assign({name:hi,automaticDataCollectionEnabled:!1},W),Dt=Ue.name;if("string"!=typeof Dt||!Dt)throw zr.create("bad-app-name",{appName:String(Dt)});if(me||(me=(0,K.T9)()),!me)throw zr.create("no-options");const Rt=fi.get(Dt);if(Rt){if((0,K.bD)(me,Rt.options)&&(0,K.bD)(Ue,Rt.config))return Rt;throw zr.create("duplicate-app",{appName:Dt})}const xt=new Z.h1(Dt);for(const pt of Os.values())xt.addComponent(pt);const pr=new Ea(me,Ue,xt);return fi.set(Dt,pr),pr}function qa(te,W){if((0,K.Bd)()&&!(0,K.p7)())throw zr.create("invalid-server-app-environment");let me;void 0===W.automaticDataCollectionEnabled&&(W.automaticDataCollectionEnabled=!1),me=mc(te)?te.options:te;const Ue=Object.assign(Object.assign({},W),me);if(void 0!==Ue.releaseOnDeref&&delete Ue.releaseOnDeref,void 0!==W.releaseOnDeref&&typeof FinalizationRegistry>"u")throw zr.create("finalization-registry-not-supported",{});const Rt=""+(vo=JSON.stringify(Ue),[...vo].reduce((Dn,yn)=>Math.imul(31,Dn)+yn.charCodeAt(0)|0,0)),xt=Ps.get(Rt);var vo;if(xt)return xt.incRefCount(W.releaseOnDeref),xt;const pr=new Z.h1(Rt);for(const vo of Os.values())pr.addComponent(vo);const pt=new Ha(me,W,Rt,pr);return Ps.set(Rt,pt),pt}function yo(te=hi){const W=fi.get(te);if(!W&&te===hi&&(0,K.T9)())return Cl();if(!W)throw zr.create("no-app",{appName:te});return W}function oh(){return Array.from(fi.values())}function lu(te){return sn.apply(this,arguments)}function sn(){return(sn=(0,w.A)(function*(te){let W=!1;const me=te.name;fi.has(me)?(W=!0,fi.delete(me)):Ps.has(me)&&te.decRefCount()<=0&&(Ps.delete(me),W=!0),W&&(yield Promise.all(te.container.getProviders().map(Ue=>Ue.delete())),te.isDeleted=!0)})).apply(this,arguments)}function V(te,W,me){var Ue;let Dt=null!==(Ue=va[te])&&void 0!==Ue?Ue:te;me&&(Dt+=`-${me}`);const Rt=Dt.match(/\s|\//),xt=W.match(/\s|\//);if(Rt||xt){const pr=[`Unable to register library "${Dt}" with version "${W}":`];return Rt&&pr.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Rt&&xt&&pr.push("and"),xt&&pr.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void Gi.warn(pr.join(" "))}pi(new Z.uA(`${Dt}-version`,()=>({library:Dt,version:W}),"VERSION"))}function O(te,W){if(null!==te&&"function"!=typeof te)throw zr.create("invalid-log-argument");(0,ue.Ey)(te,W)}function $(te){(0,ue.He)(te)}const ye="firebase-heartbeat-database",q=1,et="firebase-heartbeat-store";let nt=null;function nr(){return nt||(nt=function mn(te,W,{blocked:me,upgrade:Ue,blocking:Dt,terminated:Rt}={}){const xt=indexedDB.open(te,W),pr=Mn(xt);return Ue&&xt.addEventListener("upgradeneeded",pt=>{Ue(Mn(xt.result),pt.oldVersion,pt.newVersion,Mn(xt.transaction),pt)}),me&&xt.addEventListener("blocked",pt=>me(pt.oldVersion,pt.newVersion,pt)),pr.then(pt=>{Rt&&pt.addEventListener("close",()=>Rt()),Dt&&pt.addEventListener("versionchange",vo=>Dt(vo.oldVersion,vo.newVersion,vo))}).catch(()=>{}),pr}(ye,q,{upgrade:(te,W)=>{if(0===W)try{te.createObjectStore(et)}catch(me){console.warn(me)}}}).catch(te=>{throw zr.create("idb-open",{originalErrorMessage:te.message})})),nt}function bt(){return(bt=(0,w.A)(function*(te){try{const me=(yield nr()).transaction(et),Ue=yield me.objectStore(et).get(Fs(te));return yield me.done,Ue}catch(W){if(W instanceof K.g)Gi.warn(W.message);else{const me=zr.create("idb-get",{originalErrorMessage:W?.message});Gi.warn(me.message)}}})).apply(this,arguments)}function gi(te,W){return je.apply(this,arguments)}function je(){return(je=(0,w.A)(function*(te,W){try{const Ue=(yield nr()).transaction(et,"readwrite");yield Ue.objectStore(et).put(W,Fs(te)),yield Ue.done}catch(me){if(me instanceof K.g)Gi.warn(me.message);else{const Ue=zr.create("idb-set",{originalErrorMessage:me?.message});Gi.warn(Ue.message)}}})).apply(this,arguments)}function Fs(te){return`${te.name}!${te.options.appId}`}class za{constructor(W){this.container=W,this._heartbeatsCache=null;const me=this.container.getProvider("app").getImmediate();this._storage=new dy(me),this._heartbeatsCachePromise=this._storage.read().then(Ue=>(this._heartbeatsCache=Ue,Ue))}triggerHeartbeat(){var W=this;return(0,w.A)(function*(){var me,Ue;try{const Rt=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=jo();return null==(null===(me=W._heartbeatsCache)||void 0===me?void 0:me.heartbeats)&&(W._heartbeatsCache=yield W._heartbeatsCachePromise,null==(null===(Ue=W._heartbeatsCache)||void 0===Ue?void 0:Ue.heartbeats))||W._heartbeatsCache.lastSentHeartbeatDate===xt||W._heartbeatsCache.heartbeats.some(pr=>pr.date===xt)?void 0:(W._heartbeatsCache.heartbeats.push({date:xt,agent:Rt}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(pr=>{const pt=new Date(pr.date).valueOf();return Date.now()-pt<=2592e6}),W._storage.overwrite(W._heartbeatsCache))}catch(Dt){Gi.warn(Dt)}})()}getHeartbeatsHeader(){var W=this;return(0,w.A)(function*(){var me;try{if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null==(null===(me=W._heartbeatsCache)||void 0===me?void 0:me.heartbeats)||0===W._heartbeatsCache.heartbeats.length)return"";const Ue=jo(),{heartbeatsToSend:Dt,unsentEntries:Rt}=function ah(te,W=1024){const me=[];let Ue=te.slice();for(const Dt of te){const Rt=me.find(xt=>xt.agent===Dt.agent);if(Rt){if(Rt.dates.push(Dt.date),du(me)>W){Rt.dates.pop();break}}else if(me.push({agent:Dt.agent,dates:[Dt.date]}),du(me)>W){me.pop();break}Ue=Ue.slice(1)}return{heartbeatsToSend:me,unsentEntries:Ue}}(W._heartbeatsCache.heartbeats),xt=(0,K.Uj)(JSON.stringify({version:2,heartbeats:Dt}));return W._heartbeatsCache.lastSentHeartbeatDate=Ue,Rt.length>0?(W._heartbeatsCache.heartbeats=Rt,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),xt}catch(Ue){return Gi.warn(Ue),""}})()}}function jo(){return(new Date).toISOString().substring(0,10)}class dy{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.A)(function*(){return!!(0,K.zW)()&&(0,K.eX)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,w.A)(function*(){if(yield W._canUseIndexedDBPromise){const Ue=yield function jt(te){return bt.apply(this,arguments)}(W.app);return Ue?.heartbeats?Ue:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(W){var me=this;return(0,w.A)(function*(){var Ue;if(yield me._canUseIndexedDBPromise){const Rt=yield me.read();return gi(me.app,{lastSentHeartbeatDate:null!==(Ue=W.lastSentHeartbeatDate)&&void 0!==Ue?Ue:Rt.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var me=this;return(0,w.A)(function*(){var Ue;if(yield me._canUseIndexedDBPromise){const Rt=yield me.read();return gi(me.app,{lastSentHeartbeatDate:null!==(Ue=W.lastSentHeartbeatDate)&&void 0!==Ue?Ue:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...W.heartbeats]})}})()}}function du(te){return(0,K.Uj)(JSON.stringify({version:2,heartbeats:te})).length}!function xp(te){pi(new Z.uA("platform-logger",W=>new Pn(W),"PRIVATE")),pi(new Z.uA("heartbeat",W=>new za(W),"PRIVATE")),V(ds,Uo,te),V(ds,Uo,"esm2017"),V("fire-js","")}("")},779:(us,be,k)=>{k.d(be,{h1:()=>en,uA:()=>ue});var w=k(467),Z=k(401);class ue{constructor(pe,se,Je){this.name=pe,this.instanceFactory=se,this.type=Je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const K="[DEFAULT]";class D{constructor(pe,se){this.name=pe,this.container=se,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const se=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(se)){const Je=new Z.cY;if(this.instancesDeferred.set(se,Je),this.isInitialized(se)||this.shouldAutoInitialize())try{const Ht=this.getOrInitializeService({instanceIdentifier:se});Ht&&Je.resolve(Ht)}catch{}}return this.instancesDeferred.get(se).promise}getImmediate(pe){var se;const Je=this.normalizeInstanceIdentifier(pe?.identifier),Ht=null!==(se=pe?.optional)&&void 0!==se&&se;if(!this.isInitialized(Je)&&!this.shouldAutoInitialize()){if(Ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Je})}catch(nn){if(Ht)return null;throw nn}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Tt(Ct){return"EAGER"===Ct.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:K})}catch{}for(const[se,Je]of this.instancesDeferred.entries()){const Ht=this.normalizeInstanceIdentifier(se);try{const nn=this.getOrInitializeService({instanceIdentifier:Ht});Je.resolve(nn)}catch{}}}}clearInstance(pe=K){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,w.A)(function*(){const se=Array.from(pe.instances.values());yield Promise.all([...se.filter(Je=>"INTERNAL"in Je).map(Je=>Je.INTERNAL.delete()),...se.filter(Je=>"_delete"in Je).map(Je=>Je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=K){return this.instances.has(pe)}getOptions(pe=K){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:se={}}=pe,Je=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Je))throw Error(`${this.name}(${Je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ht=this.getOrInitializeService({instanceIdentifier:Je,options:se});for(const[nn,Lr]of this.instancesDeferred.entries())Je===this.normalizeInstanceIdentifier(nn)&&Lr.resolve(Ht);return Ht}onInit(pe,se){var Je;const Ht=this.normalizeInstanceIdentifier(se),nn=null!==(Je=this.onInitCallbacks.get(Ht))&&void 0!==Je?Je:new Set;nn.add(pe),this.onInitCallbacks.set(Ht,nn);const Lr=this.instances.get(Ht);return Lr&&pe(Lr,Ht),()=>{nn.delete(pe)}}invokeOnInitCallbacks(pe,se){const Je=this.onInitCallbacks.get(se);if(Je)for(const Ht of Je)try{Ht(pe,se)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:se={}}){let Je=this.instances.get(pe);if(!Je&&this.component&&(Je=this.component.instanceFactory(this.container,{instanceIdentifier:(Ct=pe,Ct===K?void 0:Ct),options:se}),this.instances.set(pe,Je),this.instancesOptions.set(pe,se),this.invokeOnInitCallbacks(Je,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Je)}catch{}var Ct;return Je||null}normalizeInstanceIdentifier(pe=K){return this.component?this.component.multipleInstances?pe:K:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class en{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const se=this.getProvider(pe.name);if(se.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);se.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const se=new D(pe,this);return this.providers.set(pe,se),se}getProviders(){return Array.from(this.providers.values())}}},398:(us,be,k)=>{k.d(be,{$b:()=>Z,Ey:()=>Ct,He:()=>en,Vy:()=>Tt});const w=[];var Z=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(Z||{});const ue={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},K=Z.INFO,D={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Bt=(pe,se,...Je)=>{if(se<pe.logLevel)return;const Ht=(new Date).toISOString(),nn=D[se];if(!nn)throw new Error(`Attempted to log a message with an invalid logType (value: ${se})`);console[nn](`[${Ht}]  ${pe.name}:`,...Je)};class Tt{constructor(se){this.name=se,this._logLevel=K,this._logHandler=Bt,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(se){if(!(se in Z))throw new TypeError(`Invalid value "${se}" assigned to \`logLevel\``);this._logLevel=se}setLogLevel(se){this._logLevel="string"==typeof se?ue[se]:se}get logHandler(){return this._logHandler}set logHandler(se){if("function"!=typeof se)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=se}get userLogHandler(){return this._userLogHandler}set userLogHandler(se){this._userLogHandler=se}debug(...se){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...se),this._logHandler(this,Z.DEBUG,...se)}log(...se){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...se),this._logHandler(this,Z.VERBOSE,...se)}info(...se){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...se),this._logHandler(this,Z.INFO,...se)}warn(...se){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...se),this._logHandler(this,Z.WARN,...se)}error(...se){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...se),this._logHandler(this,Z.ERROR,...se)}}function en(pe){w.forEach(se=>{se.setLogLevel(pe)})}function Ct(pe,se){for(const Je of w){let Ht=null;se&&se.level&&(Ht=ue[se.level]),Je.userLogHandler=null===pe?null:(nn,Lr,...rn)=>{const St=rn.map(Ft=>{if(null==Ft)return null;if("string"==typeof Ft)return Ft;if("number"==typeof Ft||"boolean"==typeof Ft)return Ft.toString();if(Ft instanceof Error)return Ft.message;try{return JSON.stringify(Ft)}catch{return null}}).filter(Ft=>Ft).join(" ");Lr>=(Ht??nn.logLevel)&&pe({level:Z[Lr].toLowerCase(),message:St,args:rn,type:nn.name})}}}},324:(us,be,k)=>{var w=k(467),Z=k(574),ue=k(156),K=k(401),D=k(398),Bt=k(635),Tt=k(779);const Ct={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Lr=function Ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},rn=function nn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},St=new K.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),er=new D.Vy("@firebase/auth");function Mn(g,...d){er.logLevel<=D.$b.ERROR&&er.error(`Auth (${ue.SDK_VERSION}): ${g}`,...d)}function gn(g,...d){throw kn(g,...d)}function mn(g,...d){return kn(g,...d)}function ls(g,d,h){const m=Object.assign(Object.assign({},rn()),{[d]:h});return new K.FA("auth","Firebase",m).create(d,{appName:g.name})}function mt(g){return ls(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cr(g,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&gn(g,"argument-error"),ls(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kn(g,...d){if("string"!=typeof g){const h=d[0],m=[...d.slice(1)];return m[0]&&(m[0].appName=g.name),g._errorFactory.create(h,...m)}return St.create(g,...d)}function Ee(g,d,...h){if(!g)throw kn(d,...h)}function Pn(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Mn(d),new Error(d)}function wr(g,d){g||Pn(d)}function ds(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Uo(){return"http:"===Gi()||"https:"===Gi()}function Gi(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class re{constructor(d,h){this.shortDelay=d,this.longDelay=h,wr(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,K.jZ)()||(0,K.lV)()}get(){return function $a(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Uo()||(0,K.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ae(g,d){wr(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class _e{static initialize(d,h,m){this.fetchImpl=d,h&&(this.headersImpl=h),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ve=new re(3e4,6e4);function Ie(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function ze(g,d,h,m){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,w.A)(function*(g,d,h,m,b={}){return Q(g,b,(0,w.A)(function*(){let C={},P={};m&&("GET"===d?P=m:C={body:JSON.stringify(m)});const z=(0,K.Am)(Object.assign({key:g.config.apiKey},P)).slice(1),ge=yield g._getAdditionalHeaders();ge["Content-Type"]="application/json",g.languageCode&&(ge["X-Firebase-Locale"]=g.languageCode);const Be=Object.assign({method:d,headers:ge},C);return(0,K.c1)()||(Be.referrerPolicy="no-referrer"),_e.fetch()(Le(g,g.config.apiHost,h,z),Be)}))})).apply(this,arguments)}function Q(g,d,h){return G.apply(this,arguments)}function G(){return(G=(0,w.A)(function*(g,d,h){g._canInitEmulator=!1;const m=Object.assign(Object.assign({},ve),d);try{const b=new Bn(g),C=yield Promise.race([h(),b.promise]);b.clearNetworkTimeout();const P=yield C.json();if("needConfirmation"in P)throw Ut(g,"account-exists-with-different-credential",P);if(C.ok&&!("errorMessage"in P))return P;{const z=C.ok?P.errorMessage:P.error.message,[ge,Be]=z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ge)throw Ut(g,"credential-already-in-use",P);if("EMAIL_EXISTS"===ge)throw Ut(g,"email-already-in-use",P);if("USER_DISABLED"===ge)throw Ut(g,"user-disabled",P);const Xe=m[ge]||ge.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw ls(g,Xe,Be);gn(g,Xe)}}catch(b){if(b instanceof K.g)throw b;gn(g,"network-request-failed",{message:String(b)})}})).apply(this,arguments)}function he(g,d,h,m){return Te.apply(this,arguments)}function Te(){return(Te=(0,w.A)(function*(g,d,h,m,b={}){const C=yield ze(g,d,h,m,b);return"mfaPendingCredential"in C&&gn(g,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function Le(g,d,h,m){const b=`${d}${h}?${m}`;return g.config.emulator?ae(g.config,b):`${g.config.apiScheme}://${b}`}function Ze(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,m)=>{this.timer=setTimeout(()=>m(mn(this.auth,"network-request-failed")),Ve.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ut(g,d,h){const m={appName:g.name};h.email&&(m.email=h.email),h.phoneNumber&&(m.phoneNumber=h.phoneNumber);const b=mn(g,d,m);return b.customData._tokenResponse=h,b}function Ye(g){return void 0!==g&&void 0!==g.getResponse}function Cn(g){return void 0!==g&&void 0!==g.enterprise}class Ms{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===d)return Ze(h.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function tr(){return(tr=(0,w.A)(function*(g){return(yield ze(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function mo(g,d){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,w.A)(function*(g,d){return ze(g,"GET","/v2/recaptchaConfig",Ie(g,d))})).apply(this,arguments)}function _n(){return(_n=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function va(){return(va=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function fi(g,d){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Os(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function pi(){return(pi=(0,w.A)(function*(g,d=!1){const h=(0,K.Ku)(g),m=yield h.getIdToken(d),b=Ia(m);Ee(b&&b.exp&&b.auth_time&&b.iat,h.auth,"internal-error");const C="object"==typeof b.firebase?b.firebase:void 0,P=C?.sign_in_provider;return{claims:b,token:m,authTime:Os(ba(b.auth_time)),issuedAtTime:Os(ba(b.iat)),expirationTime:Os(ba(b.exp)),signInProvider:P||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function ba(g){return 1e3*Number(g)}function Ia(g){const[d,h,m]=g.split(".");if(void 0===d||void 0===h||void 0===m)return Mn("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,K.u)(h);return b?JSON.parse(b):(Mn("Failed to decode base64 JWT payload"),null)}catch(b){return Mn("Caught error parsing JWT payload as JSON",b?.toString()),null}}function mc(g){const d=Ia(g);return Ee(d,"internal-error"),Ee(typeof d.exp<"u","internal-error"),Ee(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function _o(g,d){return _c.apply(this,arguments)}function _c(){return(_c=(0,w.A)(function*(g,d,h=!1){if(h)return d;try{return yield d}catch(m){throw m instanceof K.g&&function Rp({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(m)&&g.auth.currentUser===g&&(yield g.auth.signOut()),m}})).apply(this,arguments)}class zr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const b=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const m=this.getInterval(d);this.timerId=setTimeout((0,w.A)(function*(){yield h.iteration()}),m)}iteration(){var d=this;return(0,w.A)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class Ea{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Os(this.lastLoginAt),this.creationTime=Os(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ha(g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,w.A)(function*(g){var d;const h=g.auth,m=yield g.getIdToken(),b=yield _o(g,fi(h,{idToken:m}));Ee(b?.users.length,h,"internal-error");const C=b.users[0];g._notifyReloadListener(C);const P=null!==(d=C.providerUserInfo)&&void 0!==d&&d.length?oh(C.providerUserInfo):[],z=function yo(g,d){return[...g.filter(m=>!d.some(b=>b.providerId===m.providerId)),...d]}(g.providerData,P),Xe=!!g.isAnonymous&&!(g.email&&C.passwordHash||z?.length),tt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:z,metadata:new Ea(C.createdAt,C.lastLoginAt),isAnonymous:Xe};Object.assign(g,tt)})).apply(this,arguments)}function qa(){return(qa=(0,w.A)(function*(g){const d=(0,K.Ku)(g);yield Ha(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function oh(g){return g.map(d=>{var{providerId:h}=d,m=(0,Bt.Tt)(d,["providerId"]);return{providerId:h,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}function sn(){return(sn=(0,w.A)(function*(g,d){const h=yield Q(g,{},(0,w.A)(function*(){const m=(0,K.Am)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:b,apiKey:C}=g.config,P=Le(g,b,"/v1/token",`key=${C}`),z=yield g._getAdditionalHeaders();return z["Content-Type"]="application/x-www-form-urlencoded",_e.fetch()(P,{method:"POST",headers:z,body:m})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function O(){return(O=(0,w.A)(function*(g,d){return ze(g,"POST","/v2/accounts:revokeToken",Ie(g,d))})).apply(this,arguments)}class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ee(d.idToken,"internal-error"),Ee(typeof d.idToken<"u","internal-error"),Ee(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):mc(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}updateFromIdToken(d){Ee(0!==d.length,"internal-error");const h=mc(d);this.updateTokensAndExpiration(d,null,h)}getToken(d,h=!1){var m=this;return(0,w.A)(function*(){return h||!m.accessToken||m.isExpired?(Ee(m.refreshToken,d,"user-token-expired"),m.refreshToken?(yield m.refresh(d,m.refreshToken),m.accessToken):null):m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var m=this;return(0,w.A)(function*(){const{accessToken:b,refreshToken:C,expiresIn:P}=yield function lu(g,d){return sn.apply(this,arguments)}(d,h);m.updateTokensAndExpiration(b,C,Number(P))})()}updateTokensAndExpiration(d,h,m){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(d,h){const{refreshToken:m,accessToken:b,expirationTime:C}=h,P=new $;return m&&(Ee("string"==typeof m,"internal-error",{appName:d}),P.refreshToken=m),b&&(Ee("string"==typeof b,"internal-error",{appName:d}),P.accessToken=b),C&&(Ee("number"==typeof C,"internal-error",{appName:d}),P.expirationTime=C),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return Pn("not implemented")}}function ye(g,d){Ee("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class q{constructor(d){var{uid:h,auth:m,stsTokenManager:b}=d,C=(0,Bt.Tt)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=m,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new Ea(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,w.A)(function*(){const m=yield _o(h,h.stsTokenManager.getToken(h.auth,d));return Ee(m,h.auth,"internal-error"),h.accessToken!==m&&(h.accessToken=m,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),m})()}getIdTokenResult(d){return function uu(g){return pi.apply(this,arguments)}(this,d)}reload(){return function Cl(g){return qa.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new q(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var m=this;return(0,w.A)(function*(){let b=!1;d.idToken&&d.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(d),b=!0),h&&(yield Ha(m)),yield m.auth._persistUserIfCurrent(m),b&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var d=this;return(0,w.A)(function*(){if((0,ue._isFirebaseServerApp)(d.auth.app))return Promise.reject(mt(d.auth));const h=yield d.getIdToken();return yield _o(d,function ya(g,d){return _n.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var m,b,C,P,z,ge,Be,Xe;const tt=null!==(m=h.displayName)&&void 0!==m?m:void 0,mr=null!==(b=h.email)&&void 0!==b?b:void 0,Na=null!==(C=h.phoneNumber)&&void 0!==C?C:void 0,Bh=null!==(P=h.photoURL)&&void 0!==P?P:void 0,wv=null!==(z=h.tenantId)&&void 0!==z?z:void 0,Pr=null!==(ge=h._redirectEventId)&&void 0!==ge?ge:void 0,Tx=null!==(Be=h.createdAt)&&void 0!==Be?Be:void 0,Tv=null!==(Xe=h.lastLoginAt)&&void 0!==Xe?Xe:void 0,{uid:fT,emailVerified:hg,isAnonymous:Qo,providerData:fg,stsTokenManager:Yo}=h;Ee(fT&&Yo,d,"internal-error");const Cx=$.fromJSON(this.name,Yo);Ee("string"==typeof fT,d,"internal-error"),ye(tt,d.name),ye(mr,d.name),Ee("boolean"==typeof hg,d,"internal-error"),Ee("boolean"==typeof Qo,d,"internal-error"),ye(Na,d.name),ye(Bh,d.name),ye(wv,d.name),ye(Pr,d.name),ye(Tx,d.name),ye(Tv,d.name);const Cv=new q({uid:fT,auth:d,email:mr,emailVerified:hg,displayName:tt,isAnonymous:Qo,photoURL:Bh,phoneNumber:Na,tenantId:wv,stsTokenManager:Cx,createdAt:Tx,lastLoginAt:Tv});return fg&&Array.isArray(fg)&&(Cv.providerData=fg.map(pT=>Object.assign({},pT))),Pr&&(Cv._redirectEventId=Pr),Cv}static _fromIdTokenResponse(d,h,m=!1){return(0,w.A)(function*(){const b=new $;b.updateFromServerResponse(h);const C=new q({uid:h.localId,auth:d,stsTokenManager:b,isAnonymous:m});return yield Ha(C),C})()}static _fromGetAccountInfoResponse(d,h,m){return(0,w.A)(function*(){const b=h.users[0];Ee(void 0!==b.localId,"internal-error");const C=void 0!==b.providerUserInfo?oh(b.providerUserInfo):[],P=!(b.email&&b.passwordHash||C?.length),z=new $;z.updateFromIdToken(m);const ge=new q({uid:b.localId,auth:d,stsTokenManager:z,isAnonymous:P}),Be={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:C,metadata:new Ea(b.createdAt,b.lastLoginAt),isAnonymous:!(b.email&&b.passwordHash||C?.length)};return Object.assign(ge,Be),ge})()}}const et=new Map;function nt(g){wr(g instanceof Function,"Expected a class definition");let d=et.get(g);return d?(wr(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,et.set(g,d),d)}const jt=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.A)(function*(){return!0})()}_set(h,m){var b=this;return(0,w.A)(function*(){b.storage[h]=m})()}_get(h){var m=this;return(0,w.A)(function*(){const b=m.storage[h];return void 0===b?null:b})()}_remove(h){var m=this;return(0,w.A)(function*(){delete m.storage[h]})()}_addListener(h,m){}_removeListener(h,m){}}return g.type="NONE",g})();function bt(g,d,h){return`firebase:${g}:${d}:${h}`}class gi{constructor(d,h,m){this.persistence=d,this.auth=h,this.userKey=m;const{config:b,name:C}=this.auth;this.fullUserKey=bt(this.userKey,b.apiKey,C),this.fullPersistenceKey=bt("persistence",b.apiKey,C),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,w.A)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?q._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,w.A)(function*(){if(h.persistence===d)return;const m=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,m?h.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,m="authUser"){return(0,w.A)(function*(){if(!h.length)return new gi(nt(jt),d,m);const b=(yield Promise.all(h.map(function(){var Be=(0,w.A)(function*(Xe){if(yield Xe._isAvailable())return Xe});return function(Xe){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let C=b[0]||nt(jt);const P=bt(m,d.config.apiKey,d.name);let z=null;for(const Be of h)try{const Xe=yield Be._get(P);if(Xe){const tt=q._fromJSON(d,Xe);Be!==C&&(z=tt),C=Be;break}}catch{}const ge=b.filter(Be=>Be._shouldAllowMigration);return C._shouldAllowMigration&&ge.length?(C=ge[0],z&&(yield C._set(P,z.toJSON())),yield Promise.all(h.map(function(){var Be=(0,w.A)(function*(Xe){if(Xe!==C)try{yield Xe._remove(P)}catch{}});return function(Xe){return Be.apply(this,arguments)}}())),new gi(C,d,m)):new gi(C,d,m)})()}}function je(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(za(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Fs(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(ah(d))return"Blackberry";if(dy(d))return"Webos";if(wa(d))return"Safari";if((d.includes("chrome/")||we(d))&&!d.includes("edge/"))return"Chrome";if(jo(d))return"Android";{const m=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Fs(g=(0,K.ZQ)()){return/firefox\//i.test(g)}function wa(g=(0,K.ZQ)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function we(g=(0,K.ZQ)()){return/crios\//i.test(g)}function za(g=(0,K.ZQ)()){return/iemobile/i.test(g)}function jo(g=(0,K.ZQ)()){return/android/i.test(g)}function ah(g=(0,K.ZQ)()){return/blackberry/i.test(g)}function dy(g=(0,K.ZQ)()){return/webos/i.test(g)}function du(g=(0,K.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function me(g=(0,K.ZQ)()){return du(g)||jo(g)||dy(g)||ah(g)||/windows phone/i.test(g)||za(g)}function Ue(g,d=[]){let h;switch(g){case"Browser":h=je((0,K.ZQ)());break;case"Worker":h=`${je((0,K.ZQ)())}-${g}`;break;default:h=g}const m=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${ue.SDK_VERSION}/${m}`}class Dt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const m=C=>new Promise((P,z)=>{try{P(d(C))}catch(ge){z(ge)}});m.onAbort=h,this.queue.push(m);const b=this.queue.length-1;return()=>{this.queue[b]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,w.A)(function*(){if(h.auth.currentUser===d)return;const m=[];try{for(const b of h.queue)yield b(d),b.onAbort&&m.push(b.onAbort)}catch(b){m.reverse();for(const C of m)try{C()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:b?.message})}})()}}function xt(){return(xt=(0,w.A)(function*(g,d={}){return ze(g,"GET","/v2/passwordPolicy",Ie(g,d))})).apply(this,arguments)}class pt{constructor(d){var h,m,b,C;const P=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=P.minPasswordLength)&&void 0!==h?h:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(b=null===(m=d.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==b?b:"",this.forceUpgradeOnSignin=null!==(C=d.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=d.schemaVersion}validatePassword(d){var h,m,b,C,P,z;const ge={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,ge),this.validatePasswordCharacterOptions(d,ge),ge.isValid&&(ge.isValid=null===(h=ge.meetsMinPasswordLength)||void 0===h||h),ge.isValid&&(ge.isValid=null===(m=ge.meetsMaxPasswordLength)||void 0===m||m),ge.isValid&&(ge.isValid=null===(b=ge.containsLowercaseLetter)||void 0===b||b),ge.isValid&&(ge.isValid=null===(C=ge.containsUppercaseLetter)||void 0===C||C),ge.isValid&&(ge.isValid=null===(P=ge.containsNumericCharacter)||void 0===P||P),ge.isValid&&(ge.isValid=null===(z=ge.containsNonAlphanumericCharacter)||void 0===z||z),ge}validatePasswordLengthOptions(d,h){const m=this.customStrengthOptions.minPasswordLength,b=this.customStrengthOptions.maxPasswordLength;m&&(h.meetsMinPasswordLength=d.length>=m),b&&(h.meetsMaxPasswordLength=d.length<=b)}validatePasswordCharacterOptions(d,h){let m;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let b=0;b<d.length;b++)m=d.charAt(b),this.updatePasswordCharacterOptionsStatuses(h,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(d,h,m,b,C){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=b)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=C))}}class vo{constructor(d,h,m,b){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yn(this),this.idTokenSubscription=new yn(this),this.beforeStateQueue=new Dt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=St,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(d,h){var m=this;return h&&(this._popupRedirectResolver=nt(h)),this._initializationPromise=this.queue((0,w.A)(function*(){var b,C;if(!m._deleted&&(m.persistenceManager=yield gi.create(m,d),!m._deleted)){if(null!==(b=m._popupRedirectResolver)&&void 0!==b&&b._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(h),m.lastNotifiedUid=(null===(C=m.currentUser)||void 0===C?void 0:C.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,w.A)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(d){var h=this;return(0,w.A)(function*(){try{const m=yield fi(h,{idToken:d}),b=yield q._fromGetAccountInfoResponse(h,m,d);yield h.directlySetCurrentUser(b)}catch(m){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",m),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var h=this;return(0,w.A)(function*(){var m;if((0,ue._isFirebaseServerApp)(h.app)){const z=h.app.settings.authIdToken;return z?new Promise(ge=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(z).then(ge,ge))}):h.directlySetCurrentUser(null)}const b=yield h.assertedPersistence.getCurrentUser();let C=b,P=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const z=null===(m=h.redirectUser)||void 0===m?void 0:m._redirectEventId,ge=C?._redirectEventId,Be=yield h.tryRedirectSignIn(d);(!z||z===ge)&&Be?.user&&(C=Be.user,P=!0)}if(!C)return h.directlySetCurrentUser(null);if(!C._redirectEventId){if(P)try{yield h.beforeStateQueue.runMiddleware(C)}catch(z){C=b,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(z))}return C?h.reloadAndSetCurrentUserOrClear(C):h.directlySetCurrentUser(null)}return Ee(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===C._redirectEventId?h.directlySetCurrentUser(C):h.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(d){var h=this;return(0,w.A)(function*(){let m=null;try{m=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,w.A)(function*(){try{yield Ha(d)}catch(m){if("auth/network-request-failed"!==m?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Tl(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,w.A)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,w.A)(function*(){if((0,ue._isFirebaseServerApp)(h.app))return Promise.reject(mt(h));const m=d?(0,K.Ku)(d):null;return m&&Ee(m.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(m&&m._clone(h))})()}_updateCurrentUser(d,h=!1){var m=this;return(0,w.A)(function*(){if(!m._deleted)return d&&Ee(m.tenantId===d.tenantId,m,"tenant-id-mismatch"),h||(yield m.beforeStateQueue.runMiddleware(d)),m.queue((0,w.A)(function*(){yield m.directlySetCurrentUser(d),m.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,w.A)(function*(){return(0,ue._isFirebaseServerApp)(d.app)?Promise.reject(mt(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var h=this;return(0,ue._isFirebaseServerApp)(this.app)?Promise.reject(mt(this)):this.queue((0,w.A)(function*(){yield h.assertedPersistence.setPersistence(nt(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var h=this;return(0,w.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const m=h._getPasswordPolicyInternal();return m.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,w.A)(function*(){const h=yield function Rt(g){return xt.apply(this,arguments)}(d),m=new pt(h);null===d.tenantId?d._projectPasswordPolicy=m:d._tenantPasswordPolicies[d.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new K.FA("auth","Firebase",d())}onAuthStateChanged(d,h,m){return this.registerStateListener(this.authStateSubscription,d,h,m)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,m){return this.registerStateListener(this.idTokenSubscription,d,h,m)}authStateReady(){return new Promise((d,h)=>{if(this.currentUser)d();else{const m=this.onAuthStateChanged(()=>{m(),d()},h)}})}revokeAccessToken(d){var h=this;return(0,w.A)(function*(){if(h.currentUser){const m=yield h.currentUser.getIdToken(),b={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:m};null!=h.tenantId&&(b.tenantId=h.tenantId),yield function V(g,d){return O.apply(this,arguments)}(h,b)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var m=this;return(0,w.A)(function*(){const b=yield m.getOrInitRedirectPersistenceManager(h);return null===d?b.removeCurrentUser():b.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,w.A)(function*(){if(!h.redirectPersistenceManager){const m=d&&nt(d)||h._popupRedirectResolver;Ee(m,h,"argument-error"),h.redirectPersistenceManager=yield gi.create(h,[nt(m._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,w.A)(function*(){var m,b;return h._isInitialized&&(yield h.queue((0,w.A)(function*(){}))),(null===(m=h._currentUser)||void 0===m?void 0:m._redirectEventId)===d?h._currentUser:(null===(b=h.redirectUser)||void 0===b?void 0:b._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,w.A)(function*(){if(d===h.currentUser)return h.queue((0,w.A)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,m,b){if(this._deleted)return()=>{};const C="function"==typeof h?h:h.next.bind(h);let P=!1;const z=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(z,this,"internal-error"),z.then(()=>{P||C(this.currentUser)}),"function"==typeof h){const ge=d.addObserver(h,m,b);return()=>{P=!0,ge()}}{const ge=d.addObserver(h);return()=>{P=!0,ge()}}}directlySetCurrentUser(d){var h=this;return(0,w.A)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,w.A)(function*(){var h;const m={"X-Client-Version":d.clientVersion};d.app.options.appId&&(m["X-Firebase-gmpid"]=d.app.options.appId);const b=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();b&&(m["X-Firebase-Client"]=b);const C=yield d._getAppCheckToken();return C&&(m["X-Firebase-AppCheck"]=C),m})()}_getAppCheckToken(){var d=this;return(0,w.A)(function*(){var h;const m=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return m?.error&&function di(g,...d){er.logLevel<=D.$b.WARN&&er.warn(`Auth (${ue.SDK_VERSION}): ${g}`,...d)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function Dn(g){return(0,K.Ku)(g)}class yn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,K.tD)(h=>this.observer=h)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ch={loadJS:()=>(0,w.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uh(g){return ch.loadJS(g)}function It(g){return`__${g}${Math.floor(1e6*Math.random())}`}class IR{constructor(d){this.type="recaptcha-enterprise",this.auth=Dn(d)}verify(d="verify",h=!1){var m=this;return(0,w.A)(function*(){function C(){return C=(0,w.A)(function*(z){if(!h){if(null==z.tenantId&&null!=z._agentRecaptchaConfig)return z._agentRecaptchaConfig.siteKey;if(null!=z.tenantId&&void 0!==z._tenantRecaptchaConfigs[z.tenantId])return z._tenantRecaptchaConfigs[z.tenantId].siteKey}return new Promise(function(){var ge=(0,w.A)(function*(Be,Xe){mo(z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const mr=new Ms(tt);return null==z.tenantId?z._agentRecaptchaConfig=mr:z._tenantRecaptchaConfigs[z.tenantId]=mr,Be(mr.siteKey)}Xe(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Xe(tt)})});return function(Be,Xe){return ge.apply(this,arguments)}}())}),C.apply(this,arguments)}function P(z,ge,Be){const Xe=window.grecaptcha;Cn(Xe)?Xe.enterprise.ready(()=>{Xe.enterprise.execute(z,{action:d}).then(tt=>{ge(tt)}).catch(()=>{ge("NO_RECAPTCHA")})}):Be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((z,ge)=>{(function b(z){return C.apply(this,arguments)})(m.auth).then(Be=>{if(!h&&Cn(window.grecaptcha))P(Be,z,ge);else{if(typeof window>"u")return void ge(new Error("RecaptchaVerifier is only supported in browser"));let Xe=function bR(){return ch.recaptchaEnterpriseScript}();0!==Xe.length&&(Xe+=Be),uh(Xe).then(()=>{P(Be,z,ge)}).catch(tt=>{ge(tt)})}}).catch(Be=>{ge(Be)})})})()}}function WE(g,d,h){return KE.apply(this,arguments)}function KE(){return(KE=(0,w.A)(function*(g,d,h,m=!1){const b=new IR(g);let C;try{C=yield b.verify(h)}catch{C=yield b.verify(h,!0)}const P=Object.assign({},d);return Object.assign(P,m?{captchaResp:C}:{captchaResponse:C}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function bo(g,d,h,m){return QE.apply(this,arguments)}function QE(){return QE=(0,w.A)(function*(g,d,h,m){var b;if(null!==(b=g._getRecaptchaConfig())&&void 0!==b&&b.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield WE(g,d,h,"getOobCode"===h);return m(g,C)}return m(g,d).catch(function(){var C=(0,w.A)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const z=yield WE(g,d,h,"getOobCode"===h);return m(g,z)}return Promise.reject(P)});return function(P){return C.apply(this,arguments)}}())}),QE.apply(this,arguments)}function JE(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function Ls(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class lh{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return Pn("not implemented")}_getIdTokenResponse(d){return Pn("not implemented")}_linkToIdToken(d,h){return Pn("not implemented")}_getReauthenticationResolver(d){return Pn("not implemented")}}function TR(g,d){return XE.apply(this,arguments)}function XE(){return(XE=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:resetPassword",Ie(g,d))})).apply(this,arguments)}function ZE(){return(ZE=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ke(g,d){return ew.apply(this,arguments)}function ew(){return(ew=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Dl(){return(Dl=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:update",Ie(g,d))})).apply(this,arguments)}function CR(g,d){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithPassword",Ie(g,d))})).apply(this,arguments)}function kp(g,d){return Al.apply(this,arguments)}function Al(){return(Al=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:sendOobCode",Ie(g,d))})).apply(this,arguments)}function dh(){return(dh=(0,w.A)(function*(g,d){return kp(g,d)})).apply(this,arguments)}function tw(g,d){return hy.apply(this,arguments)}function hy(){return(hy=(0,w.A)(function*(g,d){return kp(g,d)})).apply(this,arguments)}function Pe(g,d){return hh.apply(this,arguments)}function hh(){return(hh=(0,w.A)(function*(g,d){return kp(g,d)})).apply(this,arguments)}function Op(){return(Op=(0,w.A)(function*(g,d){return kp(g,d)})).apply(this,arguments)}function gy(){return(gy=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithEmailLink",Ie(g,d))})).apply(this,arguments)}function nw(){return(nw=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithEmailLink",Ie(g,d))})).apply(this,arguments)}class Fp extends lh{constructor(d,h,m,b=null){super("password",m),this._email=d,this._password=h,this._tenantId=b}static _fromEmailAndPassword(d,h){return new Fp(d,h,"password")}static _fromEmailAndCode(d,h,m=null){return new Fp(d,h,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,w.A)(function*(){switch(h.signInMethod){case"password":return bo(d,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",CR);case"emailLink":return function py(g,d){return gy.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:gn(d,"internal-error")}})()}_linkToIdToken(d,h){var m=this;return(0,w.A)(function*(){switch(m.signInMethod){case"password":return bo(d,{idToken:h,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ke);case"emailLink":return function my(g,d){return nw.apply(this,arguments)}(d,{idToken:h,email:m._email,oobCode:m._password});default:gn(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function yc(g,d){return rw.apply(this,arguments)}function rw(){return(rw=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithIdp",Ie(g,d))})).apply(this,arguments)}class Vs extends lh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Vs(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):gn("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:m,signInMethod:b}=h,C=(0,Bt.Tt)(h,["providerId","signInMethod"]);if(!m||!b)return null;const P=new Vs(m,b);return P.idToken=C.idToken||void 0,P.accessToken=C.accessToken||void 0,P.secret=C.secret,P.nonce=C.nonce,P.pendingToken=C.pendingToken||null,P}_getIdTokenResponse(d){return yc(d,this.buildRequest())}_linkToIdToken(d,h){const m=this.buildRequest();return m.idToken=h,yc(d,m)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,yc(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,K.Am)(h)}return d}}function fh(){return(fh=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:sendVerificationCode",Ie(g,d))})).apply(this,arguments)}function $o(){return($o=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithPhoneNumber",Ie(g,d))})).apply(this,arguments)}function Lp(){return(Lp=(0,w.A)(function*(g,d){const h=yield he(g,"POST","/v1/accounts:signInWithPhoneNumber",Ie(g,d));if(h.temporaryProof)throw Ut(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Nt={USER_NOT_FOUND:"user-not-found"};function sw(){return(sw=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithPhoneNumber",Ie(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Nt)})).apply(this,arguments)}class hu extends lh{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new hu({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new hu({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function iw(g,d){return $o.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function ph(g,d){return Lp.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function wn(g,d){return sw.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:m,verificationCode:b}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:m,code:b}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:m,phoneNumber:b,temporaryProof:C}=d;return m||h||b||C?new hu({verificationId:h,verificationCode:m,phoneNumber:b,temporaryProof:C}):null}}class gh{constructor(d){var h,m,b,C,P,z;const ge=(0,K.I9)((0,K.hp)(d)),Be=null!==(h=ge.apiKey)&&void 0!==h?h:null,Xe=null!==(m=ge.oobCode)&&void 0!==m?m:null,tt=function DR(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=ge.mode)&&void 0!==b?b:null);Ee(Be&&Xe&&tt,"argument-error"),this.apiKey=Be,this.operation=tt,this.code=Xe,this.continueUrl=null!==(C=ge.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(P=ge.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(z=ge.tenantId)&&void 0!==z?z:null}static parseLink(d){const h=function U$(g){const d=(0,K.I9)((0,K.hp)(g)).link,h=d?(0,K.I9)((0,K.hp)(d)).deep_link_id:null,m=(0,K.I9)((0,K.hp)(g)).deep_link_id;return(m?(0,K.I9)((0,K.hp)(m)).link:null)||m||h||d||g}(d);try{return new gh(h)}catch{return null}}}let Qt=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,m){return Fp._fromEmailAndPassword(h,m)}static credentialWithLink(h,m){const b=gh.parseLink(m);return Ee(b,"argument-error"),Fp._fromEmailAndCode(h,b.code,b.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Ho{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class fu extends Ho{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Kr extends fu{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Ee("providerId"in h&&"signInMethod"in h,"argument-error"),Vs._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ee(d.idToken||d.accessToken,"argument-error"),Vs._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Kr.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Kr.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:m,oauthTokenSecret:b,pendingToken:C,nonce:P,providerId:z}=d;if(!m&&!b&&!h&&!C||!z)return null;try{return new Kr(z)._credential({idToken:h,accessToken:m,nonce:P,pendingToken:C})}catch{return null}}}let vy=(()=>{class g extends fu{constructor(){super("facebook.com")}static credential(h){return Vs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),AR=(()=>{class g extends fu{constructor(){super("google.com"),this.addScope("profile")}static credential(h,m){return Vs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:m})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:b}=h;if(!m&&!b)return null;try{return g.credential(m,b)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),SR=(()=>{class g extends fu{constructor(){super("github.com")}static credential(h){return Vs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class vc extends lh{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return yc(d,this.buildRequest())}_linkToIdToken(d,h){const m=this.buildRequest();return m.idToken=h,yc(d,m)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,yc(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:m,signInMethod:b,pendingToken:C}=h;return m&&b&&C&&m===b?new vc(m,C):null}static _create(d,h){return new vc(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bp extends Ho{constructor(d){Ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Bp.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Bp.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=vc.fromJSON(d);return Ee(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:m}=d;if(!h||!m)return null;try{return vc._create(m,h)}catch{return null}}}let aw=(()=>{class g extends fu{constructor(){super("twitter.com")}static credential(h,m){return Vs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:m})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:m,oauthTokenSecret:b}=h;if(!m||!b)return null;try{return g.credential(m,b)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function cw(g,d){return Up.apply(this,arguments)}function Up(){return(Up=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signUp",Ie(g,d))})).apply(this,arguments)}class Di{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,m,b=!1){return(0,w.A)(function*(){const C=yield q._fromIdTokenResponse(d,m,b),P=uw(m);return new Di({user:C,providerId:P,_tokenResponse:m,operationType:h})})()}static _forOperation(d,h,m){return(0,w.A)(function*(){yield d._updateTokensIfNecessary(m,!0);const b=uw(m);return new Di({user:d,providerId:b,_tokenResponse:m,operationType:h})})()}}function uw(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function by(){return(by=(0,w.A)(function*(g){var d;if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const h=Dn(g);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new Di({user:h.currentUser,providerId:null,operationType:"signIn"});const m=yield cw(h,{returnSecureToken:!0}),b=yield Di._fromIdTokenResponse(h,"signIn",m,!0);return yield h._updateCurrentUser(b.user),b})).apply(this,arguments)}class Oe extends K.g{constructor(d,h,m,b){var C;super(h.code,h.message),this.operationType=m,this.user=b,Object.setPrototypeOf(this,Oe.prototype),this.customData={appName:d.name,tenantId:null!==(C=d.tenantId)&&void 0!==C?C:void 0,_serverResponse:h.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(d,h,m,b){return new Oe(d,h,m,b)}}function Iy(g,d,h,m){return("reauthenticate"===d?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?Oe._fromErrorAndOperation(g,C,d,m):C})}function j(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function _h(){return _h=(0,w.A)(function*(g,d){const h=(0,K.Ku)(g);yield $p(!0,h,d);const{providerUserInfo:m}=yield function hi(g,d){return va.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),b=j(m||[]);return h.providerData=h.providerData.filter(C=>b.has(C.providerId)),b.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),_h.apply(this,arguments)}function pu(g,d){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,w.A)(function*(g,d,h=!1){const m=yield _o(g,d._linkToIdToken(g.auth,yield g.getIdToken()),h);return Di._forOperation(g,"link",m)})).apply(this,arguments)}function $p(g,d,h){return wy.apply(this,arguments)}function wy(){return(wy=(0,w.A)(function*(g,d,h){yield Ha(d);const b=!1===g?"provider-already-linked":"no-such-provider";Ee(j(d.providerData).has(h)===g,d.auth,b)})).apply(this,arguments)}function lw(g,d){return gu.apply(this,arguments)}function gu(){return(gu=(0,w.A)(function*(g,d,h=!1){const{auth:m}=g;if((0,ue._isFirebaseServerApp)(m.app))return Promise.reject(mt(m));const b="reauthenticate";try{const C=yield _o(g,Iy(m,b,d,g),h);Ee(C.idToken,m,"internal-error");const P=Ia(C.idToken);Ee(P,m,"internal-error");const{sub:z}=P;return Ee(g.uid===z,m,"user-mismatch"),Di._forOperation(g,b,C)}catch(C){throw"auth/user-not-found"===C?.code&&gn(m,"user-mismatch"),C}})).apply(this,arguments)}function dw(g,d){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,w.A)(function*(g,d,h=!1){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const m="signIn",b=yield Iy(g,m,d),C=yield Di._fromIdTokenResponse(g,m,b);return h||(yield g._updateCurrentUser(C.user)),C})).apply(this,arguments)}function Hp(g,d){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,w.A)(function*(g,d){return dw(Dn(g),d)})).apply(this,arguments)}function hw(g,d){return qi.apply(this,arguments)}function qi(){return(qi=(0,w.A)(function*(g,d){const h=(0,K.Ku)(g);return yield $p(!1,h,d.providerId),pu(h,d)})).apply(this,arguments)}function mu(g,d){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,w.A)(function*(g,d){return lw((0,K.Ku)(g),d)})).apply(this,arguments)}function Rl(){return(Rl=(0,w.A)(function*(g,d){return he(g,"POST","/v1/accounts:signInWithCustomToken",Ie(g,d))})).apply(this,arguments)}function fw(){return fw=(0,w.A)(function*(g,d){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const h=Dn(g),m=yield function qp(g,d){return Rl.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),b=yield Di._fromIdTokenResponse(h,"signIn",m);return yield h._updateCurrentUser(b.user),b}),fw.apply(this,arguments)}class xl{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?pw._fromServerResponse(d,h):"totpInfo"in h?hs._fromServerResponse(d,h):gn(d,"internal-error")}}class pw extends xl{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new pw(h)}}class hs extends xl{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new hs(h)}}function Nl(g,d,h){var m;Ee((null===(m=h.url)||void 0===m?void 0:m.length)>0,g,"invalid-continue-uri"),Ee(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Ee(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Ee(h.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Ic(g){return gw.apply(this,arguments)}function gw(){return(gw=(0,w.A)(function*(g){const d=Dn(g);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function Io(){return(Io=(0,w.A)(function*(g,d,h){const m=Dn(g),b={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};h&&Nl(m,b,h),yield bo(m,b,"getOobCode",tw)})).apply(this,arguments)}function Ka(){return Ka=(0,w.A)(function*(g,d,h){yield TR((0,K.Ku)(g),{oobCode:d,newPassword:h}).catch(function(){var m=(0,w.A)(function*(b){throw"auth/password-does-not-meet-requirements"===b.code&&Ic(g),b});return function(b){return m.apply(this,arguments)}}())}),Ka.apply(this,arguments)}function yh(){return yh=(0,w.A)(function*(g,d){yield function un(g,d){return Dl.apply(this,arguments)}((0,K.Ku)(g),{oobCode:d})}),yh.apply(this,arguments)}function vh(g,d){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,w.A)(function*(g,d){const h=(0,K.Ku)(g),m=yield TR(h,{oobCode:d}),b=m.requestType;switch(Ee(b,h,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ee(m.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ee(m.mfaInfo,h,"internal-error");default:Ee(m.email,h,"internal-error")}let C=null;return m.mfaInfo&&(C=xl._fromServerResponse(Dn(h),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:C},operation:b}})).apply(this,arguments)}function vn(){return(vn=(0,w.A)(function*(g,d){const{data:h}=yield vh((0,K.Ku)(g),d);return h.email})).apply(this,arguments)}function bh(){return(bh=(0,w.A)(function*(g,d,h){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const m=Dn(g),P=yield bo(m,{returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cw).catch(ge=>{throw"auth/password-does-not-meet-requirements"===ge.code&&Ic(g),ge}),z=yield Di._fromIdTokenResponse(m,"signIn",P);return yield m._updateCurrentUser(z.user),z})).apply(this,arguments)}function _u(){return(_u=(0,w.A)(function*(g,d,h){const m=Dn(g),b={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function C(P,z){Ee(z.handleCodeInApp,m,"argument-error"),z&&Nl(m,P,z)})(b,h),yield bo(m,b,"getOobCode",Pe)})).apply(this,arguments)}function Cy(){return(Cy=(0,w.A)(function*(g,d,h){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const m=(0,K.Ku)(g),b=Qt.credentialWithLink(d,h||ds());return Ee(b._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),Hp(m,b)})).apply(this,arguments)}function Ay(){return(Ay=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:createAuthUri",Ie(g,d))})).apply(this,arguments)}function Xs(){return Xs=(0,w.A)(function*(g,d){const m={identifier:d,continueUri:Uo()?ds():"http://localhost"},{signinMethods:b}=yield function Dy(g,d){return Ay.apply(this,arguments)}((0,K.Ku)(g),m);return b||[]}),Xs.apply(this,arguments)}function zp(){return zp=(0,w.A)(function*(g,d){const h=(0,K.Ku)(g),b={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Nl(h.auth,b,d);const{email:C}=yield function Pp(g,d){return dh.apply(this,arguments)}(h.auth,b);C!==g.email&&(yield g.reload())}),zp.apply(this,arguments)}function Sy(){return Sy=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};h&&Nl(m.auth,C,h);const{email:P}=yield function fy(g,d){return Op.apply(this,arguments)}(m.auth,C);P!==g.email&&(yield g.reload())}),Sy.apply(this,arguments)}function Ry(){return(Ry=(0,w.A)(function*(g,d){return ze(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function xy(){return xy=(0,w.A)(function*(g,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const m=(0,K.Ku)(g),C={idToken:yield m.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},P=yield _o(m,function kR(g,d){return Ry.apply(this,arguments)}(m.auth,C));m.displayName=P.displayName||null,m.photoURL=P.photoUrl||null;const z=m.providerData.find(({providerId:ge})=>"password"===ge);z&&(z.displayName=m.displayName,z.photoURL=m.photoURL),yield m._updateTokensIfNecessary(P)}),xy.apply(this,arguments)}function Vr(g,d,h){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,w.A)(function*(g,d,h){const{auth:m}=g,C={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(C.email=d),h&&(C.password=h);const P=yield _o(g,function B$(g,d){return ZE.apply(this,arguments)}(m,C));yield g._updateTokensIfNecessary(P,!0)}),Ny.apply(this,arguments)}class Xt{constructor(d,h,m={}){this.isNewUser=d,this.providerId=h,this.profile=m}}class My extends Xt{constructor(d,h,m,b){super(d,h,m),this.username=b}}class Ge extends Xt{constructor(d,h){super(d,"facebook.com",h)}}class Bs extends My{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Yt extends Xt{constructor(d,h){super(d,"google.com",h)}}class Qr extends My{constructor(d,h,m){super(d,"twitter.com",h,m)}}function Ai(g){const{user:d,_tokenResponse:h}=g;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function FR(g){var d,h;if(!g)return null;const{providerId:m}=g,b=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},C=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!m&&g?.idToken){const P=null===(h=null===(d=Ia(g.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(P)return new Xt(C,"anonymous"!==P&&"custom"!==P?P:null)}if(!m)return null;switch(m){case"facebook.com":return new Ge(C,b);case"github.com":return new Bs(C,b);case"google.com":return new Yt(C,b);case"twitter.com":return new Qr(C,b,g.screenName||null);case"custom":case"anonymous":return new Xt(C,null);default:return new Xt(C,m,b)}}(h)}class Qa{constructor(d,h,m){this.type=d,this.credential=h,this.user=m}static _fromIdtoken(d,h){return new Qa("enroll",d,h)}static _fromMfaPendingCredential(d){return new Qa("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,m;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Qa._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(m=d.multiFactorSession)&&void 0!==m&&m.idToken)return Qa._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Oy{constructor(d,h,m){this.session=d,this.hints=h,this.signInResolver=m}static _fromError(d,h){const m=Dn(d),b=h.customData._serverResponse,C=(b.mfaInfo||[]).map(z=>xl._fromServerResponse(m,z));Ee(b.mfaPendingCredential,m,"internal-error");const P=Qa._fromMfaPendingCredential(b.mfaPendingCredential);return new Oy(P,C,function(){var z=(0,w.A)(function*(ge){const Be=yield ge._process(m,P);delete b.mfaInfo,delete b.mfaPendingCredential;const Xe=Object.assign(Object.assign({},b),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(h.operationType){case"signIn":const tt=yield Di._fromIdTokenResponse(m,h.operationType,Xe);return yield m._updateCurrentUser(tt.user),tt;case"reauthenticate":return Ee(h.user,m,"internal-error"),Di._forOperation(h.user,h.operationType,Xe);default:gn(m,"internal-error")}});return function(ge){return z.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,w.A)(function*(){return h.signInResolver(d)})()}}class Pl{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(m=>xl._fromServerResponse(d.auth,m)))})}static _fromUser(d){return new Pl(d)}getSession(){var d=this;return(0,w.A)(function*(){return Qa._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,h){var m=this;return(0,w.A)(function*(){const b=d,C=yield m.getSession(),P=yield _o(m.user,b._process(m.user.auth,C,h));return yield m.user._updateTokensIfNecessary(P),m.user.reload()})()}unenroll(d){var h=this;return(0,w.A)(function*(){const m="string"==typeof d?d:d.uid,b=yield h.user.getIdToken();try{const C=yield _o(h.user,function Ly(g,d){return ze(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(g,d))}(h.user.auth,{idToken:b,mfaEnrollmentId:m}));h.enrolledFactors=h.enrolledFactors.filter(({uid:P})=>P!==m),yield h.user._updateTokensIfNecessary(C),yield h.user.reload()}catch(C){throw C}})()}}const Vy=new WeakMap,vu="__sak";class Si{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(vu,"1"),this.storage.removeItem(vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qp=(()=>{class g extends Si{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,m)=>this.onStorageEvent(h,m),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=me(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const m of Object.keys(this.listeners)){const b=this.storage.getItem(m),C=this.localCache[m];b!==C&&h(m,C,b)}}onStorageEvent(h,m=!1){if(!h.key)return void this.forAllChangedKeys((z,ge,Be)=>{this.notifyListeners(z,Be)});const b=h.key;m?this.detachListener():this.stopPolling();const C=()=>{const z=this.storage.getItem(b);!m&&this.localCache[b]===z||this.notifyListeners(b,z)},P=this.storage.getItem(b);!function W(){return(0,K.lT)()&&10===document.documentMode}()||P===h.newValue||h.newValue===h.oldValue?C():setTimeout(C,10)}notifyListeners(h,m){this.localCache[h]=m;const b=this.listeners[h];if(b)for(const C of Array.from(b))C(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,m,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:m,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,m){var b=()=>super._set,C=this;return(0,w.A)(function*(){yield b().call(C,h,m),C.localCache[h]=JSON.stringify(m)})()}_get(h){var m=()=>super._get,b=this;return(0,w.A)(function*(){const C=yield m().call(b,h);return b.localCache[h]=JSON.stringify(C),C})()}_remove(h){var m=()=>super._remove,b=this;return(0,w.A)(function*(){yield m().call(b,h),delete b.localCache[h]})()}}return g.type="LOCAL",g})(),Zs=(()=>{class g extends Si{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,m){}_removeListener(h,m){}}return g.type="SESSION",g})();let HR=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const m=this.receivers.find(C=>C.isListeningto(h));if(m)return m;const b=new g(h);return this.receivers.push(b),b}isListeningto(h){return this.eventTarget===h}handleEvent(h){var m=this;return(0,w.A)(function*(){const b=h,{eventId:C,eventType:P,data:z}=b.data,ge=m.handlersMap[P];if(!ge?.size)return;b.ports[0].postMessage({status:"ack",eventId:C,eventType:P});const Be=Array.from(ge).map(function(){var tt=(0,w.A)(function*(mr){return mr(b.origin,z)});return function(mr){return tt.apply(this,arguments)}}()),Xe=yield function $R(g){return Promise.all(g.map(function(){var d=(0,w.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(m){return{fulfilled:!1,reason:m}}});return function(h){return d.apply(this,arguments)}}()))}(Be);b.ports[0].postMessage({status:"done",eventId:C,eventType:P,response:Xe})})()}_subscribe(h,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(m)}_unsubscribe(h,m){this.handlersMap[h]&&m&&this.handlersMap[h].delete(m),(!m||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Ih(g="",d=10){let h="";for(let m=0;m<d;m++)h+=Math.floor(10*Math.random());return g+h}class jy{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,m=50){var b=this;return(0,w.A)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let P,z;return new Promise((ge,Be)=>{const Xe=Ih("",20);C.port1.start();const tt=setTimeout(()=>{Be(new Error("unsupported_event"))},m);z={messageChannel:C,onMessage(mr){const Na=mr;if(Na.data.eventId===Xe)switch(Na.data.status){case"ack":clearTimeout(tt),P=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),ge(Na.data.response);break;default:clearTimeout(tt),clearTimeout(P),Be(new Error("invalid_response"))}}},b.handlers.add(z),C.port1.addEventListener("message",z.onMessage),b.target.postMessage({eventType:d,eventId:Xe,data:h},[C.port2])}).finally(()=>{z&&b.removeMessageHandler(z)})})()}}function Un(){return window}function bu(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function $y(){return($y=(0,w.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hy="firebaseLocalStorageDb",Ec="firebaseLocalStorage",Sw="fbase_key";class Eh{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Yp(g,d){return g.transaction([Ec],d?"readwrite":"readonly").objectStore(Ec)}function Gy(){const g=indexedDB.open(Hy,1);return new Promise((d,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const m=g.result;try{m.createObjectStore(Ec,{keyPath:Sw})}catch(b){h(b)}}),g.addEventListener("success",(0,w.A)(function*(){const m=g.result;m.objectStoreNames.contains(Ec)?d(m):(m.close(),yield function zR(){const g=indexedDB.deleteDatabase(Hy);return new Eh(g).toPromise()}(),d(yield Gy()))}))})}function Rw(g,d,h){return wh.apply(this,arguments)}function wh(){return(wh=(0,w.A)(function*(g,d,h){const m=Yp(g,!0).put({[Sw]:d,value:h});return new Eh(m).toPromise()})).apply(this,arguments)}function Wn(){return(Wn=(0,w.A)(function*(g,d){const h=Yp(g,!1).get(d),m=yield new Eh(h).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function Me(g,d){const h=Yp(g,!0).delete(d);return new Eh(h).toPromise()}const kr=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,w.A)(function*(){return h.db||(h.db=yield Gy()),h.db})()}_withRetries(h){var m=this;return(0,w.A)(function*(){let b=0;for(;;)try{const C=yield m._openDb();return yield h(C)}catch(C){if(b++>3)throw C;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,w.A)(function*(){return bu()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,w.A)(function*(){h.receiver=HR._getInstance(function Yr(){return bu()?self:null}()),h.receiver._subscribe("keyChanged",function(){var m=(0,w.A)(function*(b,C){return{keyProcessed:(yield h._poll()).includes(C.key)}});return function(b,C){return m.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var m=(0,w.A)(function*(b,C){return["keyChanged"]});return function(b,C){return m.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,w.A)(function*(){var m,b;if(h.activeServiceWorker=yield function Fl(){return $y.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new jy(h.activeServiceWorker);const C=yield h.sender._send("ping",{},800);C&&null!==(m=C[0])&&void 0!==m&&m.fulfilled&&null!==(b=C[0])&&void 0!==b&&b.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var m=this;return(0,w.A)(function*(){if(m.sender&&m.activeServiceWorker&&function GR(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:h},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.A)(function*(){try{if(!indexedDB)return!1;const h=yield Gy();return yield Rw(h,vu,"1"),yield Me(h,vu),!0}catch{}return!1})()}_withPendingWrite(h){var m=this;return(0,w.A)(function*(){m.pendingWrites++;try{yield h()}finally{m.pendingWrites--}})()}_set(h,m){var b=this;return(0,w.A)(function*(){return b._withPendingWrite((0,w.A)(function*(){return yield b._withRetries(C=>Rw(C,h,m)),b.localCache[h]=m,b.notifyServiceWorker(h)}))})()}_get(h){var m=this;return(0,w.A)(function*(){const b=yield m._withRetries(C=>function Jp(g,d){return Wn.apply(this,arguments)}(C,h));return m.localCache[h]=b,b})()}_remove(h){var m=this;return(0,w.A)(function*(){return m._withPendingWrite((0,w.A)(function*(){return yield m._withRetries(b=>Me(b,h)),delete m.localCache[h],m.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,w.A)(function*(){const m=yield h._withRetries(P=>{const z=Yp(P,!1).getAll();return new Eh(z).toPromise()});if(!m)return[];if(0!==h.pendingWrites)return[];const b=[],C=new Set;if(0!==m.length)for(const{fbase_key:P,value:z}of m)C.add(P),JSON.stringify(h.localCache[P])!==JSON.stringify(z)&&(h.notifyListeners(P,z),b.push(P));for(const P of Object.keys(h.localCache))h.localCache[P]&&!C.has(P)&&(h.notifyListeners(P,null),b.push(P));return b})()}notifyListeners(h,m){this.localCache[h]=m;const b=this.listeners[h];if(b)for(const C of Array.from(b))C(m)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,w.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),yt=1e12;class Th{constructor(d){this.auth=d,this.counter=yt,this._widgets=new Map}render(d,h){const m=this.counter;return this._widgets.set(m,new xw(d,this.auth.name,h||{})),this.counter++,m}reset(d){var h;const m=d||yt;null===(h=this._widgets.get(m))||void 0===h||h.delete(),this._widgets.delete(m)}getResponse(d){var h;return(null===(h=this._widgets.get(d||yt))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,w.A)(function*(){var m;return null===(m=h._widgets.get(d||yt))||void 0===m||m.execute(),""})()}}class xw{constructor(d,h,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof d?document.getElementById(d):d;Ee(b,"argument-error",{appName:h}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vl(g){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<g;m++)d.push(h.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rr=It("rcb"),Ch=new re(3e4,6e4);class Bl{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Un().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return Ee(function Ya(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&Ye(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((m,b)=>{const C=Un().setTimeout(()=>{b(mn(d,"network-request-failed"))},Ch.get());Un()[rr]=()=>{Un().clearTimeout(C),delete Un()[rr];const z=Un().grecaptcha;if(!z||!Ye(z))return void b(mn(d,"internal-error"));const ge=z.render;z.render=(Be,Xe)=>{const tt=ge(Be,Xe);return this.counter++,tt},this.hostLanguage=h,m(z)},uh(`${function O$(){return ch.recaptchaV2Script}()}?${(0,K.Am)({onload:rr,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(C),b(mn(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=Un().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dh{load(d){return(0,w.A)(function*(){return new Th(d)})()}clearedOneInstance(){}}const qy="recaptcha",wc={theme:"light",type:"image"};class Xp{constructor(d,h,m=Object.assign({},wc)){this.parameters=m,this.type=qy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(d),this.isInvisible="invisible"===this.parameters.size,Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof h?document.getElementById(h):h;Ee(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dh:new Bl,this.validateStartingState()}verify(){var d=this;return(0,w.A)(function*(){d.assertNotDestroyed();const h=yield d.render(),m=d.getAssertedRecaptcha();return m.getResponse(h)||new Promise(C=>{const P=z=>{z&&(d.tokenChangeListeners.delete(P),C(z))};d.tokenChangeListeners.add(P),d.isInvisible&&m.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(m=>m(h)),"function"==typeof d)d(h);else if("string"==typeof d){const m=Un()[d];"function"==typeof m&&m(h)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,w.A)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const m=document.createElement("div");h.appendChild(m),h=m}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,w.A)(function*(){Ee(Uo()&&!bu(),d.auth,"internal-error"),yield function Iu(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function ks(g){return tr.apply(this,arguments)}(d.auth);Ee(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class At{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=hu._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Eu(){return(Eu=(0,w.A)(function*(g,d,h){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const m=Dn(g),b=yield $l(m,d,(0,K.Ku)(h));return new At(b,C=>Hp(m,C))})).apply(this,arguments)}function Ul(){return(Ul=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g);yield $p(!1,m,"phone");const b=yield $l(m.auth,d,(0,K.Ku)(h));return new At(b,C=>hw(m,C))})).apply(this,arguments)}function gr(){return(gr=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g);if((0,ue._isFirebaseServerApp)(m.auth.app))return Promise.reject(mt(m.auth));const b=yield $l(m.auth,d,(0,K.Ku)(h));return new At(b,C=>mu(m,C))})).apply(this,arguments)}function $l(g,d,h){return mi.apply(this,arguments)}function mi(){return mi=(0,w.A)(function*(g,d,h){var m;const b=yield h.verify();try{let C;if(Ee("string"==typeof b,g,"argument-error"),Ee(h.type===qy,g,"argument-error"),C="string"==typeof d?{phoneNumber:d}:d,"session"in C){const P=C.session;if("phoneNumber"in C)return Ee("enroll"===P.type,g,"internal-error"),(yield function Cw(g,d){return ze(g,"POST","/v2/accounts/mfaEnrollment:start",Ie(g,d))}(g,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{Ee("signin"===P.type,g,"internal-error");const z=(null===(m=C.multiFactorHint)||void 0===m?void 0:m.uid)||C.multiFactorUid;return Ee(z,g,"missing-multi-factor-info"),(yield function eo(g,d){return ze(g,"POST","/v2/accounts/mfaSignIn:start",Ie(g,d))}(g,{mfaPendingCredential:P.credential,mfaEnrollmentId:z,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function yy(g,d){return fh.apply(this,arguments)}(g,{phoneNumber:C.phoneNumber,recaptchaToken:b});return P}}finally{h._reset()}}),mi.apply(this,arguments)}function Ah(){return(Ah=(0,w.A)(function*(g,d){const h=(0,K.Ku)(g);if((0,ue._isFirebaseServerApp)(h.auth.app))return Promise.reject(mt(h.auth));yield pu(h,d)})).apply(this,arguments)}let zo=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=Dn(h)}verifyPhoneNumber(h,m){return $l(this.auth,h,(0,K.Ku)(m))}static credential(h,m){return hu._fromVerification(h,m)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:m,temporaryProof:b}=h;return m&&b?hu._fromTokenResponse(m,b):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Da(g,d){return d?nt(d):(Ee(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class to extends lh{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return yc(d,this._buildIdpRequest())}_linkToIdToken(d,h){return yc(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return yc(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function Wy(g){return dw(g.auth,new to(g),g.bypassAuthState)}function WR(g){const{auth:d,user:h}=g;return Ee(h,d,"internal-error"),lw(h,new to(g),g.bypassAuthState)}function KR(g){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,w.A)(function*(g){const{auth:d,user:h}=g;return Ee(h,d,"internal-error"),pu(h,new to(g),g.bypassAuthState)})).apply(this,arguments)}class Ky{constructor(d,h,m,b,C=!1){this.auth=d,this.resolver=m,this.user=b,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,w.A)(function*(m,b){d.pendingPromise={resolve:m,reject:b};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(C){d.reject(C)}});return function(m,b){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,w.A)(function*(){const{urlResponse:m,sessionId:b,postBody:C,tenantId:P,error:z,type:ge}=d;if(z)return void h.reject(z);const Be={auth:h.auth,requestUri:m,sessionId:b,tenantId:P||void 0,postBody:C||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(ge)(Be))}catch(Xe){h.reject(Xe)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Wy;case"linkViaPopup":case"linkViaRedirect":return KR;case"reauthViaPopup":case"reauthViaRedirect":return WR;default:gn(this.auth,"internal-error")}}resolve(d){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QR=new re(2e3,1e4);function Nw(){return(Nw=(0,w.A)(function*(g,d,h){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mn(g,"operation-not-supported-in-this-environment"));const m=Dn(g);cr(g,d,Ho);const b=Da(m,h);return new Pw(m,"signInViaPopup",d,b).executeNotNull()})).apply(this,arguments)}function Mw(){return(Mw=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g);if((0,ue._isFirebaseServerApp)(m.auth.app))return Promise.reject(mn(m.auth,"operation-not-supported-in-this-environment"));cr(m.auth,d,Ho);const b=Da(m.auth,h);return new Pw(m.auth,"reauthViaPopup",d,b,m).executeNotNull()})).apply(this,arguments)}function kw(){return(kw=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g);cr(m.auth,d,Ho);const b=Da(m.auth,h);return new Pw(m.auth,"linkViaPopup",d,b,m).executeNotNull()})).apply(this,arguments)}let Pw=(()=>{class g extends Ky{constructor(h,m,b,C,P){super(h,m,C,P),this.provider=b,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,w.A)(function*(){const m=yield h.execute();return Ee(m,h.auth,"internal-error"),m})()}onExecution(){var h=this;return(0,w.A)(function*(){wr(1===h.filter.length,"Popup operations only handle one event");const m=Ih();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],m),h.authWindow.associatedEvent=m,h.resolver._originValidation(h.auth).catch(b=>{h.reject(b)}),h.resolver._isIframeWebStorageSupported(h.auth,b=>{b||h.reject(mn(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var m,b;this.pollId=null!==(b=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==b&&b.closed?window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,QR.get())};h()}}return g.currentPopupAction=null,g})();const z$="pendingRedirect",Zp=new Map;class W$ extends Ky{constructor(d,h,m=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,m),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,w.A)(function*(){let m=Zp.get(h.auth._key());if(!m){try{const C=(yield function K$(g,d){return Ow.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;m=()=>Promise.resolve(C)}catch(b){m=()=>Promise.reject(b)}Zp.set(h.auth._key(),m)}return h.bypassAuthState||Zp.set(h.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,m=this;return(0,w.A)(function*(){if("signInViaRedirect"===d.type)return h().call(m,d);if("unknown"!==d.type){if(d.eventId){const b=yield m.auth._redirectUserForId(d.eventId);if(b)return m.user=b,h().call(m,d);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,w.A)(function*(){})()}cleanUp(){}}function Ow(){return(Ow=(0,w.A)(function*(g,d){const h=JR(d),m=YR(g);if(!(yield m._isAvailable()))return!1;const b="true"===(yield m._get(h));return yield m._remove(h),b})).apply(this,arguments)}function Fw(g,d){return eg.apply(this,arguments)}function eg(){return(eg=(0,w.A)(function*(g,d){return YR(g)._set(JR(d),"true")})).apply(this,arguments)}function Vw(g,d){Zp.set(g._key(),d)}function YR(g){return nt(g._redirectPersistence)}function JR(g){return bt(z$,g.config.apiKey,g.name)}function Q$(g,d,h){return function XR(g,d,h){return tg.apply(this,arguments)}(g,d,h)}function tg(){return(tg=(0,w.A)(function*(g,d,h){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const m=Dn(g);cr(g,d,Ho),yield m._initializationPromise;const b=Da(m,h);return yield Fw(b,m),b._openRedirect(m,d,"signInViaRedirect")})).apply(this,arguments)}function _i(g,d,h){return function Bw(g,d,h){return Yy.apply(this,arguments)}(g,d,h)}function Yy(){return(Yy=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g);if(cr(m.auth,d,Ho),(0,ue._isFirebaseServerApp)(m.auth.app))return Promise.reject(mt(m.auth));yield m.auth._initializationPromise;const b=Da(m.auth,h);yield Fw(b,m.auth);const C=yield Jy(m);return b._openRedirect(m.auth,d,"reauthViaRedirect",C)})).apply(this,arguments)}function ZR(g,d,h){return function Uw(g,d,h){return ng.apply(this,arguments)}(g,d,h)}function ng(){return(ng=(0,w.A)(function*(g,d,h){const m=(0,K.Ku)(g);cr(m.auth,d,Ho),yield m.auth._initializationPromise;const b=Da(m.auth,h);yield $p(!1,m,d.providerId),yield Fw(b,m.auth);const C=yield Jy(m);return b._openRedirect(m.auth,d,"linkViaRedirect",C)})).apply(this,arguments)}function Rh(){return(Rh=(0,w.A)(function*(g,d){return yield Dn(g)._initializationPromise,rg(g,d,!1)})).apply(this,arguments)}function rg(g,d){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,w.A)(function*(g,d,h=!1){if((0,ue._isFirebaseServerApp)(g.app))return Promise.reject(mt(g));const m=Dn(g),b=Da(m,d),P=yield new W$(m,b,h).execute();return P&&!h&&(delete P.user._redirectEventId,yield m._persistUserIfCurrent(P.user),yield m._setRedirectUser(null,d)),P})).apply(this,arguments)}function Jy(g){return ig.apply(this,arguments)}function ig(){return(ig=(0,w.A)(function*(g){const d=Ih(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class $w{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(d,m)&&(h=!0,this.sendToConsumer(d,m),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Xy(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return On(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var m;if(d.error&&!On(d)){const b=(null===(m=d.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";h.onError(mn(this.auth,b))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const m=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&m}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tx(d))}saveEventToCache(d){this.cachedEventUids.add(tx(d)),this.lastProcessedEventTime=Date.now()}}function tx(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function On({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Hl(g){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,w.A)(function*(g,d={}){return ze(g,"GET","/v1/projects",d)})).apply(this,arguments)}const nx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xh=/^https?/;function ps(){return(ps=(0,w.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Hl(g);for(const h of d)try{if(rx(h))return}catch{}gn(g,"unauthorized-domain")})).apply(this,arguments)}function rx(g){const d=ds(),{protocol:h,hostname:m}=new URL(d);if(g.startsWith("chrome-extension://")){const P=new URL(g);return""===P.hostname&&""===m?"chrome-extension:"===h&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&P.hostname===m}if(!xh.test(h))return!1;if(nx.test(g))return m===g;const b=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(m)}const Zy=new re(3e4,6e4);function Hw(){const g=Un().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let Nh=null;const Gw=new re(5e3,15e3),ev="__/auth/iframe",tv="emulator/auth/iframe",Mh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nv(g){const d=g.config;Ee(d.authDomain,g,"auth-domain-config-required");const h=d.emulator?ae(d,tv):`https://${g.config.authDomain}/${ev}`,m={apiKey:d.apiKey,appName:g.name,v:ue.SDK_VERSION},b=sg.get(g.config.apiHost);b&&(m.eid=b);const C=g._getFrameworks();return C.length&&(m.fw=C.join(",")),`${h}?${(0,K.Am)(m).slice(1)}`}function wt(){return wt=(0,w.A)(function*(g){const d=yield function ix(g){return Nh=Nh||function Aa(g){return new Promise((d,h)=>{var m,b,C;function P(){Hw(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Hw(),h(mn(g,"network-request-failed"))},timeout:Zy.get()})}if(null!==(b=null===(m=Un().gapi)||void 0===m?void 0:m.iframes)&&void 0!==b&&b.Iframe)d(gapi.iframes.getContext());else{if(null===(C=Un().gapi)||void 0===C||!C.load){const z=It("iframefcb");return Un()[z]=()=>{gapi.load?P():h(mn(g,"network-request-failed"))},uh(`${function An(){return ch.gapiScript}()}?onload=${z}`).catch(ge=>h(ge))}P()}}).catch(d=>{throw Nh=null,d})}(g),Nh}(g),h=Un().gapi;return Ee(h,g,"internal-error"),d.open({where:document.body,url:nv(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mh,dontclear:!0},m=>new Promise(function(){var b=(0,w.A)(function*(C,P){yield m.restyle({setHideOnLeave:!1});const z=mn(g,"network-request-failed"),ge=Un().setTimeout(()=>{P(z)},Gw.get());function Be(){Un().clearTimeout(ge),C(m)}m.ping(Be).then(Be,()=>{P(z)})});return function(C,P){return b.apply(this,arguments)}}()))}),wt.apply(this,arguments)}const qw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rv{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ux="__/auth/handler",lx="emulator/auth/handler",dx=encodeURIComponent("fac");function iv(g,d,h,m,b,C){return fe.apply(this,arguments)}function fe(){return(fe=(0,w.A)(function*(g,d,h,m,b,C){Ee(g.config.authDomain,g,"auth-domain-config-required"),Ee(g.config.apiKey,g,"invalid-api-key");const P={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:m,v:ue.SDK_VERSION,eventId:b};if(d instanceof Ho){d.setDefaultLanguage(g.languageCode),P.providerId=d.providerId||"",(0,K.Im)(d.getCustomParameters())||(P.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Xe,tt]of Object.entries(C||{}))P[Xe]=tt}if(d instanceof fu){const Xe=d.getScopes().filter(tt=>""!==tt);Xe.length>0&&(P.scopes=Xe.join(","))}g.tenantId&&(P.tid=g.tenantId);const z=P;for(const Xe of Object.keys(z))void 0===z[Xe]&&delete z[Xe];const ge=yield g._getAppCheckToken(),Be=ge?`#${dx}=${encodeURIComponent(ge)}`:"";return`${function Zt({config:g}){return g.emulator?ae(g,lx):`https://${g.authDomain}/${ux}`}(g)}?${(0,K.Am)(z).slice(1)}${Be}`})).apply(this,arguments)}const Lt="webStorageSupport",Sn=class Gt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zs,this._completeRedirectFn=rg,this._overrideRedirectResult=Vw}_openPopup(d,h,m,b){var C=this;return(0,w.A)(function*(){var P;wr(null===(P=C.eventManagers[d._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const z=yield iv(d,h,m,ds(),b);return function ql(g,d,h,m=500,b=600){const C=Math.max((window.screen.availHeight-b)/2,0).toString(),P=Math.max((window.screen.availWidth-m)/2,0).toString();let z="";const ge=Object.assign(Object.assign({},qw),{width:m.toString(),height:b.toString(),top:C,left:P}),Be=(0,K.ZQ)().toLowerCase();h&&(z=we(Be)?"_blank":h),Fs(Be)&&(d=d||"http://localhost",ge.scrollbars="yes");const Xe=Object.entries(ge).reduce((mr,[Na,Bh])=>`${mr}${Na}=${Bh},`,"");if(function te(g=(0,K.ZQ)()){var d;return du(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Be)&&"_self"!==z)return function cx(g,d){const h=document.createElement("a");h.href=g,h.target=d;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(m)}(d||"",z),new rv(null);const tt=window.open(d||"",z,Xe);Ee(tt,g,"popup-blocked");try{tt.focus()}catch{}return new rv(tt)}(d,z,Ih())})()}_openRedirect(d,h,m,b){var C=this;return(0,w.A)(function*(){return yield C._originValidation(d),function Aw(g){Un().location.href=g}(yield iv(d,h,m,ds(),b)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:b,promise:C}=this.eventManagers[h];return b?Promise.resolve(b):(wr(C,"If manager is not set, promise should be"),C)}const m=this.initAndGetManager(d);return this.eventManagers[h]={promise:m},m.catch(()=>{delete this.eventManagers[h]}),m}initAndGetManager(d){var h=this;return(0,w.A)(function*(){const m=yield function wu(g){return wt.apply(this,arguments)}(d),b=new $w(d);return m.register("authEvent",C=>(Ee(C?.authEvent,d,"invalid-auth-event"),{status:b.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:b},h.iframes[d._key()]=m,b})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(Lt,{type:Lt},b=>{var C;const P=null===(C=b?.[0])||void 0===C?void 0:C[Lt];void 0!==P&&h(!!P),gn(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Gl(g){return ps.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return me()||wa()||du()}};class sv{constructor(d){this.factorId=d}_process(d,h,m){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,m);case"signin":return this._finalizeSignIn(d,h.credential);default:return Pn("unexpected MultiFactorSessionType")}}}class Tu extends sv{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Tu(d)}_finalizeEnroll(d,h,m){return function Dw(g,d){return ze(g,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(g,d))}(d,{idToken:h,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function Ll(g,d){return ze(g,"POST","/v2/accounts/mfaSignIn:finalize",Ie(g,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sa=(()=>{class g{constructor(){}static assertion(h){return Tu._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var av="@firebase/auth";class Ja{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,w.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(m=>{d(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Za(){return window}(0,K.XA)("authIdTokenMaxAge"),function Wr(g){ch=g}({loadJS:g=>new Promise((d,h)=>{const m=document.createElement("script");m.setAttribute("src",g),m.onload=d,m.onerror=b=>{const C=mn("internal-error");C.customData=b,h(C)},m.type="text/javascript",m.charset="UTF-8",function uv(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Wo(g){(0,ue._registerComponent)(new Tt.uA("auth",(d,{options:h})=>{const m=d.getProvider("app").getImmediate(),b=d.getProvider("heartbeat"),C=d.getProvider("app-check-internal"),{apiKey:P,authDomain:z}=m.options;Ee(P&&!P.includes(":"),"invalid-api-key",{appName:m.name});const ge={apiKey:P,authDomain:z,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ue(g)},Be=new vo(m,b,C,ge);return function ER(g,d){const h=d?.persistence||[],m=(Array.isArray(h)?h:[h]).map(nt);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(m,d?.popupRedirectResolver)}(Be,h),Be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,m)=>{d.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new Tt.uA("auth-internal",d=>{const h=Dn(d.getProvider("auth").getImmediate());return new Ja(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(av,"1.7.9",function Kw(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,ue.registerVersion)(av,"1.7.9","esm2017")}("Browser");function dv(){return dv=(0,w.A)(function*(g,d,h){var m;const{BuildInfo:b}=Za();wr(d.sessionId,"AuthEvent did not contain a session ID");const C=yield function hv(g){return fv.apply(this,arguments)}(d.sessionId),P={};return du()?P.ibi=b.packageName:jo()?P.apn=b.packageName:gn(g,"operation-not-supported-in-this-environment"),b.displayName&&(P.appDisplayName=b.displayName),P.sessionId=C,iv(g,h,d.type,void 0,null!==(m=d.eventId)&&void 0!==m?m:void 0,P)}),dv.apply(this,arguments)}function Ph(){return(Ph=(0,w.A)(function*(g){const{BuildInfo:d}=Za(),h={};du()?h.iosBundleId=d.packageName:jo()?h.androidPackageName=d.packageName:gn(g,"operation-not-supported-in-this-environment"),yield Hl(g,h)})).apply(this,arguments)}function ag(){return(ag=(0,w.A)(function*(g,d,h){const{cordova:m}=Za();let b=()=>{};try{yield new Promise((C,P)=>{let z=null;function ge(){var tt;C();const mr=null===(tt=m.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof mr&&mr(),"function"==typeof h?.close&&h.close()}function Be(){z||(z=window.setTimeout(()=>{P(mn(g,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===document?.visibilityState&&Be()}d.addPassiveListener(ge),document.addEventListener("resume",Be,!1),jo()&&document.addEventListener("visibilitychange",Xe,!1),b=()=>{d.removePassiveListener(ge),document.removeEventListener("resume",Be,!1),document.removeEventListener("visibilitychange",Xe,!1),z&&window.clearTimeout(z)}})}finally{b()}})).apply(this,arguments)}function fv(){return(fv=(0,w.A)(function*(g){const d=function Ki(g){if(wr(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),h=new Uint8Array(d);for(let m=0;m<g.length;m++)h[m]=g.charCodeAt(m);return h}(g),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Qn extends $w{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInitialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,w.A)(function*(){yield d.initPromise})()}}function Zw(g){return pv.apply(this,arguments)}function pv(){return(pv=(0,w.A)(function*(g){const d=yield Du()._get(wo(g));return d&&(yield Du()._remove(wo(g))),d})).apply(this,arguments)}function tT(){const g=[];for(let h=0;h<20;h++){const m=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(m))}return g.join("")}function Du(){return nt(Qp)}function wo(g){return bt("authEvent",g.config.apiKey,g.name)}function Au(g){if(!g?.includes("?"))return{};const[d,...h]=g.split("?");return(0,K.I9)(h.join("?"))}const nT=class gv{constructor(){this._redirectPersistence=Zs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rg,this._overrideRedirectResult=Vw}_initialize(d){var h=this;return(0,w.A)(function*(){const m=d._key();let b=h.eventManagers.get(m);return b||(b=new Qn(d),h.eventManagers.set(m,b),h.attachCallbackListeners(d,b)),b})()}_openPopup(d){gn(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,m,b){var C=this;return(0,w.A)(function*(){!function Xw(g){var d,h,m,b,C,P,z,ge,Be,Xe;const tt=Za();Ee("function"==typeof(null===(d=tt?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ee(typeof(null===(h=tt?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ee("function"==typeof(null===(C=null===(b=null===(m=tt?.cordova)||void 0===m?void 0:m.plugins)||void 0===b?void 0:b.browsertab)||void 0===C?void 0:C.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(ge=null===(z=null===(P=tt?.cordova)||void 0===P?void 0:P.plugins)||void 0===z?void 0:z.browsertab)||void 0===ge?void 0:ge.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(Xe=null===(Be=tt?.cordova)||void 0===Be?void 0:Be.InAppBrowser)||void 0===Xe?void 0:Xe.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const P=yield C._initialize(d);yield P.initialized(),P.resetRedirect(),function Lw(){Zp.clear()}(),yield C._originValidation(d);const z=function px(g,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:tT(),postBody:null,tenantId:g.tenantId,error:mn(g,"no-auth-event")}}(d,m,b);yield function gx(g,d){return Du()._set(wo(g),d)}(d,z);const ge=yield function og(g,d,h){return dv.apply(this,arguments)}(d,z,h),Be=yield function Yw(g){const{cordova:d}=Za();return new Promise(h=>{d.plugins.browsertab.isAvailable(m=>{let b=null;m?d.plugins.browsertab.openUrl(g):b=d.InAppBrowser.open(g,function xp(g=(0,K.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),h(b)})})}(ge);return function Jw(g,d,h){return ag.apply(this,arguments)}(d,P,Be)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Qw(g){return Ph.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:m,handleOpenURL:b,BuildInfo:C}=Za(),P=setTimeout((0,w.A)(function*(){yield Zw(d),h.onEvent(mv())}),500),z=function(){var Xe=(0,w.A)(function*(tt){clearTimeout(P);const mr=yield Zw(d);let Na=null;mr&&tt?.url&&(Na=function eT(g,d){var h,m;const b=function cg(g){const d=Au(g),h=d.link?decodeURIComponent(d.link):void 0,m=Au(h).link,b=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Au(b).link||b||m||h||g}(d);if(b.includes("/__/auth/callback")){const C=Au(b),P=C.firebaseError?function mx(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(C.firebaseError)):null,z=null===(m=null===(h=P?.code)||void 0===h?void 0:h.split("auth/"))||void 0===m?void 0:m[1],ge=z?mn(z):null;return ge?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:ge,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:b,postBody:null}}return null}(mr,tt.url)),h.onEvent(Na||mv())});return function(mr){return Xe.apply(this,arguments)}}();typeof m<"u"&&"function"==typeof m.subscribe&&m.subscribe(null,z);const ge=b,Be=`${C.packageName.toLowerCase()}://`;Za().handleOpenURL=function(){var Xe=(0,w.A)(function*(tt){if(tt.toLowerCase().startsWith(Be)&&z({url:tt}),"function"==typeof ge)try{ge(tt)}catch(mr){console.error(mr)}});return function(tt){return Xe.apply(this,arguments)}}()}};function mv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mn("no-auth-event")}}function Su(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function rT(g=(0,K.ZQ)()){return!("file:"!==Su()&&"ionic:"!==Su()&&"capacitor:"!==Su()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wl(){try{const g=self.localStorage,d=Ih();if(g)return g.setItem(d,"1"),g.removeItem(d),!function _v(g=(0,K.ZQ)()){return function X$(){return(0,K.lT)()&&11===document?.documentMode}()||function Z$(g=(0,K.ZQ)()){return/Edge\/\d+/.test(g)}(g)}()||(0,K.zW)()}catch{return yv()&&(0,K.zW)()}return!1}function yv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ru(){return(function vx(){return"http:"===Su()||"https:"===Su()}()||(0,K.sr)()||rT())&&!function bx(){return(0,K.lV)()||(0,K.Ll)()}()&&Wl()&&!yv()}function lg(){return rT()&&typeof document<"u"}function iT(){return(iT=(0,w.A)(function*(){return!!lg()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const Us={LOCAL:"local",NONE:"none",SESSION:"session"},Fh=Ee,Ko="persistence";function Kl(g){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,w.A)(function*(g){yield g._initializationPromise;const d=Vh(),h=bt(Ko,g.config.apiKey,g.name);d&&d.setItem(h,g._getPersistence())})).apply(this,arguments)}function Vh(){var g;try{return(null===(g=function sT(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const vv=Ee;class Tc{constructor(){this.browserResolver=nt(Sn),this.cordovaResolver=nt(nT),this.underlyingResolver=null,this._redirectPersistence=Zs,this._completeRedirectFn=rg,this._overrideRedirectResult=Vw}_initialize(d){var h=this;return(0,w.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,m,b){var C=this;return(0,w.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openPopup(d,h,m,b)})()}_openRedirect(d,h,m,b){var C=this;return(0,w.A)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._openRedirect(d,h,m,b)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return lg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,w.A)(function*(){if(d.underlyingResolver)return;const h=yield function dg(){return iT.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function bv(g){return g.unwrap()}function cT(g){return lT(g)}function lT(g){const{_tokenResponse:d}=g instanceof K.g?g.customData:g;if(!d)return null;if(!(g instanceof K.g)&&"temporaryProof"in d&&"phoneNumber"in d)return zo.credentialFromResult(g);const h=d.providerId;if(!h||h===Ct.PASSWORD)return null;let m;switch(h){case Ct.GOOGLE:m=AR;break;case Ct.FACEBOOK:m=vy;break;case Ct.GITHUB:m=SR;break;case Ct.TWITTER:m=aw;break;default:const{oauthIdToken:b,oauthAccessToken:C,oauthTokenSecret:P,pendingToken:z,nonce:ge}=d;return C||P||b||z?z?h.startsWith("saml.")?vc._create(h,z):Vs._fromParams({providerId:h,signInMethod:h,pendingToken:z,idToken:b,accessToken:C}):new Kr(h).credential({idToken:b,accessToken:C,rawNonce:ge}):null}return g instanceof K.g?m.credentialFromError(g):m.credentialFromResult(g)}function xi(g,d){return d.catch(h=>{throw h instanceof K.g&&function uT(g,d){var h;const m=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new dT(g,function Fy(g,d){var h;const m=(0,K.Ku)(g),b=d;return Ee(d.customData.operationType,m,"argument-error"),Ee(null===(h=b.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,m,"argument-error"),Oy._fromError(m,b)}(g,d));else if(m){const b=lT(d),C=d;b&&(C.credential=b,C.tenantId=m.tenantId||void 0,C.email=m.email||void 0,C.phoneNumber=m.phoneNumber||void 0)}}(g,h),h}).then(h=>{const b=h.user;return{operationType:h.operationType,credential:cT(h),additionalUserInfo:Ai(h),user:Ra.getOrCreate(b)}})}function ec(g,d){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,w.A)(function*(g,d){const h=yield d;return{verificationId:h.verificationId,confirm:m=>xi(g,h.confirm(m))}})).apply(this,arguments)}class dT{constructor(d,h){this.resolver=h,this.auth=function aT(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return xi(bv(this.auth),this.resolver.resolveSignIn(d))}}class Ra{constructor(d){this._delegate=d,this.multiFactor=function By(g){const d=(0,K.Ku)(g);return Vy.has(d)||Vy.set(d,Pl._fromUser(d)),Vy.get(d)}(d)}static getOrCreate(d){return Ra.USER_MAP.has(d)||Ra.USER_MAP.set(d,new Ra(d)),Ra.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,w.A)(function*(){return xi(h.auth,hw(h._delegate,d))})()}linkWithPhoneNumber(d,h){var m=this;return(0,w.A)(function*(){return ec(m.auth,function Ca(g,d,h){return Ul.apply(this,arguments)}(m._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,w.A)(function*(){return xi(h.auth,function q$(g,d,h){return kw.apply(this,arguments)}(h._delegate,d,Tc))})()}linkWithRedirect(d){var h=this;return(0,w.A)(function*(){return yield Kl(Dn(h.auth)),ZR(h._delegate,d,Tc)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,w.A)(function*(){return xi(h.auth,mu(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return ec(this.auth,function jl(g,d,h){return gr.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return xi(this.auth,function G$(g,d,h){return Mw.apply(this,arguments)}(this._delegate,d,Tc))}reauthenticateWithRedirect(d){var h=this;return(0,w.A)(function*(){return yield Kl(Dn(h.auth)),_i(h._delegate,d,Tc)})()}sendEmailVerification(d){return function NR(g,d){return zp.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,w.A)(function*(){return yield function jp(g,d){return _h.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function PR(g,d){const h=(0,K.Ku)(g);return(0,ue._isFirebaseServerApp)(h.auth.app)?Promise.reject(mt(h.auth)):Vr(h,d,null)}(this._delegate,d)}updatePassword(d){return function OR(g,d){return Vr((0,K.Ku)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function zi(g,d){return Ah.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Ew(g,d){return xy.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function MR(g,d,h){return Sy.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ra.USER_MAP=new WeakMap;const xa=Ee;let xu=(()=>{class g{constructor(h,m){if(this.app=h,m.isInitialized())return this._delegate=m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=h.options;xa(b,"invalid-api-key",{appName:h.name}),xa(b,"invalid-api-key",{appName:h.name});const C=typeof window<"u"?Tc:void 0;this._delegate=m.initialize({options:{persistence:Ex(b,h.name),popupRedirectResolver:C}}),this._delegate._updateErrorMap(Lr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ra.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,m){!function wR(g,d,h){const m=Dn(g);Ee(m._canInitEmulator,m,"emulator-config-failed"),Ee(/^https?:\/\//.test(d),m,"invalid-emulator-scheme");const b=!!h?.disableWarnings,C=JE(d),{host:P,port:z}=function V$(g){const d=JE(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!h)return{host:"",port:null};const m=h[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(m);if(b){const C=b[1];return{host:C,port:Ls(m.substr(C.length+1))}}{const[C,P]=m.split(":");return{host:C,port:Ls(P)}}}(d);m.config.emulator={url:`${C}//${P}${null===z?"":`:${z}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:P,port:z,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function Et(){function g(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,h,m)}applyActionCode(h){return function _w(g,d){return yh.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return vh(this._delegate,h)}confirmPasswordReset(h,m){return function ln(g,d,h){return Ka.apply(this,arguments)}(this._delegate,h,m)}createUserWithEmailAndPassword(h,m){var b=this;return(0,w.A)(function*(){return xi(b._delegate,function RR(g,d,h){return bh.apply(this,arguments)}(b._delegate,h,m))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function xR(g,d){return Xs.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function bw(g,d){const h=gh.parseLink(d);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,w.A)(function*(){xa(Ru(),h._delegate,"operation-not-supported-in-this-environment");const m=yield function ex(g,d){return Rh.apply(this,arguments)}(h._delegate,Tc);return m?xi(h._delegate,Promise.resolve(m)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function _x(g,d){Dn(g)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,m,b){const{next:C,error:P,complete:z}=Ur(h,m,b);return this._delegate.onAuthStateChanged(C,P,z)}onIdTokenChanged(h,m,b){const{next:C,error:P,complete:z}=Ur(h,m,b);return this._delegate.onIdTokenChanged(C,P,z)}sendSignInLinkToEmail(h,m){return function vw(g,d,h){return _u.apply(this,arguments)}(this._delegate,h,m)}sendPasswordResetEmail(h,m){return function mw(g,d,h){return Io.apply(this,arguments)}(this._delegate,h,m||void 0)}setPersistence(h){var m=this;return(0,w.A)(function*(){let b;switch(function Ix(g,d){Fh(Object.values(Us).includes(d),g,"invalid-persistence-type"),(0,K.lV)()?Fh(d!==Us.SESSION,g,"unsupported-persistence-type"):(0,K.Ll)()?Fh(d===Us.NONE,g,"unsupported-persistence-type"):yv()?Fh(d===Us.NONE||d===Us.LOCAL&&(0,K.zW)(),g,"unsupported-persistence-type"):Fh(d===Us.NONE||Wl(),g,"unsupported-persistence-type")}(m._delegate,h),h){case Us.SESSION:b=Zs;break;case Us.LOCAL:b=(yield nt(kr)._isAvailable())?kr:Qp;break;case Us.NONE:b=jt;break;default:return gn("argument-error",{appName:m._delegate.name})}return m._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return xi(this._delegate,function bc(g){return by.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return xi(this._delegate,Hp(this._delegate,h))}signInWithCustomToken(h){return xi(this._delegate,function Ty(g,d){return fw.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,m){return xi(this._delegate,function yw(g,d,h){return(0,ue._isFirebaseServerApp)(g.app)?Promise.reject(mt(g)):Hp((0,K.Ku)(g),Qt.credential(d,h)).catch(function(){var m=(0,w.A)(function*(b){throw"auth/password-does-not-meet-requirements"===b.code&&Ic(g),b});return function(b){return m.apply(this,arguments)}}())}(this._delegate,h,m))}signInWithEmailLink(h,m){return xi(this._delegate,function Iw(g,d,h){return Cy.apply(this,arguments)}(this._delegate,h,m))}signInWithPhoneNumber(h,m){return ec(this._delegate,function zy(g,d,h){return Eu.apply(this,arguments)}(this._delegate,h,m))}signInWithPopup(h){var m=this;return(0,w.A)(function*(){return xa(Ru(),m._delegate,"operation-not-supported-in-this-environment"),xi(m._delegate,function Qy(g,d,h){return Nw.apply(this,arguments)}(m._delegate,h,Tc))})()}signInWithRedirect(h){var m=this;return(0,w.A)(function*(){return xa(Ru(),m._delegate,"operation-not-supported-in-this-environment"),yield Kl(m._delegate),Q$(m._delegate,h,Tc)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Go(g,d){return vn.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Us,g})();function Ur(g,d,h){let m=g;"function"!=typeof g&&({next:m,error:d,complete:h}=g);const b=m;return{next:P=>b(P&&Ra.getOrCreate(P)),error:d,complete:h}}function Ex(g,d){const h=function oT(g,d){const h=Vh();if(!h)return[];const m=bt(Ko,g,d);switch(h.getItem(m)){case Us.NONE:return[jt];case Us.LOCAL:return[kr,Zs];case Us.SESSION:return[Zs];default:return[]}}(g,d);if(typeof self<"u"&&!h.includes(kr)&&h.push(kr),typeof window<"u")for(const m of[Qp,Zs])h.includes(m)||h.push(m);return h.includes(jt)||h.push(jt),h}class jn{constructor(){this.providerId="phone",this._delegate=new zo(bv(Z.A.auth()))}static credential(d,h){return zo.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}jn.PHONE_SIGN_IN_METHOD=zo.PHONE_SIGN_IN_METHOD,jn.PROVIDER_ID=zo.PROVIDER_ID;const Ev=Ee;class wx{constructor(d,h,m=Z.A.app()){var b;Ev(null===(b=m.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:m.name}),this._delegate=new Xp(m.auth(),d,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tc(g){g.INTERNAL.registerComponent(new Tt.uA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),m=d.getProvider("auth");return new xu(h,m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qt,FacebookAuthProvider:vy,GithubAuthProvider:SR,GoogleAuthProvider:AR,OAuthProvider:Kr,SAMLAuthProvider:Bp,PhoneAuthProvider:jn,PhoneMultiFactorGenerator:Sa,RecaptchaVerifier:wx,TwitterAuthProvider:aw,Auth:xu,AuthCredential:lh,Error:K.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.14")}(Z.A)},73:()=>{const us=":";Error;const Ie=function(Q,...G){if(Ie.translate){const Te=Ie.translate(Q,G);Q=Te[0],G=Te[1]}let he=Kt(Q[0],Q.raw[0]);for(let Te=1;Te<Q.length;Te++)he+=G[Te-1]+Kt(Q[Te],Q.raw[Te]);return he},ze=":";function Kt(Q,G){return G.charAt(0)===ze?Q.substring(function wr(Q,G){for(let he=1,Te=1;he<Q.length;he++,Te++)if("\\"===G[Te])Te++;else if(Q[he]===us)return he;throw new Error(`Unterminated $localize metadata block in "${G}".`)}(Q,G)+1):Q}globalThis.$localize=Ie},467:(us,be,k)=>{function w(ue,K,D,Bt,Tt,en,Ct){try{var pe=ue[en](Ct),se=pe.value}catch(Je){return void D(Je)}pe.done?K(se):Promise.resolve(se).then(Bt,Tt)}function Z(ue){return function(){var K=this,D=arguments;return new Promise(function(Bt,Tt){var en=ue.apply(K,D);function Ct(se){w(en,Bt,Tt,Ct,pe,"next",se)}function pe(se){w(en,Bt,Tt,Ct,pe,"throw",se)}Ct(void 0)})}}k.d(be,{A:()=>Z})},635:(us,be,k)=>{function K(re,ae){var _e={};for(var ve in re)Object.prototype.hasOwnProperty.call(re,ve)&&ae.indexOf(ve)<0&&(_e[ve]=re[ve]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(ve=Object.getOwnPropertySymbols(re);Ve<ve.length;Ve++)ae.indexOf(ve[Ve])<0&&Object.prototype.propertyIsEnumerable.call(re,ve[Ve])&&(_e[ve[Ve]]=re[ve[Ve]])}return _e}function Je(re,ae,_e,ve){return new(_e||(_e=Promise))(function(Ie,ze){function Kt(he){try{G(ve.next(he))}catch(Te){ze(Te)}}function Q(he){try{G(ve.throw(he))}catch(Te){ze(Te)}}function G(he){he.done?Ie(he.value):function Ve(Ie){return Ie instanceof _e?Ie:new _e(function(ze){ze(Ie)})}(he.value).then(Kt,Q)}G((ve=ve.apply(re,ae||[])).next())})}function Mn(re){return this instanceof Mn?(this.v=re,this):new Mn(re)}function gn(re,ae,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,ve=_e.apply(re,ae||[]),Ie=[];return Ve={},ze("next"),ze("throw"),ze("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function ze(Le){ve[Le]&&(Ve[Le]=function(Ze){return new Promise(function(Bn,Ut){Ie.push([Le,Ze,Bn,Ut])>1||Kt(Le,Ze)})})}function Kt(Le,Ze){try{!function Q(Le){Le.value instanceof Mn?Promise.resolve(Le.value.v).then(G,he):Te(Ie[0][2],Le)}(ve[Le](Ze))}catch(Bn){Te(Ie[0][3],Bn)}}function G(Le){Kt("next",Le)}function he(Le){Kt("throw",Le)}function Te(Le,Ze){Le(Ze),Ie.shift(),Ie.length&&Kt(Ie[0][0],Ie[0][1])}}function ls(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ae=re[Symbol.asyncIterator];return ae?ae.call(re):(re=function rn(re){var ae="function"==typeof Symbol&&Symbol.iterator,_e=ae&&re[ae],ve=0;if(_e)return _e.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&ve>=re.length&&(re=void 0),{value:re&&re[ve++],done:!re}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),_e={},ve("next"),ve("throw"),ve("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ve(Ie){_e[Ie]=re[Ie]&&function(ze){return new Promise(function(Kt,Q){!function Ve(Ie,ze,Kt,Q){Promise.resolve(Q).then(function(G){Ie({value:G,done:Kt})},ze)}(Kt,Q,(ze=re[Ie](ze)).done,ze.value)})}}}k.d(be,{AQ:()=>gn,N3:()=>Mn,Tt:()=>K,sH:()=>Je,xN:()=>ls}),"function"==typeof SuppressedError&&SuppressedError}},us=>{var be=w=>us(us.s=w);be(73),be(318)}]);